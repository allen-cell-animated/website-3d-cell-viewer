/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{var e,t,n,r,i={6199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(5215),a=n(6336),s=n(5319),l=n(2477),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),u=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new l.Logger("@firebase/app"),m=function(){function e(e,t,n){var r,i,l=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return l}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),u=c.next();!u.done;u=c.next()){var h=u.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=d),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},e}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var s=o.name;if("string"!=typeof s||!s)throw u.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw u.create("duplicate-app",{appName:s});var l=new e(n,o,r);return t[s]=l,l},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var l=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&l.push("and"),a&&l.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(l.join(" "))}c(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:l.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw u.create("invalid-log-argument",{appName:name});l.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:c,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||d,!a.contains(t,e))throw u.create("no-app",{appName:e});return t[e]}function c(s){var l,c,h=s.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw u.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,h).apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),m=f.next();!m.done;m=f.next()){var g=m.value;t[g]._addComponent(s)}}catch(e){l={error:e}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(m);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),v=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,e)};var x=g;!function(e){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new v(e)}),"PRIVATE")),e.registerVersion(h,"0.6.11",void 0),e.registerVersion("fire-js","")}(x),t.default=x,t.firebase=x},5319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5215),i=n(6336),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),l=s[0],c=s[1],u=this.normalizeInstanceIdentifier(l);try{var h=this.getOrInitializeService(u);c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spread(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=l,t.Provider=s},1241:(e,t,n)=>{"use strict";var r=n(5215),i=n(6199),o=n(2477),a=n(6336),s=n(7036),l=n(5319),c=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(t,e),t}(Error),d=new o.Logger("@firebase/firestore");function f(){return d.logLevel}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.DEBUG){var i=t.map(v);d.debug.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+e],i))}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.ERROR){var i=t.map(v);d.error.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+e],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.WARN){var i=t.map(v);d.warn.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+e],i))}}function v(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function y(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function b(e,t){e||y()}function x(e,t){return e}function _(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function w(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function S(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var E=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&y(),void 0===n?n=e.length-t:n>e.length-t&&y(),this.segments=e,this.offset=t,this.t=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.i(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.o(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.u=function(e){return e=void 0===e?1:e,this.o(this.segments,this.offset+e,this.length-e)},e.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},e.prototype.l=function(){return this.segments[this.offset]},e.prototype._=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.m=function(){return 0===this.length},e.prototype.T=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.I=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},e.i=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.o=function(e,n,r){return new t(e,n,r)},t.prototype.R=function(){return this.A().join("/")},t.prototype.toString=function(){return this.R()},t.g=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new h(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.P=function(){return new t([])},t}(E),M=/^[_a-zA-Z][_a-zA-Z0-9]*$/,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.o=function(e,n,r){return new t(e,n,r)},t.V=function(e){return M.test(e)},t.prototype.R=function(){return this.A().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.V(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.R()},t.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},t.v=function(){return new t(["__name__"])},t.S=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new h(u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new h(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new h(u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.P=function(){return new t([])},t}(E),A=function(){function e(e){this.path=e}return e.D=function(t){return new e(C.g(t))},e.C=function(t){return new e(C.g(t).u(5))},e.prototype.N=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===C.i(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.i=function(e,t){return C.i(e.path,t.path)},e.F=function(e){return e.length%2==0},e.$=function(t){return new e(new C(t.slice()))},e}();function P(e,t){if(0!==t.length)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+q(t.length,"argument")+".")}function R(e,t,n){if(t.length!==n)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires "+q(n,"argument")+", but was called with "+q(t.length,"argument")+".")}function I(e,t,n){if(t.length<n)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires at least "+q(n,"argument")+", but was called with "+q(t.length,"argument")+".")}function O(e,t,n,r){if(t.length<n||t.length>r)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+q(t.length,"argument")+".")}function k(e,t,n,r){F(e,t,W(n)+" argument",r)}function L(e,t,n,r){void 0!==r&&k(e,t,n,r)}function N(e,t,n,r){F(e,t,n+" option",r)}function D(e,t,n,r){void 0!==r&&N(e,t,n,r)}function z(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var l=s[a];if(l===r)return;o.push(j(l))}var c=j(r);throw new h(u.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function U(e,t,n,r){if(!t.some((function(e){return e===r})))throw new h(u.INVALID_ARGUMENT,"Invalid value "+j(r)+" provided to function "+e+"() for its "+W(n)+" argument. Acceptable values: "+t.join(", "));return r}function F(e,t,n,r){if(!("object"===t?B(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=j(r);throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function B(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function j(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":y()}function V(e,t,n){if(void 0===n)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+W(t)+" argument, but it was undefined.")}function $(e,t,n){w(t,(function(t,r){if(n.indexOf(t)<0)throw new h(u.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function H(e,t,n,r){var i=j(r);return new h(u.INVALID_ARGUMENT,"Function "+e+"() requires its "+W(n)+" argument to be a "+t+", but it was: "+i)}function G(e,t,n){if(n<=0)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires its "+W(t)+" argument to be a positive number, but it was: "+n+".")}function W(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function q(e,t){return e+" "+t+(1===e?"":"s")}function X(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Y=function(){function e(){}return e.k=function(){for(var e=62*Math.floor(256/62),t="";t.length<20;)for(var n=X(40),r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return t},e}();function K(e,t){return e<t?-1:e>t?1:0}function Z(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function J(e){return e+"\0"}var Q=function(){function e(e){this.M=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.M,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.M)},e.prototype.O=function(){return 2*this.M.length},e.prototype.L=function(e){return K(this.M,e.M)},e.prototype.isEqual=function(e){return this.M===e.M},e}();Q.B=new Q("");var ee=function(){function e(e){this.q=e}return e.fromBase64String=function(t){try{return new e(Q.fromBase64String(t))}catch(t){throw new h(u.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(Q.fromUint8Array(t))},e.prototype.toBase64=function(){return this.q.toBase64()},e.prototype.toUint8Array=function(){return this.q.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this.q.isEqual(e.q)},e}();function te(){if("undefined"==typeof Uint8Array)throw new h(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ne(){if("undefined"==typeof atob)throw new h(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromBase64String=function(e){R("Blob.fromBase64String",arguments,1),k("Blob.fromBase64String","string",1,e),ne();try{return new t(Q.fromBase64String(e))}catch(e){throw new h(u.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(R("Blob.fromUint8Array",arguments,1),te(),!(e instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,e);return new t(Q.fromUint8Array(e))},t.prototype.toBase64=function(){return R("Blob.toBase64",arguments,0),ne(),e.prototype.toBase64.call(this)},t.prototype.toUint8Array=function(){return R("Blob.toUint8Array",arguments,0),te(),e.prototype.toUint8Array.call(this)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(ee),ie=function(e,t,n,r,i,o){this.U=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o},oe=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.L=function(e){return K(this.projectId,e.projectId)||K(this.database,e.database)},e}(),ae=function(){function e(e,t){this.K=e,this.G=t,this.H={}}return e.prototype.get=function(e){var t=this.K(e),n=this.H[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.G(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.K(e),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.H[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.K(e),n=this.H[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],e))return 1===n.length?delete this.H[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){w(this.H,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.m=function(){return S(this.H)},e}(),se=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new h(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new h(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new h(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new h(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.Y=function(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),le=function(){function e(e){this.timestamp=e}return e.J=function(t){return new e(t)},e.min=function(){return new e(new se(0,0))},e.prototype.L=function(e){return this.timestamp.Y(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.Z=function(){return this.timestamp},e}();function ce(e){return null==e}function ue(e){return 0===e&&1/e==-1/0}function he(e){return"number"==typeof e&&Number.isInteger(e)&&!ue(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var de=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.tt=null};function fe(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new de(e,t,n,r,i,o,a)}function pe(e){var t=x(e);if(null===t.tt){var n=t.path.R();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.R()+e.op.toString()+ot(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.R()+t.dir;var t})).join(","),ce(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ur(t.startAt)),t.endAt&&(n+="|ub:",n+=ur(t.endAt)),t.tt=n}return t.tt}function me(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!tt(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dr(e.startAt,t.startAt)&&dr(e.endAt,t.endAt)}function ge(e){return A.F(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ve,ye,be=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=le.min()),void 0===o&&(o=le.min()),void 0===a&&(a=Q.B),this.target=e,this.targetId=t,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.st=function(t){return new e(this.target,this.targetId,this.et,t,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.it=function(t,n){return new e(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.rt=function(t){return new e(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,t,this.resumeToken)},e}(),xe=function(e){this.count=e};function _e(e){switch(e){case u.OK:return y();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return y()}}function we(e){if(void 0===e)return m("GRPC error has no .code"),u.UNKNOWN;switch(e){case ve.OK:return u.OK;case ve.CANCELLED:return u.CANCELLED;case ve.UNKNOWN:return u.UNKNOWN;case ve.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case ve.INTERNAL:return u.INTERNAL;case ve.UNAVAILABLE:return u.UNAVAILABLE;case ve.UNAUTHENTICATED:return u.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case ve.NOT_FOUND:return u.NOT_FOUND;case ve.ALREADY_EXISTS:return u.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return u.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case ve.ABORTED:return u.ABORTED;case ve.OUT_OF_RANGE:return u.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return u.UNIMPLEMENTED;case ve.DATA_LOSS:return u.DATA_LOSS;default:return y()}}(ye=ve||(ve={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var Se=function(){function e(e,t){this.i=e,this.root=t||Ce.EMPTY}return e.prototype.ot=function(t,n){return new e(this.i,this.root.ot(t,n,this.i).copy(null,null,Ce.at,null,null))},e.prototype.remove=function(t){return new e(this.i,this.root.remove(t,this.i).copy(null,null,Ce.at,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.m();){var n=this.i(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.m();){var r=this.i(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.m=function(){return this.root.m()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.ct=function(){return this.root.ct()},e.prototype.ut=function(){return this.root.ut()},e.prototype.ht=function(e){return this.root.ht(e)},e.prototype.forEach=function(e){this.ht((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.ht((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.lt=function(e){return this.root.lt(e)},e.prototype._t=function(){return new Ee(this.root,null,this.i,!1)},e.prototype.ft=function(e){return new Ee(this.root,e,this.i,!1)},e.prototype.dt=function(){return new Ee(this.root,null,this.i,!0)},e.prototype.wt=function(e){return new Ee(this.root,e,this.i,!0)},e}(),Ee=function(){function e(e,t,n,r){this.Tt=r,this.Et=[];for(var i=1;!e.m();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.Tt?e.left:e.right;else{if(0===i){this.Et.push(e);break}this.Et.push(e),e=this.Tt?e.right:e.left}}return e.prototype.It=function(){var e=this.Et.pop(),t={key:e.key,value:e.value};if(this.Tt)for(e=e.left;!e.m();)this.Et.push(e),e=e.right;else for(e=e.right;!e.m();)this.Et.push(e),e=e.left;return t},e.prototype.At=function(){return this.Et.length>0},e.prototype.Rt=function(){if(0===this.Et.length)return null;var e=this.Et[this.Et.length-1];return{key:e.key,value:e.value}},e}(),Ce=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.m=function(){return!1},e.prototype.ht=function(e){return this.left.ht(e)||e(this.key,this.value)||this.right.ht(e)},e.prototype.lt=function(e){return this.right.lt(e)||e(this.key,this.value)||this.left.lt(e)},e.prototype.min=function(){return this.left.m()?this:this.left.min()},e.prototype.ct=function(){return this.min().key},e.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},e.prototype.ot=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.ot(e,t,n))).gt()},e.prototype.Pt=function(){if(this.left.m())return e.EMPTY;var t=this;return t.left.yt()||t.left.left.yt()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.Pt(),null)).gt()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(t,i.key)){if(i.right.m())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.gt()},e.prototype.yt=function(){return this.color},e.prototype.gt=function(){var e=this;return e.right.yt()&&!e.left.yt()&&(e=e.St()),e.left.yt()&&e.left.left.yt()&&(e=e.bt()),e.left.yt()&&e.right.yt()&&(e=e.Dt()),e},e.prototype.Vt=function(){var e=this.Dt();return e.right.left.yt()&&(e=(e=(e=e.copy(null,null,null,null,e.right.bt())).St()).Dt()),e},e.prototype.vt=function(){var e=this.Dt();return e.left.left.yt()&&(e=(e=e.bt()).Dt()),e},e.prototype.St=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.bt=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.Dt=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.Ct=function(){var e=this.Nt();return Math.pow(2,e)<=this.size+1},e.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw y();if(this.right.yt())throw y();var e=this.left.Nt();if(e!==this.right.Nt())throw y();return e+(this.yt()?0:1)},e}();Ce.EMPTY=null,Ce.RED=!0,Ce.at=!1,Ce.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.ot=function(e,t,n){return new Ce(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.m=function(){return!0},e.prototype.ht=function(e){return!1},e.prototype.lt=function(e){return!1},e.prototype.ct=function(){return null},e.prototype.ut=function(){return null},e.prototype.yt=function(){return!1},e.prototype.Ct=function(){return!0},e.prototype.Nt=function(){return 0},e}());var Me=function(){function e(e){this.i=e,this.data=new Se(this.i)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.ct()},e.prototype.last=function(){return this.data.ut()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.ht((function(t,n){return e(t),!1}))},e.prototype.Ft=function(e,t){for(var n=this.data.ft(e[0]);n.At();){var r=n.It();if(this.i(r.key,e[1])>=0)return;t(r.key)}},e.prototype.xt=function(e,t){var n;for(n=void 0!==t?this.data.ft(t):this.data._t();n.At();)if(!e(n.It().key))return},e.prototype.$t=function(e){var t=this.data.ft(e);return t.At()?t.It().key:null},e.prototype._t=function(){return new Te(this.data._t())},e.prototype.ft=function(e){return new Te(this.data.ft(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).ot(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.m=function(){return this.data.m()},e.prototype.kt=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data._t(),r=t.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.i(i,o))return!1}return!0},e.prototype.A=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.i);return n.data=t,n},e}(),Te=function(){function e(e){this.Mt=e}return e.prototype.It=function(){return this.Mt.It().key},e.prototype.At=function(){return this.Mt.At()},e}(),Ae=new Se(A.i);function Pe(){return Ae}function Re(){return Pe()}var Ie=new Se(A.i);function Oe(){return Ie}var ke=new Se(A.i),Le=new Me(A.i);function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Le,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var De=new Me(K);function ze(){return De}var Ue=function(){function e(e){this.i=e?function(t,n){return e(t,n)||A.i(t.key,n.key)}:function(e,t){return A.i(e.key,t.key)},this.Ot=Oe(),this.Lt=new Se(this.i)}return e.Bt=function(t){return new e(t.i)},e.prototype.has=function(e){return null!=this.Ot.get(e)},e.prototype.get=function(e){return this.Ot.get(e)},e.prototype.first=function(){return this.Lt.ct()},e.prototype.last=function(){return this.Lt.ut()},e.prototype.m=function(){return this.Lt.m()},e.prototype.indexOf=function(e){var t=this.Ot.get(e);return t?this.Lt.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.Lt.ht((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.Ot.ot(e.key,e),t.Lt.ot(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.Ot.remove(e),this.Lt.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.Lt._t(),r=t.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.i=this.i,r.Ot=t,r.Lt=n,r},e}(),Fe=function(){function e(){this.qt=new Se(A.i)}return e.prototype.track=function(e){var t=e.doc.key,n=this.qt.get(t);n?0!==e.type&&3===n.type?this.qt=this.qt.ot(t,e):3===e.type&&1!==n.type?this.qt=this.qt.ot(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.qt=this.qt.ot(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.qt=this.qt.ot(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.qt=this.qt.remove(t):1===e.type&&2===n.type?this.qt=this.qt.ot(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.qt=this.qt.ot(t,{type:2,doc:e.doc}):y():this.qt=this.qt.ot(t,e)},e.prototype.Ut=function(){var e=[];return this.qt.ht((function(t,n){e.push(n)})),e},e}(),Be=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=a,this.Kt=s}return e.Gt=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ue.Bt(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.jt===e.jt&&this.Wt.isEqual(e.Wt)&&Yn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.Qt.isEqual(e.Qt)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),je=function(){function e(e,t,n,r,i){this.nt=e,this.zt=t,this.Ht=n,this.Yt=r,this.Jt=i}return e.Xt=function(t,n){var r=new Map;return r.set(t,Ve.Zt(t,n)),new e(le.min(),r,ze(),Pe(),Ne())},e}(),Ve=function(){function e(e,t,n,r,i){this.resumeToken=e,this.te=t,this.ee=n,this.ne=r,this.se=i}return e.Zt=function(t,n){return new e(Q.B,n,Ne(),Ne(),Ne())},e}(),$e=function(e,t,n,r){this.ie=e,this.removedTargetIds=t,this.key=n,this.re=r},He=function(e,t){this.targetId=e,this.oe=t},Ge=function(e,t,n,r){void 0===n&&(n=Q.B),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},We=function(){function e(){this.ae=0,this.ce=Ye(),this.ue=Q.B,this.he=!1,this.le=!0}return Object.defineProperty(e.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),e.prototype.de=function(e){e.O()>0&&(this.le=!0,this.ue=e)},e.prototype.we=function(){var e=Ne(),t=Ne(),n=Ne();return this.ce.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:y()}})),new Ve(this.ue,this.he,e,t,n)},e.prototype.me=function(){this.le=!1,this.ce=Ye()},e.prototype.Te=function(e,t){this.le=!0,this.ce=this.ce.ot(e,t)},e.prototype.Ee=function(e){this.le=!0,this.ce=this.ce.remove(e)},e.prototype.Ie=function(){this.ae+=1},e.prototype.Ae=function(){this.ae-=1},e.prototype.Re=function(){this.le=!0,this.he=!0},e}(),qe=function(){function e(e){this.ge=e,this.Pe=new Map,this.ye=Pe(),this.Ve=Xe(),this.pe=new Me(K)}return e.prototype.be=function(e){for(var t=0,n=e.ie;t<n.length;t++){var r=n[t];e.re instanceof kn?this.ve(r,e.re):e.re instanceof Ln&&this.Se(r,e.key,e.re)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var a=o[i];this.Se(a,e.key,e.re)}},e.prototype.De=function(e){var t=this;this.Ce(e,(function(n){var r=t.Ne(n);switch(e.state){case 0:t.Fe(n)&&r.de(e.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(e.resumeToken);break;case 2:r.Ae(),r._e||t.removeTarget(n);break;case 3:t.Fe(n)&&(r.Re(),r.de(e.resumeToken));break;case 4:t.Fe(n)&&(t.xe(n),r.de(e.resumeToken));break;default:y()}}))},e.prototype.Ce=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Pe.forEach((function(e,r){n.Fe(r)&&t(r)}))},e.prototype.$e=function(e){var t=e.targetId,n=e.oe.count,r=this.ke(t);if(r){var i=r.target;if(ge(i))if(0===n){var o=new A(i.path);this.Se(t,o,new Ln(o,le.min()))}else b(1===n);else this.Me(t)!==n&&(this.xe(t),this.pe=this.pe.add(t))}},e.prototype.Oe=function(e){var t=this,n=new Map;this.Pe.forEach((function(r,i){var o=t.ke(i);if(o){if(r.te&&ge(o.target)){var a=new A(o.target.path);null!==t.ye.get(a)||t.Le(i,a)||t.Se(i,a,new Ln(a,e))}r.fe&&(n.set(i,r.we()),r.me())}}));var r=Ne();this.Ve.forEach((function(e,n){var i=!0;n.xt((function(e){var n=t.ke(e);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new je(e,n,this.pe,this.ye,r);return this.ye=Pe(),this.Ve=Xe(),this.pe=new Me(K),i},e.prototype.ve=function(e,t){if(this.Fe(e)){var n=this.Le(e,t.key)?2:0;this.Ne(e).Te(t.key,n),this.ye=this.ye.ot(t.key,t),this.Ve=this.Ve.ot(t.key,this.Be(t.key).add(e))}},e.prototype.Se=function(e,t,n){if(this.Fe(e)){var r=this.Ne(e);this.Le(e,t)?r.Te(t,1):r.Ee(t),this.Ve=this.Ve.ot(t,this.Be(t).delete(e)),n&&(this.ye=this.ye.ot(t,n))}},e.prototype.removeTarget=function(e){this.Pe.delete(e)},e.prototype.Me=function(e){var t=this.Ne(e).we();return this.ge.qe(e).size+t.ee.size-t.se.size},e.prototype.Ie=function(e){this.Ne(e).Ie()},e.prototype.Ne=function(e){var t=this.Pe.get(e);return t||(t=new We,this.Pe.set(e,t)),t},e.prototype.Be=function(e){var t=this.Ve.get(e);return t||(t=new Me(K),this.Ve=this.Ve.ot(e,t)),t},e.prototype.Fe=function(e){var t=null!==this.ke(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ke=function(e){var t=this.Pe.get(e);return t&&t._e?null:this.ge.Ue(e)},e.prototype.xe=function(e){var t=this;this.Pe.set(e,new We),this.ge.qe(e).forEach((function(n){t.Se(e,n,null)}))},e.prototype.Le=function(e,t){return this.ge.qe(e).has(t)},e}();function Xe(){return new Se(A.i)}function Ye(){return new Se(A.i)}function Ke(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ze(e){var t=e.mapValue.fields.__previous_value__;return Ke(t)?Ze(t):t}function Je(e){var t=st(e.mapValue.fields.__local_write_time__.timestampValue);return new se(t.seconds,t.nanos)}var Qe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function et(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ke(e)?4:10:y()}function tt(e,t){var n=et(e);if(n!==et(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Je(e).isEqual(Je(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=st(e.timestampValue),r=st(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ct(e.bytesValue).isEqual(ct(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lt(e.geoPointValue.latitude)===lt(t.geoPointValue.latitude)&&lt(e.geoPointValue.longitude)===lt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lt(e.integerValue)===lt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=lt(e.doubleValue),r=lt(t.doubleValue);return n===r?ue(n)===ue(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],tt);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_(n)!==_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tt(n[i],r[i])))return!1;return!0}(e,t);default:return y()}}function nt(e,t){return void 0!==(e.values||[]).find((function(e){return tt(e,t)}))}function rt(e,t){var n=et(e),r=et(t);if(n!==r)return K(n,r);switch(n){case 0:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=lt(e.integerValue||e.doubleValue),r=lt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return it(e.timestampValue,t.timestampValue);case 4:return it(Je(e),Je(t));case 5:return K(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ct(e),r=ct(t);return n.L(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=K(n[i],r[i]);if(0!==o)return o}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=K(lt(e.latitude),lt(t.latitude));return 0!==n?n:K(lt(e.longitude),lt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=rt(n[i],r[i]);if(o)return o}return K(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=K(r[a],o[a]);if(0!==s)return s;var l=rt(n[r[a]],i[o[a]]);if(0!==l)return l}return K(r.length,o.length)}(e.mapValue,t.mapValue);default:throw y()}}function it(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);var n=st(e),r=st(t),i=K(n.seconds,r.seconds);return 0!==i?i:K(n.nanos,r.nanos)}function ot(e){return at(e)}function at(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=st(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ct(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,A.C(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=at(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+at(e.fields[o])}return t+"}"}(e.mapValue):y();var t,n}function st(e){if(b(!!e),"string"==typeof e){var t=0,n=Qe.exec(e);if(b(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:lt(e.seconds),nanos:lt(e.nanos)}}function lt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ct(e){return"string"==typeof e?Q.fromBase64String(e):Q.fromUint8Array(e)}function ut(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.R()}}function ht(e){return!!e&&"integerValue"in e}function dt(e){return!!e&&"arrayValue"in e}function ft(e){return!!e&&"nullValue"in e}function pt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mt(e){return!!e&&"mapValue"in e}var gt={asc:"ASCENDING",desc:"DESCENDING"},vt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yt=function(e,t){this.U=e,this.Qe=t};function bt(e){return{integerValue:""+e}}function xt(e,t){if(e.Qe){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ue(t)?"-0":t}}function _t(e,t){return he(t)?bt(t):xt(e,t)}function wt(e,t){return e.Qe?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function St(e,t){return e.Qe?t.toBase64():t.toUint8Array()}function Et(e,t){return wt(e,t.Z())}function Ct(e){return b(!!e),le.J(function(e){var t=st(e);return new se(t.seconds,t.nanos)}(e))}function Mt(e,t){return function(e){return new C(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).R()}function Tt(e){var t=C.g(e);return b(Kt(t)),t}function At(e,t){return Mt(e.U,t.path)}function Pt(e,t){var n=Tt(t);return b(n.get(1)===e.U.projectId),b(!n.get(3)&&!e.U.database||n.get(3)===e.U.database),new A(kt(n))}function Rt(e,t){return Mt(e.U,t)}function It(e){var t=Tt(e);return 4===t.length?C.P():kt(t)}function Ot(e){return new C(["projects",e.U.projectId,"databases",e.U.database]).R()}function kt(e){return b(e.length>4&&"documents"===e.get(4)),e.u(5)}function Lt(e,t,n){return{name:At(e,t),fields:n.proto.mapValue.fields}}function Nt(e,t){var n;if(t instanceof _n)n={update:Lt(e,t.key,t.value)};else if(t instanceof Tn)n={delete:At(e,t.key)};else if(t instanceof wn)n={update:Lt(e,t.key,t.data),updateMask:Yt(t.We)};else if(t instanceof En)n={transform:{document:At(e,t.key),fieldTransforms:t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof tn)return{fieldPath:t.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof nn)return{fieldPath:t.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof on)return{fieldPath:t.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof sn)return{fieldPath:t.field.R(),increment:n.je};throw y()}(0,e)}))}};else{if(!(t instanceof An))return y();n={verify:At(e,t.key)}}return t.Ge.Ke||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Et(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y()}(e,t.Ge)),n}function Dt(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?fn.updateTime(Ct(e.updateTime)):void 0!==e.exists?fn.exists(e.exists):fn.ze()}(t.currentDocument):fn.ze();if(t.update){t.update.name;var r=Pt(e,t.update.name),i=new Pn({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new un(t.map((function(e){return T.S(e)})))}(t.updateMask);return new wn(r,i,o,n)}return new _n(r,i,n)}if(t.delete){var a=Pt(e,t.delete);return new Tn(a,n)}if(t.transform){var s=Pt(e,t.transform.document),l=t.transform.fieldTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)b("REQUEST_TIME"===t.setToServerValue),n=new tn;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new nn(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new on(i)}else"increment"in t?n=new sn(e,t.increment):y();var o=T.S(t.fieldPath);return new hn(o,n)}(e,t)}));return b(!0===n.exists),new En(s,l)}if(t.verify){var c=Pt(e,t.verify);return new An(c,n)}return y()}function zt(e,t){return{documents:[Rt(e,t.path)]}}function Ut(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Rt(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Rt(e,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(pt(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NAN"}};if(ft(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pt(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NOT_NAN"}};if(ft(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gt(e.field),op:Ht(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gt(e.field),direction:$t(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.Qe||ce(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=jt(t.startAt)),t.endAt&&(n.structuredQuery.endAt=jt(t.endAt)),n}function Ft(e){var t=It(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Bt(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new fr(Wt(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var l=null;n.limit&&(l=function(e){var t;return ce(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Vt(n.startAt));var u=null;return n.endAt&&(u=Vt(n.endAt)),Gn(zn(t,i,s,a,l,"F",c,u))}function Bt(e){return e?void 0!==e.unaryFilter?[Xt(e)]:void 0!==e.fieldFilter?[qt(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Bt(e)})).reduce((function(e,t){return e.concat(t)})):y():[]}function jt(e){return{before:e.before,values:e.position}}function Vt(e){var t=!!e.before,n=e.values||[];return new cr(n,t)}function $t(e){return gt[e]}function Ht(e){return vt[e]}function Gt(e){return{fieldPath:e.R()}}function Wt(e){return T.S(e.fieldPath)}function qt(e){return er.create(Wt(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xt(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Wt(e.unaryFilter.field);return er.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Wt(e.unaryFilter.field);return er.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wt(e.unaryFilter.field);return er.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wt(e.unaryFilter.field);return er.create(i,"!=",{nullValue:"NULL_VALUE"});default:return y()}}function Yt(e){var t=[];return e.fields.forEach((function(e){return t.push(e.R())})),{fieldPaths:t}}function Kt(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Zt=function(){this.He=void 0};function Jt(e,t,n){return e instanceof tn?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nn?rn(e,t):e instanceof on?an(e,t):function(e,t){var n=en(e,t),r=ln(n)+ln(e.je);return ht(n)&&ht(e.je)?bt(r):xt(e.serializer,r)}(e,t)}function Qt(e,t,n){return e instanceof nn?rn(e,t):e instanceof on?an(e,t):n}function en(e,t){return e instanceof sn?ht(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(Zt),nn=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return r.__extends(t,e),t}(Zt);function rn(e,t){for(var n=cn(t),r=function(e){n.some((function(t){return tt(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var on=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return r.__extends(t,e),t}(Zt);function an(e,t){for(var n=cn(t),r=function(e){n=n.filter((function(t){return!tt(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var sn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).serializer=t,r.je=n,r}return r.__extends(t,e),t}(Zt);function ln(e){return lt(e.integerValue||e.doubleValue)}function cn(e){return dt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var un=function(){function e(e){this.fields=e,e.sort(T.i)}return e.prototype.Ye=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].T(e))return!0;return!1},e.prototype.isEqual=function(e){return Z(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),hn=function(e,t){this.field=e,this.transform=t},dn=function(e,t){this.version=e,this.transformResults=t},fn=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.ze=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function pn(e,t){return void 0!==e.updateTime?t instanceof kn&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t instanceof kn}var mn=function(){};function gn(e,t,n){return e instanceof _n?function(e,t,n){return new kn(e.key,n.version,e.value,{hasCommittedMutations:!0})}(e,0,n):e instanceof wn?function(e,t,n){if(!pn(e.Ge,t))return new Nn(e.key,n.version);var r=Sn(e,t);return new kn(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):e instanceof En?function(e,t,n){if(b(null!=n.transformResults),!pn(e.Ge,t))return new Nn(e.key,n.version);var r=Cn(0,t),i=function(e,t,n){var r=[];b(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=null;t instanceof kn&&(s=t.field(o.field)),r.push(Qt(a,s,n[i]))}return r}(e.fieldTransforms,t,n.transformResults),o=n.version,a=Mn(e,r.data(),i);return new kn(e.key,o,a,{hasCommittedMutations:!0})}(e,t,n):function(e,t,n){return new Ln(e.key,n.version,{hasCommittedMutations:!0})}(e,0,n)}function vn(e,t,n,r){return e instanceof _n?function(e,t){if(!pn(e.Ge,t))return t;var n=xn(t);return new kn(e.key,n,e.value,{Je:!0})}(e,t):e instanceof wn?function(e,t){if(!pn(e.Ge,t))return t;var n=xn(t),r=Sn(e,t);return new kn(e.key,n,r,{Je:!0})}(e,t):e instanceof En?function(e,t,n,r){if(!pn(e.Ge,t))return t;var i=Cn(0,t),o=function(e,t,n,r){for(var i=[],o=0,a=e;o<a.length;o++){var s=a[o],l=s.transform,c=null;n instanceof kn&&(c=n.field(s.field)),null===c&&r instanceof kn&&(c=r.field(s.field)),i.push(Jt(l,c,t))}return i}(e.fieldTransforms,n,t,r),a=Mn(e,i.data(),o);return new kn(e.key,i.version,a,{Je:!0})}(e,t,r,n):function(e,t){return pn(e.Ge,t)?new Ln(e.key,le.min()):t}(e,t)}function yn(e,t){return e instanceof En?function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t instanceof kn?t.field(o.field):void 0,s=en(o.transform,a||null);null!=s&&(n=null==n?(new Rn).set(o.field,s):n.set(o.field,s))}return n?n.Xe():null}(e,t):null}function bn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.Ge.isEqual(t.Ge)&&(0===e.type?e.value.isEqual(t.value):1===e.type?e.data.isEqual(t.data)&&e.We.isEqual(t.We):2!==e.type||Z(e.fieldTransforms,e.fieldTransforms,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nn&&t instanceof nn||e instanceof on&&t instanceof on?Z(e.elements,t.elements,tt):e instanceof sn&&t instanceof sn?tt(e.je,t.je):e instanceof tn&&t instanceof tn}(e.transform,t.transform)}(e,t)})))}function xn(e){return e instanceof kn?e.version:le.min()}var _n=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).key=t,i.value=n,i.Ge=r,i.type=0,i}return r.__extends(t,e),t}(mn),wn=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this)||this).key=t,o.data=n,o.We=r,o.Ge=i,o.type=1,o}return r.__extends(t,e),t}(mn);function Sn(e,t){return function(e,t){var n=new Rn(t);return e.We.fields.forEach((function(t){if(!t.m()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.Xe()}(e,t instanceof kn?t.data():Pn.empty())}var En=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.fieldTransforms=n,r.type=2,r.Ge=fn.exists(!0),r}return r.__extends(t,e),t}(mn);function Cn(e,t){return t}function Mn(e,t,n){for(var r=new Rn(t),i=0;i<e.fieldTransforms.length;i++){var o=e.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var Tn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ge=n,r.type=3,r}return r.__extends(t,e),t}(mn),An=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ge=n,r.type=4,r}return r.__extends(t,e),t}(mn),Pn=function(){function e(e){this.proto=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.m())return this.proto;for(var t=this.proto,n=0;n<e.length-1;++n){if(!t.mapValue.fields)return null;if(!mt(t=t.mapValue.fields[e.get(n)]))return null}return(t=(t.mapValue.fields||{})[e._()])||null},e.prototype.isEqual=function(e){return tt(this.proto,e.proto)},e}(),Rn=function(){function e(e){void 0===e&&(e=Pn.empty()),this.Ze=e,this.tn=new Map}return e.prototype.set=function(e,t){return this.en(e,t),this},e.prototype.delete=function(e){return this.en(e,null),this},e.prototype.en=function(e,t){for(var n=this.tn,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===et(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e._(),t)},e.prototype.Xe=function(){var e=this.nn(T.P(),this.tn);return null!=e?new Pn(e):this.Ze},e.prototype.nn=function(e,t){var n=this,r=!1,i=this.Ze.field(e),o=mt(i)?Object.assign({},i.mapValue.fields):{};return t.forEach((function(t,i){if(t instanceof Map){var a=n.nn(e.child(i),t);null!=a&&(o[i]=a,r=!0)}else null!==t?(o[i]=t,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},e}();function In(e){var t=[];return w(e.fields||{},(function(e,n){var r=new T([e]);if(mt(n)){var i=In(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new un(t)}var On=function(e,t){this.key=e,this.version=t},kn=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(t,e),t.prototype.field=function(e){return this.sn.field(e)},t.prototype.data=function(){return this.sn},t.prototype.rn=function(){return this.sn.proto},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.Je===e.Je&&this.hasCommittedMutations===e.hasCommittedMutations&&this.sn.isEqual(e.sn)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(On),Ln=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(On),Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(On),Dn=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=a,this.endAt=s,this.cn=null,this.un=null,this.startAt,this.endAt};function zn(e,t,n,r,i,o,a,s){return new Dn(e,t,n,r,i,o,a,s)}function Un(e){return new Dn(e)}function Fn(e){return!ce(e.limit)&&"F"===e.an}function Bn(e){return!ce(e.limit)&&"L"===e.an}function jn(e){return e.on.length>0?e.on[0].field:null}function Vn(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.hn())return r.field}return null}function $n(e){return null!==e.collectionGroup}function Hn(e){var t=x(e);if(null===t.cn){t.cn=[];var n=Vn(t),r=jn(t);if(null!==n&&null===r)n.p()||t.cn.push(new fr(n)),t.cn.push(new fr(T.v(),"asc"));else{for(var i=!1,o=0,a=t.on;o<a.length;o++){var s=a[o];t.cn.push(s),s.field.p()&&(i=!0)}if(!i){var l=t.on.length>0?t.on[t.on.length-1].dir:"asc";t.cn.push(new fr(T.v(),l))}}}return t.cn}function Gn(e){var t=x(e);if(!t.un)if("F"===t.an)t.un=fe(t.path,t.collectionGroup,Hn(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Hn(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new fr(o.field,a))}var s=t.endAt?new cr(t.endAt.position,!t.endAt.before):null,l=t.startAt?new cr(t.startAt.position,!t.startAt.before):null;t.un=fe(t.path,t.collectionGroup,n,t.filters,t.limit,s,l)}return t.un}function Wn(e,t,n){return new Dn(e.path,e.collectionGroup,e.on.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qn(e,t){return new Dn(e.path,e.collectionGroup,e.on.slice(),e.filters.slice(),e.limit,e.an,t,e.endAt)}function Xn(e,t){return new Dn(e.path,e.collectionGroup,e.on.slice(),e.filters.slice(),e.limit,e.an,e.startAt,t)}function Yn(e,t){return me(Gn(e),Gn(t))&&e.an===t.an}function Kn(e){return pe(Gn(e))+"|lt:"+e.an}function Zn(e){return"Query(target="+function(e){var t=e.path.R();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.R()+" "+t.op+" "+ot(t.value);var t})).join(", ")+"]"),ce(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return(t=e).field.R()+" ("+t.dir+")";var t})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+ur(e.startAt)),e.endAt&&(t+=", endAt: "+ur(e.endAt)),"Target("+t+")"}(Gn(e))+"; limitType="+e.an+")"}function Jn(e,t){return function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.N(e.collectionGroup)&&e.path.T(n):A.F(e.path)?e.path.isEqual(n):e.path.I(n)}(e,t)&&function(e,t){for(var n=0,r=e.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===t.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!hr(e.startAt,Hn(e),t)||e.endAt&&hr(e.endAt,Hn(e),t))}(e,t)}function Qn(e){return function(t,n){for(var r=!1,i=0,o=Hn(e);i<o.length;i++){var a=o[i],s=pr(a,t,n);if(0!==s)return s;r=r||a.field.p()}return 0}}var er=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return r.__extends(t,e),t.create=function(e,n,r){if(e.p())return"in"===n||"not-in"===n?this.ln(e,n,r):new tr(e,n,r);if(ft(r)){if("=="!==n&&"!="!==n)throw new h(u.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new t(e,n,r)}if(pt(r)){if("=="!==n&&"!="!==n)throw new h(u.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new t(e,n,r)}return"array-contains"===n?new or(e,r):"in"===n?new ar(e,r):"not-in"===n?new sr(e,r):"array-contains-any"===n?new lr(e,r):new t(e,n,r)},t.ln=function(e,t,n){return"in"===t?new nr(e,n):new rr(e,n)},t.prototype.matches=function(e){var t=e.field(this.field);return"!="===this.op?null!==t&&this._n(rt(t,this.value)):null!==t&&et(this.value)===et(t)&&this._n(rt(t,this.value))},t.prototype._n=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}},t.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),tr=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=A.C(r.referenceValue),i}return r.__extends(t,e),t.prototype.matches=function(e){var t=A.i(e.key,this.key);return this._n(t)},t}(er),nr=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ir(0,n),r}return r.__extends(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(er),rr=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ir(0,n),r}return r.__extends(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(er);function ir(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return A.C(e.referenceValue)}))}var or=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return dt(t)&&nt(t.arrayValue,this.value)},t}(er),ar=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&nt(this.value.arrayValue,t)},t}(er),sr=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){if(nt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.field(this.field);return null!==t&&!nt(this.value.arrayValue,t)},t}(er),lr=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return!(!dt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return nt(t.value.arrayValue,e)}))},t}(er),cr=function(e,t){this.position=e,this.before=t};function ur(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return ot(e)})).join(",")}function hr(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.p()?A.i(A.C(a.referenceValue),n.key):rt(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function dr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!tt(e.position[n],t.position[n]))return!1;return!0}var fr=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function pr(e,t,n){var r=e.field.p()?A.i(t.key,n.key):function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?rt(r,i):y()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}function mr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var gr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},vr=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=e,this.dn=t,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return e.prototype.reset=function(){this.En=0},e.prototype.Rn=function(){this.En=this.Tn},e.prototype.gn=function(e){var t=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,(function(){return t.An=Date.now(),e()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},e.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},e.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},e.prototype.Pn=function(){return(Math.random()-.5)*this.En},e}(),yr=function(){function e(e){var t=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,e((function(e){t.Sn=!0,t.result=e,t.bn&&t.bn(e)}),(function(e){t.Sn=!0,t.error=e,t.vn&&t.vn(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.Dn&&y(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(t,this.result):new e((function(e,i){r.bn=function(n){r.Nn(t,n).next(e,i)},r.vn=function(t){r.Cn(n,t).next(e,i)}}))},e.prototype.Fn=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.xn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.Nn=function(t,n){return t?this.xn((function(){return t(n)})):e.resolve(n)},e.prototype.Cn=function(t,n){return t?this.xn((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.$n=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.kn=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.$n(r)},e}(),br=function(){function e(t,n,r){this.name=t,this.version=n,this.Mn=r,12.2===e.On(a.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return p("SimpleDb","Removing database:",e),Cr(window.indexedDB.deleteDatabase(e)).Fn()},e.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(e.Bn())return!0;var t=a.getUA(),n=e.On(t),r=0<n&&n<10,i=e.qn(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.Bn=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Un)},e.Qn=function(e,t){return e.store(t)},e.On=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.qn=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.Wn=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new _r(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new h(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new _r(e,n))},i.onupgradeneeded=function(e){p("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Mn.createOrUpgrade(t,i.transaction,e.oldVersion,n.version).next((function(){p("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(e){return n.jn(e)}),this.db)]}}))}))},e.prototype.Kn=function(e){this.jn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,c;return r.__generator(this,(function(u){switch(u.label){case 0:o="readonly"===t,a=0,s=function(){var t,s,c,u,h;return r.__generator(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,l.Wn(e)];case 2:return l.db=r.sent(),t=Sr.open(l.db,e,o?"readonly":"readwrite",n),s=i(t).catch((function(e){return t.abort(e),yr.reject(e)})).Fn(),c={},s.catch((function(){})),[4,t.Gn];case 3:return[2,(c.value=(r.sent(),s),c)];case 4:return u=r.sent(),h="FirebaseError"!==u.name&&a<3,p("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),l.close(),h?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}}))},l=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=u.sent()))return[2,c.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),xr=function(){function e(e){this.zn=e,this.Hn=!1,this.Yn=null}return Object.defineProperty(e.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.zn=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Hn=!0},e.prototype.Xn=function(e){this.Yn=e},e.prototype.delete=function(){return Cr(this.zn.delete())},e}(),_r=function(e){function t(t,n){var r=this;return(r=e.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return r.__extends(t,e),t}(h);function wr(e){return"IndexedDbTransactionError"===e.name}var Sr=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Zn=new gr,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){t.error?n.Zn.reject(new _r(e,t.error)):n.Zn.resolve()},this.transaction.onerror=function(t){var r=Tr(t.target.error);n.Zn.reject(new _r(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new _r(n,t)}},Object.defineProperty(e.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.Zn.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Er(t)},e}(),Er=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cr(n)},e.prototype.add=function(e){return p("SimpleDb","ADD",this.store.name,e,e),Cr(this.store.add(e))},e.prototype.get=function(e){var t=this;return Cr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return p("SimpleDb","DELETE",this.store.name,e),Cr(this.store.delete(e))},e.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Cr(this.store.count())},e.prototype.ts=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.es(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.ns=function(e,t){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(e,t,n){return n.delete()}))},e.prototype.rs=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.es(r,t)},e.prototype.os=function(e){var t=this.cursor({});return new yr((function(n,r){t.onerror=function(e){var t=Tr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.es=function(e,t){var n=[];return new yr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new xr(i),a=t(i.primaryKey,i.value,o);if(a instanceof yr){var s=a.catch((function(e){return o.done(),yr.reject(e)}));n.push(s)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return yr.$n(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.ss?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Cr(e){return new yr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Tr(e.target.error);n(t)}}))}var Mr=!1;function Tr(e){var t=br.On(a.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Mr||(Mr=!0,setTimeout((function(){throw r}),0)),r}}return e}function Ar(){return"undefined"!=typeof window?window:null}function Pr(){return"undefined"!=typeof document?document:null}var Rr=function(){function e(e,t,n,r,i){this.cs=e,this.dn=t,this.us=n,this.op=r,this.hs=i,this.ls=new gr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(e){}))}return e._s=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.fs=setTimeout((function(){return t.ds()}),e)},e.prototype.pn=function(){return this.ds()},e.prototype.cancel=function(e){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new h(u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.ds=function(){var e=this;this.cs.ws((function(){return null!==e.fs?(e.clearTimeout(),e.op().then((function(t){return e.ls.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},e}(),Ir=function(){function e(){var e=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new vr(this,"async_queue_retry"),this.Vs=function(){var t=Pr();t&&p("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.ys.Vn()};var t=Pr();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(e.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),e.prototype.ws=function(e){this.enqueue(e)},e.prototype.bs=function(e){this.vs(),this.Ss(e)},e.prototype.Ds=function(){if(!this.Is){this.Is=!0;var e=Pr();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vs)}},e.prototype.enqueue=function(e){return this.vs(),this.Is?new Promise((function(e){})):this.Ss(e)},e.prototype.Cs=function(e){var t=this;this.ws((function(){return t.Es.push(e),t.Ns()}))},e.prototype.Ns=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!wr(e=n.sent()))throw e;return p("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return t.Ns()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Ss=function(e){var t=this,n=this.Ts.then((function(){return t.gs=!0,e().catch((function(e){throw t.Rs=e,t.gs=!1,m("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gs=!1,e}))}));return this.Ts=n,n},e.prototype.yn=function(e,t,n){var r=this;this.vs(),this.Ps.indexOf(e)>-1&&(t=0);var i=Rr._s(this,e,t,n,(function(e){return r.Fs(e)}));return this.As.push(i),i},e.prototype.vs=function(){this.Rs&&y()},e.prototype.xs=function(){},e.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,e=this.Ts];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ts)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.ks=function(e){for(var t=0,n=this.As;t<n.length;t++)if(n[t].dn===e)return!0;return!1},e.prototype.Ms=function(e){var t=this;return this.$s().then((function(){t.As.sort((function(e,t){return e.us-t.us}));for(var n=0,r=t.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==e&&i.dn===e)break}return t.$s()}))},e.prototype.Os=function(e){this.Ps.push(e)},e.prototype.Fs=function(e){var t=this.As.indexOf(e);this.As.splice(t,1)},e}();function Or(e,t){if(m("AsyncQueue",t+": "+e),wr(e))return new h(u.UNAVAILABLE,t+": "+e);throw e}var kr=function(){this.Ls=void 0,this.listeners=[]},Lr=function(){this.Bs=new ae((function(e){return Kn(e)}),Yn),this.onlineState="Unknown",this.qs=new Set};function Nr(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=x(e),i=t.query,o=!1,(a=n.Bs.get(i))||(o=!0,a=new kr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.Us(i)];case 2:return s.Ls=r.sent(),[3,4];case 3:return l=r.sent(),c=Or(l,"Initialization of query '"+Zn(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.Bs.set(i,a),a.listeners.push(t),t.Qs(n.onlineState),a.Ls&&t.Ws(a.Ls)&&Fr(n),[2]}}))}))}function Dr(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){return n=x(e),i=t.query,o=!1,(a=n.Bs.get(i))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.Bs.delete(i),n.js(i))]:[2]}))}))}function zr(e,t){for(var n=x(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,l=n.Bs.get(s);if(l){for(var c=0,u=l.listeners;c<u.length;c++)u[c].Ws(a)&&(r=!0);l.Ls=a}}r&&Fr(n)}function Ur(e,t,n){var r=x(e),i=r.Bs.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.Bs.delete(t)}function Fr(e){e.qs.forEach((function(e){e.next()}))}var Br=function(){function e(e,t,n){this.query=e,this.Ks=t,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Ws=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Be(e.query,e.docs,e.Qt,t,e.Wt,e.fromCache,e.jt,!0)}var o=!1;return this.Gs?this.Hs(e)&&(this.Ks.next(e),o=!0):this.Ys(e,this.onlineState)&&(this.Js(e),o=!0),this.zs=e,o},e.prototype.onError=function(e){this.Ks.error(e)},e.prototype.Qs=function(e){this.onlineState=e;var t=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,e)&&(this.Js(this.zs),t=!0),t},e.prototype.Ys=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.Xs&&n||e.docs.m()&&"Offline"!==t)},e.prototype.Hs=function(e){if(e.docChanges.length>0)return!0;var t=this.zs&&this.zs.hasPendingWrites!==e.hasPendingWrites;return!(!e.jt&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.Js=function(e){e=Be.Gt(e.query,e.docs,e.Wt,e.fromCache),this.Gs=!0,this.Ks.next(e)},e}(),jr=function(){function e(e){this.uid=e}return e.prototype.Zs=function(){return null!=this.uid},e.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();jr.UNAUTHENTICATED=new jr(null),jr.ei=new jr("google-credentials-uid"),jr.ni=new jr("first-party-uid");var Vr=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.si=function(e){return n.ii(e)},this.ri=function(e){return t.oi(e)})}return e.prototype.ii=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.ri&&this.ri(e),e},e}();function $r(e,t){return"firestore_clients_"+e+"_"+t}function Hr(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.Zs()&&(r+="_"+t.uid),r}function Gr(e,t){return"firestore_targets_"+e+"_"+t}Vr.ai=-1;var Wr=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.ci=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new h(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(m("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.ui=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),qr=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.ci=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new h(r.error.code,r.error.message)),i?new e(t,r.state,o):(m("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.ui=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Xr=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.ci=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ze(),a=0;i&&a<r.activeTargetIds.length;++a)i=he(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(m("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Yr=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.ci=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(m("SharedClientState","Failed to parse online state: "+t),null)},e}(),Kr=function(){function e(){this.activeTargetIds=ze()}return e.prototype.hi=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.li=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.ui=function(){var e={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Zr=function(){function e(e,t,n,r,i){this.window=e,this.fn=t,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Se(K),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=$r(this.persistenceKey,this._i),this.Ri=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Kr),this.gi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vi=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return e.Ln=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,l,c,u,h,d=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)(i=n[t])!==this._i&&(o=this.getItem($r(this.persistenceKey,i)))&&(a=Xr.ci(i,o))&&(this.Ti=this.Ti.ot(a.clientId,a));for(this.bi(),(s=this.storage.getItem(this.Vi))&&(l=this.vi(s))&&this.Si(l),c=0,u=this.Ii;c<u.length;c++)h=u[c],this.mi(h);return this.Ii=[],this.window.addEventListener("unload",(function(){return d.Di()})),this.Ei=!0,[2]}}))}))},e.prototype.oi=function(e){this.setItem(this.Ri,JSON.stringify(e))},e.prototype.Ci=function(){return this.Ni(this.Ti)},e.prototype.Fi=function(e){var t=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.xi=function(e){this.$i(e,"pending")},e.prototype.ki=function(e,t,n){this.$i(e,t,n),this.Mi(e)},e.prototype.Oi=function(e){var t="not-current";if(this.Fi(e)){var n=this.storage.getItem(Gr(this.persistenceKey,e));if(n){var r=qr.ci(e,n);r&&(t=r.state)}}return this.Li.hi(e),this.bi(),t},e.prototype.Bi=function(e){this.Li.li(e),this.bi()},e.prototype.qi=function(e){return this.Li.activeTargetIds.has(e)},e.prototype.Ui=function(e){this.removeItem(Gr(this.persistenceKey,e))},e.prototype.Qi=function(e,t,n){this.Wi(e,t,n)},e.prototype.ji=function(e,t,n){var r=this;t.forEach((function(e){r.Mi(e)})),this.currentUser=e,n.forEach((function(e){r.xi(e)}))},e.prototype.Ki=function(e){this.Gi(e)},e.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){p("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.mi=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(p("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return r.__awaiter(t,void 0,void 0,(function(){var e,t,i,o,a,s;return r.__generator(this,(function(r){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return e=this.zi(n.key),[2,this.Hi(e,null)];if(t=this.Yi(n.key,n.newValue))return[2,this.Hi(t.clientId,t)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Ji(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.Vi){if(null!==n.newValue&&(a=this.vi(n.newValue)))return[2,this.Si(a)]}else n.key===this.Ri&&(s=function(e){var t=Vr.ai;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n),t=n}catch(e){m("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Vr.ai&&this.si(s)}else this.Ii.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),e.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},e.prototype.$i=function(e,t,n){var r=new Wr(this.currentUser,e,t,n),i=Hr(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ui())},e.prototype.Mi=function(e){var t=Hr(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Gi=function(e){var t={clientId:this._i,onlineState:e};this.storage.setItem(this.Vi,JSON.stringify(t))},e.prototype.Wi=function(e,t,n){var r=Gr(this.persistenceKey,e),i=new qr(e,t,n);this.setItem(r,i.ui())},e.prototype.zi=function(e){var t=this.gi.exec(e);return t?t[1]:null},e.prototype.Yi=function(e,t){var n=this.zi(e);return Xr.ci(n,t)},e.prototype.Ji=function(e,t){var n=this.Pi.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wr.ci(new jr(i),r,t)},e.prototype.Zi=function(e,t){var n=this.yi.exec(e),r=Number(n[1]);return qr.ci(r,t)},e.prototype.vi=function(e){return Yr.ci(e)},e.prototype.Xi=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.fi.er(e.batchId,e.state,e.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.tr=function(e){return this.fi.nr(e.targetId,e.state,e.error)},e.prototype.Hi=function(e,t){var n=this,r=t?this.Ti.ot(e,t):this.Ti.remove(e),i=this.Ni(this.Ti),o=this.Ni(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.fi.sr(a,s).then((function(){n.Ti=r}))},e.prototype.Si=function(e){this.Ti.get(e.clientId)&&this.di(e.onlineState)},e.prototype.Ni=function(e){var t=ze();return e.forEach((function(e,n){t=t.kt(n.activeTargetIds)})),t},e}(),Jr=function(){function e(){this.ir=new Kr,this.rr={},this.di=null,this.si=null}return e.prototype.xi=function(e){},e.prototype.ki=function(e,t,n){},e.prototype.Oi=function(e){return this.ir.hi(e),this.rr[e]||"not-current"},e.prototype.Qi=function(e,t,n){this.rr[e]=t},e.prototype.Bi=function(e){this.ir.li(e)},e.prototype.qi=function(e){return this.ir.activeTargetIds.has(e)},e.prototype.Ui=function(e){delete this.rr[e]},e.prototype.Ci=function(){return this.ir.activeTargetIds},e.prototype.Fi=function(e){return this.ir.activeTargetIds.has(e)},e.prototype.start=function(){return this.ir=new Kr,Promise.resolve()},e.prototype.ji=function(e,t,n){},e.prototype.Ki=function(e){},e.prototype.Di=function(){},e.prototype.oi=function(e){},e}(),Qr=function(){function e(e,t,n,r){this.batchId=e,this.ar=t,this.baseMutations=n,this.mutations=r}return e.prototype.cr=function(e,t,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=gn(o,t,r[i]))}return t},e.prototype.hr=function(e,t){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=vn(i,t,t,this.ar))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var l=s[a];l.key.isEqual(e)&&(t=vn(l,t,o,this.ar))}return t},e.prototype.lr=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.hr(r.key,e.get(r.key));i&&(n=n.ot(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ne())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(function(e,t){return bn(e,t)}))&&Z(this.baseMutations,e.baseMutations,(function(e,t){return bn(e,t)}))},e}(),ei=function(){function e(e,t,n,r){this.batch=e,this._r=t,this.ur=n,this.dr=r}return e.from=function(t,n,r){b(t.mutations.length===r.length);for(var i=ke,o=t.mutations,a=0;a<o.length;a++)i=i.ot(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),ti=function(){function e(){this.wr=new ae((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.mr=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return this.Tr},set:function(e){this.Tr=e},enumerable:!1,configurable:!0}),e.prototype.Er=function(e,t){this.Ir(),this.readTime=t,this.wr.set(e.key,e)},e.prototype.Ar=function(e,t){this.Ir(),t&&(this.readTime=t),this.wr.set(e,null)},e.prototype.Rr=function(e,t){this.Ir();var n=this.wr.get(t);return void 0!==n?yr.resolve(n):this.gr(e,t)},e.prototype.getEntries=function(e,t){return this.Pr(e,t)},e.prototype.apply=function(e){return this.Ir(),this.mr=!0,this.yr(e)},e.prototype.Ir=function(){},e}(),ni="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ri=function(){function e(){this.Vr=[]}return e.prototype.pr=function(e){this.Vr.push(e)},e.prototype.br=function(){this.Vr.forEach((function(e){return e()}))},e}(),ii=function(){function e(e,t,n){this.vr=e,this.Sr=t,this.Dr=n}return e.prototype.Cr=function(e,t){var n=this;return this.Sr.Nr(e,t).next((function(r){return n.Fr(e,t,r)}))},e.prototype.Fr=function(e,t,n){return this.vr.Rr(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].hr(t,e);return e}))},e.prototype.$r=function(e,t,n){var r=Re();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].hr(e,t);r=r.ot(e,t)})),r},e.prototype.kr=function(e,t){var n=this;return this.vr.getEntries(e,t).next((function(t){return n.Mr(e,t)}))},e.prototype.Mr=function(e,t){var n=this;return this.Sr.Or(e,t).next((function(r){var i=n.$r(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Ln(e,le.min())),o=o.ot(e,t)})),o}))},e.prototype.Lr=function(e,t,n){return function(e){return A.F(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Br(e,t.path):$n(t)?this.qr(e,t,n):this.Ur(e,t,n)},e.prototype.Br=function(e,t){return this.Cr(e,new A(t)).next((function(e){var t=Oe();return e instanceof kn&&(t=t.ot(e.key,e)),t}))},e.prototype.qr=function(e,t,n){var r=this,i=t.collectionGroup,o=Oe();return this.Dr.Qr(e,i).next((function(a){return yr.forEach(a,(function(a){var s=function(e,t){return new Dn(t,null,e.on.slice(),e.filters.slice(),e.limit,e.an,e.startAt,e.endAt)}(t,a.child(i));return r.Ur(e,s,n).next((function(e){e.forEach((function(e,t){o=o.ot(e,t)}))}))})).next((function(){return o}))}))},e.prototype.Ur=function(e,t,n){var r,i,o=this;return this.vr.Lr(e,t,n).next((function(n){return r=n,o.Sr.Wr(e,t)})).next((function(t){return i=t,o.jr(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var l=s[a],c=l.key,u=r.get(c),h=vn(l,u,u,o.ar);r=h instanceof kn?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){Jn(t,n)||(r=r.remove(e))})),r}))},e.prototype.jr=function(e,t,n){for(var r=Ne(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var l=s[a];l instanceof wn&&null===n.get(l.key)&&(r=r.add(l.key))}var c=n;return this.vr.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof kn&&(c=c.ot(e,t))})),c}))},e}(),oi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.Kr=n,this.Gr=r}return e.zr=function(t,n){for(var r=Ne(),i=Ne(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}();function ai(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=K(n,i);return 0===a?K(r,o):a}var si=function(){function e(e){this.Hr=e,this.buffer=new Me(ai),this.Yr=0}return e.prototype.Jr=function(){return++this.Yr},e.prototype.Xr=function(e){var t=[e,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ai(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),li={Zr:!1,eo:0,no:0,so:0},ci=function(){function e(e,t,n){this.io=e,this.ro=t,this.oo=n}return e.ao=function(t){return new e(t,e.co,e.uo)},e}();ci.ho=-1,ci.lo=1048576,ci._o=41943040,ci.co=10,ci.uo=1e3,ci.fo=new ci(ci._o,ci.co,ci.uo),ci.do=new ci(ci.ho,0,0);var ui=function(){function e(e,t){this.wo=e,this.cs=t,this.mo=!1,this.To=null}return e.prototype.start=function(e){this.wo.params.io!==ci.ho&&this.Eo(e)},e.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(e.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),e.prototype.Eo=function(e){var t=this,n=this.mo?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,(function(){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return wr(t=n.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Ro(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),hi=function(){function e(e,t){this.Ao=e,this.params=t}return e.prototype.Ro=function(e,t){return this.Ao.Po(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.yo=function(e,t){var n=this;if(0===t)return yr.resolve(Vr.ai);var r=new si(t);return this.Ao.Ce(e,(function(e){return r.Xr(e.sequenceNumber)})).next((function(){return n.Ao.Vo(e,(function(e){return r.Xr(e)}))})).next((function(){return r.maxValue}))},e.prototype.po=function(e,t,n){return this.Ao.po(e,t,n)},e.prototype.bo=function(e,t){return this.Ao.bo(e,t)},e.prototype.vo=function(e,t){var n=this;return this.params.io===ci.ho?(p("LruGarbageCollector","Garbage collection skipped; disabled"),yr.resolve(li)):this.So(e).next((function(r){return r<n.params.io?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),li):n.Do(e,t)}))},e.prototype.So=function(e){return this.Ao.So(e)},e.prototype.Do=function(e,t){var n,r,i,a,s,l,c,u=this,h=Date.now();return this.Ro(e,this.params.ro).next((function(t){return t>u.params.oo?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.oo+" from "+t),r=u.params.oo):r=t,a=Date.now(),u.yo(e,r)})).next((function(r){return n=r,s=Date.now(),u.po(e,n,t)})).next((function(t){return i=t,l=Date.now(),u.bo(e,n)})).next((function(e){return c=Date.now(),f()<=o.LogLevel.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(l-s)+"ms\n\tRemoved "+e+" documents in "+(c-l)+"ms\nTotal Duration: "+(c-h)+"ms"),yr.resolve({Zr:!0,eo:r,no:i,so:e})}))},e}();function di(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=pi(t)),t=fi(e.get(n),t);return pi(t)}function fi(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function pi(e){return e+""}function mi(e){var t=e.length;if(b(t>=2),2===t)return b(""===e.charAt(0)&&""===e.charAt(1)),C.P();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&y(),e.charAt(a+1)){case"":var s=e.substring(o,a),l=void 0;0===i.length?l=s:(l=i+=s,i=""),r.push(l);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:y()}o=a+2}return new C(r)}var gi=function(e){this.Co=e};function vi(e,t){if(t.document)return function(e,t,n){var r=Pt(e,t.name),i=Ct(t.updateTime),o=new Pn({mapValue:{fields:t.fields}});return new kn(r,i,o,{hasCommittedMutations:!!n})}(e.Co,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=A.$(t.noDocument.path),r=wi(t.noDocument.readTime);return new Ln(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=A.$(t.unknownDocument.path),o=wi(t.unknownDocument.version);return new Nn(i,o)}return y()}function yi(e,t,n){var r=bi(n),i=t.key.path.h().A();if(t instanceof kn){var o=function(e,t){return{name:At(e,t.key),fields:t.rn().mapValue.fields,updateTime:wt(e,t.version.Z())}}(e.Co,t),a=t.hasCommittedMutations;return new Xi(null,null,o,a,r,i)}if(t instanceof Ln){var s=t.key.path.A(),l=_i(t.version),c=t.hasCommittedMutations;return new Xi(null,new Wi(s,l),null,c,r,i)}if(t instanceof Nn){var u=t.key.path.A(),h=_i(t.version);return new Xi(new qi(u,h),null,null,!0,r,i)}return y()}function bi(e){var t=e.Z();return[t.seconds,t.nanoseconds]}function xi(e){var t=new se(e[0],e[1]);return le.J(t)}function _i(e){var t=e.Z();return new ji(t.seconds,t.nanoseconds)}function wi(e){var t=new se(e.seconds,e.nanoseconds);return le.J(t)}function Si(e,t){var n=(t.baseMutations||[]).map((function(t){return Dt(e.Co,t)})),r=t.mutations.map((function(t){return Dt(e.Co,t)})),i=se.fromMillis(t.localWriteTimeMs);return new Qr(t.batchId,i,n,r)}function Ei(e){var t,n,r=wi(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?wi(e.lastLimboFreeSnapshotVersion):le.min();return void 0!==e.query.documents?(b(1===(n=e.query).documents.length),t=Gn(Un(It(n.documents[0])))):t=Ft(e.query),new be(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Q.fromBase64String(e.resumeToken))}function Ci(e,t){var n,r=_i(t.nt),i=_i(t.lastLimboFreeSnapshotVersion);n=ge(t.target)?zt(e.Co,t.target):Ut(e.Co,t.target);var o=t.resumeToken.toBase64();return new Ki(t.targetId,pe(t.target),r,o,t.sequenceNumber,i,n)}var Mi=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.Dr=n,this.No=r,this.Fo={}}return e.xo=function(t,n,r,i){return b(""!==t.uid),new e(t.Zs()?t.uid:"",n,r,i)},e.prototype.$o=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pi(e).rs({index:Hi.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.ko=function(e,t,n,r){var i=this,o=Ri(e),a=Pi(e);return a.add({}).next((function(s){b("number"==typeof s);for(var l=new Qr(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Nt(e.Co,t)})),i=n.mutations.map((function(t){return Nt(e.Co,t)}));return new Hi(t,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,l),u=[],h=new Me((function(e,t){return K(e.R(),t.R())})),d=0,f=r;d<f.length;d++){var p=f[d],m=Gi.key(i.userId,p.key.path,s);h=h.add(p.key.path.h()),u.push(a.put(c)),u.push(o.put(m,Gi.PLACEHOLDER))}return h.forEach((function(t){u.push(i.Dr.Mo(e,t))})),e.pr((function(){i.Fo[s]=l.keys()})),yr.$n(u).next((function(){return l}))}))},e.prototype.Oo=function(e,t){var n=this;return Pi(e).get(t).next((function(e){return e?(b(e.userId===n.userId),Si(n.serializer,e)):null}))},e.prototype.Lo=function(e,t){var n=this;return this.Fo[t]?yr.resolve(this.Fo[t]):this.Oo(e,t).next((function(e){if(e){var r=e.keys();return n.Fo[t]=r,r}return null}))},e.prototype.Bo=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Pi(e).rs({index:Hi.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r),o=Si(n.serializer,t)),i.done()})).next((function(){return o}))},e.prototype.qo=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pi(e).rs({index:Hi.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.Uo=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pi(e).ts(Hi.userMutationsIndex,n).next((function(e){return e.map((function(e){return Si(t.serializer,e)}))}))},e.prototype.Nr=function(e,t){var n=this,r=Gi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ri(e).rs({range:i},(function(r,i,a){var s=r[0],l=r[1],c=r[2],u=mi(l);if(s===n.userId&&t.path.isEqual(u))return Pi(e).get(c).next((function(e){if(!e)throw y();b(e.userId===n.userId),o.push(Si(n.serializer,e))}));a.done()})).next((function(){return o}))},e.prototype.Or=function(e,t){var n=this,r=new Me(K),i=[];return t.forEach((function(t){var o=Gi.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Ri(e).rs({range:a},(function(e,i,o){var a=e[0],s=e[1],l=e[2],c=mi(s);a===n.userId&&t.path.isEqual(c)?r=r.add(l):o.done()}));i.push(s)})),yr.$n(i).next((function(){return n.Qo(e,r)}))},e.prototype.Wr=function(e,t){var n=this,r=t.path,i=r.length+1,o=Gi.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Me(K);return Ri(e).rs({range:a},(function(e,t,o){var a=e[0],l=e[1],c=e[2],u=mi(l);a===n.userId&&r.T(u)?u.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Qo(e,s)}))},e.prototype.Qo=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pi(e).get(t).next((function(e){if(null===e)throw y();b(e.userId===n.userId),r.push(Si(n.serializer,e))})))})),yr.$n(i).next((function(){return r}))},e.prototype.Wo=function(e,t){var n=this;return Ai(e.jo,this.userId,t).next((function(r){return e.pr((function(){n.Ko(t.batchId)})),yr.forEach(r,(function(t){return n.No.Go(e,t)}))}))},e.prototype.Ko=function(e){delete this.Fo[e]},e.prototype.zo=function(e){var t=this;return this.$o(e).next((function(n){if(!n)return yr.resolve();var r=IDBKeyRange.lowerBound(Gi.prefixForUser(t.userId)),i=[];return Ri(e).rs({range:r},(function(e,n,r){if(e[0]===t.userId){var o=mi(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length)}))}))},e.prototype.Ho=function(e,t){return Ti(e,this.userId,t)},e.prototype.Yo=function(e){var t=this;return Ii(e).get(this.userId).next((function(e){return e||new $i(t.userId,-1,"")}))},e}();function Ti(e,t,n){var r=Gi.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ri(e).rs({range:o,ss:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ai(e,t,n){var r=e.store(Hi.store),i=e.store(Gi.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,l=r.rs({range:a},(function(e,t,n){return s++,n.delete()}));o.push(l.next((function(){b(1===s)})));for(var c=[],u=0,h=n.mutations;u<h.length;u++){var d=h[u],f=Gi.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return yr.$n(o).next((function(){return c}))}function Pi(e){return fo.Qn(e,Hi.store)}function Ri(e){return fo.Qn(e,Gi.store)}function Ii(e){return fo.Qn(e,$i.store)}var Oi=function(){function e(e,t){this.serializer=e,this.Dr=t}return e.prototype.Er=function(e,t,n){return Ni(e).put(Di(t),n)},e.prototype.Ar=function(e,t){var n=Ni(e),r=Di(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Jo(e,r)}))},e.prototype.Rr=function(e,t){var n=this;return Ni(e).get(Di(t)).next((function(e){return n.Xo(e)}))},e.prototype.Zo=function(e,t){var n=this;return Ni(e).get(Di(t)).next((function(e){var t=n.Xo(e);return t?{ta:t,size:zi(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Re();return this.ea(e,t,(function(e,t){var i=n.Xo(t);r=r.ot(e,i)})).next((function(){return r}))},e.prototype.na=function(e,t){var n=this,r=Re(),i=new Se(A.i);return this.ea(e,t,(function(e,t){var o=n.Xo(t);o?(r=r.ot(e,o),i=i.ot(e,zi(t))):(r=r.ot(e,null),i=i.ot(e,0))})).next((function(){return{sa:r,ia:i}}))},e.prototype.ea=function(e,t,n){if(t.m())return yr.resolve();var r=IDBKeyRange.bound(t.first().path.A(),t.last().path.A()),i=t._t(),o=i.It();return Ni(e).rs({range:r},(function(e,t,r){for(var a=A.$(e);o&&A.i(o,a)<0;)n(o,null),o=i.It();o&&o.isEqual(a)&&(n(o,t),o=i.At()?i.It():null),o?r.Xn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},e.prototype.Lr=function(e,t,n){var r=this,i=Oe(),o=t.path.length+1,a={};if(n.isEqual(le.min())){var s=t.path.A();a.range=IDBKeyRange.lowerBound(s)}else{var l=t.path.A(),c=bi(n);a.range=IDBKeyRange.lowerBound([l,c],!0),a.index=Xi.collectionReadTimeIndex}return Ni(e).rs(a,(function(e,n,a){if(e.length===o){var s=vi(r.serializer,n);t.path.T(s.key.path)?s instanceof kn&&Jn(t,s)&&(i=i.ot(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.ra=function(e){return new ki(this,!!e&&e.oa)},e.prototype.aa=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Li(e).get(Yi.key).next((function(e){return b(!!e),e}))},e.prototype.Jo=function(e,t){return Li(e).put(Yi.key,t)},e.prototype.Xo=function(e){if(e){var t=vi(this.serializer,e);return t instanceof Ln&&t.version.isEqual(le.min())?null:t}return null},e}(),ki=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).ca=t,r.oa=n,r.ua=new ae((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return r.__extends(t,e),t.prototype.yr=function(e){var t=this,n=[],r=0,i=new Me((function(e,t){return K(e.R(),t.R())}));return this.wr.forEach((function(o,a){var s=t.ua.get(o);if(a){var l=yi(t.ca.serializer,a,t.readTime);i=i.add(o.path.h());var c=zi(l);r+=c-s,n.push(t.ca.Er(e,o,l))}else if(r-=s,t.oa){var u=yi(t.ca.serializer,new Ln(o,le.min()),t.readTime);n.push(t.ca.Er(e,o,u))}else n.push(t.ca.Ar(e,o))})),i.forEach((function(r){n.push(t.ca.Dr.Mo(e,r))})),n.push(this.ca.updateMetadata(e,r)),yr.$n(n)},t.prototype.gr=function(e,t){var n=this;return this.ca.Zo(e,t).next((function(e){return null===e?(n.ua.set(t,0),null):(n.ua.set(t,e.size),e.ta)}))},t.prototype.Pr=function(e,t){var n=this;return this.ca.na(e,t).next((function(e){var t=e.sa;return e.ia.forEach((function(e,t){n.ua.set(e,t)})),t}))},t}(ti);function Li(e){return fo.Qn(e,Yi.store)}function Ni(e){return fo.Qn(e,Xi.store)}function Di(e){return e.path.A()}function zi(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y();t=e.noDocument}return JSON.stringify(t).length}var Ui=function(){function e(){this.ha=new Fi}return e.prototype.Mo=function(e,t){return this.ha.add(t),yr.resolve()},e.prototype.Qr=function(e,t){return yr.resolve(this.ha.getEntries(t))},e}(),Fi=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e._(),n=e.h(),r=this.index[t]||new Me(C.i),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e._(),n=e.h(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Me(C.i)).A()},e}(),Bi=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=10);var o=new Sr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Vi.store)}(e),function(e){e.createObjectStore($i.store,{keyPath:$i.keyPath}),e.createObjectStore(Hi.store,{keyPath:Hi.keyPath,autoIncrement:!0}).createIndex(Hi.userMutationsIndex,Hi.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Gi.store)}(e),eo(e),function(e){e.createObjectStore(Xi.store)}(e));var a=yr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Zi.store),e.deleteObjectStore(Ki.store),e.deleteObjectStore(Ji.store)}(e),eo(e)),a=a.next((function(){return function(e){var t=e.store(Ji.store),n=new Ji(0,0,le.min().Z(),0);return t.put(Ji.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Hi.store).ts().next((function(n){e.deleteObjectStore(Hi.store),e.createObjectStore(Hi.store,{keyPath:Hi.keyPath,autoIncrement:!0}).createIndex(Hi.userMutationsIndex,Hi.userMutationsKeyPath,{unique:!0});var r=t.store(Hi.store),i=n.map((function(e){return r.put(e)}));return yr.$n(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(to.store,{keyPath:to.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Yi.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Xi.store);t.createIndex(Xi.readTimeIndex,Xi.readTimeIndexPath,{unique:!1}),t.createIndex(Xi.collectionReadTimeIndex,Xi.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Xi.store).rs((function(e,n){t+=zi(n)})).next((function(){var n=new Yi(t);return e.store(Yi.store).put(Yi.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store($i.store),r=e.store(Hi.store);return n.ts().next((function(n){return yr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Hi.userMutationsIndex,i).next((function(r){return yr.forEach(r,(function(r){b(r.userId===n.userId);var i=Si(t.serializer,r);return Ai(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Zi.store),n=e.store(Xi.store);return e.store(Ji.store).get(Ji.key).next((function(e){var r=[];return n.rs((function(n,i){var o=new C(n),a=function(e){return[0,di(e)]}(o);r.push(t.get(a).next((function(n){return n?yr.resolve():function(n){return t.put(new Zi(0,di(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return yr.$n(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(Qi.store,{keyPath:Qi.keyPath});var n=t.store(Qi.store),r=new Fi,i=function(e){if(r.add(e)){var t=e._(),i=e.h();return n.put({collectionId:t,parent:di(i)})}};return t.store(Xi.store).rs({ss:!0},(function(e,t){var n=new C(e);return i(n.h())})).next((function(){return t.store(Gi.store).rs({ss:!0},(function(e,t){e[0];var n=e[1],r=(e[2],mi(n));return i(r.h())}))}))},e.prototype.rewriteCanonicalIds=function(e){var t=this,n=e.store(Ki.store);return n.rs((function(e,r){var i=Ei(r),o=Ci(t.serializer,i);return n.put(o)}))},e}(),ji=function(e,t){this.seconds=e,this.nanoseconds=t},Vi=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Vi.store="owner",Vi.key="owner";var $i=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};$i.store="mutationQueues",$i.keyPath="userId";var Hi=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hi.store="mutations",Hi.keyPath="batchId",Hi.userMutationsIndex="userMutationsIndex",Hi.userMutationsKeyPath=["userId","batchId"];var Gi=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,di(t)]},e.key=function(e,t,n){return[e,di(t),n]},e}();Gi.store="documentMutations",Gi.PLACEHOLDER=new Gi;var Wi=function(e,t){this.path=e,this.readTime=t},qi=function(e,t){this.path=e,this.version=t},Xi=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Xi.store="remoteDocuments",Xi.readTimeIndex="readTimeIndex",Xi.readTimeIndexPath="readTime",Xi.collectionReadTimeIndex="collectionReadTimeIndex",Xi.collectionReadTimeIndexPath=["parentPath","readTime"];var Yi=function(e){this.byteSize=e};Yi.store="remoteDocumentGlobal",Yi.key="remoteDocumentGlobalKey";var Ki=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ki.store="targets",Ki.keyPath="targetId",Ki.queryTargetsIndexName="queryTargetsIndex",Ki.queryTargetsKeyPath=["canonicalId","targetId"];var Zi=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Zi.store="targetDocuments",Zi.keyPath=["targetId","path"],Zi.documentTargetsIndex="documentTargetsIndex",Zi.documentTargetsKeyPath=["path","targetId"];var Ji=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ji.key="targetGlobalKey",Ji.store="targetGlobal";var Qi=function(e,t){this.collectionId=e,this.parent=t};function eo(e){e.createObjectStore(Zi.store,{keyPath:Zi.keyPath}).createIndex(Zi.documentTargetsIndex,Zi.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ki.store,{keyPath:Ki.keyPath}).createIndex(Ki.queryTargetsIndexName,Ki.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ji.store)}Qi.store="collectionParents",Qi.keyPath=["collectionId","parent"];var to=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};to.store="clientMetadata",to.keyPath="clientId";var no=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([$i.store,Hi.store,Gi.store,Xi.store,Ki.store,Vi.store,Ji.store,Zi.store],[to.store]),[Yi.store]),[Qi.store]),ro=function(){function e(){this.la=new Fi}return e.prototype.Mo=function(e,t){var n=this;if(!this.la.has(t)){var r=t._(),i=t.h();e.pr((function(){n.la.add(t)}));var o={collectionId:r,parent:di(i)};return io(e).put(o)}return yr.resolve()},e.prototype.Qr=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[J(t),""],!1,!0);return io(e).ts(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(mi(o.parent))}return n}))},e}();function io(e){return fo.Qn(e,Qi.store)}var oo=function(){function e(e){this._a=e}return e.prototype.next=function(){return this._a+=2,this._a},e.fa=function(){return new e(0)},e.da=function(){return new e(-1)},e}(),ao=function(){function e(e,t){this.No=e,this.serializer=t}return e.prototype.wa=function(e){var t=this;return this.ma(e).next((function(n){var r=new oo(n.highestTargetId);return n.highestTargetId=r.next(),t.Ta(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.Ea=function(e){return this.ma(e).next((function(e){return le.J(new se(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.Ia=function(e){return this.ma(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.Aa=function(e,t,n){var r=this;return this.ma(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.Z()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Ta(e,i)}))},e.prototype.Ra=function(e,t){var n=this;return this.ga(e,t).next((function(){return n.ma(e).next((function(r){return r.targetCount+=1,n.Pa(t,r),n.Ta(e,r)}))}))},e.prototype.ya=function(e,t){return this.ga(e,t)},e.prototype.Va=function(e,t){var n=this;return this.pa(e,t.targetId).next((function(){return so(e).delete(t.targetId)})).next((function(){return n.ma(e)})).next((function(t){return b(t.targetCount>0),t.targetCount-=1,n.Ta(e,t)}))},e.prototype.po=function(e,t,n){var r=this,i=0,o=[];return so(e).rs((function(a,s){var l=Ei(s);l.sequenceNumber<=t&&null===n.get(l.targetId)&&(i++,o.push(r.Va(e,l)))})).next((function(){return yr.$n(o)})).next((function(){return i}))},e.prototype.Ce=function(e,t){return so(e).rs((function(e,n){var r=Ei(n);t(r)}))},e.prototype.ma=function(e){return lo(e).get(Ji.key).next((function(e){return b(null!==e),e}))},e.prototype.Ta=function(e,t){return lo(e).put(Ji.key,t)},e.prototype.ga=function(e,t){return so(e).put(Ci(this.serializer,t))},e.prototype.Pa=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.ba=function(e){return this.ma(e).next((function(e){return e.targetCount}))},e.prototype.va=function(e,t){var n=pe(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return so(e).rs({range:r,index:Ki.queryTargetsIndexName},(function(e,n,r){var o=Ei(n);me(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.Sa=function(e,t,n){var r=this,i=[],o=co(e);return t.forEach((function(t){var a=di(t.path);i.push(o.put(new Zi(n,a))),i.push(r.No.Da(e,n,t))})),yr.$n(i)},e.prototype.Ca=function(e,t,n){var r=this,i=co(e);return yr.forEach(t,(function(t){var o=di(t.path);return yr.$n([i.delete([n,o]),r.No.Na(e,n,t)])}))},e.prototype.pa=function(e,t){var n=co(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.Fa=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=co(e),i=Ne();return r.rs({range:n,ss:!0},(function(e,t,n){var r=mi(e[1]),o=new A(r);i=i.add(o)})).next((function(){return i}))},e.prototype.Ho=function(e,t){var n=di(t.path),r=IDBKeyRange.bound([n],[J(n)],!1,!0),i=0;return co(e).rs({index:Zi.documentTargetsIndex,ss:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.Ue=function(e,t){return so(e).get(t).next((function(e){return e?Ei(e):null}))},e}();function so(e){return fo.Qn(e,Ki.store)}function lo(e){return fo.Qn(e,Ji.store)}function co(e){return fo.Qn(e,Zi.store)}var uo="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ho=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jo=t,r.xa=n,r}return r.__extends(t,e),t}(ri),fo=function(){function e(t,n,r,i,o,a,s,l,c,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=a,this.document=s,this.$a=c,this.ka=d,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(e){return Promise.resolve()},!e.Ln())throw new h(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new go(this,i),this.Wa=n+"main",this.serializer=new gi(l),this.ja=new br(this.Wa,10,new Bi(this.serializer)),this.Ka=new ao(this.No,this.serializer),this.Dr=new ro,this.vr=function(e,t){return new Oi(e,t)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===d&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.Qn=function(e,t){if(e instanceof ho)return br.Qn(e.jo,t);throw y()},e.prototype.start=function(){var e=this;return this.za().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new h(u.FAILED_PRECONDITION,uo);return e.Ha(),e.Ya(),e.Ja(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ka.Ia(t)}))})).then((function(t){e.Ma=new Vr(t,e.$a)})).then((function(){e.Oa=!0})).catch((function(t){return e.ja&&e.ja.close(),Promise.reject(t)}))},e.prototype.Xa=function(e){var t=this;return this.Qa=function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.Ei?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.Za=function(e){var t=this;this.ja.Kn((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.tc=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.fn.ws((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.za=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mo(t).put(new to(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.ec(t).next((function(t){t||(e.isPrimary=!1,e.fn.Cs((function(){return e.Qa(!1)})))}))})).next((function(){return e.nc(t)})).next((function(n){return e.isPrimary&&!n?e.sc(t).next((function(){return!1})):!!n&&e.ic(t).next((function(){return!0}))}))})).catch((function(t){if(wr(t))return p("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.fn.Cs((function(){return e.Qa(t)})),e.isPrimary=t}))},e.prototype.ec=function(e){var t=this;return po(e).get(Vi.key).next((function(e){return yr.resolve(t.rc(e))}))},e.prototype.oc=function(e){return mo(e).delete(this.clientId)},e.prototype.ac=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var n=e.Qn(t,to.store);return n.ts().next((function(e){var t=a.uc(e,18e5),r=e.filter((function(e){return-1===t.indexOf(e)}));return yr.forEach(r,(function(e){return n.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Ga)for(n=0,i=t;n<i.length;n++)o=i[n],this.Ga.removeItem(this.hc(o.clientId));r.label=2;case 2:return[2]}}))}))},e.prototype.Ja=function(){var e=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,(function(){return e.za().then((function(){return e.ac()})).then((function(){return e.Ja()}))}))},e.prototype.rc=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.nc=function(e){var t=this;return this.ka?yr.resolve(!0):po(e).get(Vi.key).next((function(n){if(null!==n&&t.cc(n.leaseTimestampMs,5e3)&&!t.lc(n.ownerId)){if(t.rc(n)&&t.networkEnabled)return!0;if(!t.rc(n)){if(!n.allowTabSynchronization)throw new h(u.FAILED_PRECONDITION,uo);return!1}}return!(!t.networkEnabled||!t.inForeground)||mo(e).ts().next((function(e){return void 0===t.uc(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&p("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.Di=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){switch(t.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Vi.store,to.store],(function(t){var n=new ho(t,Vr.ai);return e.sc(n).next((function(){return e.oc(n)}))}))];case 1:return t.sent(),this.ja.close(),this.wc(),[2]}}))}))},e.prototype.uc=function(e,t){var n=this;return e.filter((function(e){return n.cc(e.updateTimeMs,t)&&!n.lc(e.clientId)}))},e.prototype.pi=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mo(t).ts().next((function(t){return e.uc(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),e.prototype.mc=function(e){return Mi.xo(e,this.serializer,this.Dr,this.No)},e.prototype.Tc=function(){return this.Ka},e.prototype.Ec=function(){return this.vr},e.prototype.Ic=function(){return this.Dr},e.prototype.runTransaction=function(e,t,n){var r=this;p("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.ja.runTransaction(e,o,no,(function(o){return i=new ho(o,r.Ma?r.Ma.next():Vr.ai),"readwrite-primary"===t?r.ec(i).next((function(e){return!!e||r.nc(i)})).next((function(t){if(!t)throw m("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Qa(!1)})),new h(u.FAILED_PRECONDITION,ni);return n(i)})).next((function(e){return r.ic(i).next((function(){return e}))})):r.Ac(i).next((function(){return n(i)}))})).then((function(e){return i.br(),e}))},e.prototype.Ac=function(e){var t=this;return po(e).get(Vi.key).next((function(e){if(null!==e&&t.cc(e.leaseTimestampMs,5e3)&&!t.lc(e.ownerId)&&!t.rc(e)&&!(t.ka||t.allowTabSynchronization&&e.allowTabSynchronization))throw new h(u.FAILED_PRECONDITION,uo)}))},e.prototype.ic=function(e){var t=new Vi(this.clientId,this.allowTabSynchronization,Date.now());return po(e).put(Vi.key,t)},e.Ln=function(){return br.Ln()},e.prototype.sc=function(e){var t=this,n=po(e);return n.get(Vi.key).next((function(e){return t.rc(e)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(Vi.key)):yr.resolve()}))},e.prototype.cc=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(m("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.Ha=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){e.fn.ws((function(){return e.inForeground="visible"===e.document.visibilityState,e.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},e.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},e.prototype.Ya=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.La=function(){t._c(),t.fn.ws((function(){return t.Di()}))},this.window.addEventListener("unload",this.La))},e.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},e.prototype.lc=function(e){var t;try{var n=null!==(null===(t=this.Ga)||void 0===t?void 0:t.getItem(this.hc(e)));return p("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return m("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(e){m("Failed to set zombie client id.",e)}},e.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(e){}},e.prototype.hc=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function po(e){return fo.Qn(e,Vi.store)}function mo(e){return fo.Qn(e,to.store)}var go=function(){function e(e,t){this.db=e,this.wo=new hi(this,t)}return e.prototype.Po=function(e){var t=this.Rc(e);return this.db.Tc().ba(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.Rc=function(e){var t=0;return this.Vo(e,(function(e){t++})).next((function(){return t}))},e.prototype.Ce=function(e,t){return this.db.Tc().Ce(e,t)},e.prototype.Vo=function(e,t){return this.gc(e,(function(e,n){return t(n)}))},e.prototype.Da=function(e,t,n){return vo(e,n)},e.prototype.Na=function(e,t,n){return vo(e,n)},e.prototype.po=function(e,t,n){return this.db.Tc().po(e,t,n)},e.prototype.Go=function(e,t){return vo(e,t)},e.prototype.Pc=function(e,t){return function(e,t){var n=!1;return Ii(e).os((function(r){return Ti(e,r,t).next((function(e){return e&&(n=!0),yr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.bo=function(e,t){var n=this,r=this.db.Ec().ra(),i=[],o=0;return this.gc(e,(function(a,s){if(s<=t){var l=n.Pc(e,a).next((function(t){if(!t)return o++,r.Rr(e,a).next((function(){return r.Ar(a),co(e).delete([0,di(a.path)])}))}));i.push(l)}})).next((function(){return yr.$n(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.st(e.xa);return this.db.Tc().ya(e,n)},e.prototype.yc=function(e,t){return vo(e,t)},e.prototype.gc=function(e,t){var n,r=co(e),i=Vr.ai;return r.rs({index:Zi.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Vr.ai&&t(new A(mi(n)),i),i=s,n=a):i=Vr.ai})).next((function(){i!==Vr.ai&&t(new A(mi(n)),i)}))},e.prototype.So=function(e){return this.db.Ec().aa(e)},e}();function vo(e,t){return co(e).put(function(e,t){return new Zi(0,di(e.path),t)}(t,e.xa))}function yo(e,t){var n=e.projectId;return e.j||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bo=function(){function e(e,t,n){this.persistence=e,this.Vc=t,this.bc=new Se(K),this.vc=new ae((function(e){return pe(e)}),me),this.Sc=le.min(),this.Sr=e.mc(n),this.Dc=e.Ec(),this.Ka=e.Tc(),this.Cc=new ii(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return e.prototype.Io=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.vo(n,t.bc)}))},e}();function xo(e,t){var n=x(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Dc.ra({oa:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=yr.resolve();return o.forEach((function(e){a=a.next((function(){return r.Rr(t,e)})).next((function(t){var o=t,a=n.dr.get(e);b(null!==a),(!o||o.version.L(a)<0)&&(o=i.cr(e,o,n))&&r.Er(o,n._r)}))})),a.next((function(){return e.Sr.Wo(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Sr.zo(e)})).next((function(){return n.Cc.kr(e,r)}))}))}function _o(e){var t=x(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ka.Ea(e)}))}function wo(e,t){var n=x(e),r=t.nt,i=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Dc.ra({oa:!0});i=n.bc;var a=[];t.zt.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.Ka.Ca(e,t.se,o).next((function(){return n.Ka.Sa(e,t.ee,o)})));var l=t.resumeToken;if(l.O()>0){var c=s.it(l,r).st(e.xa);i=i.ot(o,c),function(e,t,n){return b(t.resumeToken.O()>0),0===e.resumeToken.O()||t.nt.X()-e.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(s,c,t)&&a.push(n.Ka.ya(e,c))}}}));var s=Pe(),l=Ne();if(t.Yt.forEach((function(e,t){l=l.add(e)})),a.push(o.getEntries(e,l).next((function(i){t.Yt.forEach((function(l,c){var u=i.get(l);c instanceof Ln&&c.version.isEqual(le.min())?(o.Ar(l,r),s=s.ot(l,c)):null==u||c.version.L(u.version)>0||0===c.version.L(u.version)&&u.hasPendingWrites?(o.Er(c,r),s=s.ot(l,c)):p("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version),t.Jt.has(l)&&a.push(n.persistence.No.yc(e,l))}))}))),!r.isEqual(le.min())){var c=n.Ka.Ea(e).next((function(t){return n.Ka.Aa(e,e.xa,r)}));a.push(c)}return yr.$n(a).next((function(){return o.apply(e)})).next((function(){return n.Cc.Mr(e,s)}))})).then((function(e){return n.bc=i,e}))}function So(e,t){var n=x(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Sr.Bo(e,t)}))}function Eo(e,t){var n=x(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ka.va(e,t).next((function(i){return i?(r=i,yr.resolve(r)):n.Ka.wa(e).next((function(i){return r=new be(t,i,0,e.xa),n.Ka.Ra(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.bc.get(e.targetId);return(null===r||e.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(e.targetId,e),n.vc.set(t,e.targetId)),e}))}function Co(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=x(e),o=i.bc.get(t),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.No.removeTarget(e,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!wr(s=r.sent()))throw s;return p("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return i.bc=i.bc.remove(t),i.vc.delete(o.target),[2]}}))}))}function Mo(e,t,n){var r=x(e),i=le.min(),o=Ne();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=x(e),i=r.vc.get(n);return void 0!==i?yr.resolve(r.bc.get(i)):r.Ka.va(t,n)}(r,e,Gn(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ka.Fa(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Vc.Lr(e,t,n?i:le.min(),n?o:Ne())})).next((function(e){return{documents:e,Fc:o}}))}))}function To(e,t){var n=x(e),r=x(n.Ka),i=n.bc.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Ue(e,t).next((function(e){return e?e.target:null}))}))}function Ao(e){var t=x(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=x(e),i=Pe(),o=bi(n),a=Ni(t),s=IDBKeyRange.lowerBound(o,!0);return a.rs({index:Xi.readTimeIndex,range:s},(function(e,t){var n=vi(r.serializer,t);i=i.ot(n.key,n),o=t.readTime})).next((function(){return{xc:i,readTime:xi(o)}}))}(t.Dc,e,t.Sc)})).then((function(e){var n=e.xc,r=e.readTime;return t.Sc=r,n}))}function Po(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return[2,(t=x(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Ni(e),n=le.min();return t.rs({index:Xi.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=xi(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.Sc=e}))]}))}))}function Ro(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e.code!==u.FAILED_PRECONDITION||e.message!==ni)throw e;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Io=function(){function e(){this.$c=new Me(Oo.kc),this.Mc=new Me(Oo.Oc)}return e.prototype.m=function(){return this.$c.m()},e.prototype.Da=function(e,t){var n=new Oo(e,t);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},e.prototype.Lc=function(e,t){var n=this;e.forEach((function(e){return n.Da(e,t)}))},e.prototype.Na=function(e,t){this.Bc(new Oo(e,t))},e.prototype.qc=function(e,t){var n=this;e.forEach((function(e){return n.Na(e,t)}))},e.prototype.Uc=function(e){var t=this,n=new A(new C([])),r=new Oo(n,e),i=new Oo(n,e+1),o=[];return this.Mc.Ft([r,i],(function(e){t.Bc(e),o.push(e.key)})),o},e.prototype.Qc=function(){var e=this;this.$c.forEach((function(t){return e.Bc(t)}))},e.prototype.Bc=function(e){this.$c=this.$c.delete(e),this.Mc=this.Mc.delete(e)},e.prototype.Wc=function(e){var t=new A(new C([])),n=new Oo(t,e),r=new Oo(t,e+1),i=Ne();return this.Mc.Ft([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.Ho=function(e){var t=new Oo(e,0),n=this.$c.$t(t);return null!==n&&e.isEqual(n.key)},e}(),Oo=function(){function e(e,t){this.key=e,this.jc=t}return e.kc=function(e,t){return A.i(e.key,t.key)||K(e.jc,t.jc)},e.Oc=function(e,t){return K(e.jc,t.jc)||A.i(e.key,t.key)},e}(),ko=function(e,t){this.user=t,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+e},Lo=function(){function e(){this.Gc=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.zc=function(){},e.prototype.Hc=function(e){this.Gc=e,e(jr.UNAUTHENTICATED)},e.prototype.Yc=function(){this.Gc=null},e}(),No=function(){function e(e){var t=this;this.Jc=null,this.currentUser=jr.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){t.Zc++,t.currentUser=t.tu(),t.Xc=!0,t.Gc&&t.Gc(t.currentUser)},this.Zc=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),e.get().then((function(e){t.auth=e,t.Jc&&t.auth.addAuthTokenListener(t.Jc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.Zc!==t?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(b("string"==typeof n.accessToken),new ko(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.zc=function(){this.forceRefresh=!0},e.prototype.Hc=function(e){this.Gc=e,this.Xc&&e(this.currentUser)},e.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},e.prototype.tu=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e),new jr(e)},e}(),Do=function(){function e(e,t){this.eu=e,this.nu=t,this.type="FirstParty",this.user=jr.ni}return Object.defineProperty(e.prototype,"Kc",{get:function(){var e={"X-Goog-AuthUser":this.nu},t=this.eu.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),zo=function(){function e(e,t){this.eu=e,this.nu=t}return e.prototype.getToken=function(){return Promise.resolve(new Do(this.eu,this.nu))},e.prototype.Hc=function(e){e(jr.ni)},e.prototype.Yc=function(){},e.prototype.zc=function(){},e}(),Uo=function(){function e(e,t,n,r,i,o){this.fn=e,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new vr(e,t)}return e.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.uu=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.hu()},e.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.lu=function(){this.state=0,this.ys.reset()},e.prototype._u=function(){var e=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return e.fu()})))},e.prototype.du=function(e){this.wu(),this.stream.send(e)},e.prototype.fu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.uu()?[2,this.close(0)]:[2]}))}))},e.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},e.prototype.close=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==e?this.ys.reset():t&&t.code===u.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):t&&t.code===u.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.mu=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(t){e.ou===n&&e.Iu(t)}),(function(n){t((function(){var t=new h(u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Au(t)}))}))},e.prototype.Iu=function(e){var t=this,n=this.Eu(this.ou);this.stream=this.Ru(e),this.stream.gu((function(){n((function(){return t.state=2,t.listener.gu()}))})),this.stream.Tu((function(e){n((function(){return t.Au(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.hu=function(){var e=this;this.state=4,this.ys.gn((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.Au=function(e){return p("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.Eu=function(e){var t=this;return function(n){t.fn.ws((function(){return t.ou===e?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Fo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return r.__extends(t,e),t.prototype.Ru=function(e){return this.iu.Pu("Listen",e)},t.prototype.onMessage=function(e){this.ys.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:y()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.Qe?(b(void 0===t||"string"==typeof t),Q.fromBase64String(t||"")):(b(void 0===t||t instanceof Uint8Array),Q.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?u.UNKNOWN:we(e.code);return new h(t,e.message||"")}(a);n=new Ge(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var l=t.documentChange;l.document,l.document.name,l.document.updateTime;var c=Pt(e,l.document.name),d=Ct(l.document.updateTime),f=new Pn({mapValue:{fields:l.document.fields}}),p=new kn(c,d,f,{}),m=l.targetIds||[],g=l.removedTargetIds||[];n=new $e(m,g,p.key,p)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var x=Pt(e,v.document),_=v.readTime?Ct(v.readTime):le.min(),w=new Ln(x,_),S=v.removedTargetIds||[];n=new $e([],S,w.key,w)}else if("documentRemove"in t){t.documentRemove;var E=t.documentRemove;E.document;var C=Pt(e,E.document),M=E.removedTargetIds||[];n=new $e([],M,C,null)}else{if(!("filter"in t))return y();t.filter;var T=t.filter;T.targetId;var A=T.count||0,P=new xe(A),R=T.targetId;n=new He(R,P)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return le.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?le.min():t.readTime?Ct(t.readTime):le.min()}(e);return this.listener.yu(t,n)},t.prototype.Vu=function(e){var t={};t.database=Ot(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=ge(r)?{documents:zt(e,r)}:{query:Ut(e,r)}).targetId=t.targetId,t.resumeToken.O()>0&&(n.resumeToken=St(e,t.resumeToken)),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,t.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.du(t)},t.prototype.pu=function(e){var t={};t.database=Ot(this.serializer),t.removeTarget=e,this.du(t)},t}(Uo),Bo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.bu=!1,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.mu=function(){this.bu&&this.Su([])},t.prototype.Ru=function(e){return this.iu.Pu("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken),this.lastStreamToken=e.streamToken,this.bu){this.ys.reset();var t=function(e,t){return e&&e.length>0?(b(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ct(e.updateTime):Ct(t);n.isEqual(le.min())&&(n=Ct(t));var r=null;return e.transformResults&&e.transformResults.length>0&&(r=e.transformResults),new dn(n,r)}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ct(e.commitTime);return this.listener.Du(n,t)}return b(!e.writeResults||0===e.writeResults.length),this.bu=!0,this.listener.Cu()},t.prototype.Nu=function(){var e={};e.database=Ot(this.serializer),this.du(e)},t.prototype.Su=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Nt(t.serializer,e)}))};this.du(n)},t}(Uo),jo=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.iu=n,i.serializer=r,i.Fu=!1,i}return r.__extends(t,e),t.prototype.xu=function(){if(this.Fu)throw new h(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.$u=function(e,t,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.$u(e,t,n,i)})).catch((function(e){throw e.code===u.UNAUTHENTICATED&&r.credentials.zc(),e}))},t.prototype.ku=function(e,t,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.ku(e,t,n,i)})).catch((function(e){throw e.code===u.UNAUTHENTICATED&&r.credentials.zc(),e}))},t.prototype.terminate=function(){this.Fu=!1},t}((function(){})),Vo=function(){function e(e,t){this.cs=e,this.di=t,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return e.prototype.Bu=function(){var e=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,(function(){return e.Ou=null,e.Uu("Backend didn't respond within 10 seconds."),e.qu("Offline"),Promise.resolve()})))},e.prototype.Qu=function(e){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+e.toString()),this.qu("Offline")))},e.prototype.set=function(e){this.Wu(),this.Mu=0,"Online"===e&&(this.Lu=!1),this.qu(e)},e.prototype.qu=function(e){e!==this.state&&(this.state=e,this.di(e))},e.prototype.Uu=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(m(t),this.Lu=!1):p("OnlineStateTracker",t)},e.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},e}(),$o=function(e,t,n,i,o){var a=this;this.ju=e,this.Ku=t,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=o,this.Xu.Zu((function(e){n.ws((function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return Qo(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return(t=x(e)).Yu.add(4),[4,Go(t)];case 1:return n.sent(),t.th.set("Unknown"),t.Yu.delete(4),[4,Ho(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.th=new Vo(n,i)};function Ho(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Qo(e))return[3,4];t=0,n=e.Ju,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Go(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:t=0,n=e.Ju,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Wo(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=x(e),p("RemoteStore","RemoteStore shutting down."),t.Yu.add(5),[4,Go(t)];case 1:return n.sent(),t.Xu.Di(),t.th.set("Unknown"),[2]}}))}))}function qo(e,t){var n=x(e);n.Hu.has(t.targetId)||(n.Hu.set(t.targetId,t),Jo(n)?Zo(n):pa(n).uu()&&Yo(n,t))}function Xo(e,t){var n=x(e),r=pa(n);n.Hu.delete(t),r.uu()&&Ko(n,t),0===n.Hu.size&&(r.uu()?r._u():Qo(n)&&n.th.set("Unknown"))}function Yo(e,t){e.eh.Ie(t.targetId),pa(e).Vu(t)}function Ko(e,t){e.eh.Ie(t),pa(e).pu(t)}function Zo(e){e.eh=new qe({qe:function(t){return e.Gu.qe(t)},Ue:function(t){return e.Hu.get(t)||null}}),pa(e).start(),e.th.Bu()}function Jo(e){return Qo(e)&&!pa(e).cu()&&e.Hu.size>0}function Qo(e){return 0===x(e).Yu.size}function ea(e){e.eh=void 0}function ta(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.Hu.forEach((function(t,n){Yo(e,t)})),[2]}))}))}function na(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return ea(e),Jo(e)?(e.th.Qu(t),Zo(e)):e.th.set("Unknown"),[2]}))}))}function ra(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:if(e.th.set("Online"),!(t instanceof Ge&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:n=t.cause,i=0,o=t.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],e.Hu.has(a)?[4,e.Gu.nh(a,n)]:[3,3]):[3,5];case 2:r.sent(),e.Hu.delete(a),e.eh.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,ia(e,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof $e?e.eh.be(t):t instanceof He?e.eh.$e(t):e.eh.De(t),n.isEqual(le.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,_o(e.ju)];case 8:return o=s.sent(),n.L(o)>=0?[4,function(e,t){var n=e.eh.Oe(t);return n.zt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=e.Hu.get(r);i&&e.Hu.set(r,i.it(n.resumeToken,t))}})),n.Ht.forEach((function(t){var n=e.Hu.get(t);if(n){e.Hu.set(t,n.it(Q.B,n.nt)),Ko(e,t);var r=new be(n.target,t,1,n.sequenceNumber);Yo(e,r)}})),e.Gu.sh(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,ia(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function ia(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!wr(t))throw t;return e.Yu.add(1),[4,Go(e)];case 1:return o.sent(),e.th.set("Offline"),n||(n=function(){return _o(e.ju)}),e.cs.Cs((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Yu.delete(1),[4,Ho(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function oa(e,t){return t().catch((function(n){return ia(e,n,t)}))}function aa(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:t=x(e),n=ma(t),i=t.zu.length>0?t.zu[t.zu.length-1].batchId:-1,r.label=1;case 1:if(!function(e){return Qo(e)&&e.zu.length<10}(t))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,So(t.ju,i)];case 3:return null===(o=r.sent())?(0===t.zu.length&&n._u(),[3,7]):(i=o.batchId,function(e,t){e.zu.push(t);var n=ma(e);n.uu()&&n.vu&&n.Su(t.mutations)}(t,o),[3,6]);case 4:return a=r.sent(),[4,ia(t,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return sa(t)&&la(t),[2]}}))}))}function sa(e){return Qo(e)&&!ma(e).cu()&&e.zu.length>0}function la(e){ma(e).start()}function ca(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return ma(e).Nu(),[2]}))}))}function ua(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o;return r.__generator(this,(function(r){for(t=ma(e),n=0,i=e.zu;n<i.length;n++)o=i[n],t.Su(o.mutations);return[2]}))}))}function ha(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=e.zu.shift(),o=ei.from(i,t,n),[4,oa(e,(function(){return e.Gu.ih(o)}))];case 1:return r.sent(),[4,aa(e)];case 2:return r.sent(),[2]}}))}))}function da(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return t&&ma(e).vu?[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return _e(i=t.code)&&i!==u.ABORTED?(n=e.zu.shift(),ma(e).lu(),[4,oa(e,(function(){return e.Gu.rh(n.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,aa(e)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sa(e)&&la(e),[2]}}))}))}function fa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=x(e),t?(n.Yu.delete(2),[4,Ho(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Yu.add(2),[4,Go(n)]);case 3:r.sent(),n.th.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function pa(e){var t=this;return e.oh||(e.oh=function(e,t,n){var r=x(e);return r.xu(),new Fo(t,r.iu,r.credentials,r.serializer,n)}(e.Ku,e.cs,{gu:ta.bind(null,e),Tu:na.bind(null,e),yu:ra.bind(null,e)}),e.Ju.push((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return n?(e.oh.lu(),Jo(e)?Zo(e):e.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.oh.stop()];case 2:t.sent(),ea(e),t.label=3;case 3:return[2]}}))}))}))),e.oh}function ma(e){var t=this;return e.ah||(e.ah=function(e,t,n){var r=x(e);return r.xu(),new Bo(t,r.iu,r.credentials,r.serializer,n)}(e.Ku,e.cs,{gu:ca.bind(null,e),Tu:da.bind(null,e),Cu:ua.bind(null,e),Du:ha.bind(null,e)}),e.Ju.push((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return n?(e.ah.lu(),[4,aa(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.ah.stop()];case 3:t.sent(),e.zu.length>0&&(p("RemoteStore","Stopping write stream with "+e.zu.length+" pending writes"),e.zu=[]),t.label=4;case 4:return[2]}}))}))}))),e.ah}var ga=function(e){this.key=e},va=function(e){this.key=e},ya=function(){function e(e,t){this.query=e,this.uh=t,this.hh=null,this.te=!1,this.lh=Ne(),this.Wt=Ne(),this._h=Qn(e),this.fh=new Ue(this._h)}return Object.defineProperty(e.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),e.prototype.wh=function(e,t){var n=this,r=t?t.mh:new Fe,i=t?t.fh:this.fh,o=t?t.Wt:this.Wt,a=i,s=!1,l=Fn(this.query)&&i.size===this.query.limit?i.last():null,c=Bn(this.query)&&i.size===this.query.limit?i.first():null;if(e.ht((function(e,t){var u=i.get(e),h=t instanceof kn?t:null;h&&(h=Jn(n.query,h)?h:null);var d=!!u&&n.Wt.has(u.key),f=!!h&&(h.Je||n.Wt.has(h.key)&&h.hasCommittedMutations),p=!1;u&&h?u.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Th(u,h)||(r.track({type:2,doc:h}),p=!0,(l&&n._h(h,l)>0||c&&n._h(h,c)<0)&&(s=!0)):!u&&h?(r.track({type:0,doc:h}),p=!0):u&&!h&&(r.track({type:1,doc:u}),p=!0,(l||c)&&(s=!0)),p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Fn(this.query)||Bn(this.query))for(;a.size>this.query.limit;){var u=Fn(this.query)?a.last():a.first();a=a.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{fh:a,mh:r,Eh:s,Wt:o}},e.prototype.Th=function(e,t){return e.Je&&t.hasCommittedMutations&&!t.Je},e.prototype.yr=function(e,t,n){var r=this,i=this.fh;this.fh=e.fh,this.Wt=e.Wt;var o=e.mh.Ut();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(e)-n(t)}(e.type,t.type)||r._h(e.doc,t.doc)})),this.Ih(n);var a=t?this.Ah():[],s=0===this.lh.size&&this.te?1:0,l=s!==this.hh;return this.hh=s,0!==o.length||l?{snapshot:new Be(this.query,e.fh,i,o,e.Wt,0===s,l,!1),Rh:a}:{Rh:a}},e.prototype.Qs=function(e){return this.te&&"Offline"===e?(this.te=!1,this.yr({fh:this.fh,mh:new Fe,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},e.prototype.gh=function(e){return!this.uh.has(e)&&!!this.fh.has(e)&&!this.fh.get(e).Je},e.prototype.Ih=function(e){var t=this;e&&(e.ee.forEach((function(e){return t.uh=t.uh.add(e)})),e.ne.forEach((function(e){})),e.se.forEach((function(e){return t.uh=t.uh.delete(e)})),this.te=e.te)},e.prototype.Ah=function(){var e=this;if(!this.te)return[];var t=this.lh;this.lh=Ne(),this.fh.forEach((function(t){e.gh(t.key)&&(e.lh=e.lh.add(t.key))}));var n=[];return t.forEach((function(t){e.lh.has(t)||n.push(new va(t))})),this.lh.forEach((function(e){t.has(e)||n.push(new ga(e))})),n},e.prototype.Ph=function(e){this.uh=e.Fc,this.lh=Ne();var t=this.wh(e.documents);return this.yr(t,!0)},e.prototype.yh=function(){return Be.Gt(this.query,this.fh,this.Wt,0===this.hh)},e}(),ba=function(e,t,n){this.query=e,this.targetId=t,this.view=n},xa=function(e){this.key=e,this.Vh=!1},_a=function(){function e(e,t,n,r,i,o){this.ju=e,this.ph=t,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new ae((function(e){return Kn(e)}),Yn),this.Fh=new Map,this.xh=[],this.$h=new Se(A.i),this.kh=new Map,this.Mh=new Io,this.Oh={},this.Lh=new Map,this.Bh=oo.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(e.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),e}();function wa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l;return r.__generator(this,(function(r){switch(r.label){case 0:return n=Xa(e),(a=n.Nh.get(t))?(i=a.targetId,n.Sh.Oi(i),o=a.view.yh(),[3,4]):[3,1];case 1:return[4,Eo(n.ju,Gn(t))];case 2:return s=r.sent(),l=n.Sh.Oi(s.targetId),i=s.targetId,[4,Sa(n,t,i,"current"===l)];case 3:o=r.sent(),n.Uh&&qo(n.ph,s),r.label=4;case 4:return[2,o]}}))}))}function Sa(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,c,u;return r.__generator(this,(function(h){switch(h.label){case 0:return e.Qh=function(t,n,i){return function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=t.view.wh(n)).Eh?[4,Mo(e.ju,t.query,!1).then((function(e){var n=e.documents;return t.view.wh(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.zt.get(t.targetId),s=t.view.yr(o,e.Uh,a),[2,(La(e,t.targetId,s.Rh),s.snapshot)]}}))}))}(e,t,n,i)},[4,Mo(e.ju,t,!0)];case 1:return o=h.sent(),a=new ya(t,o.Fc),s=a.wh(o.documents),l=Ve.Zt(n,i&&"Offline"!==e.onlineState),c=a.yr(s,e.Uh,l),La(e,n,c.Rh),u=new ba(t,n,a),[2,(e.Nh.set(t,u),e.Fh.has(n)?e.Fh.get(n).push(t):e.Fh.set(n,[t]),c.snapshot)]}}))}))}function Ea(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=x(e),i=n.Nh.get(t),(o=n.Fh.get(i.targetId)).length>1?[2,(n.Fh.set(i.targetId,o.filter((function(e){return!Yn(e,t)}))),void n.Nh.delete(t))]:n.Uh?(n.Sh.Bi(i.targetId),n.Sh.Fi(i.targetId)?[3,2]:[4,Co(n.ju,i.targetId,!1).then((function(){n.Sh.Ui(i.targetId),Xo(n.ph,i.targetId),Oa(n,i.targetId)})).catch(Ro)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Oa(n,i.targetId),[4,Co(n.ju,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Ca(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=x(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,wo(n.ju,t)];case 2:return i=r.sent(),t.zt.forEach((function(e,t){var r=n.kh.get(t);r&&(b(e.ee.size+e.ne.size+e.se.size<=1),e.ee.size>0?r.Vh=!0:e.ne.size>0?b(r.Vh):e.se.size>0&&(b(r.Vh),r.Vh=!1))})),[4,za(n,i,t)];case 3:return r.sent(),[3,6];case 4:return[4,Ro(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ma(e,t,n){var r=x(e);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(e,n){var r=n.view.Qs(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=x(e);n.onlineState=t;var r=!1;n.Bs.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Qs(t)&&(r=!0)})),r&&Fr(n)}(r.bh,t),i.length&&r.Ch.yu(i),r.onlineState=t,r.Uh&&r.Sh.Ki(t)}}function Ta(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=x(e)).Sh.Qi(t,"rejected",n),o=i.kh.get(t),(a=o&&o.key)?(s=(s=new Se(A.i)).ot(a,new Ln(a,le.min())),l=Ne().add(a),c=new je(le.min(),new Map,new Me(K),s,l),[4,Ca(i,c)]):[3,2];case 1:return r.sent(),i.$h=i.$h.remove(a),i.kh.delete(t),Da(i),[3,4];case 2:return[4,Co(i.ju,t,!1).then((function(){return Oa(i,t,n)})).catch(Ro)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Aa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=x(e),i=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,xo(n.ju,t)];case 2:return o=r.sent(),Ia(n,i,null),Ra(n,i),n.Sh.ki(i,"acknowledged"),[4,za(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Ro(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Pa(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:i=x(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=x(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Sr.Oo(e,t).next((function(t){return b(null!==t),r=t.keys(),n.Sr.Wo(e,t)})).next((function(){return n.Sr.zo(e)})).next((function(){return n.Cc.kr(e,r)}))}))}(i.ju,t)];case 2:return o=r.sent(),Ia(i,t,n),Ra(i,t),i.Sh.ki(t,"rejected",n),[4,za(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Ro(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ra(e,t){(e.Lh.get(t)||[]).forEach((function(e){e.resolve()})),e.Lh.delete(t)}function Ia(e,t,n){var r=x(e),i=r.Oh[r.currentUser.ti()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Oh[r.currentUser.ti()]=i}}function Oa(e,t,n){void 0===n&&(n=null),e.Sh.Bi(t);for(var r=0,i=e.Fh.get(t);r<i.length;r++){var o=i[r];e.Nh.delete(o),n&&e.Ch.Wh(o,n)}e.Fh.delete(t),e.Uh&&e.Mh.Uc(t).forEach((function(t){e.Mh.Ho(t)||ka(e,t)}))}function ka(e,t){var n=e.$h.get(t);null!==n&&(Xo(e.ph,n),e.$h=e.$h.remove(t),e.kh.delete(n),Da(e))}function La(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ga?(e.Mh.Da(o.key,t),Na(e,o)):o instanceof va?(p("SyncEngine","Document no longer in limbo: "+o.key),e.Mh.Na(o.key,t),e.Mh.Ho(o.key)||ka(e,o.key)):y()}}function Na(e,t){var n=t.key;e.$h.get(n)||(p("SyncEngine","New document in limbo: "+n),e.xh.push(n),Da(e))}function Da(e){for(;e.xh.length>0&&e.$h.size<e.Dh;){var t=e.xh.shift(),n=e.Bh.next();e.kh.set(n,new xa(t)),e.$h=e.$h.ot(t,n),qo(e.ph,new be(Gn(Un(t.path)),n,2,Vr.ai))}}function za(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(l){switch(l.label){case 0:return i=x(e),o=[],a=[],s=[],i.Nh.m()?[3,3]:(i.Nh.forEach((function(e,r){s.push(i.Qh(r,t,n).then((function(e){if(e){i.Uh&&i.Sh.Qi(r.targetId,e.fromCache?"not-current":"current"),o.push(e);var t=oi.zr(r.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return l.sent(),i.Ch.yu(o),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l,c,u,h;return r.__generator(this,(function(r){switch(r.label){case 0:n=x(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return yr.forEach(t,(function(t){return yr.forEach(t.Kr,(function(r){return n.persistence.No.Da(e,t.targetId,r)})).next((function(){return yr.forEach(t.Gr,(function(r){return n.persistence.No.Na(e,t.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!wr(i=r.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],l=s.targetId,s.fromCache||(c=n.bc.get(l),u=c.nt,h=c.rt(u),n.bc=n.bc.ot(l,h));return[2]}}))}))}(i.ju,a)];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))}function Ua(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=x(e)).currentUser.isEqual(t)?[3,3]:(p("SyncEngine","User change. New user:",t.ti()),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=x(e),i=n.Sr,o=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var r;return n.Sr.Uo(e).next((function(a){return r=a,i=n.persistence.mc(t),o=new ii(n.Dc,i,n.persistence.Ic()),i.Uo(e)})).next((function(t){for(var n=[],i=[],a=Ne(),s=0,l=r;s<l.length;s++){var c=l[s];n.push(c.batchId);for(var u=0,h=c.mutations;u<h.length;u++){var d=h[u];a=a.add(d.key)}}for(var f=0,p=t;f<p.length;f++){var m=p[f];i.push(m.batchId);for(var g=0,v=m.mutations;g<v.length;g++){var y=v[g];a=a.add(y.key)}}return o.kr(e,a).next((function(e){return{jh:e,Kh:n,Gh:i}}))}))}))];case 1:return a=r.sent(),[2,(n.Sr=i,n.Cc=o,n.Vc.Nc(n.Cc),a)]}}))}))}(n.ju,t)]);case 1:return i=o.sent(),n.currentUser=t,function(e){e.Lh.forEach((function(e){e.forEach((function(e){e.reject(new h(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Lh.clear()}(n),n.Sh.ji(t,i.Kh,i.Gh),[4,za(n,i.jh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Fa(e,t){var n=x(e),r=n.kh.get(t);if(r&&r.Vh)return Ne().add(r.key);var i=Ne(),o=n.Fh.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var l=s[a],c=n.Nh.get(l);i=i.kt(c.view.dh)}return i}function Ba(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,Mo((n=x(e)).ju,t.query,!0)];case 1:return i=r.sent(),o=t.view.Ph(i),[2,(n.Uh&&La(n,t.targetId,o.Rh),o)]}}))}))}function ja(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,function(e,t){var n=x(e),r=x(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Lo(e,t).next((function(t){return t?n.Cc.kr(e,t):yr.resolve(null)}))}))}((o=x(e)).ju,t)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,aa(o.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ia(o,t,i||null),Ra(o,t),function(e,t){x(x(e).Sr).Ko(t)}(o.ju,t)):y(),r.label=4;case 4:return[4,za(o,a)];case 5:return r.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))}function Va(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l,c,u;return r.__generator(this,(function(r){switch(r.label){case 0:return Xa(n=x(e)),Ya(n),!0!==t||!0===n.qh?[3,3]:(i=n.Sh.Ci(),[4,$a(n,i.A())]);case 1:return o=r.sent(),n.qh=!0,[4,fa(n.ph,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)l=s[a],qo(n.ph,l);return[3,7];case 3:return!1!==t||!1===n.qh?[3,7]:(c=[],u=Promise.resolve(),n.Fh.forEach((function(e,t){n.Sh.qi(t)?c.push(t):u=u.then((function(){return Oa(n,t),Co(n.ju,t,!0)})),Xo(n.ph,t)})),[4,u]);case 4:return r.sent(),[4,$a(n,c)];case 5:return r.sent(),function(e){var t=x(e);t.kh.forEach((function(e,n){Xo(t.ph,n)})),t.Mh.Qc(),t.kh=new Map,t.$h=new Se(A.i)}(n),n.qh=!1,[4,fa(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function $a(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l,c,u,h,d,f,p,m,g;return r.__generator(this,(function(r){switch(r.label){case 0:n=x(e),i=[],o=[],a=0,s=t,r.label=1;case 1:return a<s.length?(l=s[a],c=void 0,(u=n.Fh.get(l))&&0!==u.length?[4,Eo(n.ju,Gn(u[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,d=u,r.label=3;case 3:return h<d.length?(f=d[h],p=n.Nh.get(f),[4,Ba(n,p)]):[3,6];case 4:(m=r.sent()).snapshot&&o.push(m.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,To(n.ju,l)];case 8:return g=r.sent(),[4,Eo(n.ju,g)];case 9:return c=r.sent(),[4,Sa(n,Ha(g),l,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Ch.yu(o),i)]}}))}))}function Ha(e){return zn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ga(e){var t=x(e);return x(x(t.ju).persistence).pi()}function Wa(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=x(e)).qh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Fh.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ao(o.ju)];case 3:return a=r.sent(),s=je.Xt(t,"current"===n),[4,za(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,Co(o.ju,t,!0)];case 6:return r.sent(),Oa(o,t,i),[3,8];case 7:y(),r.label=8;case 8:return[2]}}))}))}function qa(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,l,c,u,h,d,f;return r.__generator(this,(function(m){switch(m.label){case 0:if(!(i=Xa(e)).qh)return[3,10];o=0,a=t,m.label=1;case 1:return o<a.length?(s=a[o],i.Fh.has(s)?(p("SyncEngine","Adding an already active target "+s),[3,5]):[4,To(i.ju,s)]):[3,6];case 2:return l=m.sent(),[4,Eo(i.ju,l)];case 3:return c=m.sent(),[4,Sa(i,Ha(l),c.targetId,!1)];case 4:m.sent(),qo(i.ph,c),m.label=5;case 5:return o++,[3,1];case 6:u=function(e){return r.__generator(this,(function(t){switch(t.label){case 0:return i.Fh.has(e)?[4,Co(i.ju,e,!1).then((function(){Xo(i.ph,e),Oa(i,e)})).catch(Ro)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,m.label=7;case 7:return h<d.length?(f=d[h],[5,u(f)]):[3,10];case 8:m.sent(),m.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Xa(e){var t=x(e);return t.ph.Gu.sh=Ca.bind(null,t),t.ph.Gu.qe=Fa.bind(null,t),t.ph.Gu.nh=Ta.bind(null,t),t.Ch.yu=zr.bind(null,t.bh),t.Ch.Wh=Ur.bind(null,t.bh),t}function Ya(e){var t=x(e);return t.ph.Gu.ih=Aa.bind(null,t),t.ph.Gu.rh=Pa.bind(null,t),t}var Ka=function(){function e(){}return e.prototype.Nc=function(e){this.zh=e},e.prototype.Lr=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.on.length||1===e.on.length&&e.on[0].field.p())}(t)||n.isEqual(le.min())?this.Hh(e,t):this.zh.kr(e,r).next((function(a){var s=i.Yh(t,a);return(Fn(t)||Bn(t))&&i.Eh(t.an,s,r,n)?i.Hh(e,t):(f()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Zn(t)),i.zh.Lr(e,t,n).next((function(e){return s.forEach((function(t){e=e.ot(t.key,t)})),e})))}))},e.prototype.Yh=function(e,t){var n=new Me(Qn(e));return t.forEach((function(t,r){r instanceof kn&&Jn(e,r)&&(n=n.add(r))})),n},e.prototype.Eh=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},e.prototype.Hh=function(e,t){return f()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",Zn(t)),this.zh.Lr(e,t,le.min())},e}(),Za=function(){function e(e,t){this.Dr=e,this.No=t,this.Sr=[],this.Jh=1,this.Xh=new Me(Oo.kc)}return e.prototype.$o=function(e){return yr.resolve(0===this.Sr.length)},e.prototype.ko=function(e,t,n,r){var i=this.Jh;this.Jh++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Qr(i,t,n,r);this.Sr.push(o);for(var a=0,s=r;a<s.length;a++){var l=s[a];this.Xh=this.Xh.add(new Oo(l.key,i)),this.Dr.Mo(e,l.key.path.h())}return yr.resolve(o)},e.prototype.Oo=function(e,t){return yr.resolve(this.Zh(t))},e.prototype.Bo=function(e,t){var n=t+1,r=this.tl(n),i=r<0?0:r;return yr.resolve(this.Sr.length>i?this.Sr[i]:null)},e.prototype.qo=function(){return yr.resolve(0===this.Sr.length?-1:this.Jh-1)},e.prototype.Uo=function(e){return yr.resolve(this.Sr.slice())},e.prototype.Nr=function(e,t){var n=this,r=new Oo(t,0),i=new Oo(t,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([r,i],(function(e){var t=n.Zh(e.jc);o.push(t)})),yr.resolve(o)},e.prototype.Or=function(e,t){var n=this,r=new Me(K);return t.forEach((function(e){var t=new Oo(e,0),i=new Oo(e,Number.POSITIVE_INFINITY);n.Xh.Ft([t,i],(function(e){r=r.add(e.jc)}))})),yr.resolve(this.el(r))},e.prototype.Wr=function(e,t){var n=t.path,r=n.length+1,i=n;A.F(i)||(i=i.child(""));var o=new Oo(new A(i),0),a=new Me(K);return this.Xh.xt((function(e){var t=e.key.path;return!!n.T(t)&&(t.length===r&&(a=a.add(e.jc)),!0)}),o),yr.resolve(this.el(a))},e.prototype.el=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Zh(e);null!==r&&n.push(r)})),n},e.prototype.Wo=function(e,t){var n=this;b(0===this.nl(t.batchId,"removed")),this.Sr.shift();var r=this.Xh;return yr.forEach(t.mutations,(function(i){var o=new Oo(i.key,t.batchId);return r=r.delete(o),n.No.Go(e,i.key)})).next((function(){n.Xh=r}))},e.prototype.Ko=function(e){},e.prototype.Ho=function(e,t){var n=new Oo(t,0),r=this.Xh.$t(n);return yr.resolve(t.isEqual(r&&r.key))},e.prototype.zo=function(e){return this.Sr.length,yr.resolve()},e.prototype.nl=function(e,t){return this.tl(e)},e.prototype.tl=function(e){return 0===this.Sr.length?0:e-this.Sr[0].batchId},e.prototype.Zh=function(e){var t=this.tl(e);return t<0||t>=this.Sr.length?null:this.Sr[t]},e}(),Ja=function(){function e(e,t){this.Dr=e,this.sl=t,this.docs=new Se(A.i),this.size=0}return e.prototype.Er=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sl(t);return this.docs=this.docs.ot(r,{ta:t,size:a,readTime:n}),this.size+=a-o,this.Dr.Mo(e,r.path.h())},e.prototype.Ar=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.Rr=function(e,t){var n=this.docs.get(t);return yr.resolve(n?n.ta:null)},e.prototype.getEntries=function(e,t){var n=this,r=Re();return t.forEach((function(e){var t=n.docs.get(e);r=r.ot(e,t?t.ta:null)})),yr.resolve(r)},e.prototype.Lr=function(e,t,n){for(var r=Oe(),i=new A(t.path.child("")),o=this.docs.ft(i);o.At();){var a=o.It(),s=a.key,l=a.value,c=l.ta,u=l.readTime;if(!t.path.T(s.path))break;u.L(n)<=0||c instanceof kn&&Jn(t,c)&&(r=r.ot(c.key,c))}return yr.resolve(r)},e.prototype.il=function(e,t){return yr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.ra=function(e){return new Qa(this)},e.prototype.aa=function(e){return yr.resolve(this.size)},e}(),Qa=function(e){function t(t){var n=this;return(n=e.call(this)||this).ca=t,n}return r.__extends(t,e),t.prototype.yr=function(e){var t=this,n=[];return this.wr.forEach((function(r,i){i?n.push(t.ca.Er(e,i,t.readTime)):t.ca.Ar(r)})),yr.$n(n)},t.prototype.gr=function(e,t){return this.ca.Rr(e,t)},t.prototype.Pr=function(e,t){return this.ca.getEntries(e,t)},t}(ti),es=function(){function e(e){this.persistence=e,this.rl=new ae((function(e){return pe(e)}),me),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.ol=0,this.al=new Io,this.targetCount=0,this.cl=oo.fa()}return e.prototype.Ce=function(e,t){return this.rl.forEach((function(e,n){return t(n)})),yr.resolve()},e.prototype.Ea=function(e){return yr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.Ia=function(e){return yr.resolve(this.ol)},e.prototype.wa=function(e){return this.highestTargetId=this.cl.next(),yr.resolve(this.highestTargetId)},e.prototype.Aa=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ol&&(this.ol=t),yr.resolve()},e.prototype.ga=function(e){this.rl.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.cl=new oo(t),this.highestTargetId=t),e.sequenceNumber>this.ol&&(this.ol=e.sequenceNumber)},e.prototype.Ra=function(e,t){return this.ga(t),this.targetCount+=1,yr.resolve()},e.prototype.ya=function(e,t){return this.ga(t),yr.resolve()},e.prototype.Va=function(e,t){return this.rl.delete(t.target),this.al.Uc(t.targetId),this.targetCount-=1,yr.resolve()},e.prototype.po=function(e,t,n){var r=this,i=0,o=[];return this.rl.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.rl.delete(a),o.push(r.pa(e,s.targetId)),i++)})),yr.$n(o).next((function(){return i}))},e.prototype.ba=function(e){return yr.resolve(this.targetCount)},e.prototype.va=function(e,t){var n=this.rl.get(t)||null;return yr.resolve(n)},e.prototype.Sa=function(e,t,n){return this.al.Lc(t,n),yr.resolve()},e.prototype.Ca=function(e,t,n){this.al.qc(t,n);var r=this.persistence.No,i=[];return r&&t.forEach((function(t){i.push(r.Go(e,t))})),yr.$n(i)},e.prototype.pa=function(e,t){return this.al.Uc(t),yr.resolve()},e.prototype.Fa=function(e,t){var n=this.al.Wc(t);return yr.resolve(n)},e.prototype.Ho=function(e,t){return yr.resolve(this.al.Ho(t))},e}(),ts=function(){function e(e){var t=this;this.ul={},this.Ma=new Vr(0),this.Oa=!1,this.Oa=!0,this.No=e(this),this.Ka=new es(this),this.Dr=new Ui,this.vr=function(e){return new Ja(e,(function(e){return t.No.hl(e)}))}(this.Dr)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(e.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),e.prototype.Za=function(){},e.prototype.tc=function(){},e.prototype.Ic=function(){return this.Dr},e.prototype.mc=function(e){var t=this.ul[e.ti()];return t||(t=new Za(this.Dr,this.No),this.ul[e.ti()]=t),t},e.prototype.Tc=function(){return this.Ka},e.prototype.Ec=function(){return this.vr},e.prototype.runTransaction=function(e,t,n){var r=this;p("MemoryPersistence","Starting transaction:",e);var i=new ns(this.Ma.next());return this.No.ll(),n(i).next((function(e){return r.No._l(i).next((function(){return e}))})).Fn().then((function(e){return i.br(),e}))},e.prototype.fl=function(e,t){return yr.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(e,t)}})))},e}(),ns=function(e){function t(t){var n=this;return(n=e.call(this)||this).xa=t,n}return r.__extends(t,e),t}(ri),rs=function(){function e(e){this.persistence=e,this.dl=new Io,this.wl=null}return e.ml=function(t){return new e(t)},Object.defineProperty(e.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw y()},enumerable:!1,configurable:!0}),e.prototype.Da=function(e,t,n){return this.dl.Da(n,t),this.Tl.delete(n.toString()),yr.resolve()},e.prototype.Na=function(e,t,n){return this.dl.Na(n,t),this.Tl.add(n.toString()),yr.resolve()},e.prototype.Go=function(e,t){return this.Tl.add(t.toString()),yr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.dl.Uc(t.targetId).forEach((function(e){return n.Tl.add(e.toString())}));var r=this.persistence.Tc();return r.Fa(e,t.targetId).next((function(e){e.forEach((function(e){return n.Tl.add(e.toString())}))})).next((function(){return r.Va(e,t)}))},e.prototype.ll=function(){this.wl=new Set},e.prototype._l=function(e){var t=this,n=this.persistence.Ec().ra();return yr.forEach(this.Tl,(function(r){var i=A.D(r);return t.El(e,i).next((function(e){e||n.Ar(i)}))})).next((function(){return t.wl=null,n.apply(e)}))},e.prototype.yc=function(e,t){var n=this;return this.El(e,t).next((function(e){e?n.Tl.delete(t.toString()):n.Tl.add(t.toString())}))},e.prototype.hl=function(e){return 0},e.prototype.El=function(e,t){var n=this;return yr.kn([function(){return yr.resolve(n.dl.Ho(t))},function(){return n.persistence.Tc().Ho(e,t)},function(){return n.persistence.fl(e,t)}])},e}(),is=function(){function e(e){this.Il=e.Il,this.Al=e.Al}return e.prototype.gu=function(e){this.Rl=e},e.prototype.Tu=function(e){this.gl=e},e.prototype.onMessage=function(e){this.Pl=e},e.prototype.close=function(){this.Al()},e.prototype.send=function(e){this.Il(e)},e.prototype.yl=function(){this.Rl()},e.prototype.Vl=function(e){this.gl(e)},e.prototype.pl=function(e){this.Pl(e)},e}(),os={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},as=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.W=t.W,n}return r.__extends(t,e),t.prototype.Nl=function(e,t,n,r){return new Promise((function(i,o){var a=new s.XhrIo;a.listenOnce(s.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var t=a.getResponseJson();p("Connection","XHR received:",JSON.stringify(t)),i(t);break;case s.ErrorCode.TIMEOUT:p("Connection",'RPC "'+e+'" timed out'),o(new h(u.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace("_","-");return Object.values(u).indexOf(t)>=0?t:u.UNKNOWN}(r.status);o(new h(l,r.message))}else o(new h(u.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new h(u.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{p("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);a.send(t,"POST",l,n,15)}))},t.prototype.Pu=function(e,t){var n=[this.vl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=s.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(i.initMessageHeaders,t),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p("Connection","Creating WebChannel: "+o,i);var l=r.createWebChannel(o,i),c=!1,d=!1,f=new is({Il:function(e){d?p("Connection","Not sending because WebChannel is closed:",e):(c||(p("Connection","Opening WebChannel transport."),l.open(),c=!0),p("Connection","WebChannel sending:",e),l.send(e))},Al:function(){return l.close()}}),m=function(e,t){l.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return m(s.WebChannel.EventType.OPEN,(function(){d||p("Connection","WebChannel transport opened.")})),m(s.WebChannel.EventType.CLOSE,(function(){d||(d=!0,p("Connection","WebChannel transport closed"),f.Vl())})),m(s.WebChannel.EventType.ERROR,(function(e){d||(d=!0,g("Connection","WebChannel transport errored:",e),f.Vl(new h(u.UNAVAILABLE,"The operation could not be completed")))})),m(s.WebChannel.EventType.MESSAGE,(function(e){var t;if(!d){var n=e.data[0];b(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){p("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=ve[e];if(void 0!==t)return we(t)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),d=!0,f.Vl(new h(a,s)),l.close()}else p("Connection","WebChannel received:",n),f.pl(n)}})),setTimeout((function(){f.yl()}),0),f},t}(function(){function e(e){this.bl=e,this.U=e.U;var t=e.ssl?"https":"http";this.vl=t+"://"+e.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return e.prototype.$u=function(e,t,n,r){var i=this.Dl(e,t);p("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(e,i,o,n).then((function(e){return p("RestConnection","Received: ",e),e}),(function(t){throw g("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.ku=function(e,t,n,r){return this.$u(e,t,n,r)},e.prototype.Cl=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",e["Content-Type"]="text/plain",t)for(var n in t.Kc)t.Kc.hasOwnProperty(n)&&(e[n]=t.Kc[n])},e.prototype.Dl=function(e,t){var n=os[e];return this.vl+"/v1/"+t+":"+n},e}()),ss=function(){function e(){var e=this;this.Fl=function(){return e.xl()},this.$l=function(){return e.kl()},this.Ml=[],this.Ol()}return e.prototype.Zu=function(e){this.Ml.push(e)},e.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},e.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},e.prototype.xl=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.Ml;e<t.length;e++)(0,t[e])(0)},e.prototype.kl=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.Ml;e<t.length;e++)(0,t[e])(1)},e.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ls=function(){function e(){}return e.prototype.Zu=function(e){},e.prototype.Di=function(){},e}();function cs(e){return new yt(e,!0)}var us="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",hs=function(){function e(){}return e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Sh=this.Ll(e),this.persistence=this.Bl(e),[4,this.persistence.start()];case 1:return t.sent(),this.ql=this.Ul(e),this.ju=this.Ql(e),[2]}}))}))},e.prototype.Ul=function(e){return null},e.prototype.Ql=function(e){return t=this.persistence,n=new Ka,r=e.Wl,new bo(t,n,r);var t,n,r},e.prototype.Bl=function(e){if(e.persistenceSettings.jl)throw new h(u.FAILED_PRECONDITION,us);return new ts(rs.ml)},e.prototype.Ll=function(e){return new Jr},e.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return e.sent(),[4,this.persistence.Di()];case 2:return e.sent(),[2]}}))}))},e.prototype.clearPersistence=function(e,t){throw new h(u.FAILED_PRECONDITION,us)},e}(),ds=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),n=this.Kl.fi,this.Sh instanceof Zr?(this.Sh.fi={er:ja.bind(null,n),nr:Wa.bind(null,n),sr:qa.bind(null,n),pi:Ga.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(e){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,Va(this.Kl.fi,e)];case 1:return t.sent(),this.ql&&(e&&!this.ql.Ei?this.ql.start(this.ju):e||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},t.prototype.Ll=function(e){if(e.persistenceSettings.jl&&e.persistenceSettings.synchronizeTabs){var t=Ar();if(!Zr.Ln(t))throw new h(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yo(e.bl.U,e.bl.persistenceKey);return new Zr(t,e.cs,n,e.clientId,e.Wl)}return new Jr},t}(function(e){function t(t){var n=this;return(n=e.call(this)||this).Kl=t,n}return r.__extends(t,e),t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Po(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,t)];case 3:return n.sent(),[4,Ya(this.Kl.fi)];case 4:return n.sent(),[4,aa(this.Kl.ph)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ul=function(e){var t=this.persistence.No.wo;return new ui(t,e.cs)},t.prototype.Bl=function(e){var t=yo(e.bl.U,e.bl.persistenceKey),n=cs(e.bl.U);return new fo(e.persistenceSettings.synchronizeTabs,t,e.clientId,ci.ao(e.persistenceSettings.cacheSizeBytes),e.cs,Ar(),Pr(),n,this.Sh,e.persistenceSettings.ka)},t.prototype.Ll=function(e){return new Jr},t.prototype.clearPersistence=function(e,t){return function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return br.Ln()?(t=e+"main",[4,br.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(yo(e,t))},t}(hs)),fs=function(){function e(){}return e.prototype.initialize=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.ju?[3,2]:(this.ju=e.ju,this.Sh=e.Sh,this.Ku=this.Gl(t),this.ph=this.zl(t),this.bh=this.Hl(t),this.fi=this.Yl(t),this.Sh.di=function(e){return Ma(n.fi,e,1)},this.ph.Gu.Jl=Ua.bind(null,this.fi),[4,fa(this.ph,this.fi.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.Hl=function(e){return new Lr},e.prototype.Gl=function(e){var t,n=cs(e.bl.U),r=(t=e.bl,new as(t));return function(e,t,n){return new jo(e,t,n)}(e.credentials,r,n)},e.prototype.zl=function(e){var t,n,r,i,o,a=this;return t=this.ju,n=this.Ku,r=e.cs,i=function(e){return Ma(a.fi,e,0)},o=ss.Ln()?new ss:new ls,new $o(t,n,r,i,o)},e.prototype.Yl=function(e){return function(e,t,n,r,i,o,a){var s=new _a(e,t,n,r,i,o);return a&&(s.qh=!0),s}(this.ju,this.ph,this.bh,this.Sh,e.Wl,e.Dh,!e.persistenceSettings.jl||!e.persistenceSettings.synchronizeTabs)},e.prototype.terminate=function(){return Wo(this.ph)},e}(),ps=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.Xl(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.Xl(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Zl=function(){this.muted=!0},e.prototype.Xl=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),ms=function(e){!function(e,t){if(!(t instanceof Array)||t.length<1)throw new h(u.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+q(1,"element")+".")}(0,e);for(var t=0;t<e.length;++t)if(k("FieldPath","string",t,e[t]),0===e[t].length)throw new h(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new T(e)},gs=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,t)||this}return r.__extends(t,e),t.documentId=function(){return new t(T.v().R())},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","FieldPath",1,e);return this.t_.isEqual(e.t_)},t}(ms),vs=new RegExp("[~\\*/\\[\\]]"),ys=function(e){this.e_=e},bs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.n_=function(e){if(2!==e.s_)throw 1===e.s_?e.i_(this.e_+"() can only appear at the top level of your update data"):e.i_(this.e_+"() cannot be used with set() unless you pass {merge:true}");return e.We.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(ys);function xs(e,t,n){return new Os({s_:3,r_:t.settings.r_,methodName:e.e_,o_:n},t.U,t.serializer,t.ignoreUndefinedProperties)}var _s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.n_=function(e){return new hn(e.path,new tn)},t.prototype.isEqual=function(e){return e instanceof t},t}(ys),ws=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).a_=n,r}return r.__extends(t,e),t.prototype.n_=function(e){var t=xs(this,e,!0),n=this.a_.map((function(e){return Us(e,t)})),r=new nn(n);return new hn(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ys),Ss=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).a_=n,r}return r.__extends(t,e),t.prototype.n_=function(e){var t=xs(this,e,!0),n=this.a_.map((function(e){return Us(e,t)})),r=new on(n);return new hn(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ys),Es=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).c_=n,r}return r.__extends(t,e),t.prototype.n_=function(e){var t=new sn(e.serializer,_t(e.serializer,this.c_));return new hn(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(ys),Cs=function(){function e(e,t){if(R("GeoPoint",arguments,2),k("GeoPoint","number",1,e),k("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new h(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new h(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this.u_=e,this.h_=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.u_===e.u_&&this.h_===e.h_},e.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},e.prototype.Y=function(e){return K(this.u_,e.u_)||K(this.h_,e.h_)},e}(),Ms=function(e){this.l_=e},Ts=/^__.*__$/,As=function(e,t,n){this.__=e,this.f_=t,this.d_=n},Ps=function(){function e(e,t,n){this.data=e,this.We=t,this.fieldTransforms=n}return e.prototype.w_=function(e,t){var n=[];return null!==this.We?n.push(new wn(e,this.data,this.We,t)):n.push(new _n(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new En(e,this.fieldTransforms)),n},e}(),Rs=function(){function e(e,t,n){this.data=e,this.We=t,this.fieldTransforms=n}return e.prototype.w_=function(e,t){var n=[new wn(e,this.data,this.We,t)];return this.fieldTransforms.length>0&&n.push(new En(e,this.fieldTransforms)),n},e}();function Is(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Os=function(){function e(e,t,n,r,i,o){this.settings=e,this.U=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),e.prototype.T_=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},e.prototype.E_=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.T_({path:n,o_:!1});return r.I_(e),r},e.prototype.A_=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.T_({path:n,o_:!1});return r.m_(),r},e.prototype.R_=function(e){return this.T_({path:void 0,o_:!0})},e.prototype.i_=function(e){return Hs(e,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},e.prototype.contains=function(e){return void 0!==this.We.find((function(t){return e.T(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.T(t.field)}))},e.prototype.m_=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.I_(this.path.get(e))},e.prototype.I_=function(e){if(0===e.length)throw this.i_("Document fields must not be empty");if(Is(this.s_)&&Ts.test(e))throw this.i_('Document fields cannot begin and end with "__"')},e}(),ks=function(){function e(e,t,n){this.U=e,this.ignoreUndefinedProperties=t,this.serializer=n||cs(e)}return e.prototype.P_=function(e,t,n,r){return void 0===r&&(r=!1),new Os({s_:e,methodName:t,r_:n,path:T.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},e}();function Ls(e,t,n,r,i,o){void 0===o&&(o={});var a=e.P_(o.merge||o.mergeFields?2:0,t,n,i);js("Data must be an object, but it was:",a,r);var s,l,c=Fs(r,a);if(o.merge)s=new un(a.We),l=a.fieldTransforms;else if(o.mergeFields){for(var d=[],f=0,p=o.mergeFields;f<p.length;f++){var m=p[f],g=void 0;if(m instanceof ms)g=m.t_;else{if("string"!=typeof m)throw y();g=$s(t,m,n)}if(!a.contains(g))throw new h(u.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");Gs(d,g)||d.push(g)}s=new un(d),l=a.fieldTransforms.filter((function(e){return s.Ye(e.field)}))}else s=null,l=a.fieldTransforms;return new Ps(new Pn(c),s,l)}function Ns(e,t,n,r){var i=e.P_(1,t,n);js("Data must be an object, but it was:",i,r);var o=[],a=new Rn;w(r,(function(e,r){var s=$s(t,e,n),l=i.A_(s);if(r instanceof bs||r instanceof Ms&&r.l_ instanceof bs)o.push(s);else{var c=Us(r,l);null!=c&&(o.push(s),a.set(s,c))}}));var s=new un(o);return new Rs(a.Xe(),s,i.fieldTransforms)}function Ds(e,t,n,r,i,o){var a=e.P_(1,t,n),s=[Vs(t,r,n)],l=[i];if(o.length%2!=0)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Vs(t,o[c])),l.push(o[c+1]);for(var d=[],f=new Rn,p=s.length-1;p>=0;--p)if(!Gs(d,s[p])){var m=s[p],g=l[p],v=a.A_(m);if(g instanceof bs||g instanceof Ms&&g.l_ instanceof bs)d.push(m);else{var y=Us(g,v);null!=y&&(d.push(m),f.set(m,y))}}var b=new un(d);return new Rs(f.Xe(),b,a.fieldTransforms)}function zs(e,t,n,r){return void 0===r&&(r=!1),Us(n,e.P_(r?4:3,t))}function Us(e,t){if(e instanceof Ms&&(e=e.l_),Bs(e))return js("Unsupported field value:",t,e),Fs(e,t);if(e instanceof ys)return function(e,t){if(!Is(t.s_))throw t.i_(e.e_+"() can only be used with update() and set()");if(!t.path)throw t.i_(e.e_+"() is not currently supported inside arrays");var n=e.n_(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(t.path&&t.We.push(t.path),e instanceof Array){if(t.settings.o_&&4!==t.s_)throw t.i_("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Us(o[i],t.R_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===e)return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _t(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=se.fromDate(e);return{timestampValue:wt(t.serializer,n)}}if(e instanceof se){var r=new se(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wt(t.serializer,r)}}if(e instanceof Cs)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ee)return{bytesValue:St(t.serializer,e.q)};if(e instanceof As){var i=t.U,o=e.__;if(!o.isEqual(i))throw t.i_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Mt(e.__||t.U,e.f_.path)}}if(void 0===e&&t.ignoreUndefinedProperties)return null;throw t.i_("Unsupported field value: "+j(e))}(e,t)}function Fs(e,t){var n={};return S(e)?t.path&&t.path.length>0&&t.We.push(t.path):w(e,(function(e,r){var i=Us(r,t.E_(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Bs(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof se||e instanceof Cs||e instanceof ee||e instanceof As||e instanceof ys)}function js(e,t,n){if(!Bs(n)||!B(n)){var r=j(n);throw"an object"===r?t.i_(e+" a custom object"):t.i_(e+" "+r)}}function Vs(e,t,n){if(t instanceof ms)return t.t_;if("string"==typeof t)return $s(e,t);throw Hs("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}function $s(e,t,n){try{return function(e){if(e.search(vs)>=0)throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(gs.bind.apply(gs,r.__spreadArrays([void 0],e.split("."))))}catch(t){throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).t_}catch(t){throw Hs((i=t)instanceof Error?i.message:i.toString(),e,!1,void 0,n)}var i}function Hs(e,t,n,r,i){var o=r&&!r.m(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new h(u.INVALID_ARGUMENT,(s+=". ")+e+l)}function Gs(e,t){return e.some((function(e){return e.isEqual(t)}))}var Ws=function(){function e(e){this.Ku=e,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return e.prototype.v_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.S_(),this.mutations.length>0)throw new h(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l;return r.__generator(this,(function(r){switch(r.label){case 0:return n=x(e),i=Ot(n.serializer)+"/documents",o={documents:t.map((function(e){return At(n.serializer,e)}))},[4,n.ku("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){b(!!t.found),t.found.name,t.found.updateTime;var n=Pt(e,t.found.name),r=Ct(t.found.updateTime),i=new Pn({mapValue:{fields:t.found.fields}});return new kn(n,r,i,{})}(e,t):"missing"in t?function(e,t){b(!!t.missing),b(!!t.readTime);var n=Pt(e,t.missing),r=Ct(t.readTime);return new Ln(n,r)}(e,t):y()}(n.serializer,e);s.set(t.key.toString(),t)})),l=[],[2,(t.forEach((function(e){var t=s.get(e.toString());b(!!t),l.push(t)})),l)]}}))}))}(this.Ku,e)];case 1:return[2,((t=i.sent()).forEach((function(e){e instanceof Ln||e instanceof kn?n.D_(e):y()})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.w_(e,this.Ge(e))),this.b_.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.w_(e,this.C_(e)))}catch(e){this.p_=e}this.b_.add(e.toString())},e.prototype.delete=function(e){this.write([new Tn(e,this.Ge(e))]),this.b_.add(e.toString())},e.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return e=this.y_,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=A.D(n);t.mutations.push(new An(r,t.Ge(r)))})),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=x(e),i=Ot(n.serializer)+"/documents",o={writes:t.map((function(e){return Nt(n.serializer,e)}))},[4,n.$u("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},e.prototype.D_=function(e){var t;if(e instanceof kn)t=e.version;else{if(!(e instanceof Ln))throw y();t=le.min()}var n=this.y_.get(e.key.toString());if(n){if(!t.isEqual(n))throw new h(u.ABORTED,"Document version changed between two reads.")}else this.y_.set(e.key.toString(),t)},e.prototype.Ge=function(e){var t=this.y_.get(e.toString());return!this.b_.has(e.toString())&&t?fn.updateTime(t):fn.ze()},e.prototype.C_=function(e){var t=this.y_.get(e.toString());if(!this.b_.has(e.toString())&&t){if(t.isEqual(le.min()))throw new h(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fn.updateTime(t)}return fn.exists(!0)},e.prototype.write=function(e){this.S_(),this.mutations=this.mutations.concat(e)},e.prototype.S_=function(){},e}(),qs=function(){function e(e,t,n,r){this.cs=e,this.Ku=t,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new vr(this.cs,"transaction_retry")}return e.prototype.run=function(){this.F_()},e.prototype.F_=function(){var e=this;this.ys.gn((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return r.__generator(this,(function(r){return e=new Ws(this.Ku),(t=this.x_(e))&&t.then((function(t){n.cs.ws((function(){return e.commit().then((function(){n.ls.resolve(t)})).catch((function(e){n.k_(e)}))}))})).catch((function(e){n.k_(e)})),[2]}))}))}))},e.prototype.x_=function(e){try{var t=this.updateFunction(e);return!ce(t)&&t.catch&&t.then?t:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.ls.reject(e),null}},e.prototype.k_=function(e){var t=this;this.N_>0&&this.M_(e)?(this.N_-=1,this.cs.ws((function(){return t.F_(),Promise.resolve()}))):this.ls.reject(e)},e.prototype.M_=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!_e(t)}return!1},e}(),Xs=function(){function e(e,t){this.credentials=e,this.cs=t,this.clientId=Y.k(),this.O_=new gr}return e.prototype.start=function(e,t,n,i){var o=this;this.L_(),this.bl=e;var a=new gr,s=!1;return this.credentials.Hc((function(e){if(!s)return s=!0,p("FirestoreClient","Initializing. user=",e.uid),o.B_(t,n,i,e,a).then(o.O_.resolve,o.O_.reject);o.cs.Cs((function(){return function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=x(e)).cs.xs(),p("RemoteStore","RemoteStore received new credentials"),i=Qo(n),n.Yu.add(3),[4,Go(n)];case 1:return r.sent(),i&&n.th.set("Unknown"),[4,n.Gu.Jl(t)];case 2:return r.sent(),n.Yu.delete(3),[4,Ho(n)];case 3:return r.sent(),[2]}}))}))}(o.ph,e)}))})),this.cs.ws((function(){return o.O_.promise})),a.promise},e.prototype.enableNetwork=function(){var e=this;return this.L_(),this.cs.enqueue((function(){return e.persistence.tc(!0),function(e){var t=x(e);return t.Yu.delete(0),Ho(t)}(e.ph)}))},e.prototype.B_=function(e,t,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var a,s,l=this;return r.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),a={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:i,Dh:100,persistenceSettings:n},[4,e.initialize(a)];case 1:return c.sent(),[4,t.initialize(e,a)];case 2:return c.sent(),this.persistence=e.persistence,this.Sh=e.Sh,this.ju=e.ju,this.ql=e.ql,this.Ku=t.Ku,this.ph=t.ph,this.fi=t.fi,this.q_=t.bh,this.q_.Us=wa.bind(null,this.fi),this.q_.js=Ea.bind(null,this.fi),this.persistence.Za((function(){return r.__awaiter(l,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(s=c.sent(),o.reject(s),!this.U_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.B_(new hs,new fs,{jl:!1},i,o))];case 4:return[2]}}))}))},e.prototype.U_=function(e){return"FirebaseError"===e.name?e.code===u.FAILED_PRECONDITION||e.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.L_=function(){if(this.cs.ps)throw new h(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.disableNetwork=function(){var e=this;return this.L_(),this.cs.enqueue((function(){return e.persistence.tc(!1),function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return(t=x(e)).Yu.add(0),[4,Go(t)];case 1:return n.sent(),t.th.set("Offline"),[2]}}))}))}(e.ph)}))},e.prototype.terminate=function(){var e=this;this.cs.Ds();var t=new gr;return this.cs.bs((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Wo(this.ph)];case 1:return r.sent(),[4,this.Sh.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yc(),t.resolve(),[3,5];case 4:return e=r.sent(),n=Or(e,"Failed to shutdown persistence"),t.reject(n),[3,5];case 5:return[2]}}))}))})),t.promise},e.prototype.waitForPendingWrites=function(){var e=this;this.L_();var t=new gr;return this.cs.ws((function(){return function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:Qo((n=x(e)).ph)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(e){var t=x(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Sr.qo(e)}))}(n.ju)];case 2:return-1===(i=r.sent())?[2,void t.resolve()]:((o=n.Lh.get(i)||[]).push(t),n.Lh.set(i,o),[3,4]);case 3:return a=r.sent(),s=Or(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}(e.fi,t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.L_();var i=new ps(n),o=new Br(e,i,t);return this.cs.ws((function(){return Nr(r.q_,o)})),function(){i.Zl(),r.cs.ws((function(){return Dr(r.q_,o)}))}},e.prototype.Q_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),t=new gr,[2,(this.cs.ws((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e,t){var n=x(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Cc.Cr(e,t)}))}(e,t)];case 1:return(i=r.sent())instanceof kn?n.resolve(i):i instanceof Ln?n.resolve(null):n.reject(new h(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),a=Or(o,"Failed to get document '"+t+" from cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.ju,e,t)})),t.promise)]}}))}))},e.prototype.W_=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new gr,[2,(this.cs.ws((function(){return function(e,t,n,r,i){var o=new ps({next:function(o){t.ws((function(){return Dr(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new h(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new h(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Br(Un(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Nr(e,a)}(i.q_,i.cs,e,t,n)})),n.promise)]}}))}))},e.prototype.j_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),t=new gr,[2,(this.cs.ws((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Mo(e,t,!0)];case 1:return i=r.sent(),o=new ya(t,i.Fc),a=o.wh(i.documents),s=o.yr(a,!1),n.resolve(s.snapshot),[3,3];case 2:return l=r.sent(),c=Or(l,"Failed to execute query '"+t+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.ju,e,t)})),t.promise)]}}))}))},e.prototype.K_=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new gr,[2,(this.cs.ws((function(){return function(e,t,n,r,i){var o=new ps({next:function(n){t.ws((function(){return Dr(e,a)})),n.fromCache&&"server"===r.source?i.reject(new h(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Br(n,o,{includeMetadataChanges:!0,Xs:!0});return Nr(e,a)}(i.q_,i.cs,e,t,n)})),n.promise)]}}))}))},e.prototype.write=function(e){var t=this;this.L_();var n=new gr;return this.cs.ws((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=Ya(e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(e,t){var n,r=x(e),i=se.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ne());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Cc.kr(e,o).next((function(o){n=o;for(var a=[],s=0,l=t;s<l.length;s++){var c=l[s],u=yn(c,n.get(c.key));null!=u&&a.push(new wn(c.key,u,In(u.proto.mapValue),fn.exists(!0)))}return r.Sr.ko(e,i,a,t)}))})).then((function(e){var t=e.lr(n);return{batchId:e.batchId,wr:t}}))}(i.ju,t)];case 2:return o=r.sent(),i.Sh.xi(o.batchId),function(e,t,n){var r=e.Oh[e.currentUser.ti()];r||(r=new Se(K)),r=r.ot(t,n),e.Oh[e.currentUser.ti()]=r}(i,o.batchId,n),[4,za(i,o.wr)];case 3:return r.sent(),[4,aa(i.ph)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=Or(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(t.fi,e,n)})),n.promise},e.prototype.U=function(){return this.bl.U},e.prototype.G_=function(e){var t=this;this.L_();var n=new ps(e);return this.cs.ws((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,function(e,t){x(e).qs.add(t),t.next()}(this.q_,n)]}))}))})),function(){n.Zl(),t.cs.ws((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,function(e,t){x(e).qs.delete(t)}(this.q_,n)]}))}))}))}},Object.defineProperty(e.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.L_();var n=new gr;return this.cs.ws((function(){return new qs(t.cs,t.Ku,e,n).run(),Promise.resolve()})),n.promise},e}();function Ys(e){return function(e){if("object"!=typeof e||null===e)return!1;for(var t=e,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(e)}var Ks=function(){function e(e,t,n,r,i){this.U=e,this.timestampsInSnapshots=t,this.H_=n,this.Y_=r,this.J_=i}return e.prototype.X_=function(e){switch(et(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.Z_(e.timestampValue);case 4:return this.tf(e);case 5:return e.stringValue;case 6:return this.J_(ct(e.bytesValue));case 7:return this.ef(e.referenceValue);case 8:return this.nf(e.geoPointValue);case 9:return this.sf(e.arrayValue);case 10:return this.if(e.mapValue);default:throw y()}},e.prototype.if=function(e){var t=this,n={};return w(e.fields||{},(function(e,r){n[e]=t.X_(r)})),n},e.prototype.nf=function(e){return new Cs(lt(e.latitude),lt(e.longitude))},e.prototype.sf=function(e){var t=this;return(e.values||[]).map((function(e){return t.X_(e)}))},e.prototype.tf=function(e){switch(this.H_){case"previous":var t=Ze(e);return null==t?null:this.X_(t);case"estimate":return this.Z_(Je(e));default:return null}},e.prototype.Z_=function(e){var t=st(e),n=new se(t.seconds,t.nanos);return this.timestampsInSnapshots?n:n.toDate()},e.prototype.ef=function(e){var t=C.g(e);b(Kt(t));var n=new oe(t.get(1),t.get(3)),r=new A(t.u(5));return n.isEqual(this.U)||m("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(r)},e}(),Zs=ci.ho,Js=function(){function e(e){var t,n,r,i,o;if(void 0===e.host){if(void 0!==e.ssl)throw new h(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else N("settings","non-empty string","host",e.host),this.host=e.host,D("settings","boolean","ssl",e.ssl),this.ssl=null===(t=e.ssl)||void 0===t||t;if($("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),D("settings","object","credentials",e.credentials),this.credentials=e.credentials,D("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),D("settings","boolean","ignoreUndefinedProperties",e.ignoreUndefinedProperties),!0===e.timestampsInSnapshots?m("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===e.timestampsInSnapshots&&m("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=e.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=e.ignoreUndefinedProperties)&&void 0!==r&&r,D("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=ci._o;else{if(e.cacheSizeBytes!==Zs&&e.cacheSizeBytes<ci.lo)throw new h(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ci.lo);this.cacheSizeBytes=e.cacheSizeBytes}D("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=e.experimentalForceLongPolling)&&void 0!==i&&i,D("settings","boolean","experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=e.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(e,t,n,r){if(!0===t&&!0===r)throw new h(u.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),Qs=function(){function e(t,n,i,o){var a=this;if(void 0===i&&(i=new hs),void 0===o&&(o=new fs),this.rf=i,this.af=o,this.cf=null,this.uf=new Ir,this.INTERNAL={delete:function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var s=t;this.cf=s,this.__=e._f(s),this.ff=s.name,this.df=new No(n)}else{var l=t;if(!l.projectId)throw new h(u.INVALID_ARGUMENT,"Must provide projectId");this.__=new oe(l.projectId,l.database),this.ff="[DEFAULT]",this.df=new Lo}this.wf=new Js({})}return Object.defineProperty(e.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new ks(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){R("Firestore.settings",arguments,1),k("Firestore.settings","object",1,e),e.merge&&delete(e=Object.assign(Object.assign({},this.wf),e)).merge;var t=new Js(e);if(this.lf&&!this.wf.isEqual(t))throw new h(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=t,void 0!==t.credentials&&(this.df=function(e){if(!e)return new Lo;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new zo(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new h(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},e.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},e.prototype.enablePersistence=function(e){var t,n;if(this.lf)throw new h(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(e&&(void 0!==e.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(t=e.synchronizeTabs)&&void 0!==t?t:e.experimentalTabSynchronization)&&void 0!==n&&n,i=!!e.experimentalForceOwningTab&&e.experimentalForceOwningTab,r&&i))throw new h(u.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},e.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){if(void 0!==this.lf&&!this.lf.z_)throw new h(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return e=new gr,[2,(this.uf.bs((function(){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),e.resolve(),[3,3];case 2:return t=n.sent(),e.reject(t),[3,3];case 3:return[2]}}))}))})),e.promise)]}))}))},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.hf(),Ys(e))return this.lf.G_(e);k("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.lf.G_(t)},e.prototype.hf=function(){return this.lf||this.Ef(new hs,new fs,{jl:!1}),this.lf},e.prototype.Af=function(){return new ie(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},e.prototype.Ef=function(e,t,n){var r=this.Af();return this.lf=new Xs(this.df,this.uf),this.lf.start(r,e,t,n)},e._f=function(e){if(t=e.options,!Object.prototype.hasOwnProperty.call(t,"projectId"))throw new h(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var t,n=e.options.projectId;if(!n||"string"!=typeof n)throw new h(u.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new oe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.cf)throw new h(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){return R("Firestore.collection",arguments,1),k("Firestore.collection","non-empty string",1,e),this.hf(),new dl(C.g(e),this,null)},e.prototype.doc=function(e){return R("Firestore.doc",arguments,1),k("Firestore.doc","non-empty string",1,e),this.hf(),nl.Rf(C.g(e),this,null)},e.prototype.collectionGroup=function(e){if(R("Firestore.collectionGroup",arguments,1),k("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new h(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new ul(function(e){return new Dn(C.P(),e)}(e),this,null)},e.prototype.runTransaction=function(e){var t=this;return R("Firestore.runTransaction",arguments,1),k("Firestore.runTransaction","function",1,e),this.hf().transaction((function(n){return e(new el(t,n))}))},e.prototype.batch=function(){return this.hf(),new tl(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),e.setLogLevel=function(e){var t;R("Firestore.setLogLevel",arguments,1),U("setLogLevel",["debug","error","silent","warn","info","verbose"],1,e),t=e,d.setLogLevel(t)},e.prototype.gf=function(){return this.wf.timestampsInSnapshots},e.prototype.Pf=function(){return this.wf},e}(),el=function(){function e(e,t){this.yf=e,this.Vf=t}return e.prototype.get=function(e){var t=this;R("Transaction.get",arguments,1);var n=gl("Transaction.get",e,this.yf);return this.Vf.v_([n.f_]).then((function(e){if(!e||1!==e.length)return y();var r=e[0];if(r instanceof Ln)return new il(t.yf,n.f_,null,!1,!1,n.d_);if(r instanceof kn)return new il(t.yf,n.f_,r,!1,!1,n.d_);throw y()}))},e.prototype.set=function(e,t,n){O("Transaction.set",arguments,2,3);var r=gl("Transaction.set",e,this.yf);n=fl("Transaction.set",n);var i=yl(r.d_,t,n),o=Ls(this.yf.mf,"Transaction.set",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,o),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof gs?(I("Transaction.update",arguments,3),r=gl("Transaction.update",e,this.yf),i=Ds(this.yf.mf,"Transaction.update",r.f_,t,n,o)):(R("Transaction.update",arguments,2),r=gl("Transaction.update",e,this.yf),i=Ns(this.yf.mf,"Transaction.update",r.f_,t)),this.Vf.update(r.f_,i),this},e.prototype.delete=function(e){R("Transaction.delete",arguments,1);var t=gl("Transaction.delete",e,this.yf);return this.Vf.delete(t.f_),this},e}(),tl=function(){function e(e){this.yf=e,this.pf=[],this.bf=!1}return e.prototype.set=function(e,t,n){O("WriteBatch.set",arguments,2,3),this.vf();var r=gl("WriteBatch.set",e,this.yf);n=fl("WriteBatch.set",n);var i=yl(r.d_,t,n),o=Ls(this.yf.mf,"WriteBatch.set",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(o.w_(r.f_,fn.ze())),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.vf(),"string"==typeof t||t instanceof gs?(I("WriteBatch.update",arguments,3),r=gl("WriteBatch.update",e,this.yf),i=Ds(this.yf.mf,"WriteBatch.update",r.f_,t,n,o)):(R("WriteBatch.update",arguments,2),r=gl("WriteBatch.update",e,this.yf),i=Ns(this.yf.mf,"WriteBatch.update",r.f_,t)),this.pf=this.pf.concat(i.w_(r.f_,fn.exists(!0))),this},e.prototype.delete=function(e){R("WriteBatch.delete",arguments,1),this.vf();var t=gl("WriteBatch.delete",e,this.yf);return this.pf=this.pf.concat(new Tn(t.f_,fn.ze())),this},e.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},e.prototype.vf=function(){if(this.bf)throw new h(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),nl=function(e){function t(t,n,r){var i=this;return(i=e.call(this,n.__,t,r)||this).f_=t,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return r.__extends(t,e),t.Rf=function(e,n,r){if(e.length%2!=0)throw new h(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.R()+" has "+e.length);return new t(new A(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new dl(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){if(R("DocumentReference.collection",arguments,1),k("DocumentReference.collection","non-empty string",1,e),!e)throw new h(u.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=C.g(e);return new dl(this.f_.path.child(t),this.firestore,null)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.f_.isEqual(e.f_)&&this.d_===e.d_},t.prototype.set=function(e,t){O("DocumentReference.set",arguments,1,2),t=fl("DocumentReference.set",t);var n=yl(this.d_,e,t),r=Ls(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,t);return this.lf.write(r.w_(this.f_,fn.ze()))},t.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof gs?(I("DocumentReference.update",arguments,2),n=Ds(this.firestore.mf,"DocumentReference.update",this.f_,e,t,r)):(R("DocumentReference.update",arguments,1),n=Ns(this.firestore.mf,"DocumentReference.update",this.f_,e)),this.lf.write(n.w_(this.f_,fn.exists(!0)))},t.prototype.delete=function(){return R("DocumentReference.delete",arguments,0),this.lf.write([new Tn(this.f_,fn.ze())])},t.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];O("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Ys(i[s])||($("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),D("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var l={includeMetadataChanges:a.includeMetadataChanges};if(Ys(i[s])){var c=i[s];i[s]=null===(e=c.next)||void 0===e?void 0:e.bind(c),i[s+1]=null===(t=c.error)||void 0===t?void 0:t.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else k("DocumentReference.onSnapshot","function",s,i[s]),L("DocumentReference.onSnapshot","function",s+1,i[s+1]),L("DocumentReference.onSnapshot","function",s+2,i[s+2]);var u={next:function(e){i[s]&&i[s](r.Sf(e))},error:i[s+1],complete:i[s+2]};return this.lf.listen(Un(this.f_.path),l,u)},t.prototype.get=function(e){var t=this;O("DocumentReference.get",arguments,0,1),ml("DocumentReference.get",e);var n=this.firestore.hf();return e&&"cache"===e.source?n.Q_(this.f_).then((function(e){return new il(t.firestore,t.f_,e,!0,e instanceof kn&&e.Je,t.d_)})):n.W_(this.f_,e).then((function(e){return t.Sf(e)}))},t.prototype.withConverter=function(e){return new t(this.f_,this.firestore,e)},t.prototype.Sf=function(e){var t=e.docs.get(this.f_);return new il(this.firestore,this.f_,t,e.fromCache,e.hasPendingWrites,this.d_)},t}(As),rl=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),il=function(){function e(e,t,n,r,i,o){this.yf=e,this.f_=t,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}return e.prototype.data=function(e){var t=this;if(O("DocumentSnapshot.data",arguments,0,1),e=pl("DocumentSnapshot.data",e),this.Df){if(this.d_){var n=new ol(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,e)}return new Ks(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",(function(e){return new nl(e,t.yf,null)}),(function(e){return new re(e)})).X_(this.Df.rn())}},e.prototype.get=function(e,t){var n=this;if(O("DocumentSnapshot.get",arguments,1,2),t=pl("DocumentSnapshot.get",t),this.Df){var r=this.Df.data().field(Vs("DocumentSnapshot.get",e,this.f_));if(null!==r)return new Ks(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",(function(e){return new nl(e,n.yf,n.d_)}),(function(e){return new re(e)})).X_(r)}},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new nl(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new rl(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","DocumentSnapshot",1,t);return this.yf===t.yf&&this.Cf===t.Cf&&this.f_.isEqual(t.f_)&&(null===this.Df?null===t.Df:this.Df.isEqual(t.Df))&&this.d_===t.d_},e}(),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.data=function(t){return e.prototype.data.call(this,t)},t}(il);function al(e,t,n){if("string"==typeof n){if(""===n)throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$n(t)&&-1!==n.indexOf("/"))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(C.g(n));if(!A.F(r))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ut(e,new A(r))}if(n instanceof As)return ut(e,n.f_);throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+j(n)+".")}function sl(e,t){if(!Array.isArray(e)||0===e.length)throw new h(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===t||"array-contains-any"===t){if(e.indexOf(null)>=0)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ll(e,t,n){if(!n.isEqual(t))throw new h(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function cl(e){if(Bn(e)&&0===e.on.length)throw new h(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ul=function(){function e(e,t,n){this.Ff=e,this.firestore=t,this.d_=n}return e.prototype.where=function(t,n,r){R("Query.where",arguments,3),V("Query.where",3,r);var i=U("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=Vs("Query.where",t),a=function(e,t,n,r,i,o,a){var s;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){sl(a,o);for(var l=[],c=0,d=a;c<d.length;c++){var f=d[c];l.push(al(r,e,f))}s={arrayValue:{values:l}}}else s=al(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||sl(a,o),s=zs(n,"Query.where",a,"in"===o||"not-in"===o);var p=er.create(i,o,s);return function(e,t){if(t.hn()){var n=Vn(e);if(null!==n&&!n.isEqual(t.field))throw new h(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=jn(e);null!==r&&ll(0,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new h(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new h(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(this.Ff,0,this.firestore.mf,this.firestore.__,o,i,r);return new e(function(e,t){var n=e.filters.concat([t]);return new Dn(e.path,e.collectionGroup,e.on.slice(),n,e.limit,e.an,e.startAt,e.endAt)}(this.Ff,a),this.firestore,this.d_)},e.prototype.orderBy=function(t,n){var r;if(O("Query.orderBy",arguments,1,2),L("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(u.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Vs("Query.orderBy",t),o=function(e,t,n){if(null!==e.startAt)throw new h(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new h(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fr(t,n);return function(e,t){if(null===jn(e)){var n=Vn(e);null!==n&&ll(0,n,t.field)}}(e,r),r}(this.Ff,i,r);return new e(function(e,t){var n=e.on.concat([t]);return new Dn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.an,e.startAt,e.endAt)}(this.Ff,o),this.firestore,this.d_)},e.prototype.limit=function(t){return R("Query.limit",arguments,1),k("Query.limit","number",1,t),G("Query.limit",1,t),new e(Wn(this.Ff,t,"F"),this.firestore,this.d_)},e.prototype.limitToLast=function(t){return R("Query.limitToLast",arguments,1),k("Query.limitToLast","number",1,t),G("Query.limitToLast",1,t),new e(Wn(this.Ff,t,"L"),this.firestore,this.d_)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAt",arguments,1);var i=this.xf("Query.startAt",t,n,!0);return new e(qn(this.Ff,i),this.firestore,this.d_)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAfter",arguments,1);var i=this.xf("Query.startAfter",t,n,!1);return new e(qn(this.Ff,i),this.firestore,this.d_)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endBefore",arguments,1);var i=this.xf("Query.endBefore",t,n,!0);return new e(Xn(this.Ff,i),this.firestore,this.d_)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endAt",arguments,1);var i=this.xf("Query.endAt",t,n,!1);return new e(Xn(this.Ff,i),this.firestore,this.d_)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","Query",1,t);return this.firestore===t.firestore&&Yn(this.Ff,t.Ff)&&this.d_===t.d_},e.prototype.withConverter=function(t){return new e(this.Ff,this.firestore,t)},e.prototype.xf=function(e,t,n,i){if(V(e,1,t),t instanceof il)return R(e,r.__spreadArrays([t],n),1),function(e,t,n,r,i){if(!r)throw new h(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Hn(e);a<s.length;a++){var l=s[a];if(l.field.p())o.push(ut(t,r.key));else{var c=r.field(l.field);if(Ke(c))throw new h(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var d=l.field.R();throw new h(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}o.push(c)}}return new cr(o,i)}(this.Ff,this.firestore.__,e,t.Df,i);var o=[t].concat(n);return function(e,t,n,r,i,o){var a=e.on;if(i.length>a.length)throw new h(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var c=i[l];if(a[l].field.p()){if("string"!=typeof c)throw new h(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!$n(e)&&-1!==c.indexOf("/"))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var d=e.path.child(C.g(c));if(!A.F(d))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+d+"' is not because it contains an odd number of segments.");var f=new A(d);s.push(ut(t,f))}else{var p=zs(n,r,c);s.push(p)}}return new cr(s,o)}(this.Ff,this.firestore.__,this.firestore.mf,e,o,i)},e.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];O("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||Ys(i[s])||($("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),D("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),Ys(i[s])){var l=i[s];i[s]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[s+1]=null===(t=l.error)||void 0===t?void 0:t.bind(l),i[s+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}else k("Query.onSnapshot","function",s,i[s]),L("Query.onSnapshot","function",s+1,i[s+1]),L("Query.onSnapshot","function",s+2,i[s+2]);var c={next:function(e){i[s]&&i[s](new hl(r.firestore,r.Ff,e,r.d_))},error:i[s+1],complete:i[s+2]};return cl(this.Ff),this.firestore.hf().listen(this.Ff,a,c)},e.prototype.get=function(e){var t=this;O("Query.get",arguments,0,1),ml("Query.get",e),cl(this.Ff);var n=this.firestore.hf();return(e&&"cache"===e.source?n.j_(this.Ff):n.K_(this.Ff,e)).then((function(e){return new hl(t.firestore,t.Ff,e,t.d_)}))},e}(),hl=function(){function e(e,t,n,r){this.yf=e,this.$f=t,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new rl(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;O("QuerySnapshot.forEach",arguments,1,2),k("QuerySnapshot.forEach","function",1,e),this.kf.docs.forEach((function(r){e.call(t,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new ul(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){e&&($("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),D("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this.kf.Kt)throw new h(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===t||(this.Mf=function(e,t,n){if(e.Qt.m()){var r=0;return e.docChanges.map((function(t){var i=n(t.doc,e.fromCache,e.Wt.has(t.doc.key));return t.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=e.Qt;return e.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var r=n(t.doc,e.fromCache,e.Wt.has(t.doc.key)),o=-1,a=-1;return 0!==t.type&&(o=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(a=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:vl(t.type),doc:r,oldIndex:o,newIndex:a}}))}(this.kf,t,this.Lf.bind(this)),this.Of=t),this.Mf},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","QuerySnapshot",1,t);return this.yf===t.yf&&Yn(this.$f,t.$f)&&this.kf.isEqual(t.kf)&&this.d_===t.d_},e.prototype.Lf=function(e,t,n){return new ol(this.yf,e.key,e,t,n,this.d_)},e}(),dl=function(e){function t(t,n,r){var i=this;if((i=e.call(this,Un(t),n,r)||this).Bf=t,t.length%2!=1)throw new h(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.R()+" has "+t.length);return i}return r.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this.Ff.path.h();return e.m()?null:new nl(new A(e),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Y.k()),k("CollectionReference.doc","non-empty string",1,e);var t=C.g(e);return nl.Rf(this.Ff.path.child(t),this.firestore,this.d_)},t.prototype.add=function(e){R("CollectionReference.add",arguments,1);var t=this.d_?this.d_.toFirestore(e):e;k("CollectionReference.add","object",1,t);var n=this.doc();return new nl(n.f_,this.firestore,null).set(t).then((function(){return n}))},t.prototype.withConverter=function(e){return new t(this.Bf,this.firestore,e)},t}(ul);function fl(e,t){if(void 0===t)return{merge:!1};if($(e,t,["merge","mergeFields"]),D(e,"boolean","merge",t.merge),function(e,t,n,r){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new h(u.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(r[o]))}(e,"mergeFields",0,r,(function(e){return"string"==typeof e||e instanceof gs}))}(e,0,0,t.mergeFields),void 0!==t.mergeFields&&void 0!==t.merge)throw new h(u.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function pl(e,t){return void 0===t?{}:($(e,t,["serverTimestamps"]),z(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function ml(e,t){L(e,"object",1,t),t&&($(e,t,["source"]),z(e,0,"source",t.source,["default","server","cache"]))}function gl(e,t,n){if(t instanceof As){if(t.firestore!==n)throw new h(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw H(e,"DocumentReference",1,t)}function vl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function yl(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.serverTimestamp=function(){P("FieldValue.serverTimestamp",arguments);var e=new _s("serverTimestamp");return e.e_="FieldValue.serverTimestamp",new t(e)},t.delete=function(){P("FieldValue.delete",arguments);var e=new bs("deleteField");return e.e_="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I("FieldValue.arrayUnion",arguments,1);var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("arrayUnion()",arguments,1),new ws("arrayUnion",e)}.apply(void 0,e);return r.e_="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I("FieldValue.arrayRemove",arguments,1);var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("arrayRemove()",arguments,1),new Ss("arrayRemove",e)}.apply(void 0,e);return r.e_="FieldValue.arrayRemove",new t(r)},t.increment=function(e){k("FieldValue.increment","number",1,e),R("FieldValue.increment",arguments,1);var n=function(e){return new Es("increment",e)}(e);return n.e_="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this.l_.isEqual(e.l_)},t}(Ms),xl={Firestore:Qs,GeoPoint:Cs,Timestamp:se,Blob:re,Transaction:el,WriteBatch:tl,DocumentReference:nl,DocumentSnapshot:il,Query:ul,QueryDocumentSnapshot:ol,QuerySnapshot:hl,CollectionReference:dl,FieldPath:gs,FieldValue:bl,setLogLevel:Qs.setLogLevel,CACHE_SIZE_UNLIMITED:Zs};!function(e){!function(e){e.INTERNAL.registerComponent(new l.Component("firestore",(function(e){return function(e,t){var n=new fs,r=new ds(n);return new Qs(e,t,r,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},xl)))}(e),e.registerVersion("@firebase/firestore","1.18.0")}(c.default)},2477:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(t),n.d(t,{LogLevel:()=>o,Logger:()=>h,setLogLevel:()=>d,setUserLogHandler:()=>f});var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),u=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){a.forEach((function(t){t.setLogLevel(e)}))}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},6336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5215),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;l||(f=64,a||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,l=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==l)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var u=a<<4&240|s>>2;if(r.push(u),64!==l){var h=s<<6&192|l;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return l.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=u(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}var p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(g,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",l=new p(i,s),c=0,u=Object.keys(r);c<u.length;c++){var h=u[c];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=r[h])}return l},e}(),g=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var y=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],l=this.chain_[1],c=this.chain_[2],u=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=u^l&(c^u),a=1518500249):(o=l^c^u,a=1859775393):r<60?(o=l&c|u&(l|c),a=2400959708):(o=l^c^u,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=u,u=c,c=4294967295&(l<<30|l>>>2),l=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),x=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e){if("object"!=typeof e||null===e)return!1;for(var t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function _(){}function w(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(r+" argument ")}var S=144e5;t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.MAX_VALUE_MILLIS=S,t.RANDOM_FACTOR=.5,t.Sha1=b,t.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=l,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return l.encodeByteArray(t,!0)},t.calculateBackoffMillis=function(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(S,r+i)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new x(e,t);return n.subscribe.bind(n)},t.decode=y,t.deepCopy=function(e){return u(void 0,e)},t.deepExtend=u,t.errorPrefix=w,t.getUA=d,t.isAdmin=function(e){var t=y(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return d().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=d();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=f,t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return d().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=y(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=y(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=y(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(w(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(w(e,t,r)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(w(e,t,r)+"must be a valid firebase namespace.")}},7036:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ErrorCode:()=>nr,EventType:()=>rr,WebChannel:()=>ir,XhrIo:()=>or,createWebChannelTransport:()=>tr,default:()=>ar});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},s=s||{},l=a||self;function c(){}function u(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function h(e){var t=u(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function y(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function x(e,t){function n(){}n.prototype=t.prototype,e.S=t.prototype,e.prototype=new n,e.prototype.constructor=e}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,f)&&e[f]||(e[f]=++p)}(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function E(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function M(e){return/^[\s\xa0]*$/.test(e)}var T,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function P(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var I=l.navigator;if(I){var O=I.userAgent;if(O){T=O;break e}}T=""}function k(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t={};for(var n in e)t[n]=e[n];return t}var N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<N.length;o++)n=N[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function z(e){return z[" "](e),e}z[" "]=c;var U,F,B=P(T,"Opera"),j=P(T,"Trident")||P(T,"MSIE"),V=P(T,"Edge"),$=V||j,H=P(T,"Gecko")&&!(P(T.toLowerCase(),"webkit")&&!P(T,"Edge"))&&!(P(T,"Trident")||P(T,"MSIE"))&&!P(T,"Edge"),G=P(T.toLowerCase(),"webkit")&&!P(T,"Edge");function W(){var e=l.document;return e?e.documentMode:void 0}e:{var q="",X=(F=T,H?/rv:([^\);]+)(\)|;)/.exec(F):V?/Edge\/([\d\.]+)/.exec(F):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(F):G?/WebKit\/(\S+)/.exec(F):B?/(?:Version)[ \/]?(\S+)/.exec(F):void 0);if(X&&(q=X?X[1]:""),j){var Y=W();if(null!=Y&&Y>parseFloat(q)){U=String(Y);break e}}U=q}var K,Z={};function J(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=A(String(U)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}l.document&&j?K=W()||parseInt(U,10)||void 0:K=void 0;var Q=K,ee=!j||9<=Number(Q),te=j&&!J("9"),ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l.addEventListener("test",c,t),l.removeEventListener("test",c,t)}catch(e){}return e}();function re(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function ie(e,t){if(re.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{z(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:oe[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}re.prototype.b=function(){this.defaultPrevented=!0},x(ie,re);var oe={2:"touch",3:"pen",4:"mouse"};ie.prototype.b=function(){ie.S.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,te)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ae="closure_listenable_"+(1e6*Math.random()|0),se=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++se,this.Y=this.Z=!1}function ce(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function ue(e){this.src=e,this.a={},this.b=0}function he(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=w(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ce(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function de(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}ue.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=de(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var fe="closure_lm_"+(1e6*Math.random()|0),pe={};function me(e,t,n,r,i){if(r&&r.once)return ve(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ae]?e.va(t,n,d(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!ee)return null;var s=Se(e);if(s||(e[fe]=s=new ue(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=we,t=ee?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ne||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ve(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ae]?e.wa(t,n,d(r)?!!r.capture:!!r,i):ge(e,t,n,!0,r,i)}function ye(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=Ce(n),e&&e[ae]?(e=e.c,(t=String(t).toString())in e.a&&-1<(n=de(o=e.a[t],n,r,i))&&(ce(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=Se(e))&&(t=e.a[t.toString()],e=-1,t&&(e=de(t,n,r,i)),(n=-1<e?t[e]:null)&&be(n))}function be(e){if("number"!=typeof e&&e&&!e.Y){var t=e.src;if(t&&t[ae])he(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Se(t))?(he(n,e),0==n.b&&(n.src=null,t[fe]=null)):ce(e)}}}function xe(e){return e in pe?pe[e]:pe[e]="on"+e}function _e(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&be(e),n.call(r,t)}function we(e,t){if(e.Y)return!0;if(!ee){if(!t)e:{t=["window","event"];for(var n=l,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return _e(e,t=new ie(t,this))}return _e(e,new ie(t,this))}function Se(e){return(e=e[fe])instanceof ue?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"==u(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Me(){_.call(this),this.c=new ue(this),this.J=this,this.C=null}function Te(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,l=a.ca||a.src;a.Z&&he(e.c,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}x(Me,_),Me.prototype[ae]=!0,(o=Me.prototype).addEventListener=function(e,t,n,r){me(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){ye(this,e,t,n,r)},o.dispatchEvent=function(e){var t,n=this.C;if(n)for(t=[];n;n=n.C)t.push(n);n=this.J;var r=e.type||e;if("string"==typeof e)e=new re(e,n);else if(e instanceof re)e.target=e.target||n;else{var i=e;D(e=new re(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Te(a,r,!0,e)&&i}if(i=Te(a=e.a=n,r,!0,e)&&i,i=Te(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Te(a=e.a=t[o],r,!1,e)&&i;return i},o.G=function(){if(Me.S.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ce(n[r]);delete t.a[e],t.b--}}this.C=null},o.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},o.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ae=l.JSON.stringify;function Pe(){this.b=this.a=null}var Re,Ie=new(function(){function e(e,t,n){this.f=n,this.c=e,this.g=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new ke}),(function(e){e.reset()}),100);function Oe(){var e=ze,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function ke(){this.next=this.b=this.a=null}function Le(e){l.setTimeout((function(){throw e}),0)}function Ne(e,t){Re||function(){var e=l.Promise.resolve(void 0);Re=function(){e.then(Ue)}}(),De||(Re(),De=!0),ze.add(e,t)}Pe.prototype.add=function(e,t){var n=Ie.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},ke.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},ke.prototype.reset=function(){this.next=this.b=this.a=null};var De=!1,ze=new Pe;function Ue(){for(var e;e=Oe();){try{e.a.call(e.b)}catch(e){Le(e)}var t=Ie;t.g(e),t.b<t.f&&(t.b++,e.next=t.a,t.a=e)}De=!1}function Fe(e,t){Me.call(this),this.b=e||1,this.a=t||l,this.f=v(this.Ya,this),this.g=b()}function Be(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function je(e,t,n){if("function"==u(e))n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:l.setTimeout(e,t||0)}function Ve(e){e.a=je((function(){e.a=null,e.c&&(e.c=!1,Ve(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}x(Fe,Me),(o=Fe.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var e=b()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Be(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Fe.S.G.call(this),Be(this),delete this.a};var $e=function(e){function t(t,n,r){var i=e.call(this)||this;return i.g=null!=r?t.bind(r):t,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Ve(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(_);function He(e){_.call(this),this.b=e,this.a={}}x(He,_);var Ge=[];function We(e,t,n,r){Array.isArray(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function qe(e){k(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Xe(){this.a=!0}function Ye(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ae(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}He.prototype.G=function(){He.S.G.call(this),qe(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xe.prototype.info=function(){};var Ke=null;function Ze(){return Ke=Ke||new Me}function Je(e){re.call(this,"serverreachability",e)}function Qe(e){var t=Ze();t.dispatchEvent(new Je(t,e))}function et(e){re.call(this,"statevent",e)}function tt(e){var t=Ze();t.dispatchEvent(new et(t,e))}function nt(e){re.call(this,"timingevent",e)}function rt(e,t){if("function"!=u(e))throw Error("Fn must not be null and must be a function");return l.setTimeout((function(){e()}),t)}x(Je,re),x(et,re),x(nt,re);var it={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ot={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function at(){}function st(e){var t;return(t=e.a)||(t=e.a={}),t}function lt(){}at.prototype.a=null;var ct,ut={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ht(){re.call(this,"d")}function dt(){re.call(this,"c")}function ft(){}function pt(e,t,n,r){this.g=e,this.c=t,this.f=n,this.T=r||1,this.J=new He(this),this.P=mt,e=$?125:void 0,this.R=new Fe(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}x(ht,re),x(dt,re),x(ft,at),ct=new ft;var mt=45e3,gt={},vt={};function yt(e,t,n){e.H=1,e.i=Bt(Lt(t)),e.j=n,e.I=!0,bt(e,null)}function bt(e,t){e.u=b(),wt(e),e.l=Lt(e.i);var n=e.l,r=e.T;Array.isArray(r)||(r=[String(r)]),Qt(n.b,"t",r),e.D=0,e.a=Xn(e.g,e.g.C?t:null),0<e.O&&(e.F=new $e(v(e.Ca,e,e.a),e.O)),We(e.J,e.a,"readystatechange",e.Wa),t=e.B?L(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),Qe(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.T,e.j)}function xt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=_t(e,n);if(i==vt){4==t&&(e.h=4,tt(14),r=!1),Ye(e.c,e.f,null,"[Incomplete Response]");break}if(i==gt){e.h=4,tt(15),Ye(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}Ye(e.c,e.f,i,null),Tt(e,i)}4==t&&0==n.length&&(e.h=1,tt(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.W&&(e.W=!0,(t=e.g).a==e&&t.V&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bn(t),t.F=!0)):(Ye(e.c,e.f,n,"[Invalid Chunked Response]"),Mt(e),Ct(e))}function _t(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?vt:(n=Number(t.substring(n,r)),isNaN(n)?gt:(r+=1)+n>t.length?vt:(t=t.substr(r,n),e.D=r+n,t))}function wt(e){e.U=b()+e.P,St(e,e.P)}function St(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=rt(v(e.Ua,e),t)}function Et(e){e.o&&(l.clearTimeout(e.o),e.o=null)}function Ct(e){0==e.g.v||e.A||$n(e.g,e)}function Mt(e){Et(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Be(e.R),qe(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Tt(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||sn(n.b,e)))if(n.I=e.N,!e.C&&sn(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Vn(n),In(n)}Fn(n),tt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=rt(v(n.Ra,n),6e3));if(1>=an(n.b)&&n.ea){try{n.ea()}catch(e){}n.ea=void 0}}else Gn(n,11)}else if((e.C||n.a==e)&&Vn(n),!M(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var l=1.5*s;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var c=e.a;if(c){var u=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=l.b;!h.a&&(P(u,"spdy")||P(u,"quic")||P(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ln(h,h.b),h.b=null))}if(l.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(l.na=d,Ft(l.B,l.A,d))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=b()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=e;if((l=n).la=qn(l,l.C?l.ga:null,l.fa),f.C){cn(l.b,f);var p=f,m=l.D;m&&p.setTimeout(m),p.o&&(Et(p),wt(p)),l.a=f}else Un(l);0<n.g.length&&Ln(n)}else"stop"!=i[0]&&"close"!=i[0]||Gn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Gn(n,7):Rn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Qe(4)}catch(e){}}function At(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"==typeof e)S(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(h(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"==typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Pt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pt)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Rt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];It(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)It(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(o=pt.prototype).setTimeout=function(e){this.P=e},o.Wa=function(e){e=e.target;var t=this.F;t&&3==Mn(e)?t.f():this.Ca(e)},o.Ca=function(e){try{if(e==this.a)e:{var t=Mn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>t||3==t&&!$&&!this.a.$())){this.A||4!=t||7==n||Qe(8==n||0>=r?3:2),Et(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,t,i),this.b){if(this.V&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(a)){var l=a;break t}}l=null}if(!l){this.b=!1,this.h=3,tt(12),Mt(this),Ct(this);break e}Ye(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Tt(this,l)}this.I?(xt(this,t,o),$&&this.b&&3==t&&(We(this.J,this.R,"tick",this.Va),this.R.start())):(Ye(this.c,this.f,o,null),Tt(this,o)),4==t&&Mt(this),this.b&&!this.A&&(4==t?$n(this.g,this):(this.b=!1,wt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tt(12)):(this.h=0,tt(13)),Mt(this),Ct(this)}}}catch(e){}},o.Va=function(){if(this.a){var e=Mn(this.a),t=this.a.$();this.D<t.length&&(Et(this),xt(this,e,t),this.b&&4!=e&&wt(this))}},o.cancel=function(){this.A=!0,Mt(this)},o.Ua=function(){this.o=null;var e=b();0<=e-this.U?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(Qe(3),tt(17)),Mt(this),this.h=2,Ct(this)):St(this,this.U-e)},(o=Pt.prototype).K=function(){Rt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},o.L=function(){return Rt(this),this.a.concat()},o.get=function(e,t){return It(this.b,e)?this.b[e]:t},o.set=function(e,t){It(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},o.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Ot=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kt(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof kt){this.a=void 0!==t?t:e.a,Nt(this,e.f),this.j=e.j,Dt(this,e.c),zt(this,e.h),this.g=e.g,t=e.b;var n=new Yt;n.c=t.c,t.a&&(n.a=new Pt(t.a),n.b=t.b),Ut(this,n),this.i=e.i}else e&&(n=String(e).match(Ot))?(this.a=!!t,Nt(this,n[1]||"",!0),this.j=jt(n[2]||""),Dt(this,n[3]||"",!0),zt(this,n[4]),this.g=jt(n[5]||"",!0),Ut(this,n[6]||"",!0),this.i=jt(n[7]||"")):(this.a=!!t,this.b=new Yt(null,this.a))}function Lt(e){return new kt(e)}function Nt(e,t,n){e.f=n?jt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Dt(e,t,n){e.c=n?jt(t,!0):t}function zt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function Ut(e,t,n){t instanceof Yt?(e.b=t,function(e,t){t&&!e.f&&(Kt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),Qt(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Vt(t,qt)),e.b=new Yt(t,e.a))}function Ft(e,t,n){e.b.set(t,n)}function Bt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,$t),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function $t(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Vt(t,Ht,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Vt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vt(n,"/"==n.charAt(0)?Wt:Gt,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Vt(n,Xt)),e.join("")};var Ht=/[#\/\?@]/g,Gt=/[#\?:]/g,Wt=/[#\?]/g,qt=/[#\?@]/g,Xt=/#/g;function Yt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Kt(e){e.a||(e.a=new Pt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){Kt(e),t=en(e,t),It(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,It((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Rt(e)))}function Jt(e,t){return Kt(e),t=en(e,t),It(e.a.b,t)}function Qt(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(en(e,t),C(n)),e.b+=n.length)}function en(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tn(e,t){this.b=e,this.a=t}function nn(e){this.g=e||rn,e=l.PerformanceNavigationTiming?0<(e=l.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(l.ia&&l.ia.ya&&l.ia.ya()&&l.ia.ya().qb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Yt.prototype).add=function(e,t){Kt(this),this.c=null,e=en(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},o.forEach=function(e,t){Kt(this),this.a.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},o.L=function(){Kt(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},o.K=function(e){Kt(this);var t=[];if("string"==typeof e)Jt(this,e)&&(t=E(t,this.a.get(en(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=E(t,e[n])}return t},o.set=function(e,t){return Kt(this),this.c=null,Jt(this,e=en(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},o.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var rn=10;function on(e){return!!e.b||!!e.a&&e.a.size>=e.f}function an(e){return e.b?1:e.a?e.a.size:0}function sn(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function ln(e,t){e.a?e.a.add(t):e.b=t}function cn(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function un(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var o=i(e.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return C(e.c)}function hn(){}function dn(){this.a=new hn}function fn(e,t,n){var r=n||"";try{At(e,(function(e,n){var i=e;d(e)&&(i=Ae(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function pn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}nn.prototype.cancel=function(){var e,t;if(this.c=un(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},hn.prototype.stringify=function(e){return l.JSON.stringify(e,void 0)},hn.prototype.parse=function(e){return l.JSON.parse(e,void 0)};var mn=l.JSON.parse;function gn(e){Me.call(this),this.headers=new Pt,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=vn,this.D=this.F=!1}x(gn,Me);var vn="",yn=/^https?$/i,bn=["POST","PUT"];function xn(e){return"content-type"==e.toLowerCase()}function _n(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,wn(e),En(e)}function wn(e){e.u||(e.u=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Sn(e){if(e.b&&void 0!==s&&(!e.s[1]||4!=Mn(e)||2!=e.X()))if(e.l&&4==Mn(e))je(e.za,0,e);else if(e.dispatchEvent("readystatechange"),4==Mn(e)){e.b=!1;try{var t,n=e.X();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Ot)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!yn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<Mn(e)?e.a.statusText:""}catch(e){c=""}e.f=c+" ["+e.X()+"]",wn(e)}}finally{En(e)}}}function En(e,t){if(e.a){Cn(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Cn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(l.clearTimeout(e.m),e.m=null)}function Mn(e){return e.a?e.a.readyState:0}function Tn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return k(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ft(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pn(e){this.pa=0,this.g=[],this.c=new Xe,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=An("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=An("baseRetryDelayMs",5e3,e),this.Ma=An("retryDelaySeedMs",1e4,e),this.Ja=An("forwardChannelMaxRetries",2,e),this.ma=An("forwardChannelRequestTimeoutMs",2e4,e),this.Ka=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(e&&e.concurrentRequestLimit),this.ka=new dn,this.da=e&&e.fastHandshake||!1,this.Ga=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&e&&e.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Rn(e){if(On(e),3==e.v){var t=e.R++,n=Lt(e.B);Ft(n,"SID",e.J),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),Dn(e,n),(t=new pt(e,e.c,t,void 0)).H=2,t.i=Bt(Lt(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(t.i.toString(),"")),!n&&l.Image&&((new Image).src=t.i,n=!0),n||(t.a=Xn(t.g,null),t.a.ba(t.i)),t.u=b(),wt(t)}Wn(e)}function In(e){e.a&&(Bn(e),e.a.cancel(),e.a=null)}function On(e){In(e),e.j&&(l.clearTimeout(e.j),e.j=null),Vn(e),e.b.cancel(),e.h&&("number"==typeof e.h&&l.clearTimeout(e.h),e.h=null)}function kn(e,t){e.g.push(new tn(e.La++,t)),3==e.v&&Ln(e)}function Ln(e){on(e.b)||e.h||(e.h=!0,Ne(e.Ba,e),e.u=0)}function Nn(e,t){var n;n=t?t.f:e.R++;var r=Lt(e.B);Ft(r,"SID",e.J),Ft(r,"RID",n),Ft(r,"AID",e.P),Dn(e,r),e.i&&e.l&&Tn(r,e.i,e.l),n=new pt(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=zn(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),ln(e.b,n),yt(n,r,t)}function Dn(e,t){e.f&&At({},(function(e,n){Ft(t,n,e)}))}function zn(e,t,n){n=Math.min(e.g.length,n);var r=e.f?v(e.f.Ha,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,l=0;l<n;l++){var c=i[l].b,u=i[l].a;if(0>(c-=o))o=Math.max(0,i[l].b-100),s=!1;else try{fn(u,a,"req"+c+"_")}catch(e){r&&r(u)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function Un(e){e.a||e.j||(e.U=1,Ne(e.Aa,e),e.o=0)}function Fn(e){return!(e.a||e.j||3<=e.o||(e.U++,e.j=rt(v(e.Aa,e),Hn(e,e.o)),e.o++,0))}function Bn(e){null!=e.s&&(l.clearTimeout(e.s),e.s=null)}function jn(e){e.a=new pt(e,e.c,"rpc",e.U),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Lt(e.la);Ft(t,"RID","rpc"),Ft(t,"SID",e.J),Ft(t,"CI",e.H?"0":"1"),Ft(t,"AID",e.P),Dn(e,t),Ft(t,"TYPE","xmlhttp"),e.i&&e.l&&Tn(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=Bt(Lt(t)),n.j=null,n.I=!0,bt(n,e)}function Vn(e){null!=e.m&&(l.clearTimeout(e.m),e.m=null)}function $n(e,t){var n=null;if(e.a==t){Vn(e),Bn(e),e.a=null;var r=2}else{if(!sn(e.b,t))return;n=t.s,cn(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=b()-t.u;var i=e.u;(r=Ze()).dispatchEvent(new nt(r,n,t,i)),Ln(e)}else Un(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(an(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.g=t.s.concat(e.g),0):1==e.v||2==e.v||e.u>=(e.Ia?0:e.Ja)||(e.h=rt(v(e.Ba,e,t),Hn(e,e.u)),e.u++,0)))}(e,t)||2==r&&Fn(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:Gn(e,5);break;case 4:Gn(e,10);break;case 3:Gn(e,6);break;default:Gn(e,2)}}function Hn(e,t){var n=e.Fa+Math.floor(Math.random()*e.Ma);return e.f||(n*=2),n*t}function Gn(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=v(e.Xa,e);n||(n=new kt("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||Nt(n,"https"),Bt(n)),function(e,t){var n=new Xe;if(l.Image){var r=new Image;r.onload=y(pn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=y(pn,n,r,"TestLoadImage: error",!1,t),r.onabort=y(pn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=y(pn,n,r,"TestLoadImage: timeout",!1,t),l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else tt(2);e.v=0,e.f&&e.f.ra(t),Wn(e),On(e)}function Wn(e){e.v=0,e.I=-1,e.f&&(0==un(e.b).length&&0==e.g.length||(e.b.c.length=0,C(e.g),e.g.length=0),e.f.qa())}function qn(e,t,n){var r=function(e){return e instanceof kt?Lt(e):new kt(e,void 0)}(n);if(""!=r.c)t&&Dt(r,t+"."+r.c),zt(r,r.h);else{var i=l.location;r=function(e,t,n,r){var i=new kt(null,void 0);return e&&Nt(i,e),t&&Dt(i,t),n&&zt(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.W&&k(e.W,(function(e,t){Ft(r,t,e)})),t=e.A,n=e.na,t&&n&&Ft(r,t,n),Ft(r,"VER",e.ha),Dn(e,r),r}function Xn(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new gn(e.Ka)).F=e.C,t}function Yn(){}function Kn(){if(j&&!(10<=Number(Q)))throw Error("Environmental error: no available transport.")}function Zn(e,t){Me.call(this),this.a=new Pn(t),this.l=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!M(e)&&(this.a.i=e),this.h=t&&t.supportsCrossDomainXhr||!1,this.g=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!M(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new er(this)}function Jn(e){ht.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Qn(){dt.call(this),this.status=1}function er(e){this.a=e}(o=gn.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?st(this.H):st(ct),this.a.onreadystatechange=v(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(e){return void _n(this,e)}e=n||"";var i=new Pt(this.headers);r&&At(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=xn,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.L()),n=l.FormData&&e instanceof l.FormData,!(0<=w(bn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Cn(this),0<this.o&&((this.D=function(e){return j&&J(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.xa,this)):this.m=je(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){_n(this,e)}},o.xa=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),En(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),gn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?Sn(this):this.Ta())},o.Ta=function(){Sn(this)},o.X=function(){try{return 2<Mn(this)?this.a.status:-1}catch(e){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},o.Na=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mn(t)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=Pn.prototype).ha=8,o.v=1,o.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new pt(this,this.c,e,void 0),r=this.l;if(this.O&&(r?D(r=L(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zn(this,n,t),Ft(i=Lt(this.B),"RID",e),Ft(i,"CVER",22),this.A&&Ft(i,"X-HTTP-Session-Id",this.A),Dn(this,i),this.i&&r&&Tn(i,this.i,r),ln(this.b,n),this.Ga&&Ft(i,"TYPE","init"),this.da?(Ft(i,"$req",t),Ft(i,"SID","null"),n.V=!0,yt(n,i,null)):yt(n,i,t),this.v=2}}else 3==this.v&&(e?Nn(this,e):0==this.g.length||on(this.b)||Nn(this))},o.Aa=function(){if(this.j=null,jn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=rt(v(this.Sa,this),e)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,In(this),jn(this))},o.Ra=function(){null!=this.m&&(this.m=null,In(this),Fn(this),tt(19))},o.Xa=function(e){e?(this.c.info("Successfully pinged google.com"),tt(2)):(this.c.info("Failed to ping google.com"),tt(1))},(o=Yn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Kn.prototype.a=function(e,t){return new Zn(e,t)},x(Zn,Me),(o=Zn.prototype).addEventListener=function(e,t,n,r){Zn.S.addEventListener.call(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){Zn.S.removeEventListener.call(this,e,t,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var e=this.a,t=this.l,n=this.b||void 0;tt(0),e.fa=t,e.W=n||{},e.H=e.T,e.B=qn(e,null,e.fa),Ln(e)},o.close=function(){Rn(this.a)},o.Pa=function(e){if("string"==typeof e){var t={};t.__data__=e,kn(this.a,t)}else this.g?((t={}).__data__=Ae(e),kn(this.a,t)):kn(this.a,e)},o.G=function(){this.a.f=null,delete this.f,Rn(this.a),delete this.a,Zn.S.G.call(this)},x(Jn,ht),x(Qn,dt),x(er,Yn),er.prototype.ta=function(){this.a.dispatchEvent("a")},er.prototype.sa=function(e){this.a.dispatchEvent(new Jn(e))},er.prototype.ra=function(e){this.a.dispatchEvent(new Qn(e))},er.prototype.qa=function(){this.a.dispatchEvent("b")},Kn.prototype.createWebChannel=Kn.prototype.a,Zn.prototype.send=Zn.prototype.Pa,Zn.prototype.open=Zn.prototype.Oa,Zn.prototype.close=Zn.prototype.close,it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,ot.COMPLETE="complete",lt.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Me.prototype.listen=Me.prototype.va,gn.prototype.listenOnce=gn.prototype.wa,gn.prototype.getLastError=gn.prototype.Qa,gn.prototype.getLastErrorCode=gn.prototype.ua,gn.prototype.getStatus=gn.prototype.X,gn.prototype.getResponseJson=gn.prototype.Na,gn.prototype.getResponseText=gn.prototype.$,gn.prototype.send=gn.prototype.ba;var tr=function(){return new Kn},nr=it,rr=ot,ir=lt,or=gn;const ar={createWebChannelTransport:tr,ErrorCode:it,EventType:ot,WebChannel:lt,XhrIo:gn}},748:(e,t,n)=>{"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=n(6540))&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:l},u)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},4657:(e,t,n)=>{"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=n(6540))&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:l},u)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},5577:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(n(6199));i.default.registerVersion("firebase","7.24.0","app"),e.exports=i.default},1588:function(e,t){!function(e){"use strict";function t(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function n(e,n,r){var i,o=new Promise((function(o,a){t(i=e[n].apply(e,r)).then(o,a)}));return o.request=i,o}function r(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function i(e,t,r,i){i.forEach((function(i){i in r.prototype&&(e.prototype[i]=function(){return n(this[t],i,arguments)})}))}function o(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function a(e,t,r,i){i.forEach((function(i){i in r.prototype&&(e.prototype[i]=function(){return e=this[t],(r=n(e,i,arguments)).then((function(e){if(e)return new l(e,r.request)}));var e,r})}))}function s(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function c(e){this._store=e}function u(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function h(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new u(n)}function d(e){this._db=e}r(s,"_index",["name","keyPath","multiEntry","unique"]),i(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),a(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(l,"_cursor",["direction","key","primaryKey","value"]),i(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var n=this,r=arguments;return Promise.resolve().then((function(){return n._cursor[e].apply(n._cursor,r),t(n._request).then((function(e){if(e)return new l(e,n._request)}))}))})})),c.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(c,"_store",["name","keyPath","indexNames","autoIncrement"]),i(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),a(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),o(c,"_store",IDBObjectStore,["deleteIndex"]),u.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},r(u,"_tx",["objectStoreNames","mode"]),o(u,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},r(h,"_db",["name","version","objectStoreNames"]),o(h,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new u(this._db.transaction.apply(this._db,arguments))},r(d,"_db",["name","version","objectStoreNames"]),o(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[c,s].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[s,c].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,r){var i=n(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){r&&r(new h(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new d(e)}))},e.deleteDb=function(e){return n(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},2562:(e,t,n)=>{var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype.toString,d=Math.max,f=Math.min,p=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function x(){var e=p();if(b(e))return _(e);s=setTimeout(x,function(e){var n=t-(e-l);return h?f(n,o-(e-c)):n}(e))}function _(e){return s=void 0,v&&r?y(e):(r=i=void 0,a)}function w(){var e=p(),n=b(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(x,t),u?y(e):a}(l);if(h)return s=setTimeout(x,t),y(l)}return void 0===s&&(s=setTimeout(x,t)),a}return t=g(t)||0,m(n)&&(u=!!n.leading,o=(h="maxWait"in n)?d(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},w.flush=function(){return void 0===s?a:_(p())},w}},5580:(e,t,n)=>{var r=n(6110)(n(9325),"DataView");e.exports=r},1549:(e,t,n)=>{var r=n(2032),i=n(3862),o=n(6721),a=n(2749),s=n(5749);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},79:(e,t,n)=>{var r=n(3702),i=n(80),o=n(4739),a=n(8655),s=n(1175);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},8223:(e,t,n)=>{var r=n(6110)(n(9325),"Map");e.exports=r},3661:(e,t,n)=>{var r=n(3040),i=n(7670),o=n(289),a=n(4509),s=n(2949);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},2804:(e,t,n)=>{var r=n(6110)(n(9325),"Promise");e.exports=r},6545:(e,t,n)=>{var r=n(6110)(n(9325),"Set");e.exports=r},8859:(e,t,n)=>{var r=n(3661),i=n(1380),o=n(1459);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},7217:(e,t,n)=>{var r=n(79),i=n(1420),o=n(938),a=n(3605),s=n(9817),l=n(945);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},7828:(e,t,n)=>{var r=n(9325).Uint8Array;e.exports=r},8303:(e,t,n)=>{var r=n(6110)(n(9325),"WeakMap");e.exports=r},8491:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},9770:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},695:(e,t,n)=>{var r=n(8096),i=n(2428),o=n(6449),a=n(3656),s=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),d=!n&&!u&&!h&&l(e),f=n||u||h||d,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},4932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},4528:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},4248:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6547:(e,t,n)=>{var r=n(3360),i=n(5288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},6025:(e,t,n)=>{var r=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},4733:(e,t,n)=>{var r=n(1791),i=n(5950);e.exports=function(e,t){return e&&r(t,i(t),e)}},3838:(e,t,n)=>{var r=n(1791),i=n(7241);e.exports=function(e,t){return e&&r(t,i(t),e)}},3360:(e,t,n)=>{var r=n(3243);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9999:(e,t,n)=>{var r=n(7217),i=n(8491),o=n(6547),a=n(4733),s=n(3838),l=n(3290),c=n(3007),u=n(2271),h=n(8948),d=n(2),f=n(3349),p=n(5861),m=n(6189),g=n(7199),v=n(5529),y=n(6449),b=n(3656),x=n(7730),_=n(3805),w=n(8440),S=n(5950),E=n(7241),C="[object Arguments]",M="[object Function]",T="[object Object]",A={};A[C]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[T]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[M]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,P,R,I,O){var k,L=1&n,N=2&n,D=4&n;if(P&&(k=I?P(t,R,I,O):P(t)),void 0!==k)return k;if(!_(t))return t;var z=y(t);if(z){if(k=m(t),!L)return c(t,k)}else{var U=p(t),F=U==M||"[object GeneratorFunction]"==U;if(b(t))return l(t,L);if(U==T||U==C||F&&!I){if(k=N||F?{}:v(t),!L)return N?h(t,s(k,t)):u(t,a(k,t))}else{if(!A[U])return I?t:{};k=g(t,U,L)}}O||(O=new r);var B=O.get(t);if(B)return B;O.set(t,k),w(t)?t.forEach((function(r){k.add(e(r,n,P,r,t,O))})):x(t)&&t.forEach((function(r,i){k.set(i,e(r,n,P,i,t,O))}));var j=z?void 0:(D?N?f:d:N?E:S)(t);return i(j||t,(function(r,i){j&&(r=t[i=r]),o(k,i,e(r,n,P,i,t,O))})),k}},9344:(e,t,n)=>{var r=n(3805),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},909:(e,t,n)=>{var r=n(641),i=n(8329)(r);e.exports=i},6649:(e,t,n)=>{var r=n(3221)();e.exports=r},641:(e,t,n)=>{var r=n(6649),i=n(5950);e.exports=function(e,t){return e&&r(e,t,i)}},7422:(e,t,n)=>{var r=n(1769),i=n(7797);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},2199:(e,t,n)=>{var r=n(4528),i=n(6449);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},2552:(e,t,n)=>{var r=n(1873),i=n(659),o=n(9350),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7534:(e,t,n)=>{var r=n(2552),i=n(346);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},270:(e,t,n)=>{var r=n(7068),i=n(346);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},7068:(e,t,n)=>{var r=n(7217),i=n(5911),o=n(1986),a=n(689),s=n(5861),l=n(6449),c=n(3656),u=n(7167),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),b=l(t),x=y?d:s(e),_=b?d:s(t),w=(x=x==h?f:x)==f,S=(_=_==h?f:_)==f,E=x==_;if(E&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(E&&!w)return v||(v=new r),y||u(e)?i(e,t,n,m,g,v):o(e,t,x,n,m,g,v);if(!(1&n)){var C=w&&p.call(e,"__wrapped__"),M=S&&p.call(t,"__wrapped__");if(C||M){var T=C?e.value():e,A=M?t.value():t;return v||(v=new r),g(T,A,n,m,v)}}return!!E&&(v||(v=new r),a(e,t,n,m,g,v))}},9172:(e,t,n)=>{var r=n(5861),i=n(346);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},1799:(e,t,n)=>{var r=n(7217),i=n(270);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var f=new r;if(o)var p=o(h,d,u,e,t,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},5083:(e,t,n)=>{var r=n(1882),i=n(7296),o=n(3805),a=n(7473),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},6038:(e,t,n)=>{var r=n(5861),i=n(346);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},4901:(e,t,n)=>{var r=n(2552),i=n(294),o=n(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},5389:(e,t,n)=>{var r=n(3663),i=n(7978),o=n(3488),a=n(6449),s=n(583);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},8984:(e,t,n)=>{var r=n(5527),i=n(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2903:(e,t,n)=>{var r=n(3805),i=n(5527),o=n(181),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},5128:(e,t,n)=>{var r=n(909),i=n(4894);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},3663:(e,t,n)=>{var r=n(1799),i=n(776),o=n(7197);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},7978:(e,t,n)=>{var r=n(270),i=n(8156),o=n(631),a=n(8586),s=n(756),l=n(7197),c=n(7797);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7255:(e,t,n)=>{var r=n(7422);e.exports=function(e){return function(t){return r(t,e)}}},8096:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7556:(e,t,n)=>{var r=n(1873),i=n(4932),o=n(6449),a=n(4394),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},9219:e=>{e.exports=function(e,t){return e.has(t)}},4066:(e,t,n)=>{var r=n(3488);e.exports=function(e){return"function"==typeof e?e:r}},1769:(e,t,n)=>{var r=n(6449),i=n(8586),o=n(1802),a=n(3222);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},9653:(e,t,n)=>{var r=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},3290:(e,t,n)=>{e=n.nmd(e);var r=n(9325),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},6169:(e,t,n)=>{var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3201:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},3736:(e,t,n)=>{var r=n(1873),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},1961:(e,t,n)=>{var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},3007:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},1791:(e,t,n)=>{var r=n(6547),i=n(3360);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=o?o(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?i(n,c,u):r(n,c,u)}return n}},2271:(e,t,n)=>{var r=n(1791),i=n(4664);e.exports=function(e,t){return r(e,i(e),t)}},8948:(e,t,n)=>{var r=n(1791),i=n(6375);e.exports=function(e,t){return r(e,i(e),t)}},5481:(e,t,n)=>{var r=n(9325)["__core-js_shared__"];e.exports=r},8329:(e,t,n)=>{var r=n(4894);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},3221:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},3243:(e,t,n)=>{var r=n(6110),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},5911:(e,t,n)=>{var r=n(8859),i=n(4248),o=n(9219);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(a)var b=c?a(y,v,p,t,e,l):a(v,y,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},1986:(e,t,n)=>{var r=n(1873),i=n(7828),o=n(5288),a=n(5911),s=n(317),l=n(4247),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=a(f(e),f(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},689:(e,t,n)=>{var r=n(2),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var v=e[d=c[h]],y=t[d];if(o)var b=l?o(y,v,d,t,e,s):o(v,y,d,e,t,s);if(!(void 0===b?v===y||a(v,y,n,o,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(e),s.delete(t),m}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},2:(e,t,n)=>{var r=n(2199),i=n(4664),o=n(5950);e.exports=function(e){return r(e,o,i)}},3349:(e,t,n)=>{var r=n(2199),i=n(6375),o=n(7241);e.exports=function(e){return r(e,o,i)}},2651:(e,t,n)=>{var r=n(4218);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},776:(e,t,n)=>{var r=n(756),i=n(5950);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},6110:(e,t,n)=>{var r=n(5083),i=n(392);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},8879:(e,t,n)=>{var r=n(4335)(Object.getPrototypeOf,Object);e.exports=r},659:(e,t,n)=>{var r=n(1873),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},4664:(e,t,n)=>{var r=n(9770),i=n(3345),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},6375:(e,t,n)=>{var r=n(4528),i=n(8879),o=n(4664),a=n(3345),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},5861:(e,t,n)=>{var r=n(5580),i=n(8223),o=n(2804),a=n(6545),s=n(8303),l=n(2552),c=n(7473),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),v=c(o),y=c(a),b=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case v:return h;case y:return d;case b:return f}return t}),e.exports=x},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9326:(e,t,n)=>{var r=n(1769),i=n(2428),o=n(6449),a=n(361),s=n(294),l=n(7797);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var d=l(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&s(u)&&a(d,u)&&(o(e)||i(e))}},2032:(e,t,n)=>{var r=n(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6721:(e,t,n)=>{var r=n(1042),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},2749:(e,t,n)=>{var r=n(1042),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},5749:(e,t,n)=>{var r=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6189:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},7199:(e,t,n)=>{var r=n(9653),i=n(6169),o=n(3201),a=n(3736),s=n(1961);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},5529:(e,t,n)=>{var r=n(9344),i=n(8879),o=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},8586:(e,t,n)=>{var r=n(6449),i=n(4394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7296:(e,t,n)=>{var r,i=n(5481),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},756:(e,t,n)=>{var r=n(3805);e.exports=function(e){return e==e&&!r(e)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},80:(e,t,n)=>{var r=n(6025),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},4739:(e,t,n)=>{var r=n(6025);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},8655:(e,t,n)=>{var r=n(6025);e.exports=function(e){return r(this.__data__,e)>-1}},1175:(e,t,n)=>{var r=n(6025);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},3040:(e,t,n)=>{var r=n(1549),i=n(79),o=n(8223);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7670:(e,t,n)=>{var r=n(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},289:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).get(e)}},4509:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).has(e)}},2949:(e,t,n)=>{var r=n(2651);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},317:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},7197:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},2224:(e,t,n)=>{var r=n(104);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},1042:(e,t,n)=>{var r=n(6110)(Object,"create");e.exports=r},3650:(e,t,n)=>{var r=n(4335)(Object.keys,Object);e.exports=r},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6009:(e,t,n)=>{e=n.nmd(e);var r=n(4840),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},9325:(e,t,n)=>{var r=n(4840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},4247:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},1420:(e,t,n)=>{var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},938:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},945:(e,t,n)=>{var r=n(79),i=n(8223),o=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},1802:(e,t,n)=>{var r=n(2224),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},7797:(e,t,n)=>{var r=n(4394);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},8055:(e,t,n)=>{var r=n(9999);e.exports=function(e){return r(e,5)}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3215:(e,t,n)=>{var r=n(641),i=n(4066);e.exports=function(e,t){return e&&r(e,i(t))}},8156:(e,t,n)=>{var r=n(7422);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},631:(e,t,n)=>{var r=n(8077),i=n(9326);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3488:e=>{e.exports=function(e){return e}},2428:(e,t,n)=>{var r=n(7534),i=n(346),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},6449:e=>{var t=Array.isArray;e.exports=t},4894:(e,t,n)=>{var r=n(1882),i=n(294);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},3656:(e,t,n)=>{e=n.nmd(e);var r=n(9325),i=n(9935),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},1882:(e,t,n)=>{var r=n(2552),i=n(3805);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7730:(e,t,n)=>{var r=n(9172),i=n(7301),o=n(6009),a=o&&o.isMap,s=a?i(a):r;e.exports=s},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1331:(e,t,n)=>{var r=n(2552),i=n(8879),o=n(346),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},8440:(e,t,n)=>{var r=n(6038),i=n(7301),o=n(6009),a=o&&o.isSet,s=a?i(a):r;e.exports=s},5015:(e,t,n)=>{var r=n(2552),i=n(6449),o=n(346);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},4394:(e,t,n)=>{var r=n(2552),i=n(346);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},7167:(e,t,n)=>{var r=n(4901),i=n(7301),o=n(6009),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},5950:(e,t,n)=>{var r=n(695),i=n(8984),o=n(4894);e.exports=function(e){return o(e)?r(e):i(e)}},7241:(e,t,n)=>{var r=n(695),i=n(2903),o=n(4894);e.exports=function(e){return o(e)?r(e,!0):i(e)}},2543:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,d=NaN,f=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],m="[object Arguments]",g="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",x="[object Function]",_="[object GeneratorFunction]",w="[object Map]",S="[object Number]",E="[object Object]",C="[object Promise]",M="[object RegExp]",T="[object Set]",A="[object String]",P="[object Symbol]",R="[object WeakMap]",I="[object ArrayBuffer]",O="[object DataView]",k="[object Float32Array]",L="[object Float64Array]",N="[object Int8Array]",D="[object Int16Array]",z="[object Int32Array]",U="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",j="[object Uint32Array]",V=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,q=RegExp(G.source),X=RegExp(W.source),Y=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="["+_e+"]",Pe="["+Te+"]",Re="["+we+"]",Ie="\\d+",Oe="["+Se+"]",ke="["+Ee+"]",Le="[^"+_e+Te+Ie+Se+Ee+Ce+"]",Ne="\\ud83c[\\udffb-\\udfff]",De="[^"+_e+"]",ze="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+Ce+"]",Be="\\u200d",je="(?:"+ke+"|"+Le+")",Ve="(?:"+Fe+"|"+Le+")",$e="(?:['](?:d|ll|m|re|s|t|ve))?",He="(?:['](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Re+"|"+Ne+")?",We="["+Me+"]?",qe=We+Ge+"(?:"+Be+"(?:"+[De,ze,Ue].join("|")+")"+We+Ge+")*",Xe="(?:"+[Oe,ze,Ue].join("|")+")"+qe,Ye="(?:"+[De+Re+"?",Re,ze,Ue,Ae].join("|")+")",Ke=RegExp("[']","g"),Ze=RegExp(Re,"g"),Je=RegExp(Ne+"(?="+Ne+")|"+Ye+qe,"g"),Qe=RegExp([Fe+"?"+ke+"+"+$e+"(?="+[Pe,Fe,"$"].join("|")+")",Ve+"+"+He+"(?="+[Pe,Fe+je,"$"].join("|")+")",Fe+"?"+je+"+"+$e,Fe+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Xe].join("|"),"g"),et=RegExp("["+Be+_e+we+Me+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,it={};it[k]=it[L]=it[N]=it[D]=it[z]=it[U]=it[F]=it[B]=it[j]=!0,it[m]=it[g]=it[I]=it[v]=it[O]=it[y]=it[b]=it[x]=it[w]=it[S]=it[E]=it[M]=it[T]=it[A]=it[R]=!1;var ot={};ot[m]=ot[g]=ot[I]=ot[O]=ot[v]=ot[y]=ot[k]=ot[L]=ot[N]=ot[D]=ot[z]=ot[w]=ot[S]=ot[E]=ot[M]=ot[T]=ot[A]=ot[P]=ot[U]=ot[F]=ot[B]=ot[j]=!0,ot[b]=ot[x]=ot[R]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,lt=parseInt,ct="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ut="object"==typeof self&&self&&self.Object===Object&&self,ht=ct||ut||Function("return this")(),dt=t&&!t.nodeType&&t,ft=dt&&e&&!e.nodeType&&e,pt=ft&&ft.exports===dt,mt=pt&&ct.process,gt=function(){try{return ft&&ft.require&&ft.require("util").types||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),vt=gt&&gt.isArrayBuffer,yt=gt&&gt.isDate,bt=gt&&gt.isMap,xt=gt&&gt.isRegExp,_t=gt&&gt.isSet,wt=gt&&gt.isTypedArray;function St(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Pt(e,t){return!(null==e||!e.length)&&Ft(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Ot(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function kt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Lt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Dt=$t("length");function zt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ut(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ft(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,jt,n)}function Bt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function jt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?Wt(e,t)/n:d}function $t(e){return function(t){return null==t?i:t[e]}}function Ht(e){return function(t){return null==e?i:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Wt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Yt(e){return function(t){return e(t)}}function Kt(e,t){return It(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function Jt(e,t){for(var n=-1,r=e.length;++n<r&&Ft(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&Ft(t,e[n],0)>-1;);return n}var en=Ht({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+at[e]}function rn(e){return et.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function an(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function un(e){return rn(e)?function(e){for(var t=Je.lastIndex=0;Je.test(e);)++t;return t}(e):Dt(e)}function hn(e){return rn(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var fn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function e(t){var n,r=(t=null==t?ht:pn.defaults(ht.Object(),t,pn.pick(ht,nt))).Array,ie=t.Date,_e=t.Error,we=t.Function,Se=t.Math,Ee=t.Object,Ce=t.RegExp,Me=t.String,Te=t.TypeError,Ae=r.prototype,Pe=we.prototype,Re=Ee.prototype,Ie=t["__core-js_shared__"],Oe=Pe.toString,ke=Re.hasOwnProperty,Le=0,Ne=(n=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",De=Re.toString,ze=Oe.call(Ee),Ue=ht._,Fe=Ce("^"+Oe.call(ke).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=pt?t.Buffer:i,je=t.Symbol,Ve=t.Uint8Array,$e=Be?Be.allocUnsafe:i,He=an(Ee.getPrototypeOf,Ee),Ge=Ee.create,We=Re.propertyIsEnumerable,qe=Ae.splice,Xe=je?je.isConcatSpreadable:i,Ye=je?je.iterator:i,Je=je?je.toStringTag:i,et=function(){try{var e=lo(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ct=ie&&ie.now!==ht.Date.now&&ie.now,ut=t.setTimeout!==ht.setTimeout&&t.setTimeout,dt=Se.ceil,ft=Se.floor,mt=Ee.getOwnPropertySymbols,gt=Be?Be.isBuffer:i,Dt=t.isFinite,Ht=Ae.join,mn=an(Ee.keys,Ee),gn=Se.max,vn=Se.min,yn=ie.now,bn=t.parseInt,xn=Se.random,_n=Ae.reverse,wn=lo(t,"DataView"),Sn=lo(t,"Map"),En=lo(t,"Promise"),Cn=lo(t,"Set"),Mn=lo(t,"WeakMap"),Tn=lo(Ee,"create"),An=Mn&&new Mn,Pn={},Rn=zo(wn),In=zo(Sn),On=zo(En),kn=zo(Cn),Ln=zo(Mn),Nn=je?je.prototype:i,Dn=Nn?Nn.valueOf:i,zn=Nn?Nn.toString:i;function Un(e){if(es(e)&&!$a(e)&&!(e instanceof Vn)){if(e instanceof jn)return e;if(ke.call(e,"__wrapped__"))return Uo(e)}return new jn(e)}var Fn=function(){function e(){}return function(t){if(!Qa(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Bn(){}function jn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function qn(e){var t=this.__data__=new Hn(e);this.size=t.size}function Xn(e,t){var n=$a(e),r=!n&&Va(e),i=!n&&!r&&qa(e),o=!n&&!r&&!i&&ls(e),a=n||r||i||o,s=a?qt(e.length,Me):[],l=s.length;for(var c in e)!t&&!ke.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||go(c,l))||s.push(c);return s}function Yn(e){var t=e.length;return t?e[Gr(0,t-1)]:i}function Kn(e,t){return Oo(Mi(e),or(t,0,e.length))}function Zn(e){return Oo(Mi(e))}function Jn(e,t,n){(n!==i&&!Fa(e[t],n)||n===i&&!(t in e))&&rr(e,t,n)}function Qn(e,t,n){var r=e[t];ke.call(e,t)&&Fa(r,n)&&(n!==i||t in e)||rr(e,t,n)}function er(e,t){for(var n=e.length;n--;)if(Fa(e[n][0],t))return n;return-1}function tr(e,t,n,r){return ur(e,(function(e,i,o){t(r,e,n(e),o)})),r}function nr(e,t){return e&&Ti(t,Rs(t),e)}function rr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ir(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Cs(e,t[n]);return a}function or(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ar(e,t,n,r,o,a){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!Qa(e))return e;var h=$a(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ke.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Mi(e,s)}else{var d=ho(e),f=d==x||d==_;if(qa(e))return xi(e,l);if(d==E||d==m||f&&!o){if(s=c||f?{}:po(e),!l)return c?function(e,t){return Ti(e,uo(e),t)}(e,function(e,t){return e&&Ti(t,Is(t),e)}(s,e)):function(e,t){return Ti(e,co(e),t)}(e,nr(s,e))}else{if(!ot[d])return o?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case I:return _i(e);case v:case y:return new i(+e);case O:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case k:case L:case N:case D:case z:case U:case F:case B:case j:return wi(e,n);case w:return new i;case S:case A:return new i(e);case M:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new i;case P:return r=e,Dn?Ee(Dn.call(r)):{}}}(e,d,l)}}a||(a=new qn);var p=a.get(e);if(p)return p;a.set(e,s),os(e)?e.forEach((function(r){s.add(ar(r,t,n,r,e,a))})):ts(e)&&e.forEach((function(r,i){s.set(i,ar(r,t,n,i,e,a))}));var g=h?i:(u?c?to:eo:c?Is:Rs)(e);return Ct(g||e,(function(r,i){g&&(r=e[i=r]),Qn(s,i,ar(r,t,n,i,e,a))})),s}function sr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function lr(e,t,n){if("function"!=typeof e)throw new Te(o);return Ao((function(){e.apply(i,n)}),t)}function cr(e,t,n,r){var i=-1,o=Pt,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=It(t,Yt(n))),r?(o=Rt,a=!1):t.length>=200&&(o=Zt,a=!1,t=new Wn(t));e:for(;++i<s;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,r)||l.push(u)}return l}Un.templateSettings={escape:Y,evaluate:K,interpolate:Z,variable:"",imports:{_:Un}},Un.prototype=Bn.prototype,Un.prototype.constructor=Un,jn.prototype=Fn(Bn.prototype),jn.prototype.constructor=jn,Vn.prototype=Fn(Bn.prototype),Vn.prototype.constructor=Vn,$n.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},$n.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$n.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===a?i:n}return ke.call(t,e)?t[e]:i},$n.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==i:ke.call(t,e)},$n.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===i?a:t,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),--this.size,0))},Hn.prototype.get=function(e){var t=this.__data__,n=er(t,e);return n<0?i:t[n][1]},Hn.prototype.has=function(e){return er(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Sn||Hn),string:new $n}},Gn.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return ao(this,e).get(e)},Gn.prototype.has=function(e){return ao(this,e).has(e)},Gn.prototype.set=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Wn.prototype.add=Wn.prototype.push=function(e){return this.__data__.set(e,a),this},Wn.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.clear=function(){this.__data__=new Hn,this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},qn.prototype.get=function(e){return this.__data__.get(e)},qn.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var ur=Ri(yr),hr=Ri(br,!0);function dr(e,t){var n=!0;return ur(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function fr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(l===i?s==s&&!ss(s):n(s,l)))var l=s,c=a}return c}function pr(e,t){var n=[];return ur(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Ot(i,s):r||(i[i.length]=s)}return i}var gr=Ii(),vr=Ii(!0);function yr(e,t){return e&&gr(e,t,Rs)}function br(e,t){return e&&vr(e,t,Rs)}function xr(e,t){return At(t,(function(t){return Ka(e[t])}))}function _r(e,t){for(var n=0,r=(t=gi(t,e)).length;null!=e&&n<r;)e=e[Do(t[n++])];return n&&n==r?e:i}function wr(e,t,n){var r=t(e);return $a(e)?r:Ot(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Ee(e)?function(e){var t=ke.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(e){}var o=De.call(e);return r&&(t?e[Je]=n:delete e[Je]),o}(e):function(e){return De.call(e)}(e)}function Er(e,t){return e>t}function Cr(e,t){return null!=e&&ke.call(e,t)}function Mr(e,t){return null!=e&&t in Ee(e)}function Tr(e,t,n){for(var o=n?Rt:Pt,a=e[0].length,s=e.length,l=s,c=r(s),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=It(d,Yt(t))),u=vn(d.length,u),c[l]=!n&&(t||a>=120&&d.length>=120)?new Wn(l&&d):i}d=e[0];var f=-1,p=c[0];e:for(;++f<a&&h.length<u;){var m=d[f],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?Zt(p,g):o(h,g,n))){for(l=s;--l;){var v=c[l];if(!(v?Zt(v,g):o(e[l],g,n)))continue e}p&&p.push(g),h.push(m)}}return h}function Ar(e,t,n){var r=null==(e=Co(e,t=gi(t,e)))?e:e[Do(Yo(t))];return null==r?i:St(r,e,n)}function Pr(e){return es(e)&&Sr(e)==m}function Rr(e,t,n,r,o){return e===t||(null==e||null==t||!es(e)&&!es(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=$a(e),l=$a(t),c=s?g:ho(e),u=l?g:ho(t),h=(c=c==m?E:c)==E,d=(u=u==m?E:u)==E,f=c==u;if(f&&qa(e)){if(!qa(t))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new qn),s||ls(e)?Ji(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case v:case y:case S:return Fa(+e,+t);case b:return e.name==t.name&&e.message==t.message;case M:case A:return e==t+"";case w:var s=on;case T:var l=1&r;if(s||(s=ln),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Ji(s(e),s(t),r,i,o,a);return a.delete(e),u;case P:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var p=h&&ke.call(e,"__wrapped__"),x=d&&ke.call(t,"__wrapped__");if(p||x){var _=p?e.value():e,C=x?t.value():t;return a||(a=new qn),o(_,C,n,r,a)}}return!!f&&(a||(a=new qn),function(e,t,n,r,o,a){var s=1&n,l=eo(e),c=l.length;if(c!=eo(t).length&&!s)return!1;for(var u=c;u--;){var h=l[u];if(!(s?h in t:ke.call(t,h)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=s;++u<c;){var g=e[h=l[u]],v=t[h];if(r)var y=s?r(v,g,h,t,e,a):r(g,v,h,e,t,a);if(!(y===i?g===v||o(g,v,n,r,a):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,o,a))}(e,t,n,r,Rr,o))}function Ir(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Ee(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var c=(l=n[o])[0],u=e[c],h=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new qn;if(r)var f=r(u,h,c,e,t,d);if(!(f===i?Rr(h,u,3,r,d):f))return!1}}return!0}function Or(e){return!(!Qa(e)||(t=e,Ne&&Ne in t))&&(Ka(e)?Fe:me).test(zo(e));var t}function kr(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?$a(e)?Ur(e[0],e[1]):zr(e):hl(e)}function Lr(e){if(!_o(e))return mn(e);var t=[];for(var n in Ee(e))ke.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Nr(e,t){return e<t}function Dr(e,t){var n=-1,i=Ga(e)?r(e.length):[];return ur(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function zr(e){var t=so(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Ur(e,t){return yo(e)&&wo(t)?So(Do(e),t):function(n){var r=Cs(n,e);return r===i&&r===t?Ms(n,e):Rr(t,r,3)}}function Fr(e,t,n,r,o){e!==t&&gr(t,(function(a,s){if(o||(o=new qn),Qa(a))!function(e,t,n,r,o,a,s){var l=Mo(e,n),c=Mo(t,n),u=s.get(c);if(u)Jn(e,n,u);else{var h=a?a(l,c,n+"",e,t,s):i,d=h===i;if(d){var f=$a(c),p=!f&&qa(c),m=!f&&!p&&ls(c);h=c,f||p||m?$a(l)?h=l:Wa(l)?h=Mi(l):p?(d=!1,h=xi(c,!0)):m?(d=!1,h=wi(c,!0)):h=[]:rs(c)||Va(c)?(h=l,Va(l)?h=gs(l):Qa(l)&&!Ka(l)||(h=po(c))):d=!1}d&&(s.set(c,h),o(h,c,r,a,s),s.delete(c)),Jn(e,n,h)}}(e,t,s,n,Fr,r,o);else{var l=r?r(Mo(e,s),a,s+"",e,t,o):i;l===i&&(l=a),Jn(e,s,l)}}),Is)}function Br(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:i}function jr(e,t,n){t=t.length?It(t,(function(e){return $a(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[nl];var r=-1;t=It(t,Yt(oo()));var i=Dr(e,(function(e,n,i){var o=It(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e){var t=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=Si(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));t--;)e[t]=e[t].value;return e}(i)}function Vr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=_r(e,a);n(s,a)&&Kr(o,gi(a,e),s)}return o}function $r(e,t,n,r){var i=r?Bt:Ft,o=-1,a=t.length,s=e;for(e===t&&(t=Mi(t)),n&&(s=It(e,Yt(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&qe.call(s,l,1),qe.call(e,l,1);return e}function Hr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;go(i)?qe.call(e,i,1):li(e,i)}}return e}function Gr(e,t){return e+ft(xn()*(t-e+1))}function Wr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function qr(e,t){return Po(Eo(e,t,nl),e+"")}function Xr(e){return Yn(Fs(e))}function Yr(e,t){var n=Fs(e);return Oo(n,or(t,0,n.length))}function Kr(e,t,n,r){if(!Qa(e))return e;for(var o=-1,a=(t=gi(t,e)).length,s=a-1,l=e;null!=l&&++o<a;){var c=Do(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=Qa(h)?h:go(t[o+1])?[]:{})}Qn(l,c,u),l=l[c]}return e}var Zr=An?function(e,t){return An.set(e,t),e}:nl,Jr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qs(t),writable:!0})}:nl;function Qr(e){return Oo(Fs(e))}function ei(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ti(e,t){var n;return ur(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ni(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ss(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ri(e,t,nl,n)}function ri(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,l=null===t,c=ss(t),u=t===i;o<a;){var h=ft((o+a)/2),d=n(e[h]),f=d!==i,p=null===d,m=d==d,g=ss(d);if(s)var v=r||m;else v=u?m&&(r||f):l?m&&f&&(r||!p):c?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);v?o=h+1:a=h}return vn(a,4294967294)}function ii(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Fa(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function oi(e){return"number"==typeof e?e:ss(e)?d:+e}function ai(e){if("string"==typeof e)return e;if($a(e))return It(e,ai)+"";if(ss(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function si(e,t,n){var r=-1,i=Pt,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Rt;else if(o>=200){var c=t?null:Wi(e);if(c)return ln(c);a=!1,i=Zt,l=new Wn}else l=t?[]:s;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function li(e,t){return null==(e=Co(e,t=gi(t,e)))||delete e[Do(Yo(t))]}function ci(e,t,n,r){return Kr(e,t,n(_r(e,t)),r)}function ui(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ei(e,r?0:o,r?o+1:i):ei(e,r?o+1:0,r?i:o)}function hi(e,t){var n=e;return n instanceof Vn&&(n=n.value()),kt(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function di(e,t,n){var i=e.length;if(i<2)return i?si(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],l=-1;++l<i;)l!=o&&(a[o]=cr(a[o]||s,e[l],t,n));return si(mr(a,1),t,n)}function fi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var l=r<a?t[r]:i;n(s,e[r],l)}return s}function pi(e){return Wa(e)?e:[]}function mi(e){return"function"==typeof e?e:nl}function gi(e,t){return $a(e)?e:yo(e,t)?[e]:No(vs(e))}var vi=qr;function yi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ei(e,t,n)}var bi=at||function(e){return ht.clearTimeout(e)};function xi(e,t){if(t)return e.slice();var n=e.length,r=$e?$e(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function wi(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=ss(e),s=t!==i,l=null===t,c=t==t,u=ss(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!u&&e<t||u&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Ei(e,t,n,i){for(var o=-1,a=e.length,s=n.length,l=-1,c=t.length,u=gn(a-s,0),h=r(c+u),d=!i;++l<c;)h[l]=t[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=e[o]);for(;u--;)h[l++]=e[o++];return h}function Ci(e,t,n,i){for(var o=-1,a=e.length,s=-1,l=n.length,c=-1,u=t.length,h=gn(a-l,0),d=r(h+u),f=!i;++o<h;)d[o]=e[o];for(var p=o;++c<u;)d[p+c]=t[c];for(;++s<l;)(f||o<a)&&(d[p+n[s]]=e[o++]);return d}function Mi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ti(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),o?rr(n,l,c):Qn(n,l,c)}return n}function Ai(e,t){return function(n,r){var i=$a(n)?Et:tr,o=t?t():{};return i(n,e,oo(r,2),o)}}function Pi(e){return qr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&vo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Ee(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Ga(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ee(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ii(e){return function(t,n,r){for(var i=-1,o=Ee(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Oi(e){return function(t){var n=rn(t=vs(t))?hn(t):i,r=n?n[0]:t.charAt(0),o=n?yi(n,1).join(""):t.slice(1);return r[e]()+o}}function ki(e){return function(t){return kt(Ks(Vs(t).replace(Ke,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Fn(e.prototype),r=e.apply(n,t);return Qa(r)?r:n}}function Ni(e){return function(t,n,r){var o=Ee(t);if(!Ga(t)){var a=oo(n,3);t=Rs(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Di(e){return Qi((function(t){var n=t.length,r=n,a=jn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Te(o);if(a&&!l&&"wrapper"==ro(s))var l=new jn([],!0)}for(r=l?r:n;++r<n;){var c=ro(s=t[r]),u="wrapper"==c?no(s):i;l=u&&bo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ro(u[0])].apply(l,u[3]):1==s.length&&bo(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&$a(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function zi(e,t,n,o,a,s,l,u,h,d){var f=t&c,p=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Li(e);return function c(){for(var b=arguments.length,x=r(b),_=b;_--;)x[_]=arguments[_];if(g)var w=io(c),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(x,w);if(o&&(x=Ei(x,o,a,g)),s&&(x=Ci(x,s,l,g)),b-=S,g&&b<d){var E=sn(x,w);return Hi(e,t,zi,c.placeholder,n,x,E,u,h,d-b)}var C=p?n:this,M=m?C[e]:e;return b=x.length,u?x=function(e,t){for(var n=e.length,r=vn(t.length,n),o=Mi(e);r--;){var a=t[r];e[r]=go(a,n)?o[a]:i}return e}(x,u):v&&b>1&&x.reverse(),f&&h<b&&(x.length=h),this&&this!==ht&&this instanceof c&&(M=y||Li(M)),M.apply(C,x)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return yr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Fi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=e(n,r)}return o}}function Bi(e){return Qi((function(t){return t=It(t,Yt(oo())),qr((function(n){var r=this;return e(t,(function(e){return St(e,r,n)}))}))}))}function ji(e,t){var n=(t=t===i?" ":ai(t)).length;if(n<2)return n?Wr(t,e):t;var r=Wr(t,dt(e/un(t)));return rn(t)?yi(hn(r),0,e).join(""):r.slice(0,e)}function Vi(e){return function(t,n,o){return o&&"number"!=typeof o&&vo(t,n,o)&&(n=o=i),t=ds(t),n===i?(n=t,t=0):n=ds(n),function(e,t,n,i){for(var o=-1,a=gn(dt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:ds(o),e)}}function $i(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ms(t),n=ms(n)),e(t,n)}}function Hi(e,t,n,r,o,a,s,c,u,h){var d=8&t;t|=d?l:64,4&(t&=~(d?64:l))||(t&=-4);var f=[e,t,o,d?a:i,d?s:i,d?i:a,d?i:s,c,u,h],p=n.apply(i,f);return bo(e)&&To(p,f),p.placeholder=r,Ro(p,e,t)}function Gi(e){var t=Se[e];return function(e,n){if(e=ms(e),(n=null==n?0:vn(fs(n),292))&&Dt(e)){var r=(vs(e)+"e").split("e");return+((r=(vs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Wi=Cn&&1/ln(new Cn([,-0]))[1]==u?function(e){return new Cn(e)}:sl;function qi(e){return function(t){var n=ho(t);return n==w?on(t):n==T?cn(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,n,a,u,h,d,f){var p=2&t;if(!p&&"function"!=typeof e)throw new Te(o);var m=a?a.length:0;if(m||(t&=-97,a=u=i),d=d===i?d:gn(fs(d),0),f=f===i?f:fs(f),m-=u?u.length:0,64&t){var g=a,v=u;a=u=i}var y=p?i:no(e),b=[e,t,n,a,u,g,v,h,d,f];if(y&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==c&&8==n||r==c&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Ei(u,l,t[4]):l,e[4]=u?sn(e[3],s):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Ci(u,l,t[6]):l,e[6]=u?sn(e[5],s):t[6]),(l=t[7])&&(e[7]=l),r&c&&(e[8]=null==e[8]?t[8]:vn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,y),e=b[0],t=b[1],n=b[2],a=b[3],u=b[4],!(f=b[9]=b[9]===i?p?0:e.length:gn(b[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)x=8==t||16==t?function(e,t,n){var o=Li(e);return function a(){for(var s=arguments.length,l=r(s),c=s,u=io(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:sn(l,u);return(s-=h.length)<n?Hi(e,t,zi,a.placeholder,i,l,h,i,i,n-s):St(this&&this!==ht&&this instanceof a?o:e,this,l)}}(e,t,f):t!=l&&33!=t||u.length?zi.apply(i,b):function(e,t,n,i){var o=1&t,a=Li(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),d=this&&this!==ht&&this instanceof t?a:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return St(d,o?n:this,h)}}(e,t,n,a);else var x=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==ht&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Ro((y?Zr:To)(x,b),e,t)}function Yi(e,t,n,r){return e===i||Fa(e,Re[n])&&!ke.call(r,n)?t:e}function Ki(e,t,n,r,o,a){return Qa(e)&&Qa(t)&&(a.set(t,e),Fr(e,t,i,Ki,a),a.delete(t)),e}function Zi(e){return rs(e)?i:e}function Ji(e,t,n,r,o,a){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&n?new Wn:i;for(a.set(e,t),a.set(t,e);++d<l;){var m=e[d],g=t[d];if(r)var v=s?r(g,m,d,t,e,a):r(m,g,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!Nt(t,(function(e,t){if(!Zt(p,t)&&(m===e||o(m,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Qi(e){return Po(Eo(e,i,Ho),e+"")}function eo(e){return wr(e,Rs,co)}function to(e){return wr(e,Is,uo)}var no=An?function(e){return An.get(e)}:sl;function ro(e){for(var t=e.name+"",n=Pn[t],r=ke.call(Pn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function io(e){return(ke.call(Un,"placeholder")?Un:e).placeholder}function oo(){var e=Un.iteratee||rl;return e=e===rl?kr:e,arguments.length?e(arguments[0],arguments[1]):e}function ao(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function so(e){for(var t=Rs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,wo(i)]}return t}function lo(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Or(n)?n:i}var co=mt?function(e){return null==e?[]:(e=Ee(e),At(mt(e),(function(t){return We.call(e,t)})))}:pl,uo=mt?function(e){for(var t=[];e;)Ot(t,co(e)),e=He(e);return t}:pl,ho=Sr;function fo(e,t,n){for(var r=-1,i=(t=gi(t,e)).length,o=!1;++r<i;){var a=Do(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ja(i)&&go(a,i)&&($a(e)||Va(e))}function po(e){return"function"!=typeof e.constructor||_o(e)?{}:Fn(He(e))}function mo(e){return $a(e)||Va(e)||!!(Xe&&e&&e[Xe])}function go(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&e>-1&&e%1==0&&e<t}function vo(e,t,n){if(!Qa(n))return!1;var r=typeof t;return!!("number"==r?Ga(n)&&go(t,n.length):"string"==r&&t in n)&&Fa(n[t],e)}function yo(e,t){if($a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ss(e))||Q.test(e)||!J.test(e)||null!=t&&e in Ee(t)}function bo(e){var t=ro(e),n=Un[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=no(n);return!!r&&e===r[0]}(wn&&ho(new wn(new ArrayBuffer(1)))!=O||Sn&&ho(new Sn)!=w||En&&ho(En.resolve())!=C||Cn&&ho(new Cn)!=T||Mn&&ho(new Mn)!=R)&&(ho=function(e){var t=Sr(e),n=t==E?e.constructor:i,r=n?zo(n):"";if(r)switch(r){case Rn:return O;case In:return w;case On:return C;case kn:return T;case Ln:return R}return t});var xo=Ie?Ka:ml;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function wo(e){return e==e&&!Qa(e)}function So(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Ee(n))}}function Eo(e,t,n){return t=gn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=gn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var l=r(t+1);++o<t;)l[o]=i[o];return l[t]=n(s),St(e,this,l)}}function Co(e,t){return t.length<2?e:_r(e,ei(t,0,-1))}function Mo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=Io(Zr),Ao=ut||function(e,t){return ht.setTimeout(e,t)},Po=Io(Jr);function Ro(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ct(p,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(r),n)))}function Io(e){var t=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Oo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Gr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var ko,Lo,No=(ko=ka((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,i){t.push(r?i.replace(ue,"$1"):n||e)})),t}),(function(e){return 500===Lo.size&&Lo.clear(),e})),Lo=ko.cache,ko);function Do(e){if("string"==typeof e||ss(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function zo(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Uo(e){if(e instanceof Vn)return e.clone();var t=new jn(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fo=qr((function(e,t){return Wa(e)?cr(e,mr(t,1,Wa,!0)):[]})),Bo=qr((function(e,t){var n=Yo(t);return Wa(n)&&(n=i),Wa(e)?cr(e,mr(t,1,Wa,!0),oo(n,2)):[]})),jo=qr((function(e,t){var n=Yo(t);return Wa(n)&&(n=i),Wa(e)?cr(e,mr(t,1,Wa,!0),i,n):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=gn(r+i,0)),Ut(e,oo(t,3),i)}function $o(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?gn(r+o,0):vn(o,r-1)),Ut(e,oo(t,3),o,!0)}function Ho(e){return null!=e&&e.length?mr(e,1):[]}function Go(e){return e&&e.length?e[0]:i}var Wo=qr((function(e){var t=It(e,pi);return t.length&&t[0]===e[0]?Tr(t):[]})),qo=qr((function(e){var t=Yo(e),n=It(e,pi);return t===Yo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Tr(n,oo(t,2)):[]})),Xo=qr((function(e){var t=Yo(e),n=It(e,pi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,i,t):[]}));function Yo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ko=qr(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?$r(e,t):e}var Jo=Qi((function(e,t){var n=null==e?0:e.length,r=ir(e,t);return Hr(e,It(t,(function(e){return go(e,n)?+e:e})).sort(Si)),r}));function Qo(e){return null==e?e:_n.call(e)}var ea=qr((function(e){return si(mr(e,1,Wa,!0))})),ta=qr((function(e){var t=Yo(e);return Wa(t)&&(t=i),si(mr(e,1,Wa,!0),oo(t,2))})),na=qr((function(e){var t=Yo(e);return t="function"==typeof t?t:i,si(mr(e,1,Wa,!0),i,t)}));function ra(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Wa(e))return t=gn(e.length,t),!0})),qt(t,(function(t){return It(e,$t(t))}))}function ia(e,t){if(!e||!e.length)return[];var n=ra(e);return null==t?n:It(n,(function(e){return St(t,i,e)}))}var oa=qr((function(e,t){return Wa(e)?cr(e,t):[]})),aa=qr((function(e){return di(At(e,Wa))})),sa=qr((function(e){var t=Yo(e);return Wa(t)&&(t=i),di(At(e,Wa),oo(t,2))})),la=qr((function(e){var t=Yo(e);return t="function"==typeof t?t:i,di(At(e,Wa),i,t)})),ca=qr(ra),ua=qr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ia(e,n)}));function ha(e){var t=Un(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var fa=Qi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ir(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Vn&&go(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:da,args:[o],thisArg:i}),new jn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),pa=Ai((function(e,t,n){ke.call(e,n)?++e[n]:rr(e,n,1)})),ma=Ni(Vo),ga=Ni($o);function va(e,t){return($a(e)?Ct:ur)(e,oo(t,3))}function ya(e,t){return($a(e)?Mt:hr)(e,oo(t,3))}var ba=Ai((function(e,t,n){ke.call(e,n)?e[n].push(t):rr(e,n,[t])})),xa=qr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ga(e)?r(e.length):[];return ur(e,(function(e){a[++i]=o?St(t,e,n):Ar(e,t,n)})),a})),_a=Ai((function(e,t,n){rr(e,n,t)}));function wa(e,t){return($a(e)?It:Dr)(e,oo(t,3))}var Sa=Ai((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Ea=qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&vo(e,t[0],t[1])?t=[]:n>2&&vo(t[0],t[1],t[2])&&(t=[t[0]]),jr(e,mr(t,1),[])})),Ca=ct||function(){return ht.Date.now()};function Ma(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,c,i,i,i,i,t)}function Ta(e,t){var n;if("function"!=typeof t)throw new Te(o);return e=fs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Aa=qr((function(e,t,n){var r=1;if(n.length){var i=sn(n,io(Aa));r|=l}return Xi(e,r,t,n,i)})),Pa=qr((function(e,t,n){var r=3;if(n.length){var i=sn(n,io(Pa));r|=l}return Xi(t,r,e,n,i)}));function Ra(e,t,n){var r,a,s,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Te(o);function m(t){var n=r,o=a;return r=a=i,h=t,l=e.apply(o,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||f&&e-h>=s}function v(){var e=Ca();if(g(e))return y(e);c=Ao(v,function(e){var n=t-(e-u);return f?vn(n,s-(e-h)):n}(e))}function y(e){return c=i,p&&r?m(e):(r=a=i,l)}function b(){var e=Ca(),n=g(e);if(r=arguments,a=this,u=e,n){if(c===i)return function(e){return h=e,c=Ao(v,t),d?m(e):l}(u);if(f)return bi(c),c=Ao(v,t),m(u)}return c===i&&(c=Ao(v,t)),l}return t=ms(t)||0,Qa(n)&&(d=!!n.leading,s=(f="maxWait"in n)?gn(ms(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&bi(c),h=0,r=u=a=c=i},b.flush=function(){return c===i?l:y(Ca())},b}var Ia=qr((function(e,t){return lr(e,1,t)})),Oa=qr((function(e,t,n){return lr(e,ms(t)||0,n)}));function ka(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ka.Cache||Gn),n}function La(e){if("function"!=typeof e)throw new Te(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ka.Cache=Gn;var Na=vi((function(e,t){var n=(t=1==t.length&&$a(t[0])?It(t[0],Yt(oo())):It(mr(t,1),Yt(oo()))).length;return qr((function(r){for(var i=-1,o=vn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return St(e,this,r)}))})),Da=qr((function(e,t){var n=sn(t,io(Da));return Xi(e,l,i,t,n)})),za=qr((function(e,t){var n=sn(t,io(za));return Xi(e,64,i,t,n)})),Ua=Qi((function(e,t){return Xi(e,256,i,i,i,t)}));function Fa(e,t){return e===t||e!=e&&t!=t}var Ba=$i(Er),ja=$i((function(e,t){return e>=t})),Va=Pr(function(){return arguments}())?Pr:function(e){return es(e)&&ke.call(e,"callee")&&!We.call(e,"callee")},$a=r.isArray,Ha=vt?Yt(vt):function(e){return es(e)&&Sr(e)==I};function Ga(e){return null!=e&&Ja(e.length)&&!Ka(e)}function Wa(e){return es(e)&&Ga(e)}var qa=gt||ml,Xa=yt?Yt(yt):function(e){return es(e)&&Sr(e)==y};function Ya(e){if(!es(e))return!1;var t=Sr(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!rs(e)}function Ka(e){if(!Qa(e))return!1;var t=Sr(e);return t==x||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Za(e){return"number"==typeof e&&e==fs(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function Qa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function es(e){return null!=e&&"object"==typeof e}var ts=bt?Yt(bt):function(e){return es(e)&&ho(e)==w};function ns(e){return"number"==typeof e||es(e)&&Sr(e)==S}function rs(e){if(!es(e)||Sr(e)!=E)return!1;var t=He(e);if(null===t)return!0;var n=ke.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==ze}var is=xt?Yt(xt):function(e){return es(e)&&Sr(e)==M},os=_t?Yt(_t):function(e){return es(e)&&ho(e)==T};function as(e){return"string"==typeof e||!$a(e)&&es(e)&&Sr(e)==A}function ss(e){return"symbol"==typeof e||es(e)&&Sr(e)==P}var ls=wt?Yt(wt):function(e){return es(e)&&Ja(e.length)&&!!it[Sr(e)]},cs=$i(Nr),us=$i((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(Ga(e))return as(e)?hn(e):Mi(e);if(Ye&&e[Ye])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ye]());var t=ho(e);return(t==w?on:t==T?ln:Fs)(e)}function ds(e){return e?(e=ms(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=ds(e),n=t%1;return t==t?n?t-n:t:0}function ps(e){return e?or(fs(e),0,f):0}function ms(e){if("number"==typeof e)return e;if(ss(e))return d;if(Qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=pe.test(e);return n||ge.test(e)?lt(e.slice(2),n?2:8):fe.test(e)?d:+e}function gs(e){return Ti(e,Is(e))}function vs(e){return null==e?"":ai(e)}var ys=Pi((function(e,t){if(_o(t)||Ga(t))Ti(t,Rs(t),e);else for(var n in t)ke.call(t,n)&&Qn(e,n,t[n])})),bs=Pi((function(e,t){Ti(t,Is(t),e)})),xs=Pi((function(e,t,n,r){Ti(t,Is(t),e,r)})),_s=Pi((function(e,t,n,r){Ti(t,Rs(t),e,r)})),ws=Qi(ir),Ss=qr((function(e,t){e=Ee(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&vo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Is(a),l=-1,c=s.length;++l<c;){var u=s[l],h=e[u];(h===i||Fa(h,Re[u])&&!ke.call(e,u))&&(e[u]=a[u])}return e})),Es=qr((function(e){return e.push(i,Ki),St(ks,i,e)}));function Cs(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function Ms(e,t){return null!=e&&fo(e,t,Mr)}var Ts=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n}),Qs(nl)),As=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),ke.call(e,t)?e[t].push(n):e[t]=[n]}),oo),Ps=qr(Ar);function Rs(e){return Ga(e)?Xn(e):Lr(e)}function Is(e){return Ga(e)?Xn(e,!0):function(e){if(!Qa(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&ke.call(e,r))&&n.push(r);return n}(e)}var Os=Pi((function(e,t,n){Fr(e,t,n)})),ks=Pi((function(e,t,n,r){Fr(e,t,n,r)})),Ls=Qi((function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,(function(t){return t=gi(t,e),r||(r=t.length>1),t})),Ti(e,to(e),n),r&&(n=ar(n,7,Zi));for(var i=t.length;i--;)li(n,t[i]);return n})),Ns=Qi((function(e,t){return null==e?{}:function(e,t){return Vr(e,t,(function(t,n){return Ms(e,n)}))}(e,t)}));function Ds(e,t){if(null==e)return{};var n=It(to(e),(function(e){return[e]}));return t=oo(t),Vr(e,n,(function(e,n){return t(e,n[0])}))}var zs=qi(Rs),Us=qi(Is);function Fs(e){return null==e?[]:Kt(e,Rs(e))}var Bs=ki((function(e,t,n){return t=t.toLowerCase(),e+(n?js(t):t)}));function js(e){return Ys(vs(e).toLowerCase())}function Vs(e){return(e=vs(e))&&e.replace(ye,en).replace(Ze,"")}var $s=ki((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Hs=ki((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Gs=Oi("toLowerCase"),Ws=ki((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),qs=ki((function(e,t,n){return e+(n?" ":"")+Ys(t)})),Xs=ki((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ys=Oi("toUpperCase");function Ks(e,t,n){return e=vs(e),(t=n?i:t)===i?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Zs=qr((function(e,t){try{return St(e,i,t)}catch(e){return Ya(e)?e:new _e(e)}})),Js=Qi((function(e,t){return Ct(t,(function(t){t=Do(t),rr(e,t,Aa(e[t],e))})),e}));function Qs(e){return function(){return e}}var el=Di(),tl=Di(!0);function nl(e){return e}function rl(e){return kr("function"==typeof e?e:ar(e,1))}var il=qr((function(e,t){return function(n){return Ar(n,e,t)}})),ol=qr((function(e,t){return function(n){return Ar(e,n,t)}}));function al(e,t,n){var r=Rs(t),i=xr(t,r);null!=n||Qa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Rs(t)));var o=!(Qa(n)&&"chain"in n&&!n.chain),a=Ka(e);return Ct(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function sl(){}var ll=Bi(It),cl=Bi(Tt),ul=Bi(Nt);function hl(e){return yo(e)?$t(Do(e)):function(e){return function(t){return _r(t,e)}}(e)}var dl=Vi(),fl=Vi(!0);function pl(){return[]}function ml(){return!1}var gl,vl=Fi((function(e,t){return e+t}),0),yl=Gi("ceil"),bl=Fi((function(e,t){return e/t}),1),xl=Gi("floor"),_l=Fi((function(e,t){return e*t}),1),wl=Gi("round"),Sl=Fi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Te(o);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Ma,Un.assign=ys,Un.assignIn=bs,Un.assignInWith=xs,Un.assignWith=_s,Un.at=ws,Un.before=Ta,Un.bind=Aa,Un.bindAll=Js,Un.bindKey=Pa,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $a(e)?e:[e]},Un.chain=ha,Un.chunk=function(e,t,n){t=(n?vo(e,t,n):t===i)?1:gn(fs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,l=r(dt(o/t));a<o;)l[s++]=ei(e,a,a+=t);return l},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ot($a(n)?Mi(n):[n],mr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=oo();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Te(o);return[n(e[0]),e[1]]})):[],qr((function(n){for(var r=-1;++r<t;){var i=e[r];if(St(i[0],this,n))return St(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Rs(e);return function(n){return sr(n,e,t)}}(ar(e,1))},Un.constant=Qs,Un.countBy=pa,Un.create=function(e,t){var n=Fn(e);return null==t?n:nr(n,t)},Un.curry=function e(t,n,r){var o=Xi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.curryRight=function e(t,n,r){var o=Xi(t,16,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.debounce=Ra,Un.defaults=Ss,Un.defaultsDeep=Es,Un.defer=Ia,Un.delay=Oa,Un.difference=Fo,Un.differenceBy=Bo,Un.differenceWith=jo,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ei(e,(t=n||t===i?1:fs(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ei(e,0,(t=r-(t=n||t===i?1:fs(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!0):[]},Un.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&vo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:ps(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return($a(e)?At:pr)(e,oo(t,3))},Un.flatMap=function(e,t){return mr(wa(e,t),1)},Un.flatMapDeep=function(e,t){return mr(wa(e,t),u)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:fs(n),mr(wa(e,t),n)},Un.flatten=Ho,Un.flattenDeep=function(e){return null!=e&&e.length?mr(e,u):[]},Un.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===i?1:fs(t)):[]},Un.flip=function(e){return Xi(e,512)},Un.flow=el,Un.flowRight=tl,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:xr(e,Rs(e))},Un.functionsIn=function(e){return null==e?[]:xr(e,Is(e))},Un.groupBy=ba,Un.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Un.intersection=Wo,Un.intersectionBy=qo,Un.intersectionWith=Xo,Un.invert=Ts,Un.invertBy=As,Un.invokeMap=xa,Un.iteratee=rl,Un.keyBy=_a,Un.keys=Rs,Un.keysIn=Is,Un.map=wa,Un.mapKeys=function(e,t){var n={};return t=oo(t,3),yr(e,(function(e,r,i){rr(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=oo(t,3),yr(e,(function(e,r,i){rr(n,r,t(e,r,i))})),n},Un.matches=function(e){return zr(ar(e,1))},Un.matchesProperty=function(e,t){return Ur(e,ar(t,1))},Un.memoize=ka,Un.merge=Os,Un.mergeWith=ks,Un.method=il,Un.methodOf=ol,Un.mixin=al,Un.negate=La,Un.nthArg=function(e){return e=fs(e),qr((function(t){return Br(t,e)}))},Un.omit=Ls,Un.omitBy=function(e,t){return Ds(e,La(oo(t)))},Un.once=function(e){return Ta(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:($a(t)||(t=null==t?[]:[t]),$a(n=r?i:n)||(n=null==n?[]:[n]),jr(e,t,n))},Un.over=ll,Un.overArgs=Na,Un.overEvery=cl,Un.overSome=ul,Un.partial=Da,Un.partialRight=za,Un.partition=Sa,Un.pick=Ns,Un.pickBy=Ds,Un.property=hl,Un.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},Un.pull=Ko,Un.pullAll=Zo,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,oo(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,i,n):e},Un.pullAt=Jo,Un.range=dl,Un.rangeRight=fl,Un.rearg=Ua,Un.reject=function(e,t){return($a(e)?At:pr)(e,La(oo(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=oo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Hr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Te(o);return qr(e,t=t===i?t:fs(t))},Un.reverse=Qo,Un.sampleSize=function(e,t,n){return t=(n?vo(e,t,n):t===i)?1:fs(t),($a(e)?Kn:Yr)(e,t)},Un.set=function(e,t,n){return null==e?e:Kr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Kr(e,t,n,r)},Un.shuffle=function(e){return($a(e)?Zn:Qr)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&vo(e,t,n)?(t=0,n=r):(t=null==t?0:fs(t),n=n===i?r:fs(n)),ei(e,t,n)):[]},Un.sortBy=Ea,Un.sortedUniq=function(e){return e&&e.length?ii(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ii(e,oo(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&vo(e,t,n)&&(t=n=i),(n=n===i?f:n>>>0)?(e=vs(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=ai(t))&&rn(e)?yi(hn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Te(o);return t=null==t?0:gn(fs(t),0),qr((function(n){var r=n[t],i=yi(n,0,t);return r&&Ot(i,r),St(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ei(e,0,(t=n||t===i?1:fs(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ei(e,(t=r-(t=n||t===i?1:fs(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?ui(e,oo(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Te(o);return Qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ra(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=da,Un.toArray=hs,Un.toPairs=zs,Un.toPairsIn=Us,Un.toPath=function(e){return $a(e)?It(e,Do):ss(e)?[e]:Mi(No(vs(e)))},Un.toPlainObject=gs,Un.transform=function(e,t,n){var r=$a(e),i=r||qa(e)||ls(e);if(t=oo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Qa(e)&&Ka(o)?Fn(He(e)):{}}return(i?Ct:yr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Ma(e,1)},Un.union=ea,Un.unionBy=ta,Un.unionWith=na,Un.uniq=function(e){return e&&e.length?si(e):[]},Un.uniqBy=function(e,t){return e&&e.length?si(e,oo(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?si(e,i,t):[]},Un.unset=function(e,t){return null==e||li(e,t)},Un.unzip=ra,Un.unzipWith=ia,Un.update=function(e,t,n){return null==e?e:ci(e,t,mi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ci(e,t,mi(n),r)},Un.values=Fs,Un.valuesIn=function(e){return null==e?[]:Kt(e,Is(e))},Un.without=oa,Un.words=Ks,Un.wrap=function(e,t){return Da(mi(t),e)},Un.xor=aa,Un.xorBy=sa,Un.xorWith=la,Un.zip=ca,Un.zipObject=function(e,t){return fi(e||[],t||[],Qn)},Un.zipObjectDeep=function(e,t){return fi(e||[],t||[],Kr)},Un.zipWith=ua,Un.entries=zs,Un.entriesIn=Us,Un.extend=bs,Un.extendWith=xs,al(Un,Un),Un.add=vl,Un.attempt=Zs,Un.camelCase=Bs,Un.capitalize=js,Un.ceil=yl,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ms(n))==n?n:0),t!==i&&(t=(t=ms(t))==t?t:0),or(ms(e),t,n)},Un.clone=function(e){return ar(e,4)},Un.cloneDeep=function(e){return ar(e,5)},Un.cloneDeepWith=function(e,t){return ar(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return ar(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||sr(e,t,Rs(t))},Un.deburr=Vs,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=bl,Un.endsWith=function(e,t,n){e=vs(e),t=ai(t);var r=e.length,o=n=n===i?r:or(fs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Un.eq=Fa,Un.escape=function(e){return(e=vs(e))&&X.test(e)?e.replace(W,tn):e},Un.escapeRegExp=function(e){return(e=vs(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Un.every=function(e,t,n){var r=$a(e)?Tt:dr;return n&&vo(e,t,n)&&(t=i),r(e,oo(t,3))},Un.find=ma,Un.findIndex=Vo,Un.findKey=function(e,t){return zt(e,oo(t,3),yr)},Un.findLast=ga,Un.findLastIndex=$o,Un.findLastKey=function(e,t){return zt(e,oo(t,3),br)},Un.floor=xl,Un.forEach=va,Un.forEachRight=ya,Un.forIn=function(e,t){return null==e?e:gr(e,oo(t,3),Is)},Un.forInRight=function(e,t){return null==e?e:vr(e,oo(t,3),Is)},Un.forOwn=function(e,t){return e&&yr(e,oo(t,3))},Un.forOwnRight=function(e,t){return e&&br(e,oo(t,3))},Un.get=Cs,Un.gt=Ba,Un.gte=ja,Un.has=function(e,t){return null!=e&&fo(e,t,Cr)},Un.hasIn=Ms,Un.head=Go,Un.identity=nl,Un.includes=function(e,t,n,r){e=Ga(e)?e:Fs(e),n=n&&!r?fs(n):0;var i=e.length;return n<0&&(n=gn(i+n,0)),as(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ft(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=gn(r+i,0)),Ft(e,t,i)},Un.inRange=function(e,t,n){return t=ds(t),n===i?(n=t,t=0):n=ds(n),function(e,t,n){return e>=vn(t,n)&&e<gn(t,n)}(e=ms(e),t,n)},Un.invoke=Ps,Un.isArguments=Va,Un.isArray=$a,Un.isArrayBuffer=Ha,Un.isArrayLike=Ga,Un.isArrayLikeObject=Wa,Un.isBoolean=function(e){return!0===e||!1===e||es(e)&&Sr(e)==v},Un.isBuffer=qa,Un.isDate=Xa,Un.isElement=function(e){return es(e)&&1===e.nodeType&&!rs(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ga(e)&&($a(e)||"string"==typeof e||"function"==typeof e.splice||qa(e)||ls(e)||Va(e)))return!e.length;var t=ho(e);if(t==w||t==T)return!e.size;if(_o(e))return!Lr(e).length;for(var n in e)if(ke.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Rr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Rr(e,t,i,n):!!r},Un.isError=Ya,Un.isFinite=function(e){return"number"==typeof e&&Dt(e)},Un.isFunction=Ka,Un.isInteger=Za,Un.isLength=Ja,Un.isMap=ts,Un.isMatch=function(e,t){return e===t||Ir(e,t,so(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Ir(e,t,so(t),n)},Un.isNaN=function(e){return ns(e)&&e!=+e},Un.isNative=function(e){if(xo(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=ns,Un.isObject=Qa,Un.isObjectLike=es,Un.isPlainObject=rs,Un.isRegExp=is,Un.isSafeInteger=function(e){return Za(e)&&e>=-9007199254740991&&e<=h},Un.isSet=os,Un.isString=as,Un.isSymbol=ss,Un.isTypedArray=ls,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return es(e)&&ho(e)==R},Un.isWeakSet=function(e){return es(e)&&"[object WeakSet]"==Sr(e)},Un.join=function(e,t){return null==e?"":Ht.call(e,t)},Un.kebabCase=$s,Un.last=Yo,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?gn(r+o,0):vn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ut(e,jt,o,!0)},Un.lowerCase=Hs,Un.lowerFirst=Gs,Un.lt=cs,Un.lte=us,Un.max=function(e){return e&&e.length?fr(e,nl,Er):i},Un.maxBy=function(e,t){return e&&e.length?fr(e,oo(t,2),Er):i},Un.mean=function(e){return Vt(e,nl)},Un.meanBy=function(e,t){return Vt(e,oo(t,2))},Un.min=function(e){return e&&e.length?fr(e,nl,Nr):i},Un.minBy=function(e,t){return e&&e.length?fr(e,oo(t,2),Nr):i},Un.stubArray=pl,Un.stubFalse=ml,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=_l,Un.nth=function(e,t){return e&&e.length?Br(e,fs(t)):i},Un.noConflict=function(){return ht._===this&&(ht._=Ue),this},Un.noop=sl,Un.now=Ca,Un.pad=function(e,t,n){e=vs(e);var r=(t=fs(t))?un(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ji(ft(i),n)+e+ji(dt(i),n)},Un.padEnd=function(e,t,n){e=vs(e);var r=(t=fs(t))?un(e):0;return t&&r<t?e+ji(t-r,n):e},Un.padStart=function(e,t,n){e=vs(e);var r=(t=fs(t))?un(e):0;return t&&r<t?ji(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(vs(e).replace(re,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&vo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ds(e),t===i?(t=e,e=0):t=ds(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=xn();return vn(e+o*(t-e+st("1e-"+((o+"").length-1))),t)}return Gr(e,t)},Un.reduce=function(e,t,n){var r=$a(e)?kt:Gt,i=arguments.length<3;return r(e,oo(t,4),n,i,ur)},Un.reduceRight=function(e,t,n){var r=$a(e)?Lt:Gt,i=arguments.length<3;return r(e,oo(t,4),n,i,hr)},Un.repeat=function(e,t,n){return t=(n?vo(e,t,n):t===i)?1:fs(t),Wr(vs(e),t)},Un.replace=function(){var e=arguments,t=vs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,o=(t=gi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Do(t[r])];a===i&&(r=o,a=n),e=Ka(a)?a.call(e):a}return e},Un.round=wl,Un.runInContext=e,Un.sample=function(e){return($a(e)?Yn:Xr)(e)},Un.size=function(e){if(null==e)return 0;if(Ga(e))return as(e)?un(e):e.length;var t=ho(e);return t==w||t==T?e.size:Lr(e).length},Un.snakeCase=Ws,Un.some=function(e,t,n){var r=$a(e)?Nt:ti;return n&&vo(e,t,n)&&(t=i),r(e,oo(t,3))},Un.sortedIndex=function(e,t){return ni(e,t)},Un.sortedIndexBy=function(e,t,n){return ri(e,t,oo(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ni(e,t);if(r<n&&Fa(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ni(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ri(e,t,oo(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ni(e,t,!0)-1;if(Fa(e[n],t))return n}return-1},Un.startCase=qs,Un.startsWith=function(e,t,n){return e=vs(e),n=null==n?0:or(fs(n),0,e.length),t=ai(t),e.slice(n,n+t.length)==t},Un.subtract=Sl,Un.sum=function(e){return e&&e.length?Wt(e,nl):0},Un.sumBy=function(e,t){return e&&e.length?Wt(e,oo(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&vo(e,t,n)&&(t=i),e=vs(e),t=xs({},t,r,Yi);var o,a,s=xs({},t.imports,r.imports,Yi),l=Rs(s),c=Kt(s,l),u=0,h=t.interpolate||be,d="__p += '",f=Ce((t.escape||be).source+"|"+h.source+"|"+(h===Z?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),p="//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(f,(function(t,n,r,i,s,l){return r||(r=i),d+=e.slice(u,l).replace(xe,nn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=ke.call(t,"variable")&&t.variable;if(m){if(ce.test(m))throw new _e("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(V,""):d).replace($,"$1").replace(H,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Zs((function(){return we(l,p+"return "+d).apply(i,c)}));if(g.source=d,Ya(g))throw g;return g},Un.times=function(e,t){if((e=fs(e))<1||e>h)return[];var n=f,r=vn(e,f);t=oo(t),e-=f;for(var i=qt(r,t);++n<e;)t(n);return i},Un.toFinite=ds,Un.toInteger=fs,Un.toLength=ps,Un.toLower=function(e){return vs(e).toLowerCase()},Un.toNumber=ms,Un.toSafeInteger=function(e){return e?or(fs(e),-9007199254740991,h):0===e?e:0},Un.toString=vs,Un.toUpper=function(e){return vs(e).toUpperCase()},Un.trim=function(e,t,n){if((e=vs(e))&&(n||t===i))return Xt(e);if(!e||!(t=ai(t)))return e;var r=hn(e),o=hn(t);return yi(r,Jt(r,o),Qt(r,o)+1).join("")},Un.trimEnd=function(e,t,n){if((e=vs(e))&&(n||t===i))return e.slice(0,dn(e)+1);if(!e||!(t=ai(t)))return e;var r=hn(e);return yi(r,0,Qt(r,hn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=vs(e))&&(n||t===i))return e.replace(re,"");if(!e||!(t=ai(t)))return e;var r=hn(e);return yi(r,Jt(r,hn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(Qa(t)){var o="separator"in t?t.separator:o;n="length"in t?fs(t.length):n,r="omission"in t?ai(t.omission):r}var a=(e=vs(e)).length;if(rn(e)){var s=hn(e);a=s.length}if(n>=a)return e;var l=n-un(r);if(l<1)return r;var c=s?yi(s,0,l).join(""):e.slice(0,l);if(o===i)return c+r;if(s&&(l+=c.length-l),is(o)){if(e.slice(l).search(o)){var u,h=c;for(o.global||(o=Ce(o.source,vs(de.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(ai(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+r},Un.unescape=function(e){return(e=vs(e))&&q.test(e)?e.replace(G,fn):e},Un.uniqueId=function(e){var t=++Le;return vs(e)+t},Un.upperCase=Xs,Un.upperFirst=Ys,Un.each=va,Un.eachRight=ya,Un.first=Go,al(Un,(gl={},yr(Un,(function(e,t){ke.call(Un.prototype,t)||(gl[t]=e)})),gl),{chain:!1}),Un.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Ct(["drop","take"],(function(e,t){Vn.prototype[e]=function(n){n=n===i?1:gn(fs(n),0);var r=this.__filtered__&&!t?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(nl)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=qr((function(e,t){return"function"==typeof e?new Vn(this):this.map((function(n){return Ar(n,e,t)}))})),Vn.prototype.reject=function(e){return this.filter(La(oo(e)))},Vn.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(f)},yr(Vn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Vn,c=s[0],u=l||$a(t),h=function(e){var t=o.apply(Un,Ot([e],s));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=l&&!f;if(!a&&u){t=m?t:new Vn(this);var g=e.apply(t,s);return g.__actions__.push({func:da,args:[h],thisArg:i}),new jn(g,d)}return p&&m?e.apply(this,s):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply($a(i)?i:[],e)}return this[n]((function(n){return t.apply($a(n)?n:[],e)}))}})),yr(Vn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";ke.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[zi(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$a(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=vn(t,e+a);break;case"takeRight":e=gn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=vn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return hi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var m=-1,g=e[c+=t];++m<h;){var v=u[m],y=v.iteratee,b=v.type,x=y(g);if(2==b)g=x;else if(!x){if(1==b)continue e;break e}}p[d++]=g}return p},Un.prototype.at=fa,Un.prototype.chain=function(){return ha(this)},Un.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=Uo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:da,args:[Qo],thisArg:i}),new jn(t,this.__chain__)}return this.thru(Qo)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Ye&&(Un.prototype[Ye]=function(){return this}),Un}();ht._=pn,(r=function(){return pn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},5378:(e,t,n)=>{var r=n(4932),i=n(5389),o=n(5128),a=n(6449);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},104:(e,t,n)=>{var r=n(3661);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},583:(e,t,n)=>{var r=n(7237),i=n(7255),o=n(8586),a=n(7797);e.exports=function(e){return o(e)?r(a(e)):i(e)}},3345:e=>{e.exports=function(){return[]}},9935:e=>{e.exports=function(){return!1}},3222:(e,t,n)=>{var r=n(7556);e.exports=function(e){return null==e?"":r(e)}},7057:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),i=n(t);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){return Object.entries(e).sort().reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})},p=function(e,t){return"number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t?e===t:Array.isArray(e)&&Array.isArray(t)?JSON.stringify(e)===JSON.stringify(t):"object"===a(e)&&"object"===a(t)&&JSON.stringify(f(e))===JSON.stringify(f(t))},m=function(t){var n=c(e.useState(null),2),a=n[0],h=n[1],d=r.default.createRef();e.useEffect((function(){var e=t.instanceRef,n=e&&Object.prototype.hasOwnProperty.call(e,"current");return e&&e instanceof Function&&e(d.current),n&&(e.current=d.current),function(){n&&(e.current=null)}}),[d]);var f=function(e){var t=Number(e.target.getAttribute("data-value"));a&&a.set(t)},p=function(e){var t=d.current;t&&(e?t.setAttribute("disabled",!0):t.removeAttribute("disabled"))},m=t.onUpdate,g=t.onChange,v=t.onSlide,y=t.onStart,b=t.onEnd,x=t.onSet,_=function(e){y&&(e.off("start"),e.on("start",y)),v&&(e.off("slide"),e.on("slide",v)),m&&(e.off("update"),e.on("update",m)),g&&(e.off("change"),e.on("change",g)),x&&(e.off("set"),e.on("set",x)),b&&(e.off("end"),e.on("end",b))},w=function(){t.clickablePips&&u(d.current.querySelectorAll(".noUi-value")).forEach((function(e){e.style.cursor="pointer",e.addEventListener("click",f)}))};e.useEffect((function(){var e=t.disabled,n=d.current;return n&&(p(e),function(){if(!d.current.noUiSlider){var e=i.default.create(d.current,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t));_(e),h(e)}}()),function(){a&&a.destroy(),n&&u(n.querySelectorAll(".noUi-value")).forEach((function(e){e.removeEventListener("click",f)}))}}),[]),e.useEffect((function(){a&&w()}),[a]);var S=t.start,E=t.disabled,C=t.range,M=t.step,T=t.margin,A=t.padding,P=t.limit,R=t.pips,I=t.snap,O=t.animate;e.useEffect((function(){a&&(function(e){d.current.noUiSlider.updateOptions(e)}({range:C,step:M,padding:A,margin:T,limit:P,pips:R,snap:I,animate:O}),a.set(S),w()),p(E)}),[S,E,C,M,T,A,P,R,I,O]),e.useEffect((function(){a&&_(a)}),[m,g,v,y,b,x]);var k=t.id,L=t.className,N=t.style,D={};return k&&(D.id=k),L&&(D.className=L),r.default.createElement("div",l({},D,{ref:d,style:N}))};return m.defaultProps={animate:!0,behaviour:"tap",className:null,clickablePips:!1,connect:!1,direction:"ltr",disabled:!1,format:null,margin:null,limit:null,keyboardSupport:!0,id:null,instanceRef:null,padding:0,pips:null,snap:!1,step:null,style:null,orientation:"horizontal",tooltips:!1,onChange:function(){},onEnd:function(){},onSet:function(){},onSlide:function(){},onStart:function(){},onUpdate:function(){}},r.default.memo(m,(function(e,t){var n=e.start,r=e.step,i=e.disabled,o=e.range;return t.step===r&&p(t.start,n)&&t.disabled===i&&p(t.range,o)}))}(n(6540),n(3729))},3729:(e,t)=>{var n,r;void 0===(r="function"==typeof(n=function(){"use strict";var e="14.7.0";function t(e){e.parentElement.removeChild(e)}function n(e){return null!=e}function r(e){e.preventDefault()}function i(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e,t,n){n>0&&(c(e,t),setTimeout((function(){u(e,t)}),n))}function a(e){return Math.max(Math.min(e,100),0)}function s(e){return Array.isArray(e)?e:[e]}function l(e){var t=(e=String(e)).split(".");return t.length>1?t[1].length:0}function c(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function u(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(e){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:n?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:n?e.documentElement.scrollTop:e.body.scrollTop}}function d(e,t){return 100/(t-e)}function f(e,t,n){return 100*t/(e[n+1]-e[n])}function p(e,t){for(var n=1;e>=t[n];)n+=1;return n}function m(e,t,n){if(n>=e.slice(-1)[0])return 100;var r=p(n,e),i=e[r-1],o=e[r],a=t[r-1],s=t[r];return a+function(e,t){return f(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}([i,o],n)/d(a,s)}function g(e,t,n,r){if(100===r)return r;var i=p(r,e),o=e[i-1],a=e[i];return n?r-o>(a-o)/2?a:o:t[i-1]?e[i-1]+function(e,t){return Math.round(e/t)*t}(r-e[i-1],t[i-1]):r}function v(t,n,r){var o;if("number"==typeof n&&(n=[n]),!Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'range' contains invalid value.");if(!i(o="min"===t?0:"max"===t?100:parseFloat(t))||!i(n[0]))throw new Error("noUiSlider ("+e+"): 'range' value isn't numeric.");r.xPct.push(o),r.xVal.push(n[0]),o?r.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(r.xSteps[0]=n[1]),r.xHighestCompleteStep.push(0)}function y(e,t,n){if(t)if(n.xVal[e]!==n.xVal[e+1]){n.xSteps[e]=f([n.xVal[e],n.xVal[e+1]],t,0)/d(n.xPct[e],n.xPct[e+1]);var r=(n.xVal[e+1]-n.xVal[e])/n.xNumSteps[e],i=Math.ceil(Number(r.toFixed(3))-1),o=n.xVal[e]+n.xNumSteps[e]*i;n.xHighestCompleteStep[e]=o}else n.xSteps[e]=n.xHighestCompleteStep[e]=n.xVal[e]}function b(e,t,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t;var i=[];for(r in e)e.hasOwnProperty(r)&&i.push([e[r],r]);for(i.length&&"object"==typeof i[0][0]?i.sort((function(e,t){return e[0][0]-t[0][0]})):i.sort((function(e,t){return e[0]-t[0]})),r=0;r<i.length;r++)v(i[r][1],i[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)y(r,this.xNumSteps[r],this)}b.prototype.getDistance=function(t){var n,r=[];for(n=0;n<this.xNumSteps.length-1;n++){var i=this.xNumSteps[n];if(i&&t/i%1!=0)throw new Error("noUiSlider ("+e+"): 'limit', 'margin' and 'padding' of "+this.xPct[n]+"% range must be divisible by step.");r[n]=f(this.xVal,t,n)}return r},b.prototype.getAbsoluteDistance=function(e,t,n){var r,i=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[i+1];)i++;else e===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||e!==this.xPct[i+1]||i++;var o=1,a=t[i],s=0,l=0,c=0,u=0;for(r=n?(e-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-e)/(this.xPct[i+1]-this.xPct[i]);a>0;)s=this.xPct[i+1+u]-this.xPct[i+u],t[i+u]*o+100-100*r>100?(l=s*r,o=(a-100*r)/t[i+u],r=1):(l=t[i+u]*s/100*o,o=0),n?(c-=l,this.xPct.length+u>=1&&u--):(c+=l,this.xPct.length-u>=1&&u++),a=t[i+u]*o;return e+c},b.prototype.toStepping=function(e){return m(this.xVal,this.xPct,e)},b.prototype.fromStepping=function(e){return function(e,t,n){if(n>=100)return e.slice(-1)[0];var r=p(n,t),i=e[r-1],o=e[r],a=t[r-1];return function(e,t){return t*(e[1]-e[0])/100+e[0]}([i,o],(n-a)*d(a,t[r]))}(this.xVal,this.xPct,e)},b.prototype.getStep=function(e){return g(this.xPct,this.xSteps,this.snap,e)},b.prototype.getDefaultStep=function(e,t,n){var r=p(e,this.xPct);return(100===e||t&&e===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},b.prototype.getNearbySteps=function(e){var t=p(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},b.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(l);return Math.max.apply(null,e)},b.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var x={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number},_={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},w=".__tooltips",S=".__aria";function E(t){if(function(e){return"object"==typeof e&&"function"==typeof e.to&&"function"==typeof e.from}(t))return!0;throw new Error("noUiSlider ("+e+"): 'format' requires 'to' and 'from' methods.")}function C(t,n){if(!i(n))throw new Error("noUiSlider ("+e+"): 'step' is not numeric.");t.singleStep=n}function M(t,n){if(!i(n))throw new Error("noUiSlider ("+e+"): 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=n}function T(t,n){if(!i(n))throw new Error("noUiSlider ("+e+"): 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=n}function A(t,n){if("object"!=typeof n||Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider ("+e+"): Missing 'min' or 'max' in 'range'.");if(n.min===n.max)throw new Error("noUiSlider ("+e+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new b(n,t.snap,t.singleStep)}function P(t,n){if(n=s(n),!Array.isArray(n)||!n.length)throw new Error("noUiSlider ("+e+"): 'start' option is incorrect.");t.handles=n.length,t.start=n}function R(t,n){if(t.snap=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+e+"): 'snap' option must be a boolean.")}function I(t,n){if(t.animate=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+e+"): 'animate' option must be a boolean.")}function O(t,n){if(t.animationDuration=n,"number"!=typeof n)throw new Error("noUiSlider ("+e+"): 'animationDuration' option must be a number.")}function k(t,n){var r,i=[!1];if("lower"===n?n=[!0,!1]:"upper"===n&&(n=[!1,!0]),!0===n||!1===n){for(r=1;r<t.handles;r++)i.push(n);i.push(!1)}else{if(!Array.isArray(n)||!n.length||n.length!==t.handles+1)throw new Error("noUiSlider ("+e+"): 'connect' option doesn't match handle count.");i=n}t.connect=i}function L(t,n){switch(n){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+e+"): 'orientation' option is invalid.")}}function N(t,n){if(!i(n))throw new Error("noUiSlider ("+e+"): 'margin' option must be numeric.");0!==n&&(t.margin=t.spectrum.getDistance(n))}function D(t,n){if(!i(n))throw new Error("noUiSlider ("+e+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(n),!t.limit||t.handles<2)throw new Error("noUiSlider ("+e+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function z(t,n){var r;if(!i(n)&&!Array.isArray(n))throw new Error("noUiSlider ("+e+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(n)&&2!==n.length&&!i(n[0])&&!i(n[1]))throw new Error("noUiSlider ("+e+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==n){for(Array.isArray(n)||(n=[n,n]),t.padding=[t.spectrum.getDistance(n[0]),t.spectrum.getDistance(n[1])],r=0;r<t.spectrum.xNumSteps.length-1;r++)if(t.padding[0][r]<0||t.padding[1][r]<0)throw new Error("noUiSlider ("+e+"): 'padding' option must be a positive number(s).");var o=n[0]+n[1],a=t.spectrum.xVal[0];if(o/(t.spectrum.xVal[t.spectrum.xVal.length-1]-a)>1)throw new Error("noUiSlider ("+e+"): 'padding' option must not exceed 100% of the range.")}}function U(t,n){switch(n){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+e+"): 'direction' option was not recognized.")}}function F(t,n){if("string"!=typeof n)throw new Error("noUiSlider ("+e+"): 'behaviour' must be a string containing options.");var r=n.indexOf("tap")>=0,i=n.indexOf("drag")>=0,o=n.indexOf("fixed")>=0,a=n.indexOf("snap")>=0,s=n.indexOf("hover")>=0,l=n.indexOf("unconstrained")>=0;if(o){if(2!==t.handles)throw new Error("noUiSlider ("+e+"): 'fixed' behaviour must be used with 2 handles");N(t,t.start[1]-t.start[0])}if(l&&(t.margin||t.limit))throw new Error("noUiSlider ("+e+"): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||a,drag:i,fixed:o,snap:a,hover:s,unconstrained:l}}function B(t,n){if(!1!==n)if(!0===n){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=s(n),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+e+"): must pass a formatter for all handles.");t.tooltips.forEach((function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+e+"): 'tooltips' must be passed a formatter or 'false'.")}))}}function j(e,t){e.ariaFormat=t,E(t)}function V(e,t){e.format=t,E(t)}function $(t,n){if(t.keyboardSupport=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+e+"): 'keyboardSupport' option must be a boolean.")}function H(e,t){e.documentElement=t}function G(t,n){if("string"!=typeof n&&!1!==n)throw new Error("noUiSlider ("+e+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=n}function W(t,n){if("object"!=typeof n)throw new Error("noUiSlider ("+e+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},n)n.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+n[r]);else t.cssClasses=n}function q(t){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:x,format:x},i={step:{r:!1,t:C},keyboardPageMultiplier:{r:!1,t:M},keyboardDefaultStep:{r:!1,t:T},start:{r:!0,t:P},connect:{r:!0,t:k},direction:{r:!0,t:U},snap:{r:!1,t:R},animate:{r:!1,t:I},animationDuration:{r:!1,t:O},range:{r:!0,t:A},orientation:{r:!1,t:L},margin:{r:!1,t:N},limit:{r:!1,t:D},padding:{r:!1,t:z},behaviour:{r:!0,t:F},ariaFormat:{r:!1,t:j},format:{r:!1,t:V},tooltips:{r:!1,t:B},keyboardSupport:{r:!0,t:$},documentElement:{r:!1,t:H},cssPrefix:{r:!0,t:G},cssClasses:{r:!0,t:W}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:_,keyboardPageMultiplier:5,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach((function(a){if(!n(t[a])&&void 0===o[a]){if(i[a].r)throw new Error("noUiSlider ("+e+"): '"+a+"' is required.");return!0}i[a].t(r,n(t[a])?t[a]:o[a])})),r.pips=t.pips;var a=document.createElement("div"),s=void 0!==a.style.msTransform,l=void 0!==a.style.transform;r.transformRule=l?"transform":s?"msTransform":"webkitTransform";return r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function X(i,l,d){var f,p,m,g,v,y,b,x,_=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},E=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),C=i,M=l.spectrum,T=[],A=[],P=[],R=0,I={},O=i.ownerDocument,k=l.documentElement||O.documentElement,L=O.body,N="rtl"===O.dir||1===l.ort?0:100;function D(e,t){var n=O.createElement("div");return t&&c(n,t),e.appendChild(n),n}function z(e,t){var n=D(e,l.cssClasses.origin),r=D(n,l.cssClasses.handle);return D(r,l.cssClasses.touchArea),r.setAttribute("data-handle",t),l.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",(function(e){return function(e,t){if(B()||j(t))return!1;var n=["Left","Right"],r=["Down","Up"],i=["PageDown","PageUp"],o=["Home","End"];l.dir&&!l.ort?n.reverse():l.ort&&!l.dir&&(r.reverse(),i.reverse());var a,s=e.key.replace("Arrow",""),c=s===i[0],u=s===i[1],h=s===r[0]||s===n[0]||c,d=s===r[1]||s===n[1]||u,f=s===o[0],p=s===o[1];if(!(h||d||f||p))return!0;if(e.preventDefault(),d||h){var m=l.keyboardPageMultiplier,g=h?0:1,v=ge(t)[g];if(null===v)return!1;!1===v&&(v=M.getDefaultStep(A[t],h,l.keyboardDefaultStep)),(u||c)&&(v*=m),v=Math.max(v,1e-7),v*=h?-1:1,a=T[t]+v}else a=p?l.spectrum.xVal[l.spectrum.xVal.length-1]:l.spectrum.xVal[0];return he(t,M.toStepping(a),!0,!0),oe("slide",t),oe("update",t),oe("change",t),oe("set",t),!1}(e,t)}))),r.setAttribute("role","slider"),r.setAttribute("aria-orientation",l.ort?"vertical":"horizontal"),0===t?c(r,l.cssClasses.handleLower):t===l.handles-1&&c(r,l.cssClasses.handleUpper),n}function U(e,t){return!!t&&D(e,l.cssClasses.connect)}function F(e,t){return!!l.tooltips[t]&&D(e.firstChild,l.cssClasses.tooltip)}function B(){return C.hasAttribute("disabled")}function j(e){return p[e].hasAttribute("disabled")}function V(){v&&(ie("update"+w),v.forEach((function(e){e&&t(e)})),v=null)}function $(){V(),v=p.map(F),re("update"+w,(function(e,t,n){if(v[t]){var r=e[t];!0!==l.tooltips[t]&&(r=l.tooltips[t].to(n[t])),v[t].innerHTML=r}}))}function H(e,t,n){var r=O.createElement("div"),i=[];i[0]=l.cssClasses.valueNormal,i[1]=l.cssClasses.valueLarge,i[2]=l.cssClasses.valueSub;var o=[];o[0]=l.cssClasses.markerNormal,o[1]=l.cssClasses.markerLarge,o[2]=l.cssClasses.markerSub;var a=[l.cssClasses.valueHorizontal,l.cssClasses.valueVertical],s=[l.cssClasses.markerHorizontal,l.cssClasses.markerVertical];function u(e,t){var n=t===l.cssClasses.value,r=n?i:o;return t+" "+(n?a:s)[l.ort]+" "+r[e]}return c(r,l.cssClasses.pips),c(r,0===l.ort?l.cssClasses.pipsHorizontal:l.cssClasses.pipsVertical),Object.keys(e).forEach((function(i){!function(e,i,o){if(-1!==(o=t?t(i,o):o)){var a=D(r,!1);a.className=u(o,l.cssClasses.marker),a.style[l.style]=e+"%",o>0&&((a=D(r,!1)).className=u(o,l.cssClasses.value),a.setAttribute("data-value",i),a.style[l.style]=e+"%",a.innerHTML=n.to(i))}}(i,e[i][0],e[i][1])})),r}function G(){g&&(t(g),g=null)}function W(t){G();var n=t.mode,r=t.density||1,i=t.filter||!1,o=function(e,t,n){var r,i={},o=M.xVal[0],a=M.xVal[M.xVal.length-1],s=!1,l=!1,c=0;return(r=n.slice().sort((function(e,t){return e-t})),n=r.filter((function(e){return!this[e]&&(this[e]=!0)}),{}))[0]!==o&&(n.unshift(o),s=!0),n[n.length-1]!==a&&(n.push(a),l=!0),n.forEach((function(r,o){var a,u,h,d,f,p,m,g,v,y,b=r,x=n[o+1],_="steps"===t;if(_&&(a=M.xNumSteps[o]),a||(a=x-b),!1!==b)for(void 0===x&&(x=b),a=Math.max(a,1e-7),u=b;u<=x;u=(u+a).toFixed(7)/1){for(g=(f=(d=M.toStepping(u))-c)/e,y=f/(v=Math.round(g)),h=1;h<=v;h+=1)i[(p=c+h*y).toFixed(5)]=[M.fromStepping(p),0];m=n.indexOf(u)>-1?1:_?2:0,!o&&s&&u!==x&&(m=0),u===x&&l||(i[d.toFixed(5)]=[u,m]),c=d}})),i}(r,n,function(t,n,r){if("range"===t||"steps"===t)return M.xVal;if("count"===t){if(n<2)throw new Error("noUiSlider ("+e+"): 'values' (>= 2) required for mode 'count'.");var i=n-1,o=100/i;for(n=[];i--;)n[i]=i*o;n.push(100),t="positions"}return"positions"===t?n.map((function(e){return M.fromStepping(r?M.getStep(e):e)})):"values"===t?r?n.map((function(e){return M.fromStepping(M.getStep(M.toStepping(e)))})):n:void 0}(n,t.values||!1,t.stepped||!1)),a=t.format||{to:Math.round};return g=C.appendChild(H(o,i,a))}function X(){var e=f.getBoundingClientRect(),t="offset"+["Width","Height"][l.ort];return 0===l.ort?e.width||f[t]:e.height||f[t]}function Y(e,t,n,r){var i=function(i){return!!(i=function(e,t,n){var r,i,o=0===e.type.indexOf("touch"),a=0===e.type.indexOf("mouse"),s=0===e.type.indexOf("pointer");if(0===e.type.indexOf("MSPointer")&&(s=!0),"mousedown"===e.type&&!e.buttons&&!e.touches)return!1;if(o){var l=function(e){return e.target===n||n.contains(e.target)||e.target.shadowRoot&&e.target.shadowRoot.contains(n)};if("touchstart"===e.type){var c=Array.prototype.filter.call(e.touches,l);if(c.length>1)return!1;r=c[0].pageX,i=c[0].pageY}else{var u=Array.prototype.find.call(e.changedTouches,l);if(!u)return!1;r=u.pageX,i=u.pageY}}return t=t||h(O),(a||s)&&(r=e.clientX+t.x,i=e.clientY+t.y),e.pageOffset=t,e.points=[r,i],e.cursor=a||s,e}(i,r.pageOffset,r.target||t))&&!(B()&&!r.doNotReject)&&(o=C,a=l.cssClasses.tap,!((o.classList?o.classList.contains(a):new RegExp("\\b"+a+"\\b").test(o.className))&&!r.doNotReject))&&!(e===_.start&&void 0!==i.buttons&&i.buttons>1)&&(!r.hover||!i.buttons)&&(E||i.preventDefault(),i.calcPoint=i.points[l.ort],void n(i,r));var o,a},o=[];return e.split(" ").forEach((function(e){t.addEventListener(e,i,!!E&&{passive:!0}),o.push([e,i])})),o}function K(e){var t,n,r,i,o,s,c=100*(e-(t=f,n=l.ort,r=t.getBoundingClientRect(),i=t.ownerDocument,o=i.documentElement,s=h(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),n?r.top+s.y-o.clientTop:r.left+s.x-o.clientLeft))/X();return c=a(c),l.dir?100-c:c}function Z(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&Q(e,t)}function J(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return Q(e,t);var n=(l.dir?-1:1)*(e.calcPoint-t.startCalcPoint);le(n>0,100*n/t.baseSize,t.locations,t.handleNumbers)}function Q(e,t){t.handle&&(u(t.handle,l.cssClasses.active),R-=1),t.listeners.forEach((function(e){k.removeEventListener(e[0],e[1])})),0===R&&(u(C,l.cssClasses.drag),ue(),e.cursor&&(L.style.cursor="",L.removeEventListener("selectstart",r))),t.handleNumbers.forEach((function(e){oe("change",e),oe("set",e),oe("end",e)}))}function ee(e,t){if(t.handleNumbers.some(j))return!1;var n;1===t.handleNumbers.length&&(n=p[t.handleNumbers[0]].children[0],R+=1,c(n,l.cssClasses.active)),e.stopPropagation();var i=[],o=Y(_.move,k,J,{target:e.target,handle:n,listeners:i,startCalcPoint:e.calcPoint,baseSize:X(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:A.slice()}),a=Y(_.end,k,Q,{target:e.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:t.handleNumbers}),s=Y("mouseout",k,Z,{target:e.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:t.handleNumbers});i.push.apply(i,o.concat(a,s)),e.cursor&&(L.style.cursor=getComputedStyle(e.target).cursor,p.length>1&&c(C,l.cssClasses.drag),L.addEventListener("selectstart",r,!1)),t.handleNumbers.forEach((function(e){oe("start",e)}))}function te(e){e.stopPropagation();var t=K(e.calcPoint),n=function(e){var t=100,n=!1;return p.forEach((function(r,i){if(!j(i)){var o=A[i],a=Math.abs(o-e);(a<t||a<=t&&e>o||100===a&&100===t)&&(n=i,t=a)}})),n}(t);if(!1===n)return!1;l.events.snap||o(C,l.cssClasses.tap,l.animationDuration),he(n,t,!0,!0),ue(),oe("slide",n,!0),oe("update",n,!0),oe("change",n,!0),oe("set",n,!0),l.events.snap&&ee(e,{handleNumbers:[n]})}function ne(e){var t=K(e.calcPoint),n=M.getStep(t),r=M.fromStepping(n);Object.keys(I).forEach((function(e){"hover"===e.split(".")[0]&&I[e].forEach((function(e){e.call(y,r)}))}))}function re(e,t){I[e]=I[e]||[],I[e].push(t),"update"===e.split(".")[0]&&p.forEach((function(e,t){oe("update",t)}))}function ie(e){var t=e&&e.split(".")[0],n=t?e.substring(t.length):e;Object.keys(I).forEach((function(e){var r=e.split(".")[0],i=e.substring(r.length);t&&t!==r||n&&n!==i||function(e){return e===S||e===w}(i)&&n!==i||delete I[e]}))}function oe(e,t,n){Object.keys(I).forEach((function(r){var i=r.split(".")[0];e===i&&I[r].forEach((function(e){e.call(y,T.map(l.format.to),t,T.slice(),n||!1,A.slice(),y)}))}))}function ae(e,t,n,r,i,o){var s;return p.length>1&&!l.events.unconstrained&&(r&&t>0&&(s=M.getAbsoluteDistance(e[t-1],l.margin,0),n=Math.max(n,s)),i&&t<p.length-1&&(s=M.getAbsoluteDistance(e[t+1],l.margin,1),n=Math.min(n,s))),p.length>1&&l.limit&&(r&&t>0&&(s=M.getAbsoluteDistance(e[t-1],l.limit,0),n=Math.min(n,s)),i&&t<p.length-1&&(s=M.getAbsoluteDistance(e[t+1],l.limit,1),n=Math.max(n,s))),l.padding&&(0===t&&(s=M.getAbsoluteDistance(0,l.padding[0],0),n=Math.max(n,s)),t===p.length-1&&(s=M.getAbsoluteDistance(100,l.padding[1],1),n=Math.min(n,s))),!((n=a(n=M.getStep(n)))===e[t]&&!o)&&n}function se(e,t){var n=l.ort;return(n?t:e)+", "+(n?e:t)}function le(e,t,n,r){var i=n.slice(),o=[!e,e],a=[e,!e];r=r.slice(),e&&r.reverse(),r.length>1?r.forEach((function(e,n){var r=ae(i,e,i[e]+t,o[n],a[n],!1);!1===r?t=0:(t=r-i[e],i[e]=r)})):o=a=[!0];var s=!1;r.forEach((function(e,r){s=he(e,n[e]+t,o[r],a[r])||s})),s&&r.forEach((function(e){oe("update",e),oe("slide",e)}))}function ce(e,t){return l.dir?100-e-t:e}function ue(){P.forEach((function(e){var t=A[e]>50?-1:1,n=3+(p.length+t*e);p[e].style.zIndex=n}))}function he(e,t,n,r,i){return i||(t=ae(A,e,t,n,r,!1)),!1!==t&&(function(e,t){A[e]=t,T[e]=M.fromStepping(t);var n="translate("+se(10*(ce(t,0)-N)+"%","0")+")";p[e].style[l.transformRule]=n,de(e),de(e+1)}(e,t),!0)}function de(e){if(m[e]){var t=0,n=100;0!==e&&(t=A[e-1]),e!==m.length-1&&(n=A[e]);var r=n-t,i="translate("+se(ce(t,r)+"%","0")+")",o="scale("+se(r/100,"1")+")";m[e].style[l.transformRule]=i+" "+o}}function fe(e,t){return null===e||!1===e||void 0===e?A[t]:("number"==typeof e&&(e=String(e)),e=l.format.from(e),!1===(e=M.toStepping(e))||isNaN(e)?A[t]:e)}function pe(e,t,n){var r=s(e),i=void 0===A[0];t=void 0===t||!!t,l.animate&&!i&&o(C,l.cssClasses.tap,l.animationDuration),P.forEach((function(e){he(e,fe(r[e],e),!0,!1,n)}));for(var a=1===P.length?0:1;a<P.length;++a)P.forEach((function(e){he(e,A[e],!0,!0,n)}));ue(),P.forEach((function(e){oe("update",e),null!==r[e]&&t&&oe("set",e)}))}function me(){var e=T.map(l.format.to);return 1===e.length?e[0]:e}function ge(e){var t=A[e],n=M.getNearbySteps(t),r=T[e],i=n.thisStep.step,o=null;if(l.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];!1!==i&&r+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-r),o=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===t?i=null:0===t&&(o=null);var a=M.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return c(x=C,l.cssClasses.target),0===l.dir?c(x,l.cssClasses.ltr):c(x,l.cssClasses.rtl),0===l.ort?c(x,l.cssClasses.horizontal):c(x,l.cssClasses.vertical),c(x,"rtl"===getComputedStyle(x).direction?l.cssClasses.textDirectionRtl:l.cssClasses.textDirectionLtr),f=D(x,l.cssClasses.base),function(e,t){var n=D(t,l.cssClasses.connects);p=[],(m=[]).push(U(n,e[0]));for(var r=0;r<l.handles;r++)p.push(z(t,r)),P[r]=r,m.push(U(n,e[r+1]))}(l.connect,f),(b=l.events).fixed||p.forEach((function(e,t){Y(_.start,e.children[0],ee,{handleNumbers:[t]})})),b.tap&&Y(_.start,f,te,{}),b.hover&&Y(_.move,f,ne,{hover:!0}),b.drag&&m.forEach((function(e,t){if(!1!==e&&0!==t&&t!==m.length-1){var n=p[t-1],r=p[t],i=[e];c(e,l.cssClasses.draggable),b.fixed&&(i.push(n.children[0]),i.push(r.children[0])),i.forEach((function(e){Y(_.start,e,ee,{handles:[n,r],handleNumbers:[t-1,t]})}))}})),pe(l.start),l.pips&&W(l.pips),l.tooltips&&$(),ie("update"+S),re("update"+S,(function(e,t,n,r,i){P.forEach((function(e){var t=p[e],r=ae(A,e,0,!0,!0,!0),o=ae(A,e,100,!0,!0,!0),a=i[e],s=l.ariaFormat.to(n[e]);r=M.fromStepping(r).toFixed(1),o=M.fromStepping(o).toFixed(1),a=M.fromStepping(a).toFixed(1),t.children[0].setAttribute("aria-valuemin",r),t.children[0].setAttribute("aria-valuemax",o),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",s)}))})),y={destroy:function(){for(var e in ie(S),ie(w),l.cssClasses)l.cssClasses.hasOwnProperty(e)&&u(C,l.cssClasses[e]);for(;C.firstChild;)C.removeChild(C.firstChild);delete C.noUiSlider},steps:function(){return P.map(ge)},on:re,off:ie,get:me,set:pe,setHandle:function(t,n,r,i){if(!((t=Number(t))>=0&&t<P.length))throw new Error("noUiSlider ("+e+"): invalid handle number, got: "+t);he(t,fe(n,t),!0,!0,i),oe("update",t),r&&oe("set",t)},reset:function(e){pe(l.start,e)},__moveHandles:function(e,t,n){le(e,t,A,n)},options:d,updateOptions:function(e,t){var r=me(),i=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];i.forEach((function(t){void 0!==e[t]&&(d[t]=e[t])}));var o=q(d);i.forEach((function(t){void 0!==e[t]&&(l[t]=o[t])})),M=o.spectrum,l.margin=o.margin,l.limit=o.limit,l.padding=o.padding,l.pips?W(l.pips):G(),l.tooltips?$():V(),A=[],pe(n(e.start)?e.start:r,t)},target:C,removePips:G,removeTooltips:V,getTooltips:function(){return v},getOrigins:function(){return p},pips:W}}return{__spectrum:b,version:e,cssClasses:_,create:function(t,n){if(!t||!t.nodeName)throw new Error("noUiSlider ("+e+"): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider ("+e+"): Slider was already initialized.");var r=X(t,q(n),n);return t.noUiSlider=r,r}}})?n.apply(t,[]):n)||(e.exports=r)},2694:(e,t,n)=>{"use strict";var r=n(6925);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5556:(e,t,n)=>{e.exports=n(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7787:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy");Symbol.for("react.offscreen");function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case c:case l:case u:case p:case f:case s:return e;default:return t}}case r:return t}}}Symbol.for("react.module.reference"),t.ForwardRef=u,t.isFragment=function(e){return m(e)===i},t.isMemo=function(e){return m(e)===f}},6351:(e,t,n)=>{"use strict";e.exports=n(7787)},2551:(e,t,n)=>{"use strict";var r=n(6540),i=n(9982);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function N(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,z=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return B(e.type,!1);case 11:return B(e.type.render,!1);case 1:return B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!=typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Me(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Re=!1;function Ie(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ae(e,t,n)}finally{Re=!1,(null!==Se||null!==Ee)&&(Pe(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var ke=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ke=!1}function Ne(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var De=!1,ze=null,Ue=!1,Fe=null,Be={onError:function(e){De=!0,ze=e}};function je(e,t,n,r,i,o,a,s,l){De=!1,ze=null,Ne.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ze=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null,at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!=(o&=a)&&(r=ht(o))}else 0!=(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&!(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&4194240&o))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _t,wt,St,Et,Ct,Mt=!1,Tt=[],At=null,Pt=null,Rt=null,It=new Map,Ot=new Map,kt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=bi(t))&&wt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Mt=!1,null!==At&&Ut(At)&&(At=null),null!==Pt&&Ut(Pt)&&(Pt=null),null!==Rt&&Ut(Rt)&&(Rt=null),It.forEach(Ft),Ot.forEach(Ft)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&jt(At,e),null!==Pt&&jt(Pt,e),null!==Rt&&jt(Rt,e),It.forEach(t),Ot.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)zt(n),null===n.blockedOn&&kt.shift()}var $t=x.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,o=$t.transition;$t.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,$t.transition=o}}function Wt(e,t,n,r){var i=bt,o=$t.transition;$t.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,$t.transition=o}}function qt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),Nt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Dt(At,e,t,n,r,i),!0;case"dragenter":return Pt=Dt(Pt,e,t,n,r,i),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Dt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Dt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Nt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=yi(e=_e(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=z({},cn,{view:0,detail:0}),dn=on(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(z({},fn,{dataTransfer:0})),gn=on(z({},hn,{relatedTarget:0})),vn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(z({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return En}var Mn=z({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Mn),An=on(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=z({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(In),kn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Nn,zn=u&&(!Ln||Nn&&8<Nn&&11>=Nn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1,$n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Gn(e,t,n,r){Me(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Xn(e){Ur(e,0)}function Yn(e){if(q(xi(e)))return e}function Kn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"==typeof er.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Gn(t,qn,e,_e(e)),Ie(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Er={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Mr=Cr("animationend"),Tr=Cr("animationiteration"),Ar=Cr("animationstart"),Pr=Cr("transitionend"),Rr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),l(t,[e])}for(var kr=0;kr<Ir.length;kr++){var Lr=Ir[kr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Mr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(je.apply(this,arguments),De){if(!De)throw Error(o(198));var u=ze;De=!1,ze=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;zr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;zr(i,s,c),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[jr]){e[jr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Kt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=o,i=_e(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Mr:case Tr:case Ar:l=vn;break;case Pr:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=!!(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Oe(p,d))&&u.push(Gr(p,m,f))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(m,p+"leave",l,n,i)).target=h,s.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=qr(f))p++;for(f=0,m=d;m;m=qr(m))f++;for(;0<p-f;)u=qr(u),p--;for(;0<f-p;)d=qr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Hn(s))if(Zn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Jt="value"in(Zt=i)?Zt.value:Zt.textContent,Vn=!0)),0<(v=Wr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:v}),(y||null!==(y=jn(n)))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Qt=Jt=Zt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y)}Ur(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Oe(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Oe(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(o(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,oi="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var wi=[],Si=-1;function Ei(e){return{current:e}}function Ci(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Mi(e,t){Si++,wi[Si]=e.current,e.current=t}var Ti={},Ai=Ei(Ti),Pi=Ei(!1),Ri=Ti;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!=e.childContextTypes}function ki(){Ci(Pi),Ci(Ai)}function Li(e,t,n){if(Ai.current!==Ti)throw Error(o(168));Mi(Ai,t),Mi(Pi,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,$(e)||"Unknown",i));return z({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ai.current,Mi(Ai,e),Mi(Pi,Pi.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ni(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ci(Pi),Ci(Ai),Mi(Ai,e)):Ci(Pi),Mi(Pi,n)}var Ui=null,Fi=!1,Bi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function Vi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),qe(Qe,Vi),t}finally{bt=t,Bi=!1}}return null}var $i=[],Hi=0,Gi=null,Wi=0,qi=[],Xi=0,Yi=null,Ki=1,Zi="";function Ji(e,t){$i[Hi++]=Wi,$i[Hi++]=Gi,Gi=e,Wi=t}function Qi(e,t,n){qi[Xi++]=Ki,qi[Xi++]=Zi,qi[Xi++]=Yi,Yi=e;var r=Ki;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Ki=1<<o|n<<i|r,Zi=e}function eo(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function to(e){for(;e===Gi;)Gi=$i[--Hi],$i[Hi]=null,Wi=$i[--Hi],$i[Hi]=null;for(;e===Yi;)Yi=qi[--Xi],qi[Xi]=null,Zi=qi[--Xi],qi[Xi]=null,Ki=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ki,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return!(!(1&e.mode)||128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=kc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===O&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Nc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||N(n))return null!==i?null:h(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||N(r))return h(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(i,h),io&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,s,l,c){var u=N(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,a,l){if("object"==typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===O&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Nc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case w:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uc(a,r.mode,l)).return=r,r=o}return s(r);case O:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(N(a))return g(r,o,a,l);yo(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var _o=xo(!0),wo=xo(!1),So=Ei(null),Eo=null,Co=null,Mo=null;function To(){Mo=Co=Eo=null}function Ao(e){var t=So.current;Ci(So),e._currentValue=t}function Po(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){Eo=e,Mo=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(Mo!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Eo)throw Error(o(308));Co=e,Eo.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Oo=null;function ko(e){null===Oo?Oo=[e]:Oo.push(e)}function Lo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ko(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Al){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,ko(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=z({},h,d);break e;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Wo=Ei(Go),qo=Ei(Go),Xo=Ei(Go);function Yo(e){if(e===Go)throw Error(o(174));return e}function Ko(e,t){switch(Mi(Xo,t),Mi(qo,e),Mi(Wo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Wo),Mi(Wo,t)}function Zo(){Ci(Wo),Ci(qo),Ci(Xo)}function Jo(e){Yo(Xo.current);var t=Yo(Wo.current),n=le(t,e.type);t!==n&&(Mi(qo,e),Mi(Wo,n))}function Qo(e){qo.current===e&&(Ci(Wo),Ci(qo))}var ea=Ei(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Qa:es,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ha)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"==typeof t?t(e):t}function _a(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Dl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Da(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ia(9,Ma.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));30&aa||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&Pa(e)}function Ta(e,t,n){return n((function(){Aa(t)&&Pa(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Pa(e){var t=No(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=ya();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oa(){return ba().memoizedState}function ka(e,t,n,r){var i=ya();sa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(t,n,o,r))}sa.flags|=e,i.memoizedState=Ia(1|t,n,o,r)}function Na(e,t){return ka(8390656,8,e,t)}function Da(e,t){return La(2048,8,e,t)}function za(e,t){return La(4,2,e,t)}function Ua(e,t){return La(4,4,e,t)}function Fa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!=n?n.concat([e]):null,La(4,4,Fa.bind(null,t,e),n)}function ja(){}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 21&aa?(sr(n,t)||(n=mt(),sa.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Wa(){return ba().memoizedState}function qa(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e)?Ka(t,n):null!==(n=Lo(e,t,n,r))&&(nc(n,e,r,ec()),Za(n,t,r))}function Xa(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ka(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,ko(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Lo(e,t,i,r))&&(nc(n,e,r,i=ec()),Za(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Za(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:Io,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Qa={readContext:Io,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Na,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ka(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ra,useDebugValue:ja,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ga.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));30&aa||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Na(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Ma.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Pl.identifierPrefix;if(io){var n=Zi;t=":"+t+"R"+(n=(Ki&~(1<<32-at(Ki)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Io,useCallback:Va,useContext:Io,useEffect:Da,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Ua,useMemo:$a,useReducer:_a,useRef:Oa,useState:function(){return _a(xa)},useDebugValue:ja,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1},ts={readContext:Io,useCallback:Va,useContext:Io,useEffect:Da,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Ua,useMemo:$a,useReducer:wa,useRef:Oa,useState:function(){return wa(xa)},useDebugValue:ja,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fo(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Bo(e,i,r))&&(nc(t,e,r,n),jo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,o))}function as(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"==typeof o&&null!==o?o=Io(o):(i=Oi(t)?Ri:Ai.current,o=(r=null!=(r=t.contextTypes))?Ii(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Io(o):(o=Oi(t)?Ri:Ai.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),$o(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ds="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),hs(0,t)},n}function ps(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!=typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?wo(t,null,n,r):_o(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ga(e,t,n,r,o,i),n=va(),null===e||bs?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ws(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=kc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,!(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);131072&e.flags&&(bs=!0)}}return Ms(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mi(kl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(kl,Ol),Ol|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(kl,Ol),Ol|=n;else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Mi(kl,Ol),Ol|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ms(e,t,n,r,i){var o=Oi(n)?Ri:Ai.current;return o=Ii(t,o),Ro(t,i),n=ga(e,t,n,r,o,i),r=va(),null===e||bs?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ts(e,t,n,r,i){if(Oi(n)){var o=!0;Di(t)}else o=!1;if(Ro(t,i),null===t.stateNode)$s(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Io(c):Ii(t,c=Oi(n)?Ri:Ai.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Do=!1;var d=t.memoizedState;a.state=d,$o(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Pi.current||Do?("function"==typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Do||os(t,n,s,r,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Uo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Io(l):Ii(t,l=Oi(n)?Ri:Ai.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Do=!1,d=t.memoizedState,a.state=d,$o(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||Pi.current||Do?("function"==typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Do||os(t,n,c,r,d,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Cs(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&zi(t,n,!1),Hs(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Ko(e,t.containerInfo)}function Rs(e,t,n,r,i){return po(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Is,Os,ks,Ls,Ns={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Mi(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},1&i||null===s?s=Dc(l,i,0,null):(s.childLanes=0,s.pendingProps=l),e=Nc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Ns,e):Us(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(a=Nc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&_o(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Ns,a);if(!(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=!!(s&e.childLanes),bs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(r.suspendedLanes|s)?0:i)&&i!==a.retryLane&&(a.retryLane=i,No(e,i),nc(r,e,i,-1))}return mc(),Fs(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Ki,qi[Xi++]=Zi,qi[Xi++]=Yi,Ki=e.id,Zi=e.overflow,Yi=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 1&l||t.child===a?(i=kc(a,c)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null),null!==r?s=kc(r,s):(s=Nc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=kc(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&mo(r),_o(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Po(e.return,t,n)}function js(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),2&(r=ea.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mi(ea,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,o);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function $s(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=kc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=kc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Oi(t.type)&&ki(),Ws(t),null;case 3:return r=t.stateNode,Zo(),Ci(Pi),Ci(Ai),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Os(e,t),Ws(t),null;case 5:Qo(t);var i=Yo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)ks(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=Yo(Wo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=!!(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Q(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Is(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":K(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"==typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"==typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo(Wo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ci(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&1&t.mode&&!(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else po(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ea.current?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Zo(),Os(e,t),null===e&&Vr(t.stateNode.containerInfo),Ws(t),null;case 10:return Ao(t.type._context),Ws(t),null;case 19:if(Ci(ea),null===(a=t.memoizedState))return Ws(t),null;if(r=!!(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Ll||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mi(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Vl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(t),null}else 2*Ze()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=ea.current,Mi(ea,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ol)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),Ci(Pi),Ci(Ai),ra(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qo(t),null;case 13:if(Ci(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ea),null;case 4:return Zo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},ks=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Wo.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Qr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Ks=!1,Zs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Ec(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Ec(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ks||Qs(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(2&o||4&o)&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ks&&(Qs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Ec(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Ec(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){Ec(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Ec(e,e.return,t)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){Ec(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(t){Ec(e,e.return,t)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){Ec(e,e.return,t)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Ec(e,e.return,t)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Ze())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||h,ml(t,e),Ks=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&1&e.mode)for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Qs(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Ec(r,n,e)}}break;case 5:Qs(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Js=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(t){Ec(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(t){Ec(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(t){Ec(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Js=l):wl(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Ys=s,Ks=c}xl(e)}else 8772&i.subtreeFlags&&null!==o?(o.return=i,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Ks||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&il(t)}catch(e){Ec(t,t.return,e)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function _l(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Ec(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Ec(t,i,e)}}var o=t.return;try{il(t)}catch(e){Ec(t,o,e)}break;case 5:var a=t.return;try{il(t)}catch(e){Ec(t,a,e)}}}catch(e){Ec(t,t.return,e)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Ml=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Al=0,Pl=null,Rl=null,Il=0,Ol=0,kl=Ei(0),Ll=0,Nl=null,Dl=0,zl=0,Ul=0,Fl=null,Bl=null,jl=0,Vl=1/0,$l=null,Hl=!1,Gl=null,Wl=null,ql=!1,Xl=null,Yl=0,Kl=0,Zl=null,Jl=-1,Ql=0;function ec(){return 6&Al?Ze():-1!==Jl?Jl:Jl=Ze()}function tc(e){return 1&e.mode?2&Al&&0!==Il?Il&-Il:null!==go.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type):1}function nc(e,t,n,r){if(50<Kl)throw Kl=0,Zl=null,Error(o(185));vt(e,n,r),2&Al&&e===Pl||(e===Pl&&(!(2&Al)&&(zl|=n),4===Ll&&sc(e,Il)),rc(e,r),1===n&&0===Al&&!(1&t.mode)&&(Vl=Ze()+500,Fi&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?s&n&&!(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Pl?Il:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fi=!0,ji(e)}(lc.bind(null,e)):ji(lc.bind(null,e)),ai((function(){!(6&Al)&&Vi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Ql=0,6&Al)throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Il:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var a=pc();for(Pl===e&&Il===t||($l=null,Vl=Ze()+500,dc(e,t));;)try{yc();break}catch(t){fc(e,t)}To(),Cl.current=a,Al=i,null!==Rl?t=0:(Pl=null,Il=0,t=Ll)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=oc(e,i)),1===t)throw n=Nl,dc(e,0),sc(e,r),rc(e,Ze()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=gc(e,r),2===t&&(a=pt(e),0!==a&&(r=a,t=oc(e,a))),1!==t)))throw n=Nl,dc(e,0),sc(e,r),rc(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,Bl,$l);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=jl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bl,$l),t);break}_c(e,Bl,$l);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bl,$l),r);break}_c(e,Bl,$l);break;default:throw Error(o(329))}}}return rc(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Ul,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Al)throw Error(o(327));wc();var t=dt(e,0);if(!(1&t))return rc(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Nl,dc(e,0),sc(e,t),rc(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,$l),rc(e,Ze()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Ze()+500,Fi&&Vi())}}function uc(e){null!==Xl&&0===Xl.tag&&!(6&Al)&&wc();var t=Al;Al|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,!(6&(Al=t))&&Vi()}}function hc(){Ol=kl.current,Ci(kl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&ki();break;case 3:Zo(),Ci(Pi),Ci(Ai),ra();break;case 5:Qo(r);break;case 4:Zo();break;case 13:case 19:Ci(ea);break;case 10:Ao(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Rl=e=kc(e.current,null),Il=Ol=t,Ll=0,Nl=null,Ul=zl=Dl=0,Bl=Fl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Oo=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(To(),ia.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Ml.current=null,null===n||null===n.return){Ll=1,Nl=t,Rl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(!(1&h.mode||0!==d&&11!==d&&15!==d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=gs(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Ll&&(Ll=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,fs(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Wl&&Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(e){t=e,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Ja,null===e?Ja:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||!(268435455&Dl)&&!(268435455&zl)||sc(Pl,Il)}function gc(e,t){var n=Al;Al|=2;var r=pc();for(Pl===e&&Il===t||($l=null,dc(e,t));;)try{vc();break}catch(t){fc(e,t)}if(To(),Al=n,Cl.current=r,null!==Rl)throw Error(o(261));return Pl=null,Il=0,Ll}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Rl=t,Ml.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=qs(n,t,Ol)))return void(Rl=n);if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function _c(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Xl);if(6&Al)throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Pl&&(Rl=Pl=null,Il=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||ql||(ql=!0,Pc(tt,(function(){return wc(),null}))),a=!!(15990&n.flags),15990&n.subtreeFlags||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Ml.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,1028&t.subtreeFlags&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(e){Ec(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ke(),Al=l,bt=s,Tl.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Yl=i),0===(a=e.pendingLanes)&&(Wl=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;!!(1&Yl)&&0!==e.tag&&wc(),1&(a=e.pendingLanes)?e===Zl?Kl++:(Kl=0,Zl=e):Kl=0,Vi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function wc(){if(null!==Xl){var e=xt(Yl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,6&Al)throw Error(o(331));var i=Al;for(Al|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(16&Js.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(ol(h),h===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(2048&(a=Js).flags)switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(2064&s.subtreeFlags&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(2048&(l=Js).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Ec(l,l.return,e)}if(l===s){Js=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Js=_;break e}Js=l.return}}if(Al=i,Vi(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Bo(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Bo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Il&n)===n&&(4===Ll||3===Ll&&(130023424&Il)===Il&&500>Ze()-jl?dc(e,0):Ul|=n),rc(e,t)}function Mc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=No(e,t))&&(vt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Mc(e,n)}function Pc(e,t){return qe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function kc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Oc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case S:return Nc(n.children,i,a,t);case E:s=8,i|=8;break;case C:return(e=Ic(12,n,t,2|i)).elementType=C,e.lanes=a,e;case P:return(e=Ic(13,n,t,i)).elementType=P,e.lanes=a,e;case R:return(e=Ic(19,n,t,i)).elementType=R,e.lanes=a,e;case k:return Dc(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:s=10;break e;case T:s=9;break e;case A:s=11;break e;case I:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ic(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new Fc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ic(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(o),e}function jc(e){if(!e)return Ti;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ni(e,n,t)}return t}function Vc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=jc(null),n=e.current,(o=Fo(r=ec(),i=tc(n))).callback=null!=t?t:null,Bo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(i,t,a))&&(nc(e,i,a,o),jo(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)bs=!0;else{if(!(e.lanes&n||128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),po();break;case 5:Jo(t);break;case 1:Oi(t.type)&&Di(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mi(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mi(ea,1&ea.current),t.flags|=128,null):n&t.child.childLanes?zs(e,t,n):(Mi(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Mi(ea,1&ea.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=!!(131072&e.flags)}else bs=!1,io&&1048576&t.flags&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$s(e,t),e=t.pendingProps;var i=Ii(t,Ai.current);Ro(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($s(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Oc(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ms(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=ws(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Uo(e,t),$o(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return zs(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Mi(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Pi.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Po(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Po(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Io(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),ws(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),$s(e,t),t.tag=1,Oi(r)?(e=!0,Di(t)):e=!1,Ro(t,n),as(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Qc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=Hc(a);s.call(e)}}$c(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Vr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));$c(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&zt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ze()),!(6&Al)&&(Vl=Ze()+500,Vi()))}break;case 13:uc((function(){var t=No(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},wt=function(e){if(13===e.tag){var t=No(e,134217728);null!==t&&nc(t,e,134217728,ec()),Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=No(e,t);null!==n&&nc(n,e,t,ec()),Wc(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,_i,Me,Te,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(o(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(o(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},5338:(e,t,n)=>{"use strict";var r=n(961);t.H=r.createRoot,r.hydrateRoot},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(2551)},5287:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,_(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),P(a,t,i,"",(function(e){return e}))):null!=a&&(M(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=P(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,i,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},k={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=N,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},6540:(e,t,n)=>{"use strict";e.exports=n(5287)},6892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,i=(r=n(3215))&&r.__esModule?r:{default:r},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},s=t.autoprefix=function(e){var t={};return(0,i.default)(e,(function(e,n){var r={};(0,i.default)(e,(function(e,t){var n=a[t];n?r=o({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=s},5268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=n(6540))&&r.__esModule?r:{default:r};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return s=l=a(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(e,i({},l.props,l.state)))},a(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(o.default.Component)};t.default=s},6686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=n(6540))&&r.__esModule?r:{default:r};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return s=l=a(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(e,i({},l.props,l.state)))},a(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(o.default.Component)};t.default=s},9265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(5015)),i=s(n(3215)),o=s(n(1331)),a=s(n(5378));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,i.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},8527:(e,t,n)=>{"use strict";t.H8=void 0;var r=c(n(9265)),i=c(n(6203)),o=c(n(6892)),a=c(n(6686)),s=c(n(5268)),l=c(n(2693));function c(e){return e&&e.__esModule?e:{default:e}}a.default,t.H8=a.default,s.default,l.default;t.Ay=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),l=(0,i.default)(e,s);return(0,o.default)(l)}},2693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},6203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(3215)),i=a(n(8055)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,i.default)(e.default)||{};return t.map((function(t){var i=e[t];return i&&(0,r.default)(i,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],i[t])})),t})),n};t.default=s},7463:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,k(w);else{var t=r(u);null!==t&&L(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(M),M=-1),p=!0;var o=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!P());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&L(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,C=null,M=-1,T=5,A=-1;function P(){return!(t.unstable_now()-A<T)}function R(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?S():(E=!1,C=null)}}else E=!1}if("function"==typeof b)S=function(){b(R)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=R,S=function(){O.postMessage(null)}}else S=function(){v(R,0)};function k(e){C=e,E||(E=!0,S())}function L(e,n){M=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,k(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,L(_,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,k(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},9982:(e,t,n)=>{"use strict";e.exports=n(7463)},2833:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},9739:(e,t)=>{"use strict";function n(e,t,n){void 0===n&&(n=!1),n&&(t/=e,e=1);var r,i=[],o=0,a=0,s=function(){var n=o+t,l=Date.now();if(l<n)return void 0!==r&&clearTimeout(r),void(r=setTimeout(s,n-l));o=l,a=0;for(var c=0,u=i.splice(0,e);c<u.length;c++){var h=u[c];a++,h()}r=i.length?setTimeout(s,t):void 0};return function(n){return new Promise((function(l,c){var u=function(){return Promise.resolve().then(n).then(l).catch(c)},h=Date.now();void 0===r&&h-o>t&&(o=h,a=0),a++<e?u():(i.push(u),void 0===r&&(r=setTimeout(s,o+t-h)))}))}}Object.defineProperty(t,"__esModule",{value:!0}),e.exports=n,t.default=n},5215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>o,__asyncDelegator:()=>x,__asyncGenerator:()=>b,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>u,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>M,__createBinding:()=>d,__decorate:()=>s,__exportStar:()=>f,__extends:()=>i,__generator:()=>h,__importDefault:()=>E,__importStar:()=>S,__makeTemplateObject:()=>w,__metadata:()=>c,__param:()=>l,__read:()=>m,__rest:()=>a,__spread:()=>g,__spreadArrays:()=>v,__values:()=>p});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function M(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},4100:function(e,t){!function(e){"use strict";class t{constructor(e){this.controller_=e}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(e){this.controller_.viewProps.set("hidden",e)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(e){this.target=e}}class r extends n{constructor(e,t,n,r){super(e),this.value=t,this.presetKey=n,this.last=null==r||r}}class i extends n{constructor(e,t,n){super(e),this.value=t,this.presetKey=n}}class o extends n{constructor(e,t){super(e),this.expanded=t}}class a extends n{constructor(e,t){super(e),this.index=t}}function s(e){return null==e}function l(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function c(e,t){let n=e;do{const e=Object.getOwnPropertyDescriptor(n,t);if(e&&(void 0!==e.set||!0===e.writable))return!0;n=Object.getPrototypeOf(n)}while(null!==n);return!1}const u={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class h{static alreadyDisposed(){return new h({type:"alreadydisposed"})}static notBindable(){return new h({type:"notbindable"})}static propertyNotFound(e){return new h({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new h({type:"shouldneverhappen"})}constructor(e){var t;this.message=null!==(t=u[e.type](e.context))&&void 0!==t?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}}class d{constructor(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=null!=n?n:t}static isBindable(e){return null!==e&&("object"==typeof e||"function"==typeof e)}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(e){this.obj_[this.key_]=e}writeProperty(e,t){const n=this.read();if(!d.isBindable(n))throw h.notBindable();if(!(e in n))throw h.propertyNotFound(e);n[e]=t}}class f extends t{get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get title(){var e;return null!==(e=this.controller_.valueController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller_.valueController.props.set("title",e)}on(e,t){const r=t.bind(this);return this.controller_.valueController.emitter.on(e,(()=>{r(new n(this))})),this}}class p{constructor(){this.observers_={}}on(e,t){let n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this}off(e,t){const n=this.observers_[e];return n&&(this.observers_[e]=n.filter((e=>e.handler!==t))),this}emit(e,t){const n=this.observers_[e];n&&n.forEach((e=>{e.handler(t)}))}}const m="tp";function g(e){return(t,n)=>[m,"-",e,"v",t?`_${t}`:"",n?`-${n}`:""].join("")}function v(e){return e.rawValue}function y(e,t){var n,r;e.emitter.on("change",(n=v,r=t,e=>r(n(e)))),t(e.rawValue)}function b(e,t,n){y(e.value(t),n)}function x(e,t){return n=>{!function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}(e,t,n)}}function _(e,t){y(e,(e=>{t.textContent=null!=e?e:""}))}const w=g("btn");class S{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(w()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("button");n.classList.add(w("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=e.createElement("div");r.classList.add(w("t")),_(t.props.value("title"),r),this.buttonElement.appendChild(r)}}class E{constructor(e,t){this.emitter=new p,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new S(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class C{constructor(e,t){var n;this.constraint_=null==t?void 0:t.constraint,this.equals_=null!==(n=null==t?void 0:t.equals)&&void 0!==n?n:(e,t)=>e===t,this.emitter=new p,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=null!=t?t:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,i=this.rawValue_;(!this.equals_(i,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:r,sender:this}))}}class M{constructor(e){this.emitter=new p,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=null!=t?t:{forceEmit:!1,last:!0},r=this.value_;(r!==e||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))}}function T(e,t){const n=null==t?void 0:t.constraint,r=null==t?void 0:t.equals;return n||r?new C(e,t):new M(e)}class A{constructor(e){this.emitter=new p,this.valMap_=e;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",(()=>{this.emitter.emit("change",{key:e,sender:this})}))}static createCore(e){return Object.keys(e).reduce(((t,n)=>Object.assign(t,{[n]:T(e[n])})),{})}static fromObject(e){const t=this.createCore(e);return new A(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}function P(e){return t=>n=>{if(!t&&void 0===n)return{succeeded:!1,value:void 0};if(t&&void 0===n)return{succeeded:!0,value:void 0};const r=e(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function R(e){return{custom:t=>P(t)(e),boolean:P((e=>"boolean"==typeof e?e:void 0))(e),number:P((e=>"number"==typeof e?e:void 0))(e),string:P((e=>"string"==typeof e?e:void 0))(e),function:P((e=>"function"==typeof e?e:void 0))(e),constant:t=>P((e=>e===t?t:void 0))(e),raw:P((e=>e))(e),object:t=>P((e=>{if(null!==(n=e)&&"object"==typeof n)return function(e,t){return Object.keys(t).reduce(((n,r)=>{if(void 0===n)return;const i=(0,t[r])(e[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0}),{})}(e,t);var n}))(e),array:t=>P((e=>{if(Array.isArray(e))return n=t,e.reduce(((e,t)=>{if(void 0===e)return;const r=n(t);return r.succeeded&&void 0!==r.value?[...e,r.value]:void 0}),[]);var n}))(e)}}const I={optional:R(!0),required:R(!1)};function O(e,t){const n=I.required.object(t)(e);return n.succeeded?n.value:void 0}function k(e){console.warn([`Missing '${e.key}' of ${e.target} in ${e.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}class L{constructor(e){this.value_=e}static create(e){return[new L(e),(t,n)=>{e.setRawValue(t,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const N=g("");function D(e,t){return x(e,N(void 0,t))}class z extends A{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=L.create(T(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,n,r;const i=null!=e?e:{};return new z(A.createCore({disabled:null!==(t=i.disabled)&&void 0!==t&&t,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n,parent:null!==(r=i.parent)&&void 0!==r?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){y(this.globalDisabled_,D(e,"disabled")),b(this,"hidden",D(e,"hidden"))}bindDisabled(e){y(this.globalDisabled_,(t=>{e.disabled=t}))}bindTabIndex(e){y(this.globalDisabled_,(t=>{e.tabIndex=t?-1:0}))}handleDispose(e){this.value("disposed").emitter.on("change",(t=>{t&&e()}))}getGlobalDisabled_(){const e=this.get("parent");return!!e&&e.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const n=e.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const U=g(""),F={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class B{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((e=>{t.classList.remove(U(void 0,F[e]))})),this.blade.get("positions").forEach((e=>{t.classList.add(U(void 0,F[e]))}))})),this.viewProps.handleDispose((()=>{!function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}(t)}))}get parent(){return this.parent_}set parent(e){this.parent_=e,"parent"in this.viewProps.valMap_?this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null):k({key:"parent",target:z.name,place:"BladeController.parent"})}}const j="http://www.w3.org/2000/svg";function V(e){e.offsetHeight}function $(e){return void 0!==e.ontouchstart}function H(){return globalThis.document}const G={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function W(e,t){const n=e.createElementNS(j,"svg");return n.innerHTML=G[t],n}function q(e,t,n){e.insertBefore(t,e.children[n])}function X(e){e.parentElement&&e.parentElement.removeChild(e)}function Y(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function K(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}const Z=g("lbl");class J{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Z()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Z("l")),b(t.props,"label",(t=>{s(t)?this.element.classList.add(Z(void 0,"nol")):(this.element.classList.remove(Z(void 0,"nol")),function(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}(n),n.appendChild(function(e,t){const n=e.createDocumentFragment();return t.split("\n").map((t=>e.createTextNode(t))).forEach(((t,r)=>{r>0&&n.appendChild(e.createElement("br")),n.appendChild(t)})),n}(e,t)))})),this.element.appendChild(n),this.labelElement=n;const r=e.createElement("div");r.classList.add(Z("v")),this.element.appendChild(r),this.valueElement=r}}class Q extends B{constructor(e,t){const n=t.valueController.viewProps;super(Object.assign(Object.assign({},t),{view:new J(e,{props:t.props,viewProps:n}),viewProps:n})),this.props=t.props,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const ee={id:"button",type:"blade",accept(e){const t=I,n=O(e,{title:t.required.string,view:t.required.constant("button"),label:t.optional.string});return n?{params:n}:null},controller:e=>new Q(e.document,{blade:e.blade,props:A.fromObject({label:e.params.label}),valueController:new E(e.document,{props:A.fromObject({title:e.params.title}),viewProps:e.viewProps})}),api:e=>e.controller instanceof Q&&e.controller.valueController instanceof E?new f(e.controller):null};class te extends B{constructor(e){super(e),this.value=e.value}}function ne(){return new A({positions:T([],{equals:l})})}class re extends A{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=A.createCore(t);return new re(n)}get styleExpanded(){var e;return null!==(e=this.get("temporaryExpanded"))&&void 0!==e?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!s(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const n=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};b(this,"expanded",n),b(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function ie(e,t){t.style.height=e.styleHeight}function oe(e,t){e.value("expanded").emitter.on("beforechange",(()=>{if(e.set("completed",!1),s(e.get("expandedHeight"))){const n=function(e,t){let n=0;return function(e,t){const n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}(t,(()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),V(t),n=t.clientHeight,e.set("temporaryExpanded",null),V(t)})),n}(e,t);n>0&&e.set("expandedHeight",n)}e.set("shouldFixHeight",!0),V(t)})),e.emitter.on("change",(()=>{ie(e,t)})),ie(e,t),t.addEventListener("transitionend",(t=>{"height"===t.propertyName&&e.cleanUpTransition()}))}class ae extends t{constructor(e,t){super(e),this.rackApi_=t}}class se{constructor(e){this.emitter=new p,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw h.shouldNeverHappen();const n=void 0!==t?t:this.items_.length;this.items_.splice(n,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((e=>{this.cache_.add(e)}))),this.emitter.emit("add",{index:n,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}class le extends t{constructor(e){super(e),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new p,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(e){const t=e.sender.target.read();this.emitter_.emit("change",{event:new r(this,t,this.controller_.binding.target.presetKey,e.options.last)})}}class ce extends Q{constructor(e,t){super(e,t),this.binding=t.binding}}class ue extends t{constructor(e){super(e),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new p,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(e){const t=e.sender.target.read();this.emitter_.emit("update",{event:new i(this,t,this.controller_.binding.target.presetKey)})}}class he extends Q{constructor(e,t){super(e,t),this.binding=t.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function de(e){return e instanceof me?e.apiSet_:e instanceof ae?e.rackApi_.apiSet_:null}function fe(e,t){const n=e.find((e=>e.controller_===t));if(!n)throw h.shouldNeverHappen();return n}function pe(e,t,n){if(!d.isBindable(e))throw h.notBindable();return new d(e,t,n)}class me extends t{constructor(e,t){super(e),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new p,this.apiSet_=new se(de),this.pool_=t;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((e=>{this.setUpApi_(e)}))}get children(){return this.controller_.rack.children.map((e=>fe(this.apiSet_,e)))}addInput(e,t,n){const r=null!=n?n:{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(i,pe(e,t,r.presetKey),r),a=new le(o);return this.add(a,r.index)}addMonitor(e,t,n){const r=null!=n?n:{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(i,pe(e,t),r),a=new ue(o);return this.add(a,r.index)}addFolder(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}(this,e)}addButton(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}(this,e)}addSeparator(e){return function(e,t){const n=null!=t?t:{};return e.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}(this,e)}addTab(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}(this,e)}add(e,t){this.controller_.rack.add(e.controller_,t);const n=this.apiSet_.find((t=>t.controller_===e.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(e),e}remove(e){this.controller_.rack.remove(e.controller_)}addBlade(e){const t=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(t,e),r=this.pool_.createBladeApi(n);return this.add(r,e.index)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}setUpApi_(e){this.apiSet_.find((t=>t.controller_===e))||this.apiSet_.add(this.pool_.createBladeApi(e))}onRackAdd_(e){this.setUpApi_(e.bladeController)}onRackRemove_(e){if(e.isRoot){const t=fe(this.apiSet_,e.bladeController);this.apiSet_.remove(t)}}onRackInputChange_(e){const t=e.bladeController;if(t instanceof ce){const n=fe(this.apiSet_,t),i=t.binding;this.emitter_.emit("change",{event:new r(n,i.target.read(),i.target.presetKey,e.options.last)})}else if(t instanceof te){const n=fe(this.apiSet_,t);this.emitter_.emit("change",{event:new r(n,t.value.rawValue,void 0,e.options.last)})}}onRackMonitorUpdate_(e){if(!(e.bladeController instanceof he))throw h.shouldNeverHappen();const t=fe(this.apiSet_,e.bladeController),n=e.bladeController.binding;this.emitter_.emit("update",{event:new i(t,n.target.read(),n.target.presetKey)})}}class ge extends ae{constructor(e,t){super(e,new me(e.rackController,t)),this.emitter_=new p,this.controller_.foldable.value("expanded").emitter.on("change",(e=>{this.emitter_.emit("fold",{event:new o(this,e.sender.rawValue)})})),this.rackApi_.on("change",(e=>{this.emitter_.emit("change",{event:e})})),this.rackApi_.on("update",(e=>{this.emitter_.emit("update",{event:e})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(e){this.controller_.foldable.set("expanded",e)}get title(){return this.controller_.props.get("title")}set title(e){this.controller_.props.set("title",e)}get children(){return this.rackApi_.children}addInput(e,t,n){return this.rackApi_.addInput(e,t,n)}addMonitor(e,t,n){return this.rackApi_.addMonitor(e,t,n)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}}class ve extends B{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}}class ye{constructor(e,t){const n=g(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}}function be(e){return e instanceof we?e.rack:e instanceof ve?e.rackController.rack:null}function xe(e){const t=be(e);return t?t.bcSet_:null}class _e{constructor(e){var t,n;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new p,this.blade_=null!==(t=e.blade)&&void 0!==t?t:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new se(xe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var n;null===(n=e.parent)||void 0===n||n.remove(e),c(e,"parent")?e.parent=this:(e.parent_=this,k({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(e,t)}remove(e){c(e,"parent")?e.parent=null:(e.parent_=null,k({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter((t=>t instanceof e))}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,isRoot:t,sender:this}),!t)return;const n=e.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof ce)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof he)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof te)n.value.emitter.on("change",this.onChildValueChange_);else{const e=be(n);if(e){const t=e.emitter;t.on("layout",this.onDescendantLayout_),t.on("inputchange",this.onDescendantInputChange_),t.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,isRoot:t,sender:this}),!t)return;const n=e.item;if(n instanceof ce)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof he)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof te)n.value.emitter.off("change",this.onChildValueChange_);else{const e=be(n);if(e){const t=e.emitter;t.off("layout",this.onDescendantLayout_),t.off("inputchange",this.onDescendantInputChange_),t.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const e=this.bcSet_.items.filter((e=>!e.viewProps.get("hidden"))),t=e[0],n=e[e.length-1];this.bcSet_.items.forEach((e=>{const r=[];e===t&&(r.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),e===n&&(r.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||r.push("verylast")),e.blade.set("positions",r)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((e=>e.viewProps.get("disposed"))).forEach((e=>{this.bcSet_.remove(e)}))}onChildInputChange_(e){const t=function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof ce&&r.binding===t)return r}return null}(this.find(ce),e.sender);if(!t)throw h.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}onChildMonitorUpdate_(e){const t=function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof he&&r.binding===t)return r}return null}(this.find(he),e.sender);if(!t)throw h.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:t,sender:this})}onChildValueChange_(e){const t=function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof te&&r.value===t)return r}return null}(this.find(te),e.sender);if(!t)throw h.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}onDescendantLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(e){this.emitter.emit("inputchange",{bladeController:e.bladeController,options:e.options,sender:this})}onDescendantMonitorUpdate_(e){this.emitter.emit("monitorupdate",{bladeController:e.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class we extends B{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new ye(e,{viewName:"brk",viewProps:t.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new _e({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let e=this.rack.children.length-1;e>=0;e--)this.rack.children[e].viewProps.set("disposed",!0)}))}onRackAdd_(e){e.isRoot&&q(this.view.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.isRoot&&X(e.bladeController.view.element)}}const Se=g("cnt");class Ee{constructor(e,t){var n;this.className_=g(null!==(n=t.viewName)&&void 0!==n?n:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Se()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),b(this.foldable_,"completed",x(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),b(t.props,"title",(e=>{s(e)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(this.className_("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(this.className_("t")),_(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=t.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Ce extends ve{constructor(e,t){var n;const r=re.create(null===(n=t.expanded)||void 0===n||n),i=new we(e,{blade:t.blade,root:t.root,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:i,view:new Ee(e,{containerElement:i.view.element,foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,oe(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Me={id:"folder",type:"blade",accept(e){const t=I,n=O(e,{title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean});return n?{params:n}:null},controller:e=>new Ce(e.document,{blade:e.blade,expanded:e.params.expanded,props:A.fromObject({title:e.params.title}),viewProps:e.viewProps}),api:e=>e.controller instanceof Ce?new ge(e.controller,e.pool):null};class Te extends te{constructor(e,t){const n=t.valueController.viewProps;super(Object.assign(Object.assign({},t),{value:t.valueController.value,view:new J(e,{props:t.props,viewProps:n}),viewProps:n})),this.props=t.props,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Ae extends t{}const Pe=g("spr");class Re{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Pe()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("hr");n.classList.add(Pe("r")),this.element.appendChild(n)}}class Ie extends B{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new Re(e,{viewProps:t.viewProps})}))}}const Oe={id:"separator",type:"blade",accept(e){const t=O(e,{view:I.required.constant("separator")});return t?{params:t}:null},controller:e=>new Ie(e.document,{blade:e.blade,viewProps:e.viewProps}),api:e=>e.controller instanceof Ie?new Ae(e.controller):null},ke=g("tbi");class Le{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ke()),t.viewProps.bindClassModifiers(this.element),b(t.props,"selected",(e=>{e?this.element.classList.add(ke(void 0,"sel")):this.element.classList.remove(ke(void 0,"sel"))}));const n=e.createElement("button");n.classList.add(ke("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=e.createElement("div");r.classList.add(ke("t")),_(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class Ne{constructor(e,t){this.emitter=new p,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Le(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class De{constructor(e,t){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Ne(e,{props:t.itemProps,viewProps:z.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new we(e,{blade:ne(),viewProps:z.create()}),this.props=t.props,b(this.props,"selected",(e=>{this.itemController.props.set("selected",e),this.contentController.viewProps.set("hidden",!e)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class ze{constructor(e,t){this.controller_=e,this.rackApi_=t}get title(){var e;return null!==(e=this.controller_.itemController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller_.itemController.props.set("title",e)}get selected(){return this.controller_.props.get("selected")}set selected(e){this.controller_.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addInput(e,t,n){return this.rackApi_.addInput(e,t,n)}addMonitor(e,t,n){return this.rackApi_.addMonitor(e,t,n)}addBlade(e){return this.rackApi_.addBlade(e)}}class Ue extends ae{constructor(e,t){super(e,new me(e.rackController,t)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new p,this.pageApiMap_=new Map,this.rackApi_.on("change",(e=>{this.emitter_.emit("change",{event:e})})),this.rackApi_.on("update",(e=>{this.emitter_.emit("update",{event:e})})),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((e=>{this.setUpPageApi_(e)}))}get pages(){return this.controller_.pageSet.items.map((e=>{const t=this.pageApiMap_.get(e);if(!t)throw h.shouldNeverHappen();return t}))}addPage(e){const t=this.controller_.view.element.ownerDocument,n=new De(t,{itemProps:A.fromObject({selected:!1,title:e.title}),props:A.fromObject({selected:!1})});this.controller_.add(n,e.index);const r=this.pageApiMap_.get(n);if(!r)throw h.shouldNeverHappen();return r}removePage(e){this.controller_.remove(e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}setUpPageApi_(e){const t=this.rackApi_.apiSet_.find((t=>t.controller_===e.contentController));if(!t)throw h.shouldNeverHappen();const n=new ze(e,t);this.pageApiMap_.set(e,n)}onPageAdd_(e){this.setUpPageApi_(e.item)}onPageRemove_(e){if(!this.pageApiMap_.get(e.item))throw h.shouldNeverHappen();this.pageApiMap_.delete(e.item)}onSelect_(e){this.emitter_.emit("select",{event:new a(this,e.rawValue)})}}class Fe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=T(!0),this.selectedIndex=T(-1),this.items_=[]}add(e,t){const n=null!=t?t:this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const e=this.items_.findIndex((e=>e.rawValue));e<0?(this.items_.forEach(((e,t)=>{e.rawValue=0===t})),this.selectedIndex.rawValue=0):(this.items_.forEach(((t,n)=>{t.rawValue=n===e})),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex((t=>t===e.sender));this.items_.forEach(((e,n)=>{e.rawValue=n===t})),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const Be=g("tab");class je{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Be(),Se()),t.viewProps.bindClassModifiers(this.element),y(t.empty,x(this.element,Be(void 0,"nop")));const n=e.createElement("div");n.classList.add(Be("t")),this.element.appendChild(n),this.itemsElement=n;const r=e.createElement("div");r.classList.add(Be("i")),this.element.appendChild(r);const i=t.contentsElement;i.classList.add(Be("c")),this.element.appendChild(i),this.contentsElement=i}}class Ve extends ve{constructor(e,t){const n=new we(e,{blade:t.blade,viewProps:t.viewProps}),r=new Fe;super({blade:t.blade,rackController:n,view:new je(e,{contentsElement:n.view.element,empty:r.empty,viewProps:t.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new se((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=r}get pageSet(){return this.pageSet_}add(e,t){this.pageSet_.add(e,t)}remove(e){this.pageSet_.remove(this.pageSet_.items[e])}onPageAdd_(e){const t=e.item;q(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(t.contentController,e.index),this.tab.add(t.props.value("selected"))}onPageRemove_(e){const t=e.item;X(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.rackController.rack.remove(t.contentController),this.tab.remove(t.props.value("selected"))}}const $e={id:"tab",type:"blade",accept(e){const t=I,n=O(e,{pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(e){const t=new Ve(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach((n=>{const r=new De(e.document,{itemProps:A.fromObject({selected:!1,title:n.title}),props:A.fromObject({selected:!1})});t.add(r)})),t},api:e=>e.controller instanceof Ve?new Ue(e.controller,e.pool):null};class He{constructor(){this.disabled=!1,this.emitter=new p}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ge{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new p,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class We{constructor(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new p,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}read(){const e=this.target.read();void 0!==e&&(this.value.rawValue=this.reader(e))}write_(e){this.writer(this.target,e)}onValueChange_(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})}}function qe(e,t){for(;e.length<t;)e.push(void 0)}function Xe(e){const t=[];return qe(t,e),T(t)}function Ye(e){const t=e.indexOf(void 0);return t<0?e:e.slice(0,t)}class Ke{constructor(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new p,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const e=this.target.read();if(void 0===e)return;const t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=function(e,t){const n=[...Ye(e),t];return n.length>e.length?n.splice(0,n.length-e.length):qe(n,e.length),n}(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(e){this.read()}}class Ze{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce(((e,t)=>t.constrain(e)),e)}}function Je(e,t){if(e instanceof t)return e;if(e instanceof Ze){const n=e.constraints.reduce(((e,n)=>e||(n instanceof t?n:null)),null);if(n)return n}return null}class Qe{constructor(e){this.values=A.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)}}class et{constructor(e){this.values=A.fromObject({options:e})}get options(){return this.values.get("options")}constrain(e){const t=this.values.get("options");return 0===t.length||t.filter((t=>t.value===e)).length>0?e:t[0].value}}class tt{constructor(e){this.values=A.fromObject({max:e.max,min:e.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(e){const t=this.values.get("max"),n=this.values.get("min");let r=e;return s(n)||(r=Math.max(r,n)),s(t)||(r=Math.min(r,t)),r}}class nt{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step;return t+Math.round((e-t)/this.step)*this.step}}const rt=g("lst");class it{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(rt()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("select");n.classList.add(rt("s")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=e.createElement("div");r.classList.add(rt("m")),r.appendChild(W(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,b(this.props_,"options",(t=>{Y(this.selectElement),t.forEach((t=>{const n=e.createElement("option");n.textContent=t.text,this.selectElement.appendChild(n)})),this.update_()}))}update_(){const e=this.props_.get("options").map((e=>e.value));this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ot{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new it(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}}const at=g("pop");class st{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(at()),t.viewProps.bindClassModifiers(this.element),y(t.shows,x(this.element,at(void 0,"v")))}}class lt{constructor(e,t){this.shows=T(!1),this.viewProps=t.viewProps,this.view=new st(e,{shows:this.shows,viewProps:this.viewProps})}}const ct=g("txt");class ut{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ct()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const n=e.createElement("input");n.classList.add(ct("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class ht{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new ut(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value,n=this.parser_(t);s(n)||(this.value.rawValue=n),this.view.refresh()}}function dt(e){return"false"!==e&&!!e}function ft(e){return function(e){return String(e)}(e)}class pt{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const mt={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class gt{constructor(e,t,n){this.left=t,this.operator=e,this.right=n}evaluate(){const e=mt[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const vt={"+":e=>e,"-":e=>-e,"~":e=>~e};class yt{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=vt[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function bt(e){return(t,n)=>{for(let r=0;r<e.length;r++){const i=e[r](t,n);if(""!==i)return i}return""}}function xt(e,t){var n;const r=e.substr(t).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function _t(e,t){var n;const r=e.substr(t).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function wt(e,t){const n=e.substr(t,1);if(t+=1,"e"!==n.toLowerCase())return"";const r=function(e,t){const n=_t(e,t);if(""!==n)return n;const r=e.substr(t,1);if("-"!==r&&"+"!==r)return"";const i=_t(e,t+=1);return""===i?"":r+i}(e,t);return""===r?"":n+r}function St(e,t){const n=e.substr(t,1);if("0"===n)return n;const r=function(e,t){const n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}(e,t);return t+=r.length,""===r?"":r+_t(e,t)}const Et=bt([function(e,t){const n=St(e,t);if(t+=n.length,""===n)return"";const r=e.substr(t,1);if(t+=r.length,"."!==r)return"";const i=_t(e,t);return n+r+i+wt(e,t+=i.length)},function(e,t){const n=e.substr(t,1);if(t+=n.length,"."!==n)return"";const r=_t(e,t);return t+=r.length,""===r?"":n+r+wt(e,t)},function(e,t){const n=St(e,t);return t+=n.length,""===n?"":n+wt(e,t)}]);const Ct=bt([function(e,t){const n=e.substr(t,2);if(t+=n.length,"0b"!==n.toLowerCase())return"";const r=function(e,t){var n;const r=e.substr(t).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(e,t);return""===r?"":n+r},function(e,t){const n=e.substr(t,2);if(t+=n.length,"0o"!==n.toLowerCase())return"";const r=function(e,t){var n;const r=e.substr(t).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(e,t);return""===r?"":n+r},function(e,t){const n=e.substr(t,2);if(t+=n.length,"0x"!==n.toLowerCase())return"";const r=function(e,t){var n;const r=e.substr(t).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}(e,t);return""===r?"":n+r}]),Mt=bt([Ct,Et]);function Tt(e,t){var n;return null!==(n=function(e,t){const n=Mt(e,t);return t+=n.length,""===n?null:{evaluable:new pt(n),cursor:t}}(e,t))&&void 0!==n?n:function(e,t){const n=e.substr(t,1);if(t+=n.length,"("!==n)return null;const r=Rt(e,t);if(!r)return null;t=r.cursor,t+=xt(e,t).length;const i=e.substr(t,1);return t+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:t}}(e,t)}function At(e,t,n){n+=xt(t,n).length;const r=e.filter((e=>t.startsWith(e,n)))[0];return r?(n+=r.length,{cursor:n+=xt(t,n).length,operator:r}):null}const Pt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((e,t)=>function(e,t){return(n,r)=>{const i=e(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=At(t,n,r);if(!i)break;r=i.cursor;const a=e(n,r);if(!a)return null;r=a.cursor,o=new gt(i.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}(e,t)),(function e(t,n){const r=Tt(t,n);if(r)return r;const i=t.substr(n,1);if(n+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const o=e(t,n);return o?{cursor:n=o.cursor,evaluable:new yt(i,o.evaluable)}:null}));function Rt(e,t){return t+=xt(e,t).length,Pt(e,t)}function It(e){var t;const n=function(e){const t=Rt(e,0);return t?t.cursor+xt(e,t.cursor).length!==e.length?null:t.evaluable:null}(e);return null!==(t=null==n?void 0:n.evaluate())&&void 0!==t?t:null}function Ot(e){if("number"==typeof e)return e;if("string"==typeof e){const t=It(e);if(!s(t))return t}return 0}function kt(e){return String(e)}function Lt(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}const Nt=Lt(0);function Dt(e){return Nt(e)+"%"}function zt(e){return String(e)}function Ut(e){return e}function Ft({primary:e,secondary:t,forward:n,backward:r}){let i=!1;function o(e){i||(i=!0,e(),i=!1)}e.emitter.on("change",(r=>{o((()=>{t.setRawValue(n(e,t),r.options)}))})),t.emitter.on("change",(i=>{o((()=>{e.setRawValue(r(e,t),i.options)})),o((()=>{t.setRawValue(n(e,t),i.options)}))})),o((()=>{t.setRawValue(n(e,t),{forceEmit:!1,last:!0})}))}function Bt(e,t){const n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function jt(e){return{altKey:e.altKey,downKey:"ArrowDown"===e.key,shiftKey:e.shiftKey,upKey:"ArrowUp"===e.key}}function Vt(e){return{altKey:e.altKey,downKey:"ArrowLeft"===e.key,shiftKey:e.shiftKey,upKey:"ArrowRight"===e.key}}function $t(e){return function(e){return"ArrowUp"===e||"ArrowDown"===e}(e)||"ArrowLeft"===e||"ArrowRight"===e}function Ht(e,t){var n,r;const i=t.ownerDocument.defaultView,o=t.getBoundingClientRect();return{x:e.pageX-((null!==(n=i&&i.scrollX)&&void 0!==n?n:0)+o.left),y:e.pageY-((null!==(r=i&&i.scrollY)&&void 0!==r?r:0)+o.top)}}class Gt{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new p,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Ht(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Ht(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Ht(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const n=null!==(t=e.targetTouches.item(0))&&void 0!==t?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}function Wt(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}function qt(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Xt(e,t,n){return Math.min(Math.max(e,t),n)}function Yt(e,t){return(e%t+t)%t}const Kt=g("txt");class Zt{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Kt(),Kt(void 0,"num")),t.arrayPosition&&this.element.classList.add(Kt(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(Kt("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Kt()),this.inputElement.classList.add(Kt("i"));const r=e.createElement("div");r.classList.add(Kt("k")),this.element.appendChild(r),this.knobElement=r;const i=e.createElementNS(j,"svg");i.classList.add(Kt("g")),this.knobElement.appendChild(i);const o=e.createElementNS(j,"path");o.classList.add(Kt("gb")),i.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(j,"path");a.classList.add(Kt("gh")),i.appendChild(a),this.guideHeadElem_=a;const s=e.createElement("div");s.classList.add(g("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(null===e.rawValue)return void this.element.classList.remove(Kt(void 0,"drg"));this.element.classList.add(Kt(void 0,"drg"));const t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),r=Xt(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Jt{constructor(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=null!==(n=t.sliderProps)&&void 0!==n?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=T(null),this.view=new Zt(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new Gt(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,n;const r=null===(t=this.sliderProps_)||void 0===t?void 0:t.get("minValue"),i=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("maxValue");let o=e;return void 0!==r&&(o=Math.max(o,r)),void 0!==i&&(o=Math.min(o,i)),o}onInputChange_(e){const t=e.currentTarget.value,n=this.parser_(t);s(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(e){const t=Bt(this.baseStep_,jt(e));0!==t&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){0!==Bt(this.baseStep_,jt(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Qt=g("sld");class en{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Qt()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Qt("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=e.createElement("div");r.classList.add(Qt("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=Xt(Wt(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class tn{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new en(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Gt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(Wt(Xt(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Bt(this.baseStep_,Vt(e));0!==t&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){0!==Bt(this.baseStep_,Vt(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const nn=g("sldtxt");class rn{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(nn());const n=e.createElement("div");n.classList.add(nn("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(nn("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class on{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new tn(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Jt(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new rn(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function an(e,t){e.write(t)}function sn(e){const t=I;return Array.isArray(e)?t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))(e).value:"object"==typeof e?t.required.raw(e).value:void 0}function ln(e){if("inline"===e||"popup"===e)return e}function cn(e){const t=I;return t.required.object({max:t.optional.number,min:t.optional.number,step:t.optional.number})(e).value}function un(e){if(Array.isArray(e))return e;const t=[];return Object.keys(e).forEach((n=>{t.push({text:n,value:e[n]})})),t}function hn(e){return s(e)?null:new et(un(e))}function dn(e,t){const n=e&&Je(e,nt);return n?qt(n.step):Math.max(qt(t),2)}function fn(e){const t=function(e){const t=e?Je(e,nt):null;return t?t.step:null}(e);return null!=t?t:1}function pn(e,t){var n;const r=e&&Je(e,nt),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:t);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}const mn=g("ckb");class gn{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("label");n.classList.add(mn("l")),this.element.appendChild(n);const r=e.createElement("input");r.classList.add(mn("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const i=e.createElement("div");i.classList.add(mn("w")),n.appendChild(i);const o=W(e,"check");i.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class vn{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new gn(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked}}const yn={id:"input-bool",type:"input",accept:(e,t)=>{if("boolean"!=typeof e)return null;const n=O(t,{options:I.optional.custom(sn)});return n?{initialValue:e,params:n}:null},binding:{reader:e=>dt,constraint:e=>function(e){const t=[],n=hn(e.options);return n&&t.push(n),new Ze(t)}(e.params),writer:e=>an},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&Je(r,et);return i?new ot(t,{props:new A({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new vn(t,{value:n,viewProps:e.viewProps})}},bn=g("col");class xn{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(bn()),t.foldable.bindExpandedClass(this.element,bn(void 0,"expanded")),b(t.foldable,"completed",x(this.element,bn(void 0,"cpl")));const n=e.createElement("div");n.classList.add(bn("h")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(bn("s")),n.appendChild(r),this.swatchElement=r;const i=e.createElement("div");if(i.classList.add(bn("t")),n.appendChild(i),this.textElement=i,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(bn("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}function _n(e,t,n){const r=Yt(e,360),i=Xt(t/100,0,1),o=Xt(n/100,0,1),a=o*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a;let c,u,h;return[c,u,h]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(c+l),255*(u+l),255*(h+l)]}function wn(e){return[e[0],e[1],e[2]]}function Sn(e,t){return[e[0],e[1],e[2],t]}const En={hsl:{hsl:(e,t,n)=>[e,t,n],hsv:function(e,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[e,0!==r?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/200]},rgb:function(e,t,n){const r=(e%360+360)%360,i=Xt(t/100,0,1),o=Xt(n/100,0,1),a=(1-Math.abs(2*o-1))*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a/2;let c,u,h;return[c,u,h]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(c+l),255*(u+l),255*(h+l)]}},hsv:{hsl:function(e,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[e,0!==r?t*n/r:0,n*(200-t)/200]},hsv:(e,t,n)=>[e,t,n],rgb:_n},rgb:{hsl:function(e,t,n){const r=Xt(e/255,0,1),i=Xt(t/255,0,1),o=Xt(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s;let c=0,u=0;const h=(s+a)/2;return 0!==l&&(u=l/(1-Math.abs(a+s-1)),c=r===a?(i-o)/l:i===a?2+(o-r)/l:4+(r-i)/l,c=c/6+(c<0?1:0)),[360*c,100*u,100*h]},hsv:function(e,t,n){const r=Xt(e/255,0,1),i=Xt(t/255,0,1),o=Xt(n/255,0,1),a=Math.max(r,i,o),s=a-Math.min(r,i,o);let l;return l=0===s?0:a===r?((i-o)/s%6+6)%6*60:a===i?60*((o-r)/s+2):60*((r-i)/s+4),[l,100*(0===a?0:s/a),100*a]},rgb:(e,t,n)=>[e,t,n]}};function Cn(e,t){return["float"===t?1:"rgb"===e?255:360,"float"===t?1:"rgb"===e?255:100,"float"===t?1:"rgb"===e?255:100]}function Mn(e,t,n,r){const i=Cn(t,n),o=Cn(t,r);return e.map(((e,t)=>e/i[t]*o[t]))}function Tn(e,t){return"object"==typeof e&&!s(e)&&t in e&&"number"==typeof e[t]}class An{static black(e="int"){return new An([0,0,0],"rgb",e)}static fromObject(e,t="int"){const n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new An(n,"rgb",t)}static toRgbaObject(e,t="int"){return e.toRgbaObject(t)}static isRgbColorObject(e){return Tn(e,"r")&&Tn(e,"g")&&Tn(e,"b")}static isRgbaColorObject(e){return this.isRgbColorObject(e)&&Tn(e,"a")}static isColorObject(e){return this.isRgbColorObject(e)}static equals(e,t){if(e.mode!==t.mode)return!1;const n=e.comps_,r=t.comps_;for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1;return!0}constructor(e,t,n="int"){this.mode=t,this.type=n,this.comps_=function(e,t,n){var r;const i=Cn(t,n);return["rgb"===t?Xt(e[0],0,i[0]):(o=e[0],a=i[0],o===a?a:Yt(o,a)),Xt(e[1],0,i[1]),Xt(e[2],0,i[2]),Xt(null!==(r=e[3])&&void 0!==r?r:1,0,1)];var o,a}(e,t,n)}getComponents(e,t="int"){return Sn(function(e,t,n){const r=Mn(e,t.mode,t.type,"int");return Mn(En[t.mode][n.mode](...r),n.mode,"int",n.type)}(wn(this.comps_),{mode:this.mode,type:this.type},{mode:null!=e?e:this.mode,type:t}),this.comps_[3])}toRgbaObject(e="int"){const t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Pn=g("colp");class Rn{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Pn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Pn("hsv"));const r=e.createElement("div");r.classList.add(Pn("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const i=e.createElement("div");i.classList.add(Pn("h")),this.hPaletteView_=t.hPaletteView,i.appendChild(this.hPaletteView_.element),n.appendChild(i),this.element.appendChild(n);const o=e.createElement("div");if(o.classList.add(Pn("rgb")),this.textView_=t.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const n=e.createElement("div");n.classList.add(Pn("a"));const r=e.createElement("div");r.classList.add(Pn("ap")),r.appendChild(this.alphaViews_.palette.element),n.appendChild(r);const i=e.createElement("div");i.classList.add(Pn("at")),i.appendChild(this.alphaViews_.text.element),n.appendChild(i),this.element.appendChild(n)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((e=>e.inputElement))];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function In(e){return"int"===e?"int":"float"===e?"float":void 0}function On(e){const t=I;return O(e,{alpha:t.optional.boolean,color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(In)}),expanded:t.optional.boolean,picker:t.optional.custom(ln)})}function kn(e){return e?.1:1}function Ln(e){var t;return null===(t=e.color)||void 0===t?void 0:t.type}function Nn(e,t){const n=e.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*t,t):Math.min(parseFloat(e),t)}const Dn={deg:e=>e,grad:e=>360*e/400,rad:e=>360*e/(2*Math.PI),turn:e=>360*e};function zn(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const n=parseFloat(t[1]),r=t[2];return Dn[r](n)}function Un(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Nn(t[1],255),Nn(t[2],255),Nn(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Fn(e){return t=>{const n=Un(t);return n?new An(n,"rgb",e):null}}function Bn(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Nn(t[1],255),Nn(t[2],255),Nn(t[3],255),Nn(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function jn(e){return t=>{const n=Bn(t);return n?new An(n,"rgb",e):null}}function Vn(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[zn(t[1]),Nn(t[2],100),Nn(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $n(e){return t=>{const n=Vn(t);return n?new An(n,"hsl",e):null}}function Hn(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[zn(t[1]),Nn(t[2],100),Nn(t[3],100),Nn(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Gn(e){return t=>{const n=Hn(t);return n?new An(n,"hsl",e):null}}function Wn(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function qn(e){const t=e.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Wt(parseInt(t[4]+t[4],16),0,255,0,1)];const n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Wt(parseInt(n[4],16),0,255,0,1)]:null}function Xn(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Yn(e){return t=>{const n=Xn(t);return n?new An(n,"rgb",e):null}}function Kn(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Zn(e){return t=>{const n=Kn(t);return n?new An(n,"rgb",e):null}}const Jn=[{parser:Wn,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:qn,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Un,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Bn,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Vn,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Hn,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Xn,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Kn,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Qn(e,t="int"){const n=function(e){return Jn.reduce(((t,{parser:n,result:r})=>t||(n(e)?r:null)),null)}(e);return n?"hex"===n.notation&&"float"!==t?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:t}):null:null}const er={int:[function(e){const t=Wn(e);return t?new An(t,"rgb","int"):null},function(e){const t=qn(e);return t?new An(t,"rgb","int"):null},Fn("int"),jn("int"),$n("int"),Gn("int"),Yn("int"),Zn("int")],float:[Fn("float"),jn("float"),$n("float"),Gn("float"),Yn("float"),Zn("float")]};function tr(e){const t=er[e];return e=>t.reduce(((t,n)=>t||n(e)),null)}function nr(e){const t=Xt(Math.floor(e),0,255).toString(16);return 1===t.length?`0${t}`:t}function rr(e,t="#"){return`${t}${wn(e.getComponents("rgb")).map(nr).join("")}`}function ir(e,t="#"){const n=e.getComponents("rgb");return`${t}${[n[0],n[1],n[2],255*n[3]].map(nr).join("")}`}function or(e,t){const n=Lt("float"===t?2:0);return`rgb(${wn(e.getComponents("rgb",t)).map((e=>n(e))).join(", ")})`}function ar(e){return t=>or(t,e)}function sr(e,t){const n=Lt(2),r=Lt("float"===t?2:0);return`rgba(${e.getComponents("rgb",t).map(((e,t)=>(3===t?n:r)(e))).join(", ")})`}function lr(e){return t=>sr(t,e)}function cr(e,t){const n=Lt("float"===t?2:0),r=["r","g","b"];return`{${wn(e.getComponents("rgb",t)).map(((e,t)=>`${r[t]}: ${n(e)}`)).join(", ")}}`}function ur(e){return t=>cr(t,e)}function hr(e,t){const n=Lt(2),r=Lt("float"===t?2:0),i=["r","g","b","a"];return`{${e.getComponents("rgb",t).map(((e,t)=>`${i[t]}: ${(3===t?n:r)(e)}`)).join(", ")}}`}function dr(e){return t=>hr(t,e)}const fr=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:rr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ir},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[Lt(0),Dt,Dt];return`hsl(${wn(e.getComponents("hsl")).map(((e,n)=>t[n](e))).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[Lt(0),Dt,Dt,Lt(2)];return`hsla(${e.getComponents("hsl").map(((e,n)=>t[n](e))).join(", ")})`}},...["int","float"].reduce(((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"func",type:t},stringifier:ar(t)},{format:{alpha:!0,mode:"rgb",notation:"func",type:t},stringifier:lr(t)},{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:ur(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:dr(t)}]),[])];function pr(e){return fr.reduce(((t,n)=>{return t||(r=n.format,i=e,r.alpha===i.alpha&&r.mode===i.mode&&r.notation===i.notation&&r.type===i.type?n.stringifier:null);var r,i}),null)}const mr=g("apl");class gr{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(mr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(mr("b")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(mr("c")),n.appendChild(r),this.colorElem_=r;const i=e.createElement("div");i.classList.add(mr("m")),this.element.appendChild(i),this.markerElem_=i;const o=e.createElement("div");o.classList.add(mr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),n=new An([t[0],t[1],t[2],0],"rgb"),r=new An([t[0],t[1],t[2],255],"rgb"),i=["to right",sr(n),sr(r)];this.colorElem_.style.background=`linear-gradient(${i.join(",")})`,this.previewElem_.style.backgroundColor=sr(e);const o=Wt(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class vr{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new gr(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=e.point.x/e.bounds.width,r=this.value.rawValue,[i,o,a]=r.getComponents("hsv");this.value.setRawValue(new An([i,o,a,n],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Bt(kn(!0),Vt(e));if(0===t)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new An([r,i,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==Bt(kn(!0),Vt(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const yr=g("coltxt");class br{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(yr()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(yr("m")),this.modeElem_=function(e){const t=e.createElement("select");return t.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce(((t,n)=>{const r=e.createElement("option");return r.textContent=n.text,r.value=n.value,t.appendChild(r),t}),e.createDocumentFragment())),t}(e),this.modeElem_.classList.add(yr("ms")),n.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(yr("mm")),r.appendChild(W(e,"dropdown")),n.appendChild(r),this.element.appendChild(n);const i=e.createElement("div");i.classList.add(yr("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=t.textViews,this.applyTextViews_(),y(t.colorMode,(e=>{this.modeElem_.value=e}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(e){this.textViews_=e,this.applyTextViews_()}applyTextViews_(){Y(this.textsElem_);const e=this.element.ownerDocument;this.textViews_.forEach((t=>{const n=e.createElement("div");n.classList.add(yr("c")),n.appendChild(t.element),this.textsElem_.appendChild(n)}))}}function xr(e,t,n){const r=Cn(e,t)[n];return new Qe({min:0,max:r})}function _r(e,t,n){return new Jt(e,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:kn(!1),parser:t.parser,props:A.fromObject({draggingScale:"float"===t.colorType?.01:1,formatter:(r=t.colorType,Lt("float"===r?2:0))}),value:T(0,{constraint:xr(t.colorMode,t.colorType,n)}),viewProps:t.viewProps});var r}class wr{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=T(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new br(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},n=[_r(e,t,0),_r(e,t,1),_r(e,t,2)];return n.forEach(((e,t)=>{Ft({primary:this.value,secondary:e.value,forward:e=>e.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[t],backward:(e,n)=>{const r=this.colorMode.rawValue,i=e.rawValue.getComponents(r,this.colorType_);return i[t]=n.rawValue,new An(Sn(wn(i),i[3]),r,this.colorType_)}})})),n}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Sr=g("hpl");class Er{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Sr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(Sr("c")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(Sr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=or(new An([t,100,100],"hsv"));const n=Wt(t,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Cr{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Er(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=Wt(Xt(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,i,o,a]=r.getComponents("hsv");this.value.setRawValue(new An([n,i,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Bt(kn(!1),Vt(e));if(0===t)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new An([r+t,i,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==Bt(kn(!1),Vt(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Mr=g("svp");class Tr{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Mr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("canvas");n.height=64,n.width=64,n.classList.add(Mr("c")),this.element.appendChild(n),this.canvasElement=n;const r=e.createElement("div");r.classList.add(Mr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=function(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=e.getImageData(0,0,n,r),o=i.data;for(let e=0;e<r;e++)for(let i=0;i<n;i++){const a=Wt(i,0,n,0,100),s=Wt(e,0,r,100,0),l=_n(t[0],a,s),c=4*(e*n+i);o[c]=l[0],o[c+1]=l[1],o[c+2]=l[2],o[c+3]=255}e.putImageData(i,0,0);const a=Wt(t[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const s=Wt(t[2],0,100,100,0);this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}}class Ar{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Tr(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=Wt(e.point.x,0,e.bounds.width,0,100),r=Wt(e.point.y,0,e.bounds.height,100,0),[i,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new An([i,n,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){$t(e.key)&&e.preventDefault();const[t,n,r,i]=this.value.rawValue.getComponents("hsv"),o=kn(!1),a=Bt(o,Vt(e)),s=Bt(o,jt(e));0===a&&0===s||this.value.setRawValue(new An([t,n+a,r+s,i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=kn(!1),n=Bt(t,Vt(e)),r=Bt(t,jt(e));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Pr{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Cr(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Ar(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new vr(e,{value:this.value,viewProps:this.viewProps}),text:new Jt(e,{parser:It,baseStep:.1,props:A.fromObject({draggingScale:.01,formatter:Lt(2)}),value:T(0,{constraint:new Qe({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ft({primary:this.value,secondary:this.alphaIcs_.text.value,forward:e=>e.rawValue.getComponents()[3],backward:(e,t)=>{const n=e.rawValue.getComponents();return n[3]=t.rawValue,new An(n,e.rawValue.mode)}}),this.textC_=new wr(e,{colorType:t.colorType,parser:It,value:this.value,viewProps:this.viewProps}),this.view=new Rn(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Rr=g("colsw");class Ir{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Rr()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Rr("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=e.createElement("button");r.classList.add(Rr("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=ir(e)}onValueChange_(){this.update_()}}class Or{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Ir(e,{value:this.value,viewProps:this.viewProps})}}class kr{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=re.create(t.expanded),this.swatchC_=new Or(e,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new ht(e,{parser:t.parser,props:A.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new xn(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===t.pickerLayout?new lt(e,{viewProps:this.viewProps}):null;const r=new Pr(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Ft({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),oe(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=K(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!$(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.swatchC_.view.buttonElement.focus()}}function Lr(e){return wn(e.getComponents("rgb")).reduce(((e,t)=>e<<8|255&Math.floor(t)),0)}function Nr(e){return e.getComponents("rgb").reduce(((e,t,n)=>e<<8|255&Math.floor(3===n?255*t:t)),0)>>>0}function Dr(e){return"number"!=typeof e?An.black():new An([(t=e)>>16&255,t>>8&255,255&t],"rgb");var t}function zr(e){return"number"!=typeof e?An.black():new An([(t=e)>>24&255,t>>16&255,t>>8&255,Wt(255&t,0,255,0,1)],"rgb");var t}function Ur(e){var t;return!(!(null==e?void 0:e.alpha)&&!(null===(t=null==e?void 0:e.color)||void 0===t?void 0:t.alpha))}function Fr(e){return e?e=>ir(e,"0x"):e=>rr(e,"0x")}const Br={id:"input-color-number",type:"input",accept:(e,t)=>{if("number"!=typeof e)return null;if(!function(e){return"color"in e||"view"in e&&"color"===e.view}(t))return null;const n=On(t);return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ur(e.params)?zr:Dr,equals:An.equals,writer:e=>function(e){const t=e?Nr:Lr;return(e,n)=>{an(e,t(n))}}(Ur(e.params))},controller:e=>{const t=Ur(e.params),n="expanded"in e.params?e.params.expanded:void 0,r="picker"in e.params?e.params.picker:void 0;return new kr(e.document,{colorType:"int",expanded:null!=n&&n,formatter:Fr(t),parser:tr("int"),pickerLayout:null!=r?r:"popup",supportsAlpha:t,value:e.value,viewProps:e.viewProps})}};function jr(e){return t=>function(e,t){return An.isColorObject(e)?An.fromObject(e,t):An.black(t)}(t,e)}function Vr(e,t){return n=>e?hr(n,t):cr(n,t)}const $r={id:"input-color-object",type:"input",accept:(e,t)=>{if(!An.isColorObject(e))return null;const n=On(t);return n?{initialValue:e,params:n}:null},binding:{reader:e=>jr(Ln(e.params)),equals:An.equals,writer:e=>{return r=e.initialValue,t=An.isRgbaColorObject(r),n=Ln(e.params),(e,r)=>{t?function(e,t,n){const r=t.toRgbaObject(n);e.writeProperty("r",r.r),e.writeProperty("g",r.g),e.writeProperty("b",r.b),e.writeProperty("a",r.a)}(e,r,n):function(e,t,n){const r=t.toRgbaObject(n);e.writeProperty("r",r.r),e.writeProperty("g",r.g),e.writeProperty("b",r.b)}(e,r,n)};var t,n,r}},controller:e=>{var t;const n=An.isRgbaColorObject(e.initialValue),r="expanded"in e.params?e.params.expanded:void 0,i="picker"in e.params?e.params.picker:void 0,o=null!==(t=Ln(e.params))&&void 0!==t?t:"int";return new kr(e.document,{colorType:o,expanded:null!=r&&r,formatter:Vr(n,o),parser:tr(o),pickerLayout:null!=i?i:"popup",supportsAlpha:n,value:e.value,viewProps:e.viewProps})}},Hr={id:"input-color-string",type:"input",accept:(e,t)=>{if("string"!=typeof e)return null;if("view"in t&&"text"===t.view)return null;const n=Qn(e,Ln(t));if(!n)return null;if(!pr(n))return null;const r=On(t);return r?{initialValue:e,params:r}:null},binding:{reader:e=>{var t;return function(e){const t=er[e];return n=>{if("string"!=typeof n)return An.black(e);const r=t.reduce(((e,t)=>e||t(n)),null);return null!=r?r:An.black(e)}}(null!==(t=Ln(e.params))&&void 0!==t?t:"int")},equals:An.equals,writer:e=>{const t=Qn(e.initialValue,Ln(e.params));if(!t)throw h.shouldNeverHappen();const n=function(e){const t=pr(e);return t?(e,n)=>{an(e,t(n))}:null}(t);if(!n)throw h.notBindable();return n}},controller:e=>{const t=Qn(e.initialValue,Ln(e.params));if(!t)throw h.shouldNeverHappen();const n=pr(t);if(!n)throw h.shouldNeverHappen();const r="expanded"in e.params?e.params.expanded:void 0,i="picker"in e.params?e.params.picker:void 0;return new kr(e.document,{colorType:t.type,expanded:null!=r&&r,formatter:n,parser:tr(t.type),pickerLayout:null!=i?i:"popup",supportsAlpha:t.alpha,value:e.value,viewProps:e.viewProps})}};class Gr{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map(((e,t)=>{var n,r;return null!==(r=null===(n=this.components[t])||void 0===n?void 0:n.constrain(e))&&void 0!==r?r:e}));return this.asm_.fromComponents(t)}}const Wr=g("pndtxt");class qr{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Wr()),this.textViews.forEach((t=>{const n=e.createElement("div");n.classList.add(Wr("a")),n.appendChild(t.element),this.element.appendChild(n)}))}}class Xr{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(((n,r)=>function(e,t,n){return new Jt(e,{arrayPosition:0===n?"fst":n===t.axes.length-1?"lst":"mid",baseStep:t.axes[n].baseStep,parser:t.parser,props:t.axes[n].textProps,value:T(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}(e,t,r))),this.acs_.forEach(((e,n)=>{Ft({primary:this.value,secondary:e.value,forward:e=>t.assembly.toComponents(e.rawValue)[n],backward:(e,r)=>{const i=t.assembly.toComponents(e.rawValue);return i[n]=r.rawValue,t.assembly.fromComponents(i)}})})),this.view=new qr(e,{textViews:this.acs_.map((e=>e.view))})}}function Yr(e,t){return"step"in e&&!s(e.step)?new nt(e.step,t):null}function Kr(e){return s(e.max)||s(e.min)?s(e.max)&&s(e.min)?null:new tt({max:e.max,min:e.min}):new Qe({max:e.max,min:e.min})}const Zr={id:"input-number",type:"input",accept:(e,t)=>{if("number"!=typeof e)return null;const n=I,r=O(t,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(sn),step:n.optional.number});return r?{initialValue:e,params:r}:null},binding:{reader:e=>Ot,constraint:e=>function(e,t){const n=[],r=Yr(e,t);r&&n.push(r);const i=Kr(e);i&&n.push(i);const o=hn(e.options);return o&&n.push(o),new Ze(n)}(e.params,e.initialValue),writer:e=>an},controller:e=>{var t;const n=e.value,r=e.constraint,i=r&&Je(r,et);if(i)return new ot(e.document,{props:new A({options:i.values.value("options")}),value:n,viewProps:e.viewProps});const o=null!==(t="format"in e.params?e.params.format:void 0)&&void 0!==t?t:Lt(dn(r,n.rawValue)),a=r&&Je(r,Qe);return a?new on(e.document,{baseStep:fn(r),parser:It,sliderProps:new A({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:A.fromObject({draggingScale:pn(r,n.rawValue),formatter:o}),value:n,viewProps:e.viewProps}):new Jt(e.document,{baseStep:fn(r),parser:It,props:A.fromObject({draggingScale:pn(r,n.rawValue),formatter:o}),value:n,viewProps:e.viewProps})}};class Jr{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(s(e))return!1;const t=e.x,n=e.y;return"number"==typeof t&&"number"==typeof n}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Qr={toComponents:e=>e.getComponents(),fromComponents:e=>new Jr(...e)},ei=g("p2d");class ti{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ei()),t.viewProps.bindClassModifiers(this.element),y(t.expanded,x(this.element,ei(void 0,"expanded")));const n=e.createElement("div");n.classList.add(ei("h")),this.element.appendChild(n);const r=e.createElement("button");r.classList.add(ei("b")),r.appendChild(W(e,"p2dpad")),t.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const i=e.createElement("div");if(i.classList.add(ei("t")),n.appendChild(i),this.textElement=i,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(ei("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}const ni=g("p2dp");class ri{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(ni()),"popup"===t.layout&&this.element.classList.add(ni(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(ni("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=e.createElementNS(j,"svg");r.classList.add(ni("g")),this.padElement.appendChild(r),this.svgElem_=r;const i=e.createElementNS(j,"line");i.classList.add(ni("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);const o=e.createElementNS(j,"line");o.classList.add(ni("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(j,"line");a.classList.add(ni("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const s=e.createElement("div");s.classList.add(ni("m")),this.padElement.appendChild(s),this.markerElem_=s,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),n=this.maxValue_,r=Wt(e,-n,+n,0,100),i=Wt(t,-n,+n,0,100),o=this.invertsY_?100-i:i;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ii(e,t,n){return[Bt(t[0],Vt(e)),Bt(t[1],jt(e))*(n?1:-1)]}class oi{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new ri(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Gt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=this.maxValue_,r=Wt(e.point.x,0,e.bounds.width,-n,+n),i=Wt(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new Jr(r,i),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){$t(e.key)&&e.preventDefault();const[t,n]=ii(e,this.baseSteps_,this.invertsY_);0===t&&0===n||this.value.setRawValue(new Jr(this.value.rawValue.x+t,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,n]=ii(e,this.baseSteps_,this.invertsY_);0===t&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ai{constructor(e,t){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=re.create(t.expanded),this.popC_="popup"===t.pickerLayout?new lt(e,{viewProps:this.viewProps}):null;const i=new oi(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.textC_=new Xr(e,{assembly:Qr,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new ti(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ft({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),oe(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=K(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!$(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.view.buttonElement.focus()}}class si{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(s(e))return!1;const t=e.x,n=e.y,r=e.z;return"number"==typeof t&&"number"==typeof n&&"number"==typeof r}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const li={toComponents:e=>e.getComponents(),fromComponents:e=>new si(...e)};function ci(e){return si.isObject(e)?new si(e.x,e.y,e.z):new si}function ui(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function hi(e,t){return{baseStep:fn(t),constraint:t,textProps:A.fromObject({draggingScale:pn(t,e),formatter:Lt(dn(t,e))})}}const di={id:"input-point3d",type:"input",accept:(e,t)=>{if(!si.isObject(e))return null;const n=I,r=O(t,{x:n.optional.custom(cn),y:n.optional.custom(cn),z:n.optional.custom(cn)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>ci,constraint:e=>{return t=e.params,n=e.initialValue,new Gr({assembly:li,components:[Ui("x"in t?t.x:void 0,n.x),Ui("y"in t?t.y:void 0,n.y),Ui("z"in t?t.z:void 0,n.z)]});var t,n},equals:si.equals,writer:e=>ui},controller:e=>{const t=e.value,n=e.constraint;if(!(n instanceof Gr))throw h.shouldNeverHappen();return new Xr(e.document,{assembly:li,axes:[hi(t.rawValue.x,n.components[0]),hi(t.rawValue.y,n.components[1]),hi(t.rawValue.z,n.components[2])],parser:It,value:t,viewProps:e.viewProps})}};class fi{constructor(e=0,t=0,n=0,r=0){this.x=e,this.y=t,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(s(e))return!1;const t=e.x,n=e.y,r=e.z,i=e.w;return"number"==typeof t&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const pi={toComponents:e=>e.getComponents(),fromComponents:e=>new fi(...e)};function mi(e){return fi.isObject(e)?new fi(e.x,e.y,e.z,e.w):new fi}function gi(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}const vi={id:"input-point4d",type:"input",accept:(e,t)=>{if(!fi.isObject(e))return null;const n=I,r=O(t,{x:n.optional.custom(cn),y:n.optional.custom(cn),z:n.optional.custom(cn),w:n.optional.custom(cn)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>mi,constraint:e=>{return t=e.params,n=e.initialValue,new Gr({assembly:pi,components:[Ui("x"in t?t.x:void 0,n.x),Ui("y"in t?t.y:void 0,n.y),Ui("z"in t?t.z:void 0,n.z),Ui("w"in t?t.w:void 0,n.w)]});var t,n},equals:fi.equals,writer:e=>gi},controller:e=>{const t=e.value,n=e.constraint;if(!(n instanceof Gr))throw h.shouldNeverHappen();return new Xr(e.document,{assembly:pi,axes:t.rawValue.getComponents().map(((e,t)=>{return r=e,{baseStep:fn(i=n.components[t]),constraint:i,textProps:A.fromObject({draggingScale:pn(i,r),formatter:Lt(dn(i,r))})};var r,i})),parser:It,value:t,viewProps:e.viewProps})}};const yi={id:"input-string",type:"input",accept:(e,t)=>{if("string"!=typeof e)return null;const n=O(t,{options:I.optional.custom(sn)});return n?{initialValue:e,params:n}:null},binding:{reader:e=>zt,constraint:e=>function(e){const t=[],n=hn(e.options);return n&&t.push(n),new Ze(t)}(e.params),writer:e=>an},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&Je(r,et);return i?new ot(t,{props:new A({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new ht(t,{parser:e=>e,props:A.fromObject({formatter:Ut}),value:n,viewProps:e.viewProps})}},bi={defaultInterval:200,defaultLineCount:3},xi=g("mll");class _i{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(xi()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.classList.add(xi("i")),n.style.height=`calc(var(--bld-us) * ${t.lineCount})`,n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,n=[];this.value.rawValue.forEach((e=>{void 0!==e&&n.push(this.formatter_(e))})),e.textContent=n.join("\n"),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class wi{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new _i(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}}const Si=g("sgl");class Ei{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Si()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(Si("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=void 0!==t?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class Ci{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Ei(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const Mi={id:"monitor-bool",type:"monitor",accept:(e,t)=>{if("boolean"!=typeof e)return null;const n=O(t,{lineCount:I.optional.number});return n?{initialValue:e,params:n}:null},binding:{reader:e=>dt},controller:e=>{var t;return 1===e.value.rawValue.length?new Ci(e.document,{formatter:ft,value:e.value,viewProps:e.viewProps}):new wi(e.document,{formatter:ft,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:bi.defaultLineCount,value:e.value,viewProps:e.viewProps})}},Ti=g("grl");class Ai{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ti()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=e.createElementNS(j,"svg");n.classList.add(Ti("g")),n.style.height=`calc(var(--bld-us) * ${t.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=e.createElementNS(j,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=e.createElement("div");i.classList.add(Ti("t"),g("tt")()),this.element.appendChild(i),this.tooltipElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),i=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const s=Wt(a,0,t,0,e.width),l=Wt(o,n,r,e.height,0);i.push([s,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void o.classList.remove(Ti("t","a"));const s=Wt(this.cursor_.rawValue,0,t,0,e.width),l=Wt(a,n,r,e.height,0);o.style.left=`${s}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(Ti("t","a"))||(o.classList.add(Ti("t","a"),Ti("t","in")),V(o),o.classList.remove(Ti("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Pi{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=T(-1),this.view=new Ai(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),$(e)){const e=new Gt(this.view.element);e.emitter.on("down",this.onGraphPointerDown_),e.emitter.on("move",this.onGraphPointerMove_),e.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Wt(e.offsetX,0,t.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){e.data.point?this.cursor_.rawValue=Math.floor(Wt(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Ri(e){return"format"in e&&!s(e.format)?e.format:Lt(2)}function Ii(e){return"view"in e&&"graph"===e.view}const Oi={id:"monitor-number",type:"monitor",accept:(e,t)=>{if("number"!=typeof e)return null;const n=I,r=O(t,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:e,params:r}:null},binding:{defaultBufferSize:e=>Ii(e)?64:1,reader:e=>Ot},controller:e=>Ii(e.params)?function(e){var t,n,r;return new Pi(e.document,{formatter:Ri(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:bi.defaultLineCount,props:A.fromObject({maxValue:null!==(n="max"in e.params?e.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in e.params?e.params.min:null)&&void 0!==r?r:0}),value:e.value,viewProps:e.viewProps})}(e):function(e){var t;return 1===e.value.rawValue.length?new Ci(e.document,{formatter:Ri(e.params),value:e.value,viewProps:e.viewProps}):new wi(e.document,{formatter:Ri(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:bi.defaultLineCount,value:e.value,viewProps:e.viewProps})}(e)},ki={id:"monitor-string",type:"monitor",accept:(e,t)=>{if("string"!=typeof e)return null;const n=I,r=O(t,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:e,params:r}:null},binding:{reader:e=>zt},controller:e=>{var t;const n=e.value;return n.rawValue.length>1||"multiline"in e.params&&e.params.multiline?new wi(e.document,{formatter:Ut,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:bi.defaultLineCount,value:n,viewProps:e.viewProps}):new Ci(e.document,{formatter:Ut,value:n,viewProps:e.viewProps})}};function Li(e,t){return 0===t?new He:new Ge(e,null!=t?t:bi.defaultInterval)}class Ni{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e){"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}createInput(e,t,n){if(s(t.read()))throw new h({context:{key:t.key},type:"nomatchingcontroller"});const r=this.pluginsMap_.inputs.reduce(((r,i)=>null!=r?r:function(e,t){var n;const r=e.accept(t.target.read(),t.params);if(s(r))return null;const i=I,o={target:t.target,initialValue:r.initialValue,params:r.params},a=e.binding.reader(o),l=e.binding.constraint?e.binding.constraint(o):void 0,c=T(a(r.initialValue),{constraint:l,equals:e.binding.equals}),u=new We({reader:a,target:t.target,value:c,writer:e.binding.writer(o)}),h=i.optional.boolean(t.params.disabled).value,d=i.optional.boolean(t.params.hidden).value,f=e.controller({constraint:l,document:t.document,initialValue:r.initialValue,params:r.params,value:u.value,viewProps:z.create({disabled:h,hidden:d})});return new ce(t.document,{binding:u,blade:ne(),props:A.fromObject({label:"label"in t.params?null!==(n=i.optional.string(t.params.label).value)&&void 0!==n?n:null:t.target.key}),valueController:f})}(i,{document:e,target:t,params:n})),null);if(r)return r;throw new h({context:{key:t.key},type:"nomatchingcontroller"})}createMonitor(e,t,n){const r=this.pluginsMap_.monitors.reduce(((r,i)=>null!=r?r:function(e,t){var n,r,i;const o=I,a=e.accept(t.target.read(),t.params);if(s(a))return null;const l={target:t.target,initialValue:a.initialValue,params:a.params},c=e.binding.reader(l),u=null!==(r=null!==(n=o.optional.number(t.params.bufferSize).value)&&void 0!==n?n:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(a.params))&&void 0!==r?r:1,h=o.optional.number(t.params.interval).value,d=new Ke({reader:c,target:t.target,ticker:Li(t.document,h),value:Xe(u)}),f=o.optional.boolean(t.params.disabled).value,p=o.optional.boolean(t.params.hidden).value,m=e.controller({document:t.document,params:a.params,value:d.value,viewProps:z.create({disabled:f,hidden:p})});return new he(t.document,{binding:d,blade:ne(),props:A.fromObject({label:"label"in t.params?null!==(i=o.optional.string(t.params.label).value)&&void 0!==i?i:null:t.target.key}),valueController:m})}(i,{document:e,params:n,target:t})),null);if(r)return r;throw new h({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const n=this.pluginsMap_.blades.reduce(((n,r)=>null!=n?n:function(e,t){const n=e.accept(t.params);if(!n)return null;const r=I.optional.boolean(t.params.disabled).value,i=I.optional.boolean(t.params.hidden).value;return e.controller({blade:ne(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:r,hidden:i}),viewProps:z.create({disabled:r,hidden:i})})}(r,{document:e,params:t})),null);if(!n)throw new h({type:"nomatchingview",context:{params:t}});return n}createBladeApi(e){if(e instanceof ce)return new le(e);if(e instanceof he)return new ue(e);if(e instanceof we)return new me(e,this);const t=this.pluginsMap_.blades.reduce(((t,n)=>null!=t?t:n.api({controller:e,pool:this})),null);if(!t)throw h.shouldNeverHappen();return t}}function Di(e){return Jr.isObject(e)?new Jr(e.x,e.y):new Jr}function zi(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function Ui(e,t){if(!e)return;const n=[],r=Yr(e,t);r&&n.push(r);const i=Kr(e);return i&&n.push(i),new Ze(n)}function Fi(e,t){const[n,r]=e?function(e){const t=Je(e,Qe);if(t)return[t.values.get("min"),t.values.get("max")];const n=Je(e,tt);return n?[n.minValue,n.maxValue]:[void 0,void 0]}(e):[];if(!s(n)||!s(r))return Math.max(Math.abs(null!=n?n:0),Math.abs(null!=r?r:0));const i=fn(e);return Math.max(10*Math.abs(i),10*Math.abs(t))}function Bi(e,t){const n=t instanceof Gr?t.components[0]:void 0,r=t instanceof Gr?t.components[1]:void 0,i=Fi(n,e.x),o=Fi(r,e.y);return Math.max(i,o)}function ji(e,t){return{baseStep:fn(t),constraint:t,textProps:A.fromObject({draggingScale:pn(t,e),formatter:Lt(dn(t,e))})}}function Vi(e){if(!("y"in e))return!1;const t=e.y;return!!t&&"inverted"in t&&!!t.inverted}const $i={id:"input-point2d",type:"input",accept:(e,t)=>{if(!Jr.isObject(e))return null;const n=I,r=O(t,{expanded:n.optional.boolean,picker:n.optional.custom(ln),x:n.optional.custom(cn),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:e,params:r}:null},binding:{reader:e=>Di,constraint:e=>{return t=e.params,n=e.initialValue,new Gr({assembly:Qr,components:[Ui("x"in t?t.x:void 0,n.x),Ui("y"in t?t.y:void 0,n.y)]});var t,n},equals:Jr.equals,writer:e=>zi},controller:e=>{const t=e.document,n=e.value,r=e.constraint;if(!(r instanceof Gr))throw h.shouldNeverHappen();const i="expanded"in e.params?e.params.expanded:void 0,o="picker"in e.params?e.params.picker:void 0;return new ai(t,{axes:[ji(n.rawValue.x,r.components[0]),ji(n.rawValue.y,r.components[1])],expanded:null!=i&&i,invertsY:Vi(e.params),maxValue:Bi(n.rawValue,r),parser:It,pickerLayout:null!=o?o:"popup",value:n,viewProps:e.viewProps})}};class Hi extends t{constructor(e){super(e),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",(e=>{this.emitter_.emit("change",{event:new r(this,e.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get options(){return this.controller_.valueController.props.get("options")}set options(e){this.controller_.valueController.props.set("options",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}}class Gi extends t{constructor(e){super(e),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",(e=>{this.emitter_.emit("change",{event:new r(this,e.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(e){this.controller_.valueController.sliderController.props.set("maxValue",e)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(e){this.controller_.valueController.sliderController.props.set("minValue",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}}class Wi extends t{constructor(e){super(e),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",(e=>{this.emitter_.emit("change",{event:new r(this,e.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(e){this.controller_.valueController.props.set("formatter",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,(e=>{n(e.event)})),this}}const qi={id:"list",type:"blade",accept(e){const t=I,n=O(e,{options:t.required.custom(sn),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string});return n?{params:n}:null},controller(e){const t=new et(un(e.params.options)),n=T(e.params.value,{constraint:t}),r=new ot(e.document,{props:new A({options:t.values.value("options")}),value:n,viewProps:e.viewProps});return new Te(e.document,{blade:e.blade,props:A.fromObject({label:e.params.label}),valueController:r})},api:e=>e.controller instanceof Te&&e.controller.valueController instanceof ot?new Hi(e.controller):null};class Xi extends ge{constructor(e,t){super(e,t)}get element(){return this.controller_.view.element}importPreset(e){(function(e,t){e.forEach((e=>{const n=t[e.target.presetKey];void 0!==n&&e.writer(e.target,e.reader(n))}))})(this.controller_.rackController.rack.find(ce).map((e=>e.binding)),e),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(ce).map((e=>e.binding.target)).reduce(((e,t)=>Object.assign(e,{[t.presetKey]:t.read()})),{})}refresh(){this.controller_.rackController.rack.find(ce).forEach((e=>{e.binding.read()})),this.controller_.rackController.rack.find(he).forEach((e=>{e.binding.read()}))}}class Yi extends Ce{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const Ki={id:"slider",type:"blade",accept(e){const t=I,n=O(e,{max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number});return n?{params:n}:null},controller(e){var t,n;const r=null!==(t=e.params.value)&&void 0!==t?t:0,i=new Qe({max:e.params.max,min:e.params.min}),o=new on(e.document,{baseStep:1,parser:It,sliderProps:new A({maxValue:i.values.value("max"),minValue:i.values.value("min")}),textProps:A.fromObject({draggingScale:pn(void 0,r),formatter:null!==(n=e.params.format)&&void 0!==n?n:kt}),value:T(r,{constraint:i}),viewProps:e.viewProps});return new Te(e.document,{blade:e.blade,props:A.fromObject({label:e.params.label}),valueController:o})},api:e=>e.controller instanceof Te&&e.controller.valueController instanceof on?new Gi(e.controller):null},Zi={id:"text",type:"blade",accept(e){const t=I,n=O(e,{parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string});return n?{params:n}:null},controller(e){var t;const n=new ht(e.document,{parser:e.params.parse,props:A.fromObject({formatter:null!==(t=e.params.format)&&void 0!==t?t:e=>String(e)}),value:T(e.params.value),viewProps:e.viewProps});return new Te(e.document,{blade:e.blade,props:A.fromObject({label:e.params.label}),valueController:n})},api:e=>e.controller instanceof Te&&e.controller.valueController instanceof ht?new Wi(e.controller):null};function Ji(e,t,n){if(e.querySelector(`style[data-tp-style=${t}]`))return;const r=e.createElement("style");r.dataset.tpStyle=t,r.textContent=n,e.head.appendChild(r)}const Qi=new class{constructor(e){const[t,n]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=null!=n?n:null}toString(){const e=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[e,this.prerelease].join("-"):e}}("3.1.10");e.BladeApi=t,e.ButtonApi=f,e.FolderApi=ge,e.InputBindingApi=le,e.ListApi=Hi,e.MonitorBindingApi=ue,e.Pane=class extends Xi{constructor(e){var t,n;const r=null!=e?e:{},i=null!==(t=r.document)&&void 0!==t?t:H(),o=function(){const e=new Ni;return[$i,di,vi,yi,Zr,Hr,$r,Br,yn,Mi,ki,Oi,ee,Me,Oe,$e].forEach((t=>{e.register(t)})),e}();super(new Yi(i,{expanded:r.expanded,blade:ne(),props:A.fromObject({title:r.title}),viewProps:z.create()}),o),this.pool_=o,this.containerElem_=null!==(n=r.container)&&void 0!==n?n:function(e){const t=e.createElement("div");return t.classList.add(g("dfw")()),e.body&&e.body.appendChild(t),t}(i),this.containerElem_.appendChild(this.element),this.doc_=i,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw h.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw h.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach((e=>{this.pool_.register(e),this.embedPluginStyle_(e)}))}embedPluginStyle_(e){e.css&&Ji(this.document,`plugin-${e.id}`,e.css)}setUpDefaultPlugins_(){Ji(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((e=>{this.embedPluginStyle_(e)})),this.registerPlugin({plugins:[Ki,qi,$e,Zi]})}},e.SeparatorApi=Ae,e.SliderApi=Gi,e.TabApi=Ue,e.TabPageApi=ze,e.TextApi=Wi,e.TpChangeEvent=r,e.VERSION=Qi,Object.defineProperty(e,"__esModule",{value:!0})}(t)},6675:e=>{function t(e,t){const n=new RegExp(t,"g"),r=e.match(n);return r?r.length:0}e.exports=t,e.exports.default=t},8556:(e,t,n)=>{const r=n(3614),i=n(8694),o=n(6675);function a(e,t,n){const a=n&&n.debug||!1,s=!(n&&!1===typeof n.nested),l=n&&n.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",t," and ",n);const c=r(e,`<${t}[ \n>/]`,l);if(a&&console.log("[xml-utils] start:",c),-1===c)return;const u=e.slice(c+t.length);let h=i(u,"^[^<]*[ /]>",0);const d=-1!==h&&"/"===u[h-1];if(a&&console.log("[xml-utils] selfClosing:",d),!1===d)if(s){let e=0,n=1,r=0;for(;-1!==(h=i(u,"[ /]"+t+">",e));){const i=u.substring(e,h+1);if(n+=o(i,"<"+t+"[ \n\t>]"),r+=o(i,"</"+t+">"),r>=n)break;e=h}}else h=i(u,"[ /]"+t+">",0);const f=c+t.length+h+1;if(a&&console.log("[xml-utils] end:",f),-1===f)return;const p=e.slice(c,f);let m;return m=d?null:p.slice(p.indexOf(">")+1,p.lastIndexOf("<")),{inner:m,outer:p,start:c,end:f}}e.exports=a,e.exports.default=a},563:(e,t,n)=>{const r=n(8556);function i(e,t,n){const i=[],o=n&&n.debug||!1,a=!n||"boolean"!=typeof n.nested||n.nested;let s,l=n&&n.startIndex||0;for(;s=r(e,t,{debug:o,startIndex:l});)l=a?s.start+1+t.length:s.end,i.push(s);return o&&console.log("findTagsByName found",i.length,"tags"),i}e.exports=i,e.exports.default=i},7379:e=>{function t(e,t,n){const r=n&&n.debug||!1;r&&console.log("[xml-utils] getting "+t+" in "+e);const i="object"==typeof e?e.outer:e,o=i.slice(0,i.indexOf(">")+1),a=['"',"'"];for(let e=0;e<a.length;e++){const n=a[e],i=t+"\\="+n+"([^"+n+"]*)"+n;r&&console.log("[xml-utils] pattern:",i);const s=new RegExp(i).exec(o);if(r&&console.log("[xml-utils] match:",s),s)return s[1]}}e.exports=t,e.exports.default=t},8694:e=>{function t(e,t,n){const r=new RegExp(t).exec(e.slice(n));return r?n+r.index+r[0].length-1:-1}e.exports=t,e.exports.default=t},3614:e=>{function t(e,t,n){const r=new RegExp(t).exec(e.slice(n));return r?n+r.index:-1}e.exports=t,e.exports.default=t},8625:()=>{},6504:()=>{},6580:()=>{},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8622:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,AC:()=>c,Hm:()=>d,NZ:()=>o,S3:()=>h,TZ:()=>u,s$:()=>s,ub:()=>l});const r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},i={};for(const e in r)r.hasOwnProperty(e)&&(i[r[e]]=parseInt(e,10));const o=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets,i.SubIFDs],a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s={};for(const e in a)a.hasOwnProperty(e)&&(s[a[e]]=parseInt(e,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},h={None:0,Deflate:1,Zstandard:2},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},f={};for(const e in d)d.hasOwnProperty(e)&&(f[d[e]]=parseInt(e,10))}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=i,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".bundle.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@aics/vole-app:",a.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+i){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+i),s.src=e),n[e]=[t];var d=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="/vole-app/pr-preview/pr-359/",(()=>{a.b=document.baseURI||self.location.href;var e={57:0,283:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);l&&l(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk_aics_vole_app=self.webpackChunk_aics_vole_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0,(()=>{"use strict";var e,t,n=a(6540),r=a.t(n,2),i=a(5338),o=a(961),s=a.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}(t=e||(e={})).Pop="POP",t.Push="PUSH",t.Replace="REPLACE";const c="popstate";function u(e,t){if(!1===e||null==e)throw new Error(t)}function h(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var g,v;(v=g||(g={})).data="data",v.deferred="deferred",v.redirect="redirect",v.error="error";const y=new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let o=[...n,String(i)],a="string"==typeof e.id?e.id:o.join("-");if(u(!0!==e.index||!e.children,"Cannot specify children on an index route"),u(!r[a],'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=l({},e,t(e),{id:a});return r[a]=n,n}{let n=l({},e,t(e),{id:a,children:void 0});return r[a]=n,e.children&&(n.children=b(e.children,t,o,r)),n}}))}function x(e,t,n){return void 0===n&&(n="/"),_(e,t,n,!1)}function _(e,t,n,r){let i=N(("string"==typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let e=0;null==a&&e<o.length;++e){let t=L(i);a=O(o[e],t,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=B([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),w(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:I(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of S(e.path))i(e,t,n);else i(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=S(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:[\w-]+$/,C=3,M=2,T=1,A=10,P=-2,R=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=P),t&&(r+=M),n.filter((e=>!R(e))).reduce(((e,t)=>e+(E.test(t)?C:""===t?T:A)),r)}function O(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let e=0;e<r.length;++e){let s=r[e],l=e===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=k({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c),h=s.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=k({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:B([o,u.pathname]),pathnameBase:j(B([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=B([o,u.pathnameBase]))}return a}function k(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=z(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:$(i)}}(i,o),h=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const B=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class H{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function G(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],q=new Set(W),X=["get",...W],Y=new Set(X),K=new Set([301,302,303,307,308]),Z=new Set([307,308]),J={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Q={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ee={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ne=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),re="remix-router-transitions";function ie(e,t,n,r,i,o,a,s){let l,c;if(a){l=[];for(let e of t)if(l.push(e),e.route.id===a){c=e;break}}else l=t,c=t[t.length-1];let u=F(i||".",U(l,o),N(e.pathname,n)||e.pathname,"path"===s);if(null==i&&(u.search=e.search,u.hash=e.hash),(null==i||""===i||"."===i)&&c){let e=Ue(u.search);if(c.route.index&&!e)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&e){let e=new URLSearchParams(u.search),t=e.getAll("index");e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();u.search=n?"?"+n:""}}return r&&"/"!==n&&(u.pathname="/"===u.pathname?n:B([n,u.pathname])),p(u)}function oe(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&(i=r.formMethod,!Y.has(i.toLowerCase())))return{path:n,error:Ce(405,{method:r.formMethod})};var i;let o,a,s=()=>({path:n,error:Ce(400,{type:"invalid-body"})}),l=r.formMethod||"get",c=e?l.toUpperCase():l.toLowerCase(),h=Te(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Le(c))return s();let e="string"==typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:c,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Le(c))return s();try{let e="string"==typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:c,formAction:h,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(e){return s()}}}if(u("function"==typeof FormData,"FormData is not available in this environment"),r.formData)o=ye(r.formData),a=r.formData;else if(r.body instanceof FormData)o=ye(r.body),a=r.body;else if(r.body instanceof URLSearchParams)o=r.body,a=be(o);else if(null==r.body)o=new URLSearchParams,a=new FormData;else try{o=new URLSearchParams(r.body),a=be(o)}catch(e){return s()}let d={formMethod:c,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if(Le(d.formMethod))return{path:n,submission:d};let f=m(n);return t&&f.search&&Ue(f.search)&&o.append("index",""),f.search="?"+o,{path:p(f),submission:d}}function ae(e,t,n){void 0===n&&(n=!1);let r=e.findIndex((e=>e.route.id===t));return r>=0?e.slice(0,n?r+1:r):e}function se(e,t,n,r,i,o,a,s,c,u,h,d,f,p,m,g){let v=g?Re(g[1])?g[1].error:g[1].data:void 0,y=e.createURL(t.location),b=e.createURL(i),_=n;o&&t.errors?_=ae(n,Object.keys(t.errors)[0],!0):g&&Re(g[1])&&(_=ae(n,g[0]));let w=g?g[1].statusCode:void 0,S=a&&w&&w>=400,E=_.filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(o)return le(i,t.loaderData,t.errors);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||c.some((t=>t===e.route.id)))return!0;let a=t.matches[n],u=e;return ue(e,l({currentUrl:y,currentParams:a.params,nextUrl:b,nextParams:u.params},r,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!S&&(s||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||ce(a,u))}))})),C=[];return d.forEach(((e,i)=>{if(o||!n.some((t=>t.route.id===e.routeId))||h.has(i))return;let a=x(p,e.path,m);if(!a)return void C.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let c=t.fetchers.get(i),d=Fe(a,e.path),g=!1;f.has(i)?g=!1:u.has(i)?(u.delete(i),g=!0):g=c&&"idle"!==c.state&&void 0===c.data?s:ue(d,l({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!S&&s})),g&&C.push({key:i,routeId:e.routeId,path:e.path,matches:a,match:d,controller:new AbortController})})),[E,C]}function le(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=null!=t&&void 0!==t[e.id],i=null!=n&&void 0!==n[e.id];return!(!r&&i)&&("function"==typeof e.loader&&!0===e.loader.hydrate||!r&&!i)}function ce(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ue(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"==typeof n)return n}return t.defaultShouldRevalidate}function he(e,t,n,r,i){var o;let a;if(e){let t=r[e];u(t,"No route found to patch children into: routeId = "+e),t.children||(t.children=[]),a=t.children}else a=n;let s=b(t.filter((e=>!a.some((t=>de(e,t))))),i,[e||"_","patch",String((null==(o=a)?void 0:o.length)||"0")],r);a.push(...s)}function de(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every(((e,n)=>{var r;return null==(r=t.children)?void 0:r.some((t=>de(e,t)))})))}async function fe(e){let{matches:t}=e,n=t.filter((e=>e.shouldLoad));return(await Promise.all(n.map((e=>e.resolve())))).reduce(((e,t,r)=>Object.assign(e,{[n[r].route.id]:t})),{})}async function pe(e){let{result:t,type:n}=e;if(ke(t)){let e;try{let n=t.headers.get("Content-Type");e=n&&/\bapplication\/json\b/.test(n)?null==t.body?null:await t.json():await t.text()}catch(e){return{type:g.error,error:e}}return n===g.error?{type:g.error,error:new H(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:g.data,data:e,statusCode:t.status,headers:t.headers}}if(n===g.error){if(Oe(t)){var r,i;if(t.data instanceof Error)return{type:g.error,error:t.data,statusCode:null==(i=t.init)?void 0:i.status};t=new H((null==(r=t.init)?void 0:r.status)||500,void 0,t.data)}return{type:g.error,error:t,statusCode:G(t)?t.status:void 0}}var o,a,s,l;return function(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}(t)?{type:g.deferred,deferredData:t,statusCode:null==(o=t.init)?void 0:o.status,headers:(null==(a=t.init)?void 0:a.headers)&&new Headers(t.init.headers)}:Oe(t)?{type:g.data,data:t.data,statusCode:null==(s=t.init)?void 0:s.status,headers:null!=(l=t.init)&&l.headers?new Headers(t.init.headers):void 0}:{type:g.data,data:t}}function me(e,t,n,r,i,o){let a=e.headers.get("Location");if(u(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!te.test(a)){let s=r.slice(0,r.findIndex((e=>e.route.id===n))+1);a=ie(new URL(t.url),s,i,!0,a,o),e.headers.set("Location",a)}return e}function ge(e,t,n){if(te.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),o=null!=N(i.pathname,n);if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function ve(e,t,n,r){let i=e.createURL(Te(t)).toString(),o={signal:n};if(r&&Le(r.formMethod)){let{formMethod:e,formEncType:t}=r;o.method=e.toUpperCase(),"application/json"===t?(o.headers=new Headers({"Content-Type":t}),o.body=JSON.stringify(r.json)):"text/plain"===t?o.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?o.body=ye(r.formData):o.body=r.formData}return new Request(i,o)}function ye(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"==typeof r?r:r.name);return t}function be(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function xe(e,t,n,r,i,o,a){let{loaderData:s,errors:c}=function(e,t,n,r,i){let o,a={},s=null,l=!1,c={},h=n&&Re(n[1])?n[1].error:void 0;return e.forEach((n=>{if(!(n.route.id in t))return;let d=n.route.id,f=t[d];if(u(!Ie(f),"Cannot handle redirect results in processLoaderData"),Re(f)){let t=f.error;if(void 0!==h&&(t=h,h=void 0),s=s||{},i)s[d]=t;else{let n=Se(e,d);null==s[n.route.id]&&(s[n.route.id]=t)}a[d]=void 0,l||(l=!0,o=G(f.error)?f.error.status:500),f.headers&&(c[d]=f.headers)}else Pe(f)?(r.set(d,f.deferredData),a[d]=f.deferredData.data,null==f.statusCode||200===f.statusCode||l||(o=f.statusCode),f.headers&&(c[d]=f.headers)):(a[d]=f.data,f.statusCode&&200!==f.statusCode&&!l&&(o=f.statusCode),f.headers&&(c[d]=f.headers))})),void 0!==h&&n&&(s={[n[0]]:h},a[n[0]]=void 0),{loaderData:a,errors:s,statusCode:o||200,loaderHeaders:c}}(t,n,r,a,!1);return i.forEach((t=>{let{key:n,match:r,controller:i}=t,a=o[n];if(u(a,"Did not find corresponding fetcher result"),!i||!i.signal.aborted)if(Re(a)){let t=Se(e.matches,null==r?void 0:r.route.id);c&&c[t.route.id]||(c=l({},c,{[t.route.id]:a.error})),e.fetchers.delete(n)}else if(Ie(a))u(!1,"Unhandled fetcher revalidation redirect");else if(Pe(a))u(!1,"Unhandled fetcher deferred data");else{let t=$e(a.data);e.fetchers.set(n,t)}})),{loaderData:s,errors:c}}function _e(e,t,n,r){let i=l({},t);for(let o of n){let n=o.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&o.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function we(e){return e?Re(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Se(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Ee(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ce(e,t){let{pathname:n,routeId:r,method:i,type:o,message:a}=void 0===t?{}:t,s="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(s="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===o?l="defer() is not supported in actions":"invalid-body"===o&&(l="Unable to encode submission body")):403===e?(s="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):404===e?(s="Not Found",l='No route matches URL "'+n+'"'):405===e&&(s="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new H(e||500,s,new Error(l),!0)}function Me(e){let t=Object.entries(e);for(let e=t.length-1;e>=0;e--){let[n,r]=t[e];if(Ie(r))return{key:n,result:r}}}function Te(e){return p(l({},"string"==typeof e?m(e):e,{hash:""}))}function Ae(e){return ke(e.result)&&K.has(e.result.status)}function Pe(e){return e.type===g.deferred}function Re(e){return e.type===g.error}function Ie(e){return(e&&e.type)===g.redirect}function Oe(e){return"object"==typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function ke(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function Le(e){return q.has(e.toLowerCase())}async function Ne(e,t,n,r,i){let o=Object.entries(t);for(let a=0;a<o.length;a++){let[s,l]=o[a],c=e.find((e=>(null==e?void 0:e.route.id)===s));if(!c)continue;let u=r.find((e=>e.route.id===c.route.id)),h=null!=u&&!ce(u,c)&&void 0!==(i&&i[c.route.id]);Pe(l)&&h&&await ze(l,n,!1).then((e=>{e&&(t[s]=e)}))}}async function De(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:a}=n[r],s=t[i];e.find((e=>(null==e?void 0:e.route.id)===o))&&Pe(s)&&(u(a,"Expected an AbortController for revalidating fetcher deferred result"),await ze(s,a.signal,!0).then((e=>{e&&(t[i]=e)})))}}async function ze(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:g.data,data:e.deferredData.unwrappedData}}catch(e){return{type:g.error,error:e}}return{type:g.data,data:e.deferredData.data}}}function Ue(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Fe(e,t){let n="string"==typeof t?m(t).search:t.search;if(e[e.length-1].route.index&&Ue(n||""))return e[e.length-1];let r=z(e);return r[r.length-1]}function Be(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:a}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=o?{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0}:void 0!==a?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}:void 0}function je(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ve(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function $e(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}Symbol("deferred");const Ge=n.createContext(null),We=n.createContext(null),qe=n.createContext(null),Xe=n.createContext(null),Ye=n.createContext({outlet:null,matches:[],isDataRoute:!1}),Ke=n.createContext(null);function Ze(){return null!=n.useContext(Xe)}function Je(){return Ze()||u(!1),n.useContext(Xe).location}function Qe(e){n.useContext(qe).static||n.useLayoutEffect(e)}function et(){let{isDataRoute:e}=n.useContext(Ye);return e?function(){let{router:e}=function(){let e=n.useContext(Ge);return e||u(!1),e}(st.UseNavigateStable),t=ct(lt.UseNavigateStable),r=n.useRef(!1);return Qe((()=>{r.current=!0})),n.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,He({fromRouteId:t},i)))}),[e,t])}():function(){Ze()||u(!1);let e=n.useContext(Ge),{basename:t,future:r,navigator:i}=n.useContext(qe),{matches:o}=n.useContext(Ye),{pathname:a}=Je(),s=JSON.stringify(U(o,r.v7_relativeSplatPath)),l=n.useRef(!1);return Qe((()=>{l.current=!0})),n.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"==typeof n)return void i.go(n);let o=F(n,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:B([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,s,a,e])}()}function tt(e,t){let{relative:r}=void 0===t?{}:t,{future:i}=n.useContext(qe),{matches:o}=n.useContext(Ye),{pathname:a}=Je(),s=JSON.stringify(U(o,i.v7_relativeSplatPath));return n.useMemo((()=>F(e,JSON.parse(s),a,"path"===r)),[e,s,a,r])}function nt(t,r,i,o){Ze()||u(!1);let{navigator:a}=n.useContext(qe),{matches:s}=n.useContext(Ye),l=s[s.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=Je();if(r){var p;let e="string"==typeof r?m(r):r;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=x(t,{pathname:v}),b=function(e,t,r,i){var o;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=s.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){c=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight(((e,i,o)=>{let a,u=!1,d=null,f=null;var p;r&&(a=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||it,c&&(h<0&&0===o?(ht[p="route-fallback"]||(ht[p]=!0),u=!0,f=null):h===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,o+1)),g=()=>{let t;return t=a?d:u?f:i.route.Component?n.createElement(i.route.Component,null):i.route.element?i.route.element:e,n.createElement(at,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?n.createElement(ot,{location:r.location,revalidation:r.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:B([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,i,o);return r&&b?n.createElement(Xe.Provider,{value:{location:He({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},b):b}function rt(){let e=ut(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:i},r):null,null)}const it=n.createElement(rt,null);class ot extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(Ye.Provider,{value:this.props.routeContext},n.createElement(Ke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function at(e){let{routeContext:t,match:r,children:i}=e,o=n.useContext(Ge);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(Ye.Provider,{value:t},i)}var st=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(st||{}),lt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lt||{});function ct(e){let t=function(){let e=n.useContext(Ye);return e||u(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||u(!1),r.route.id}function ut(){var e;let t=n.useContext(Ke),r=function(){let e=n.useContext(We);return e||u(!1),e}(lt.UseRouteError),i=ct(lt.UseRouteError);return void 0!==t?t:null==(e=r.errors)?void 0:e[i]}const ht={},dt={},ft=(e,t,n)=>{var r;dt[r=" React Router Future Flag Warning: "+t+". You can use the `"+e+"` future flag to opt-in early. For more information, see "+n+"."]||(dt[r]=!0,console.warn(r))};function pt(t){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:s,static:l=!1,future:c}=t;Ze()&&u(!1);let h=r.replace(/^\/*/,"/"),d=n.useMemo((()=>({basename:h,navigator:s,static:l,future:He({v7_relativeSplatPath:!1},c)})),[h,c,s,l]);"string"==typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=o,b=n.useMemo((()=>{let e=N(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:a}}),[h,f,p,g,v,y,a]);return null==b?null:n.createElement(qe.Provider,{value:d},n.createElement(Xe.Provider,{children:i,value:b}))}function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function gt(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}r.startTransition,new Promise((()=>{})),n.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const vt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(yce){}function yt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[e,r]of t)if(r&&"RouteErrorResponse"===r.__type)n[e]=new H(r.status,r.statusText,r.data,!0===r.internal);else if(r&&"Error"===r.__type){if(r.__subType){let t=window[r.__subType];if("function"==typeof t)try{let i=new t(r.message);i.stack="",n[e]=i}catch(e){}}if(null==n[e]){let t=new Error(r.message);t.stack="",n[e]=t}}else n[e]=r;return n}const bt=n.createContext({isTransitioning:!1}),xt=n.createContext(new Map),_t=r.startTransition,wt=s.flushSync;function St(e){wt?wt(e):e()}r.useId;class Et{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function Ct(e){let{fallbackElement:t,router:r,future:i}=e,[o,a]=n.useState(r.state),[s,l]=n.useState(),[c,u]=n.useState({isTransitioning:!1}),[h,d]=n.useState(),[f,p]=n.useState(),[m,g]=n.useState(),v=n.useRef(new Map),{v7_startTransition:y}=i||{},b=n.useCallback((e=>{y?function(e){_t?_t(e):e()}(e):e()}),[y]),x=n.useCallback(((e,t)=>{let{deletedFetchers:n,flushSync:i,viewTransitionOpts:o}=t;n.forEach((e=>v.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)}));let s=null==r.window||null==r.window.document||"function"!=typeof r.window.document.startViewTransition;if(o&&!s){if(i){St((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let t=r.window.document.startViewTransition((()=>{St((()=>a(e)))}));return t.finished.finally((()=>{St((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void St((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),g({state:e,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else i?St((()=>a(e))):b((()=>a(e)))}),[r.window,f,h,v,b]);n.useLayoutEffect((()=>r.subscribe(x)),[r,x]),n.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new Et)}),[c]),n.useEffect((()=>{if(h&&s&&r.window){let e=s,t=h.promise,n=r.window.document.startViewTransition((async()=>{b((()=>a(e))),await t}));n.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(n)}}),[b,s,h,r.window]),n.useEffect((()=>{h&&s&&o.location.key===s.location.key&&h.resolve()}),[h,f,o.location,s]),n.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[c.isTransitioning,m]),n.useEffect((()=>{}),[]);let _=n.useMemo((()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})})),[r]),w=r.basename||"/",S=n.useMemo((()=>({router:r,navigator:_,static:!1,basename:w})),[r,_,w]),E=n.useMemo((()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath})),[r.future.v7_relativeSplatPath]);return n.useEffect((()=>function(e,t){null!=e&&e.v7_startTransition||ft("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),null!=e&&e.v7_relativeSplatPath||t&&t.v7_relativeSplatPath||ft("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||ft("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||ft("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||ft("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||ft("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(i,r.future)),[i,r.future]),n.createElement(n.Fragment,null,n.createElement(Ge.Provider,{value:S},n.createElement(We.Provider,{value:o},n.createElement(xt.Provider,{value:v.current},n.createElement(bt.Provider,{value:c},n.createElement(pt,{basename:w,location:o.location,navigationType:o.historyAction,navigator:_,future:E},o.initialized||r.future.v7_partialHydration?n.createElement(Mt,{routes:r.routes,future:r.future,state:o}):t))))),null)}const Mt=n.memo(Tt);function Tt(e){let{routes:t,future:n,state:r}=e;return nt(t,void 0,r,n)}const At="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rt=n.forwardRef((function(e,t){let r,{onClick:i,relative:o,reloadDocument:a,replace:s,state:l,target:c,to:h,preventScrollReset:d,viewTransition:f}=e,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,vt),{basename:g}=n.useContext(qe),v=!1;if("string"==typeof h&&Pt.test(h)&&(r=h,At))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=N(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(e){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;Ze()||u(!1);let{basename:i,navigator:o}=n.useContext(qe),{hash:a,pathname:s,search:l}=tt(e,{relative:r}),c=s;return"/"!==i&&(c="/"===s?i:B([i,s])),o.createHref({pathname:c,search:l,hash:a})}(h,{relative:o}),b=function(e,t){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===t?{}:t,c=et(),u=Je(),h=tt(e,{relative:s});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}}),[u,c,h,i,o,r,e,a,s,l])}(h,{replace:s,state:l,target:c,preventScrollReset:d,relative:o,viewTransition:f});return n.createElement("a",mt({},m,{href:r||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var It,Ot,kt,Lt;function Nt(e){let t=n.useRef(gt(e)),r=n.useRef(!1),i=Je(),o=n.useMemo((()=>function(e,t){let n=gt(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(i.search,r.current?null:t.current)),[i.search]),a=et(),s=n.useCallback(((e,t)=>{const n=gt("function"==typeof e?e(o):e);r.current=!0,a("?"+n,t)}),[a,o]);return[o,s]}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(Ot=It||(It={})).UseScrollRestoration="useScrollRestoration",Ot.UseSubmit="useSubmit",Ot.UseSubmitFetcher="useSubmitFetcher",Ot.UseFetcher="useFetcher",Ot.useViewTransitionState="useViewTransitionState",(Lt=kt||(kt={})).UseFetcher="useFetcher",Lt.UseFetchers="useFetchers",Lt.UseScrollRestoration="useScrollRestoration";function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Ut(e){var t=function(e){if("object"!=zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}function Ft(e,t,n){return(t=Ut(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){if(Array.isArray(e))return e}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t){if(e){if("string"==typeof e)return jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}function $t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ht(e,t){return Bt(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Vt(e,t)||$t()}function Gt(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Wt(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||Gt(e)||Vt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yt=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function Kt(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function Zt(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var Jt="data-rc-order",Qt="data-rc-priority",en=new Map;function tn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):"rc-util-key"}function nn(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function rn(e){return Array.from((en.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Kt())return null;var n=t.csp,r=t.prepend,i=t.priority,o=void 0===i?0:i,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),s="prependQueue"===a,l=document.createElement("style");l.setAttribute(Jt,a),s&&o&&l.setAttribute(Qt,"".concat(o)),null!=n&&n.nonce&&(l.nonce=null==n?void 0:n.nonce),l.innerHTML=e;var c=nn(t),u=c.firstChild;if(r){if(s){var h=(t.styles||rn(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(Jt)))return!1;var t=Number(e.getAttribute(Qt)||0);return o>=t}));if(h.length)return c.insertBefore(l,h[h.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nn(t);return(t.styles||rn(n)).find((function(n){return n.getAttribute(tn(t))===e}))}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=an(e,t);n&&nn(t).removeChild(n)}function ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=nn(n),i=rn(r),o=Xt(Xt({},n),{},{styles:i});!function(e,t){var n=en.get(e);if(!n||!Zt(document,n)){var r=on("",t),i=r.parentNode;en.set(e,i),e.removeChild(r)}}(r,o);var a,s,l,c=an(t,o);if(c)return null!==(a=o.csp)&&void 0!==a&&a.nonce&&c.nonce!==(null===(s=o.csp)||void 0===s?void 0:s.nonce)&&(c.nonce=null===(l=o.csp)||void 0===l?void 0:l.nonce),c.innerHTML!==e&&(c.innerHTML=e),c;var u=on(e,o);return u.setAttribute(tn(o),t),u}function cn(e,t,r){var i=n.useRef({});return"value"in i.current&&!r(i.current.condition,t)||(i.current.value=e(),i.current.condition=t),i.current.value}var un={},hn=[];function dn(e,t){}function fn(e,t){}function pn(e,t,n){t||un[n]||(e(!1,n),un[n]=!0)}function mn(e,t){pn(dn,e,t)}mn.preMessage=function(e){hn.push(e)},mn.resetWarned=function(){un={}},mn.noteOnce=function(e,t){pn(fn,e,t)};const gn=mn,vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(gn(!a,"Warning: There may be circular references"),a)return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var s=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l],s))return!1;return!0}if(t&&i&&"object"===zt(t)&&"object"===zt(i)){var c=Object.keys(t);return c.length===Object.keys(i).length&&c.every((function(n){return e(t[n],i[n],s)}))}return!1}(e,t)};function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ut(r.key),r)}}function xn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _n(e){return e.join("%")}const wn=function(){function e(t){yn(this,e),Ft(this,"instanceId",void 0),Ft(this,"cache",new Map),this.instanceId=t}return xn(e,[{key:"get",value:function(e){return this.opGet(_n(e))}},{key:"opGet",value:function(e){return this.cache.get(e)||null}},{key:"update",value:function(e,t){return this.opUpdate(_n(e),t)}},{key:"opUpdate",value:function(e,t){var n=t(this.cache.get(e));null===n?this.cache.delete(e):this.cache.set(e,n)}}]),e}();var Sn="data-token-hash",En="data-css-hash",Cn="__cssinjs_instance__";const Mn=n.createContext({hashPriority:"low",cache:function(){var e=Math.random().toString(12).slice(2);if("undefined"!=typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(En,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[Cn]=t[Cn]||e,t[Cn]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(En,"]"))).forEach((function(t){var n,i=t.getAttribute(En);r[i]?t[Cn]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[i]=!0}))}return new wn(e)}(),defaultCache:!0});new RegExp("CALC_UNIT","g");var Tn=function(){function e(){yn(this,e),Ft(this,"cache",void 0),Ft(this,"keys",void 0),Ft(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return xn(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return e.forEach((function(e){var t;i=i?null===(t=i)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.get(e):void 0})),null!==(t=i)&&void 0!==t&&t.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var i=this.keys.reduce((function(e,t){var n=Ht(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),o=Ht(i,1)[0];this.delete(o)}this.keys.push(t)}var a=this.cache;t.forEach((function(e,i){if(i===t.length-1)a.set(e,{value:[n,r.cacheCallTimes++]});else{var o=a.get(e);o?o.map||(o.map=new Map):a.set(e,{map:new Map}),a=a.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),i}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();Ft(Tn,"MAX_CACHE_SIZE",20),Ft(Tn,"MAX_CACHE_OFFSET",5);var An=0,Pn=function(){function e(t){yn(this,e),Ft(this,"derivatives",void 0),Ft(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=An,0===t.length&&t.length,An+=1}return xn(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),Rn=new Tn;function In(e){var t=Array.isArray(e)?e:[e];return Rn.has(t)||Rn.set(t,new Pn(t)),Rn.get(t)}var On=new WeakMap,kn={},Ln=new WeakMap;function Nn(e){var t=Ln.get(e)||"";return t||(Object.keys(e).forEach((function(n){var r=e[n];t+=n,r instanceof Pn?t+=r.id:r&&"object"===zt(r)?t+=Nn(r):t+=r})),t=Yt(t),Ln.set(e,t)),t}function Dn(e,t){return Yt("".concat(t,"_").concat(Nn(e)))}"random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,"");var zn=Kt();function Un(e){return"number"==typeof e?"".concat(e,"px"):e}function Fn(e,t,n){var r;if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return e;var i=Xt(Xt({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),{},(Ft(r={},Sn,t),Ft(r,En,n),r)),o=Object.keys(i).map((function(e){var t=i[e];return t?"".concat(e,'="').concat(t,'"'):null})).filter((function(e){return e})).join(" ");return"<style ".concat(o,">").concat(e,"</style>")}var Bn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(t?"".concat(t,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},jn=function(e,t,n){return Object.keys(e).length?".".concat(t).concat(null!=n&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(e).map((function(e){var t=Ht(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r,";")})).join(""),"}"):""},Vn=function(e,t,n){var r={},i={};return Object.entries(e).forEach((function(e){var t,o,a=Ht(e,2),s=a[0],l=a[1];if(null!=n&&null!==(t=n.preserve)&&void 0!==t&&t[s])i[s]=l;else if(!("string"!=typeof l&&"number"!=typeof l||null!=n&&null!==(o=n.ignore)&&void 0!==o&&o[s])){var c,u=Bn(s,null==n?void 0:n.prefix);r[u]="number"!=typeof l||null!=n&&null!==(c=n.unitless)&&void 0!==c&&c[s]?String(l):"".concat(l,"px"),i[s]="var(".concat(u,")")}})),[i,jn(r,t,{scope:null==n?void 0:n.scope})]},$n=Kt()?n.useLayoutEffect:n.useEffect,Hn=function(e,t){var r=n.useRef(!0);$n((function(){return e(r.current)}),t),$n((function(){return r.current=!1,function(){r.current=!0}}),[])},Gn=function(e,t){Hn((function(t){if(!t)return e()}),t)};const Wn=Hn;var qn=Xt({},r).useInsertionEffect;const Xn=qn?function(e,t,n){return qn((function(){return e(),t()}),n)}:function(e,t,r){n.useMemo(e,r),Wn((function(){return t(!0)}),r)},Yn=void 0!==Xt({},r).useInsertionEffect?function(e){var t=[],r=!1;return n.useEffect((function(){return r=!1,function(){r=!0,t.length&&t.forEach((function(e){return e()}))}}),e),function(e){r||t.push(e)}}:function(){return function(e){e()}};function Kn(e,t,r,i,o){var a=n.useContext(Mn).cache,s=_n([e].concat(Wt(t))),l=Yn([s]),c=function(e){a.opUpdate(s,(function(t){var n=Ht(t||[void 0,void 0],2),i=n[0],o=[void 0===i?0:i,n[1]||r()];return e?e(o):o}))};n.useMemo((function(){c()}),[s]);var u=a.opGet(s)[1];return Xn((function(){null==o||o(u)}),(function(e){return c((function(t){var n=Ht(t,2),r=n[0],i=n[1];return e&&0===r&&(null==o||o(u)),[r+1,i]})),function(){a.opUpdate(s,(function(t){var n=Ht(t||[],2),r=n[0],o=void 0===r?0:r,c=n[1];return 0==o-1?(l((function(){!e&&a.opGet(s)||null==i||i(c,!1)})),null):[o-1,c]}))}}),[s]),u}var Zn={},Jn=new Map;var Qn=function(e,t,n,r){var i=Xt(Xt({},n.getDerivativeToken(e)),t);return r&&(i=r(i)),i},er="token";function tr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,n.useContext)(Mn),o=i.cache.instanceId,a=i.container,s=r.salt,l=void 0===s?"":s,c=r.override,u=void 0===c?Zn:c,h=r.formatToken,d=r.getComputedToken,f=r.cssVar,p=function(e,n){for(var r=On,i=0;i<n.length;i+=1){var o=n[i];r.has(o)||r.set(o,new WeakMap),r=r.get(o)}return r.has(kn)||r.set(kn,Object.assign.apply(Object,[{}].concat(Wt(t)))),r.get(kn)}(0,t),m=Nn(p),g=Nn(u),v=f?Nn(f):"";return Kn(er,[l,e.id,m,g,v],(function(){var t,n=d?d(p,u,e):Qn(p,u,e,h),r=Xt({},n),i="";if(f){var o=Ht(Vn(n,f.key,{prefix:f.prefix,ignore:f.ignore,unitless:f.unitless,preserve:f.preserve}),2);n=o[0],i=o[1]}var a=Dn(n,l);n._tokenKey=a,r._tokenKey=Dn(r,l);var s=null!==(t=null==f?void 0:f.key)&&void 0!==t?t:a;n._themeKey=s,function(e){Jn.set(e,(Jn.get(e)||0)+1)}(s);var c="".concat("css","-").concat(Yt(a));return n._hashId=c,[n,c,r,i,(null==f?void 0:f.key)||""]}),(function(e){!function(e,t){Jn.set(e,(Jn.get(e)||0)-1);var n=Array.from(Jn.keys()),r=n.filter((function(e){return(Jn.get(e)||0)<=0}));n.length-r.length>0&&r.forEach((function(e){!function(e,t){"undefined"!=typeof document&&document.querySelectorAll("style[".concat(Sn,'="').concat(e,'"]')).forEach((function(e){var n;e[Cn]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),Jn.delete(e)}))}(e[0]._themeKey,o)}),(function(e){var t=Ht(e,4),n=t[0],r=t[3];if(f&&r){var i=ln(r,Yt("css-variables-".concat(n._themeKey)),{mark:En,prepend:"queue",attachTo:a,priority:-999});i[Cn]=o,i.setAttribute(Sn,n._themeKey)}}))}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(null,arguments)}const rr={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ir="comm",or="rule",ar="decl",sr=Math.abs,lr=String.fromCharCode;function cr(e){return e.trim()}function ur(e,t,n){return e.replace(t,n)}function hr(e,t,n){return e.indexOf(t,n)}function dr(e,t){return 0|e.charCodeAt(t)}function fr(e,t,n){return e.slice(t,n)}function pr(e){return e.length}function mr(e,t){return t.push(e),e}function gr(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function vr(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ar:return e.return=e.return||e.value;case ir:return"";case"@keyframes":return e.return=e.value+"{"+gr(e.children,r)+"}";case or:if(!pr(e.value=e.props.join(",")))return""}return pr(n=gr(e.children,r))?e.return=e.value+"{"+n+"}":""}Object.assign;var yr=1,br=1,xr=0,_r=0,wr=0,Sr="";function Er(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:yr,column:br,length:a,return:"",siblings:s}}function Cr(){return wr=_r<xr?dr(Sr,_r++):0,br++,10===wr&&(br=1,yr++),wr}function Mr(){return dr(Sr,_r)}function Tr(){return _r}function Ar(e,t){return fr(Sr,e,t)}function Pr(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rr(e){return cr(Ar(_r-1,kr(91===e?e+2:40===e?e+1:e)))}function Ir(e){for(;(wr=Mr())&&wr<33;)Cr();return Pr(e)>2||Pr(wr)>3?"":" "}function Or(e,t){for(;--t&&Cr()&&!(wr<48||wr>102||wr>57&&wr<65||wr>70&&wr<97););return Ar(e,Tr()+(t<6&&32==Mr()&&32==Cr()))}function kr(e){for(;Cr();)switch(wr){case e:return _r;case 34:case 39:34!==e&&39!==e&&kr(wr);break;case 40:41===e&&kr(e);break;case 92:Cr()}return _r}function Lr(e,t){for(;Cr()&&e+wr!==57&&(e+wr!==84||47!==Mr()););return"/*"+Ar(t,_r-1)+"*"+lr(47===e?e:Cr())}function Nr(e){for(;!Pr(Mr());)Cr();return Ar(e,_r)}function Dr(e){return function(e){return Sr="",e}(zr("",null,null,null,[""],e=function(e){return yr=br=1,xr=pr(Sr=e),_r=0,[]}(e),0,[0],e))}function zr(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",x=i,_=o,w=r,S=b;g;)switch(p=y,y=Cr()){case 40:if(108!=p&&58==dr(S,h-1)){-1!=hr(S+=ur(Rr(y),"&","&\f"),"&\f",sr(c?s[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=Rr(y);break;case 9:case 10:case 13:case 32:S+=Ir(p);break;case 92:S+=Or(Tr()-1,7);continue;case 47:switch(Mr()){case 42:case 47:mr(Fr(Lr(Cr(),Tr()),t,n,l),l),5!=Pr(p||1)&&5!=Pr(Mr()||1)||!pr(S)||" "===fr(S,-1,void 0)||(S+=" ");break;default:S+="/"}break;case 123*m:s[c++]=pr(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(S=ur(S,/\f/g,"")),f>0&&(pr(S)-h||0===m&&47===p)&&mr(f>32?Br(S+";",r,n,h-1,l):Br(ur(S," ","")+";",r,n,h-2,l),l);break;case 59:S+=";";default:if(mr(w=Ur(S,t,n,c,u,i,s,b,x=[],_=[],h,o),o),123===y)if(0===u)zr(S,t,w,w,x,o,h,s,_);else switch(99===d&&110===dr(S,3)?100:d){case 100:case 108:case 109:case 115:zr(e,w,w,r&&mr(Ur(e,w,w,0,0,i,s,b,i,x=[],h,_),_),i,_,h,s,r?x:_);break;default:zr(S,w,w,w,[""],_,0,s,_)}}c=u=f=0,m=v=1,b=S="",h=a;break;case 58:h=1+pr(S),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==(wr=_r>0?dr(Sr,--_r):0,br--,10===wr&&(br=1,yr--),wr))continue;switch(S+=lr(y),y*m){case 38:v=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(pr(S)-1)*v,v=1;break;case 64:45===Mr()&&(S+=Rr(Cr())),d=Mr(),u=h=pr(b=S+=Nr(Tr())),y++;break;case 45:45===p&&2==pr(S)&&(m=0)}}return o}function Ur(e,t,n,r,i,o,a,s,l,c,u,h){for(var d=i-1,f=0===i?o:[""],p=function(e){return e.length}(f),m=0,g=0,v=0;m<r;++m)for(var y=0,b=fr(e,d+1,d=sr(g=a[m])),x=e;y<p;++y)(x=cr(g>0?f[y]+" "+b:ur(b,/&\f/g,f[y])))&&(l[v++]=x);return Er(e,t,n,0===i?or:s,l,c,u,h)}function Fr(e,t,n,r){return Er(e,t,n,ir,lr(wr),fr(e,2,-2),0,r)}function Br(e,t,n,r,i){return Er(e,t,n,ar,fr(e,0,r),fr(e,r+1,-1),r,i)}var jr,Vr="data-ant-cssinjs-cache-path",$r="_FILE_STYLE__",Hr=!0;var Gr="_multi_value_";function Wr(e){return gr(Dr(e),vr).replace(/\{%%%\:[^;];}/g,";")}var qr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,s=n.hashId,l=n.layer,c=(n.path,n.hashPriority),u=n.transformers,h=void 0===u?[]:u,d=(n.linters,""),f={};function p(t){var r=t.getName(s);if(!f[r]){var i=Ht(e(t.style,n,{root:!1,parentSelectors:a}),1)[0];f[r]="@keyframes ".concat(t.getName(s)).concat(i)}}var m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);return m.forEach((function(t){var r="string"!=typeof t||i?t:{};if("string"==typeof r)d+="".concat(r,"\n");else if(r._keyframe)p(r);else{var l=h.reduce((function(e,t){var n;return(null==t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(l).forEach((function(t){var r=l[t];if("object"!==zt(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===zt(e)&&e&&("_skip_check_"in e||Gr in e)}(r)){var u;function _(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;rr[e]||"number"!=typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!=t&&t._keyframe&&(p(t),r=t.getName(s)),d+="".concat(n,":").concat(r,";")}var h=null!==(u=null==r?void 0:r.value)&&void 0!==u?u:r;"object"===zt(r)&&null!=r&&r[Gr]&&Array.isArray(h)?h.forEach((function(e){_(t,e)})):_(t,h)}else{var m=!1,g=t.trim(),v=!1;(i||o)&&s?g.startsWith("@")?m=!0:g=function(e,t,n){if(!t)return e;var r=".".concat(t),i="low"===n?":where(".concat(r,")"):r;return e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",o=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(o).concat(i).concat(r.slice(o.length))].concat(Wt(n.slice(1))).join(" ")})).join(",")}("&"===g?"":t,s,c):!i||s||"&"!==g&&""!==g||(g="",v=!0);var y=Ht(e(r,n,{root:v,injectHash:m,parentSelectors:[].concat(Wt(a),[g])}),2),b=y[0],x=y[1];f=Xt(Xt({},f),x),d+="".concat(g).concat(b)}}))}})),i?l&&(d&&(d="@layer ".concat(l.name," {").concat(d,"}")),l.dependencies&&(f["@layer ".concat(l.name)]=l.dependencies.map((function(e){return"@layer ".concat(e,", ").concat(l.name,";")})).join("\n"))):d="{".concat(d,"}"),[d,f]};function Xr(e,t){return Yt("".concat(e.join("%")).concat(t))}function Yr(){return null}var Kr="style";function Zr(e,t){var r=e.token,i=e.path,o=e.hashId,a=e.layer,s=e.nonce,l=e.clientOnly,c=e.order,u=void 0===c?0:c,h=n.useContext(Mn),d=h.autoClear,f=(h.mock,h.defaultCache),p=h.hashPriority,m=h.container,g=h.ssrInline,v=h.transformers,y=h.linters,b=h.cache,x=h.layer,_=r._tokenKey,w=[_];x&&w.push("layer"),w.push.apply(w,Wt(i));var S=zn,E=Kn(Kr,w,(function(){var e=w.join("|");if(function(e){return function(){if(!jr&&(jr={},Kt())){var e=document.createElement("div");e.className=Vr,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";(t=t.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(e){var t=Ht(e.split(":"),2),n=t[0],r=t[1];jr[n]=r}));var n,r=document.querySelector("style[".concat(Vr,"]"));r&&(Hr=!1,null===(n=r.parentNode)||void 0===n||n.removeChild(r)),document.body.removeChild(e)}}(),!!jr[e]}(e)){var n=function(e){var t=jr[e],n=null;if(t&&Kt())if(Hr)n=$r;else{var r=document.querySelector("style[".concat(En,'="').concat(jr[e],'"]'));r?n=r.innerHTML:delete jr[e]}return[n,t]}(e),r=Ht(n,2),s=r[0],c=r[1];if(s)return[s,_,c,{},l,u]}var h=t(),d=Ht(qr(h,{hashId:o,hashPriority:p,layer:x?a:void 0,path:i.join("-"),transformers:v,linters:y}),2),f=d[0],m=d[1],g=Wr(f),b=Xr(w,g);return[g,_,b,m,l,u]}),(function(e,t){var n=Ht(e,3)[2];(t||d)&&zn&&sn(n,{mark:En})}),(function(e){var t=Ht(e,4),n=t[0],r=(t[1],t[2]),i=t[3];if(S&&n!==$r){var o={mark:En,prepend:!x&&"queue",attachTo:m,priority:u},a="function"==typeof s?s():s;a&&(o.csp={nonce:a});var l=[],c=[];Object.keys(i).forEach((function(e){e.startsWith("@layer")?l.push(e):c.push(e)})),l.forEach((function(e){ln(Wr(i[e]),"_layer-".concat(e),Xt(Xt({},o),{},{prepend:!0}))}));var h=ln(n,r,o);h[Cn]=b.instanceId,h.setAttribute(Sn,_),c.forEach((function(e){ln(Wr(i[e]),"_effect-".concat(e),o)}))}})),C=Ht(E,3),M=C[0],T=C[1],A=C[2];return function(e){var t,r;return t=g&&!S&&f?n.createElement("style",nr({},(Ft(r={},Sn,T),Ft(r,En,A),r),{dangerouslySetInnerHTML:{__html:M}})):n.createElement(Yr,null),n.createElement(n.Fragment,null,t,e)}}var Jr="cssVar";var Qr;Ft(Qr={},Kr,(function(e,t,n){var r=Ht(e,6),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=(n||{}).plain;if(l)return null;var h=i,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)};return h=Fn(i,o,a,d,u),s&&Object.keys(s).forEach((function(e){if(!t[e]){t[e]=!0;var n=Fn(Wr(s[e]),o,"_effect-".concat(e),d,u);e.startsWith("@layer")?h=n+h:h+=n}})),[c,a,h]})),Ft(Qr,er,(function(e,t,n){var r=Ht(e,5),i=r[2],o=r[3],a=r[4],s=(n||{}).plain;if(!o)return null;var l=i._tokenKey;return[-999,l,Fn(o,a,l,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]})),Ft(Qr,Jr,(function(e,t,n){var r=Ht(e,4),i=r[1],o=r[2],a=r[3],s=(n||{}).plain;return i?[-999,o,Fn(i,a,o,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]:null}));const ei=function(){function e(t,n){yn(this,e),Ft(this,"name",void 0),Ft(this,"style",void 0),Ft(this,"_keyframe",!0),this.name=t,this.style=n}return xn(e,[{key:"getName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e,"-").concat(this.name):this.name}}]),e}();function ti(e){return e.notSplit=!0,e}function ni(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function ri(e){return Math.min(1,Math.max(0,e))}function ii(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function oi(e){return e<=1?"".concat(100*Number(e),"%"):e}function ai(e){return 1===e.length?"0"+e:String(e)}function si(e,t,n){e=ni(e,255),t=ni(t,255),n=ni(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=0,s=(r+i)/2;if(r===i)a=0,o=0;else{var l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:a,l:s}}function li(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ci(e,t,n){e=ni(e,255),t=ni(t,255),n=ni(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=r,s=r-i,l=0===r?0:s/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:l,v:a}}function ui(e,t,n,r){var i=[ai(Math.round(e).toString(16)),ai(Math.round(t).toString(16)),ai(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function hi(e){return di(e)/255}function di(e){return parseInt(e,16)}ti(["borderTop","borderBottom"]),ti(["borderTop"]),ti(["borderBottom"]),ti(["borderLeft","borderRight"]),ti(["borderLeft"]),ti(["borderRight"]);var fi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function pi(e){var t,n,r,i={r:0,g:0,b:0},o=1,a=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(fi[e])e=fi[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=yi.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=yi.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=yi.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=yi.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=yi.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=yi.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=yi.hex8.exec(e))?{r:di(n[1]),g:di(n[2]),b:di(n[3]),a:hi(n[4]),format:t?"name":"hex8"}:(n=yi.hex6.exec(e))?{r:di(n[1]),g:di(n[2]),b:di(n[3]),format:t?"name":"hex"}:(n=yi.hex4.exec(e))?{r:di(n[1]+n[1]),g:di(n[2]+n[2]),b:di(n[3]+n[3]),a:hi(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=yi.hex3.exec(e))&&{r:di(n[1]+n[1]),g:di(n[2]+n[2]),b:di(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(bi(e.r)&&bi(e.g)&&bi(e.b)?(t=e.r,n=e.g,r=e.b,i={r:255*ni(t,255),g:255*ni(n,255),b:255*ni(r,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):bi(e.h)&&bi(e.s)&&bi(e.v)?(a=oi(e.s),s=oi(e.v),i=function(e,t,n){e=6*ni(e,360),t=ni(t,100),n=ni(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(e.h,a,s),c=!0,u="hsv"):bi(e.h)&&bi(e.s)&&bi(e.l)&&(a=oi(e.s),l=oi(e.l),i=function(e,t,n){var r,i,o;if(e=ni(e,360),t=ni(t,100),n=ni(n,100),0===t)i=n,o=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=li(s,a,e+1/3),i=li(s,a,e),o=li(s,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,a,l),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=ii(o),{ok:c,format:e.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o}}var mi="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),gi="[\\s|\\(]+(".concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")\\s*\\)?"),vi="[\\s|\\(]+(".concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")\\s*\\)?"),yi={CSS_UNIT:new RegExp(mi),rgb:new RegExp("rgb"+gi),rgba:new RegExp("rgba"+vi),hsl:new RegExp("hsl"+gi),hsla:new RegExp("hsla"+vi),hsv:new RegExp("hsv"+gi),hsva:new RegExp("hsva"+vi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function bi(e){return Boolean(yi.CSS_UNIT.exec(String(e)))}var xi=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function _i(e){var t=ci(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function wi(e){var t=e.r,n=e.g,r=e.b;return"#".concat(ui(t,n,r,!1))}function Si(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function Ei(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Ci(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function Mi(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=pi(e),i=5;i>0;i-=1){var o=_i(r),a=wi(pi({h:Si(o,i,!0),s:Ei(o,i,!0),v:Ci(o,i,!0)}));n.push(a)}n.push(wi(r));for(var s=1;s<=4;s+=1){var l=_i(r),c=wi(pi({h:Si(l,s),s:Ei(l,s),v:Ci(l,s)}));n.push(c)}return"dark"===t.theme?xi.map((function(e){var r,i,o,a=e.index,s=e.opacity;return wi((r=pi(t.backgroundColor||"#141414"),o=100*s/100,{r:((i=pi(n[a])).r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b}))})):n}var Ti={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ai=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ai.primary=Ai[5];var Pi=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Pi.primary=Pi[5];var Ri=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Ri.primary=Ri[5];var Ii=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Ii.primary=Ii[5];var Oi=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Oi.primary=Oi[5];var ki=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];ki.primary=ki[5];var Li=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Li.primary=Li[5];var Ni=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Ni.primary=Ni[5];var Di=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Di.primary=Di[5];var zi=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];zi.primary=zi[5];var Ui=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Ui.primary=Ui[5];var Fi=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Fi.primary=Fi[5];var Bi=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Bi.primary=Bi[5];var ji={red:Ai,volcano:Pi,orange:Ri,gold:Ii,yellow:Oi,lime:ki,green:Li,cyan:Ni,blue:Di,geekblue:zi,purple:Ui,magenta:Fi,grey:Bi},Vi=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];Vi.primary=Vi[5];var $i=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];$i.primary=$i[5];var Hi=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];Hi.primary=Hi[5];var Gi=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];Gi.primary=Gi[5];var Wi=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];Wi.primary=Wi[5];var qi=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];qi.primary=qi[5];var Xi=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];Xi.primary=Xi[5];var Yi=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];Yi.primary=Yi[5];var Ki=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];Ki.primary=Ki[5];var Zi=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];Zi.primary=Zi[5];var Ji=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];Ji.primary=Ji[5];var Qi=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];Qi.primary=Qi[5];var eo=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];eo.primary=eo[5];const to={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},no=Object.assign(Object.assign({},to),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var ro=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=pi(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=ii(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=ci(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=ci(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=si(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=si(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),ui(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var o,a=[ai(Math.round(e).toString(16)),ai(Math.round(t).toString(16)),ai(Math.round(n).toString(16)),ai((o=r,Math.round(255*parseFloat(o)).toString(16)))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*ni(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*ni(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+ui(this.r,this.g,this.b,!1),t=0,n=Object.entries(fi);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=ri(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=ri(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=ri(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=ri(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),o=n/100;return new e({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new e(r));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(new e({h:r,s:i,v:o})),o=(o+s)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],o=360/t,a=1;a<t;a++)i.push(new e({h:(r+a*o)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function io(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:i,colorWarning:o,colorError:a,colorInfo:s,colorPrimary:l,colorBgBase:c,colorTextBase:u}=e,h=n(l),d=n(i),f=n(o),p=n(a),m=n(s),g=r(c,u),v=n(e.colorLink||e.colorInfo),y=new ro(p[1]).mix(new ro(p[3]),50).toHexString();return Object.assign(Object.assign({},g),{colorPrimaryBg:h[1],colorPrimaryBgHover:h[2],colorPrimaryBorder:h[3],colorPrimaryBorderHover:h[4],colorPrimaryHover:h[5],colorPrimary:h[6],colorPrimaryActive:h[7],colorPrimaryTextHover:h[8],colorPrimaryText:h[9],colorPrimaryTextActive:h[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBgFilledHover:y,colorErrorBgActive:p[3],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:m[1],colorInfoBgHover:m[2],colorInfoBorder:m[3],colorInfoBorderHover:m[4],colorInfoHover:m[4],colorInfo:m[6],colorInfoActive:m[7],colorInfoTextHover:m[8],colorInfoText:m[9],colorInfoTextActive:m[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new ro("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const oo=e=>{const{controlHeight:t}=e;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}};function ao(e){return(e+8)/e}const so=e=>{const t=function(e){const t=new Array(10).fill(null).map(((t,n)=>{const r=n-1,i=e*Math.pow(Math.E,r/5),o=n>1?Math.floor(i):Math.ceil(i);return 2*Math.floor(o/2)}));return t[1]=e,t.map((e=>({size:e,lineHeight:ao(e)})))}(e),n=t.map((e=>e.size)),r=t.map((e=>e.lineHeight)),i=n[1],o=n[0],a=n[2],s=r[1],l=r[0],c=r[2];return{fontSizeSM:o,fontSize:i,fontSizeLG:a,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:s,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(s*i),fontHeightLG:Math.round(c*a),fontHeightSM:Math.round(l*o),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},lo=(e,t)=>new ro(e).setAlpha(t).toRgbString(),co=(e,t)=>new ro(e).darken(t).toHexString(),uo=e=>{const t=Mi(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},ho=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:lo(r,.88),colorTextSecondary:lo(r,.65),colorTextTertiary:lo(r,.45),colorTextQuaternary:lo(r,.25),colorFill:lo(r,.15),colorFillSecondary:lo(r,.06),colorFillTertiary:lo(r,.04),colorFillQuaternary:lo(r,.02),colorBgSolid:lo(r,1),colorBgSolidHover:lo(r,.75),colorBgSolidActive:lo(r,.95),colorBgLayout:co(n,4),colorBgContainer:co(n,0),colorBgElevated:co(n,0),colorBgSpotlight:lo(r,.85),colorBgBlur:"transparent",colorBorder:co(n,15),colorBorderSecondary:co(n,6)}};function fo(e){Ti.pink=Ti.magenta,ji.pink=ji.magenta;const t=Object.keys(to).map((t=>{const n=e[t]===Ti[t]?ji[t]:Mi(e[t]);return new Array(10).fill(1).reduce(((e,r,i)=>(e[`${t}-${i+1}`]=n[i],e[`${t}${i+1}`]=n[i],e)),{})})).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),io(e,{generateColorPalettes:uo,generateNeutralColorPalettes:ho})),so(e.fontSize)),function(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),oo(e)),function(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:i}=e;return Object.assign({motionDurationFast:`${(n+t).toFixed(1)}s`,motionDurationMid:`${(n+2*t).toFixed(1)}s`,motionDurationSlow:`${(n+3*t).toFixed(1)}s`,lineWidthBold:i+1},(e=>{let t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}})(r))}(e))}function po(e){return e>=0&&e<=255}const mo=function(e,t){const{r:n,g:r,b:i,a:o}=new ro(e).toRgb();if(o<1)return e;const{r:a,g:s,b:l}=new ro(t).toRgb();for(let e=.01;e<=1;e+=.01){const t=Math.round((n-a*(1-e))/e),o=Math.round((r-s*(1-e))/e),c=Math.round((i-l*(1-e))/e);if(po(t)&&po(o)&&po(c))return new ro({r:t,g:o,b:c,a:Math.round(100*e)/100}).toRgbString()}return new ro({r:n,g:r,b:i,a:1}).toRgbString()};function go(e){const{override:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["override"]),r=Object.assign({},t);Object.keys(no).forEach((e=>{delete r[e]}));const i=Object.assign(Object.assign({},n),r);if(!1===i.motion){const e="0s";i.motionDurationFast=e,i.motionDurationMid=e,i.motionDurationSlow=e}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:mo(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:mo(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:mo(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:3*i.lineWidth,lineWidth:i.lineWidth,controlOutlineWidth:2*i.lineWidth,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:mo(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:1200,screenXLMin:1200,screenXLMax:1599,screenXXL:1600,screenXXLMin:1600,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`\n      0 1px 2px -2px ${new ro("rgba(0, 0, 0, 0.16)").toRgbString()},\n      0 3px 6px 0 ${new ro("rgba(0, 0, 0, 0.12)").toRgbString()},\n      0 5px 12px 4px ${new ro("rgba(0, 0, 0, 0.09)").toRgbString()}\n    `,boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}const vo=In(fo),yo={token:no,override:{override:no},hashed:!0},bo=n.createContext(yo);var xo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const _o={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},wo={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},So={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Eo=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:i}=t,o=xo(t,["override"]);let a=Object.assign(Object.assign({},r),{override:i});return a=go(a),o&&Object.entries(o).forEach((e=>{let[t,n]=e;const{theme:r}=n,i=xo(n,["theme"]);let o=i;r&&(o=Eo(Object.assign(Object.assign({},a),i),{override:i},r)),a[t]=o})),a};function Co(){const{token:e,hashed:t,theme:r,override:i,cssVar:o}=n.useContext(bo),a=`5.22.3-${t||""}`,s=r||vo,[l,c,u]=tr(s,[no,e],{salt:a,override:i,getComputedToken:Eo,formatToken:go,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:_o,ignore:wo,preserve:So}});return[s,u,t?c:"",l,o]}const Mo=(e,t)=>new ro(e).setAlpha(t).toRgbString(),To=(e,t)=>new ro(e).lighten(t).toHexString(),Ao=e=>{const t=Mi(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},Po=(e,t)=>{const n=e||"#000",r=t||"#fff";return{colorBgBase:n,colorTextBase:r,colorText:Mo(r,.85),colorTextSecondary:Mo(r,.65),colorTextTertiary:Mo(r,.45),colorTextQuaternary:Mo(r,.25),colorFill:Mo(r,.18),colorFillSecondary:Mo(r,.12),colorFillTertiary:Mo(r,.08),colorFillQuaternary:Mo(r,.04),colorBgSolid:Mo(r,.95),colorBgSolidHover:Mo(r,1),colorBgSolidActive:Mo(r,.9),colorBgElevated:To(n,12),colorBgContainer:To(n,8),colorBgLayout:To(n,0),colorBgSpotlight:To(n,26),colorBgBlur:Mo(r,.04),colorBorder:To(n,26),colorBorderSecondary:To(n,19)}},Ro=(e,t)=>{const n=Object.keys(to).map((t=>{const n=Mi(e[t],{theme:"dark"});return new Array(10).fill(1).reduce(((e,r,i)=>(e[`${t}-${i+1}`]=n[i],e[`${t}${i+1}`]=n[i],e)),{})})).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{}),r=null!=t?t:fo(e);return Object.assign(Object.assign(Object.assign({},r),n),io(e,{generateColorPalettes:Ao,generateNeutralColorPalettes:Po}))},Io=(0,n.createContext)({});function Oo(e){return Bt(e)||Gt(e)||Vt(e)||$t()}function ko(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function Lo(e,t,n,r){if(!t.length)return n;var i,o=Oo(t),a=o[0],s=o.slice(1);return i=e||"number"!=typeof a?Array.isArray(e)?Wt(e):Xt({},e):[],r&&void 0===n&&1===s.length?delete i[a][s[0]]:i[a]=Lo(i[a],s,n,r),i}function No(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!ko(e,t.slice(0,-1))?e:Lo(e,t,n,r)}function Do(e){return Array.isArray(e)?[]:{}}var zo="undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function Uo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Do(t[0]);return t.forEach((function(e){!function t(n,i){var o,a=new Set(i),s=ko(e,n),l=Array.isArray(s);if(l||"object"===zt(o=s)&&null!==o&&Object.getPrototypeOf(o)===Object.prototype){if(!a.has(s)){a.add(s);var c=ko(r,n);l?r=No(r,n,[]):c&&"object"===zt(c)||(r=No(r,n,Do(s))),zo(s).forEach((function(e){t([].concat(Wt(n),[e]),a)}))}}else r=No(r,n,s)}([])})),r}function Fo(){}const Bo=n.createContext({}),jo=()=>{const e=()=>{};return e.deprecated=Fo,e},Vo=(0,n.createContext)(void 0),$o={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},Ho=Xt(Xt({},{yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),Go={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Wo={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Ho),timePickerLocale:Object.assign({},Go)},qo="${label} is not a valid ${type}",Xo={locale:"en",Pagination:$o,DatePicker:Wo,TimePicker:Go,Calendar:Wo,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:qo,method:qo,array:qo,object:qo,number:qo,date:qo,boolean:qo,integer:qo,float:qo,regexp:qo,email:qo,url:qo,hex:qo},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let Yo=Object.assign({},Xo.Modal),Ko=[];const Zo=()=>Ko.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),Xo.Modal);function Jo(){return Yo}const Qo=(0,n.createContext)(void 0),ea=e=>{const{locale:t={},children:r,_ANT_MARK__:i}=e;n.useEffect((()=>{const e=function(e){if(e){const t=Object.assign({},e);return Ko.push(t),Yo=Zo(),()=>{Ko=Ko.filter((e=>e!==t)),Yo=Zo()}}Yo=Object.assign({},Xo.Modal)}(null==t?void 0:t.Modal);return e}),[t]);const o=n.useMemo((()=>Object.assign(Object.assign({},t),{exist:!0})),[t]);return n.createElement(Qo.Provider,{value:o},r)},ta="ant",na="anticon",ra=["outlined","borderless","filled"],ia=n.createContext({getPrefixCls:(e,t)=>t||(e?`${ta}-${e}`:ta),iconPrefixCls:na}),{Consumer:oa}=ia,aa=`-ant-${Date.now()}-${Math.random()}`;const sa=n.createContext(!1),la=e=>{let{children:t,disabled:r}=e;const i=n.useContext(sa);return n.createElement(sa.Provider,{value:null!=r?r:i},t)},ca=sa,ua=n.createContext(void 0),ha=e=>{let{children:t,size:r}=e;const i=n.useContext(ua);return n.createElement(ua.Provider,{value:r||i},t)},da=ua,fa=Object.assign({},r),{useId:pa}=fa,ma=void 0===pa?()=>"":pa;var ga=a(6942),va=a.n(ga);function ya(e){return e instanceof HTMLElement||e instanceof SVGElement}function ba(e){var t,r=function(e){return e&&"object"===zt(e)&&ya(e.nativeElement)?e.nativeElement:ya(e)?e:null}(e);return r||(e instanceof n.Component?null===(t=o.findDOMNode)||void 0===t?void 0:t.call(o,e):null)}var xa=a(6351),_a=function(e,t){"function"==typeof e?e(t):"object"===zt(e)&&e&&"current"in e&&(e.current=t)},wa=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){_a(t,e)}))}},Sa=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cn((function(){return wa.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},Ea=function(e){var t,n,r=(0,xa.isMemo)(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===xa.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===xa.ForwardRef)};function Ca(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Number(n.version.split(".")[0]);var Ma=["children"],Ta=n.createContext({});function Aa(e){var t=e.children,r=Ca(e,Ma);return n.createElement(Ta.Provider,{value:r},t)}function Pa(e,t){return Pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pa(e,t)}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pa(e,t)}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ia(e)}function Oa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oa=function(){return!!e})()}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ka(e)}function Na(e){var t=Oa();return function(){var n,r=Ia(e);if(t){var i=Ia(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return La(this,n)}}const Da=function(e){Ra(n,e);var t=Na(n);function n(){return yn(this,n),t.apply(this,arguments)}return xn(n,[{key:"render",value:function(){return this.props.children}}]),n}(n.Component);function za(e){var t=n.useRef();t.current=e;var r=n.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return r}function Ua(e){var t=n.useRef(!1),r=Ht(n.useState(e),2),i=r[0],o=r[1];return n.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[i,function(e,n){n&&t.current||o(e)}]}function Fa(e){return void 0!==e}function Ba(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=Ht(Ua((function(){return Fa(i)?i:Fa(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),l=s[0],c=s[1],u=void 0!==i?i:l,h=a?a(u):u,d=za(o),f=Ht(Ua([u]),2),p=f[0],m=f[1];return Gn((function(){var e=p[0];l!==e&&d(l,e)}),[p]),Gn((function(){Fa(i)||c(i)}),[i]),[h,za((function(e,t){c(e,t),m([u],t)}))]}var ja="none",Va="appear",$a="enter",Ha="leave",Ga="none",Wa="prepare",qa="start",Xa="active",Ya="end",Ka="prepared";function Za(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var Ja,Qa,es,ts=(Ja=Kt(),Qa="undefined"!=typeof window?window:{},es={animationend:Za("Animation","AnimationEnd"),transitionend:Za("Transition","TransitionEnd")},Ja&&("AnimationEvent"in Qa||delete es.animationend.animation,"TransitionEvent"in Qa||delete es.transitionend.transition),es),ns={};if(Kt()){var rs=document.createElement("div");ns=rs.style}var is={};function os(e){if(is[e])return is[e];var t=ts[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in ns)return is[e]=t[o],is[e]}return""}var as=os("animationend"),ss=os("transitionend"),ls=!(!as||!ss),cs=as||"animationend",us=ss||"transitionend";function hs(e,t){return e?"object"===zt(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const ds=Kt()?n.useLayoutEffect:n.useEffect;var fs=function(e){return+setTimeout(e,16)},ps=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(fs=function(e){return window.requestAnimationFrame(e)},ps=function(e){return window.cancelAnimationFrame(e)});var ms=0,gs=new Map;function vs(e){gs.delete(e)}var ys=function(e){var t=ms+=1;return function n(r){if(0===r)vs(t),e();else{var i=fs((function(){n(r-1)}));gs.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};ys.cancel=function(e){var t=gs.get(e);return vs(e),ps(t)};const bs=ys;var xs=[Wa,qa,Xa,Ya],_s=[Wa,Ka],ws=!1;function Ss(e){return e===Xa||e===Ya}function Es(e,t,r,i){var o,a,s,l=i.motionEnter,c=void 0===l||l,u=i.motionAppear,h=void 0===u||u,d=i.motionLeave,f=void 0===d||d,p=i.motionDeadline,m=i.motionLeaveImmediately,g=i.onAppearPrepare,v=i.onEnterPrepare,y=i.onLeavePrepare,b=i.onAppearStart,x=i.onEnterStart,_=i.onLeaveStart,w=i.onAppearActive,S=i.onEnterActive,E=i.onLeaveActive,C=i.onAppearEnd,M=i.onEnterEnd,T=i.onLeaveEnd,A=i.onVisibleChanged,P=Ht(Ua(),2),R=P[0],I=P[1],O=(o=ja,a=Ht(n.useReducer((function(e){return e+1}),0),2)[1],s=n.useRef(o),[za((function(){return s.current})),za((function(e){s.current="function"==typeof e?e(s.current):e,a()}))]),k=Ht(O,2),L=k[0],N=k[1],D=Ht(Ua(null),2),z=D[0],U=D[1],F=L(),B=(0,n.useRef)(!1),j=(0,n.useRef)(null);function V(){return r()}var $=(0,n.useRef)(!1);function H(){N(ja),U(null,!0)}var G=za((function(e){var t=L();if(t!==ja){var n=V();if(!e||e.deadline||e.target===n){var r,i=$.current;t===Va&&i?r=null==C?void 0:C(n,e):t===$a&&i?r=null==M?void 0:M(n,e):t===Ha&&i&&(r=null==T?void 0:T(n,e)),i&&!1!==r&&H()}}})),W=function(e){var t=(0,n.useRef)();function r(t){t&&(t.removeEventListener(us,e),t.removeEventListener(cs,e))}return n.useEffect((function(){return function(){r(t.current)}}),[]),[function(n){t.current&&t.current!==n&&r(t.current),n&&n!==t.current&&(n.addEventListener(us,e),n.addEventListener(cs,e),t.current=n)},r]}(G),q=Ht(W,1)[0],X=function(e){switch(e){case Va:return Ft(Ft(Ft({},Wa,g),qa,b),Xa,w);case $a:return Ft(Ft(Ft({},Wa,v),qa,x),Xa,S);case Ha:return Ft(Ft(Ft({},Wa,y),qa,_),Xa,E);default:return{}}},Y=n.useMemo((function(){return X(F)}),[F]),K=Ht(function(e,t,r){var i=Ht(Ua(Ga),2),o=i[0],a=i[1],s=function(){var e=n.useRef(null);function t(){bs.cancel(e.current)}return n.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=bs((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),l=Ht(s,2),c=l[0],u=l[1],h=t?_s:xs;return ds((function(){if(o!==Ga&&o!==Ya){var e=h.indexOf(o),t=h[e+1],n=r(o);n===ws?a(t,!0):t&&c((function(e){function r(){e.isCanceled()||a(t,!0)}!0===n?r():Promise.resolve(n).then(r)}))}}),[e,o]),n.useEffect((function(){return function(){u()}}),[]),[function(){a(Wa,!0)},o]}(F,!e,(function(e){if(e===Wa){var t=Y[Wa];return t?t(V()):ws}var n;return J in Y&&U((null===(n=Y[J])||void 0===n?void 0:n.call(Y,V(),null))||null),J===Xa&&F!==ja&&(q(V()),p>0&&(clearTimeout(j.current),j.current=setTimeout((function(){G({deadline:!0})}),p))),J===Ka&&H(),!0})),2),Z=K[0],J=K[1],Q=Ss(J);$.current=Q,ds((function(){I(t);var n,r=B.current;B.current=!0,!r&&t&&h&&(n=Va),r&&t&&c&&(n=$a),(r&&!t&&f||!r&&m&&!t&&f)&&(n=Ha);var i=X(n);n&&(e||i[Wa])?(N(n),Z()):N(ja)}),[t]),(0,n.useEffect)((function(){(F===Va&&!h||F===$a&&!c||F===Ha&&!f)&&N(ja)}),[h,c,f]),(0,n.useEffect)((function(){return function(){B.current=!1,clearTimeout(j.current)}}),[]);var ee=n.useRef(!1);(0,n.useEffect)((function(){R&&(ee.current=!0),void 0!==R&&F===ja&&((ee.current||R)&&(null==A||A(R)),ee.current=!0)}),[R,F]);var te=z;return Y[Wa]&&J===qa&&(te=Xt({transition:"none"},te)),[F,J,te,null!=R?R:t]}const Cs=function(e){var t=e;"object"===zt(e)&&(t=e.transitionSupport);var r=n.forwardRef((function(e,r){var i=e.visible,o=void 0===i||i,a=e.removeOnLeave,s=void 0===a||a,l=e.forceRender,c=e.children,u=e.motionName,h=e.leavedClassName,d=e.eventProps,f=function(e,n){return!(!e.motionName||!t||!1===n)}(e,n.useContext(Ta).motion),p=(0,n.useRef)(),m=(0,n.useRef)(),g=Ht(Es(f,o,(function(){try{return p.current instanceof HTMLElement?p.current:ba(m.current)}catch(e){return null}}),e),4),v=g[0],y=g[1],b=g[2],x=g[3],_=n.useRef(x);x&&(_.current=!0);var w,S=n.useCallback((function(e){p.current=e,_a(r,e)}),[r]),E=Xt(Xt({},d),{},{visible:o});if(c)if(v===ja)w=x?c(Xt({},E),S):!s&&_.current&&h?c(Xt(Xt({},E),{},{className:h}),S):l||!s&&!h?c(Xt(Xt({},E),{},{style:{display:"none"}}),S):null;else{var C;y===Wa?C="prepare":Ss(y)?C="active":y===qa&&(C="start");var M=hs(u,"".concat(v,"-").concat(C));w=c(Xt(Xt({},E),{},{className:va()(hs(u,v),Ft(Ft({},M,M&&C),u,"string"==typeof u)),style:b}),S)}else w=null;return n.isValidElement(w)&&Ea(w)&&(w.ref||(w=n.cloneElement(w,{ref:S}))),n.createElement(Da,{ref:m},w)}));return r.displayName="CSSMotion",r}(ls);var Ms="add",Ts="keep",As="remove",Ps="removed";function Rs(e){var t;return Xt(Xt({},t=e&&"object"===zt(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Is(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Rs)}var Os=["component","children","onVisibleChanged","onAllRemoved"],ks=["status"],Ls=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const Ns=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs,t=function(t){Ra(i,t);var r=Na(i);function i(){var e;yn(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Ft(ka(e=r.call.apply(r,[this].concat(n))),"state",{keyEntities:[]}),Ft(ka(e),"removeKey",(function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:Xt(Xt({},e),{},{status:Ps})}))}}),(function(){0===e.state.keyEntities.filter((function(e){return e.status!==Ps})).length&&e.props.onAllRemoved&&e.props.onAllRemoved()}))})),e}return xn(i,[{key:"render",value:function(){var t=this,r=this.state.keyEntities,i=this.props,o=i.component,a=i.children,s=i.onVisibleChanged,l=(i.onAllRemoved,Ca(i,Os)),c=o||n.Fragment,u={};return Ls.forEach((function(e){u[e]=l[e],delete l[e]})),delete l.keys,n.createElement(c,l,r.map((function(r,i){var o=r.status,l=Ca(r,ks),c=o===Ms||o===Ts;return n.createElement(e,nr({},u,{key:l.key,visible:c,eventProps:l,onVisibleChanged:function(e){null==s||s(e,{key:l.key}),e||t.removeKey(l.key)}}),(function(e,t){return a(Xt(Xt({},e),{},{index:i}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Is(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=Is(e),a=Is(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var s=a[o];if(s.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return Xt(Xt({},e),{},{status:Ms})}))),r=o),n.push(Xt(Xt({},s),{},{status:Ts})),r+=1,t=!0;break}}t||n.push(Xt(Xt({},e),{},{status:As}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return Xt(Xt({},e),{},{status:Ms})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==As}))).forEach((function(t){t.key===e&&(t.status=Ts)}))})),n}(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Ps||e.status!==As}))}}}]),i}(n.Component);return Ft(t,"defaultProps",{component:"div"}),t}(ls),Ds=Cs;function zs(e){const{children:t}=e,[,r]=Co(),{motion:i}=r,o=n.useRef(!1);return o.current=o.current||!1===i,o.current?n.createElement(Aa,{motion:i},t):t}const Us=()=>null,Fs={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Bs=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},js=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),Vs=e=>({outline:`${Un(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),$s=e=>({"&:focus-visible":Object.assign({},Vs(e))}),Hs=(e,t)=>{const[n,r]=Co();return Zr({theme:n,token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>null==t?void 0:t.nonce,layer:{name:"antd"}},(()=>[{[`.${e}`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{[`.${e} .${e}-icon`]:{display:"block"}})}]))};const Gs=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Ws,qs,Xs,Ys;function Ks(){return Ws||ta}function Zs(){return qs||na}const Js=()=>({getPrefixCls:(e,t)=>t||(e?`${Ks()}-${e}`:Ks()),getIconPrefixCls:Zs,getRootPrefixCls:()=>Ws||Ks(),getTheme:()=>Xs,holderRender:Ys}),Qs=e=>{const{children:t,csp:r,autoInsertSpaceInButton:i,alert:o,anchor:a,form:s,locale:l,componentSize:c,direction:u,space:h,splitter:d,virtual:f,dropdownMatchSelectWidth:p,popupMatchSelectWidth:m,popupOverflow:g,legacyLocale:v,parentContext:y,iconPrefixCls:b,theme:x,componentDisabled:_,segmented:w,statistic:S,spin:E,calendar:C,carousel:M,cascader:T,collapse:A,typography:P,checkbox:R,descriptions:I,divider:O,drawer:k,skeleton:L,steps:N,image:D,layout:z,list:U,mentions:F,modal:B,progress:j,result:V,slider:$,breadcrumb:H,menu:G,pagination:W,input:q,textArea:X,empty:Y,badge:K,radio:Z,rate:J,switch:Q,transfer:ee,avatar:te,message:ne,tag:re,table:ie,card:oe,tabs:ae,timeline:se,timePicker:le,upload:ce,notification:ue,tree:he,colorPicker:de,datePicker:fe,rangePicker:pe,flex:me,wave:ge,dropdown:ve,warning:ye,tour:be,floatButtonGroup:xe,variant:_e,inputNumber:we,treeSelect:Se}=e,Ee=n.useCallback(((t,n)=>{const{prefixCls:r}=e;if(n)return n;const i=r||y.getPrefixCls("");return t?`${i}-${t}`:i}),[y.getPrefixCls,e.prefixCls]),Ce=b||y.iconPrefixCls||na,Me=r||y.csp;Hs(Ce,Me);const Te=function(e,t,n){var r;jo();const i=e||{},o=!1!==i.inherit&&t?t:Object.assign(Object.assign({},yo),{hashed:null!==(r=null==t?void 0:t.hashed)&&void 0!==r?r:yo.hashed,cssVar:null==t?void 0:t.cssVar}),a=ma();return cn((()=>{var r,s;if(!e)return t;const l=Object.assign({},o.components);Object.keys(e.components||{}).forEach((t=>{l[t]=Object.assign(Object.assign({},l[t]),e.components[t])}));const c=`css-var-${a.replace(/:/g,"")}`,u=(null!==(r=i.cssVar)&&void 0!==r?r:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:null==n?void 0:n.prefixCls},"object"==typeof o.cssVar?o.cssVar:{}),"object"==typeof i.cssVar?i.cssVar:{}),{key:"object"==typeof i.cssVar&&(null===(s=i.cssVar)||void 0===s?void 0:s.key)||c});return Object.assign(Object.assign(Object.assign({},o),i),{token:Object.assign(Object.assign({},o.token),i.token),components:l,cssVar:u})}),[i,o],((e,t)=>e.some(((e,n)=>{const r=t[n];return!vn(e,r,!0)}))))}(x,y.theme,{prefixCls:Ee("")}),Ae={csp:Me,autoInsertSpaceInButton:i,alert:o,anchor:a,locale:l||v,direction:u,space:h,splitter:d,virtual:f,popupMatchSelectWidth:null!=m?m:p,popupOverflow:g,getPrefixCls:Ee,iconPrefixCls:Ce,theme:Te,segmented:w,statistic:S,spin:E,calendar:C,carousel:M,cascader:T,collapse:A,typography:P,checkbox:R,descriptions:I,divider:O,drawer:k,skeleton:L,steps:N,image:D,input:q,textArea:X,layout:z,list:U,mentions:F,modal:B,progress:j,result:V,slider:$,breadcrumb:H,menu:G,pagination:W,empty:Y,badge:K,radio:Z,rate:J,switch:Q,transfer:ee,avatar:te,message:ne,tag:re,table:ie,card:oe,tabs:ae,timeline:se,timePicker:le,upload:ce,notification:ue,tree:he,colorPicker:de,datePicker:fe,rangePicker:pe,flex:me,wave:ge,dropdown:ve,warning:ye,tour:be,floatButtonGroup:xe,variant:_e,inputNumber:we,treeSelect:Se},Pe=Object.assign({},y);Object.keys(Ae).forEach((e=>{void 0!==Ae[e]&&(Pe[e]=Ae[e])})),Gs.forEach((t=>{const n=e[t];n&&(Pe[t]=n)})),void 0!==i&&(Pe.button=Object.assign({autoInsertSpace:i},Pe.button));const Re=cn((()=>Pe),Pe,((e,t)=>{const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((n=>e[n]!==t[n]))})),Ie=n.useMemo((()=>({prefixCls:Ce,csp:Me})),[Ce,Me]);let Oe=n.createElement(n.Fragment,null,n.createElement(Us,{dropdownMatchSelectWidth:p}),t);const ke=n.useMemo((()=>{var e,t,n,r;return Uo((null===(e=Xo.Form)||void 0===e?void 0:e.defaultValidateMessages)||{},(null===(n=null===(t=Re.locale)||void 0===t?void 0:t.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===(r=Re.form)||void 0===r?void 0:r.validateMessages)||{},(null==s?void 0:s.validateMessages)||{})}),[Re,null==s?void 0:s.validateMessages]);Object.keys(ke).length>0&&(Oe=n.createElement(Vo.Provider,{value:ke},Oe)),l&&(Oe=n.createElement(ea,{locale:l,_ANT_MARK__:"internalMark"},Oe)),(Ce||Me)&&(Oe=n.createElement(Io.Provider,{value:Ie},Oe)),c&&(Oe=n.createElement(ha,{size:c},Oe)),Oe=n.createElement(zs,null,Oe);const Le=n.useMemo((()=>{const e=Te||{},{algorithm:t,token:n,components:r,cssVar:i}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["algorithm","token","components","cssVar"]),a=t&&(!Array.isArray(t)||t.length>0)?In(t):vo,s={};Object.entries(r||{}).forEach((e=>{let[t,n]=e;const r=Object.assign({},n);"algorithm"in r&&(!0===r.algorithm?r.theme=a:(Array.isArray(r.algorithm)||"function"==typeof r.algorithm)&&(r.theme=In(r.algorithm)),delete r.algorithm),s[t]=r}));const l=Object.assign(Object.assign({},no),n);return Object.assign(Object.assign({},o),{theme:a,token:l,components:s,override:Object.assign({override:l},s),cssVar:i})}),[Te]);return x&&(Oe=n.createElement(bo.Provider,{value:Le},Oe)),Re.warning&&(Oe=n.createElement(Bo.Provider,{value:Re.warning},Oe)),void 0!==_&&(Oe=n.createElement(la,{disabled:_},Oe)),n.createElement(ia.Provider,{value:Re},Oe)},el=e=>{const t=n.useContext(ia),r=n.useContext(Qo);return n.createElement(Qs,Object.assign({parentContext:t,legacyLocale:r},e))};el.ConfigContext=ia,el.SizeContext=da,el.config=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:i}=e;void 0!==t&&(Ws=t),void 0!==n&&(qs=n),"holderRender"in e&&(Ys=i),r&&(function(e){return Object.keys(e).some((e=>e.endsWith("Color")))}(r)?function(e,t){const n=function(e,t){const n={},r=(e,t)=>{let n=e.clone();return n=(null==t?void 0:t(n))||n,n.toRgbString()},i=(e,t)=>{const i=new ro(e),o=Mi(i.toRgbString());n[`${t}-color`]=r(i),n[`${t}-color-disabled`]=o[1],n[`${t}-color-hover`]=o[4],n[`${t}-color-active`]=o[6],n[`${t}-color-outline`]=i.clone().setAlpha(.2).toRgbString(),n[`${t}-color-deprecated-bg`]=o[0],n[`${t}-color-deprecated-border`]=o[2]};if(t.primaryColor){i(t.primaryColor,"primary");const e=new ro(t.primaryColor),o=Mi(e.toRgbString());o.forEach(((e,t)=>{n[`primary-${t+1}`]=e})),n["primary-color-deprecated-l-35"]=r(e,(e=>e.lighten(35))),n["primary-color-deprecated-l-20"]=r(e,(e=>e.lighten(20))),n["primary-color-deprecated-t-20"]=r(e,(e=>e.tint(20))),n["primary-color-deprecated-t-50"]=r(e,(e=>e.tint(50))),n["primary-color-deprecated-f-12"]=r(e,(e=>e.setAlpha(.12*e.getAlpha())));const a=new ro(o[0]);n["primary-color-active-deprecated-f-30"]=r(a,(e=>e.setAlpha(.3*e.getAlpha()))),n["primary-color-active-deprecated-d-02"]=r(a,(e=>e.darken(2)))}return t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info"),`\n  :root {\n    ${Object.keys(n).map((t=>`--${e}-${t}: ${n[t]};`)).join("\n")}\n  }\n  `.trim()}(e,t);Kt()&&ln(n,`${aa}-dynamic-theme`)}(Ks(),r):Xs=r)},el.useConfig=function(){return{componentDisabled:(0,n.useContext)(ca),componentSize:(0,n.useContext)(da)}},Object.defineProperty(el,"SizeContext",{get:()=>da});const tl=el;var nl=function(){return nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nl.apply(this,arguments)};function rl(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var il=a(2833),ol=a.n(il),al="-ms-",sl="-moz-",ll="-webkit-",cl="comm",ul="rule",hl="decl",dl="@keyframes",fl=Math.abs,pl=String.fromCharCode,ml=Object.assign;function gl(e){return e.trim()}function vl(e,t){return(e=t.exec(e))?e[0]:e}function yl(e,t,n){return e.replace(t,n)}function bl(e,t,n){return e.indexOf(t,n)}function xl(e,t){return 0|e.charCodeAt(t)}function _l(e,t,n){return e.slice(t,n)}function wl(e){return e.length}function Sl(e){return e.length}function El(e,t){return t.push(e),e}function Cl(e,t){return e.filter((function(e){return!vl(e,t)}))}var Ml=1,Tl=1,Al=0,Pl=0,Rl=0,Il="";function Ol(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Ml,column:Tl,length:a,return:"",siblings:s}}function kl(e,t){return ml(Ol("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ll(e){for(;e.root;)e=kl(e.root,{children:[e]});El(e,e.siblings)}function Nl(){return Rl=Pl<Al?xl(Il,Pl++):0,Tl++,10===Rl&&(Tl=1,Ml++),Rl}function Dl(){return xl(Il,Pl)}function zl(){return Pl}function Ul(e,t){return _l(Il,e,t)}function Fl(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bl(e){return gl(Ul(Pl-1,$l(91===e?e+2:40===e?e+1:e)))}function jl(e){for(;(Rl=Dl())&&Rl<33;)Nl();return Fl(e)>2||Fl(Rl)>3?"":" "}function Vl(e,t){for(;--t&&Nl()&&!(Rl<48||Rl>102||Rl>57&&Rl<65||Rl>70&&Rl<97););return Ul(e,zl()+(t<6&&32==Dl()&&32==Nl()))}function $l(e){for(;Nl();)switch(Rl){case e:return Pl;case 34:case 39:34!==e&&39!==e&&$l(Rl);break;case 40:41===e&&$l(e);break;case 92:Nl()}return Pl}function Hl(e,t){for(;Nl()&&e+Rl!==57&&(e+Rl!==84||47!==Dl()););return"/*"+Ul(t,Pl-1)+"*"+pl(47===e?e:Nl())}function Gl(e){for(;!Fl(Dl());)Nl();return Ul(e,Pl)}function Wl(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function ql(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case hl:return e.return=e.return||e.value;case cl:return"";case dl:return e.return=e.value+"{"+Wl(e.children,r)+"}";case ul:if(!wl(e.value=e.props.join(",")))return""}return wl(n=Wl(e.children,r))?e.return=e.value+"{"+n+"}":""}function Xl(e,t,n){switch(function(e,t){return 45^xl(e,0)?(((t<<2^xl(e,0))<<2^xl(e,1))<<2^xl(e,2))<<2^xl(e,3):0}(e,t)){case 5103:return ll+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ll+e+e;case 4789:return sl+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ll+e+sl+e+al+e+e;case 5936:switch(xl(e,t+11)){case 114:return ll+e+al+yl(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ll+e+al+yl(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ll+e+al+yl(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return ll+e+al+e+e;case 6165:return ll+e+al+"flex-"+e+e;case 5187:return ll+e+yl(e,/(\w+).+(:[^]+)/,ll+"box-$1$2"+al+"flex-$1$2")+e;case 5443:return ll+e+al+"flex-item-"+yl(e,/flex-|-self/g,"")+(vl(e,/flex-|baseline/)?"":al+"grid-row-"+yl(e,/flex-|-self/g,""))+e;case 4675:return ll+e+al+"flex-line-pack"+yl(e,/align-content|flex-|-self/g,"")+e;case 5548:return ll+e+al+yl(e,"shrink","negative")+e;case 5292:return ll+e+al+yl(e,"basis","preferred-size")+e;case 6060:return ll+"box-"+yl(e,"-grow","")+ll+e+al+yl(e,"grow","positive")+e;case 4554:return ll+yl(e,/([^-])(transform)/g,"$1"+ll+"$2")+e;case 6187:return yl(yl(yl(e,/(zoom-|grab)/,ll+"$1"),/(image-set)/,ll+"$1"),e,"")+e;case 5495:case 3959:return yl(e,/(image-set\([^]*)/,ll+"$1$`$1");case 4968:return yl(yl(e,/(.+:)(flex-)?(.*)/,ll+"box-pack:$3"+al+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ll+e+e;case 4200:if(!vl(e,/flex-|baseline/))return al+"grid-column-align"+_l(e,t)+e;break;case 2592:case 3360:return al+yl(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,vl(e.props,/grid-\w+-end/)}))?~bl(e+(n=n[t].value),"span",0)?e:al+yl(e,"-start","")+e+al+"grid-row-span:"+(~bl(n,"span",0)?vl(n,/\d+/):+vl(n,/\d+/)-+vl(e,/\d+/))+";":al+yl(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return vl(e.props,/grid-\w+-start/)}))?e:al+yl(yl(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return yl(e,/(.+)-inline(.+)/,ll+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wl(e)-1-t>6)switch(xl(e,t+1)){case 109:if(45!==xl(e,t+4))break;case 102:return yl(e,/(.+:)(.+)-([^]+)/,"$1"+ll+"$2-$3$1"+sl+(108==xl(e,t+3)?"$3":"$2-$3"))+e;case 115:return~bl(e,"stretch",0)?Xl(yl(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return yl(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,o,a,s){return al+n+":"+r+s+(i?al+n+"-span:"+(o?a:+a-+r)+s:"")+e}));case 4949:if(121===xl(e,t+6))return yl(e,":",":"+ll)+e;break;case 6444:switch(xl(e,45===xl(e,14)?18:11)){case 120:return yl(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ll+(45===xl(e,14)?"inline-":"")+"box$3$1"+ll+"$2$3$1"+al+"$2box$3")+e;case 100:return yl(e,":",":"+al)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return yl(e,"scroll-","scroll-snap-")+e}return e}function Yl(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case hl:return void(e.return=Xl(e.value,e.length,n));case dl:return Wl([kl(e,{value:yl(e.value,"@","@"+ll)})],r);case ul:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(vl(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ll(kl(e,{props:[yl(t,/:(read-\w+)/,":-moz-$1")]})),Ll(kl(e,{props:[t]})),ml(e,{props:Cl(n,r)});break;case"::placeholder":Ll(kl(e,{props:[yl(t,/:(plac\w+)/,":"+ll+"input-$1")]})),Ll(kl(e,{props:[yl(t,/:(plac\w+)/,":-moz-$1")]})),Ll(kl(e,{props:[yl(t,/:(plac\w+)/,al+"input-$1")]})),Ll(kl(e,{props:[t]})),ml(e,{props:Cl(n,r)})}return""}))}}function Kl(e){return function(e){return Il="",e}(Zl("",null,null,null,[""],e=function(e){return Ml=Tl=1,Al=wl(Il=e),Pl=0,[]}(e),0,[0],e))}function Zl(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",x=i,_=o,w=r,S=b;g;)switch(p=y,y=Nl()){case 40:if(108!=p&&58==xl(S,h-1)){-1!=bl(S+=yl(Bl(y),"&","&\f"),"&\f",fl(c?s[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=Bl(y);break;case 9:case 10:case 13:case 32:S+=jl(p);break;case 92:S+=Vl(zl()-1,7);continue;case 47:switch(Dl()){case 42:case 47:El(Ql(Hl(Nl(),zl()),t,n,l),l);break;default:S+="/"}break;case 123*m:s[c++]=wl(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(S=yl(S,/\f/g,"")),f>0&&wl(S)-h&&El(f>32?ec(S+";",r,n,h-1,l):ec(yl(S," ","")+";",r,n,h-2,l),l);break;case 59:S+=";";default:if(El(w=Jl(S,t,n,c,u,i,s,b,x=[],_=[],h,o),o),123===y)if(0===u)Zl(S,t,w,w,x,o,h,s,_);else switch(99===d&&110===xl(S,3)?100:d){case 100:case 108:case 109:case 115:Zl(e,w,w,r&&El(Jl(e,w,w,0,0,i,s,b,i,x=[],h,_),_),i,_,h,s,r?x:_);break;default:Zl(S,w,w,w,[""],_,0,s,_)}}c=u=f=0,m=v=1,b=S="",h=a;break;case 58:h=1+wl(S),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==(Rl=Pl>0?xl(Il,--Pl):0,Tl--,10===Rl&&(Tl=1,Ml--),Rl))continue;switch(S+=pl(y),y*m){case 38:v=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(wl(S)-1)*v,v=1;break;case 64:45===Dl()&&(S+=Bl(Nl())),d=Dl(),u=h=wl(b=S+=Gl(zl())),y++;break;case 45:45===p&&2==wl(S)&&(m=0)}}return o}function Jl(e,t,n,r,i,o,a,s,l,c,u,h){for(var d=i-1,f=0===i?o:[""],p=Sl(f),m=0,g=0,v=0;m<r;++m)for(var y=0,b=_l(e,d+1,d=fl(g=a[m])),x=e;y<p;++y)(x=gl(g>0?f[y]+" "+b:yl(b,/&\f/g,f[y])))&&(l[v++]=x);return Ol(e,t,n,0===i?ul:s,l,c,u,h)}function Ql(e,t,n,r){return Ol(e,t,n,cl,pl(Rl),_l(e,2,-2),0,r)}function ec(e,t,n,r,i){return Ol(e,t,n,hl,_l(e,0,r),_l(e,r+1,-1),r,i)}var tc={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nc="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",rc="active",ic="data-styled-version",oc="6.1.13",ac="/*!sc*/\n",sc="undefined"!=typeof window&&"HTMLElement"in window,lc=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),cc=(new Set,Object.freeze([])),uc=Object.freeze({});var hc=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),dc=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,fc=/(^-|-$)/g;function pc(e){return e.replace(dc,"-").replace(fc,"")}var mc=/(a)(d)/gi,gc=function(e){return String.fromCharCode(e+(e>25?39:97))};function vc(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=gc(t%52)+n;return(gc(t%52)+n).replace(mc,"$1-$2")}var yc,bc=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},xc=function(e){return bc(5381,e)};function _c(e){return"string"==typeof e&&!0}var wc="function"==typeof Symbol&&Symbol.for,Sc=wc?Symbol.for("react.memo"):60115,Ec=wc?Symbol.for("react.forward_ref"):60112,Cc={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mc={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Tc={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ac=((yc={})[Ec]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yc[Sc]=Tc,yc);function Pc(e){return("type"in(t=e)&&t.type.$$typeof)===Sc?Tc:"$$typeof"in e?Ac[e.$$typeof]:Cc;var t}var Rc=Object.defineProperty,Ic=Object.getOwnPropertyNames,Oc=Object.getOwnPropertySymbols,kc=Object.getOwnPropertyDescriptor,Lc=Object.getPrototypeOf,Nc=Object.prototype;function Dc(e,t,n){if("string"!=typeof t){if(Nc){var r=Lc(t);r&&r!==Nc&&Dc(e,r,n)}var i=Ic(t);Oc&&(i=i.concat(Oc(t)));for(var o=Pc(e),a=Pc(t),s=0;s<i.length;++s){var l=i[s];if(!(l in Mc||n&&n[l]||a&&l in a||o&&l in o)){var c=kc(t,l);try{Rc(e,l,c)}catch(e){}}}}return e}function zc(e){return"function"==typeof e}function Uc(e){return"object"==typeof e&&"styledComponentId"in e}function Fc(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Bc(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function jc(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Vc(e,t,n){if(void 0===n&&(n=!1),!n&&!jc(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Vc(e[r],t[r]);else if(jc(t))for(var r in t)e[r]=Vc(e[r],t[r]);return e}function $c(e,t){Object.defineProperty(e,"toString",{value:t})}function Hc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Gc=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw Hc(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(ac);return t},e}(),Wc=new Map,qc=new Map,Xc=1,Yc=function(e){if(Wc.has(e))return Wc.get(e);for(;qc.has(Xc);)Xc++;var t=Xc++;return Wc.set(e,t),qc.set(t,e),t},Kc=function(e,t){Xc=t+1,Wc.set(e,t),qc.set(t,e)},Zc="style[".concat(nc,"][").concat(ic,'="').concat(oc,'"]'),Jc=new RegExp("^".concat(nc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Qc=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},eu=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(ac),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var l=s.match(Jc);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Kc(u,c),Qc(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},tu=function(e){for(var t=document.querySelectorAll(Zc),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(nc)!==rc&&(eu(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function nu(){return a.nc}var ru=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(nc,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(nc,rc),r.setAttribute(ic,oc);var a=nu();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},iu=function(){function e(e){this.element=ru(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw Hc(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),ou=function(){function e(e){this.element=ru(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),au=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),su=sc,lu={isServer:!sc,useCSSOMInjection:!lc},cu=function(){function e(e,t,n){void 0===e&&(e=uc),void 0===t&&(t={});var r=this;this.options=nl(nl({},lu),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&sc&&su&&(su=!1,tu(this)),$c(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return qc.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),a=t.getGroup(n);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(nc,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),r+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(ac)},o=0;o<n;o++)i(o);return r}(r)}))}return e.registerId=function(e){return Yc(e)},e.prototype.rehydrate=function(){!this.server&&sc&&tu(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(nl(nl({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new au(n):t?new iu(n):new ou(n)}(this.options),new Gc(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Yc(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Yc(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Yc(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),uu=/&/g,hu=/^\s*\/\/.*$/gm;function du(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=du(e.children,t)),e}))}function fu(e){var t,n,r,i=void 0===e?uc:e,o=i.options,a=void 0===o?uc:o,s=i.plugins,l=void 0===s?cc:s,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===ul&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(uu,n).replace(r,c))})),a.prefix&&u.push(Yl),u.push(ql);var h=function(e,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),t=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(hu,""),c=Kl(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);a.namespace&&(c=du(c,a.namespace));var h,d,f,p=[];return Wl(c,(h=u.concat((f=function(e){return p.push(e)},function(e){e.root||(e=e.return)&&f(e)})),d=Sl(h),function(e,t,n,r){for(var i="",o=0;o<d;o++)i+=h[o](e,t,n,r)||"";return i})),p};return h.hash=l.length?l.reduce((function(e,t){return t.name||Hc(15),bc(e,t.name)}),5381).toString():"",h}var pu=new cu,mu=fu(),gu=n.createContext({shouldForwardProp:void 0,styleSheet:pu,stylis:mu}),vu=(gu.Consumer,n.createContext(void 0));function yu(){return(0,n.useContext)(gu)}function bu(e){var t=(0,n.useState)(e.stylisPlugins),r=t[0],i=t[1],o=yu().styleSheet,a=(0,n.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),s=(0,n.useMemo)((function(){return fu({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,n.useEffect)((function(){ol()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,n.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:s}}),[e.shouldForwardProp,a,s]);return n.createElement(gu.Provider,{value:l},n.createElement(vu.Provider,{value:s},e.children))}var xu=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=mu);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,$c(this,(function(){throw Hc(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=mu),this.name+e.hash},e}(),_u=function(e){return e>="A"&&e<="Z"};function wu(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;_u(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Su=function(e){return null==e||!1===e||""===e},Eu=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!Su(o)&&(Array.isArray(o)&&o.isCss||zc(o)?r.push("".concat(wu(i),":"),o,";"):jc(o)?r.push.apply(r,rl(rl(["".concat(i," {")],Eu(o),!1),["}"],!1)):r.push("".concat(wu(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in tc||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Cu(e,t,n,r){return Su(e)?[]:Uc(e)?[".".concat(e.styledComponentId)]:zc(e)?!zc(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Cu(e(t),t,n,r):e instanceof xu?n?(e.inject(n,r),[e.getName(r)]):[e]:jc(e)?Eu(e):Array.isArray(e)?Array.prototype.concat.apply(cc,e.map((function(e){return Cu(e,t,n,r)}))):[e.toString()];var i}function Mu(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(zc(n)&&!Uc(n))return!1}return!0}var Tu=xc(oc),Au=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Mu(e),this.componentId=t,this.baseHash=bc(Tu,t),this.baseStyle=n,cu.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Fc(r,this.staticRulesId);else{var i=Bc(Cu(this.rules,e,t,n)),o=vc(bc(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}r=Fc(r,o),this.staticRulesId=o}else{for(var s=bc(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=Bc(Cu(u,e,t,n));s=bc(s,h+c),l+=h}}if(l){var d=vc(s>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(l,".".concat(d),void 0,this.componentId)),r=Fc(r,d)}}return r},e}(),Pu=n.createContext(void 0);Pu.Consumer;var Ru={};function Iu(e,t,r){var i=Uc(e),o=e,a=!_c(e),s=t.attrs,l=void 0===s?cc:s,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":pc(e);Ru[n]=(Ru[n]||0)+1;var r="".concat(n,"-").concat(function(e){return vc(xc(e)>>>0)}(oc+n+Ru[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):c,h=t.displayName,d=void 0===h?function(e){return _c(e)?"styled.".concat(e):"Styled(".concat(function(e){return e.displayName||e.name||"Component"}(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(pc(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,m=t.shouldForwardProp;if(i&&o.shouldForwardProp){var g=o.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new Au(r,f,i?o.componentStyle:void 0);function b(e,t){return function(e,t,r){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=n.useContext(Pu),h=yu(),d=e.shouldForwardProp||h.shouldForwardProp,f=function(e,t,n){return void 0===n&&(n=uc),e.theme!==n.theme&&e.theme||t||n.theme}(t,u,a)||uc,p=function(e,t,n){for(var r,i=nl(nl({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var a=zc(r=e[o])?r(i):r;for(var s in a)i[s]="className"===s?Fc(i[s],a[s]):"style"===s?nl(nl({},i[s]),a[s]):a[s]}return t.className&&(i.className=Fc(i.className,t.className)),i}(i,t,f),m=p.as||c,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:d&&!d(v,m)||(g[v]=p[v]));var y=function(e,t){var n=yu();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),b=Fc(s,l);return y&&(b+=" "+y),p.className&&(b+=" "+p.className),g[_c(m)&&!hc.has(m)?"class":"className"]=b,g.ref=r,(0,n.createElement)(m,g)}(x,e,t)}b.displayName=d;var x=n.forwardRef(b);return x.attrs=p,x.componentStyle=y,x.displayName=d,x.shouldForwardProp=m,x.foldedComponentIds=i?Fc(o.foldedComponentIds,o.styledComponentId):"",x.styledComponentId=f,x.target=i?o.target:e,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Vc(e,i[r],!0);return e}({},o.defaultProps,e):e}}),$c(x,(function(){return".".concat(x.styledComponentId)})),a&&Dc(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function Ou(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}new Set;var ku=function(e){return Object.assign(e,{isCss:!0})};function Lu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(zc(e)||jc(e))return ku(Cu(Ou(cc,rl([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Cu(r):ku(Cu(Ou(r,t)))}function Nu(e,t,n){if(void 0===n&&(n=uc),!t)throw Hc(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,Lu.apply(void 0,rl([r],i,!1)))};return r.attrs=function(r){return Nu(e,t,nl(nl({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Nu(e,t,nl(nl({},n),r))},r}var Du,zu,Uu=function(e){return Nu(Iu,e)},Fu=Uu;function Bu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}hc.forEach((function(e){Fu[e]=Uu(e)})),function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Mu(e),cu.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(Bc(Cu(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&cu.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}(),function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=nu(),r=Bc([n&&'nonce="'.concat(n,'"'),"".concat(nc,'="true"'),"".concat(ic,'="').concat(oc,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Hc(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw Hc(2);var r=e.instance.toString();if(!r)return[];var i=((t={})[nc]="",t[ic]=oc,t.dangerouslySetInnerHTML={__html:r},t),o=nu();return o&&(i.nonce=o),[n.createElement("style",nl({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new cu({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Hc(2);return n.createElement(bu,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Hc(3)}}(),"__sc-".concat(nc,"__");var ju="#ffffff",Vu="#bfbfbf",$u="#6e6e6e",Hu="#4b4b4b",Gu="#313131",Wu="#222222",qu="#aa88ed",Xu="#9e6aff",Yu="#ff4d4d",Ku="#0099ff",Zu={colors:{theme:{primary:Xu,primaryLt:qu,primaryDk:"#7e46d4",success:"#61d900",error:Yu,warning:Yu,info:Ku},text:{link:Ku,header:Vu,section:ju,body:Vu,error:Yu,selectionBg:Xu,selectionText:ju},header:{bg:Wu,border:$u,title:ju,hoverTitle:ju},button:{primary:{bg:Xu,text:ju,hoverBg:qu,activeOutline:Xu,disabledBg:Hu},link:{text:Xu},secondary:{bg:"transparent",text:Xu,outline:Xu},tertiary:{bg:"transparent",text:Vu,outline:Vu,hoverOutline:qu,hoverText:qu,activeOutline:Xu,activatedText:ju,activatedBg:Hu,activatedOutline:"#aeacae",disabledText:$u}},checkbox:{bg:$u,hoverBg:"#a0a0a0",text:ju},controlPanel:{bg:Gu,border:$u,sectionText:ju,text:Vu,sectionBg:Hu,drawerBg:Wu,rampSlider:Xu},toolbar:{buttonBg:"#000000cc"},landingPage:{bg:Wu,bgAlt:Gu,text:Vu,bannerBg:"#020202DB"},statusFlag:{border:$u,text:Vu},layout:{dividers:$u,split:ju},menu:{hoverText:ju,hoverBg:qu,selectedText:ju,selectedBg:$u,textPlaceholder:qu},tooltip:{bg:"#000000"},modal:{maskBg:"#000000cc",bg:Wu,border:Hu}},fonts:{family:"'Open Sans', 'Open Sans Local', Arial, sans-serif, apple-system, BlinkMacSystemFont, 'Segoe UI','PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}},Ju=Fu.div(Du||(Du=Bu(["\n  width: 100%;\n  height: 100%;\n\n  ",'\n\n  h1, h2, h3, h4, p {\n    font-family: var(--font-family);\n  }\n\n  h1 {\n    color: var(--color-text-header);\n    font-size: 28px;\n    font-weight: 400;\n  }\n\n  h2 {\n    color: var(--color-text-section);\n    font-size: 19px;\n    font-weight: 400;\n  }\n\n  h3 {\n    color: var(--color-text-header);\n    font-size: 16px;\n    font-weight: 600;\n  }\n\n  h4 {\n    color: var(--color-text-header);\n    font-size: 14px;\n    font-weight: 400;\n  }\n\n  p {\n    color: var(--color-text-body);\n    font-size: 14px;\n    font-weight: 400;\n  }\n\n  a {\n    color: var(--color-text-link);\n    &:not(:focus-visible) {\n      text-decoration: none;\n    }\n\n    &:focus-visible {\n      text-decoration: underline;\n    }\n  }\n\n  & *::selection {\n    background-color: var(--color-text-selection-bg);\n    color: var(--color-text-selection-text);\n  }\n\n  /** TODO: Go through these styles and see if we can use Ant ConfigProvider for them instead. */\n  .ant-btn-link,\n  .ant-btn-text,\n  .ant-btn-primary,\n  .ant-btn-icon-only {\n    box-shadow: none;\n\n    &:hover:not(:disabled),\n    &:focus-visible:not(:disabled) {\n      background-color: var(--color-button-primary-hover-bg);\n      border-color: var(--color-button-primary-hover-bg);\n      color: var(--color-button-primary-text);\n    }\n\n    &:active:not(:disabled) {\n      background-color: var(--color-button-primary-hover-bg);\n      border: 1px solid var(--color-button-primary-active-outline);\n      color: var(--color-button-primary-text);\n    }\n  }\n\n  /* Let us use buttons with type="text" as purely semantic containers - don\'t bring any styling! */\n  .ant-btn-text {\n    width: unset;\n    height: unset;\n    padding: unset;\n\n    &:hover:not(:disabled),\n    &:focus-visible:not(:disabled) {\n      background-color: unset;\n      border-color: transparent;\n    }\n  }\n\n  .ant-btn-icon-only:disabled {\n    color: var(--color-button-icon-disabled-text);\n  }\n\n  .ant-btn-link:not(:disabled) {\n    // Change from default blue link text\n    color: var(--color-button-link-text);\n  }\n\n  /**\n   * Tertiary style buttons. Grey outline by default, turns to light\n   * purple outline on hover.\n   */\n  .ant-btn-default:not(.ant-btn-icon-only) {\n    background-color: var(--color-button-tertiary-bg);\n    color: var(--color-button-tertiary-text);\n    border-color: var(--color-button-tertiary-outline);\n\n    &:hover:not(:disabled),\n    &:focus-visible:not(:disabled) {\n      background-color: transparent;\n      border-color: var(--color-button-tertiary-hover-bg);\n      color: var(--color-button-tertiary-hover-text);\n    }\n\n    &:active:not(:disabled) {\n      background-color: transparent;\n      border-color: var(--color-button-tertiary-active-outline);\n      color: var(--color-button-tertiary-active-text);\n    }\n  }\n\n  // Overrides for checkbox styling\n  & .ant-checkbox-input {\n    &:hover,\n    &:focus-visible {\n      border: 1px solid white;\n    }\n  }\n\n  & .ant-checkbox.ant-checkbox-checked {\n    background-color: var(--color-checkbox-bg);\n  }\n\n  .ant-checkbox-inner {\n    background-color: transparent;\n  }\n\n  & .ant-checkbox-indeterminate.checked .ant-checkbox-inner {\n    background-color: var(--color-checkbox-bg);\n  }\n\n  // Add outlines to modals and dropdowns\n  & .ant-select-dropdown,\n  & .ant-dropdown-menu,\n  & .ant-modal-content {\n    border: 1px solid var(--color-modal-border);\n  }\n\n  // Force active/hovered text to be white instead of grey for better contrast\n  & .ant-dropdown-menu-item-active {\n    color: var(--color-menu-hover-text);\n  }\n\n  // Remove padding in dropdown menus and make items reactangular + flush with the edge\n  & .ant-dropdown-menu,\n  & .ant-select-dropdown {\n    padding: 0;\n    overflow: hidden;\n\n    & .ant-dropdown-menu-item,\n    & .ant-select-item {\n      border-radius: 0;\n    }\n  }\n'])),(function(e){var t=e.$theme;return Lu(zu||(zu=Bu(["\n      /* Component and color variables. */\n      // TODO: Fix inconsistent use of border vs. outline\n      // TODO: Remove variables that aren't used in other CSS files. These should be set directly\n      // from the $theme object to reduce unnecessary variables.\n      --color-text-link: ",";\n      --color-text-header: ",";\n      --color-text-section: ",";\n      --color-text-body: ",";\n      --color-text-error: ",";\n\n      --color-text-selection-bg: ",";\n      --color-text-selection-text: ",";\n\n      --color-header-title: ",";\n      --color-header-hover-title: ",";\n      --color-header-bg: ",";\n      --color-header-border: ",";\n\n      --color-button-primary-bg: ",";\n      --color-button-primary-text: ",";\n      --color-button-primary-hover-bg: ",";\n      --color-button-primary-active-bg: ",";\n      --color-button-primary-active-outline: ",";\n      --color-button-primary-disabled-bg: ",";\n\n      --color-button-link-text: ",";\n\n      --color-button-secondary-bg: ",";\n      --color-button-secondary-text: ",";\n      --color-button-secondary-outline: ",";\n\n      --color-button-tertiary-bg: transparent;\n      --color-button-tertiary-text: ",";\n      --color-button-tertiary-outline: ",";\n      --color-button-tertiary-hover-outline: ",";\n      --color-button-tertiary-hover-text: ",";\n      --color-button-tertiary-active-outline: ",";\n      --color-button-tertiary-active-text: ",";\n\n      --color-button-icon-disabled-text: ",";\n      --color-button-icon-disabled-text: ",";\n      --color-button-icon-activated-text: ",";\n      --color-button-icon-activated-bg: ",";\n      --color-button-icon-activated-outline: ",";\n\n      --color-toolbar-button-bg: ",";\n\n      --color-controlpanel-bg: ",";\n      --color-controlpanel-border: ",";\n      --color-controlpanel-section-text: ",";\n      --color-controlpanel-text: ",";\n      --color-controlpanel-section-bg: ",";\n      --color-controlpanel-drawer-bg: ",";\n      --color-controlpanel-ramp-slider: ",";\n\n      --color-landingpage-bg: ",";\n      --color-landingpage-bg-alt: ",";\n      --color-landingpage-text: ",";\n      --color-landingpage-banner-highlight-bg: ",";\n\n      --color-statusflag-border: ",";\n      --color-statusflag-text: ",";\n\n      --color-layout-dividers: ",";\n\n      --color-modal-border: ",";\n\n      --color-menu-hover-text: ",";\n      --color-menu-selected-text: ",";\n\n      --color-checkbox-bg: ",";\n\n      --font-family: ",";\n    "])),t.colors.text.link,t.colors.text.header,t.colors.text.section,t.colors.text.body,t.colors.text.error,t.colors.text.selectionBg,t.colors.text.selectionText,t.colors.header.title,t.colors.header.hoverTitle,t.colors.header.bg,t.colors.header.border,t.colors.button.primary.bg,t.colors.button.primary.text,t.colors.button.primary.hoverBg,t.colors.button.primary.hoverBg,t.colors.button.primary.activeOutline,t.colors.button.primary.disabledBg,t.colors.button.link.text,t.colors.button.secondary.bg,t.colors.button.secondary.text,t.colors.button.secondary.outline,t.colors.button.tertiary.text,t.colors.button.tertiary.outline,t.colors.button.tertiary.hoverOutline,t.colors.button.tertiary.hoverText,t.colors.button.tertiary.activeOutline,t.colors.button.tertiary.hoverText,t.colors.button.tertiary.disabledText,t.colors.button.tertiary.disabledText,t.colors.button.tertiary.activatedText,t.colors.button.tertiary.activatedBg,t.colors.button.tertiary.activatedOutline,t.colors.toolbar.buttonBg,t.colors.controlPanel.bg,t.colors.controlPanel.border,t.colors.controlPanel.sectionText,t.colors.controlPanel.text,t.colors.controlPanel.sectionBg,t.colors.controlPanel.drawerBg,t.colors.controlPanel.rampSlider,t.colors.landingPage.bg,t.colors.landingPage.bgAlt,t.colors.landingPage.text,t.colors.landingPage.bannerBg,t.colors.statusFlag.border,t.colors.statusFlag.text,t.colors.layout.dividers,t.colors.modal.border,t.colors.menu.hoverText,t.colors.menu.selectedText,t.colors.checkbox.bg,t.fonts.family)}));function Qu(e){var t=Ro;return n.createElement(tl,{theme:{algorithm:t,token:{colorPrimary:Zu.colors.theme.primary,colorPrimaryHover:Zu.colors.theme.primaryLt,colorLink:Zu.colors.text.link,colorBgBase:Zu.colors.controlPanel.bg,colorBgContainer:"transparent",colorSplit:Zu.colors.layout.split,colorPrimaryTextHover:Zu.colors.text.selectionText,fontWeightStrong:400,colorBgElevated:Gu,controlItemBgHover:Zu.colors.menu.hoverBg,controlItemBgActiveHover:Zu.colors.menu.hoverBg,controlItemBgActive:Zu.colors.menu.selectedBg,borderRadius:4},components:{Button:{defaultShadow:"",primaryColor:Zu.colors.button.primary.text,defaultHoverBg:Zu.colors.button.secondary.bg,defaultActiveBg:Zu.colors.button.secondary.bg,defaultActiveBorderColor:Zu.colors.button.tertiary.activeOutline},Card:{borderRadiusLG:0,headerHeight:48},Collapse:{borderRadiusLG:0,colorTextHeading:Zu.colors.text.section},Divider:{colorSplit:Zu.colors.layout.dividers,marginLG:0},Layout:{siderBg:Zu.colors.controlPanel.bg},Checkbox:{borderRadiusSM:2,colorBgContainer:Zu.colors.checkbox.bg,colorPrimary:Zu.colors.checkbox.bg,colorPrimaryHover:Zu.colors.checkbox.hoverBg,colorText:Zu.colors.checkbox.text},Tooltip:{colorBgSpotlight:Zu.colors.tooltip.bg},Modal:{colorBgMask:Zu.colors.modal.maskBg,contentBg:Zu.colors.modal.bg,headerBg:Zu.colors.modal.bg,footerBg:Zu.colors.modal.bg,titleFontSize:19}}}},n.createElement(Ju,{$theme:Zu},e.children))}const eh="171",th=0,nh=1,rh=2,ih=100,oh=101,ah=102,sh=200,lh=201,ch=202,uh=203,hh=204,dh=205,fh=206,ph=207,mh=208,gh=209,vh=210,yh=211,bh=212,xh=213,_h=214,wh=0,Sh=1,Eh=2,Ch=3,Mh=4,Th=5,Ah=6,Ph=7,Rh=301,Ih=302,Oh=306,kh=1e3,Lh=1001,Nh=1002,Dh=1003,zh=1004,Uh=1005,Fh=1006,Bh=1007,jh=1008,Vh=1009,$h=1010,Hh=1011,Gh=1012,Wh=1013,qh=1014,Xh=1015,Yh=1016,Kh=1017,Zh=1018,Jh=1020,Qh=1023,ed=1024,td=1026,nd=1027,rd=1028,id=1029,od=1031,ad=1033,sd=33776,ld=33777,cd=33778,ud=33779,hd=35840,dd=35841,fd=35842,pd=35843,md=36196,gd=37492,vd=37496,yd=37808,bd=37809,xd=37810,_d=37811,wd=37812,Sd=37813,Ed=37814,Cd=37815,Md=37816,Td=37817,Ad=37818,Pd=37819,Rd=37820,Id=37821,Od=36492,kd=36494,Ld=36495,Nd=36284,Dd=36285,zd=36286,Ud=2300,Fd=2301,Bd=2302,jd="",Vd="srgb",$d="srgb-linear",Hd="linear",Gd="srgb",Wd=7680,qd=512,Xd=513,Yd=514,Kd=515,Zd=516,Jd=517,Qd=518,ef=519,tf="300 es",nf=2e3,rf=2001;class of{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const af=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let sf=1234567;const lf=Math.PI/180,cf=180/Math.PI;function uf(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(af[255&e]+af[e>>8&255]+af[e>>16&255]+af[e>>24&255]+"-"+af[255&t]+af[t>>8&255]+"-"+af[t>>16&15|64]+af[t>>24&255]+"-"+af[63&n|128]+af[n>>8&255]+"-"+af[n>>16&255]+af[n>>24&255]+af[255&r]+af[r>>8&255]+af[r>>16&255]+af[r>>24&255]).toLowerCase()}function hf(e,t,n){return Math.max(t,Math.min(n,e))}function df(e,t){return(e%t+t)%t}function ff(e,t,n){return(1-n)*e+n*t}function pf(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function mf(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const gf={DEG2RAD:lf,RAD2DEG:cf,generateUUID:uf,clamp:hf,euclideanModulo:df,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ff,damp:function(e,t,n,r){return ff(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(df(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(sf=e);let t=sf+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*lf},radToDeg:function(e){return e*cf},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:mf,denormalize:pf};class vf{constructor(e=0,t=0){vf.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=hf(this.x,e.x,t.x),this.y=hf(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=hf(this.x,e,t),this.y=hf(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hf(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hf(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yf{constructor(e,t,n,r,i,o,a,s,l){yf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,a,s,l)}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*p+a*v+s*x,i[3]=o*m+a*y+s*_,i[6]=o*g+a*b+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=h*p+d*v+f*x,i[5]=h*m+d*y+f*_,i[8]=h*g+d*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(bf.makeScale(e,t)),this}rotate(e){return this.premultiply(bf.makeRotation(-e)),this}translate(e,t){return this.premultiply(bf.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const bf=new yf;function xf(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function _f(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function wf(){const e=_f("canvas");return e.style.display="block",e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Sf={};function Ef(e){e in Sf||(Sf[e]=!0,console.warn(e))}const Cf=(new yf).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Mf=(new yf).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Tf(){const e={enabled:!0,workingColorSpace:$d,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Gd&&(e.r=Pf(e.r),e.g=Pf(e.g),e.b=Pf(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Gd&&(e.r=Rf(e.r),e.g=Rf(e.g),e.b=Rf(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===jd?Hd:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[$d]:{primaries:t,whitePoint:r,transfer:Hd,toXYZ:Cf,fromXYZ:Mf,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Vd},outputColorSpaceConfig:{drawingBufferColorSpace:Vd}},[Vd]:{primaries:t,whitePoint:r,transfer:Gd,toXYZ:Cf,fromXYZ:Mf,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Vd}}}),e}const Af=Tf();function Pf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Rf(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let If;class Of{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===If&&(If=_f("canvas")),If.width=e.width,If.height=e.height;const n=If.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=If}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=_f("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Pf(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Pf(t[e]/255)):t[e]=Pf(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let kf=0;class Lf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kf++}),this.uuid=uf(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Nf(r[t].image)):e.push(Nf(r[t]))}else e=Nf(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Nf(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Of.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Df=0;class zf extends of{constructor(e=zf.DEFAULT_IMAGE,t=zf.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,l=zf.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Df++}),this.uuid=uf(),this.name="",this.source=new Lf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new vf(0,0),this.repeat=new vf(1,1),this.center=new vf(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case kh:e.x=e.x-Math.floor(e.x);break;case Lh:e.x=e.x<0?0:1;break;case Nh:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case kh:e.y=e.y-Math.floor(e.y);break;case Lh:e.y=e.y<0?0:1;break;case Nh:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}zf.DEFAULT_IMAGE=null,zf.DEFAULT_MAPPING=300,zf.DEFAULT_ANISOTROPY=1;class Uf{constructor(e=0,t=0,n=0,r=1){Uf.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(u+p)/4,x=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=hf(this.x,e.x,t.x),this.y=hf(this.y,e.y,t.y),this.z=hf(this.z,e.z,t.z),this.w=hf(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=hf(this.x,e,t),this.y=hf(this.y,e,t),this.z=hf(this.z,e,t),this.w=hf(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hf(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ff extends of{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Uf(0,0,e,t),this.scissorTest=!1,this.viewport=new Uf(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fh,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new zf(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let e=0;e<o;e++)this.textures[e]=i.clone(),this.textures[e].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Lf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bf extends Ff{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class jf extends zf{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Dh,this.minFilter=Dh,this.wrapR=Lh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Vf extends zf{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Dh,this.minFilter=Dh,this.wrapR=Lh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $f{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==h||l!==d||c!==f){let e=1-a;const t=s*h+l*d+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+f*i,u=u*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+c*u+s*d-l*h,e[t+1]=s*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-s*u,e[t+3]=c*f-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hf(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Hf{constructor(e=0,t=0,n=0){Hf.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Wf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Wf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=2*(o*r-a*n),c=2*(a*t-i*r),u=2*(i*n-o*t);return this.x=t+s*l+o*u-a*c,this.y=n+s*c+a*l-i*u,this.z=r+s*u+i*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=hf(this.x,e.x,t.x),this.y=hf(this.y,e.y,t.y),this.z=hf(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=hf(this.x,e,t),this.y=hf(this.y,e,t),this.z=hf(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hf(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Gf.copy(this).projectOnVector(e),this.sub(Gf)}reflect(e){return this.sub(Gf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hf(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Gf=new Hf,Wf=new $f;class qf{constructor(e=new Hf(1/0,1/0,1/0),t=new Hf(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Yf.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Yf.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Yf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Yf):Yf.fromBufferAttribute(r,t),Yf.applyMatrix4(e.matrixWorld),this.expandByPoint(Yf);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Kf.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Kf.copy(n.boundingBox)),Kf.applyMatrix4(e.matrixWorld),this.union(Kf)}const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yf),Yf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rp),ip.subVectors(this.max,rp),Zf.subVectors(e.a,rp),Jf.subVectors(e.b,rp),Qf.subVectors(e.c,rp),ep.subVectors(Jf,Zf),tp.subVectors(Qf,Jf),np.subVectors(Zf,Qf);let t=[0,-ep.z,ep.y,0,-tp.z,tp.y,0,-np.z,np.y,ep.z,0,-ep.x,tp.z,0,-tp.x,np.z,0,-np.x,-ep.y,ep.x,0,-tp.y,tp.x,0,-np.y,np.x,0];return!!sp(t,Zf,Jf,Qf,ip)&&(t=[1,0,0,0,1,0,0,0,1],!!sp(t,Zf,Jf,Qf,ip)&&(op.crossVectors(ep,tp),t=[op.x,op.y,op.z],sp(t,Zf,Jf,Qf,ip)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Yf).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xf)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xf=[new Hf,new Hf,new Hf,new Hf,new Hf,new Hf,new Hf,new Hf],Yf=new Hf,Kf=new qf,Zf=new Hf,Jf=new Hf,Qf=new Hf,ep=new Hf,tp=new Hf,np=new Hf,rp=new Hf,ip=new Hf,op=new Hf,ap=new Hf;function sp(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){ap.fromArray(e,o);const a=i.x*Math.abs(ap.x)+i.y*Math.abs(ap.y)+i.z*Math.abs(ap.z),s=t.dot(ap),l=n.dot(ap),c=r.dot(ap);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const lp=new qf,cp=new Hf,up=new Hf;class hp{constructor(e=new Hf,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):lp.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;cp.subVectors(e,this.center);const t=cp.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(cp,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(up.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(cp.copy(e.center).add(up)),this.expandByPoint(cp.copy(e.center).sub(up))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const dp=new Hf,fp=new Hf,pp=new Hf,mp=new Hf,gp=new Hf,vp=new Hf,yp=new Hf;class bp{constructor(e=new Hf,t=new Hf(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,dp)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=dp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(dp.copy(this.origin).addScaledVector(this.direction,t),dp.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){fp.copy(e).add(t).multiplyScalar(.5),pp.copy(t).sub(e).normalize(),mp.copy(this.origin).sub(fp);const i=.5*e.distanceTo(t),o=-this.direction.dot(pp),a=mp.dot(this.direction),s=-mp.dot(pp),l=mp.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=i*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(fp).addScaledVector(pp,h),d}intersectSphere(e,t){dp.subVectors(e.center,this.origin);const n=dp.dot(this.direction),r=dp.dot(dp)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,dp)}intersectTriangle(e,t,n,r,i){gp.subVectors(t,e),vp.subVectors(n,e),yp.crossVectors(gp,vp);let o,a=this.direction.dot(yp);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}mp.subVectors(this.origin,e);const s=o*this.direction.dot(vp.crossVectors(mp,vp));if(s<0)return null;const l=o*this.direction.dot(gp.cross(mp));if(l<0)return null;if(s+l>a)return null;const c=-o*mp.dot(yp);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class xp{constructor(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){xp.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m)}set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new xp).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/_p.setFromMatrixColumn(e,0).length(),i=1/_p.setFromMatrixColumn(e,1).length(),o=1/_p.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Sp,e,Ep)}lookAt(e,t,n){const r=this.elements;return Tp.subVectors(e,t),0===Tp.lengthSq()&&(Tp.z=1),Tp.normalize(),Cp.crossVectors(n,Tp),0===Cp.lengthSq()&&(1===Math.abs(n.z)?Tp.x+=1e-4:Tp.z+=1e-4,Tp.normalize(),Cp.crossVectors(n,Tp)),Cp.normalize(),Mp.crossVectors(Tp,Cp),r[0]=Cp.x,r[4]=Mp.x,r[8]=Tp.x,r[1]=Cp.y,r[5]=Mp.y,r[9]=Tp.y,r[2]=Cp.z,r[6]=Mp.z,r[10]=Tp.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],C=r[1],M=r[5],T=r[9],A=r[13],P=r[2],R=r[6],I=r[10],O=r[14],k=r[3],L=r[7],N=r[11],D=r[15];return i[0]=o*_+a*C+s*P+l*k,i[4]=o*w+a*M+s*R+l*L,i[8]=o*S+a*T+s*I+l*N,i[12]=o*E+a*A+s*O+l*D,i[1]=c*_+u*C+h*P+d*k,i[5]=c*w+u*M+h*R+d*L,i[9]=c*S+u*T+h*I+d*N,i[13]=c*E+u*A+h*O+d*D,i[2]=f*_+p*C+m*P+g*k,i[6]=f*w+p*M+m*R+g*L,i[10]=f*S+p*T+m*I+g*N,i[14]=f*E+p*A+m*O+g*D,i[3]=v*_+y*C+b*P+x*k,i[7]=v*w+y*M+b*R+x*L,i[11]=v*S+y*T+b*I+x*N,i[15]=v*E+y*A+b*O+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*s*d-a*m*d-u*s*g+a*h*g,y=f*h*l-c*m*l-f*s*d+o*m*d+c*s*g-o*h*g,b=c*p*l-f*u*l+f*a*d-o*p*d-c*a*g+o*u*g,x=f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*w,e[4]=y*w,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*w,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*w,e[8]=b*w,e[9]=(f*u*i-c*p*i-f*n*d+t*p*d+c*n*g-t*u*g)*w,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*w,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*w,e[12]=x*w,e[13]=(c*p*r-f*u*r+f*n*h-t*p*h-c*n*m+t*u*m)*w,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*w,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,f=i*u,p=o*c,m=o*u,g=a*u,v=s*l,y=s*c,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=_p.set(r[0],r[1],r[2]).length();const o=_p.set(r[4],r[5],r[6]).length(),a=_p.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],wp.copy(this);const s=1/i,l=1/o,c=1/a;return wp.elements[0]*=s,wp.elements[1]*=s,wp.elements[2]*=s,wp.elements[4]*=l,wp.elements[5]*=l,wp.elements[6]*=l,wp.elements[8]*=c,wp.elements[9]*=c,wp.elements[10]*=c,t.setFromRotationMatrix(wp),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o,a=2e3){const s=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let d,f;if(a===nf)d=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(a!==rf)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-i),f=-o*i/(o-i)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,o,a=2e3){const s=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-i),h=(t+e)*l,d=(n+r)*c;let f,p;if(a===nf)f=(o+i)*u,p=-2*u;else{if(a!==rf)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=i*u,p=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=p,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _p=new Hf,wp=new xp,Sp=new Hf(0,0,0),Ep=new Hf(1,1,1),Cp=new Hf,Mp=new Hf,Tp=new Hf,Ap=new xp,Pp=new $f;class Rp{constructor(e=0,t=0,n=0,r=Rp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(hf(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-hf(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(hf(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-hf(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(hf(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-hf(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ap.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ap,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Pp.setFromEuler(this),this.setFromQuaternion(Pp,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Rp.DEFAULT_ORDER="XYZ";class Ip{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let Op=0;const kp=new Hf,Lp=new $f,Np=new xp,Dp=new Hf,zp=new Hf,Up=new Hf,Fp=new $f,Bp=new Hf(1,0,0),jp=new Hf(0,1,0),Vp=new Hf(0,0,1),$p={type:"added"},Hp={type:"removed"},Gp={type:"childadded",child:null},Wp={type:"childremoved",child:null};class qp extends of{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Op++}),this.uuid=uf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qp.DEFAULT_UP.clone();const e=new Hf,t=new Rp,n=new $f,r=new Hf(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new xp},normalMatrix:{value:new yf}}),this.matrix=new xp,this.matrixWorld=new xp,this.matrixAutoUpdate=qp.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=qp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ip,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lp.setFromAxisAngle(e,t),this.quaternion.multiply(Lp),this}rotateOnWorldAxis(e,t){return Lp.setFromAxisAngle(e,t),this.quaternion.premultiply(Lp),this}rotateX(e){return this.rotateOnAxis(Bp,e)}rotateY(e){return this.rotateOnAxis(jp,e)}rotateZ(e){return this.rotateOnAxis(Vp,e)}translateOnAxis(e,t){return kp.copy(e).applyQuaternion(this.quaternion),this.position.add(kp.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Bp,e)}translateY(e){return this.translateOnAxis(jp,e)}translateZ(e){return this.translateOnAxis(Vp,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Np.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Dp.copy(e):Dp.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),zp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Np.lookAt(zp,Dp,this.up):Np.lookAt(Dp,zp,this.up),this.quaternion.setFromRotationMatrix(Np),r&&(Np.extractRotation(r.matrixWorld),Lp.setFromRotationMatrix(Np),this.quaternion.premultiply(Lp.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent($p),Gp.child=e,this.dispatchEvent(Gp),Gp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Hp),Wp.child=e,this.dispatchEvent(Wp),Wp.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Np.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Np.multiply(e.parent.matrixWorld)),e.applyMatrix4(Np),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent($p),Gp.child=e,this.dispatchEvent(Gp),Gp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,e,Up),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,Fp,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}qp.DEFAULT_UP=new Hf(0,1,0),qp.DEFAULT_MATRIX_AUTO_UPDATE=!0,qp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xp=new Hf,Yp=new Hf,Kp=new Hf,Zp=new Hf,Jp=new Hf,Qp=new Hf,em=new Hf,tm=new Hf,nm=new Hf,rm=new Hf,im=new Uf,om=new Uf,am=new Uf;class sm{constructor(e=new Hf,t=new Hf,n=new Hf){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Xp.subVectors(e,t),r.cross(Xp);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Xp.subVectors(r,t),Yp.subVectors(n,t),Kp.subVectors(e,t);const o=Xp.dot(Xp),a=Xp.dot(Yp),s=Xp.dot(Kp),l=Yp.dot(Yp),c=Yp.dot(Kp),u=o*l-a*a;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Zp)&&Zp.x>=0&&Zp.y>=0&&Zp.x+Zp.y<=1}static getInterpolation(e,t,n,r,i,o,a,s){return null===this.getBarycoord(e,t,n,r,Zp)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Zp.x),s.addScaledVector(o,Zp.y),s.addScaledVector(a,Zp.z),s)}static getInterpolatedAttribute(e,t,n,r,i,o){return im.setScalar(0),om.setScalar(0),am.setScalar(0),im.fromBufferAttribute(e,t),om.fromBufferAttribute(e,n),am.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(im,i.x),o.addScaledVector(om,i.y),o.addScaledVector(am,i.z),o}static isFrontFacing(e,t,n,r){return Xp.subVectors(n,t),Yp.subVectors(e,t),Xp.cross(Yp).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xp.subVectors(this.c,this.b),Yp.subVectors(this.a,this.b),.5*Xp.cross(Yp).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sm.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sm.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return sm.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return sm.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sm.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;Jp.subVectors(r,n),Qp.subVectors(i,n),tm.subVectors(e,n);const s=Jp.dot(tm),l=Qp.dot(tm);if(s<=0&&l<=0)return t.copy(n);nm.subVectors(e,r);const c=Jp.dot(nm),u=Qp.dot(nm);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(Jp,o);rm.subVectors(e,i);const d=Jp.dot(rm),f=Qp.dot(rm);if(f>=0&&d<=f)return t.copy(i);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(Qp,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return em.subVectors(i,r),a=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(em,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(Jp,o).addScaledVector(Qp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cm={h:0,s:0,l:0},um={h:0,s:0,l:0};function hm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class dm{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vd){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Af.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Af.workingColorSpace){return this.r=e,this.g=t,this.b=n,Af.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Af.workingColorSpace){if(e=df(e,1),t=hf(t,0,1),n=hf(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=hm(i,r,e+1/3),this.g=hm(i,r,e),this.b=hm(i,r,e-1/3)}return Af.toWorkingColorSpace(this,r),this}setStyle(e,t=Vd){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vd){const n=lm[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pf(e.r),this.g=Pf(e.g),this.b=Pf(e.b),this}copyLinearToSRGB(e){return this.r=Rf(e.r),this.g=Rf(e.g),this.b=Rf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vd){return Af.fromWorkingColorSpace(fm.copy(this),e),65536*Math.round(hf(255*fm.r,0,255))+256*Math.round(hf(255*fm.g,0,255))+Math.round(hf(255*fm.b,0,255))}getHexString(e=Vd){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Af.workingColorSpace){Af.fromWorkingColorSpace(fm.copy(this),t);const n=fm.r,r=fm.g,i=fm.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=Af.workingColorSpace){return Af.fromWorkingColorSpace(fm.copy(this),t),e.r=fm.r,e.g=fm.g,e.b=fm.b,e}getStyle(e=Vd){Af.fromWorkingColorSpace(fm.copy(this),e);const t=fm.r,n=fm.g,r=fm.b;return e!==Vd?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(cm),this.setHSL(cm.h+e,cm.s+t,cm.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(cm),e.getHSL(um);const n=ff(cm.h,um.h,t),r=ff(cm.s,um.s,t),i=ff(cm.l,um.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fm=new dm;dm.NAMES=lm;let pm=0;class mm extends of{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pm++}),this.uuid=uf(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=ih,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new dm(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wd,this.stencilZFail=Wd,this.stencilZPass=Wd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==ih&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Wd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Wd&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class gm extends mm{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dm(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rp,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vm=new Hf,ym=new vf;class bm{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=Xh,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ym.fromBufferAttribute(this,t),ym.applyMatrix3(e),this.setXY(t,ym.x,ym.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)vm.fromBufferAttribute(this,t),vm.applyMatrix3(e),this.setXYZ(t,vm.x,vm.y,vm.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vm.fromBufferAttribute(this,t),vm.applyMatrix4(e),this.setXYZ(t,vm.x,vm.y,vm.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vm.fromBufferAttribute(this,t),vm.applyNormalMatrix(e),this.setXYZ(t,vm.x,vm.y,vm.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vm.fromBufferAttribute(this,t),vm.transformDirection(e),this.setXYZ(t,vm.x,vm.y,vm.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=pf(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mf(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pf(t,this.array)),t}setX(e,t){return this.normalized&&(t=mf(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pf(t,this.array)),t}setY(e,t){return this.normalized&&(t=mf(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mf(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pf(t,this.array)),t}setW(e,t){return this.normalized&&(t=mf(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mf(t,this.array),n=mf(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=mf(t,this.array),n=mf(n,this.array),r=mf(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=mf(t,this.array),n=mf(n,this.array),r=mf(r,this.array),i=mf(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class xm extends bm{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class _m extends bm{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class wm extends bm{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Sm=0;const Em=new xp,Cm=new qp,Mm=new Hf,Tm=new qf,Am=new qf,Pm=new Hf;class Rm extends of{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sm++}),this.uuid=uf(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xf(e)?_m:xm)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new yf).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Em.makeRotationFromQuaternion(e),this.applyMatrix4(Em),this}rotateX(e){return Em.makeRotationX(e),this.applyMatrix4(Em),this}rotateY(e){return Em.makeRotationY(e),this.applyMatrix4(Em),this}rotateZ(e){return Em.makeRotationZ(e),this.applyMatrix4(Em),this}translate(e,t,n){return Em.makeTranslation(e,t,n),this.applyMatrix4(Em),this}scale(e,t,n){return Em.makeScale(e,t,n),this.applyMatrix4(Em),this}lookAt(e){return Cm.lookAt(e),Cm.updateMatrix(),this.applyMatrix4(Cm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mm).negate(),this.translate(Mm.x,Mm.y,Mm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new wm(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new qf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Hf(-1/0,-1/0,-1/0),new Hf(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Tm.setFromBufferAttribute(n),this.morphTargetsRelative?(Pm.addVectors(this.boundingBox.min,Tm.min),this.boundingBox.expandByPoint(Pm),Pm.addVectors(this.boundingBox.max,Tm.max),this.boundingBox.expandByPoint(Pm)):(this.boundingBox.expandByPoint(Tm.min),this.boundingBox.expandByPoint(Tm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Hf,1/0);if(e){const n=this.boundingSphere.center;if(Tm.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Am.setFromBufferAttribute(n),this.morphTargetsRelative?(Pm.addVectors(Tm.min,Am.min),Tm.expandByPoint(Pm),Pm.addVectors(Tm.max,Am.max),Tm.expandByPoint(Pm)):(Tm.expandByPoint(Am.min),Tm.expandByPoint(Am.max))}Tm.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Pm.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Pm));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)Pm.fromBufferAttribute(o,t),a&&(Mm.fromBufferAttribute(e,t),Pm.add(Mm)),r=Math.max(r,n.distanceToSquared(Pm))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new bm(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],s=[];for(let e=0;e<n.count;e++)a[e]=new Hf,s[e]=new Hf;const l=new Hf,c=new Hf,u=new Hf,h=new vf,d=new vf,f=new vf,p=new Hf,m=new Hf;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),f.fromBufferAttribute(i,r),c.sub(l),u.sub(l),d.sub(h),f.sub(h);const o=1/(d.x*f.y-f.x*d.y);isFinite(o)&&(p.copy(c).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-f.x).multiplyScalar(o),a[e].add(p),a[t].add(p),a[r].add(p),s[e].add(m),s[t].add(m),s[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let t=0,n=v.length;t<n;++t){const n=v[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)g(e.getX(t+0),e.getX(t+1),e.getX(t+2))}const y=new Hf,b=new Hf,x=new Hf,_=new Hf;function w(e){x.fromBufferAttribute(r,e),_.copy(x);const t=a[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),b.crossVectors(_,t);const n=b.dot(s[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let t=0,n=v.length;t<n;++t){const n=v[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)w(e.getX(t+0)),w(e.getX(t+1)),w(e.getX(t+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new bm(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Hf,i=new Hf,o=new Hf,a=new Hf,s=new Hf,l=new Hf,c=new Hf,u=new Hf;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Pm.fromBufferAttribute(e,t),Pm.normalize(),e.setXYZ(t,Pm.x,Pm.y,Pm.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new bm(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Rm,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Im=new xp,Om=new bp,km=new hp,Lm=new Hf,Nm=new Hf,Dm=new Hf,zm=new Hf,Um=new Hf,Fm=new Hf,Bm=new Hf,jm=new Hf;class Vm extends qp{constructor(e=new Rm,t=new gm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){Fm.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(Um.fromBufferAttribute(s,e),o?Fm.addScaledVector(Um,r):Fm.addScaledVector(Um.sub(t),r))}t.add(Fm)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),km.copy(n.boundingSphere),km.applyMatrix4(i),Om.copy(e.ray).recast(e.near),!1===km.containsPoint(Om.origin)){if(null===Om.intersectSphere(km,Lm))return;if(Om.origin.distanceToSquared(Lm)>(e.far-e.near)**2)return}Im.copy(i).invert(),Om.copy(e.ray).applyMatrix4(Im),null!==n.boundingBox&&!1===Om.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Om)}}_computeIntersections(e,t,n){let r;const i=this.geometry,o=this.material,a=i.index,s=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==a)if(Array.isArray(o))for(let i=0,s=h.length;i<s;i++){const s=h[i],f=o[s.materialIndex];for(let i=Math.max(s.start,d.start),o=Math.min(a.count,Math.min(s.start+s.count,d.start+d.count));i<o;i+=3)r=$m(this,f,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else for(let i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);i<s;i+=3)r=$m(this,o,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r));else if(void 0!==s)if(Array.isArray(o))for(let i=0,a=h.length;i<a;i++){const a=h[i],f=o[a.materialIndex];for(let i=Math.max(a.start,d.start),o=Math.min(s.count,Math.min(a.start+a.count,d.start+d.count));i<o;i+=3)r=$m(this,f,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}else for(let i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);i<a;i+=3)r=$m(this,o,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}function $m(e,t,n,r,i,o,a,s,l,c){e.getVertexPosition(s,Nm),e.getVertexPosition(l,Dm),e.getVertexPosition(c,zm);const u=function(e,t,n,r,i,o,a,s){let l;if(l=1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,0===t.side,s),null===l)return null;jm.copy(s),jm.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(jm);return c<n.near||c>n.far?null:{distance:c,point:jm.clone(),object:e}}(e,t,n,r,Nm,Dm,zm,Bm);if(u){const e=new Hf;sm.getBarycoord(Bm,Nm,Dm,zm,e),i&&(u.uv=sm.getInterpolatedAttribute(i,s,l,c,e,new vf)),o&&(u.uv1=sm.getInterpolatedAttribute(o,s,l,c,e,new vf)),a&&(u.normal=sm.getInterpolatedAttribute(a,s,l,c,e,new Hf),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c,normal:new Hf,materialIndex:0};sm.getNormal(Nm,Dm,zm,t.normal),u.face=t,u.barycoord=e}return u}class Hm extends Rm{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,x=o/2,_=f/2,w=p/2,S=m+1,E=g+1;let C=0,M=0;const T=new Hf;for(let o=0;o<E;o++){const a=o*b-_;for(let s=0;s<S;s++){const h=s*y-x;T[e]=h*r,T[t]=a*i,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-o/g),C+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(d,M,v),d+=M,h+=C}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new wm(l,3)),this.setAttribute("normal",new wm(c,3)),this.setAttribute("uv",new wm(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gm(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Wm(e){const t={};for(let n=0;n<e.length;n++){const r=Gm(e[n]);for(const e in r)t[e]=r[e]}return t}function qm(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Af.workingColorSpace}const Xm={clone:Gm,merge:Wm};class Ym extends mm{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gm(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Km extends qp{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xp,this.projectionMatrix=new xp,this.projectionMatrixInverse=new xp,this.coordinateSystem=nf}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Zm=new Hf,Jm=new vf,Qm=new vf;class eg extends Km{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*cf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*lf*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*cf*Math.atan(Math.tan(.5*lf*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Zm.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Zm.x,Zm.y).multiplyScalar(-e/Zm.z),Zm.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Zm.x,Zm.y).multiplyScalar(-e/Zm.z)}getViewSize(e,t){return this.getViewBounds(e,Jm,Qm),t.subVectors(Qm,Jm)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*lf*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const tg=-90;class ng extends qp{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new eg(tg,1,e,t);r.layers=this.layers,this.add(r);const i=new eg(tg,1,e,t);i.layers=this.layers,this.add(i);const o=new eg(tg,1,e,t);o.layers=this.layers,this.add(o);const a=new eg(tg,1,e,t);a.layers=this.layers,this.add(a);const s=new eg(tg,1,e,t);s.layers=this.layers,this.add(s);const l=new eg(tg,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,o,a,s]=t;for(const e of t)this.remove(e);if(e===nf)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==rf)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,a,s,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class rg extends zf{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Rh,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ig extends Bf{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new rg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Fh}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Hm(5,5,5),a=new Ym({name:"CubemapFromEquirect",uniforms:Gm(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=t;const s=new Vm(o,a),l=t.minFilter;return t.minFilter===jh&&(t.minFilter=Fh),new ng(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}class og extends qp{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Rp,this.environmentIntensity=1,this.environmentRotation=new Rp,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ag extends zf{constructor(e=null,t=1,n=1,r,i,o,a,s,l=1003,c=1003,u,h){super(null,o,a,s,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sg=new Hf,lg=new Hf,cg=new yf;class ug{constructor(e=new Hf(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=sg.subVectors(n,t).cross(lg.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(sg),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||cg.getNormalMatrix(e),r=this.coplanarPoint(sg).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hg=new hp,dg=new Hf;class fg{constructor(e=new ug,t=new ug,n=new ug,r=new ug,i=new ug,o=new ug){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(s-i,h-l,m-d,b-g).normalize(),n[1].setComponents(s+i,h+l,m+d,b+g).normalize(),n[2].setComponents(s+o,h+c,m+f,b+v).normalize(),n[3].setComponents(s-o,h-c,m-f,b-v).normalize(),n[4].setComponents(s-a,h-u,m-p,b-y).normalize(),t===nf)n[5].setComponents(s+a,h+u,m+p,b+y).normalize();else{if(t!==rf)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,p,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),hg.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),hg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hg)}intersectsSprite(e){return hg.center.set(0,0,0),hg.radius=.7071067811865476,hg.applyMatrix4(e.matrixWorld),this.intersectsSphere(hg)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(dg.x=r.normal.x>0?e.max.x:e.min.x,dg.y=r.normal.y>0?e.max.y:e.min.y,dg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(dg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class pg extends mm{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dm(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const mg=new Hf,gg=new Hf,vg=new xp,yg=new bp,bg=new hp,xg=new Hf,_g=new Hf;class wg extends qp{constructor(e=new Rm,t=new pg){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)mg.fromBufferAttribute(t,e-1),gg.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=mg.distanceTo(gg);e.setAttribute("lineDistance",new wm(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bg.copy(n.boundingSphere),bg.applyMatrix4(r),bg.radius+=i,!1===e.ray.intersectsSphere(bg))return;vg.copy(r).invert(),yg.copy(e.ray).applyMatrix4(vg);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=c.getX(i),r=c.getX(i+1),o=Sg(this,e,yg,s,n,r);o&&t.push(o)}if(this.isLineLoop){const i=c.getX(r-1),o=c.getX(n),a=Sg(this,e,yg,s,i,o);a&&t.push(a)}}else{const n=Math.max(0,o.start),r=Math.min(u.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=Sg(this,e,yg,s,i,i+1);n&&t.push(n)}if(this.isLineLoop){const i=Sg(this,e,yg,s,r-1,n);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Sg(e,t,n,r,i,o){const a=e.geometry.attributes.position;if(mg.fromBufferAttribute(a,i),gg.fromBufferAttribute(a,o),n.distanceSqToSegment(mg,gg,xg,_g)>r)return;xg.applyMatrix4(e.matrixWorld);const s=t.ray.origin.distanceTo(xg);return s<t.near||s>t.far?void 0:{distance:s,point:_g.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:e}}const Eg=new Hf,Cg=new Hf;class Mg extends wg{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Eg.fromBufferAttribute(t,e),Cg.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Eg.distanceTo(Cg);e.setAttribute("lineDistance",new wm(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Tg extends qp{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Ag extends zf{constructor(e,t,n,r,i,o,a,s,l,c,u,h){super(null,o,a,s,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Pg extends zf{constructor(e,t,n,r,i,o,a,s,l,c=1026){if(c!==td&&c!==nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===td&&(n=qh),void 0===n&&c===nd&&(n=Jh),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Dh,this.minFilter=void 0!==s?s:Dh,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Rg extends Rm{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new wm(f,3)),this.setAttribute("normal",new wm(p,3)),this.setAttribute("uv",new wm(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ig extends mm{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new dm(16777215),this.specular=new dm(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dm(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new vf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rp,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Og extends mm{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kg extends mm{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Lg(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}class Ng{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Dg extends Ng{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+v*o[l+e]+y*o[s+e]+b*o[u+e];return i}}class zg extends Ng{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}class Ug extends Ng{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fg{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Lg(t,this.TimeBufferType),this.values=Lg(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Lg(e.times,Array),values:Lg(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ug(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zg(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Dg(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ud:t=this.InterpolantFactoryMethodDiscrete;break;case Fd:t=this.InterpolantFactoryMethodLinear;break;case Bd:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ud;case this.InterpolantFactoryMethodLinear:return Fd;case this.InterpolantFactoryMethodSmooth:return Bd}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&(a=r,ArrayBuffer.isView(a)&&!(a instanceof DataView)))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}var a;return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Bd,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Fg.prototype.TimeBufferType=Float32Array,Fg.prototype.ValueBufferType=Float32Array,Fg.prototype.DefaultInterpolation=Fd;class Bg extends Fg{constructor(e,t,n){super(e,t,n)}}Bg.prototype.ValueTypeName="bool",Bg.prototype.ValueBufferType=Array,Bg.prototype.DefaultInterpolation=Ud,Bg.prototype.InterpolantFactoryMethodLinear=void 0,Bg.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Fg{}).prototype.ValueTypeName="color";(class extends Fg{}).prototype.ValueTypeName="number";class jg extends Ng{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)$f.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Vg extends Fg{InterpolantFactoryMethodLinear(e){return new jg(this.times,this.values,this.getValueSize(),e)}}Vg.prototype.ValueTypeName="quaternion",Vg.prototype.InterpolantFactoryMethodSmooth=void 0;class $g extends Fg{constructor(e,t,n){super(e,t,n)}}$g.prototype.ValueTypeName="string",$g.prototype.ValueBufferType=Array,$g.prototype.DefaultInterpolation=Ud,$g.prototype.InterpolantFactoryMethodLinear=void 0,$g.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Fg{}).prototype.ValueTypeName="vector";Error;class Hg extends qp{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dm(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const Gg=new xp,Wg=new Hf,qg=new Hf;class Xg{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new vf(512,512),this.map=null,this.mapPass=null,this.matrix=new xp,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fg,this._frameExtents=new vf(1,1),this._viewportCount=1,this._viewports=[new Uf(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Wg.setFromMatrixPosition(e.matrixWorld),t.position.copy(Wg),qg.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qg),t.updateMatrixWorld(),Gg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Gg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yg extends Xg{constructor(){super(new eg(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*cf*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Kg extends Hg{constructor(e,t,n=0,r=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qp.DEFAULT_UP),this.updateMatrix(),this.target=new qp,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new Yg}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Zg extends Km{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Jg extends Xg{constructor(){super(new Zg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Qg extends Hg{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qp.DEFAULT_UP),this.updateMatrix(),this.target=new qp,this.shadow=new Jg}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ev extends Hg{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tv extends eg{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const nv="\\[\\]\\.:\\/",rv=new RegExp("["+nv+"]","g"),iv="[^"+nv+"]",ov="[^"+nv.replace("\\.","")+"]",av=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",iv)+/(WCOD+)?/.source.replace("WCOD",ov)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iv)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iv)+"$"),sv=["material","materials","bones","map"];class lv{constructor(e,t,n){this.path=t,this.parsedPath=n||lv.parseTrackName(t),this.node=lv.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new lv.Composite(e,t,n):new lv(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rv,"")}static parseTrackName(e){const t=av.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==sv.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=lv.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}lv.Composite=class{constructor(e,t,n){const r=n||lv.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},lv.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},lv.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},lv.prototype.GetterByBindingType=[lv.prototype._getValue_direct,lv.prototype._getValue_array,lv.prototype._getValue_arrayElement,lv.prototype._getValue_toArray],lv.prototype.SetterByBindingTypeAndVersioning=[[lv.prototype._setValue_direct,lv.prototype._setValue_direct_setNeedsUpdate,lv.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[lv.prototype._setValue_array,lv.prototype._setValue_array_setNeedsUpdate,lv.prototype._setValue_array_setMatrixWorldNeedsUpdate],[lv.prototype._setValue_arrayElement,lv.prototype._setValue_arrayElement_setNeedsUpdate,lv.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[lv.prototype._setValue_fromArray,lv.prototype._setValue_fromArray_setNeedsUpdate,lv.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class cv extends Mg{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Rm;r.setIndex(new bm(n,1)),r.setAttribute("position",new wm([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new pg({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class uv extends Mg{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Rm;n.setAttribute("position",new wm(t,3)),n.setAttribute("color",new wm([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new pg({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new dm,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function hv(e,t,n,r){const i=function(e){switch(e){case Vh:case $h:return{byteLength:1,components:1};case Gh:case Hh:case Yh:return{byteLength:2,components:1};case Kh:case Zh:return{byteLength:2,components:4};case qh:case Wh:case Xh:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case 1021:case ed:return e*t;case 1025:return e*t*2;case rd:case id:return e*t/i.components*i.byteLength;case 1030:case od:return e*t*2/i.components*i.byteLength;case 1022:return e*t*3/i.components*i.byteLength;case Qh:case ad:return e*t*4/i.components*i.byteLength;case sd:case ld:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case cd:case ud:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case dd:case pd:return Math.max(e,16)*Math.max(t,8)/4;case hd:case fd:return Math.max(e,8)*Math.max(t,8)/2;case md:case gd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case vd:case yd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case bd:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case xd:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case _d:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case wd:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Sd:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case Ed:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Cd:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case Md:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Td:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Ad:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Pd:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Rd:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Id:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Od:case kd:case Ld:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case Nd:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Dd:case zd:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:eh}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=eh);var dv=a(4100);function fv(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function pv(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,o=r.byteLength,a=e.createBuffer();let s;if(e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)s=e.FLOAT;else if(r instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=e.SHORT;else if(r instanceof Uint32Array)s=e.UNSIGNED_INT;else if(r instanceof Int32Array)s=e.INT;else if(r instanceof Int8Array)s=e.BYTE;else if(r instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,o=n.updateRanges;if(e.bindBuffer(r,t),0===o.length)e.bufferSubData(r,0,i);else{o.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<o.length;e++){const n=o[t],r=o[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,o[t]=r)}o.length=t+1;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}const mv={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},gv={common:{diffuse:{value:new dm(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yf},alphaMap:{value:null},alphaMapTransform:{value:new yf},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yf}},envmap:{envMap:{value:null},envMapRotation:{value:new yf},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yf}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yf}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yf},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yf},normalScale:{value:new vf(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yf},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yf}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yf}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yf}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dm(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dm(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yf},alphaTest:{value:0},uvTransform:{value:new yf}},sprite:{diffuse:{value:new dm(16777215)},opacity:{value:1},center:{value:new vf(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yf},alphaMap:{value:null},alphaMapTransform:{value:new yf},alphaTest:{value:0}}},vv={basic:{uniforms:Wm([gv.common,gv.specularmap,gv.envmap,gv.aomap,gv.lightmap,gv.fog]),vertexShader:mv.meshbasic_vert,fragmentShader:mv.meshbasic_frag},lambert:{uniforms:Wm([gv.common,gv.specularmap,gv.envmap,gv.aomap,gv.lightmap,gv.emissivemap,gv.bumpmap,gv.normalmap,gv.displacementmap,gv.fog,gv.lights,{emissive:{value:new dm(0)}}]),vertexShader:mv.meshlambert_vert,fragmentShader:mv.meshlambert_frag},phong:{uniforms:Wm([gv.common,gv.specularmap,gv.envmap,gv.aomap,gv.lightmap,gv.emissivemap,gv.bumpmap,gv.normalmap,gv.displacementmap,gv.fog,gv.lights,{emissive:{value:new dm(0)},specular:{value:new dm(1118481)},shininess:{value:30}}]),vertexShader:mv.meshphong_vert,fragmentShader:mv.meshphong_frag},standard:{uniforms:Wm([gv.common,gv.envmap,gv.aomap,gv.lightmap,gv.emissivemap,gv.bumpmap,gv.normalmap,gv.displacementmap,gv.roughnessmap,gv.metalnessmap,gv.fog,gv.lights,{emissive:{value:new dm(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mv.meshphysical_vert,fragmentShader:mv.meshphysical_frag},toon:{uniforms:Wm([gv.common,gv.aomap,gv.lightmap,gv.emissivemap,gv.bumpmap,gv.normalmap,gv.displacementmap,gv.gradientmap,gv.fog,gv.lights,{emissive:{value:new dm(0)}}]),vertexShader:mv.meshtoon_vert,fragmentShader:mv.meshtoon_frag},matcap:{uniforms:Wm([gv.common,gv.bumpmap,gv.normalmap,gv.displacementmap,gv.fog,{matcap:{value:null}}]),vertexShader:mv.meshmatcap_vert,fragmentShader:mv.meshmatcap_frag},points:{uniforms:Wm([gv.points,gv.fog]),vertexShader:mv.points_vert,fragmentShader:mv.points_frag},dashed:{uniforms:Wm([gv.common,gv.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mv.linedashed_vert,fragmentShader:mv.linedashed_frag},depth:{uniforms:Wm([gv.common,gv.displacementmap]),vertexShader:mv.depth_vert,fragmentShader:mv.depth_frag},normal:{uniforms:Wm([gv.common,gv.bumpmap,gv.normalmap,gv.displacementmap,{opacity:{value:1}}]),vertexShader:mv.meshnormal_vert,fragmentShader:mv.meshnormal_frag},sprite:{uniforms:Wm([gv.sprite,gv.fog]),vertexShader:mv.sprite_vert,fragmentShader:mv.sprite_frag},background:{uniforms:{uvTransform:{value:new yf},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mv.background_vert,fragmentShader:mv.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yf}},vertexShader:mv.backgroundCube_vert,fragmentShader:mv.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mv.cube_vert,fragmentShader:mv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mv.equirect_vert,fragmentShader:mv.equirect_frag},distanceRGBA:{uniforms:Wm([gv.common,gv.displacementmap,{referencePosition:{value:new Hf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mv.distanceRGBA_vert,fragmentShader:mv.distanceRGBA_frag},shadow:{uniforms:Wm([gv.lights,gv.fog,{color:{value:new dm(0)},opacity:{value:1}}]),vertexShader:mv.shadow_vert,fragmentShader:mv.shadow_frag}};vv.physical={uniforms:Wm([vv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yf},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yf},clearcoatNormalScale:{value:new vf(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yf},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yf},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yf},sheen:{value:0},sheenColor:{value:new dm(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yf},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yf},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yf},transmissionSamplerSize:{value:new vf},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yf},attenuationDistance:{value:0},attenuationColor:{value:new dm(0)},specularColor:{value:new dm(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yf},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yf},anisotropyVector:{value:new vf},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yf}}]),vertexShader:mv.meshphysical_vert,fragmentShader:mv.meshphysical_frag};const yv={r:0,b:0,g:0},bv=new Rp,xv=new xp;function _v(e,t,n,r,i,o,a){const s=new dm(0);let l,c,u=!0===o?0:1,h=null,d=0,f=null;function p(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function m(t,n){t.getRGB(yv,qm(e)),r.buffers.color.setClear(yv.r,yv.g,yv.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let n=!1;const i=p(t);null===i?m(s,u):i&&i.isColor&&(m(i,1),n=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=p(n);r&&(r.isCubeTexture||r.mapping===Oh)?(void 0===c&&(c=new Vm(new Hm(1,1,1),new Ym({name:"BackgroundCubeMaterial",uniforms:Gm(vv.backgroundCube.uniforms),vertexShader:vv.backgroundCube.vertexShader,fragmentShader:vv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),bv.copy(n.backgroundRotation),bv.x*=-1,bv.y*=-1,bv.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(bv.y*=-1,bv.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(xv.makeRotationFromEuler(bv)),c.material.toneMapped=Af.getTransfer(r.colorSpace)!==Gd,h===r&&d===r.version&&f===e.toneMapping||(c.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Vm(new Rg(2,2),new Ym({name:"BackgroundMaterial",uniforms:Gm(vv.background.uniforms),vertexShader:vv.background.vertexShader,fragmentShader:vv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Af.getTransfer(r.colorSpace)!==Gd,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose()),void 0!==l&&(l.geometry.dispose(),l.material.dispose())}}}function wv(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=c(null);let o=i,a=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function u(){const e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function f(){const t=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function p(t,n,r,i,o,a,s){!0===s?e.vertexAttribIPointer(t,n,r,o,a):e.vertexAttribPointer(t,n,r,i,o,a)}function m(){g(),a=!0,o!==i&&(o=i,s(o.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const o=!0===i.wireframe;let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let s=a[n.id];void 0===s&&(s={},a[n.id]=s);let l=s[o];return void 0===l&&(l=c(e.createVertexArray()),s[o]=l),l}(m,l,i);o!==y&&(o=y,s(o.object)),v=function(e,t,n,r){const i=o.attributes,a=t.attributes;let s=0;const l=n.getAttributes();for(const t in l)if(l[t].location>=0){const n=i[t];let r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;s++}return o.attributesNum!==s||o.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},a=t.attributes;let s=0;const l=n.getAttributes();for(const t in l)if(l[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,s++}o.attributes=i,o.attributesNum=s,o.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||a)&&(a=!1,function(n,r,i,o){u();const a=o.attributes,s=i.getAttributes(),l=r.defaultAttributeValues;for(const r in s){const i=s[r];if(i.location>=0){let s=a[r];if(void 0===s&&("instanceMatrix"===r&&n.instanceMatrix&&(s=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const r=s.normalized,a=s.itemSize,l=t.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,f=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||s.gpuType===Wh;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,g=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)d(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)p(i.location+e,a/i.locationSize,u,r,l*f,(g+a/i.locationSize*e)*f,m)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)d(i.location+e,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)p(i.location+e,a/i.locationSize,u,r,a*f,a/i.locationSize*e*f,m)}}else if(void 0!==l){const t=l[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}f()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:f}}function Sv(e,t,n){let r;function i(t,i,o){0!==o&&(e.drawArraysInstanced(r,t,i,o),n.update(i,r,o))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,o);let a=0;for(let e=0;e<o;e++)a+=i[e];n.update(a,r,1)},this.renderMultiDrawInstances=function(e,o,a,s){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],o[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,o,0,s,0,a);let t=0;for(let e=0;e<a;e++)t+=o[e]*s[e];n.update(t,r,1)}}}function Ev(e,t,n,r){let i;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,textureFormatReadable:function(t){return t===Qh||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===Yh&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Vh&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==Xh&&!i)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Cv(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new ug,s=new yf,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=e.get(a);if(!i||null===h||0===h.length||o&&!f)o?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=c(h,s,t,u);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Mv(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=Rh:304===t&&(e.mapping=Ih),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(303===o||304===o){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new ig(o.height);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}const Tv=[.125,.215,.35,.446,.526,.582],Av=new Zg,Pv=new dm;let Rv=null,Iv=0,Ov=0,kv=!1;const Lv=(1+Math.sqrt(5))/2,Nv=1/Lv,Dv=[new Hf(-Lv,Nv,0),new Hf(Lv,Nv,0),new Hf(-Nv,0,Lv),new Hf(Nv,0,Lv),new Hf(0,Lv,-Nv),new Hf(0,Lv,Nv),new Hf(-1,1,-1),new Hf(1,1,-1),new Hf(-1,1,1),new Hf(1,1,1)];class zv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Rv=this._renderer.getRenderTarget(),Iv=this._renderer.getActiveCubeFace(),Ov=this._renderer.getActiveMipmapLevel(),kv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=jv(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Bv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rv,Iv,Ov),this._renderer.xr.enabled=kv,e.scissorTest=!1,Fv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Rh||e.mapping===Ih?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rv=this._renderer.getRenderTarget(),Iv=this._renderer.getActiveCubeFace(),Ov=this._renderer.getActiveMipmapLevel(),kv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Fh,minFilter:Fh,generateMipmaps:!1,type:Yh,format:Qh,colorSpace:$d,depthBuffer:!1},r=Uv(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Uv(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+Tv.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=Tv[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),b=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(h,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const x=new Rm;x.setAttribute("position",new bm(v,p)),x.setAttribute("uv",new bm(y,m)),x.setAttribute("faceIndex",new bm(b,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new Hf(0,1,0);return new Ym({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new Vm(this._lodPlanes[0],e);this._renderer.compile(t,Av)}_sceneToCubeUV(e,t,n,r){const i=new eg(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(Pv),s.toneMapping=0,s.autoClear=!1;const u=new gm({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Vm(new Hm,u);let d=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,d=!0):(u.color.copy(Pv),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1===n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t]));const l=this._cubeSize;Fv(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Rh||e.mapping===Ih;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=jv()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Bv());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Vm(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Fv(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,Av)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let t=1;t<r;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=Dv[(r-t-1)%Dv.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Vm(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];Fv(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,Av)}}function Uv(e,t,n){const r=new Bf(e,t,n);return r.texture.mapping=Oh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Fv(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Bv(){return new Ym({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function jv(){return new Ym({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vv(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=303===o||304===o,s=o===Rh||o===Ih;if(a||s){let o=t.get(i);const l=void 0!==o?o.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new zv(e)),o=a?n.fromEquirectangular(i,o):n.fromCubemap(i,o),o.texture.pmremVersion=i.pmremVersion,t.set(i,o),o.texture;if(void 0!==o)return o.texture;{const l=i.image;return a&&l&&l.height>0||s&&l&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(l)?(null===n&&(n=new zv(e)),o=a?n.fromEquirectangular(i):n.fromCubemap(i),o.texture.pmremVersion=i.pmremVersion,t.set(i,o),i.addEventListener("dispose",r),o.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function $v(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&Ef("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Hv(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const s=new(xf(n)?_m:xm)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Gv(e,t,n){let r,i,o;function a(t,a,s){0!==s&&(e.drawElementsInstanced(r,a,i,t*o,s),n.update(a,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,o,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,o,0,i,e,0,a);let s=0;for(let e=0;e<a;e++)s+=o[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/o,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*c[e];n.update(t,r,1)}}}function Wv(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function qv(e,t,n){const r=new WeakMap,i=new Uf;return{update:function(o,a,s){const l=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let h=r.get(a);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==a.morphAttributes.position,f=void 0!==a.morphAttributes.normal,p=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===f&&(y=2),!0===p&&(y=3);let b=a.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const _=new Float32Array(b*x*4*u),w=new jf(_,b,x,u);w.type=Xh,w.needsUpdate=!0;const S=4*y;for(let C=0;C<u;C++){const M=m[C],T=g[C],A=v[C],P=b*x*4*C;for(let R=0;R<M.count;R++){const I=R*S;!0===d&&(i.fromBufferAttribute(M,R),_[P+I+0]=i.x,_[P+I+1]=i.y,_[P+I+2]=i.z,_[P+I+3]=0),!0===f&&(i.fromBufferAttribute(T,R),_[P+I+4]=i.x,_[P+I+5]=i.y,_[P+I+6]=i.z,_[P+I+7]=0),!0===p&&(i.fromBufferAttribute(A,R),_[P+I+8]=i.x,_[P+I+9]=i.y,_[P+I+10]=i.z,_[P+I+11]=4===A.itemSize?i.w:1)}}function E(){w.dispose(),r.delete(a),a.removeEventListener("dispose",E)}h={count:u,texture:w,size:new vf(b,x)},r.set(a,h),a.addEventListener("dispose",E)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)s.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let O=0;for(let L=0;L<l.length;L++)O+=l[L];const k=a.morphTargetsRelative?1:1-O;s.getUniforms().setValue(e,"morphTargetBaseInfluence",k),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function Xv(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=r.render.frame,l=a.geometry,c=t.get(a,l);if(i.get(c)!==s&&(t.update(c),i.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),i.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),i.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return c},dispose:function(){i=new WeakMap}}}const Yv=new zf,Kv=new Pg(1,1),Zv=new jf,Jv=new Vf,Qv=new rg,ey=[],ty=[],ny=new Float32Array(16),ry=new Float32Array(9),iy=new Float32Array(4);function oy(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=ey[i];if(void 0===o&&(o=new Float32Array(i),ey[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function ay(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sy(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ly(e,t){let n=ty[t];void 0===n&&(n=new Int32Array(t),ty[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function cy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function uy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ay(n,t))return;e.uniform2fv(this.addr,t),sy(n,t)}}function hy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ay(n,t))return;e.uniform3fv(this.addr,t),sy(n,t)}}function dy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ay(n,t))return;e.uniform4fv(this.addr,t),sy(n,t)}}function fy(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ay(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),sy(n,t)}else{if(ay(n,r))return;iy.set(r),e.uniformMatrix2fv(this.addr,!1,iy),sy(n,r)}}function py(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ay(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),sy(n,t)}else{if(ay(n,r))return;ry.set(r),e.uniformMatrix3fv(this.addr,!1,ry),sy(n,r)}}function my(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ay(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),sy(n,t)}else{if(ay(n,r))return;ny.set(r),e.uniformMatrix4fv(this.addr,!1,ny),sy(n,r)}}function gy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function vy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ay(n,t))return;e.uniform2iv(this.addr,t),sy(n,t)}}function yy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ay(n,t))return;e.uniform3iv(this.addr,t),sy(n,t)}}function by(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ay(n,t))return;e.uniform4iv(this.addr,t),sy(n,t)}}function xy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function _y(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ay(n,t))return;e.uniform2uiv(this.addr,t),sy(n,t)}}function wy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ay(n,t))return;e.uniform3uiv(this.addr,t),sy(n,t)}}function Sy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ay(n,t))return;e.uniform4uiv(this.addr,t),sy(n,t)}}function Ey(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let o;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(Kv.compareFunction=515,o=Kv):o=Yv,n.setTexture2D(t||o,i)}function Cy(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Jv,i)}function My(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Qv,i)}function Ty(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Zv,i)}function Ay(e,t){e.uniform1fv(this.addr,t)}function Py(e,t){const n=oy(t,this.size,2);e.uniform2fv(this.addr,n)}function Ry(e,t){const n=oy(t,this.size,3);e.uniform3fv(this.addr,n)}function Iy(e,t){const n=oy(t,this.size,4);e.uniform4fv(this.addr,n)}function Oy(e,t){const n=oy(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ky(e,t){const n=oy(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ly(e,t){const n=oy(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ny(e,t){e.uniform1iv(this.addr,t)}function Dy(e,t){e.uniform2iv(this.addr,t)}function zy(e,t){e.uniform3iv(this.addr,t)}function Uy(e,t){e.uniform4iv(this.addr,t)}function Fy(e,t){e.uniform1uiv(this.addr,t)}function By(e,t){e.uniform2uiv(this.addr,t)}function jy(e,t){e.uniform3uiv(this.addr,t)}function Vy(e,t){e.uniform4uiv(this.addr,t)}function $y(e,t,n){const r=this.cache,i=t.length,o=ly(n,i);ay(r,o)||(e.uniform1iv(this.addr,o),sy(r,o));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||Yv,o[e])}function Hy(e,t,n){const r=this.cache,i=t.length,o=ly(n,i);ay(r,o)||(e.uniform1iv(this.addr,o),sy(r,o));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||Jv,o[e])}function Gy(e,t,n){const r=this.cache,i=t.length,o=ly(n,i);ay(r,o)||(e.uniform1iv(this.addr,o),sy(r,o));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||Qv,o[e])}function Wy(e,t,n){const r=this.cache,i=t.length,o=ly(n,i);ay(r,o)||(e.uniform1iv(this.addr,o),sy(r,o));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||Zv,o[e])}class qy{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return cy;case 35664:return uy;case 35665:return hy;case 35666:return dy;case 35674:return fy;case 35675:return py;case 35676:return my;case 5124:case 35670:return gy;case 35667:case 35671:return vy;case 35668:case 35672:return yy;case 35669:case 35673:return by;case 5125:return xy;case 36294:return _y;case 36295:return wy;case 36296:return Sy;case 35678:case 36198:case 36298:case 36306:case 35682:return Ey;case 35679:case 36299:case 36307:return Cy;case 35680:case 36300:case 36308:case 36293:return My;case 36289:case 36303:case 36311:case 36292:return Ty}}(t.type)}}class Xy{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ay;case 35664:return Py;case 35665:return Ry;case 35666:return Iy;case 35674:return Oy;case 35675:return ky;case 35676:return Ly;case 5124:case 35670:return Ny;case 35667:case 35671:return Dy;case 35668:case 35672:return zy;case 35669:case 35673:return Uy;case 5125:return Fy;case 36294:return By;case 36295:return jy;case 36296:return Vy;case 35678:case 36198:case 36298:case 36306:case 35682:return $y;case 35679:case 36299:case 36307:return Hy;case 35680:case 36300:case 36308:case 36293:return Gy;case 36289:case 36303:case 36311:case 36292:return Wy}}(t.type)}}class Yy{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const Ky=/(\w+)(\])?(\[|\.)?/g;function Zy(e,t){e.seq.push(t),e.map[t.id]=t}function Jy(e,t,n){const r=e.name,i=r.length;for(Ky.lastIndex=0;;){const o=Ky.exec(r),a=Ky.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){Zy(n,void 0===c?new qy(s,e,t):new Xy(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Yy(s),Zy(n,e)),n=e}}}class Qy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Jy(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function eb(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let tb=0;const nb=new yf;function rb(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=i;e<o;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ib(e,t){const n=function(e){Af._getMatrix(nb,Af.workingColorSpace,e);const t=`mat3( ${nb.elements.map((e=>e.toFixed(4)))} )`;switch(Af.getTransfer(e)){case Hd:return[t,"LinearTransferOETF"];case Gd:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function ob(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const ab=new Hf;function sb(e){return""!==e}function lb(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function cb(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ub=/^[ \t]*#include +<([\w\d./]+)>/gm;function hb(e){return e.replace(ub,fb)}const db=new Map;function fb(e,t){let n=mv[t];if(void 0===n){const e=db.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=mv[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return hb(n)}const pb=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mb(e){return e.replace(pb,gb)}function gb(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function vb(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function yb(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Rh:case Ih:t="ENVMAP_TYPE_CUBE";break;case Oh:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===Ih&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(sb).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(sb).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(sb).join("\n"),v.length>0&&(v+="\n")):(g=[vb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sb).join("\n"),v=[vb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?mv.tonemapping_pars_fragment:"",0!==n.toneMapping?ob("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",mv.colorspace_pars_fragment,ib("linearToOutputTexel",n.outputColorSpace),(Af.getLuminanceCoefficients(ab),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${ab.x.toFixed(4)}, ${ab.y.toFixed(4)}, ${ab.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(sb).join("\n")),a=hb(a),a=lb(a,n),a=cb(a,n),s=hb(s),s=lb(s,n),s=cb(s,n),a=mb(a),s=mb(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===tf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+a,x=y+v+s,_=eb(i,i.VERTEX_SHADER,b),w=eb(i,i.FRAGMENT_SHADER,x);function S(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(_).trim(),o=i.getShaderInfoLog(w).trim();let a=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(a=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,m,_,w);else{const e=rb(i,_,"vertex"),r=rb(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(s=!1);s&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:o,prefix:v}})}i.deleteShader(_),i.deleteShader(w),E=new Qy(i,m),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,m)}let E,C;i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===C&&S(this),C};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=i.getProgramParameter(m,37297)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=tb++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let bb=0;class xb{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new _b(e),t.set(e,n)),n}}class _b{constructor(e){this.id=bb++,this.code=e,this.usedTimes=0}}function wb(e,t,n,r,i,o,a){const s=new Ip,l=new xb,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(o,s,u,g,v){const y=g.fog,b=v.geometry,x=o.isMeshStandardMaterial?g.environment:null,_=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),w=_&&_.mapping===Oh?_.image.height:null,S=p[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,C=void 0!==E?E.length:0;let M,T,A,P,R=0;if(void 0!==b.morphAttributes.position&&(R=1),void 0!==b.morphAttributes.normal&&(R=2),void 0!==b.morphAttributes.color&&(R=3),S){const e=vv[S];M=e.vertexShader,T=e.fragmentShader}else M=o.vertexShader,T=o.fragmentShader,l.update(o),A=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const I=e.getRenderTarget(),O=e.state.buffers.depth.getReversed(),k=!0===v.isInstancedMesh,L=!0===v.isBatchedMesh,N=!!o.map,D=!!o.matcap,z=!!_,U=!!o.aoMap,F=!!o.lightMap,B=!!o.bumpMap,j=!!o.normalMap,V=!!o.displacementMap,$=!!o.emissiveMap,H=!!o.metalnessMap,G=!!o.roughnessMap,W=o.anisotropy>0,q=o.clearcoat>0,X=o.dispersion>0,Y=o.iridescence>0,K=o.sheen>0,Z=o.transmission>0,J=W&&!!o.anisotropyMap,Q=q&&!!o.clearcoatMap,ee=q&&!!o.clearcoatNormalMap,te=q&&!!o.clearcoatRoughnessMap,ne=Y&&!!o.iridescenceMap,re=Y&&!!o.iridescenceThicknessMap,ie=K&&!!o.sheenColorMap,oe=K&&!!o.sheenRoughnessMap,ae=!!o.specularMap,se=!!o.specularColorMap,le=!!o.specularIntensityMap,ce=Z&&!!o.transmissionMap,ue=Z&&!!o.thicknessMap,he=!!o.gradientMap,de=!!o.alphaMap,fe=o.alphaTest>0,pe=!!o.alphaHash,me=!!o.extensions;let ge=0;o.toneMapped&&(null!==I&&!0!==I.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:M,fragmentShader:T,defines:o.defines,customVertexShaderID:A,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:L,batchingColor:L&&null!==v._colorsTexture,instancing:k,instancingColor:k&&null!==v.instanceColor,instancingMorph:k&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:$d,alphaToCoverage:!!o.alphaToCoverage,map:N,matcap:D,envMap:z,envMapMode:z&&_.mapping,envMapCubeUVHeight:w,aoMap:U,lightMap:F,bumpMap:B,normalMap:j,displacementMap:d&&V,emissiveMap:$,normalMapObjectSpace:j&&1===o.normalMapType,normalMapTangentSpace:j&&0===o.normalMapType,metalnessMap:H,roughnessMap:G,anisotropy:W,anisotropyMap:J,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:X,iridescence:Y,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:K,sheenColorMap:ie,sheenRoughnessMap:oe,specularMap:ae,specularColorMap:se,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:ue,gradientMap:he,opaque:!1===o.transparent&&1===o.blending&&!1===o.alphaToCoverage,alphaMap:de,alphaTest:fe,alphaHash:pe,combine:o.combine,mapUv:N&&m(o.map.channel),aoMapUv:U&&m(o.aoMap.channel),lightMapUv:F&&m(o.lightMap.channel),bumpMapUv:B&&m(o.bumpMap.channel),normalMapUv:j&&m(o.normalMap.channel),displacementMapUv:V&&m(o.displacementMap.channel),emissiveMapUv:$&&m(o.emissiveMap.channel),metalnessMapUv:H&&m(o.metalnessMap.channel),roughnessMapUv:G&&m(o.roughnessMap.channel),anisotropyMapUv:J&&m(o.anisotropyMap.channel),clearcoatMapUv:Q&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:oe&&m(o.sheenRoughnessMap.channel),specularMapUv:ae&&m(o.specularMap.channel),specularColorMapUv:se&&m(o.specularColorMap.channel),specularIntensityMapUv:le&&m(o.specularIntensityMap.channel),transmissionMapUv:ce&&m(o.transmissionMap.channel),thicknessMapUv:ue&&m(o.thicknessMap.channel),alphaMapUv:de&&m(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(j||W),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(N||de),fog:!!y,useFog:!0===o.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:O,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:C,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:N&&!0===o.map.isVideoTexture&&Af.getTransfer(o.map.colorSpace)===Gd,decodeVideoTextureEmissive:$&&!0===o.emissiveMap.isVideoTexture&&Af.getTransfer(o.emissiveMap.colorSpace)===Gd,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:me&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===o.extensions.multiDraw||L)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0),t.instancing&&s.enable(1),t.instancingColor&&s.enable(2),t.instancingMorph&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),t.anisotropy&&s.enable(17),t.alphaHash&&s.enable(18),t.batching&&s.enable(19),t.dispersion&&s.enable(20),t.batchingColor&&s.enable(21),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.reverseDepthBuffer&&s.enable(4),t.skinning&&s.enable(5),t.morphTargets&&s.enable(6),t.morphNormals&&s.enable(7),t.morphColors&&s.enable(8),t.premultipliedAlpha&&s.enable(9),t.shadowMapEnabled&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),t.decodeVideoTexture&&s.enable(19),t.decodeVideoTextureEmissive&&s.enable(20),t.alphaToCoverage&&s.enable(21),e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=vv[t];n=Xm.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=u.length;e<t;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new yb(e,n,t,o),u.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Sb(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Eb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Cb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Mb(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Eb),r.length>1&&r.sort(t||Cb),i.length>1&&i.sort(t||Cb)}}}function Tb(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Mb,e.set(t,[i])):n>=r.length?(i=new Mb,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Ab(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Hf,color:new dm};break;case"SpotLight":n={position:new Hf,direction:new Hf,color:new dm,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Hf,color:new dm,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Hf,skyColor:new dm,groundColor:new dm};break;case"RectAreaLight":n={color:new dm,position:new Hf,halfWidth:new Hf,halfHeight:new Hf}}return e[t.id]=n,n}}}let Pb=0;function Rb(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Ib(e){const t=new Ab,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vf};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vf,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new Hf);const i=new Hf,o=new xp,a=new xp;return{setup:function(i){let o=0,a=0,s=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0;i.sort(Rb);for(let e=0,b=i.length;e<b;e++){const b=i[e],x=b.color,_=b.intensity,w=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)o+=x.r*_,a+=x.g*_,s+=x.b*_;else if(b.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(b.sh.coefficients[e],_);y++}else if(b.isDirectionalLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=S,r.directionalShadowMatrix[l]=b.shadow.matrix,f++}r.directional[l]=e,l++}else if(b.isSpotLight){const e=t.get(b);e.position.setFromMatrixPosition(b.matrixWorld),e.color.copy(x).multiplyScalar(_),e.distance=w,e.coneCos=Math.cos(b.angle),e.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),e.decay=b.decay,r.spot[u]=e;const i=b.shadow;if(b.map&&(r.spotLightMap[g]=b.map,g++,i.updateMatrices(b),b.castShadow&&v++),r.spotLightMatrix[u]=i.matrix,b.castShadow){const e=n.get(b);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=S,m++}u++}else if(b.isRectAreaLight){const e=t.get(b);e.color.copy(x).multiplyScalar(_),e.halfWidth.set(.5*b.width,0,0),e.halfHeight.set(0,.5*b.height,0),r.rectArea[h]=e,h++}else if(b.isPointLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),e.distance=b.distance,e.decay=b.decay,b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=S,r.pointShadowMatrix[c]=b.shadow.matrix,p++}r.point[c]=e,c++}else if(b.isHemisphereLight){const e=t.get(b);e.skyColor.copy(b.color).multiplyScalar(_),e.groundColor.copy(b.groundColor).multiplyScalar(_),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=gv.LTC_FLOAT_1,r.rectAreaLTC2=gv.LTC_FLOAT_2):(r.rectAreaLTC1=gv.LTC_HALF_1,r.rectAreaLTC2=gv.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=a,r.ambient[2]=s;const b=r.hash;b.directionalLength===l&&b.pointLength===c&&b.spotLength===u&&b.rectAreaLength===h&&b.hemiLength===d&&b.numDirectionalShadows===f&&b.numPointShadows===p&&b.numSpotShadows===m&&b.numSpotMaps===g&&b.numLightProbes===y||(r.directional.length=l,r.spot.length=u,r.rectArea.length=h,r.point.length=c,r.hemi.length=d,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=p,r.pointShadowMap.length=p,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=p,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,b.directionalLength=l,b.pointLength=c,b.spotLength=u,b.rectAreaLength=h,b.hemiLength=d,b.numDirectionalShadows=f,b.numPointShadows=p,b.numSpotShadows=m,b.numSpotMaps=g,b.numLightProbes=y,r.version=Pb++)},setupView:function(e,t){let n=0,s=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),i.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),i.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(d.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(d.isPointLight){const e=r.point[s];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function Ob(e){const t=new Ib(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function kb(e){let t=new WeakMap;return{get:function(n,r=0){const i=t.get(n);let o;return void 0===i?(o=new Ob(e),t.set(n,[o])):r>=i.length?(o=new Ob(e),i.push(o)):o=i[r],o},dispose:function(){t=new WeakMap}}}function Lb(e,t,n){let r=new fg;const i=new vf,o=new vf,a=new Uf,s=new Og({depthPacking:3201}),l=new kg,c={},u=n.maxTextureSize,h={[th]:1,[nh]:0,[rh]:2},d=new Ym({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new vf},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Rm;p.setAttribute("position",new bm(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Vm(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function y(n,r){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Bf(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,f,m,null)}function b(t,n,r,i){let o=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i,n.addEventListener("dispose",_)),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,o.side=3===i?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial&&(e.properties.get(o).light=r),o}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=b(n,h,a,s);n.onBeforeShadow(e,n,i,o,r,t,u),e.renderBufferDirect(o,null,r,t,n,u),n.onAfterShadow(e,n,i,o,r,t,u)}}}else if(l.visible){const t=b(n,l,a,s);n.onBeforeShadow(e,n,i,o,r,t,null),e.renderBufferDirect(o,null,r,t,n,null),n.onAfterShadow(e,n,i,o,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,o,a,s)}function _(e){e.target.removeEventListener("dispose",_);for(const t in c){const n=c[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=3!==v&&3===this.type,p=3===v&&3!==this.type;for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const m=h.getFrameExtents();if(i.multiply(m),o.copy(h.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/m.x),i.x=o.x*m.x,h.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/m.y),i.y=o.y*m.y,h.mapSize.y=o.y)),null===h.map||!0===f||!0===p){const e=3!==this.type?{minFilter:Dh,magFilter:Dh}:{};null!==h.map&&h.map.dispose(),h.map=new Bf(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const g=h.getViewportCount();for(let e=0;e<g;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(c,e),r=h.getFrustum(),x(n,s,h.camera,c,this.type)}!0!==h.isPointLightShadow&&3===this.type&&y(h,s),h.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const Nb={[wh]:1,[Eh]:6,[Mh]:7,[Ch]:5,[Sh]:0,[Ah]:2,[Ph]:4,[Th]:3};function Db(e,t){const n=new function(){let t=!1;const n=new Uf;let r=null;const i=new Uf(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,o=null,a=null;return{setReversed:function(e){if(r!==e){const e=t.get("EXT_clip_control");r?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const n=a;a=null,this.setClear(n)}r=e},getReversed:function(){return r},setTest:function(t){t?B(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=Nb[t]),o!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}o=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(r&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,i=null,o=null,a=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},o=new WeakMap,a=new WeakMap;let s={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,m=null,g=null,v=null,y=null,b=null,x=new dm(0,0,0),_=0,w=!1,S=null,E=null,C=null,M=null,T=null;const A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,R=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(I)[1]),P=R>=1):-1!==I.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),P=R>=2);let O=null,k={};const L=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),D=(new Uf).fromArray(L),z=(new Uf).fromArray(N);function U(t,n,r,i){const o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<r;a++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}const F={};function B(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function j(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}F[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),B(e.DEPTH_TEST),r.setFunc(3),G(!1),W(1),B(e.CULL_FACE),H(0);const V={[ih]:e.FUNC_ADD,[oh]:e.FUNC_SUBTRACT,[ah]:e.FUNC_REVERSE_SUBTRACT};V[103]=e.MIN,V[104]=e.MAX;const $={[sh]:e.ZERO,[lh]:e.ONE,[ch]:e.SRC_COLOR,[hh]:e.SRC_ALPHA,[vh]:e.SRC_ALPHA_SATURATE,[mh]:e.DST_COLOR,[fh]:e.DST_ALPHA,[uh]:e.ONE_MINUS_SRC_COLOR,[dh]:e.ONE_MINUS_SRC_ALPHA,[gh]:e.ONE_MINUS_DST_COLOR,[ph]:e.ONE_MINUS_DST_ALPHA,[yh]:e.CONSTANT_COLOR,[bh]:e.ONE_MINUS_CONSTANT_COLOR,[xh]:e.CONSTANT_ALPHA,[_h]:e.ONE_MINUS_CONSTANT_ALPHA};function H(t,n,r,i,o,a,s,l,c,u){if(0!==t){if(!1===d&&(B(e.BLEND),d=!0),5===t)o=o||n,a=a||r,s=s||i,n===p&&o===v||(e.blendEquationSeparate(V[n],V[o]),p=n,v=o),r===m&&i===g&&a===y&&s===b||(e.blendFuncSeparate($[r],$[i],$[a],$[s]),m=r,g=i,y=a,b=s),!1!==l.equals(x)&&c===_||(e.blendColor(l.r,l.g,l.b,c),x.copy(l),_=c),f=t,w=!1;else if(t!==f||u!==w){if(p===ih&&v===ih||(e.blendEquation(e.FUNC_ADD),p=ih,v=ih),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,b=null,x.set(0,0,0),_=0,f=t,w=u}}else!0===d&&(j(e.BLEND),d=!1)}function G(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function W(t){0!==t?(B(e.CULL_FACE),t!==E&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),E=t}function q(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),M===n&&T===r||(e.polygonOffset(n,r),M=n,T=r)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:B,disable:j,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=u,i=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const o=t.textures;if(r.length!==o.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=o.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=o.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:H,setMaterial:function(t,o){2===t.side?j(e.CULL_FACE):B(e.CULL_FACE);let a=1===t.side;o&&(a=!a),G(a),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const s=t.stencilWrite;i.setTest(s),s&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==C&&(P&&e.lineWidth(t),C=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),O!==t&&(e.activeTexture(t),O=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===O?e.TEXTURE0+A-1:O);let i=k[r];void 0===i&&(i={type:void 0,texture:void 0},k[r]=i),i.type===t&&i.texture===n||(O!==r&&(e.activeTexture(r),O=r),e.bindTexture(t,n||F[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=k[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=a.get(n);void 0===r&&(r=new WeakMap,a.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=a.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},O=null,k={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,m=null,g=null,v=null,y=null,b=null,x=new dm(0,0,0),_=0,w=!1,S=null,E=null,C=null,M=null,T=null,D.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function zb(e,t,n,r,i,o,a){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new vf,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function p(e,t){return f?new OffscreenCanvas(e,t):_f("canvas")}function m(e,t,n){let r=1;const i=j(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===h&&(h=p(n,o));const a=t?p(n,o):h;return a.width=n,a.height=o,a.getContext("2d").drawImage(e,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function b(n,r,i,o,a=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGB8UI),i===e.UNSIGNED_SHORT&&(s=e.RGB16UI),i===e.UNSIGNED_INT&&(s=e.RGB32UI),i===e.BYTE&&(s=e.RGB8I),i===e.SHORT&&(s=e.RGB16I),i===e.INT&&(s=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),i===e.UNSIGNED_INT&&(s=e.RGBA32UI),i===e.BYTE&&(s=e.RGBA8I),i===e.SHORT&&(s=e.RGBA16I),i===e.INT&&(s=e.RGBA32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.RGBA){const t=a?Hd:Af.getTransfer(o);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=t===Gd?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function x(t,n){let r;return t?null===n||n===qh||n===Jh?r=e.DEPTH24_STENCIL8:n===Xh?r=e.DEPTH32F_STENCIL8:n===Gh&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===qh||n===Jh?r=e.DEPTH_COMPONENT24:n===Xh?r=e.DEPTH_COMPONENT32F:n===Gh&&(r=e.DEPTH_COMPONENT16),r}function _(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==Dh&&e.minFilter!==Fh?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),a.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function E(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],a.memory.textures--}let C=0;function M(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void O(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}const T={[kh]:e.REPEAT,[Lh]:e.CLAMP_TO_EDGE,[Nh]:e.MIRRORED_REPEAT},A={[Dh]:e.NEAREST,[zh]:e.NEAREST_MIPMAP_NEAREST,[Uh]:e.NEAREST_MIPMAP_LINEAR,[Fh]:e.LINEAR,[Bh]:e.LINEAR_MIPMAP_NEAREST,[jh]:e.LINEAR_MIPMAP_LINEAR},P={[qd]:e.NEVER,[ef]:e.ALWAYS,[Xd]:e.LESS,[Kd]:e.LEQUAL,[Yd]:e.EQUAL,[Qd]:e.GEQUAL,[Zd]:e.GREATER,[Jd]:e.NOTEQUAL};function R(n,o){if(o.type!==Xh||!1!==t.has("OES_texture_float_linear")||o.magFilter!==Fh&&o.magFilter!==Bh&&o.magFilter!==Uh&&o.magFilter!==jh&&o.minFilter!==Fh&&o.minFilter!==Bh&&o.minFilter!==Uh&&o.minFilter!==jh||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,T[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,P[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===Dh)return;if(o.minFilter!==Uh&&o.minFilter!==jh)return;if(o.type===Xh&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function I(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const i=n.source;let o=d.get(i);void 0===o&&(o={},d.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&E(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function O(t,a,s){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=I(t,a),u=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Af.getPrimaries(Af.workingColorSpace),r=a.colorSpace===jd?null:Af.getPrimaries(a.colorSpace),d=a.colorSpace===jd||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let f=m(a.image,!1,i.maxTextureSize);f=B(a,f);const p=o.convert(a.format,a.colorSpace),y=o.convert(a.type);let w,S=b(a.internalFormat,p,y,a.colorSpace,a.isVideoTexture);R(l,a);const E=a.mipmaps,C=!0!==a.isVideoTexture,M=void 0===h.__version||!0===c,T=u.dataReady,A=_(a,f);if(a.isDepthTexture)S=x(a.format===nd,a.type),M&&(C?n.texStorage2D(e.TEXTURE_2D,1,S,f.width,f.height):n.texImage2D(e.TEXTURE_2D,0,S,f.width,f.height,0,p,y,null));else if(a.isDataTexture)if(E.length>0){C&&M&&n.texStorage2D(e.TEXTURE_2D,A,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,p,y,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,p,y,w.data);a.generateMipmaps=!1}else C?(M&&n.texStorage2D(e.TEXTURE_2D,A,S,f.width,f.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f.width,f.height,p,y,f.data)):n.texImage2D(e.TEXTURE_2D,0,S,f.width,f.height,0,p,y,f.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,E[0].width,E[0].height,f.depth);for(let t=0,r=E.length;t<r;t++)if(w=E[t],a.format!==Qh)if(null!==p)if(C){if(T)if(a.layerUpdates.size>0){const r=hv(w.width,w.height,a.format,a.type);for(const i of a.layerUpdates){const o=w.data.subarray(i*r/w.data.BYTES_PER_ELEMENT,(i+1)*r/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,w.width,w.height,1,p,o)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,f.depth,p,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,f.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,f.depth,p,y,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,f.depth,0,p,y,w.data)}else{C&&M&&n.texStorage2D(e.TEXTURE_2D,A,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],a.format!==Qh?null!==p?C?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,p,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,p,y,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,p,y,w.data)}else if(a.isDataArrayTexture)if(C){if(M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,f.width,f.height,f.depth),T)if(a.layerUpdates.size>0){const t=hv(f.width,f.height,a.format,a.type);for(const r of a.layerUpdates){const i=f.data.subarray(r*t/f.data.BYTES_PER_ELEMENT,(r+1)*t/f.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,f.width,f.height,1,p,y,i)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,p,y,f.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,S,f.width,f.height,f.depth,0,p,y,f.data);else if(a.isData3DTexture)C?(M&&n.texStorage3D(e.TEXTURE_3D,A,S,f.width,f.height,f.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,p,y,f.data)):n.texImage3D(e.TEXTURE_3D,0,S,f.width,f.height,f.depth,0,p,y,f.data);else if(a.isFramebufferTexture){if(M)if(C)n.texStorage2D(e.TEXTURE_2D,A,S,f.width,f.height);else{let t=f.width,r=f.height;for(let i=0;i<A;i++)n.texImage2D(e.TEXTURE_2D,i,S,t,r,0,p,y,null),t>>=1,r>>=1}}else if(E.length>0){if(C&&M){const t=j(E[0]);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}for(let t=0,r=E.length;t<r;t++)w=E[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,y,w):n.texImage2D(e.TEXTURE_2D,t,S,p,y,w);a.generateMipmaps=!1}else if(C){if(M){const t=j(f);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,y,f)}else n.texImage2D(e.TEXTURE_2D,0,S,p,y,f);g(a)&&v(l),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function k(t,i,a,l,c,u){const h=o.convert(a.format,a.colorSpace),d=o.convert(a.type),f=b(a.internalFormat,h,d,a.colorSpace),p=r.get(i),m=r.get(a);if(m.__renderTarget=i,!p.__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,t,r,i.depth,0,h,d,null):n.texImage2D(c,u,f,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),F(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,m.__webglTexture,0,U(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,m.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,o=i&&i.isDepthTexture?i.type:null,a=x(n.stencilBuffer,o),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=U(n);F(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const a=t[i],l=o.convert(a.format,a.colorSpace),c=o.convert(a.type),u=b(a.internalFormat,l,c,a.colorSpace),h=U(n);r&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):F(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function N(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const o=r.get(i.depthTexture);o.__renderTarget=i,o.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),M(i.depthTexture,0);const a=o.__webglTexture,l=U(i);if(i.depthTexture.format===td)F(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==nd)throw new Error("Unknown depthTexture format");F(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),L(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,o)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),L(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const D=[],z=[];function U(e){return Math.min(i.maxSamples,e.samples)}function F(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==$d&&n!==jd&&(Af.getTransfer(n)===Gd?r===Qh&&i===Vh||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function j(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=C;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=M,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,a){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,a,s){if(6!==a.image.length)return;const l=I(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Af.getPrimaries(Af.workingColorSpace),r=a.colorSpace===jd?null:Af.getPrimaries(a.colorSpace),h=a.colorSpace===jd||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,f=a.image[0]&&a.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=d||f?f?a.image[e].image:a.image[e]:m(a.image[e],!0,i.maxCubemapSize),p[e]=B(a,p[e]);const y=p[0],x=o.convert(a.format,a.colorSpace),w=o.convert(a.type),S=b(a.internalFormat,x,w,a.colorSpace),E=!0!==a.isVideoTexture,C=void 0===u.__version||!0===l,M=c.dataReady;let T,A=_(a,y);if(R(e.TEXTURE_CUBE_MAP,a),d){E&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,y.width,y.height);for(let t=0;t<6;t++){T=p[t].mipmaps;for(let r=0;r<T.length;r++){const i=T[r];a.format!==Qh?null!==x?E?M&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,w,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,i.width,i.height,0,x,w,i.data)}}}else{if(T=a.mipmaps,E&&C){T.length>0&&A++;const t=j(p[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,t.width,t.height)}for(let t=0;t<6;t++)if(f){E?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,x,w,p[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,p[t].width,p[t].height,0,x,w,p[t].data);for(let r=0;r<T.length;r++){const i=T[r].image[t].image;E?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,x,w,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,i.width,i.height,0,x,w,i.data)}}else{E?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x,w,p[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,x,w,p[t]);for(let r=0;r<T.length;r++){const i=T[r];E?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,x,w,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,x,w,i.image[t])}}}g(a)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(s,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,i){const o=r.get(t);void 0!==n&&k(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&N(t)},this.setupRenderTarget=function(t){const i=t.texture,s=r.get(t),l=r.get(i);t.addEventListener("dispose",S);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,a.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===F(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),a=o.convert(r.type),l=b(r.internalFormat,i,a,r.colorSpace,!0===t.isXRRenderTarget),u=U(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),L(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),R(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)k(s.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else k(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,o=c.length;i<o;i++){const o=c[i],a=r.get(o);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),R(e.TEXTURE_2D,o),k(s.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),g(o)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),R(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)k(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else k(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,o=t.length;i<o;i++){const o=t[i];if(g(o)){const t=y(e),i=r.get(o).__webglTexture;n.bindTexture(t,i),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===F(t)){const i=t.textures,o=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),!0===l&&(D.length=0,z.length=0,D.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(D.push(c),z.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,z)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,D))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=k,this.useMultisampledRTT=F}function Ub(e,t){return{convert:function(n,r=""){let i;const o=Af.getTransfer(r);if(n===Vh)return e.UNSIGNED_BYTE;if(n===Kh)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Zh)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===n)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===$h)return e.BYTE;if(n===Hh)return e.SHORT;if(n===Gh)return e.UNSIGNED_SHORT;if(n===Wh)return e.INT;if(n===qh)return e.UNSIGNED_INT;if(n===Xh)return e.FLOAT;if(n===Yh)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(n===Qh)return e.RGBA;if(n===ed)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===td)return e.DEPTH_COMPONENT;if(n===nd)return e.DEPTH_STENCIL;if(n===rd)return e.RED;if(n===id)return e.RED_INTEGER;if(1030===n)return e.RG;if(n===od)return e.RG_INTEGER;if(n===ad)return e.RGBA_INTEGER;if(n===sd||n===ld||n===cd||n===ud)if(o===Gd){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===sd)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ld)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===cd)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ud)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===sd)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ld)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===cd)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ud)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===hd||n===dd||n===fd||n===pd){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===hd)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===dd)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===fd)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===pd)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===md||n===gd||n===vd){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===md||n===gd)return o===Gd?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===vd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===yd||n===bd||n===xd||n===_d||n===wd||n===Sd||n===Ed||n===Cd||n===Md||n===Td||n===Ad||n===Pd||n===Rd||n===Id){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===yd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===bd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===xd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_d)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===wd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Sd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ed)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Cd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Md)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Td)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ad)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Pd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Rd)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Id)return o===Gd?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Od||n===kd||n===Ld){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===Od)return o===Gd?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===kd)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ld)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||n===Nd||n===Dd||n===zd){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===Od)return i.COMPRESSED_RED_RGTC1_EXT;if(n===Nd)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Dd)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===zd)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Jh?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}const Fb={type:"move"};class Bb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Tg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Tg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Hf,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Hf),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Tg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Hf,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Hf),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Fb)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Tg;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class jb{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new zf;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Ym({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Vm(new Rg(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Vb extends of{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=new jb,m=t.getContextAttributes();let g=null,v=null;const y=[],b=[],x=new vf;let _=null;const w=new eg;w.viewport=new Uf;const S=new eg;S.viewport=new Uf;const E=[w,S],C=new tv;let M=null,T=null;function A(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function P(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",R);for(let e=0;e<y.length;e++){const t=b[e];null!==t&&(b[e]=null,y[e].disconnect(t))}M=null,T=null,p.reset(),e.setRenderTarget(g),d=null,h=null,u=null,r=null,v=null,N.stop(),n.isPresenting=!1,e.setPixelRatio(_),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=b.indexOf(n);r>=0&&(b[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=b.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=b.length){b.push(n),r=e;break}if(null===b[e]){b[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Bb,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Bb,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Bb,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",P),r.addEventListener("inputsourceschange",R),!0!==m.xrCompatible&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(x),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new Bf(d.framebufferWidth,d.framebufferHeight,{format:Qh,type:Vh,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,o=null,a=null;m.depth&&(a=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?nd:td,o=m.stencil?Jh:qh);const s={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(s),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new Bf(h.textureWidth,h.textureHeight,{format:Qh,type:Vh,depthTexture:new Pg(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};const I=new Hf,O=new Hf;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==p.texture&&(p.depthNear>0&&(t=p.depthNear),p.depthFar>0&&(n=p.depthFar)),C.near=S.near=w.near=t,C.far=S.far=w.far=n,M===C.near&&T===C.far||(r.updateRenderState({depthNear:C.near,depthFar:C.far}),M=C.near,T=C.far),w.layers.mask=2|e.layers.mask,S.layers.mask=4|e.layers.mask,C.layers.mask=w.layers.mask|S.layers.mask;const i=e.parent,o=C.cameras;k(C,i);for(let e=0;e<o.length;e++)k(o[e],i);2===o.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(O),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=r/(-u+h),m=p*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+p,n=s+p,i=d-m,o=f+(r-m),u=l*s/n*t,h=c*s/n*t;e.projectionMatrix.makePerspective(i,o,u,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,w,S):C.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*cf*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,i)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==p.texture},this.getDepthSensingMesh=function(){return p.getMesh(C)};let L=null;const N=new fv;N.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||o),f=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(h,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let a=E[r];void 0===a&&(a=new eg,a.layers.enable(r),a.viewport=new Uf,E[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(C.matrix.copy(a.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===n&&C.cameras.push(a)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&p.init(e,n,r.renderState)}}for(let e=0;e<y.length;e++){const t=b[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,l||o)}L&&L(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null})),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}const $b=new Rp,Hb=new xp;function Gb(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,1===r.side&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),1===r.side&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),o=i.envMap,a=i.envMapRotation;o&&(e.envMap.value=o,$b.copy(a),$b.x*=-1,$b.y*=-1,$b.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&($b.y*=-1,$b.z*=-1),e.envMapRotation.value.setFromMatrix4(Hb.makeRotationFromEuler($b)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,qm(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform)),e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate())),t.dispersion>0&&(e.dispersion.value=t.dispersion),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,o,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Wb(e,t,n,r){let i={},o={},a=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,o=t+"_"+n;if(void 0===r[o])return r[o]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[o];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[o]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(e){const t=e.uniforms;let n=0;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){const r=c(i[e]),o=n%16,a=o%r.boundary,s=o+a;n+=a,0!==s&&16-s<r.storage&&(n+=16-s),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=t.render.frame;o[n.id]!==p&&(function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(!0===l(i,t,r,o)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let o=0;o<n.length;o++){const a=n[o],s=c(a);"number"==typeof a||"boolean"==typeof a?(i.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}class qb{constructor(e={}){const{canvas:t=wf(),context:n=null,depth:r=!0,stencil:i=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=o;const f=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vd,this.toneMapping=0,this.toneMappingExposure=1;const b=this;let x=!1,_=0,w=0,S=null,E=-1,C=null;const M=new Uf,T=new Uf;let A=null;const P=new dm(0);let R=0,I=t.width,O=t.height,k=1,L=null,N=null;const D=new Uf(0,0,I,O),z=new Uf(0,0,I,O);let U=!1;const F=new fg;let B=!1,j=!1;const V=new xp,$=new xp,H=new Hf,G=new Uf,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let q=!1;function X(){return null===S?k:1}let Y,K,Z,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he,de,fe,pe,me,ge,ve,ye,be=n;function xe(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${eh}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Ce,!1),null===be){const t="webgl2";if(be=xe(t,e),null===be)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function _e(){Y=new $v(be),Y.init(),ge=new Ub(be,Y),K=new Ev(be,Y,e,ge),Z=new Db(be,Y),K.reverseDepthBuffer&&h&&Z.buffers.depth.setReversed(!0),J=new Wv(be),Q=new Sb,ee=new zb(be,Y,Z,Q,K,ge,J),te=new Mv(b),ne=new Vv(b),re=new pv(be),ve=new wv(be,re),ie=new Hv(be,re,J,ve),oe=new Xv(be,ie,re,J),fe=new qv(be,K,ee),ue=new Cv(Q),ae=new wb(b,te,ne,Y,K,ve,ue),se=new Gb(b,Q),le=new Tb,ce=new kb(Y),de=new _v(b,te,ne,Z,oe,d,s),he=new Lb(b,oe,K),ye=new Wb(be,J,K,Z),pe=new Sv(be,Y,J),me=new Gv(be,Y,J),J.programs=ae.programs,b.capabilities=K,b.extensions=Y,b.properties=Q,b.renderLists=le,b.shadowMap=he,b.state=Z,b.info=J}_e();const we=new Vb(b,be);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=J.autoReset,t=he.enabled,n=he.autoUpdate,r=he.needsUpdate,i=he.type;_e(),J.autoReset=e,he.enabled=t,he.autoUpdate=n,he.needsUpdate=r,he.type=i}function Ce(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Me(e){const t=e.target;t.removeEventListener("dispose",Me),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){ae.releaseProgram(e)})),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,ze(e,t,n),e.side=0,e.needsUpdate=!0,ze(e,t,n),e.side=2):ze(e,t,n)}this.xr=we,this.getContext=function(){return be},this.getContextAttributes=function(){return be.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(I,O,!1))},this.getSize=function(e){return e.set(I,O)},this.setSize=function(e,n,r=!0){we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=e,O=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(I*k,O*k).floor()},this.setDrawingBufferSize=function(e,n,r){I=e,O=n,k=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),Z.viewport(M.copy(D).multiplyScalar(k).round())},this.getScissor=function(e){return e.copy(z)},this.setScissor=function(e,t,n,r){e.isVector4?z.set(e.x,e.y,e.z,e.w):z.set(e,t,n,r),Z.scissor(T.copy(z).multiplyScalar(k).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(e){Z.setScissorTest(U=e)},this.setOpaqueSort=function(e){L=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(e){return e.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=t===ad||t===od||t===id}if(e){const e=S.texture.type,t=e===Vh||e===qh||e===Gh||e===Jh||e===Kh||e===Zh,n=de.getClearColor(),r=de.getClearAlpha(),i=n.r,o=n.g,a=n.b;t?(f[0]=i,f[1]=o,f[2]=a,f[3]=r,be.clearBufferuiv(be.COLOR,0,f)):(p[0]=i,p[1]=o,p[2]=a,p[3]=r,be.clearBufferiv(be.COLOR,0,p))}else r|=be.COLOR_BUFFER_BIT}t&&(r|=be.DEPTH_BUFFER_BIT),n&&(r|=be.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),be.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Ce,!1),de.dispose(),le.dispose(),ce.dispose(),Q.dispose(),te.dispose(),ne.dispose(),oe.dispose(),ve.dispose(),ye.dispose(),ae.dispose(),we.dispose(),we.removeEventListener("sessionstart",Pe),we.removeEventListener("sessionend",Re),Ie.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=W);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=W),ee.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===S?b.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:$d,l=(r.isMeshStandardMaterial?ne:te).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=0;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(p=b.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Q.get(r),x=g.state.lights;if(!0===B&&(!0===j||e!==C)){const t=e===C&&r.id===E;ue.setState(r,e,t)}let _=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputColorSpace!==s||i.isBatchedMesh&&!1===y.batching?_=!0:i.isBatchedMesh||!0!==y.batching?i.isBatchedMesh&&!0===y.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===y.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===y.instancing?_=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?_=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===y.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===y.instancingMorph&&null!==i.morphTexture||y.envMap!==l||!0===r.fog&&y.fog!==o?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ue.numPlanes&&y.numIntersection===ue.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==p||y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,y.__version=r.version);let w=y.currentProgram;!0===_&&(w=ze(r,t,i));let M=!1,T=!1,A=!1;const P=w.getUniforms(),R=y.uniforms;if(Z.useProgram(w.program)&&(M=!0,T=!0,A=!0),r.id!==E&&(E=r.id,T=!0),M||C!==e){Z.buffers.depth.getReversed()?(V.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(V),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(V),P.setValue(be,"projectionMatrix",V)):P.setValue(be,"projectionMatrix",e.projectionMatrix),P.setValue(be,"viewMatrix",e.matrixWorldInverse);const t=P.map.cameraPosition;void 0!==t&&t.setValue(be,H.setFromMatrixPosition(e.matrixWorld)),K.logarithmicDepthBuffer&&P.setValue(be,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(be,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,T=!0,A=!0)}if(i.isSkinnedMesh){P.setOptional(be,i,"bindMatrix"),P.setOptional(be,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(be,"boneTexture",e.boneTexture,ee))}i.isBatchedMesh&&(P.setOptional(be,i,"batchingTexture"),P.setValue(be,"batchingTexture",i._matricesTexture,ee),P.setOptional(be,i,"batchingIdTexture"),P.setValue(be,"batchingIdTexture",i._indirectTexture,ee),P.setOptional(be,i,"batchingColorTexture"),null!==i._colorsTexture&&P.setValue(be,"batchingColorTexture",i._colorsTexture,ee));const I=n.morphAttributes;var L,N;if(void 0===I.position&&void 0===I.normal&&void 0===I.color||fe.update(i,n,w),(T||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,P.setValue(be,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(R.envMapIntensity.value=t.environmentIntensity),T&&(P.setValue(be,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(N=A,(L=R).ambientLightColor.needsUpdate=N,L.lightProbe.needsUpdate=N,L.directionalLights.needsUpdate=N,L.directionalLightShadows.needsUpdate=N,L.pointLights.needsUpdate=N,L.pointLightShadows.needsUpdate=N,L.spotLights.needsUpdate=N,L.spotLightShadows.needsUpdate=N,L.rectAreaLights.needsUpdate=N,L.hemisphereLights.needsUpdate=N),o&&!0===r.fog&&se.refreshFogUniforms(R,o),se.refreshMaterialUniforms(R,r,k,O,g.state.transmissionRenderTarget[e.id]),Qy.upload(be,Ue(y),R,ee)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Qy.upload(be,Ue(y),R,ee),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&P.setValue(be,"center",i.center),P.setValue(be,"modelViewMatrix",i.modelViewMatrix),P.setValue(be,"normalMatrix",i.normalMatrix),P.setValue(be,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ye.update(n,w),ye.bind(n,w)}}return w}(e,t,n,r,i);Z.setMaterial(r,a);let l=n.index,c=1;if(!0===r.wireframe){if(l=ie.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;ve.setup(i,r,s,n,l);let v=pe;if(null!==l&&(m=re.get(l),v=me,v.setIndex(m)),i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*X()),v.setMode(be.LINES)):v.setMode(be.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Z.setLineWidth(e*X()),i.isLineSegments?v.setMode(be.LINES):i.isLineLoop?v.setMode(be.LINE_LOOP):v.setMode(be.LINE_STRIP)}else i.isPoints?v.setMode(be.POINTS):i.isSprite&&v.setMode(be.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(Y.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,o=l?re.get(l).bytesPerElement:1,a=Q.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)a.setValue(be,"_gl_DrawID",r),v.render(e[r]/o,t[r])}else if(i.isInstancedMesh)v.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,p,t)}else v.render(d,p)},this.compile=function(e,t,n=null){null===n&&(n=e),g=ce.get(n),g.init(t),y.push(g),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights();const r=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const o=t[i];Te(o,n,e),r.add(o)}else Te(t,n,e),r.add(t)})),y.pop(),g=null,r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){Q.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==Y.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ae=null;function Pe(){Ie.stop()}function Re(){Ie.start()}const Ie=new fv;function Oe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4($);const t=oe.update(e),i=e.material;i.visible&&m.push(e,t,i,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=oe.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4($)),Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&m.push(e,t,s,n,G.z,a)}}else i.visible&&m.push(e,t,i,n,G.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Oe(i[e],t,n,r)}function ke(e,t,n,r){const i=e.opaque,o=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===B&&ue.setGlobalState(b.clippingPlanes,n),r&&Z.viewport(M.copy(r)),i.length>0&&Ne(i,t,n),o.length>0&&Ne(o,t,n),a.length>0&&Ne(a,t,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Le(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new Bf(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")||Y.has("EXT_color_buffer_float")?Yh:Vh,minFilter:jh,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Af.workingColorSpace}));const o=g.state.transmissionRenderTarget[r.id],a=r.viewport||M;o.setSize(a.z,a.w);const s=b.getRenderTarget();b.setRenderTarget(o),b.getClearColor(P),R=b.getClearAlpha(),R<1&&b.setClearColor(16777215,.5),b.clear(),q&&de.render(n);const l=b.toneMapping;b.toneMapping=0;const c=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===B&&ue.setGlobalState(b.clippingPlanes,r),Ne(e,n,r),ee.updateMultisampleRenderTarget(o),ee.updateRenderTargetMipmap(o),!1===Y.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=o.material,c=o.group;if(2===l.side&&a.layers.test(r.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,De(a,n,r,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(o),ee.updateRenderTargetMipmap(o))}b.setRenderTarget(s),b.setClearColor(P,R),void 0!==c&&(r.viewport=c),b.toneMapping=l}function Ne(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&De(a,t,n,s,l,c)}}function De(e,t,n,r,i,o){e.onBeforeRender(b,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,o),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=2):b.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(b,t,n,r,i,o)}function ze(e,t,n){!0!==t.isScene&&(t=W);const r=Q.get(e),i=g.state.lights,o=g.state.shadowsArray,a=i.state.version,s=ae.getParameters(e,i.state,o,t,n),l=ae.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ne:te).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Me),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Fe(e,s),u}else s.uniforms=ae.getUniforms(e),e.onBeforeCompile(s,b),u=ae.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ue.uniform),Fe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Ue(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Qy.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ie.setAnimationLoop((function(e){Ae&&Ae(e)})),"undefined"!=typeof self&&Ie.setContext(self),this.setAnimationLoop=function(e){Ae=e,we.setAnimationLoop(e),null===e?Ie.stop():Ie.start()},we.addEventListener("sessionstart",Pe),we.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),g=ce.get(e,y.length),g.init(t),y.push(g),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix($),j=this.localClippingEnabled,B=ue.init(this.clippingPlanes,j),m=le.get(e,v.length),m.init(),v.push(m),!0===we.enabled&&!0===we.isPresenting){const e=b.xr.getDepthSensingMesh();null!==e&&Oe(e,t,-1/0,b.sortObjects)}Oe(e,t,0,b.sortObjects),m.finish(),!0===b.sortObjects&&m.sort(L,N),q=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),q&&de.addToRenderList(m,e),this.info.render.frame++,!0===B&&ue.beginShadows();const n=g.state.shadowsArray;he.render(n,e,t),!0===B&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=m.opaque,i=m.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,o=n.length;t<o;t++)Le(r,i,e,n[t]);q&&de.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];ke(m,e,r,r.viewport)}}else i.length>0&&Le(r,i,e,t),q&&de.render(e),ke(m,e,t);null!==S&&(ee.updateMultisampleRenderTarget(S),ee.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),ve.resetDefaultState(),E=-1,C=null,y.pop(),y.length>0?(g=y[y.length-1],!0===B&&ue.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;const r=Q.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,_=t,w=n;let r=!0,i=null,o=!1,a=!1;if(e){const s=Q.get(e);if(void 0!==s.__useDefaultFramebuffer)Z.bindFramebuffer(be.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)ee.setupRenderTarget(e);else if(s.__hasExternalTextures)ee.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],o=!0):i=e.samples>0&&!1===ee.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,M.copy(e.viewport),T.copy(e.scissor),A=e.scissorTest}else M.copy(D).multiplyScalar(k).floor(),T.copy(z).multiplyScalar(k).floor(),A=U;if(Z.bindFramebuffer(be.FRAMEBUFFER,i)&&r&&Z.drawBuffers(e,i),Z.viewport(M),Z.scissor(T),Z.setScissorTest(A),o){const r=Q.get(e.texture);be.framebufferTexture2D(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=Q.get(e.texture),i=t||0;be.framebufferTextureLayer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Z.bindFramebuffer(be.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(!K.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!K.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&be.readPixels(t,n,r,i,ge.convert(s),ge.convert(l),o)}finally{const e=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(be.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){const a=e.texture,l=a.format,c=a.type;if(!K.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!K.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){Z.bindFramebuffer(be.FRAMEBUFFER,s);const e=be.createBuffer();be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.bufferData(be.PIXEL_PACK_BUFFER,o.byteLength,be.STREAM_READ),be.readPixels(t,n,r,i,ge.convert(l),ge.convert(c),0);const a=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(be.FRAMEBUFFER,a);const u=be.fenceSync(be.SYNC_GPU_COMMANDS_COMPLETE,0);return be.flush(),await function(e,t){return new Promise((function(n,r){setTimeout((function i(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(i,4);break;default:n()}}),4)}))}(be,u),be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.getBufferSubData(be.PIXEL_PACK_BUFFER,0,o),be.deleteBuffer(e),be.deleteSync(u),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&(Ef("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=null!==t?t.x:0,s=null!==t?t.y:0;ee.setTexture2D(e,0),be.copyTexSubImage2D(be.TEXTURE_2D,n,0,0,a,s,i,o),Z.unbindTexture()};const Be=be.createFramebuffer(),je=be.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,i=0,o=null){let a,s,l,c,u,h,d,f,p;!0!==e.isTexture&&(Ef("WebGLRenderer: copyTextureToTexture function signature has changed."),r=arguments[0]||null,e=arguments[1],t=arguments[2],o=arguments[3]||0,n=null),null===o&&(0!==i?(Ef("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),o=i,i=0):o=0);const m=e.isCompressedTexture?e.mipmaps[o]:e.image;if(null!==n)a=n.max.x-n.min.x,s=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,u=n.min.y,h=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-i);a=Math.floor(m.width*t),s=Math.floor(m.height*t),l=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,c=0,u=0,h=0}null!==r?(d=r.x,f=r.y,p=r.z):(d=0,f=0,p=0);const g=ge.convert(t.format),v=ge.convert(t.type);let y;t.isData3DTexture?(ee.setTexture3D(t,0),y=be.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),y=be.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),y=be.TEXTURE_2D),be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,t.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,t.unpackAlignment);const b=be.getParameter(be.UNPACK_ROW_LENGTH),x=be.getParameter(be.UNPACK_IMAGE_HEIGHT),_=be.getParameter(be.UNPACK_SKIP_PIXELS),w=be.getParameter(be.UNPACK_SKIP_ROWS),S=be.getParameter(be.UNPACK_SKIP_IMAGES);be.pixelStorei(be.UNPACK_ROW_LENGTH,m.width),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,m.height),be.pixelStorei(be.UNPACK_SKIP_PIXELS,c),be.pixelStorei(be.UNPACK_SKIP_ROWS,u),be.pixelStorei(be.UNPACK_SKIP_IMAGES,h);const E=e.isDataArrayTexture||e.isData3DTexture,C=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=Q.get(e),r=Q.get(t),m=Q.get(n.__renderTarget),g=Q.get(r.__renderTarget);Z.bindFramebuffer(be.READ_FRAMEBUFFER,m.__webglFramebuffer),Z.bindFramebuffer(be.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let n=0;n<l;n++)E&&(be.framebufferTextureLayer(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,i,h+n),be.framebufferTextureLayer(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,o,p+n)),be.blitFramebuffer(c,u,a,s,d,f,a,s,be.DEPTH_BUFFER_BIT,be.NEAREST);Z.bindFramebuffer(be.READ_FRAMEBUFFER,null),Z.bindFramebuffer(be.DRAW_FRAMEBUFFER,null)}else if(0!==i||e.isRenderTargetTexture||Q.has(e)){const n=Q.get(e),r=Q.get(t);Z.bindFramebuffer(be.READ_FRAMEBUFFER,Be),Z.bindFramebuffer(be.DRAW_FRAMEBUFFER,je);for(let e=0;e<l;e++)E?be.framebufferTextureLayer(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,n.__webglTexture,i,h+e):be.framebufferTexture2D(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,n.__webglTexture,i),C?be.framebufferTextureLayer(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,r.__webglTexture,o,p+e):be.framebufferTexture2D(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,r.__webglTexture,o),0!==i?be.blitFramebuffer(c,u,a,s,d,f,a,s,be.COLOR_BUFFER_BIT,be.NEAREST):C?be.copyTexSubImage3D(y,o,d,f,p+e,c,u,a,s):be.copyTexSubImage2D(y,o,d,f,c,u,a,s);Z.bindFramebuffer(be.READ_FRAMEBUFFER,null),Z.bindFramebuffer(be.DRAW_FRAMEBUFFER,null)}else C?e.isDataTexture||e.isData3DTexture?be.texSubImage3D(y,o,d,f,p,a,s,l,g,v,m.data):t.isCompressedArrayTexture?be.compressedTexSubImage3D(y,o,d,f,p,a,s,l,g,m.data):be.texSubImage3D(y,o,d,f,p,a,s,l,g,v,m):e.isDataTexture?be.texSubImage2D(be.TEXTURE_2D,o,d,f,a,s,g,v,m.data):e.isCompressedTexture?be.compressedTexSubImage2D(be.TEXTURE_2D,o,d,f,m.width,m.height,g,m.data):be.texSubImage2D(be.TEXTURE_2D,o,d,f,a,s,g,v,m);be.pixelStorei(be.UNPACK_ROW_LENGTH,b),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,x),be.pixelStorei(be.UNPACK_SKIP_PIXELS,_),be.pixelStorei(be.UNPACK_SKIP_ROWS,w),be.pixelStorei(be.UNPACK_SKIP_IMAGES,S),0===o&&t.generateMipmaps&&be.generateMipmap(y),Z.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,r=null,i=0){return!0!==e.isTexture&&(Ef("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0),Ef('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,i)},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,Z.reset(),ve.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Af._getDrawingBufferColorSpace(e),t.unpackColorSpace=Af._getUnpackColorSpace()}}const Xb=class extends of{constructor(e,t){super();const n=this,r=-1;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.length=10,this.scale=.5,this.scale0=.5,this.aspect=1,this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.autoRotate=!1,this.autoRotateSpeed=2,this.target=new Hf;const i=1e-6,o=new Hf;let a=1,s=r,l=r,c=0,u=0,h=0;const d=new Hf,f=new vf,p=new vf,m=new Hf,g=new vf,v=new vf,y=new vf,b=new vf,x=[],_={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;const w={type:"change"},S={type:"start"},E={type:"end"};this.handleResize=function(){const e=n.domElement.getBoundingClientRect(),t=n.domElement.ownerDocument.documentElement;n.screen.left=e.left+window.pageXOffset-t.clientLeft,n.screen.top=e.top+window.pageYOffset-t.clientTop,n.screen.width=e.width,n.screen.height=e.height};const C=function(){const e=new vf;return function(t,r){return e.set((t-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),e}}(),M=function(){const e=new vf;return function(t,r){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),e}}();function T(e){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",A),n.domElement.addEventListener("pointerup",P)),function(e){x.push(e)}(e),"touch"===e.pointerType?function(e){let t,r,i,o;1===(D(e),x.length)?(s=3,p.copy(M(x[0].pageX,x[0].pageY)),f.copy(p)):(s=4,t=x[0].pageX-x[1].pageX,r=x[0].pageY-x[1].pageY,u=c=Math.sqrt(t*t+r*r),i=(x[0].pageX+x[1].pageX)/2,o=(x[0].pageY+x[1].pageY)/2,y.copy(C(i,o)),b.copy(y)),n.dispatchEvent(S)}(e):function(e){if(s===r)switch(e.button){case n.mouseButtons.LEFT:s=0;break;case n.mouseButtons.MIDDLE:s=1;break;case n.mouseButtons.RIGHT:s=2}const t=l!==r?l:s;0!==t||n.noRotate?1!==t||n.noZoom?2!==t||n.noPan||(y.copy(C(e.pageX,e.pageY)),b.copy(y)):(g.copy(C(e.pageX,e.pageY)),v.copy(g)):(p.copy(M(e.pageX,e.pageY)),f.copy(p)),n.dispatchEvent(S)}(e))}function A(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){let t,n,r,i,o;1===(D(e),x.length)?(f.copy(p),p.copy(M(e.pageX,e.pageY))):(t=function(e){const t=e.pointerId===x[0].pointerId?x[1]:x[0];return _[t.pointerId]}(e),n=e.pageX-t.x,r=e.pageY-t.y,u=Math.sqrt(n*n+r*r),i=(e.pageX+t.x)/2,o=(e.pageY+t.y)/2,b.copy(C(i,o)))}(e):function(e){const t=l!==r?l:s;0!==t||n.noRotate?1!==t||n.noZoom?2!==t||n.noPan||b.copy(C(e.pageX,e.pageY)):v.copy(C(e.pageX,e.pageY)):(f.copy(p),p.copy(M(e.pageX,e.pageY)))}(e))}function P(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(x.length){case 0:s=r;break;case 1:s=3,p.copy(M(e.pageX,e.pageY)),f.copy(p);break;case 2:s=4,p.copy(M(e.pageX-f.x,e.pageY-f.y)),f.copy(p)}n.dispatchEvent(E)}(e):(s=r,n.dispatchEvent(E)),N(e),0===x.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",A),n.domElement.removeEventListener("pointerup",P)))}function R(e){N(e)}function I(e){!1!==n.enabled&&(window.removeEventListener("keydown",I),l===r&&(e.code!==n.keys[0]||n.noRotate?e.code!==n.keys[1]||n.noZoom?e.code!==n.keys[2]||n.noPan||(l=2):l=1:l=0))}function O(e){!1!==n.enabled&&(l=r,window.addEventListener("keydown",I))}function k(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:g.y-=.025*e.deltaY;break;case 1:g.y-=.01*e.deltaY;break;default:g.y-=25e-5*e.deltaY}n.dispatchEvent(S),n.dispatchEvent(E)}}function L(e){!1!==n.enabled&&e.preventDefault()}function N(e){delete _[e.pointerId];for(let t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId)return void x.splice(t,1)}function D(e){let t=_[e.pointerId];void 0===t&&(t=new vf,_[e.pointerId]=t),t.set(e.pageX,e.pageY)}this.rotateCamera=function(){const e=new Hf,t=new $f,i=new Hf,o=new Hf,a=new Hf,l=new Hf;let c,u,g;return function(v){u=p.x-f.x,g=p.y-f.y,l.set(u,g,0),c=l.length(),c*=n.rotateSpeed,n.autoRotate&&s===r&&(c=function(e){return 2*Math.PI/60/60*n.autoRotateSpeed*(60*e)}(v),u=c,g=0,l.set(c,0,0)),c?(d.copy(n.object.position).sub(n.target),i.copy(d).normalize(),o.copy(n.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(g),a.setLength(u),l.copy(o.add(a)),e.crossVectors(l,d).normalize(),t.setFromAxisAngle(e,c),d.applyQuaternion(t),n.object.up.applyQuaternion(t),m.copy(e),h=c):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),d.copy(n.object.position).sub(n.target),t.setFromAxisAngle(m,h),d.applyQuaternion(t),n.object.up.applyQuaternion(t)),f.copy(p)}}(),this.zoomCamera=function(){let e;4===s?(e=c/u,c=u,n.object.isPerspectiveCamera?d.multiplyScalar(e):n.object.isOrthographicCamera?(n.scale=n.scale*e,n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(v.y-g.y)*n.zoomSpeed,1!==e&&e>0&&(n.object.isPerspectiveCamera?d.multiplyScalar(e):n.object.isOrthographicCamera?(n.scale=n.scale*e,n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?g.copy(v):g.y+=(v.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){const e=new vf,t=new Hf,r=new Hf;return function(){if(e.copy(b).sub(y),e.lengthSq()){if(n.object.isOrthographicCamera){const t=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,r=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;e.x*=t,e.y*=r}e.multiplyScalar(d.length()*n.panSpeed),r.copy(d).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?y.copy(b):y.add(e.subVectors(b,y).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(d.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,d.setLength(n.maxDistance)),g.copy(v)),d.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,d.setLength(n.minDistance)),g.copy(v)))},this.update=function(e){!1!==n.enabled&&(e=e||0,d.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(e),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,d),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>i&&(n.dispatchEvent(w),o.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(o.distanceToSquared(n.object.position)>i||a!==n.object.zoom)&&(n.dispatchEvent(w),o.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type"))},this.reset=function(){s=r,l=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.scale=n.scale0,n.object.updateProjectionMatrix(),d.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(w),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",L),n.domElement.removeEventListener("pointerdown",T),n.domElement.removeEventListener("pointercancel",R),n.domElement.removeEventListener("wheel",k),n.domElement.removeEventListener("pointermove",A),n.domElement.removeEventListener("pointerup",P),window.removeEventListener("keydown",I),window.removeEventListener("keyup",O)},this.domElement.addEventListener("contextmenu",L),this.domElement.addEventListener("pointerdown",T),this.domElement.addEventListener("pointercancel",R),this.domElement.addEventListener("wheel",k,{passive:!1}),window.addEventListener("keydown",I),window.addEventListener("keyup",O),this.handleResize(),this.update()}};class Yb{constructor(){this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.frames=0,this.lastFrameMs=0,this.lastFPS=0}begin(){this.beginTime=(performance||Date).now()}end(){this.frames++;const e=(performance||Date).now();return this.lastFrameMs=e-this.beginTime,e>=this.prevTime+1e3&&(this.lastFPS=1e3*this.frames/(e-this.prevTime),this.prevTime=e,this.frames=0),e}update(){this.beginTime=this.end()}}const Kb={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array};let Zb=function(e){return e[e.RAYMARCH=0]="RAYMARCH",e[e.PATHTRACE=1]="PATHTRACE",e[e.SLICE=2]="SLICE",e}({});const Jb=e=>e&&e.isOrthographicCamera;let Qb=function(e){return e.TOP_LEFT="top_left",e.TOP_RIGHT="top_right",e.BOTTOM_LEFT="bottom_left",e.BOTTOM_RIGHT="bottom_right",e}({});const ex=e=>e===Qb.TOP_LEFT||e===Qb.TOP_RIGHT,tx=e=>e===Qb.TOP_RIGHT||e===Qb.BOTTOM_RIGHT;let nx=function(e){return e[e.MILLISECOND=0]="MILLISECOND",e[e.SECOND=1]="SECOND",e[e.MINUTE=2]="MINUTE",e[e.HOUR=3]="HOUR",e[e.DAY=4]="DAY",e}({});const rx={[nx.MILLISECOND]:new Set(["ms","millisecond","milliseconds"]),[nx.SECOND]:new Set(["s","sec","second","seconds"]),[nx.MINUTE]:new Set(["m","min","minute","minutes"]),[nx.HOUR]:new Set(["h","hr","hour","hours"]),[nx.DAY]:new Set(["d","day","days"])};let ix=function(e){return e[e.TRANSFORM=1]="TRANSFORM",e[e.CAMERA=2]="CAMERA",e[e.BOUNDING_BOX=4]="BOUNDING_BOX",e[e.ROI=8]="ROI",e[e.MASK_ALPHA=16]="MASK_ALPHA",e[e.MATERIAL=32]="MATERIAL",e[e.SAMPLING=64]="SAMPLING",e[e.VIEW=128]="VIEW",e[e.MASK_DATA=256]="MASK_DATA",e[e.ALL=1023]="ALL",e}({}),ox=function(e){return e.X="x",e.Y="y",e.Z="z",e.XYZ="",e.NONE="",e}({});class ax{constructor(e){this.translation=new Hf(0,0,0),this.rotation=new Rp,this.scale=new Hf(1,1,1),this.isOrtho=!1,this.viewAxis=ox.NONE,this.orthoScale=1,this.flipAxes=new Hf(1,1,1),this.maskChannelIndex=-1,this.maskAlpha=1,this.gammaMin=0,this.gammaLevel=1,this.gammaMax=1,this.density=0,this.brightness=0,this.showBoundingBox=!1,this.bounds={bmin:new Hf(-.5,-.5,-.5),bmax:new Hf(.5,.5,.5)},this.boundingBoxColor=[1,1,0],this.primaryRayStepSize=1,this.secondaryRayStepSize=1,this.useInterpolation=!0,this.visible=!0,this.maxProjectMode=!1,e?(this.zSlice=Math.floor(e.imageInfo.subregionSize.z/2),this.diffuse=new Array(e.imageInfo.numChannels).fill([255,255,255]),this.specular=new Array(e.imageInfo.numChannels).fill([0,0,0]),this.emissive=new Array(e.imageInfo.numChannels).fill([0,0,0]),this.glossiness=new Array(e.imageInfo.numChannels).fill(0)):(this.zSlice=0,this.diffuse=[[255,255,255]],this.specular=[[0,0,0]],this.emissive=[[0,0,0]],this.glossiness=[0]),this.pixelSamplingRate=.75,this.resolution=new vf(1,1)}resizeWithVolume(e){this.zSlice=Math.floor(e.imageInfo.subregionSize.z/2),this.diffuse=new Array(e.imageInfo.numChannels).fill([255,255,255]),this.specular=new Array(e.imageInfo.numChannels).fill([0,0,0]),this.emissive=new Array(e.imageInfo.numChannels).fill([0,0,0]),this.glossiness=new Array(e.imageInfo.numChannels).fill(0)}static compareArray(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r instanceof Array&&i instanceof Array){if(!this.compareArray(r,i))return!1}else if(r!==i)return!1}return!0}isEqual(e){for(const t of Object.keys(this)){const n=this[t],r=e[t];if(n instanceof Array){if(!ax.compareArray(n,r))return!1}else if(n&&void 0!==n.bmin){const e=n,t=r;if(!e.bmin.equals(t.bmin)||!e.bmax.equals(t.bmax))return!1}else if(n instanceof Hf||n instanceof vf||n instanceof Rp){if(!n.equals(r))return!1}else if(n!==r)return!1}return!0}static deepCopyArray(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];t[n]=r instanceof Array?this.deepCopyArray(r):r}return t}clone(){const e=new ax;for(const t of Object.keys(this)){const n=this[t];n instanceof Array?e[t]=ax.deepCopyArray(n):"bounds"===t?(e.bounds.bmax=this.bounds.bmax.clone(),e.bounds.bmin=this.bounds.bmin.clone()):e[t]=n instanceof Hf||n instanceof vf||n instanceof Rp?n.clone():n instanceof String?""+n:n}return e}}const sx=1e3,lx=6e4,cx=36e5,ux=864e5;function hx(e,t=5){const n=e.toExponential(t-1),[r,i]=n.split("e");return`${r}10${"-"===i[0]?"":""}${i.slice(1).split("").map((e=>{return t=Number(e),String.fromCharCode([8304,185,178,179,8308,8309,8310,8311,8312,8313][t]);var t})).join("")}`}function dx(e,t=5,n=t-2){const r=Math.abs(e);if(Number.isInteger(e))return r>=1e4?hx(e,n):e.toString();{const r=function(e,t){const n=Math.floor(Math.log10(Math.abs(e)));return e.toFixed(Math.max(t-n-1,0))}(e,t),i=Math.abs(Number(r));if(i>=1e4||i<.01)return hx(e,n);const o=function(e){let t=e.length-1;for(;"0"===e[t];)t--;return e.slice(0,t+1)}(r);return o.endsWith(".")?o.slice(0,-1):o}}const fx={[nx.MILLISECOND]:1,[nx.SECOND]:sx,[nx.MINUTE]:lx,[nx.HOUR]:cx,[nx.DAY]:ux};function px(e,t){const n=fx[t];if(void 0===n)throw new Error("Unrecognized time unit");return e*n}function mx(e,t,n){return n?e.toString().padStart(t,"0"):e.toString()}function gx(e,t){const{useMs:n,useSec:r,useMin:i,useHours:o,useDays:a}=t,s=[],l=[];if(a){const t=Math.floor(e/ux);s.push(t.toString()),l.push("d")}if(o){const t=Math.floor(e%ux/cx);s.push(mx(t,2,a)),l.push("h")}if(i){const t=Math.floor(e%cx/lx);s.push(mx(t,2,o)),l.push("m")}if(r){let t=mx(Math.floor(e%lx/sx),2,i);l.push("s"),n&&(t+="."+Math.floor(e%sx).toString().padStart(3,"0")),s.push(t)}else if(n){const t=Math.floor(e%sx);s.push(t.toString()),l.push("ms")}return{timestamp:s.join(":"),units:l.join(":")}}function vx(e){let t=e[0],n=e[0];for(let r=1;r<e.length;r++)t=Math.min(t,e[r]),n=Math.max(n,e[r]);return[t,n]}const yx="\nprecision highp float;\nprecision highp int;\nout vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1.0);\n}\n",bx="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nin vec2 vUv;\nuniform sampler2D image;\n\nvoid main() {\n  gl_FragColor = texture2D(image, vUv);\n}\n";class xx{constructor(e,t){this.scene=new og,this.geometry=new Rg(2,2),this.material=new Ym({vertexShader:yx,fragmentShader:e,uniforms:t}),this.material.depthWrite=!1,this.material.depthTest=!1,this.mesh=new Vm(this.geometry,this.material),this.scene.add(this.mesh),this.camera=new Zg(-1,1,1,-1,0,1)}render(e,t){e.setRenderTarget(t??null),e.render(this.scene,this.camera),e.setRenderTarget(null)}}class _x{constructor(e,t){this.containerdiv=document.createElement("div"),this.containerdiv.style.position="relative",this.canvas=document.createElement("canvas"),this.containerdiv.appendChild(this.canvas),this.canvas.style.backgroundColor="black",e&&(this.canvas.height=e.offsetHeight,this.canvas.width=e.offsetWidth,e.appendChild(this.containerdiv)),this.scene=new og,this.meshRenderTarget=new Bf(this.canvas.width,this.canvas.height,{minFilter:Dh,magFilter:Dh,format:Qh,type:Vh,depthBuffer:!0}),this.meshRenderToBuffer=new xx(bx,{image:{value:this.meshRenderTarget.texture}}),this.meshRenderTarget.depthTexture=new Pg(this.canvas.width,this.canvas.height),this.scaleBarContainerElement=document.createElement("div"),this.orthoScaleBarElement=document.createElement("div"),this.showOrthoScaleBar=!0,this.perspectiveScaleBarElement=document.createElement("div"),this.showPerspectiveScaleBar=!1,this.timestepIndicatorElement=document.createElement("div"),this.showTimestepIndicator=!1,this.animateFuncs=[],this.inRenderLoop=!1,this.requestedRender=0,this.hasWebGL2=!1;const n=this.canvas.getContext("webgl2");n?(this.hasWebGL2=!0,this.renderer=new qb({context:n,canvas:this.canvas,preserveDrawingBuffer:!0,alpha:!0,premultipliedAlpha:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.state.setBlending(1),this.renderer.getContext().getExtension("EXT_color_buffer_float")):(console.warn("WebGL 2.0 not available. Some functionality may be limited. Please use a browser that supports WebGL 2.0."),this.renderer=new qb({canvas:this.canvas,preserveDrawingBuffer:!0,alpha:!0,premultipliedAlpha:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.state.setBlending(1)),this.renderer.localClippingEnabled=!0,e&&(this.renderer.setSize(e.offsetWidth,e.offsetHeight),this.meshRenderTarget.setSize(e.offsetWidth,e.offsetHeight)),this.timer=new Yb;const r=.5,i=this.getWidth()/this.getHeight();this.fov=20,this.perspectiveCamera=new eg(this.fov,i,.1,20),this.resetPerspectiveCamera(),this.perspectiveControls=new Xb(this.perspectiveCamera,this.canvas),this.perspectiveControls.rotateSpeed=4/window.devicePixelRatio,this.perspectiveControls.autoRotate=!1,this.perspectiveControls.staticMoving=!0,this.perspectiveControls.length=10,this.perspectiveControls.enabled=!0,this.orthographicCameraX=new Zg(-.5*i,r*i,r,-.5,.001,20),this.resetOrthographicCameraX(),this.orthoControlsX=new Xb(this.orthographicCameraX,this.canvas),this.orthoControlsX.noRotate=!0,this.orthoControlsX.scale=r,this.orthoControlsX.scale0=r,this.orthoControlsX.aspect=i,this.orthoControlsX.staticMoving=!0,this.orthoControlsX.enabled=!1,this.orthoControlsX.panSpeed=.5*this.canvas.clientWidth,this.orthographicCameraY=new Zg(-.5*i,r*i,r,-.5,.001,20),this.resetOrthographicCameraY(),this.orthoControlsY=new Xb(this.orthographicCameraY,this.canvas),this.orthoControlsY.noRotate=!0,this.orthoControlsY.scale=r,this.orthoControlsY.scale0=r,this.orthoControlsY.aspect=i,this.orthoControlsY.staticMoving=!0,this.orthoControlsY.enabled=!1,this.orthoControlsY.panSpeed=.5*this.canvas.clientWidth,this.orthographicCameraZ=new Zg(-.5*i,r*i,r,-.5,.001,20),this.resetOrthographicCameraZ(),this.orthoControlsZ=new Xb(this.orthographicCameraZ,this.canvas),this.orthoControlsZ.noRotate=!0,this.orthoControlsZ.scale=r,this.orthoControlsZ.scale0=r,this.orthoControlsZ.aspect=i,this.orthoControlsZ.staticMoving=!0,this.orthoControlsZ.enabled=!1,this.orthoControlsZ.panSpeed=.5*this.canvas.clientWidth,this.camera=this.perspectiveCamera,this.controls=this.perspectiveControls,this.viewMode=ox.NONE,this.axisCamera=new Zg,this.axisHelperScene=new og,this.axisHelperObject=new qp,this.axisHelperObject.name="axisHelperParentObject",this.showAxis=!1,this.axisScale=50,this.axisOffset=[66,66],this.setupAxisHelper(),this.setupIndicatorElements()}updateCameraFocus(e,t,n){this.perspectiveCamera.fov=e,this.fov=e,this.perspectiveCamera.updateProjectionMatrix()}resetPerspectiveCamera(){this.perspectiveCamera.position.x=0,this.perspectiveCamera.position.y=0,this.perspectiveCamera.position.z=5,this.perspectiveCamera.up.x=0,this.perspectiveCamera.up.y=1,this.perspectiveCamera.up.z=0}resetOrthographicCameraX(){this.orthographicCameraX.position.x=2,this.orthographicCameraX.position.y=0,this.orthographicCameraX.position.z=0,this.orthographicCameraX.up.x=0,this.orthographicCameraX.up.y=0,this.orthographicCameraX.up.z=1,this.orthographicCameraX.lookAt(new Hf(0,0,0))}resetOrthographicCameraY(){this.orthographicCameraY.position.x=0,this.orthographicCameraY.position.y=2,this.orthographicCameraY.position.z=0,this.orthographicCameraY.up.x=0,this.orthographicCameraY.up.y=0,this.orthographicCameraY.up.z=1,this.orthographicCameraY.lookAt(new Hf(0,0,0))}resetOrthographicCameraZ(){this.orthographicCameraZ.position.x=0,this.orthographicCameraZ.position.y=0,this.orthographicCameraZ.position.z=2,this.orthographicCameraZ.up.x=0,this.orthographicCameraZ.up.y=1,this.orthographicCameraZ.up.z=0,this.orthographicCameraZ.lookAt(new Hf(0,0,0))}requestCapture(e){this.dataurlcallback=e,this.redraw()}isVR(){return this.renderer.xr.enabled}resetToPerspectiveCamera(){const e=this.getWidth()/this.getHeight();this.perspectiveCamera=new eg(this.fov,e,.1,20),this.resetPerspectiveCamera(),this.switchViewMode("3D"),this.controls.object=this.perspectiveCamera,this.controls.enabled=!0,this.controls.reset()}resetCamera(){this.camera===this.perspectiveCamera?this.resetPerspectiveCamera():this.camera===this.orthographicCameraX?this.resetOrthographicCameraX():this.camera===this.orthographicCameraY?this.resetOrthographicCameraY():this.camera===this.orthographicCameraZ&&this.resetOrthographicCameraZ(),this.controls.reset()}setupAxisHelper(){const e=new gm({color:11447469}),t=new Hm(this.axisScale/5,this.axisScale/5,this.axisScale/5),n=new Vm(t,e);this.axisHelperObject.add(n);const r=new uv(this.axisScale);this.axisHelperObject.add(r),this.axisHelperScene.add(this.axisHelperObject),this.axisCamera=new Zg(0,this.getWidth(),this.getHeight(),0,.001,4*this.axisScale),this.axisCamera.position.z=1,this.axisCamera.up.x=0,this.axisCamera.up.y=1,this.axisCamera.up.z=0,this.axisCamera.lookAt(new Hf(0,0,0)),this.axisCamera.position.set(-this.axisOffset[0],-this.axisOffset[1],2*this.axisScale)}setAxisPosition(e,t,n){this.axisOffset=[e+50,t+50],ex(n)&&(this.axisOffset[1]=this.getHeight()-this.axisOffset[1]),tx(n)&&(this.axisOffset[0]=this.getWidth()-this.axisOffset[0]),this.axisCamera.position.set(-this.axisOffset[0],-this.axisOffset[1],2*this.axisScale)}orthoScreenPixelsToPhysicalUnits(e,t){const n=1/(this.camera.zoom*this.getHeight());return e*window.devicePixelRatio*n*t}setupIndicatorElements(){Object.assign(this.scaleBarContainerElement.style,{fontFamily:"-apple-system, 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif",position:"absolute",right:"169px",bottom:"20px"}),this.containerdiv.appendChild(this.scaleBarContainerElement),Object.assign(this.orthoScaleBarElement.style,{border:"1px solid white",borderTop:"none",height:"10px",display:"none",color:"white",mixBlendMode:"difference",fontSize:"14px",textAlign:"right",lineHeight:"0",boxSizing:"border-box",paddingRight:"10px",marginRight:"40px"}),this.scaleBarContainerElement.appendChild(this.orthoScaleBarElement),Object.assign(this.perspectiveScaleBarElement.style,{width:"75px",textAlign:"center",display:"none",color:"white"}),this.scaleBarContainerElement.appendChild(this.perspectiveScaleBarElement);const e=document.createElement("div"),t=document.createElement("div");t.style.color="rgb(255, 255, 0)",t.innerHTML='\n<svg enable-background="new 0 0 150 75.3" viewBox="0 0 150 75.3" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <linearGradient id="a" gradientTransform="matrix(1 0 0 -1 0 76)" gradientUnits="userSpaceOnUse" x1=".3035"\n    x2="149.6965" y1="19.59" y2="19.59">\n    <stop offset="0" stop-color="currentColor" stop-opacity="0" />\n    <stop offset=".16" stop-color="currentColor" />\n    <stop offset=".84" stop-color="currentColor" />\n    <stop offset="1" stop-color="currentColor" stop-opacity="0" />\n  </linearGradient>\n  <g fill="none">\n    <path d="m.5 39.1 149 34.6" stroke="url(#a)" stroke-miterlimit="10" stroke-width="4" />\n    <path d="m101.5 73.6 11-8.5" stroke="currentColor" stroke-miterlimit="10" stroke-width="4" />\n    <path d="m25.1 55.7 11-8.5" stroke="currentColor" stroke-miterlimit="10" stroke-width="4" />\n    <path\n      d="m36.2 40c0-12 5.3-12.4 10.5-14.2 5-1.7 17.3 1.9 22.6 1.7s8-5 8.4-11.8c-.4 6.9 3.4 13.8 10 16.3 8 3 17.9 2.7 23.2 7.3 7 6 3.3 12.2 1.6 19.1"\n      stroke="white" stroke-dasharray="2 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" />\n  </g>\n</svg>\n',this.perspectiveScaleBarElement.appendChild(e),this.perspectiveScaleBarElement.appendChild(t),Object.assign(this.timestepIndicatorElement.style,{fontFamily:"-apple-system, 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif",position:"absolute",right:"20px",bottom:"20px",color:"white",mixBlendMode:"difference",display:"none",lineHeight:"0.75"}),this.containerdiv.appendChild(this.timestepIndicatorElement)}updateOrthoScaleBar(e,t){const n=this.orthoScreenPixelsToPhysicalUnits(150,e),r=10**Math.floor(Math.log10(n)),i=Math.floor(n/r)*r,o=dx(i);this.orthoScaleBarElement.innerHTML=`${o}${t||""}`,this.orthoScaleBarElement.style.width=i/n*150+"px"}updatePerspectiveScaleBar(e,t){this.perspectiveScaleBarElement.firstChild.innerHTML=`${dx(e)}${t||""}`}updateTimestepIndicator(e,t,n){this.timestepIndicatorElement.innerHTML=function(e,t,n){const r=function(e){for(const[t,n]of Object.entries(rx))if(n.has(e))return t}(n);if(void 0===r)return`${dx(e)} / ${dx(t)} ${n}`;const i=px(e,r),o=px(t,r),a={useMs:r==nx.MILLISECOND,useSec:r==nx.SECOND||r<=nx.SECOND&&o>=sx,useMin:r==nx.MINUTE||r<=nx.MINUTE&&o>=lx,useHours:r==nx.HOUR||r<=nx.HOUR&&o>=cx,useDays:r==nx.DAY||r<=nx.DAY&&o>=ux},{timestamp:s,units:l}=gx(i,a),{timestamp:c}=gx(o,a);return`${s} / ${c} ${l}`}(e,t,n)}setPerspectiveScaleBarColor(e){this.perspectiveScaleBarElement.lastChild.style.color=`rgb(${255*e[0]}, ${255*e[1]}, ${255*e[2]})`}updateScaleBarVisibility(){const e=Jb(this.camera),t=e&&this.showOrthoScaleBar,n=!e&&this.showPerspectiveScaleBar;this.orthoScaleBarElement.style.display=t?"":"none",this.perspectiveScaleBarElement.style.display=n?"":"none"}setShowOrthoScaleBar(e){this.showOrthoScaleBar=e,this.updateScaleBarVisibility()}setShowPerspectiveScaleBar(e){this.showPerspectiveScaleBar=e,this.updateScaleBarVisibility()}setShowTimestepIndicator(e){this.showTimestepIndicator=e,this.timestepIndicatorElement.style.display=e?"":"none"}setIndicatorPosition(e,t,n,r){const{style:i}=e?this.timestepIndicatorElement:this.scaleBarContainerElement;i.removeProperty("top"),i.removeProperty("bottom"),i.removeProperty("left"),i.removeProperty("right");const o=tx(r)?"right":"left",a=ex(r)?"top":"bottom";Object.assign(i,{[o]:t+"px",[a]:n+"px"})}setAutoRotate(e){this.controls.autoRotate=e}getAutoRotate(){return this.controls.autoRotate}replaceCamera(e){this.camera=e}replaceControls(e){this.controls!==e&&(this.controls.enabled=!1,this.removeControlHandlers(),this.controls=e,this.controls.enabled=!0,this.controlStartHandler&&this.controls.addEventListener("start",this.controlStartHandler),this.controlChangeHandler&&this.controls.addEventListener("change",this.controlChangeHandler),this.controlEndHandler&&this.controls.addEventListener("end",this.controlEndHandler),this.controls.update())}switchViewMode(e){switch(e=e.toUpperCase()){case"YZ":case"X":this.replaceCamera(this.orthographicCameraX),this.replaceControls(this.orthoControlsX),this.axisHelperObject.rotation.set(0,.5*Math.PI,0),this.viewMode=ox.X;break;case"XZ":case"Y":this.replaceCamera(this.orthographicCameraY),this.replaceControls(this.orthoControlsY),this.axisHelperObject.rotation.set(.5*Math.PI,0,0),this.viewMode=ox.Y;break;case"XY":case"Z":this.replaceCamera(this.orthographicCameraZ),this.replaceControls(this.orthoControlsZ),this.axisHelperObject.rotation.set(0,0,0),this.viewMode=ox.Z;break;default:this.replaceCamera(this.perspectiveCamera),this.replaceControls(this.perspectiveControls),this.axisHelperObject.rotation.setFromRotationMatrix(this.camera.matrixWorldInverse),this.viewMode=ox.NONE}this.updateScaleBarVisibility()}getMeshDepthTexture(){return this.meshRenderTarget.depthTexture}resize(e,t,n,r,i,o){t=t||this.containerdiv.parentElement?.offsetWidth||this.containerdiv.offsetWidth,n=n||this.containerdiv.parentElement?.offsetHeight||this.containerdiv.offsetHeight,this.containerdiv.style.width=t+"px",this.containerdiv.style.height=n+"px";const a=t/n;this.perspectiveControls.aspect=a,this.orthoControlsZ.aspect=a,this.orthoControlsZ.panSpeed=.5*t,this.orthoControlsY.aspect=a,this.orthoControlsY.panSpeed=.5*t,this.orthoControlsX.aspect=a,this.orthoControlsX.panSpeed=.5*t,Jb(this.camera)?(this.camera.left=-.5*a,this.camera.right=.5*a,this.camera.updateProjectionMatrix()):(this.camera.aspect=a,this.camera.updateProjectionMatrix()),this.axisCamera.left=0,this.axisCamera.right=t,this.axisCamera.top=n,this.axisCamera.bottom=0,this.axisCamera.updateProjectionMatrix(),this.renderer.getPixelRatio()!==window.devicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t,n),this.meshRenderTarget.setSize(t,n),this.perspectiveControls.handleResize(),this.orthoControlsZ.handleResize(),this.orthoControlsY.handleResize(),this.orthoControlsX.handleResize()}setClearColor(e,t){this.renderer.setClearColor(e,t)}getWidth(){return this.renderer.getContext().canvas.width}getHeight(){return this.renderer.getContext().canvas.height}getCameraState(){return{position:this.camera.position.toArray(),up:this.camera.up.toArray(),target:this.controls.target.toArray(),orthoScale:Jb(this.camera)?this.controls.scale:void 0,fov:(e=this.camera,e&&e.isPerspectiveCamera?this.camera.fov:void 0)};var e}setCameraState(e){const t={...this.getCameraState(),...e};this.camera.up.fromArray(t.up).normalize(),this.controls.target.fromArray(t.target);const n=function(e,t,n){switch(n){case ox.X:return[e[0],t[1],t[2]];case ox.Y:return[t[0],e[1],t[2]];case ox.Z:return[t[0],t[1],e[2]];default:return[...e]}}(t.position,t.target,this.viewMode);if(this.camera.position.fromArray(n),Jb(this.camera)){const e=t.orthoScale||.5;this.controls.scale=e,this.camera.zoom=.5/e}else this.camera.fov=t.fov||this.fov;this.controls.update(),this.camera.updateProjectionMatrix()}render(){Jb(this.camera)||this.axisHelperObject.rotation.setFromRotationMatrix(this.camera.matrixWorldInverse);for(let e=0;e<this.animateFuncs.length;e++)this.animateFuncs[e]&&this.animateFuncs[e](this.renderer,this.camera,this.meshRenderTarget.depthTexture);this.camera.layers.set(1),this.renderer.setRenderTarget(this.meshRenderTarget),this.renderer.render(this.scene,this.camera),this.meshRenderToBuffer.material.uniforms.image.value=this.meshRenderTarget.texture,this.meshRenderToBuffer.render(this.renderer),this.camera.layers.set(0),this.renderer.setRenderTarget(null),this.renderer.autoClear=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClear=!0,this.showAxis&&(this.renderer.autoClear=!1,this.renderer.render(this.axisHelperScene,this.axisCamera),this.renderer.autoClear=!0),this.dataurlcallback&&(this.dataurlcallback(this.canvas.toDataURL()),this.dataurlcallback=void 0)}redraw(){this.inRenderLoop||(this.requestedRender&&cancelAnimationFrame(this.requestedRender),this.timer.begin(),this.requestedRender=requestAnimationFrame(this.onAnimationLoop.bind(this)))}onAnimationLoop(){this.timer.update();const e=this.timer.lastFrameMs/1e3;this.controls.update(e),this.render()}startRenderLoop(){this.inRenderLoop=!0,this.timer.begin(),this.renderer.setAnimationLoop(this.onAnimationLoop.bind(this))}stopRenderLoop(){this.renderer.setAnimationLoop(null),this.inRenderLoop=!1,this.requestedRender&&(cancelAnimationFrame(this.requestedRender),this.requestedRender=0),this.timer.end()}removeControlHandlers(){this.controlStartHandler&&this.controls.removeEventListener("start",this.controlStartHandler),this.controlChangeHandler&&this.controls.removeEventListener("change",this.controlChangeHandler),this.controlEndHandler&&this.controls.removeEventListener("end",this.controlEndHandler)}setControlHandlers(e,t,n){this.removeControlHandlers(),e&&(this.controlStartHandler=e,this.controls.addEventListener("start",this.controlStartHandler)),t&&(this.controlChangeHandler=t,this.controls.addEventListener("change",this.controlChangeHandler)),n&&(this.controlEndHandler=n,this.controls.addEventListener("end",this.controlEndHandler))}}const wx={spotlightSettings:Object.freeze({angle:36*gf.DEG2RAD,castShadow:!1,color:16777215,intensity:.4,position:{x:-4,y:3.5,z:7}}),ambientLightSettings:Object.freeze({color:16777215,intensity:.6}),reflectedLightSettings:Object.freeze({castShadow:!1,color:16746666,intensity:.2,position:{x:1,y:-5,z:0}}),fillLightSettings:Object.freeze({castShadow:!1,color:15258025,intensity:.15,position:{x:2.5,y:.2,z:1.5}})};class Sx{parse(e,t={}){const n=(t=Object.assign({binary:!1},t)).binary,r=[];let i,o=0;e.traverse((function(e){if(e.isMesh){const t=e.geometry,n=t.index,i=t.getAttribute("position");o+=null!==n?n.count/3:i.count/3,r.push({object3d:e,geometry:t})}}));let a=80;if(!0===n){const e=new ArrayBuffer(2*o+3*o*4*4+80+4);i=new DataView(e),i.setUint32(a,o,!0),a+=4}else i="",i+="solid exported\n";const s=new Hf,l=new Hf,c=new Hf,u=new Hf,h=new Hf,d=new Hf;for(let e=0,t=r.length;e<t;e++){const t=r[e].object3d,n=r[e].geometry,i=n.index,o=n.getAttribute("position");if(null!==i)for(let e=0;e<i.count;e+=3)f(i.getX(e+0),i.getX(e+1),i.getX(e+2),o,t);else for(let e=0;e<o.count;e+=3)f(e+0,e+1,e+2,o,t)}return!1===n&&(i+="endsolid exported\n"),i;function f(e,t,r,o,f){s.fromBufferAttribute(o,e),l.fromBufferAttribute(o,t),c.fromBufferAttribute(o,r),!0===f.isSkinnedMesh&&(f.applyBoneTransform(e,s),f.applyBoneTransform(t,l),f.applyBoneTransform(r,c)),s.applyMatrix4(f.matrixWorld),l.applyMatrix4(f.matrixWorld),c.applyMatrix4(f.matrixWorld),function(e,t,r){u.subVectors(r,t),h.subVectors(e,t),u.cross(h).normalize(),d.copy(u).normalize(),!0===n?(i.setFloat32(a,d.x,!0),a+=4,i.setFloat32(a,d.y,!0),a+=4,i.setFloat32(a,d.z,!0),a+=4):(i+="\tfacet normal "+d.x+" "+d.y+" "+d.z+"\n",i+="\t\touter loop\n")}(s,l,c),p(s),p(l),p(c),!0===n?(i.setUint16(a,0,!0),a+=2):(i+="\t\tendloop\n",i+="\tendfacet\n")}function p(e){!0===n?(i.setFloat32(a,e.x,!0),a+=4,i.setFloat32(a,e.y,!0),a+=4,i.setFloat32(a,e.z,!0),a+=4):i+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n"}}}const Ex={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Cx{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register((function(e){return new jx(e)})),this.register((function(e){return new Vx(e)})),this.register((function(e){return new Wx(e)})),this.register((function(e){return new qx(e)})),this.register((function(e){return new Xx(e)})),this.register((function(e){return new Yx(e)})),this.register((function(e){return new $x(e)})),this.register((function(e){return new Hx(e)})),this.register((function(e){return new Gx(e)})),this.register((function(e){return new Kx(e)})),this.register((function(e){return new Zx(e)})),this.register((function(e){return new Jx(e)})),this.register((function(e){return new Qx(e)})),this.register((function(e){return new e_(e)}))}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,n,r){const i=new Bx,o=[];for(let e=0,t=this.pluginCallbacks.length;e<t;e++)o.push(this.pluginCallbacks[e](i));i.setPlugins(o),i.setTextureUtils(this.textureUtils),i.writeAsync(e,t,r).catch(n)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}const Mx=5120,Tx=5121,Ax=5122,Px=5123,Rx=34962,Ix="KHR_mesh_quantization",Ox={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},kx={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Lx=new dm;function Nx(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function Dx(e){return 4*Math.ceil(e/4)}function zx(e,t=0){const n=Dx(e.byteLength);if(n!==e.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function Ux(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function Fx(e,t){if(void 0!==e.toBlob)return new Promise((n=>e.toBlob(n,t)));let n;return"image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n})}class Bx{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+eh}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const r=this,i=r.buffers,o=r.json;n=r.options;const a=r.extensionsUsed,s=r.extensionsRequired,l=new Blob(i,{type:"application/octet-stream"}),c=Object.keys(a),u=Object.keys(s);if(c.length>0&&(o.extensionsUsed=c),u.length>0&&(o.extensionsRequired=u),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),!0===n.binary){const e=new FileReader;e.readAsArrayBuffer(l),e.onloadend=function(){const n=zx(e.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,5130562,!0);const i=zx((a=JSON.stringify(o),(new TextEncoder).encode(a).buffer),32);var a;const s=new DataView(new ArrayBuffer(8));s.setUint32(0,i.byteLength,!0),s.setUint32(4,1313821514,!0);const l=new ArrayBuffer(12),c=new DataView(l);c.setUint32(0,1179937895,!0),c.setUint32(4,2,!0);const u=12+s.byteLength+i.byteLength+r.byteLength+n.byteLength;c.setUint32(8,u,!0);const h=new Blob([l,s,i,r,n],{type:"application/octet-stream"}),d=new FileReader;d.readAsArrayBuffer(h),d.onloadend=function(){t(d.result)}}}else if(o.buffers&&o.buffers.length>0){const e=new FileReader;e.readAsDataURL(l),e.onloadend=function(){const n=e.result;o.buffers[0].uri=n,t(o)}}else t(o)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const n=this.options,r=this.extensionsUsed;try{const i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in i.gltfExtensions)t.extensions[e]=i.gltfExtensions[e],r[e]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new Hf;for(let n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),r=new Hf;for(let e=0,t=n.count;e<t;e++)r.fromBufferAttribute(n,e),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(e,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,t){if(e===t)return e;function n(e){return e.colorSpace===Vd?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}e instanceof Ag&&(e=await this.decompressTextureAsync(e)),t instanceof Ag&&(t=await this.decompressTextureAsync(t));const r=e?e.image:null,i=t?t.image:null,o=Math.max(r?r.width:0,i?i.width:0),a=Math.max(r?r.height:0,i?i.height:0),s=Ux();s.width=o,s.height=a;const l=s.getContext("2d",{willReadFrequently:!0});l.fillStyle="#00ffff",l.fillRect(0,0,o,a);const c=l.getImageData(0,0,o,a);if(r){l.drawImage(r,0,0,o,a);const t=n(e),i=l.getImageData(0,0,o,a).data;for(let e=2;e<i.length;e+=4)c.data[e]=256*t(i[e]/256)}if(i){l.drawImage(i,0,0,o,a);const e=n(t),r=l.getImageData(0,0,o,a).data;for(let t=1;t<r.length;t+=4)c.data[t]=256*e(r[t]/256)}l.putImageData(c,0,0);const u=(e||t).clone();return u.source=new Lf(s),u.colorSpace=jd,u.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),u}async decompressTextureAsync(e,t=1/0){if(null===this.textureUtils)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,t)}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,r,i){const o=this.json;let a;switch(o.bufferViews||(o.bufferViews=[]),t){case Mx:case Tx:a=1;break;case Ax:case Px:a=2;break;default:a=4}let s=e.itemSize*a;i===Rx&&(s=4*Math.ceil(s/4));const l=Dx(r*s),c=new DataView(new ArrayBuffer(l));let u=0;for(let i=n;i<n+r;i++){for(let n=0;n<e.itemSize;n++){let r;e.itemSize>4?r=e.array[i*e.itemSize+n]:(0===n?r=e.getX(i):1===n?r=e.getY(i):2===n?r=e.getZ(i):3===n&&(r=e.getW(i)),!0===e.normalized&&(r=gf.normalize(r,e.array))),5126===t?c.setFloat32(u,r,!0):5124===t?c.setInt32(u,r,!0):5125===t?c.setUint32(u,r,!0):t===Ax?c.setInt16(u,r,!0):t===Px?c.setUint16(u,r,!0):t===Mx?c.setInt8(u,r):t===Tx&&c.setUint8(u,r),u+=a}u%s!=0&&(u+=s-u%s)}const h={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};return void 0!==i&&(h.target=i),i===Rx&&(h.byteStride=s),this.byteOffset+=l,o.bufferViews.push(h),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){const i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){const e=zx(i.result),o={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(o)-1)}}))}processAccessor(e,t,n,r){const i=this.json;let o;if(e.array.constructor===Float32Array)o=5126;else if(e.array.constructor===Int32Array)o=5124;else if(e.array.constructor===Uint32Array)o=5125;else if(e.array.constructor===Int16Array)o=Ax;else if(e.array.constructor===Uint16Array)o=Px;else if(e.array.constructor===Int8Array)o=Mx;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);o=Tx}if(void 0===n&&(n=0),void 0!==r&&r!==1/0||(r=e.count),0===r)return null;const a=function(e,t,n){const r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=t;i<t+n;i++)for(let t=0;t<e.itemSize;t++){let n;e.itemSize>4?n=e.array[i*e.itemSize+t]:(0===t?n=e.getX(i):1===t?n=e.getY(i):2===t?n=e.getZ(i):3===t&&(n=e.getW(i)),!0===e.normalized&&(n=gf.normalize(n,e.array))),r.min[t]=Math.min(r.min[t],n),r.max[t]=Math.max(r.max[t],n)}return r}(e,n,r);let s;void 0!==t&&(s=e===t.index?34963:Rx);const l=this.processBufferView(e,o,n,r,s),c={bufferView:l.id,byteOffset:l.byteOffset,componentType:o,count:r,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(c.normalized=!0),i.accessors||(i.accessors=[]),i.accessors.push(c)-1}processImage(e,t,n,r="image/png"){if(null!==e){const i=this,o=i.cache,a=i.json,s=i.options,l=i.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=r+":flipY/"+n.toString();if(void 0!==c[u])return c[u];a.images||(a.images=[]);const h={mimeType:r},d=Ux();d.width=Math.min(e.width,s.maxTextureSize),d.height=Math.min(e.height,s.maxTextureSize);const f=d.getContext("2d",{willReadFrequently:!0});if(!0===n&&(f.translate(0,d.height),f.scale(1,-1)),void 0!==e.data){t!==Qh&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>s.maxTextureSize||e.height>s.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const n=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<n.length;t+=4)n[t+0]=e.data[t+0],n[t+1]=e.data[t+1],n[t+2]=e.data[t+2],n[t+3]=e.data[t+3];f.putImageData(new ImageData(n,e.width,e.height),0,0)}else{if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");f.drawImage(e,0,0,d.width,d.height)}!0===s.binary?l.push(Fx(d,r).then((e=>i.processBufferViewImage(e))).then((e=>{h.bufferView=e}))):void 0!==d.toDataURL?h.uri=d.toDataURL(r):l.push(Fx(d,r).then((e=>(new FileReader).readAsDataURL(e))).then((e=>{h.uri=e})));const p=a.images.push(h)-1;return c[u]=p,p}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:Ox[e.magFilter],minFilter:Ox[e.minFilter],wrapS:Ox[e.wrapS],wrapT:Ox[e.wrapT]};return t.samplers.push(n)-1}async processTextureAsync(e){const t=this.options,n=this.cache,r=this.json;if(n.textures.has(e))return n.textures.get(e);r.textures||(r.textures=[]),e instanceof Ag&&(e=await this.decompressTextureAsync(e,t.maxTextureSize));let i=e.userData.mimeType;"image/webp"===i&&(i="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(o.name=e.name),await this._invokeAllAsync((async function(t){t.writeTexture&&await t.writeTexture(e,o)}));const a=r.textures.push(o)-1;return n.textures.set(e,a),a}async processMaterialAsync(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const i=e.color.toArray().concat([e.opacity]);if(Nx(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=0,r.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const t=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),n={index:await this.processTextureAsync(t),texCoord:t.channel};this.applyTextureTransform(n,t),r.pbrMetallicRoughness.metallicRoughnessTexture=n}if(e.map){const t={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(t,e.map),r.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive;if(Math.max(t.r,t.g,t.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const t={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(t,e.emissiveMap),r.emissiveTexture=t}}if(e.normalMap){const t={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),r.normalTexture=t}if(e.aoMap){const t={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),r.occlusionTexture=t}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),2===e.side&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),await this._invokeAllAsync((async function(t){t.writeMaterialAsync&&await t.writeMaterialAsync(e,r)}));const o=n.materials.push(r)-1;return t.materials.set(e,o),o}async processMeshAsync(e){const t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)r.push(e.material[t].uuid);else r.push(e.material.uuid);const i=r.join(":");if(t.meshes.has(i))return t.meshes.get(i);const o=e.geometry;let a;a=e.isLineSegments?1:e.isLineLoop?2:e.isLine?3:e.isPoints?0:e.material.wireframe?1:4;const s={},l={},c=[],u=[],h={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");void 0===d||this.isNormalizedNormalAttribute(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let f=null;for(let e in o.attributes){if("morph"===e.slice(0,5))continue;const n=o.attributes[e];if(e=h[e]||e.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e)||(e="_"+e),t.attributes.has(this.getUID(n))){l[e]=t.attributes.get(this.getUID(n));continue}f=null;const r=n.array;"JOINTS_0"!==e||r instanceof Uint16Array||r instanceof Uint8Array?(r instanceof Uint32Array||r instanceof Int32Array)&&!e.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${e}" converted to type FLOAT.`),f=Cx.Utils.toFloat32BufferAttribute(n)):(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),f=new bm(new Uint16Array(r),n.itemSize,n.normalized));const i=this.processAccessor(f||n,o);null!==i&&(e.startsWith("_")||this.detectMeshQuantization(e,n),l[e]=i,t.attributes.set(this.getUID(n),i))}if(void 0!==d&&o.setAttribute("normal",d),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const n=[],r=[],i={};if(void 0!==e.morphTargetDictionary)for(const t in e.morphTargetDictionary)i[e.morphTargetDictionary[t]]=t;for(let a=0;a<e.morphTargetInfluences.length;++a){const s={};let l=!1;for(const e in o.morphAttributes){if("position"!==e&&"normal"!==e){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const n=o.morphAttributes[e][a],r=e.toUpperCase(),i=o.attributes[e];if(t.attributes.has(this.getUID(n,!0))){s[r]=t.attributes.get(this.getUID(n,!0));continue}const c=n.clone();if(!o.morphTargetsRelative)for(let e=0,t=n.count;e<t;e++)for(let t=0;t<n.itemSize;t++)0===t&&c.setX(e,n.getX(e)-i.getX(e)),1===t&&c.setY(e,n.getY(e)-i.getY(e)),2===t&&c.setZ(e,n.getZ(e)-i.getZ(e)),3===t&&c.setW(e,n.getW(e)-i.getW(e));s[r]=this.processAccessor(c,o),t.attributes.set(this.getUID(i,!0),s[r])}u.push(s),n.push(e.morphTargetInfluences[a]),void 0!==e.morphTargetDictionary&&r.push(i[a])}s.weights=n,r.length>0&&(s.extras={},s.extras.targetNames=r)}const p=Array.isArray(e.material);if(p&&0===o.groups.length)return null;let m=!1;if(p&&null===o.index){const e=[];for(let t=0,n=o.attributes.position.count;t<n;t++)e[t]=t;o.setIndex(e),m=!0}const g=p?e.material:[e.material],v=p?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,n=v.length;e<n;e++){const n={mode:a,attributes:l};if(this.serializeUserData(o,n),u.length>0&&(n.targets=u),null!==o.index){let r=this.getUID(o.index);void 0===v[e].start&&void 0===v[e].count||(r+=":"+v[e].start+":"+v[e].count),t.attributes.has(r)?n.indices=t.attributes.get(r):(n.indices=this.processAccessor(o.index,o,v[e].start,v[e].count),t.attributes.set(r,n.indices)),null===n.indices&&delete n.indices}const r=await this.processMaterialAsync(g[v[e].materialIndex]);null!==r&&(n.material=r),c.push(n)}!0===m&&o.setIndex(null),s.primitives=c,n.meshes||(n.meshes=[]),await this._invokeAllAsync((function(t){t.writeMesh&&t.writeMesh(e,s)}));const y=n.meshes.push(s)-1;return t.meshes.set(i,y),y}detectMeshQuantization(e,t){if(this.extensionsUsed[Ix])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const r=e.split("_",1)[0];Ex[r]&&Ex[r].includes(n)&&(this.extensionsUsed[Ix]=!0,this.extensionsRequired[Ix]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:gf.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){const n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);const i=(e=Cx.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,o=[],a=[];for(let e=0;e<i.length;++e){const n=i[e],s=lv.parseTrackName(n.name);let l=lv.findNode(t,s.nodeName);const c=kx[s.propertyName];if("bones"===s.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(s.objectIndex):void 0),!l||!c){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',n.name);continue}const u=1;let h,d=n.values.length/n.times.length;c===kx.morphTargetInfluences&&(d/=l.morphTargetInfluences.length),!0===n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",d/=3):h=n.getInterpolation()===Ud?"STEP":"LINEAR",a.push({input:this.processAccessor(new bm(n.times,u)),output:this.processAccessor(new bm(n.values,d)),interpolation:h}),o.push({sampler:a.length-1,target:{node:r.get(l),path:c}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:o}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;const o=e.skeleton.bones[0];if(void 0===o)return null;const a=[],s=new Float32Array(16*i.bones.length),l=new xp;for(let t=0;t<i.bones.length;++t)a.push(n.get(i.bones[t])),l.copy(i.boneInverses[t]),l.multiply(e.bindMatrix).toArray(s,16*t);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new bm(s,16)),joints:a,skeleton:n.get(o)}),r.skin=t.skins.length-1}async processNodeAsync(e){const t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);const i={};if(n.trs){const t=e.quaternion.toArray(),n=e.position.toArray(),r=e.scale.toArray();Nx(t,[0,0,0,1])||(i.rotation=t),Nx(n,[0,0,0])||(i.translation=n),Nx(r,[1,1,1])||(i.scale=r)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===Nx(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){const t=await this.processMeshAsync(e);null!==t&&(i.mesh=t)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const t=[];for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r];if(i.visible||!1===n.onlyVisible){const e=await this.processNodeAsync(i);null!==e&&t.push(e)}}t.length>0&&(i.children=t)}await this._invokeAllAsync((function(t){t.writeNode&&t.writeNode(e,i)}));const o=t.nodes.push(i)-1;return r.set(e,o),o}async processSceneAsync(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);const i=[];for(let t=0,r=e.children.length;t<r;t++){const r=e.children[t];if(r.visible||!1===n.onlyVisible){const e=await this.processNodeAsync(r);null!==e&&i.push(e)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}async processObjectsAsync(e){const t=new og;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);await this.processSceneAsync(t)}async processInputAsync(e){const t=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync((function(t){t.beforeParse&&t.beforeParse(e)}));const n=[];for(let t=0;t<e.length;t++)e[t]instanceof og?await this.processSceneAsync(e[t]):n.push(e[t]);n.length>0&&await this.processObjectsAsync(n);for(let e=0;e<this.skins.length;++e)this.processSkin(this.skins[e]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);await this._invokeAllAsync((function(t){t.afterParse&&t.afterParse(e)}))}async _invokeAllAsync(e){for(let t=0,n=this.plugins.length;t<n;t++)await e(this.plugins[t])}}class jx{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const n=this.writer,r=n.json,i=n.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(1-e.penumbra)*e.angle,o.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);const a=r.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class Vx{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,t){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class $x{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){const t={index:await n.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(t,e.clearcoatMap),i.clearcoatTexture=t}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const t={index:await n.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(t,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){const t={index:await n.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};1!==e.clearcoatNormalScale.x&&(t.scale=e.clearcoatNormalScale.x),n.applyTextureTransform(t,e.clearcoatNormalMap),i.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Hx{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0===e.dispersion)return;const n=this.writer.extensionsUsed,r={};r.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Gx{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){const t={index:await n.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(t,e.iridescenceMap),i.iridescenceTexture=t}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const t={index:await n.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(t,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Wx{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){const t={index:await n.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(t,e.transmissionMap),i.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class qx{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){const t={index:await n.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(t,e.thicknessMap),i.thicknessTexture=t}e.attenuationDistance!==1/0&&(i.attenuationDistance=e.attenuationDistance),i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Xx{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;const n=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Yx{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(Lx)&&!e.specularIntensityMap&&!e.specularColorMap)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.specularIntensityMap){const t={index:await n.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(t,e.specularIntensityMap),i.specularTexture=t}if(e.specularColorMap){const t={index:await n.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(t,e.specularColorMap),i.specularColorTexture=t}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Kx{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.sheenRoughnessMap){const t={index:await n.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(t,e.sheenRoughnessMap),i.sheenRoughnessTexture=t}if(e.sheenColorMap){const t={index:await n.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(t,e.sheenColorMap),i.sheenColorTexture=t}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Zx{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||0==e.anisotropy)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.anisotropyMap){const t={index:await n.processTextureAsync(e.anisotropyMap)};n.applyTextureTransform(t,e.anisotropyMap),i.anisotropyTexture=t}i.anisotropyStrength=e.anisotropy,i.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Jx{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;const n=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Qx{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||1===e.bumpScale&&!e.bumpMap)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.bumpMap){const t={index:await n.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};n.applyTextureTransform(t,e.bumpMap),i.bumpTexture=t}i.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class e_{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const n=this.writer,r=e,i=new Float32Array(3*r.count),o=new Float32Array(4*r.count),a=new Float32Array(3*r.count),s=new xp,l=new Hf,c=new $f,u=new Hf;for(let e=0;e<r.count;e++)r.getMatrixAt(e,s),s.decompose(l,c,u),l.toArray(i,3*e),c.toArray(o,4*e),u.toArray(a,3*e);const h={TRANSLATION:n.processAccessor(new bm(i,3)),ROTATION:n.processAccessor(new bm(o,4)),SCALE:n.processAccessor(new bm(a,3))};r.instanceColor&&(h._COLOR_0=n.processAccessor(r.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:h},n.extensionsUsed[this.name]=!0,n.extensionsRequired[this.name]=!0}}Cx.Utils={insertKeyframe:function(e,t){const n=.001,r=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+r),a=e.createInterpolant(new e.ValueBufferType(r));let s;if(0===e.times.length){i[0]=t;for(let e=0;e<r;e++)o[e]=0;s=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<n)return 0;i[0]=t,i.set(e.times,1),o.set(a.evaluate(t),0),o.set(e.values,r),s=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<n)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),o.set(e.values,0),o.set(a.evaluate(t),e.values.length),s=i.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<n)return l;if(e.times[l]<t&&e.times[l+1]>t){i.set(e.times.slice(0,l+1),0),i[l+1]=t,i.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*r),0),o.set(a.evaluate(t),(l+1)*r),o.set(e.values.slice((l+1)*r),(l+2)*r),s=l+1;break}}return e.times=i,e.values=o,s},mergeMorphTargetTracks:function(e,t){const n=[],r={},i=e.tracks;for(let e=0;e<i.length;++e){let o=i[e];const a=lv.parseTrackName(o.name),s=lv.findNode(t,a.nodeName);if("morphTargetInfluences"!==a.propertyName||void 0===a.propertyIndex){n.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Fd)}const l=s.morphTargetInfluences.length,c=s.morphTargetDictionary[a.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(void 0===r[s.uuid]){u=o.clone();const e=new u.ValueBufferType(l*u.times.length);for(let t=0;t<u.times.length;t++)e[t*l+c]=u.values[t];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=e,r[s.uuid]=u,n.push(u);continue}const h=o.createInterpolant(new o.ValueBufferType(1));u=r[s.uuid];for(let e=0;e<u.times.length;e++)u.values[e*l+c]=h.evaluate(u.times[e]);for(let e=0;e<o.times.length;e++){const t=this.insertKeyframe(u,o.times[e]);u.values[t*l+c]=o.values[e]}}return e.tracks=n,e},toFloat32BufferAttribute:function(e){const t=new bm(new Float32Array(e.count*e.itemSize),e.itemSize,!1);if(!e.normalized&&!e.isInterleavedBufferAttribute)return t.array.set(e.array),t;for(let n=0,r=e.count;n<r;n++)for(let r=0;r<e.itemSize;r++)t.setComponent(n,r,e.getComponent(n,r));return t}};new dm(16777215);class t_{static save(e,t){const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}static saveString(e,t){const n=new Blob([e],{type:"text/plain;charset=utf-8"});t_.save(n,t)}static saveBinary(e,t){const n=new Blob([new Uint8Array(e)],{type:"application/octet-stream"});t_.save(n,t)}static saveArrayBuffer(e,t){const n=new Blob([e],{type:"application/octet-stream"});t_.save(n,t)}}!function(){var e=new Int32Array(24),t=new Int32Array(256);!function(){for(var n=0,r=0;r<8;++r)for(var i=1;i<=4;i<<=1){var o=r^i;r<=o&&(e[n++]=r,e[n++]=o)}for(r=0;r<256;++r){var a=0;for(i=0;i<24;i+=2)a|=!!(r&1<<e[i])!=!!(r&1<<e[i+1])?1<<(i>>1):0;t[r]=a}}();new Int32Array(4096)}();const n_=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),r_=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),i_=class extends Vm{constructor(e,t,n,r,i,o){super(new Rm,t),this.maxCount=16384,this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1;const a=this;this.isovalue=0;const s=new Float32Array(36),l=new Float32Array(36);function c(e,t,n){return e+(t-e)*n}function u(e,t,n,r,i,o,u,h){const d=(n-u)/(h-u),f=a.normal_cache;s[t+0]=r+d*a.deltaX*a.stepSizeX,s[t+1]=i,s[t+2]=o,l[t+0]=c(f[e+0],f[e+3],d),l[t+1]=c(f[e+1],f[e+4],d),l[t+2]=c(f[e+2],f[e+5],d)}function h(e,t,n,r,i,o,u,h){const d=(n-u)/(h-u),f=a.normal_cache;s[t+0]=r,s[t+1]=i+d*a.deltaY*a.stepSizeY,s[t+2]=o;const p=e+3*a.yd;l[t+0]=c(f[e+0],f[p+0],d),l[t+1]=c(f[e+1],f[p+1],d),l[t+2]=c(f[e+2],f[p+2],d)}function d(e,t,n,r,i,o,u,h){const d=(n-u)/(h-u),f=a.normal_cache;s[t+0]=r,s[t+1]=i,s[t+2]=o+d*a.deltaZ*a.stepSizeZ;const p=e+3*a.zd;l[t+0]=c(f[e+0],f[p+0],d),l[t+1]=c(f[e+1],f[p+1],d),l[t+2]=c(f[e+2],f[p+2],d)}function f(e){const t=3*e;0===a.normal_cache[t]&&(a.normal_cache[t+0]=a.field[e-1*a.stepSizeX]-a.field[e+1*a.stepSizeX],a.normal_cache[t+1]=a.field[e-a.yd*a.stepSizeY]-a.field[e+a.yd*a.stepSizeY],a.normal_cache[t+2]=a.field[e-a.zd*a.stepSizeZ]-a.field[e+a.zd*a.stepSizeZ])}function p(e,t,n,r,i,o){const c=r+1*a.stepSizeX,p=r+a.yd*a.stepSizeY,g=r+a.zd*a.stepSizeZ,v=c+a.yd*a.stepSizeY,y=c+a.zd*a.stepSizeZ,b=r+a.yd*a.stepSizeY+a.zd*a.stepSizeZ,x=c+a.yd*a.stepSizeY+a.zd*a.stepSizeZ;let _=0;const w=a.field[r],S=a.field[c],E=a.field[p],C=a.field[v],M=a.field[g],T=a.field[y],A=a.field[b],P=a.field[x];w<i&&(_|=1),S<i&&(_|=2),E<i&&(_|=8),C<i&&(_|=4),M<i&&(_|=16),T<i&&(_|=32),A<i&&(_|=128),P<i&&(_|=64);const R=n_[_];if(0===R)return 0;const I=e+a.deltaX*a.stepSizeX,O=t+a.deltaY*a.stepSizeY,k=n+a.deltaZ*a.stepSizeZ;1&R&&(f(r),f(c),u(3*r,0,i,e,t,n,w,S)),2&R&&(f(c),f(v),h(3*c,3,i,I,t,n,S,C)),4&R&&(f(p),f(v),u(3*p,6,i,e,O,n,E,C)),8&R&&(f(r),f(p),h(3*r,9,i,e,t,n,w,E)),16&R&&(f(g),f(y),u(3*g,12,i,e,t,k,M,T)),32&R&&(f(y),f(x),h(3*y,15,i,I,t,k,T,P)),64&R&&(f(b),f(x),u(3*b,18,i,e,O,k,A,P)),128&R&&(f(g),f(b),h(3*g,21,i,e,t,k,M,A)),256&R&&(f(r),f(g),d(3*r,24,i,e,t,n,w,M)),512&R&&(f(c),f(y),d(3*c,27,i,I,t,n,S,T)),1024&R&&(f(v),f(x),d(3*v,30,i,I,O,n,C,P)),2048&R&&(f(p),f(b),d(3*p,33,i,e,O,n,E,A)),_<<=4;let L,N,D,z=0,U=0;for(;-1!=r_[_+U];)L=_+U,N=L+1,D=L+2,m(s,l,3*r_[L],3*r_[N],3*r_[D],o),U+=3,z++;return z}function m(e,t,n,r,i,o){const s=3*a.count;if(a.positionArray[s+0]=e[n],a.positionArray[s+1]=e[n+1],a.positionArray[s+2]=e[n+2],a.positionArray[s+3]=e[r],a.positionArray[s+4]=e[r+1],a.positionArray[s+5]=e[r+2],a.positionArray[s+6]=e[i],a.positionArray[s+7]=e[i+1],a.positionArray[s+8]=e[i+2],a.enableNormals&&(a.normalArray[s+0]=t[n],a.normalArray[s+1]=t[n+1],a.normalArray[s+2]=t[n+2],a.normalArray[s+3]=t[r],a.normalArray[s+4]=t[r+1],a.normalArray[s+5]=t[r+2],a.normalArray[s+6]=t[i],a.normalArray[s+7]=t[i+1],a.normalArray[s+8]=t[i+2]),a.enableUvs){const t=2*a.count;a.uvArray[t+0]=e[n],a.uvArray[t+1]=e[n+2],a.uvArray[t+2]=e[r],a.uvArray[t+3]=e[r+2],a.uvArray[t+4]=e[i],a.uvArray[t+5]=e[i+2]}a.enableColors&&(a.colorArray[s+0]=e[n],a.colorArray[s+1]=e[n+1],a.colorArray[s+2]=e[n+2],a.colorArray[s+3]=e[r],a.colorArray[s+4]=e[r+1],a.colorArray[s+5]=e[r+2],a.colorArray[s+6]=e[i],a.colorArray[s+7]=e[i+1],a.colorArray[s+8]=e[i+2]),a.count+=3,a.count>=a.maxCount-3&&(a.hasPositions=!0,a.enableNormals&&(a.hasNormals=!0),a.enableUvs&&(a.hasUvs=!0),a.enableColors&&(a.hasColors=!0),o(a))}this.enableUvs=!!n,this.enableColors=!!r,this.enableNormals=!!i,this.dirty=!0,this.resolution=[0,0,0],this.stepSizeX=0,this.stepSizeY=0,this.stepSizeZ=0,this.sizeX=0,this.sizeY=0,this.sizeZ=0,this.sizeXY=0,this.sizeXYZ=0,this.size3=0,this.halfsizeX=0,this.halfsizeY=0,this.halfsizeZ=0,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.yd=0,this.zd=0,this.field=new Uint8Array,this.normal_cache=new Float32Array,this.positionArray=new Float32Array,this.normalArray=new Float32Array,this.uvArray=new Float32Array,this.colorArray=new Float32Array,this.init=function(e,t){this.dirty=!0,this.resolution=e,this.isovalue=.05,this.stepSizeX=1,this.stepSizeY=1,this.stepSizeZ=1,this.sizeX=e[0],this.sizeY=e[1],this.sizeZ=e[2],this.sizeXY=this.sizeX*this.sizeY,this.sizeXYZ=this.sizeXY*this.sizeZ,this.size3=this.sizeXYZ,this.halfsizeX=this.sizeX/2,this.halfsizeY=this.sizeY/2,this.halfsizeZ=this.sizeZ/2,this.deltaX=2/this.sizeX,this.deltaY=2/this.sizeY,this.deltaZ=2/this.sizeZ,this.yd=this.sizeX,this.zd=this.sizeXY,this.field=t||new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.maxCount=16384,this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=new Float32Array(3*this.maxCount),this.enableNormals&&(this.normalArray=new Float32Array(3*this.maxCount)),this.enableUvs&&(this.uvArray=new Float32Array(2*this.maxCount)),this.enableColors&&(this.colorArray=new Float32Array(3*this.maxCount))},this.begin=function(){this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasUvs=!1,this.hasColors=!1},this.end=function(e){if(0!==this.count){for(let e=3*this.count;e<this.positionArray.length;e++)this.positionArray[e]=0;this.hasPositions=!0,this.enableNormals&&(this.hasNormals=!0),this.enableUvs&&(this.hasUvs=!0),this.enableColors&&(this.hasColors=!0),e(this)}},this.reset=function(){var e;for(e=0;e<this.size3;e++)this.normal_cache[3*e]=0,this.field[e]=0},this.render=function(e){if(!this.dirty)return void this.end(e);this.begin();const t=this.sizeX-2,n=this.sizeY-2,r=this.sizeZ-2;for(let i=1;i<r;i+=this.stepSizeZ){const r=this.sizeXY*i,o=(i-this.halfsizeZ)/this.halfsizeZ;for(let i=1;i<n;i+=this.stepSizeY){const n=r+this.sizeX*i,a=(i-this.halfsizeY)/this.halfsizeY;for(let r=1;r<t;r+=this.stepSizeX)p((r-this.halfsizeX)/this.halfsizeX,a,o,n+r,this.isovalue,e)}}this.end(e)},this.generateGeometry=function(){if(!this.dirty)return;let e=0;const t=[];return this.render((function(n){const r=new Rm;r.setAttribute("position",new bm(n.positionArray.slice(),3)),n.enableNormals&&r.setAttribute("normal",new bm(n.normalArray.slice(),3));const i=new Uint16Array(n.count),o=n.count/3;for(let e=0;e<o;e++){const t=3*e,n=t+1,r=t+2;i[3*e+0]=t,i[3*e+1]=n,i[3*e+2]=r}r.setIndex(new bm(i,1)),t.push(r),e+=o,n.count=0})),this.dirty=!1,t},this.init(e,o)}},o_=.95;class a_{constructor(e){this.volume=e,this.meshRoot=new qp,this.meshRoot.name="Mesh Surface Group",this.meshPivot=new Tg,this.meshPivot.name="MeshContainerNode",this.meshPivot.add(this.meshRoot),this.meshrep=[],this.channelColors=[],this.channelOpacities=[],this.scale=new Hf(1,1,1),this.bounds={bmin:new Hf(-.5,-.5,-.5),bmax:new Hf(.5,.5,.5)}}cleanup(){for(let e=0;e<this.volume.imageInfo.numChannels;++e)this.destroyIsosurface(e)}setVisible(e){this.meshRoot.visible=e}doRender(){}get3dObject(){return this.meshPivot}setScale(e,t=new Hf(0,0,0)){this.scale=e,this.meshRoot.scale.copy(e).multiplyScalar(.5),this.meshRoot.position.copy(t)}setFlipAxes(e,t,n){this.meshRoot.scale.copy(new Hf(.5*this.scale.x*e,.5*this.scale.y*t,.5*this.scale.z*n))}setTranslation(e){this.meshPivot.position.copy(e)}setRotation(e){this.meshPivot.rotation.copy(e),this.updateClipFromBounds()}setResolution(e,t){}setOrthoThickness(e){}setAxisClip(e,t,n,r){this.bounds.bmax[e]=n,this.bounds.bmin[e]=t,this.updateClipFromBounds()}updateMeshColors(e){this.channelColors=e;for(let t=0;t<this.volume.imageInfo.numChannels;++t){const n=this.meshrep[t];if(n){const r=e[t],i=r[0]<<16|r[1]<<8|r[2];n.traverse((function(e){e instanceof Vm&&(e.material.color=new dm(i))}))}}}createMaterialForChannel(e,t,n){const r=e[0]<<16|e[1]<<8|e[2];return new Ig({color:new dm(r),shininess:1e3,specular:new dm(65793),opacity:t,transparent:t<o_,side:2})}createMeshForChannel(e,t,n,r,i){const o=this.generateIsosurfaceGeometry(e,n),a=this.createMaterialForChannel(t,r,i),s=new Tg;s.name="Channel"+e,s.userData={isovalue:n};for(let e=0;e<o.length;++e){const t=new Vm(o[e],a);t.layers.set(1),s.add(t)}return s}updateIsovalue(e,t){const n=this.meshrep[e];if(!n)return;if(n.userData.isovalue===t)return;const r=this.channelOpacities[e],i=this.channelColors[e];this.destroyIsosurface(e);const o=this.createMeshForChannel(e,i,t,r,!1);this.meshrep[e]=o,this.meshRoot.add(o)}getIsovalue(e){const t=this.meshrep[e];return t?.userData.isovalue}getOpacity(e){const t=this.meshrep[e];let n;return t?.traverse((e=>{e instanceof Vm&&(n=e.material.opacity)})),n}updateClipRegion(e,t,n,r,i,o){this.bounds={bmin:new Hf(e-.5,n-.5,i-.5),bmax:new Hf(t-.5,r-.5,o-.5)},this.updateClipFromBounds()}updateClipFromBounds(){const e=this.bounds.bmin.x,t=this.bounds.bmin.y,n=this.bounds.bmin.z,r=this.bounds.bmax.x,i=this.bounds.bmax.y,o=this.bounds.bmax.z,a=this.meshPivot.rotation;for(let s=0;s<this.meshrep.length;++s){const l=this.meshrep[s];if(!l)continue;const c=[];e>-.5&&c.push(new ug(new Hf(1,0,0).applyEuler(a),this.meshRoot.position.x+-e*this.scale.x)),t>-.5&&c.push(new ug(new Hf(0,1,0).applyEuler(a),this.meshRoot.position.y+-t*this.scale.y)),n>-.5&&c.push(new ug(new Hf(0,0,1).applyEuler(a),this.meshRoot.position.z+-n*this.scale.z)),r<.5&&c.push(new ug(new Hf(-1,0,0).applyEuler(a),this.meshRoot.position.x+r*this.scale.x)),i<.5&&c.push(new ug(new Hf(0,-1,0).applyEuler(a),this.meshRoot.position.y+i*this.scale.y)),o<.5&&c.push(new ug(new Hf(0,0,-1).applyEuler(a),this.meshRoot.position.z+o*this.scale.z)),l.traverse((function(e){e instanceof Vm&&(e.material.clippingPlanes=c)}))}}updateOpacity(e,t){this.channelOpacities[e]=t;const n=this.meshrep[e];n&&n.traverse((function(e){e instanceof Vm&&(e.material.opacity=t,e.material.transparent=t<o_)}))}hasIsosurface(e){return!!this.meshrep[e]}createIsosurface(e,t,n=127,r=1,i=r<o_){if(!this.meshrep[e]){const o=this.createMeshForChannel(e,t,n,r,i);this.meshrep[e]=o,this.channelOpacities[e]=r,this.channelColors[e]=t,this.meshRoot.add(o)}}destroyIsosurface(e){const t=this.meshrep[e];t&&(this.meshRoot.remove(t),t.traverse((function(e){e instanceof Vm&&(e.material.dispose(),e.geometry.dispose())})),this.meshrep[e]=null)}saveChannelIsosurface(e,t,n){const r=this.meshrep[e];if(r)if("STL"===t)this.exportSTL(r,n+"_"+this.volume.channelNames[e]);else if("GLTF"===t){const t=[];for(let n=0;n<this.meshrep.length;++n){const r=this.meshrep[n];r&&(t[n]=r.visible,r.visible=n===e)}this.exportGLTF(this.meshRoot,n+"_"+this.volume.channelNames[e]);for(let e=0;e<this.meshrep.length;++e){const n=this.meshrep[e];n&&(n.visible=t[e])}}}exportSTL(e,t){const n=(new Sx).parse(e,{binary:!0});t_.saveBinary(n.buffer,t+".stl")}exportGLTF(e,t){(new Cx).parse(e,(function(e){if(e instanceof ArrayBuffer)t_.saveArrayBuffer(e,t+".glb");else{const n=JSON.stringify(e,null,2);t_.saveString(n,t+".gltf")}}),(function(e){console.error(e)}),{trs:!1,onlyVisible:!0,truncateDrawRange:!0,binary:!0,forceIndices:!1,forcePowerOfTwoTextures:!0})}generateIsosurfaceGeometry(e,t){if(!this.volume)return[];const n=this.volume.channels[e].volumeData,r=this.volume.imageInfo.subregionSize.toArray();{const e=new i_(r,new mm,!1,!1,!0,n);return e.position.copy(this.meshRoot.position),e.scale.set(.5*this.scale.x,.5*this.scale.y,.5*this.scale.z),e.isovalue=t,e.generateGeometry()||[]}}}class s_{constructor(e,t){this.width=e,this.height=t,this.maskTexture=new ag(new Uint8ClampedArray(this.width*this.height).fill(255),this.width,this.height,rd,Vh),this.maskTexture.generateMipmaps=!1,this.maskTexture.magFilter=Fh,this.maskTexture.minFilter=Fh,this.maskTexture.wrapS=Lh,this.maskTexture.wrapT=Lh,this.maskTexture.unpackAlignment=1,this.fuseRequested=null,this.channelsDataToFuse=[],this.fuseScene=new og,this.quadCamera=new Zg(-1,1,1,-1,0,1),this.fuseRenderTarget=new Bf(this.width,this.height,{minFilter:Fh,magFilter:Fh,format:Qh,type:Vh,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,wrapS:Lh,wrapT:Lh}),this.fuseMaterialProps={vertexShader:yx,depthTest:!1,depthWrite:!1,blending:5,blendSrc:201,blendDst:201,blendEquation:104},this.fuseMaterialF=this.setupFuseMaterial("precision highp float;\nprecision highp int;\nprecision highp sampler2D;\nprecision highp sampler3D;\n\n// the lut texture is a 256x1 rgba texture for each channel\nuniform sampler2D lutSampler;\n\nuniform vec2 lutMinMax;\n\n// src texture is the raw volume intensity data\nuniform sampler2D srcTexture;\n\nvoid main()\n{\n    ivec2 vUv = ivec2(int(gl_FragCoord.x), int(gl_FragCoord.y));\n\n    // load from channel\n    float intensity = texelFetch(srcTexture, vUv, 0).r;\n\n    float ilookup = float(float(intensity) - lutMinMax.x) / float(lutMinMax.y - lutMinMax.x);\n    // apply lut to intensity:\n    vec4 pix = texture(lutSampler, vec2(ilookup, 0.5));\n    gl_FragColor = vec4(pix.xyz*pix.w, pix.w);\n}\n"),this.fuseMaterialUI=this.setupFuseMaterial("precision highp float;\nprecision highp int;\nprecision highp usampler2D;\nprecision highp sampler3D;\n\n// the lut texture is a 256x1 rgba texture for each channel\nuniform sampler2D lutSampler;\n\nuniform vec2 lutMinMax;\n\n// src texture is the raw volume intensity data\nuniform usampler2D srcTexture;\n\nvoid main()\n{\n    ivec2 vUv = ivec2(int(gl_FragCoord.x), int(gl_FragCoord.y));\n    uint intensity = texelFetch(srcTexture, vUv, 0).r;\n    float ilookup = float(float(intensity) - lutMinMax.x) / float(lutMinMax.y - lutMinMax.x);\n    // apply lut to intensity:\n    vec4 pix = texture(lutSampler, vec2(ilookup, 0.5));\n    gl_FragColor = vec4(pix.xyz*pix.w, pix.w);\n}\n"),this.fuseMaterialI=this.setupFuseMaterial("precision highp float;\nprecision highp int;\nprecision highp sampler2D;\nprecision highp sampler3D;\n\n// the lut texture is a 256x1 rgba texture for each channel\nuniform sampler2D lutSampler;\n\nuniform vec2 lutMinMax;\n\n// src texture is the raw volume intensity data\nuniform isampler2D srcTexture;\n\nvoid main()\n{\n    ivec2 vUv = ivec2(int(gl_FragCoord.x), int(gl_FragCoord.y));\n    int intensity = texelFetch(srcTexture, vUv, 0).r;\n    float ilookup = float(float(intensity) - lutMinMax.x) / float(lutMinMax.y - lutMinMax.x);\n    // apply lut to intensity:\n    vec4 pix = texture(lutSampler, vec2(ilookup, 0.5));\n    gl_FragColor = vec4(pix.xyz*pix.w, pix.w);\n}\n"),this.fuseMaterialF.needsUpdate=!0,this.fuseMaterialUI.needsUpdate=!0,this.fuseMaterialI.needsUpdate=!0,this.fuseGeometry=new Rg(2,2)}setupFuseMaterial(e){return new Ym({uniforms:{lutSampler:{value:null},lutMinMax:{value:new vf(0,255)},srcTexture:{value:null}},fragmentShader:e,...this.fuseMaterialProps})}getFusedTexture(){return this.fuseRenderTarget.texture}cleanup(){this.fuseScene.clear(),this.maskTexture.dispose()}getShader(e){switch(e){case"float32":return this.fuseMaterialF;case"uint8":case"uint16":case"uint32":return this.fuseMaterialUI;case"int8":case"int16":case"int32":return this.fuseMaterialI;default:throw new Error("Unsupported data type for fuse shader")}}fuse(e,t){let n=!1;for(let r=0;r<e.length;++r){const i=e[r],o=i.chIndex;t[o].loaded&&(i.lut=t[o].combineLuts(i.rgbColor,i.lut),n=!0)}if(!n)return this.channelsDataToFuse=[],void(this.fuseRequested=[]);this.fuseRequested=e,this.channelsDataToFuse=t}gpuFuse(e){const t=this.fuseRequested,n=this.channelsDataToFuse;if(t){this.fuseScene.traverse((e=>{e instanceof Vm&&e.material.dispose()})),this.fuseScene.clear();for(let e=0;e<t.length;++e)if(t[e].rgbColor){const r=t[e].chIndex;if(!n[r].loaded)continue;const i=this.getShader(n[r].dtype).clone();i.uniforms.lutSampler.value=n[r].lutTexture,i.uniforms.lutMinMax.value=new vf(n[r].rawMin,n[r].rawMax),i.uniforms.srcTexture.value=n[r].dataTexture,this.fuseScene.add(new Vm(this.fuseGeometry,i))}if(this.fuseScene.children.length>0){e.setRenderTarget(this.fuseRenderTarget),e.autoClearColor=!0;const t=new dm;e.getClearColor(t);const n=e.getClearAlpha();e.setClearColor(0,0),e.render(this.fuseScene,this.quadCamera),e.setRenderTarget(null),e.setClearColor(t,n)}this.fuseRequested=null}}setChannelAsMask(e,t){if(!t||!t.loaded)return!1;const n=new Uint8ClampedArray(t.imgData.data.length);for(let e=0;e<t.imgData.data.length;e++)n[e]=t.imgData.data[e]>0?255:0;const r={data:n,width:this.width,height:this.height,colorSpace:"srgb"};return this.maskTexture.image=r,this.maskTexture.needsUpdate=!0,!0}}const l_=new dm(16776960);class c_{constructor(e,t=new ax(e)){this.volume=e,this.uniforms={iResolution:{type:"v2",value:new vf(100,100)},CLIP_NEAR:{type:"f",value:.1},CLIP_FAR:{type:"f",value:20},maskAlpha:{type:"f",value:1},BRIGHTNESS:{type:"f",value:0},DENSITY:{type:"f",value:1},GAMMA_MIN:{type:"f",value:0},GAMMA_MAX:{type:"f",value:1},GAMMA_SCALE:{type:"f",value:1},BREAK_STEPS:{type:"i",value:128},ATLAS_DIMS:{type:"v2",value:new vf(6,6)},SLICES:{type:"f",value:50},isOrtho:{type:"f",value:0},orthoThickness:{type:"f",value:1},orthoScale:{type:"f",value:.5},AABB_CLIP_MIN:{type:"v3",value:new Hf(-.5,-.5,-.5)},AABB_CLIP_MAX:{type:"v3",value:new Hf(.5,.5,.5)},inverseModelViewMatrix:{type:"m4",value:new xp},inverseProjMatrix:{type:"m4",value:new xp},textureAtlas:{type:"t",value:new zf},textureAtlasMask:{type:"t",value:new zf},textureDepth:{type:"t",value:new zf},usingPositionTexture:{type:"i",value:0},maxProject:{type:"i",value:0},interpolationEnabled:{type:"b",value:!0},flipVolume:{type:"v3",value:new Hf(1,1,1)},volumeScale:{type:"v3",value:new Hf(1,1,1)},textureRes:{type:"v2",value:new vf(1,1)}},[this.geometry,this.geometryMesh]=this.createGeometry(this.uniforms),this.boxHelper=new cv(new qf(new Hf(-.5,-.5,-.5),new Hf(.5,.5,.5)),l_),this.boxHelper.updateMatrixWorld(),this.boxHelper.visible=!1,this.tickMarksMesh=this.createTickMarks(),this.tickMarksMesh.updateMatrixWorld(),this.tickMarksMesh.visible=!1,this.geometryTransformNode=new Tg,this.geometryTransformNode.name="VolumeContainerNode",this.geometryTransformNode.add(this.boxHelper,this.tickMarksMesh,this.geometryMesh),this.emptyPositionTex=new ag(new Uint8Array(Array(16).fill(0)),2,2),this.settings=t,this.updateSettings(t,ix.ALL),this.updateVolumeDimensions()}updateVolumeDimensions(){const{normPhysicalSize:e,normRegionSize:t}=this.volume;this.geometryMesh.position.copy(this.volume.getContentCenter().multiply(this.settings.scale));const n=e.clone().multiply(this.settings.scale);this.geometryMesh.scale.copy(n).multiply(t),this.setUniform("volumeScale",e),this.boxHelper.box.set(n.clone().multiplyScalar(-.5),n.clone().multiplyScalar(.5)),this.tickMarksMesh.scale.copy(n),this.settings&&this.updateSettings(this.settings,ix.ROI);const{atlasTileDims:r,subregionSize:i}=this.volume.imageInfo,o=new vf(i.x,i.y).multiply(r);this.setUniform("ATLAS_DIMS",r),this.setUniform("textureRes",o),this.setUniform("SLICES",this.volume.imageInfo.volumeSize.z),this.channelData&&this.channelData.width===o.x&&this.channelData.height===o.y||(this.channelData?.cleanup(),this.channelData=new s_(o.x,o.y))}viewpointMoved(){}updateSettings(e,t){if(void 0===t&&(t=ix.ALL),this.settings=e,t&ix.VIEW){this.geometryMesh.visible=this.settings.visible,this.setUniform("orthoScale",this.settings.orthoScale),this.setUniform("isOrtho",this.settings.isOrtho?1:0);const e=this.settings.viewAxis;if(this.settings.isOrtho&&e){const t=this.settings.bounds.bmax[e]-this.settings.bounds.bmin[e];this.setUniform("orthoThickness",t)}else this.setUniform("orthoThickness",1)}if((t&ix.VIEW||t&ix.BOUNDING_BOX)&&(this.tickMarksMesh.visible=this.settings.showBoundingBox&&!this.settings.isOrtho,this.setUniform("maxProject",this.settings.maxProjectMode?1:0)),t&ix.BOUNDING_BOX){this.boxHelper.visible=this.settings.showBoundingBox;const e=this.settings.boundingBoxColor,t=new dm(e[0],e[1],e[2]);this.boxHelper.material.color=t,this.tickMarksMesh.material.color=t}if(t&ix.TRANSFORM&&(this.geometryTransformNode.position.copy(this.settings.translation),this.geometryTransformNode.rotation.copy(this.settings.rotation),this.updateVolumeDimensions(),this.setUniform("flipVolume",this.settings.flipAxes)),t&ix.MATERIAL&&this.setUniform("DENSITY",this.settings.density),t&ix.CAMERA&&(this.setUniform("BRIGHTNESS",2*this.settings.brightness),this.setUniform("GAMMA_MIN",this.settings.gammaMin),this.setUniform("GAMMA_MAX",this.settings.gammaMax),this.setUniform("GAMMA_SCALE",this.settings.gammaLevel)),t&ix.ROI){const e=this.settings.bounds,{normRegionSize:t,normRegionOffset:n}=this.volume,r=t.clone().divideScalar(2).add(n).subScalar(.5),i=e.bmin.clone().sub(r).divide(t).clampScalar(-.5,.5),o=e.bmax.clone().sub(r).divide(t).clampScalar(-.5,.5);this.setUniform("AABB_CLIP_MIN",i),this.setUniform("AABB_CLIP_MAX",o)}t&ix.SAMPLING&&(this.setUniform("interpolationEnabled",this.settings.useInterpolation),this.setUniform("iResolution",this.settings.resolution)),t&ix.MASK_ALPHA&&this.setUniform("maskAlpha",this.settings.maskChannelIndex<0?1:this.settings.maskAlpha),t&ix.MASK_DATA&&this.channelData.setChannelAsMask(this.settings.maskChannelIndex,this.volume.getChannel(this.settings.maskChannelIndex))}createGeometry(e){const t=new Hm(1,1,1),n=new Vm(t);n.name="Volume";const r=new Ym({uniforms:e,vertexShader:"// switch on high precision floats\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 pObj;\n\nvoid main() {\n  pObj = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define M_PI 3.14159265358979323846\n\nuniform vec2 iResolution;\nuniform vec2 textureRes;\nuniform float GAMMA_MIN;\nuniform float GAMMA_MAX;\nuniform float GAMMA_SCALE;\nuniform float BRIGHTNESS;\nuniform float DENSITY;\nuniform float maskAlpha;\nuniform vec2 ATLAS_DIMS;\nuniform vec3 AABB_CLIP_MIN;\nuniform float CLIP_NEAR;\nuniform vec3 AABB_CLIP_MAX;\nuniform float CLIP_FAR;\nuniform sampler2D textureAtlas;\nuniform sampler2D textureAtlasMask;\nuniform sampler2D textureDepth;\nuniform int usingPositionTexture;\nuniform int BREAK_STEPS;\nuniform float SLICES;\nuniform float isOrtho;\nuniform float orthoThickness;\nuniform float orthoScale;\nuniform int maxProject;\nuniform bool interpolationEnabled;\nuniform vec3 flipVolume;\nuniform vec3 volumeScale;\n\n// view space to axis-aligned volume box\nuniform mat4 inverseModelViewMatrix;\nuniform mat4 inverseProjMatrix;\n\nvarying vec3 pObj;\n\nfloat powf(float a, float b) {\n  return pow(a,b);\n}\n\nfloat rand(vec2 co) {\n  float threadId = gl_FragCoord.x/(gl_FragCoord.y + 1.0);\n  float bigVal = threadId*1299721.0/911.0;\n  vec2 smallVal = vec2(threadId*7927.0/577.0, threadId*104743.0/1039.0);\n  return fract(sin(dot(co, smallVal)) * bigVal);\n}\n\nvec4 luma2Alpha(vec4 color, float vmin, float vmax, float C) {\n  float x = dot(color.rgb, vec3(0.2125, 0.7154, 0.0721));\n  // float x = max(color[2], max(color[0],color[1]));\n  float xi = (x-vmin)/(vmax-vmin);\n  xi = clamp(xi,0.0,1.0);\n  float y = pow(xi,C);\n  y = clamp(y,0.0,1.0);\n  color[3] = y;\n  return color;\n}\n\nvec2 offsetFrontBack(float t) {\n  int a = int(t);\n  int ax = int(ATLAS_DIMS.x);\n  vec2 os = vec2(float(a - (a / ax) * ax), float(a / ax)) / ATLAS_DIMS;\n  return clamp(os, vec2(0.0), vec2(1.0) - vec2(1.0) / ATLAS_DIMS);\n}\n\nvec4 sampleAtlasLinear(sampler2D tex, vec4 pos) {\n  float bounds = float(pos[0] >= 0.0 && pos[0] <= 1.0 &&\n                       pos[1] >= 0.0 && pos[1] <= 1.0 &&\n                       pos[2] >= 0.0 && pos[2] <= 1.0 );\n  float nSlices = float(SLICES);\n  // get location within atlas tile\n  // TODO: get loc1 which follows ray to next slice along ray direction\n  // when flipvolume = 1:  pos\n  // when flipvolume = -1: 1-pos\n  vec2 loc0 = ((pos.xy - 0.5) * flipVolume.xy + 0.5) / ATLAS_DIMS;\n\n  // loc ranges from 0 to 1/ATLAS_DIMS\n  // shrink loc0 to within one half edge texel - so as not to sample across edges of tiles.\n  loc0 = vec2(0.5) / textureRes + loc0 * (vec2(1.0) - ATLAS_DIMS / textureRes);\n  \n  // interpolate between two slices\n  float z = (pos.z)*(nSlices-1.0);\n  float z0 = floor(z);\n  float t = z-z0; //mod(z, 1.0);\n  float z1 = min(z0+1.0, nSlices-1.0);\n\n  // flipped:\n  if (flipVolume.z == -1.0) {\n    z0 = nSlices - z0 - 1.0;\n    z1 = nSlices - z1 - 1.0;\n    t = 1.0 - t;\n  }\n\n  // get slice offsets in texture atlas\n  vec2 o0 = offsetFrontBack(z0) + loc0;\n  vec2 o1 = offsetFrontBack(z1) + loc0;\n\n  vec4 slice0Color = texture2D(tex, o0);\n  vec4 slice1Color = texture2D(tex, o1);\n  // NOTE we could premultiply the mask in the fuse function,\n  // but that is slower to update the maskAlpha value than here in the shader.\n  // it is a memory vs perf tradeoff.  Do users really need to update the maskAlpha at realtime speed?\n  float slice0Mask = texture2D(textureAtlasMask, o0).x;\n  float slice1Mask = texture2D(textureAtlasMask, o1).x;\n  // or use max for conservative 0 or 1 masking?\n  float maskVal = mix(slice0Mask, slice1Mask, t);\n  // take mask from 0..1 to alpha..1\n  maskVal = mix(maskVal, 1.0, maskAlpha);\n  vec4 retval = mix(slice0Color, slice1Color, t);\n  // only mask the rgb, not the alpha(?)\n  retval.rgb *= maskVal;\n  return bounds*retval;\n}\n\nvec4 sampleAtlasNearest(sampler2D tex, vec4 pos) {\n  float bounds = float(pos[0] >= 0.0 && pos[0] <= 1.0 &&\n                       pos[1] >= 0.0 && pos[1] <= 1.0 &&\n                       pos[2] >= 0.0 && pos[2] <= 1.0 );\n  float nSlices = float(SLICES);\n\n  vec2 loc0 = ((pos.xy - 0.5) * flipVolume.xy + 0.5) / ATLAS_DIMS;\n\n  // No interpolation - sample just one slice at a pixel center.\n  // Ideally this would be accomplished in part by switching this texture to linear\n  //   filtering, but three makes this difficult to do through a WebGLRenderTarget.\n  loc0 = floor(loc0 * textureRes) / textureRes;\n  loc0 += vec2(0.5) / textureRes;\n\n  float z = min(floor(pos.z * nSlices), nSlices-1.0);\n  \n  if (flipVolume.z == -1.0) {\n    z = nSlices - z - 1.0;\n  }\n\n  vec2 o = offsetFrontBack(z) + loc0;\n  vec4 voxelColor = texture2D(tex, o);\n\n  // Apply mask\n  float voxelMask = texture2D(textureAtlasMask, o).x;\n  voxelMask = mix(voxelMask, 1.0, maskAlpha);\n  voxelColor.rgb *= voxelMask;\n\n  return bounds*voxelColor;\n}\n\nbool intersectBox(in vec3 r_o, in vec3 r_d, in vec3 boxMin, in vec3 boxMax,\n                  out float tnear, out float tfar) {\n  // compute intersection of ray with all six bbox planes\n  vec3 invR = vec3(1.0,1.0,1.0) / r_d;\n  vec3 tbot = invR * (boxMin - r_o);\n  vec3 ttop = invR * (boxMax - r_o);\n\n  // re-order intersections to find smallest and largest on each axis\n  vec3 tmin = min(ttop, tbot);\n  vec3 tmax = max(ttop, tbot);\n\n  // find the largest tmin and the smallest tmax\n  float largest_tmin  = max(max(tmin.x, tmin.y), max(tmin.x, tmin.z));\n  float smallest_tmax = min(min(tmax.x, tmax.y), min(tmax.x, tmax.z));\n\n  tnear = largest_tmin;\n  tfar = smallest_tmax;\n\n  // use >= here?\n  return(smallest_tmax > largest_tmin);\n}\n\nvec4 accumulate(vec4 col, float s, vec4 C) {\n  float stepScale = (1.0 - powf((1.0-col.w),s));\n  col.w = stepScale;\n  col.xyz *= col.w;\n  col = clamp(col,0.0,1.0);\n\n  C = (1.0-C.w)*col + C;\n  return C;\n}\n\nvec4 integrateVolume(vec4 eye_o,vec4 eye_d,\n                     float tnear,   float tfar,\n                     float clipNear, float clipFar,\n                     sampler2D textureAtlas\n                     ) {\n  vec4 C = vec4(0.0);\n  // march along ray from front to back, accumulating color\n\n  // estimate step length\n  const int maxSteps = 512;\n  // modify the 3 components of eye_d by volume scale\n  float scaledSteps = float(BREAK_STEPS) * length((eye_d.xyz/volumeScale));\n  float csteps = clamp(float(scaledSteps), 1.0, float(maxSteps));\n  float invstep = (tfar-tnear)/csteps;\n  // special-casing the single slice to remove the random ray dither.\n  // this removes a Moire pattern visible in single slice images, which we want to view as 2D images as best we can.\n  float r = (SLICES==1.0) ? 0.0 : rand(eye_d.xy);\n  // if ortho and clipped, make step size smaller so we still get same number of steps\n  float tstep = invstep*orthoThickness;\n  float tfarsurf = r*tstep;\n  float overflow = mod((tfarsurf - tfar),tstep); // random dithering offset\n  float t = tnear + overflow;\n  t += r*tstep; // random dithering offset\n  float tdist = 0.0;\n  int numSteps = 0;\n  vec4 pos, col;\n  // We need to be able to scale the alpha contrib with number of ray steps,\n  // in order to make the final color invariant to the step size(?)\n  // use maxSteps (a constant) as the numerator... Not sure if this is sound.\n  float s = 0.5 * float(maxSteps) / csteps;\n  for (int i = 0; i < maxSteps; i++) {\n    pos = eye_o + eye_d*t;\n    // !!! assume box bounds are -0.5 .. 0.5.  pos = (pos-min)/(max-min)\n    // scaling is handled by model transform and already accounted for before we get here.\n    // AABB clip is independent of this and is only used to determine tnear and tfar.\n    pos.xyz = (pos.xyz-(-0.5))/((0.5)-(-0.5)); //0.5 * (pos + 1.0); // map position from [boxMin, boxMax] to [0, 1] coordinates\n\n    vec4 col = interpolationEnabled ? sampleAtlasLinear(textureAtlas, pos) : sampleAtlasNearest(textureAtlas, pos);\n\n    if (maxProject != 0) {\n      col.xyz *= BRIGHTNESS;\n      C = max(col, C);\n    } else {\n      col = luma2Alpha(col, GAMMA_MIN, GAMMA_MAX, GAMMA_SCALE);\n      col.xyz *= BRIGHTNESS;\n      // for practical use the density only matters for regular volume integration\n      col.w *= DENSITY;\n      C = accumulate(col, s, C);\n    }\n    t += tstep;\n    numSteps = i;\n\n    if (t > tfar || t > tnear+clipFar ) break;\n    if (C.w > 1.0 ) break;\n  }\n\n  return C;\n}\n\nvoid main() {\n  gl_FragColor = vec4(0.0);\n  vec2 vUv = gl_FragCoord.xy/iResolution.xy;\n\n  vec3 eyeRay_o, eyeRay_d;\n\n  if (isOrtho == 0.0) {\n    // for perspective rays:\n    // world space camera coordinates\n    // transform to object space\n    eyeRay_o = (inverseModelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;\n    eyeRay_d = normalize(pObj - eyeRay_o);\n  } else {\n    // for ortho rays:\n    float zDist = 2.0;\n    eyeRay_d = (inverseModelViewMatrix*vec4(0.0, 0.0, -zDist, 0.0)).xyz;\n    vec4 ray_o = vec4(2.0*vUv - 1.0, 1.0, 1.0);\n    ray_o.xy *= orthoScale;\n    ray_o.x *= iResolution.x/iResolution.y;\n    eyeRay_o = (inverseModelViewMatrix*ray_o).xyz;\n  }\n\n  // -0.5..0.5 is full box. AABB_CLIP lets us clip to a box shaped ROI to look at\n  // I am applying it here at the earliest point so that the ray march does\n  // not waste steps.  For general shaped ROI, this has to be handled more\n  // generally (obviously)\n  vec3 boxMin = AABB_CLIP_MIN;\n  vec3 boxMax = AABB_CLIP_MAX;\n\n  float tnear, tfar;\n  bool hit = intersectBox(eyeRay_o, eyeRay_d, boxMin, boxMax, tnear, tfar);\n\n  if (!hit) {\n    // return background color if ray misses the cube\n    // is this safe to do when there is other geometry / gObjects drawn?\n    gl_FragColor = vec4(0.0); //C1;//vec4(0.0);\n    return;\n  }\n\n  float clipNear = 0.0;//-(dot(eyeRay_o.xyz, eyeNorm) + dNear) / dot(eyeRay_d.xyz, eyeNorm);\n  float clipFar  = 10000.0;//-(dot(eyeRay_o.xyz,-eyeNorm) + dFar ) / dot(eyeRay_d.xyz,-eyeNorm);\n\n  // Sample the depth/position texture\n  // If this is a depth texture, the r component is a depth value. If this is a position texture,\n  // the xyz components are a view space position and w is 1.0 iff there's a mesh at this fragment.\n  vec4 meshPosSample = texture2D(textureDepth, vUv);\n  // Note: we make a different check for whether a mesh is present with depth vs. position textures.\n  // Here's the check for depth textures:\n  bool hasDepthValue = usingPositionTexture == 0 && meshPosSample.r < 1.0;\n\n  // If there's a depth-contributing mesh at this fragment, we may need to terminate the ray early\n  if (hasDepthValue || (usingPositionTexture == 1 && meshPosSample.a > 0.0)) {\n    if (hasDepthValue) {\n      // We're working with a depth value, so we need to convert back to view space position\n      // Get a projection space position from depth and uv, and unproject back to view space\n      vec4 meshProj = vec4(vUv * 2.0 - 1.0, meshPosSample.r * 2.0 - 1.0, 1.0);\n      vec4 meshView = inverseProjMatrix * meshProj;\n      meshPosSample = vec4(meshView.xyz / meshView.w, 1.0);\n    }\n    // Transform the mesh position to object space\n    vec4 meshObj = inverseModelViewMatrix * meshPosSample;\n\n    // Derive a t value for the mesh intersection\n    // NOTE: divides by 0 when `eyeRay_d.z` is 0. Could be mitigated by picking another component\n    //   to derive with when z is 0, but I found this was rare enough in practice to be acceptable.\n    float tMesh = (meshObj.z - eyeRay_o.z) / eyeRay_d.z;\n    if (tMesh < tfar) {\n      clipFar = tMesh - tnear;\n    }\n  }\n\n  vec4 C = integrateVolume(vec4(eyeRay_o,1.0), vec4(eyeRay_d,0.0),\n                          tnear,    tfar, //intersections of box\n                          clipNear, clipFar,\n                          textureAtlas);\n\n  C = clamp(C, 0.0, 1.0);\n  gl_FragColor = C;\n  return;\n}\n",transparent:!0,depthTest:!0,depthWrite:!1});return n.material=r,[t,n]}createTickMarks(){const{tickMarkPhysicalLength:e,physicalScale:t,normPhysicalSize:n}=this.volume,r=t/e,i=[],o=.025/n.y+.5,a=1/(n.x*r);for(let e=-.5;e<=.5;e+=a)i.push(e,.5,.5,e,o,.5,e,-.5,-.5,e,-o,-.5,e,.5,-.5,e,o,-.5,e,-.5,.5,e,-o,.5);const s=.025/n.x+.5,l=1/(n.y*r);for(let e=.5;e>=-.5;e-=l)i.push(-.5,e,.5,-s,e,.5,-.5,e,-.5,-s,e,-.5,.5,e,-.5,s,e,-.5,.5,e,.5,s,e,.5);const c=1/(n.z*r);for(let e=.5;e>=-.5;e-=c)i.push(-.5,.5,e,-s,.5,e,-.5,-.5,e,-s,-.5,e,.5,-.5,e,s,-.5,e,.5,.5,e,s,.5,e);const u=new Rm;return u.setAttribute("position",new bm(new Float32Array(i),3)),new Mg(u,new pg({color:l_}))}cleanup(){this.geometry.dispose(),this.geometryMesh.material.dispose(),this.channelData.cleanup()}doRender(e,t,n){if(!this.geometryMesh.visible)return;const r=n??this.emptyPositionTex;this.setUniform("textureDepth",r),this.setUniform("usingPositionTexture",r.isDepthTexture?0:1),this.setUniform("CLIP_NEAR",t.near),this.setUniform("CLIP_FAR",t.far),this.channelData.gpuFuse(e),this.setUniform("textureAtlas",this.channelData.getFusedTexture()),this.geometryTransformNode.updateMatrixWorld(!0);const i=new xp;i.multiplyMatrices(t.matrixWorldInverse,this.geometryMesh.matrixWorld),i.invert(),this.setUniform("inverseModelViewMatrix",i),this.setUniform("inverseProjMatrix",t.projectionMatrixInverse)}get3dObject(){return this.geometryTransformNode}setUniform(e,t){this.uniforms[e]&&(this.uniforms[e].value=t)}updateActiveChannels(e,t){this.channelData.fuse(e,t),this.setUniform("textureAtlas",this.channelData.getFusedTexture()),this.setUniform("textureAtlasMask",this.channelData.maskTexture)}setRenderUpdateListener(e){}}const u_=()=>({gInvExposure:{type:"f",value:4},gDenoiseWindowRadius:{type:"i",value:3},gDenoiseNoise:{type:"f",value:.05},gDenoiseInvWindowArea:{type:"f",value:1/49},gDenoiseWeightThreshold:{type:"f",value:.1},gDenoiseLerpThreshold:{type:"f",value:0},gDenoiseLerpC:{type:"f",value:.01},gDenoisePixelSize:{type:"v2",value:new vf(1,1)},tTexture0:{type:"t",value:null}});class h_{constructor(e){this.mTheta=14*Math.PI/180,this.mPhi=54*Math.PI/180,this.mWidth=1,this.mHeight=1,this.mHalfWidth=.5*this.mWidth,this.mHalfHeight=.5*this.mHeight,this.mDistance=4,this.mSkyRadius=1e3,this.mP=new Hf,this.mTarget=new Hf,this.mArea=1,this.mAreaPdf=1/this.mArea,this.mColor=new Hf(75,75,75),this.mColorTop=new Hf(.3,.3,.3),this.mColorMiddle=new Hf(.3,.3,.3),this.mColorBottom=new Hf(.3,.3,.3),this.mT=e,this.mN=new Hf(0,0,1),this.mU=new Hf(1,0,0),this.mV=new Hf(0,1,0),this.update(new Hf(0,0,0))}update(e,t){this.mHalfWidth=.5*this.mWidth,this.mHalfHeight=.5*this.mHeight,this.mTarget.copy(e),this.mP.x=this.mDistance*Math.sin(this.mPhi)*Math.sin(this.mTheta),this.mP.z=this.mDistance*Math.sin(this.mPhi)*Math.cos(this.mTheta),this.mP.y=this.mDistance*Math.cos(this.mPhi),this.mP.add(this.mTarget),t&&(this.mP.applyMatrix4(t),this.mTarget.applyMatrix4(t)),0===this.mT?(this.mArea=this.mWidth*this.mHeight,this.mAreaPdf=1/this.mArea):1===this.mT&&(this.mP.copy(e),this.mTarget.addVectors(this.mP,new Hf(0,0,1)),this.mSkyRadius=1e3*e.length()*2,this.mArea=4*Math.PI*Math.pow(this.mSkyRadius,2),this.mAreaPdf=1/this.mArea),this.mN.subVectors(this.mTarget,this.mP).normalize(),1===this.mN.y||-1===this.mN.y?this.mU.crossVectors(this.mN,new Hf(1,0,0)).normalize():this.mU.crossVectors(this.mN,new Hf(0,1,0)).normalize(),this.mV.crossVectors(this.mN,this.mU).normalize()}}const d_=[[255,0,255],[255,255,255],[0,255,255]],f_=(p_=123,function(){return(2147483647&(p_=0|Math.imul(48271,p_)))/2147483648});var p_;const m_=e=>(d_[e]||(d_[e]=function(e,t,n){let r,i,o,a=0;if(1===arguments.length){const r=e;t=r.s,n=r.v,a=r.h}else a=e;const s=Math.floor(6*a),l=6*a-s,c=n*(1-t),u=n*(1-l*t),h=n*(1-(1-l)*t);switch(s%6){case 0:r=n,i=h,o=c;break;case 1:r=u,i=n,o=c;break;case 2:r=c,i=n,o=h;break;case 3:r=c,i=u,o=n;break;case 4:r=h,i=c,o=n;break;case 5:r=n,i=c,o=u}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}(f_(),.5*f_()+.5,.5*f_()+.5)),d_[e]);function g_(e,t,n){return Math.min(Math.max(t,e),n)}function v_(e,t,n){return n*(t-e)+e}function y_(e,t,n,r,i,o,a){return t+((e-t)/(n-t)*(a-o)+o-r)/(i-r)*(n-t)}function b_(e,t,n,r,i,o,a){return t+((e-t)/(n-t)*(i-r)+r-o)/(a-o)*(n-t)}const x_=256,__=1024;function w_(e){return[e.color[0],e.color[1],e.color[2],Math.floor(255*e.opacity)]}const S_=(e=0,t=1)=>[{x:0,opacity:e,color:[255,255,255]},{x:255,opacity:t,color:[255,255,255]}];class E_{constructor(){this.lut=new Uint8Array(__),this.controlPoints=[],this.createFullRange()}createFromMinMax(e,t){if(t<e){const n=t;t=e,e=n}if(e<0&&t<0)return this.controlPoints=S_(1,1),this.createFromControlPoints(this.controlPoints);if(e>=255&&t>=255)return this.controlPoints=S_(0,0),this.createFromControlPoints(this.controlPoints);const n=[];let r=0;e<0&&(r=-e/(t-e)),n.push({x:0,opacity:r,color:[255,255,255]}),e>0&&n.push({x:e,opacity:0,color:[255,255,255]}),t<255&&(t===e?n.push({x:e+.5,opacity:1,color:[255,255,255]}):n.push({x:t,opacity:1,color:[255,255,255]}));let i=1;return t>255&&(i=(255-e)/(t-e)),n.push({x:255,opacity:i,color:[255,255,255]}),this.createFromControlPoints(n)}createFullRange(){return this.controlPoints=S_(),this.createFromControlPoints(this.controlPoints)}createFromWindowLevel(e,t){const n=t-.5*e,r=t+.5*e;return this.createFromMinMax(255*n,255*r)}createFromControlPoints(e){return this.lut=function(e){const t=new Uint8Array(1024).fill(0);if(0===e.length)return t;if(e.sort(((e,t)=>e.x-t.x)),1===e.length){const n=w_(e[0]);for(let r=g_(e[0].x,0,255);r<256;++r)t[4*r+0]=n[0],t[4*r+1]=n[1],t[4*r+2]=n[2],t[4*r+3]=n[3];return t}let n=e[0],r=e[1],i=w_(n),o=w_(r),a=1,s=0;for(let l=0;l<256;++l){for(;l>r.x;)n=r,i=o,a++,r=a>=e.length?{x:255,color:r.color,opacity:r.opacity}:e[a],o=w_(r);s=r.x===n.x?1:(l-n.x)/(r.x-n.x),t[4*l+0]=g_(v_(i[0],o[0],s),0,255),t[4*l+1]=g_(v_(i[1],o[1],s),0,255),t[4*l+2]=g_(v_(i[2],o[2],s),0,255),t[4*l+3]=g_(v_(i[3],o[3],s),0,255)}return t}(e),this.controlPoints=e,this}createFromEqHistogram(e){const t=[];for(let n=0;n<e.getNumBins();++n)t[n]=0;t[0]=e.getBin(0);for(let n=1;n<e.getNumBins();++n)t[n]=t[n-1]+e.getBin(n);if(t[t.length-1]-t[0]>0){const e=[{x:0,opacity:0,color:[255,255,255]}];let n=0,r=0,i=0,o=0;for(let a=1;a<x_;++a)o=i,i=g_(Math.round(255*(t[a]-t[0])),0,255),n=i-o,n!=r&&(e.push({x:a-1,opacity:o/255,color:[255,255,255]}),r=n);return e.push({x:255,opacity:1,color:[255,255,255]}),this.createFromControlPoints(e)}return this.createFullRange()}createLabelColors(e){const t=new Uint8Array(__).fill(0),n=[];n.push({x:0,opacity:0,color:[0,0,0]});let r=0,i=0,o=0,a=0,s=0,l=0,c=0,u=0;for(let h=1;h<x_;++h){const d=Math.floor(h/255*(e.getNumBins()-1));if(e.getBin(d)>0){const e=m_(d);t[4*h+0]=e[0],t[4*h+1]=e[1],t[4*h+2]=e[2],t[4*h+3]=255,s=e[0],l=e[1],c=e[2],u=1}else s=0,l=0,c=0,u=0;s===r&&l===i&&c===o&&u===a||(0===a&&n.push({x:h-.5,opacity:a,color:[r,i,o]}),n.push({x:h,opacity:u,color:[s,l,c]}),r=s,i=l,o=c,a=u)}return this.lut=t,this.controlPoints=n,this}remapDomains(e,t,n,r){this.lut=function(e,t,n,r,i){const o=new Uint8Array(__);for(let a=0;a<x_;++a){let s=y_(a,0,255,t,n,r,i);s<0&&(s=0),s>255&&(s=255);const l=Math.floor(s),c=Math.ceil(s),u=s-l;o[4*a+0]=Math.round(v_(e[4*l+0],e[4*c+0],u)),o[4*a+1]=Math.round(v_(e[4*l+1],e[4*c+1],u)),o[4*a+2]=Math.round(v_(e[4*l+2],e[4*c+2],u)),o[4*a+3]=Math.round(v_(e[4*l+3],e[4*c+3],u))}return o}(this.lut,e,t,n,r),this.controlPoints=C_(this.controlPoints,e,t,n,r)}}function C_(e,t,n,r,i,o=!0){if(0===e.length)return e;const a=[],s=e[0].x,l=e[e.length-1].x;for(let o=0;o<e.length;++o){const s=e[o],l={x:b_(s.x,0,255,t,n,r,i),opacity:s.opacity,color:[s.color[0],s.color[1],s.color[2]]};a.push(l)}return o?function(e,t,n){const r=1e-4,i=e[0],o=e[1],a=e[e.length-2],s=e[e.length-1];return Math.abs(i.opacity-(o?.opacity??1/0))<r&&(i.x<0?i.x=Math.min(0,o.x-1):t<r&&(i.x=0)),Math.abs(s.opacity-(a?.opacity??1/0))<r&&(s.x>255?s.x=Math.max(255,a.x+1):n>254.9999&&(s.x=255)),e}(a,s,l):a}class M_{pathTracingUniforms=(()=>({tPreviousTexture:{type:"t",value:new zf},uSampleCounter:{type:"f",value:0},uFrameCounter:{type:"f",value:1},uResolution:{type:"v2",value:new vf},gClippedAaBbMin:{type:"v3",value:new Hf(0,0,0)},gClippedAaBbMax:{type:"v3",value:new Hf(1,1,1)},gVolCenter:{type:"v3",value:new Hf(0,0,0)},gDensityScale:{type:"f",value:50},gStepSize:{type:"f",value:1},gStepSizeShadow:{type:"f",value:1},gInvAaBbMax:{type:"v3",value:new Hf},gNChannels:{type:"i",value:0},gShadingType:{type:"i",value:0},gGradientDeltaX:{type:"v3",value:new Hf(.01,0,0)},gGradientDeltaY:{type:"v3",value:new Hf(0,.01,0)},gGradientDeltaZ:{type:"v3",value:new Hf(0,0,.01)},gInvGradientDelta:{type:"f",value:0},gGradientFactor:{type:"f",value:.25},gCamera:{value:{mFrom:new Hf,mU:new Hf,mV:new Hf,mN:new Hf,mScreen:new Uf,mInvScreen:new vf,mFocalDistance:0,mApertureSize:0,mIsOrtho:0}},gLights:{value:[new h_(1),new h_(0)]},volumeTexture:{type:"t",value:new zf},gLutTexture:{type:"t",value:new zf},gIntensityMax:{type:"v4",value:new Uf(1,1,1,1)},gIntensityMin:{type:"v4",value:new Uf(0,0,0,0)},gOpacity:{type:"1fv",value:[1,1,1,1]},gEmissive:{type:"v3v",value:[new Hf(0,0,0),new Hf(0,0,0),new Hf(0,0,0),new Hf(0,0,0)]},gDiffuse:{type:"v3v",value:[new Hf(1,0,0),new Hf(0,1,0),new Hf(0,0,1),new Hf(1,0,1)]},gSpecular:{type:"v3v",value:[new Hf(0,0,0),new Hf(0,0,0),new Hf(0,0,0),new Hf(0,0,0)]},gGlossiness:{type:"1fv",value:[1,1,1,1]},uShowLights:{type:"f",value:0},flipVolume:{type:"v3",value:new Hf(1,1,1)}}))();denoiseShaderUniforms=u_();screenOutputShaderUniforms={gInvExposure:{type:"f",value:4},tTexture0:{type:"t",value:null}};constructor(e,t=new ax(e)){this.volume=e,this.viewChannels=[-1,-1,-1,-1];const{x:n,y:r,z:i}=e.imageInfo.subregionSize,o=new Uint8Array(n*r*i*4).fill(0);this.volumeTexture=new Vf(o,n,r,i),this.volumeTexture.minFilter=this.volumeTexture.magFilter=Fh,this.volumeTexture.generateMipmaps=!1,this.volumeTexture.needsUpdate=!0;const a=new Uint8Array(4096).fill(1),s=new ag(a,256,4,Qh,Vh);s.minFilter=s.magFilter=Fh,s.needsUpdate=!0,this.pathTracingUniforms.gLutTexture.value=s,this.cameraIsMoving=!1,this.sampleCounter=0,this.frameCounter=0,this.pathTracingRenderTarget=new Bf(2,2,{minFilter:Dh,magFilter:Dh,format:Qh,type:Xh,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1}),this.screenTextureRenderTarget=new Bf(2,2,{minFilter:Dh,magFilter:Dh,format:Qh,type:Xh,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1}),this.pathTracingUniforms.volumeTexture.value=this.volumeTexture,this.pathTracingUniforms.tPreviousTexture.value=this.screenTextureRenderTarget.texture,this.pathTracingRenderToBuffer=new xx("precision highp float;\nprecision highp int;\nprecision highp sampler2D;\nprecision highp sampler3D;\n\n#define PI (3.1415926535897932384626433832795)\n#define PI_OVER_2 (1.57079632679489661923)\n#define PI_OVER_4 (0.785398163397448309616)\n#define INV_PI (1.0/PI)\n#define INV_2_PI (0.5/PI)\n#define INV_4_PI (0.25/PI)\n\nconst vec3 BLACK = vec3(0,0,0);\nconst vec3 WHITE = vec3(1.0,1.0,1.0);\nconst int ShaderType_Brdf = 0;\nconst int ShaderType_Phase = 1;\nconst int ShaderType_Mixed = 2;\nconst float MAX_RAY_LEN = 1500000.0f;\n\nin vec2 vUv;\n\nstruct Camera {\n  vec3 mFrom;\n  vec3 mU, mV, mN;\n  vec4 mScreen;  // left, right, bottom, top\n  vec2 mInvScreen;  // 1/w, 1/h\n  float mFocalDistance;\n  float mApertureSize;\n  float mIsOrtho; // 1 or 0\n};\n\nuniform Camera gCamera;\n\nstruct Light {\n  float   mTheta;\n  float   mPhi;\n  float   mWidth;\n  float   mHalfWidth;\n  float   mHeight;\n  float   mHalfHeight;\n  float   mDistance;\n  float   mSkyRadius;\n  vec3    mP;\n  vec3    mTarget;\n  vec3    mN;\n  vec3    mU;\n  vec3    mV;\n  float   mArea;\n  float   mAreaPdf;\n  vec3    mColor;\n  vec3    mColorTop;\n  vec3    mColorMiddle;\n  vec3    mColorBottom;\n  int     mT;\n};\nconst int NUM_LIGHTS = 2;\nuniform Light gLights[2];\n\nuniform vec3 gClippedAaBbMin;\nuniform vec3 gClippedAaBbMax;\nuniform vec3 gVolCenter;\nuniform float gDensityScale;\nuniform float gStepSize;\nuniform float gStepSizeShadow;\nuniform sampler3D volumeTexture;\nuniform vec3 gInvAaBbMax;\nuniform int gNChannels;\nuniform int gShadingType;\nuniform vec3 gGradientDeltaX;\nuniform vec3 gGradientDeltaY;\nuniform vec3 gGradientDeltaZ;\nuniform float gInvGradientDelta;\nuniform float gGradientFactor;\nuniform float uShowLights;\nuniform vec3 flipVolume;\n\n// per channel\n// the luttexture is a 256x4 rgba texture\n// each row is a 256 element lookup table.\nuniform sampler2D gLutTexture;\nuniform vec4 gIntensityMax;\nuniform vec4 gIntensityMin;\nuniform float gOpacity[4];\nuniform vec3 gEmissive[4];\nuniform vec3 gDiffuse[4];\nuniform vec3 gSpecular[4];\nuniform float gGlossiness[4];\n\n// compositing / progressive render\nuniform float uFrameCounter;\nuniform float uSampleCounter;\nuniform vec2 uResolution;\nuniform sampler2D tPreviousTexture;\n\n// from iq https://www.shadertoy.com/view/4tXyWN\nfloat rand( inout uvec2 seed )\n{\n  seed += uvec2(1);\n  uvec2 q = 1103515245U * ( (seed >> 1U) ^ (seed.yx) );\n  uint  n = 1103515245U * ( (q.x) ^ (q.y >> 3U) );\n  return float(n) * (1.0 / float(0xffffffffU));\n}\n\nvec3 XYZtoRGB(vec3 xyz) {\n  return vec3(\n    3.240479f*xyz[0] - 1.537150f*xyz[1] - 0.498535f*xyz[2],\n    -0.969256f*xyz[0] + 1.875991f*xyz[1] + 0.041556f*xyz[2],\n    0.055648f*xyz[0] - 0.204043f*xyz[1] + 1.057311f*xyz[2]\n  );\n}\n\n// Used to convert from linear RGB to XYZ space\nconst mat3 RGB_2_XYZ = (mat3(\n  0.4124564, 0.3575761, 0.1804375,\n  0.2126729, 0.7151522, 0.0721750,\n  0.0193339, 0.1191920, 0.9503041\n));\nvec3 RGBtoXYZ(vec3 rgb) {\n  return rgb * RGB_2_XYZ;\n}\n\nvec3 getUniformSphereSample(in vec2 U)\n{\n  float z = 1.f - 2.f * U.x;\n  float r = sqrt(max(0.f, 1.f - z*z));\n  float phi = 2.f * PI * U.y;\n  float x = r * cos(phi);\n  float y = r * sin(phi);\n  return vec3(x, y, z);\n}\n\nfloat SphericalPhi(in vec3 Wl)\n{\n  float p = atan(Wl.z, Wl.x);\n  return (p < 0.f) ? p + 2.f * PI : p;\n}\n\nfloat SphericalTheta(in vec3 Wl)\n{\n  return acos(clamp(Wl.y, -1.f, 1.f));\n}\n\nbool SameHemisphere(in vec3 Ww1, in vec3 Ww2)\n{\n   return (Ww1.z * Ww2.z) > 0.0f;\n}\n\nvec2 getConcentricDiskSample(in vec2 U)\n{\n  float r, theta;\n  // Map 0..1 to -1..1\n  float sx = 2.0 * U.x - 1.0;\n  float sy = 2.0 * U.y - 1.0;\n\n  // Map square to (r,theta)\n\n  // Handle degeneracy at the origin\n  if (sx == 0.0 && sy == 0.0)\n  {\n    return vec2(0.0f, 0.0f);\n  }\n\n  // quadrants of disk\n  if (sx >= -sy)\n  {\n    if (sx > sy)\n    {\n      r = sx;\n      if (sy > 0.0)\n        theta = sy/r;\n      else\n        theta = 8.0f + sy/r;\n    }\n    else\n    {\n      r = sy;\n      theta = 2.0f - sx/r;\n    }\n  }\n  else\n  {\n    if (sx <= sy)\n    {\n      r = -sx;\n      theta = 4.0f - sy/r;\n    }\n    else\n    {\n      r = -sy;\n      theta = 6.0f + sx/r;\n    }\n  }\n\n  theta *= PI_OVER_4;\n\n  return vec2(r*cos(theta), r*sin(theta));\n}\n\nvec3 getCosineWeightedHemisphereSample(in vec2 U)\n{\n  vec2 ret = getConcentricDiskSample(U);\n  return vec3(ret.x, ret.y, sqrt(max(0.f, 1.f - ret.x * ret.x - ret.y * ret.y)));\n}\n\nstruct Ray {\n  vec3 m_O;\n  vec3 m_D;\n  float m_MinT, m_MaxT;\n};\n\nvec3 rayAt(Ray r, float t) {\n  return r.m_O + t*r.m_D;\n}\n\nRay GenerateCameraRay(in Camera cam, in vec2 Pixel, in vec2 ApertureRnd)\n{\n  // negating ScreenPoint.y flips the up/down direction. depends on whether you want pixel 0 at top or bottom\n  // we could also have flipped mScreen and mInvScreen, or cam.mV?\n  vec2 ScreenPoint = vec2(\n    cam.mScreen.x + (cam.mInvScreen.x * Pixel.x),\n    cam.mScreen.z + (cam.mInvScreen.y * Pixel.y)\n  );\n  vec3 dxy = (ScreenPoint.x * cam.mU) + (-ScreenPoint.y * cam.mV);\n\n  // orthographic camera ray: start at (camera pos + screen point), go in direction N\n  // perspective camera ray: start at camera pos, go in direction (N + screen point)\n  vec3 RayO = cam.mFrom + cam.mIsOrtho * dxy;\n  vec3 RayD = normalize(cam.mN + (1.0 - cam.mIsOrtho) * dxy);\n\n  if (cam.mApertureSize != 0.0f)\n  {\n    vec2 LensUV = cam.mApertureSize * getConcentricDiskSample(ApertureRnd);\n\n    vec3 LI = cam.mU * LensUV.x + cam.mV * LensUV.y;\n    RayO += LI;\n    RayD = normalize((RayD * cam.mFocalDistance) - LI);\n  }\n\n  return Ray(RayO, RayD, 0.0, MAX_RAY_LEN);\n}\n\nbool IntersectBox(in Ray R, out float pNearT, out float pFarT)\n{\n  vec3 invR\t\t= vec3(1.0f, 1.0f, 1.0f) / R.m_D;\n  vec3 bottomT\t\t= invR * (vec3(gClippedAaBbMin.x, gClippedAaBbMin.y, gClippedAaBbMin.z) - R.m_O);\n  vec3 topT\t\t= invR * (vec3(gClippedAaBbMax.x, gClippedAaBbMax.y, gClippedAaBbMax.z) - R.m_O);\n  vec3 minT\t\t= min(topT, bottomT);\n  vec3 maxT\t\t= max(topT, bottomT);\n  float largestMinT = max(max(minT.x, minT.y), max(minT.x, minT.z));\n  float smallestMaxT = min(min(maxT.x, maxT.y), min(maxT.x, maxT.z));\n\n  pNearT = largestMinT;\n  pFarT\t= smallestMaxT;\n\n  return smallestMaxT > largestMinT;\n}\n\n// assume volume is centered at 0,0,0 so p spans -bounds to + bounds\n// transform p to range from 0,0,0 to 1,1,1 for volume texture sampling.\n// optionally invert axes\nvec3 PtoVolumeTex(vec3 p) {\n  vec3 uvw = (p - gVolCenter) * gInvAaBbMax + vec3(0.5, 0.5, 0.5);\n  // if flipVolume = 1, uvw is unchanged.\n  // if flipVolume = -1, uvw = 1 - uvw\n  uvw = (flipVolume*(uvw - 0.5) + 0.5);\n  return uvw;\n}\n\nconst float UINT8_MAX = 1.0;//255.0;\n\n// strategy: sample up to 4 channels, and take the post-LUT maximum intensity as the channel that wins\n// we will return the unmapped raw intensity value from the volume so that other luts can be applied again later.\nfloat GetNormalizedIntensityMax4ch(in vec3 P, out int ch)\n{\n  vec4 intensity = UINT8_MAX * texture(volumeTexture, PtoVolumeTex(P));\n\n  //intensity = (intensity - gIntensityMin) / (gIntensityMax - gIntensityMin);\n  vec4 ilut = vec4(0.0, 0.0, 0.0, 0.0);\n  // w in the lut texture is \"opacity\"\n  ilut.x = texture(gLutTexture, vec2(intensity.x, 0.5/4.0)).w / 255.0;\n  ilut.y = texture(gLutTexture, vec2(intensity.y, 1.5/4.0)).w / 255.0;\n  ilut.z = texture(gLutTexture, vec2(intensity.z, 2.5/4.0)).w / 255.0;\n  ilut.w = texture(gLutTexture, vec2(intensity.w, 3.5/4.0)).w / 255.0;\n\n  float maxIn = 0.0;\n  float iOut = 0.0;\n  ch = 0;\n  for (int i = 0; i < min(gNChannels, 4); ++i) {\n    if (ilut[i] > maxIn) {\n      maxIn = ilut[i];\n      ch = i;\n      iOut = intensity[i];\n    }\n  }\n\n  //return maxIn;\n  return iOut;\n}\n\nfloat GetNormalizedIntensity4ch(vec3 P, int ch)\n{\n  vec4 intensity = UINT8_MAX * texture(volumeTexture, PtoVolumeTex(P));\n  // select channel\n  float intensityf = intensity[ch];\n  //intensityf = (intensityf - gIntensityMin[ch]) / (gIntensityMax[ch] - gIntensityMin[ch]);\n  //intensityf = texture(gLutTexture, vec2(intensityf, (0.5+float(ch))/4.0)).x;\n\n  return intensityf;\n}\n\n// note that gInvGradientDelta is maxpixeldim of volume\n// gGradientDeltaX,Y,Z is 1/X,Y,Z of volume\nvec3 Gradient4ch(vec3 P, int ch)\n{\n  vec3 Gradient;\n\n  Gradient.x = (GetNormalizedIntensity4ch(P + (gGradientDeltaX), ch) - GetNormalizedIntensity4ch(P - (gGradientDeltaX), ch)) * gInvGradientDelta;\n  Gradient.y = (GetNormalizedIntensity4ch(P + (gGradientDeltaY), ch) - GetNormalizedIntensity4ch(P - (gGradientDeltaY), ch)) * gInvGradientDelta;\n  Gradient.z = (GetNormalizedIntensity4ch(P + (gGradientDeltaZ), ch) - GetNormalizedIntensity4ch(P - (gGradientDeltaZ), ch)) * gInvGradientDelta;\n\n  return Gradient;\n}\n\nfloat GetOpacity(float NormalizedIntensity, int ch)\n{\n  // apply lut\n  float o = texture(gLutTexture, vec2(NormalizedIntensity, (0.5+float(ch))/4.0)).w / 255.0;\n  float Intensity = o * gOpacity[ch];\n  return Intensity;\n}\n\nvec3 GetEmissionN(float NormalizedIntensity, int ch)\n{\n  return gEmissive[ch];\n}\n\nvec3 GetDiffuseN(float NormalizedIntensity, int ch)\n{\n  vec4 col = texture(gLutTexture, vec2(NormalizedIntensity, (0.5+float(ch))/4.0));\n  //vec3 col = vec3(1.0, 1.0, 1.0);\n  return col.xyz * gDiffuse[ch];\n}\n\nvec3 GetSpecularN(float NormalizedIntensity, int ch)\n{\n  return gSpecular[ch];\n}\n\nfloat GetGlossinessN(float NormalizedIntensity, int ch)\n{\n  return gGlossiness[ch];\n}\n\n// a bsdf sample, a sample on a light source, and a randomly chosen light index\nstruct LightingSample {\n  float m_bsdfComponent;\n  vec2  m_bsdfDir;\n  vec2  m_lightPos;\n  float m_lightComponent;\n  float m_LightNum;\n};\n\nLightingSample LightingSample_LargeStep(inout uvec2 seed) {\n  return LightingSample(\n    rand(seed),\n    vec2(rand(seed), rand(seed)),\n    vec2(rand(seed), rand(seed)),\n    rand(seed),\n    rand(seed)\n    );\n}\n\n// return a color xyz\nvec3 Light_Le(in Light light, in vec2 UV)\n{\n  if (light.mT == 0)\n    return RGBtoXYZ(light.mColor) / light.mArea;\n\n  if (light.mT == 1)\n  {\n    if (UV.y > 0.0f)\n      return RGBtoXYZ(mix(light.mColorMiddle, light.mColorTop, abs(UV.y)));\n    else\n      return RGBtoXYZ(mix(light.mColorMiddle, light.mColorBottom, abs(UV.y)));\n  }\n\n  return BLACK;\n}\n\n// return a color xyz\nvec3 Light_SampleL(in Light light, in vec3 P, out Ray Rl, out float Pdf, in LightingSample LS)\n{\n  vec3 L = BLACK;\n  Pdf = 0.0;\n  vec3 Ro = vec3(0,0,0), Rd = vec3(0,0,1);\n  if (light.mT == 0)\n  {\n    Ro = (light.mP + ((-0.5f + LS.m_lightPos.x) * light.mWidth * light.mU) + ((-0.5f + LS.m_lightPos.y) * light.mHeight * light.mV));\n    Rd = normalize(P - Ro);\n    L = dot(Rd, light.mN) > 0.0f ? Light_Le(light, vec2(0.0f)) : BLACK;\n    Pdf = abs(dot(Rd, light.mN)) > 0.0f ? dot(P-Ro, P-Ro) / (abs(dot(Rd, light.mN)) * light.mArea) : 0.0f;\n  }\n  else if (light.mT == 1)\n  {\n    Ro = light.mP + light.mSkyRadius * getUniformSphereSample(LS.m_lightPos);\n    Rd = normalize(P - Ro);\n    L = Light_Le(light, vec2(1.0f) - 2.0f * LS.m_lightPos);\n    Pdf = pow(light.mSkyRadius, 2.0f) / light.mArea;\n  }\n\n  Rl = Ray(Ro, Rd, 0.0f, length(P - Ro));\n\n  return L;\n}\n\n// Intersect ray with light\nbool Light_Intersect(Light light, inout Ray R, out float T, out vec3 L, out float pPdf)\n{\n  if (light.mT == 0)\n  {\n    // Compute projection\n    float DotN = dot(R.m_D, light.mN);\n\n    // Ray is coplanar with light surface\n    if (DotN >= 0.0f)\n      return false;\n\n    // Compute hit distance\n    T = (-light.mDistance - dot(R.m_O, light.mN)) / DotN;\n\n    // Intersection is in ray's negative direction\n    if (T < R.m_MinT || T > R.m_MaxT)\n      return false;\n\n    // Determine position on light\n    vec3 Pl = rayAt(R, T);\n\n    // Vector from point on area light to center of area light\n    vec3 Wl = Pl - light.mP;\n\n    // Compute texture coordinates\n    vec2 UV = vec2(dot(Wl, light.mU), dot(Wl, light.mV));\n\n    // Check if within bounds of light surface\n    if (UV.x > light.mHalfWidth || UV.x < -light.mHalfWidth || UV.y > light.mHalfHeight || UV.y < -light.mHalfHeight)\n      return false;\n\n    R.m_MaxT = T;\n\n    //pUV = UV;\n\n    if (DotN < 0.0f)\n      L = RGBtoXYZ(light.mColor) / light.mArea;\n    else\n      L = BLACK;\n\n    pPdf = dot(R.m_O-Pl, R.m_O-Pl) / (DotN * light.mArea);\n\n    return true;\n  }\n\n  else if (light.mT == 1)\n  {\n    T = light.mSkyRadius;\n\n    // Intersection is in ray's negative direction\n    if (T < R.m_MinT || T > R.m_MaxT)\n      return false;\n\n    R.m_MaxT = T;\n\n    vec2 UV = vec2(SphericalPhi(R.m_D) * INV_2_PI, SphericalTheta(R.m_D) * INV_PI);\n\n    L = Light_Le(light, vec2(1.0f,1.0f) - 2.0f * UV);\n\n    pPdf = pow(light.mSkyRadius, 2.0f) / light.mArea;\n    //pUV = UV;\n\n    return true;\n  }\n\n  return false;\n}\n\nfloat Light_Pdf(in Light light, in vec3 P, in vec3 Wi)\n{\n  vec3 L;\n  vec2 UV;\n  float Pdf = 1.0f;\n\n  Ray Rl = Ray(P, Wi, 0.0f, 100000.0f);\n\n  if (light.mT == 0)\n  {\n    float T = 0.0f;\n\n    if (!Light_Intersect(light, Rl, T, L, Pdf))\n      return 0.0f;\n\n    return pow(T, 2.0f) / (abs(dot(light.mN, -Wi)) * light.mArea);\n  }\n\n  else if (light.mT == 1)\n  {\n    return pow(light.mSkyRadius, 2.0f) / light.mArea;\n  }\n\n  return 0.0f;\n}\n\nstruct VolumeShader {\n  int m_Type; // 0 = bsdf, 1 = phase\n\n  vec3 m_Kd; // isotropic phase // xyz color\n  vec3 m_R; // specular reflectance\n  float m_Ior;\n  float m_Exponent;\n  vec3 m_Nn;\n  vec3 m_Nu;\n  vec3 m_Nv;\n};\n\n// return a xyz color\nvec3 ShaderPhase_F(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  return shader.m_Kd * INV_PI;\n}\n\nfloat ShaderPhase_Pdf(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  return INV_4_PI;\n}\n\nvec3 ShaderPhase_SampleF(in VolumeShader shader, in vec3 Wo, out vec3 Wi, out float Pdf, in vec2 U)\n{\n  Wi\t= getUniformSphereSample(U);\n  Pdf\t= ShaderPhase_Pdf(shader, Wo, Wi);\n\n  return ShaderPhase_F(shader, Wo, Wi);\n}\n\n// return a xyz color\nvec3 Lambertian_F(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  return shader.m_Kd * INV_PI;\n}\n\nfloat Lambertian_Pdf(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  //return abs(Wi.z)*INV_PI;\n  return SameHemisphere(Wo, Wi) ? abs(Wi.z) * INV_PI : 0.0f;\n}\n\n// return a xyz color\nvec3 Lambertian_SampleF(in VolumeShader shader, in vec3 Wo, out vec3 Wi, out float Pdf, in vec2 U)\n{\n  Wi = getCosineWeightedHemisphereSample(U);\n\n  if (Wo.z < 0.0f)\n    Wi.z *= -1.0f;\n\n  Pdf = Lambertian_Pdf(shader, Wo, Wi);\n\n  return Lambertian_F(shader, Wo, Wi);\n}\n\nvec3 SphericalDirection(in float SinTheta, in float CosTheta, in float Phi)\n{\n  return vec3(SinTheta * cos(Phi), SinTheta * sin(Phi), CosTheta);\n}\n\nvoid Blinn_SampleF(in VolumeShader shader, in vec3 Wo, out vec3 Wi, out float Pdf, in vec2 U)\n{\n  // Compute sampled half-angle vector wh for Blinn distribution\n  float costheta = pow(U.x, 1.f / (shader.m_Exponent+1.0));\n  float sintheta = sqrt(max(0.f, 1.f - costheta*costheta));\n  float phi = U.y * 2.f * PI;\n\n  vec3 wh = SphericalDirection(sintheta, costheta, phi);\n\n  if (!SameHemisphere(Wo, wh))\n    wh = -wh;\n\n  // Compute incident direction by reflecting about wh\n  Wi = -Wo + 2.f * dot(Wo, wh) * wh;\n\n  // Compute PDF for wi from Blinn distribution\n  float blinn_pdf = ((shader.m_Exponent + 1.f) * pow(costheta, shader.m_Exponent)) / (2.f * PI * 4.f * dot(Wo, wh));\n\n  if (dot(Wo, wh) <= 0.f)\n    blinn_pdf = 0.f;\n\n  Pdf = blinn_pdf;\n}\n\nfloat Blinn_D(in VolumeShader shader, in vec3 wh)\n{\n  float costhetah = abs(wh.z);//AbsCosTheta(wh);\n  return (shader.m_Exponent+2.0) * INV_2_PI * pow(costhetah, shader.m_Exponent);\n}\nfloat Microfacet_G(in VolumeShader shader, in vec3 wo, in vec3 wi, in vec3 wh)\n{\n  float NdotWh = abs(wh.z);//AbsCosTheta(wh);\n  float NdotWo = abs(wo.z);//AbsCosTheta(wo);\n  float NdotWi = abs(wi.z);//AbsCosTheta(wi);\n  float WOdotWh = abs(dot(wo, wh));\n\n  return min(1.f, min((2.f * NdotWh * NdotWo / WOdotWh), (2.f * NdotWh * NdotWi / WOdotWh)));\n}\n\nvec3 Microfacet_F(in VolumeShader shader, in vec3 wo, in vec3 wi)\n{\n  float cosThetaO = abs(wo.z);//AbsCosTheta(wo);\n  float cosThetaI = abs(wi.z);//AbsCosTheta(wi);\n\n  if (cosThetaI == 0.f || cosThetaO == 0.f)\n    return BLACK;\n\n  vec3 wh = wi + wo;\n\n  if (wh.x == 0. && wh.y == 0. && wh.z == 0.)\n    return BLACK;\n\n  wh = normalize(wh);\n  float cosThetaH = dot(wi, wh);\n\n  vec3 F = WHITE;//m_Fresnel.Evaluate(cosThetaH);\n\n  return shader.m_R * Blinn_D(shader, wh) * Microfacet_G(shader, wo, wi, wh) * F / (4.f * cosThetaI * cosThetaO);\n}\n\nvec3 ShaderBsdf_WorldToLocal(in VolumeShader shader, in vec3 W)\n{\n  return vec3(dot(W, shader.m_Nu), dot(W, shader.m_Nv), dot(W, shader.m_Nn));\n}\n\nvec3 ShaderBsdf_LocalToWorld(in VolumeShader shader, in vec3 W)\n{\n  return vec3(\tshader.m_Nu.x * W.x + shader.m_Nv.x * W.y + shader.m_Nn.x * W.z,\n    shader.m_Nu.y * W.x + shader.m_Nv.y * W.y + shader.m_Nn.y * W.z,\n    shader.m_Nu.z * W.x + shader.m_Nv.z * W.y + shader.m_Nn.z * W.z);\n}\n\nfloat Blinn_Pdf(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  vec3 wh = normalize(Wo + Wi);\n\n  float costheta = abs(wh.z);//AbsCosTheta(wh);\n  // Compute PDF for wi from Blinn distribution\n  float blinn_pdf = ((shader.m_Exponent + 1.f) * pow(costheta, shader.m_Exponent)) / (2.f * PI * 4.f * dot(Wo, wh));\n\n  if (dot(Wo, wh) <= 0.0f)\n    blinn_pdf = 0.0f;\n\n  return blinn_pdf;\n}\n\nvec3 Microfacet_SampleF(in VolumeShader shader, in vec3 wo, out vec3 wi, out float Pdf, in vec2 U)\n{\n  Blinn_SampleF(shader, wo, wi, Pdf, U);\n\n  if (!SameHemisphere(wo, wi))\n    return BLACK;\n\n  return Microfacet_F(shader, wo, wi);\n}\n\nfloat Microfacet_Pdf(in VolumeShader shader, in vec3 wo, in vec3 wi)\n{\n  if (!SameHemisphere(wo, wi))\n    return 0.0f;\n\n  return Blinn_Pdf(shader, wo, wi);\n}\n\n// return a xyz color\nvec3 ShaderBsdf_F(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  vec3 Wol = ShaderBsdf_WorldToLocal(shader, Wo);\n  vec3 Wil = ShaderBsdf_WorldToLocal(shader, Wi);\n\n  vec3 R = vec3(0,0,0);\n\n  R += Lambertian_F(shader, Wol, Wil);\n  R += Microfacet_F(shader, Wol, Wil);\n\n  return R;\n}\n\nfloat ShaderBsdf_Pdf(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  vec3 Wol = ShaderBsdf_WorldToLocal(shader, Wo);\n  vec3 Wil = ShaderBsdf_WorldToLocal(shader, Wi);\n\n  float Pdf = 0.0f;\n\n  Pdf += Lambertian_Pdf(shader, Wol, Wil);\n  Pdf += Microfacet_Pdf(shader, Wol, Wil);\n\n  return Pdf;\n}\n\n\nvec3 ShaderBsdf_SampleF(in VolumeShader shader, in LightingSample S, in vec3 Wo, out vec3 Wi, out float Pdf, in vec2 U)\n{\n  vec3 Wol = ShaderBsdf_WorldToLocal(shader, Wo);\n  vec3 Wil = vec3(0,0,0);\n\n  vec3 R = vec3(0,0,0);\n\n  if (S.m_bsdfComponent <= 0.5f)\n  {\n    Lambertian_SampleF(shader, Wol, Wil, Pdf, S.m_bsdfDir);\n  }\n  else\n  {\n    Microfacet_SampleF(shader, Wol, Wil, Pdf, S.m_bsdfDir);\n  }\n\n  Pdf += Lambertian_Pdf(shader, Wol, Wil);\n  Pdf += Microfacet_Pdf(shader, Wol, Wil);\n\n  R += Lambertian_F(shader, Wol, Wil);\n  R += Microfacet_F(shader, Wol, Wil);\n\n  Wi = ShaderBsdf_LocalToWorld(shader, Wil);\n\n  //return vec3(1,1,1);\n  return R;\n}\n\n// return a xyz color\nvec3 Shader_F(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  if (shader.m_Type == 0) {\n    return ShaderBsdf_F(shader, Wo, Wi);\n  }\n  else {\n    return ShaderPhase_F(shader, Wo, Wi);\n  }\n}\n\nfloat Shader_Pdf(in VolumeShader shader, in vec3 Wo, in vec3 Wi)\n{\n  if (shader.m_Type == 0) {\n    return ShaderBsdf_Pdf(shader, Wo, Wi);\n  }\n  else {\n    return ShaderPhase_Pdf(shader, Wo, Wi);\n  }\n}\n\nvec3 Shader_SampleF(in VolumeShader shader, in LightingSample S, in vec3 Wo, out vec3 Wi, out float Pdf, in vec2 U)\n{\n  //return vec3(1,0,0);\n  if (shader.m_Type == 0) {\n    return ShaderBsdf_SampleF(shader, S, Wo, Wi, Pdf, U);\n  }\n  else {\n    return ShaderPhase_SampleF(shader, Wo, Wi, Pdf, U);\n  }\n}\n\n\nbool IsBlack(in vec3 v) {\n  return (v.x==0.0 && v.y == 0.0 && v.z == 0.0);\n}\n\nfloat PowerHeuristic(float nf, float fPdf, float ng, float gPdf)\n{\n  float f = nf * fPdf;\n  float g = ng * gPdf;\n  // The power heuristic is Veach's MIS balance heuristic except each component is being squared\n  // balance heuristic would be f/(f+g) ...?\n  return (f * f) / (f * f + g * g);\n}\n\nfloat MISContribution(float pdf1, float pdf2)\n{\n  return PowerHeuristic(1.0f, pdf1, 1.0f, pdf2);\n}\n\n// \"shadow ray\" using gStepSizeShadow, test whether it can exit the volume or not\nbool DoesSecondaryRayScatterInVolume(inout Ray R, inout uvec2 seed)\n{\n  float MinT;\n  float MaxT;\n  vec3 Ps;\n\n  if (!IntersectBox(R, MinT, MaxT))\n    return false;\n\n  MinT = max(MinT, R.m_MinT);\n  MaxT = min(MaxT, R.m_MaxT);\n\n  // delta (Woodcock) tracking\n  float S\t= -log(rand(seed)) / gDensityScale;\n  float Sum = 0.0f;\n  float SigmaT = 0.0f;\n\n  MinT += rand(seed) * gStepSizeShadow;\n  int ch = 0;\n  float intensity = 0.0;\n  while (Sum < S)\n  {\n    Ps = rayAt(R, MinT);  // R.m_O + MinT * R.m_D;\n\n    if (MinT > MaxT)\n      return false;\n\n    intensity = GetNormalizedIntensityMax4ch(Ps, ch);\n    SigmaT = gDensityScale * GetOpacity(intensity, ch);\n\n    Sum += SigmaT * gStepSizeShadow;\n    MinT += gStepSizeShadow;\n  }\n\n  return true;\n}\n\nint GetNearestLight(Ray R, out vec3 oLightColor, out vec3 Pl, out float oPdf)\n{\n  int hit = -1;\n  float T = 0.0f;\n  Ray rayCopy = R;\n  float pdf = 0.0f;\n\n  for (int i = 0; i < 2; i++)\n  {\n    if (Light_Intersect(gLights[i], rayCopy, T, oLightColor, pdf))\n    {\n      Pl = rayAt(R, T);\n      hit = i;\n    }\n  }\n  oPdf = pdf;\n\n  return hit;\n}\n\n// return a XYZ color\n// Wo is direction from scatter point out toward incident ray direction\n\n// Wi goes toward light sample and is not necessarily perfect reflection of Wo\n// ^Wi   ^N    ^Wo\n//  \\\\    |    //\n//   \\\\   |   //\n//    \\\\  |  //\n//     \\\\ | //\n//      \\\\|// Pe = volume sample where scattering occurs\n//   ---------\nvec3 EstimateDirectLight(int shaderType, float Density, int ch, in Light light, in LightingSample LS, in vec3 Wo, in vec3 Pe, in vec3 N, inout uvec2 seed)\n{\n  vec3 Ld = BLACK, Li = BLACK, F = BLACK;\n\n  vec3 diffuse = GetDiffuseN(Density, ch);\n  vec3 specular = GetSpecularN(Density, ch);\n  float glossiness = GetGlossinessN(Density, ch);\n\n  // can N and Wo be coincident????\n  vec3 nu = normalize(cross(N, Wo));\n  vec3 nv = normalize(cross(N, nu));\n\n  // the IoR here is hard coded... and unused!!!!\n  VolumeShader Shader = VolumeShader(shaderType, RGBtoXYZ(diffuse), RGBtoXYZ(specular), 2.5f, glossiness, N, nu, nv);\n\n  float LightPdf = 1.0f, ShaderPdf = 1.0f;\n\n  Ray Rl = Ray(vec3(0,0,0), vec3(0,0,1.0), 0.0, MAX_RAY_LEN);\n  // Rl is ray from light toward Pe in volume, with a max traversal of the distance from Pe to Light sample pos.\n  Li = Light_SampleL(light, Pe, Rl, LightPdf, LS);\n\n  // Wi: negate ray direction: from volume scatter point toward light...?\n  vec3 Wi = -Rl.m_D, P = vec3(0,0,0);\n\n  // we will calculate two lighting contributions and combine them by MIS.\n\n  F = Shader_F(Shader,Wo, Wi);\n\n  ShaderPdf = Shader_Pdf(Shader, Wo, Wi);\n\n  // get a lighting contribution along Rl;  see if Rl would scatter in the volume or not\n  if (!IsBlack(Li) && (ShaderPdf > 0.0f) && (LightPdf > 0.0f) && !DoesSecondaryRayScatterInVolume(Rl, seed))\n  {\n    // ray from light can see through volume to Pe!\n\n    float dotProd = 1.0;\n    if (shaderType == ShaderType_Brdf){\n\n      // (use abs or clamp here?)\n      dotProd = abs(dot(Wi, N));\n    }\n    Ld += F * Li * dotProd * MISContribution(LightPdf, ShaderPdf) / LightPdf;\n\n  }\n\n  // get a lighting contribution by sampling nearest light from the scattering point\n  F = Shader_SampleF(Shader, LS, Wo, Wi, ShaderPdf, LS.m_bsdfDir);\n  if (!IsBlack(F) && (ShaderPdf > 0.0f))\n  {\n    vec3 Pl = vec3(0,0,0);\n    int n = GetNearestLight(Ray(Pe, Wi, 0.0f, 1000000.0f), Li, Pl, LightPdf);\n    if (n > -1)\n    {\n      Light pLight = gLights[n];\n      LightPdf = Light_Pdf(pLight, Pe, Wi);\n\n      if ((LightPdf > 0.0f) && !IsBlack(Li)) {\n        Ray rr = Ray(Pl, normalize(Pe - Pl), 0.0f, length(Pe - Pl));\n        if (!DoesSecondaryRayScatterInVolume(rr, seed))\n        {\n          float dotProd = 1.0;\n          if (shaderType == ShaderType_Brdf){\n\n            // (use abs or clamp here?)\n            dotProd = abs(dot(Wi, N));\n          }\n          // note order of MIS params is swapped\n          Ld += F * Li * dotProd * MISContribution(ShaderPdf, LightPdf) / ShaderPdf;\n        }\n\n      }\n    }\n  }\n\n  return Ld;\n\n}\n\n// return a linear xyz color\nvec3 UniformSampleOneLight(int shaderType, float Density, int ch, in vec3 Wo, in vec3 Pe, in vec3 N, inout uvec2 seed)\n{\n  //if (NUM_LIGHTS == 0)\n  //  return BLACK;\n\n  // select a random light, a random 2d sample on light, and a random 2d sample on brdf\n  LightingSample LS = LightingSample_LargeStep(seed);\n\n  int WhichLight = int(floor(LS.m_LightNum * float(NUM_LIGHTS)));\n\n  Light light = gLights[WhichLight];\n\n  return float(NUM_LIGHTS) * EstimateDirectLight(shaderType, Density, ch, light, LS, Wo, Pe, N, seed);\n\n}\n\nbool SampleScatteringEvent(inout Ray R, inout uvec2 seed, out vec3 Ps)\n{\n  float MinT;\n  float MaxT;\n\n  if (!IntersectBox(R, MinT, MaxT))\n    return false;\n\n  MinT = max(MinT, R.m_MinT);\n  MaxT = min(MaxT, R.m_MaxT);\n\n  // delta (Woodcock) tracking\n\n  // notes, not necessarily coherent:\n  // ray march along the ray's projected path and keep an average sigmaT value.\n  // The distance is weighted by the intensity at each ray step sample. High intensity increases the apparent distance.\n  // When the distance has become greater than the average sigmaT value given by -log(RandomFloat[0, 1]) / averageSigmaT\n  // then that would be considered the interaction position.\n\n  // sigmaT = sigmaA + sigmaS = absorption coeff + scattering coeff = extinction coeff\n\n  // Beer-Lambert law: transmittance T(t) = exp(-sigmaT*t)  where t is a distance!\n\n  // importance sampling the exponential function to produce a free path distance S\n  // the PDF is p(t) = sigmaT * exp(-sigmaT * t)\n  // In a homogeneous volume,\n  // S is the free-path distance = -ln(1-zeta)/sigmaT where zeta is a random variable\n  // density scale = 0   => S --\x3e 0..inf.  Low density means randomly sized ray paths\n  // density scale = inf => S --\x3e 0.       High density means short ray paths!\n\n  // note that ln(x:0..1) is negative\n\n  // here gDensityScale represents sigmaMax, a majorant of sigmaT\n  // it is a parameter that should be set as close to the max extinction coefficient as possible.\n  float S\t= -log(rand(seed)) / gDensityScale;\n\n  float Sum\t\t= 0.0f;\n  float SigmaT\t= 0.0f; // accumulated extinction along ray march\n\n  // start: take one step now.\n  MinT += rand(seed) * gStepSize;\n\n  int ch = 0;\n  float intensity = 0.0;\n\n  // ray march until we have traveled S (or hit the maxT of the ray)\n  while (Sum < S)\n  {\n    Ps = rayAt(R, MinT);  // R.m_O + MinT * R.m_D;\n\n    // if we exit the volume with no scattering\n    if (MinT > MaxT)\n      return false;\n\n    intensity = GetNormalizedIntensityMax4ch(Ps, ch);\n    SigmaT = gDensityScale * GetOpacity(intensity, ch);\n\n    Sum += SigmaT * gStepSize;\n    MinT += gStepSize;\n  }\n\n  // at this time, MinT - original MinT is the T transmission distance before a scatter event.\n  // Ps is the point\n\n  return true;\n}\n\n\nvec4 CalculateRadiance(inout uvec2 seed) {\n  float r = rand(seed);\n  //return vec4(r,0,0,1);\n\n  vec3 Lv = BLACK, Li = BLACK;\n\n  //Ray Re = Ray(vec3(0,0,0), vec3(0,0,1), 0.0, MAX_RAY_LEN);\n\n  vec2 UV = vUv*uResolution + vec2(rand(seed), rand(seed));\n\n  Ray Re = GenerateCameraRay(gCamera, UV, vec2(rand(seed), rand(seed)));\n\n  //return vec4(vUv, 0.0, 1.0);\n  //return vec4(0.5*(Re.m_D + 1.0), 1.0);\n  //return vec4(Re.m_D, 1.0);\n\n  //Re.m_MinT = 0.0f;\n  //Re.m_MaxT = MAX_RAY_LEN;\n\n  vec3 Pe = vec3(0,0,0), Pl = vec3(0,0,0);\n  float lpdf = 0.0;\n\n  float alpha = 0.0;\n  // find point Pe along ray Re\n  if (SampleScatteringEvent(Re, seed, Pe))\n  {\n    alpha = 1.0;\n    // is there a light between Re.m_O and Pe? (ray's maxT is distance to Pe)\n    // (test to see if area light was hit before volume.)\n    int i = GetNearestLight(Ray(Re.m_O, Re.m_D, 0.0f, length(Pe - Re.m_O)), Li, Pl, lpdf);\n    if (i > -1)\n    {\n      // set sample pixel value in frame estimate (prior to accumulation)\n      return vec4(Li, 1.0);\n    }\n\n    int ch = 0;\n    float D = GetNormalizedIntensityMax4ch(Pe, ch);\n\n    // emission from volume\n    Lv += RGBtoXYZ(GetEmissionN(D, ch));\n\n    vec3 gradient = Gradient4ch(Pe, ch);\n    // send ray out from Pe toward light\n    switch (gShadingType)\n    {\n      case ShaderType_Brdf:\n      {\n        Lv += UniformSampleOneLight(ShaderType_Brdf, D, ch, normalize(-Re.m_D), Pe, normalize(gradient), seed);\n        break;\n      }\n\n      case ShaderType_Phase:\n      {\n        Lv += 0.5f * UniformSampleOneLight(ShaderType_Phase, D, ch, normalize(-Re.m_D), Pe, normalize(gradient), seed);\n        break;\n      }\n\n      case ShaderType_Mixed:\n      {\n        //const float GradMag = GradientMagnitude(Pe, volumedata.gradientVolumeTexture[ch]) * (1.0/volumedata.intensityMax[ch]);\n        float GradMag = length(gradient);\n        float PdfBrdf = (1.0f - exp(-gGradientFactor * GradMag));\n\n        vec3 cls; // xyz color\n        if (rand(seed) < PdfBrdf) {\n          cls = UniformSampleOneLight(ShaderType_Brdf, D, ch, normalize(-Re.m_D), Pe, normalize(gradient), seed);\n        }\n        else {\n          cls = 0.5f * UniformSampleOneLight(ShaderType_Phase, D, ch, normalize(-Re.m_D), Pe, normalize(gradient), seed);\n        }\n\n        Lv += cls;\n\n        break;\n      }\n    }\n  }\n  else\n  {\n    // background color:\n    // set Lv to a selected color based on environment light source?\n    // if (uShowLights > 0.0) {\n    //   int n = GetNearestLight(Ray(Re.m_O, Re.m_D, 0.0f, 1000000.0f), Li, Pl, lpdf);\n    //   if (n > -1)\n    //     Lv = Li;\n    // }\n    //Lv = vec3(r,0,0);\n  }\n\n  // set sample pixel value in frame estimate (prior to accumulation)\n\n  return vec4(Lv, alpha);\n}\n\nvec4 CumulativeMovingAverage(vec4 A, vec4 Ax, float N)\n{\n   return A + ((Ax - A) / max((N), 1.0f));\n}\n\nvoid main()\n{\n  // seed for rand(seed) function\n  uvec2 seed = uvec2(uFrameCounter, uFrameCounter + 1.0) * uvec2(gl_FragCoord);\n\n  // perform path tracing and get resulting pixel color\n  vec4 pixelColor = CalculateRadiance( seed );\n\n  vec4 previousColor = texture(tPreviousTexture, vUv);\n  if (uSampleCounter < 1.0) {\n    previousColor = vec4(0,0,0,0);\n  }\n\n  pc_fragColor = CumulativeMovingAverage(previousColor, pixelColor, uSampleCounter);\n}\n",this.pathTracingUniforms),this.screenTextureRenderToBuffer=new xx(bx,{image:{value:this.pathTracingRenderTarget.texture}}),this.screenOutputGeometry=new Rg(2,2),this.screenOutputMaterial=new Ym({uniforms:this.screenOutputShaderUniforms,vertexShader:yx,fragmentShader:"precision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform float gInvExposure;\nuniform sampler2D tTexture0;\nin vec2 vUv;\n\n// Used to convert from XYZ to linear RGB space\nconst mat3 XYZ_2_RGB = (mat3(\n  3.2404542, -1.5371385, -0.4985314,\n -0.9692660,  1.8760108,  0.0415560,\n  0.0556434, -0.2040259,  1.0572252\n));\n\nvec3 XYZtoRGB(vec3 xyz) {\n  return xyz * XYZ_2_RGB;\n}\n\nvoid main() {\n  vec4 pixelColor = texture(tTexture0, vUv);\n\n  pixelColor.rgb = XYZtoRGB(pixelColor.rgb);\n\n  // pixelColor.rgb = pow(pixelColor.rgb, vec3(1.0/2.2));\n  pixelColor.rgb = 1.0-exp(-pixelColor.rgb*gInvExposure);\n  pixelColor = clamp(pixelColor, 0.0, 1.0);\n\n  pc_fragColor = pixelColor; // sqrt(pixelColor);\n  // out_FragColor = pow(pixelColor, vec4(1.0/2.2));\n}\n",depthWrite:!1,depthTest:!1,blending:1,transparent:!0}),this.denoiseShaderUniforms=u_(),this.screenOutputDenoiseMaterial=new Ym({uniforms:this.denoiseShaderUniforms,vertexShader:yx,fragmentShader:"precision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform float gInvExposure;\nuniform int gDenoiseWindowRadius;\nuniform float gDenoiseNoise;\nuniform float gDenoiseInvWindowArea;\nuniform float gDenoiseWeightThreshold;\nuniform float gDenoiseLerpThreshold;\nuniform float gDenoiseLerpC;\nuniform vec2 gDenoisePixelSize;\n\nuniform sampler2D tTexture0;\nin vec2 vUv;\n\n// Used to convert from XYZ to linear RGB space\nconst mat3 XYZ_2_RGB = (mat3(\n 3.2404542, -1.5371385, -0.4985314,\n -0.9692660,  1.8760108,  0.0415560,\n  0.0556434, -0.2040259,  1.0572252\n));\n\nvec3 XYZtoRGB(vec3 xyz) {\n  return xyz * XYZ_2_RGB;\n}\n\nvoid main()\n{\n  vec4 pixelColor = texture(tTexture0, vUv);\n  // TODO TONE MAP!!!!!!\n  pixelColor.rgb = XYZtoRGB(pixelColor.rgb);\n\n  pixelColor.rgb = 1.0-exp(-pixelColor.rgb*gInvExposure);\n  pixelColor = clamp(pixelColor, 0.0, 1.0);\n\n  /////////////////////\n  /////////////////////\n  /////////////////////\n  /////////////////////\n  //// DENOISING FILTER\n  /////////////////////\n  // see https://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/imageDenoising/doc/imageDenoising.pdf\n  /////////////////////\n  vec4 clr00 = pixelColor;\n\n  float fCount = 0.0;\n  float SumWeights = 0.0;\n  vec3 clr = vec3(0.0, 0.0, 0.0);\n\n  vec2 uvsample = vUv;\n  vec3 rgbsample;\n  for (int i = -gDenoiseWindowRadius; i <= gDenoiseWindowRadius; i++) {\n    for (int j = -gDenoiseWindowRadius; j <= gDenoiseWindowRadius; j++) {\n\n      // boundary checking?\n      vec3 clrIJ = texture(tTexture0, vUv + vec2(float(i)/gDenoisePixelSize.x, float(j)/gDenoisePixelSize.y)).rgb;\n      //vec3 clrIJ = texelFetch(tTexture0, ivec2(gl_FragCoord.xy) + ivec2(i,j), 0).rgb;\n\n      rgbsample = XYZtoRGB(clrIJ);\n      // tone map!\n      rgbsample = 1.0 - exp(-rgbsample * gInvExposure);\n      rgbsample = clamp(rgbsample, 0.0, 1.0);\n\n      clrIJ = rgbsample;\n\n      float distanceIJ = (clr00.x-clrIJ.x)*(clr00.x-clrIJ.x) + (clr00.y-clrIJ.y)*(clr00.y-clrIJ.y) + (clr00.z-clrIJ.z)*(clr00.z-clrIJ.z);\n\n      // gDenoiseNoise = 1/h^2\n      //\n      float weightIJ = exp(-(distanceIJ * gDenoiseNoise + float(i * i + j * j) * gDenoiseInvWindowArea));\n\n      clr += (clrIJ * weightIJ);\n\n      SumWeights += weightIJ;\n\n      fCount += (weightIJ > gDenoiseWeightThreshold) ? gDenoiseInvWindowArea : 0.0;\n    }\n  }\n\n  SumWeights = 1.0 / SumWeights;\n\n  clr.rgb *= SumWeights;\n\n  float LerpQ = (fCount > gDenoiseLerpThreshold) ? gDenoiseLerpC : 1.0f - gDenoiseLerpC;\n\n  clr.rgb = mix(clr.rgb, clr00.rgb, LerpQ);\n  clr.rgb = clamp(clr.rgb, 0.0, 1.0);\n\n  pc_fragColor = vec4(clr.rgb, clr00.a);\n}\n",depthWrite:!1,depthTest:!1,blending:1,transparent:!0}),this.screenOutputMaterial.uniforms.tTexture0.value=this.pathTracingRenderTarget.texture,this.screenOutputDenoiseMaterial.uniforms.tTexture0.value=this.pathTracingRenderTarget.texture,this.screenOutputMesh=new Vm(this.screenOutputGeometry,this.screenOutputMaterial),this.gradientDelta=1/Math.max(n,Math.max(r,i));const l=1/this.gradientDelta;this.pathTracingUniforms.gGradientDeltaX.value=new Hf(this.gradientDelta,0,0),this.pathTracingUniforms.gGradientDeltaY.value=new Hf(0,this.gradientDelta,0),this.pathTracingUniforms.gGradientDeltaZ.value=new Hf(0,0,this.gradientDelta),this.pathTracingUniforms.gInvGradientDelta.value=l,this.pathTracingUniforms.gGradientFactor.value=50,this.updateSettings(t),this.settings=t;const c=this.getNormVolumeSize();this.pathTracingUniforms.gInvAaBbMax.value=new Hf(1/c.x,1/c.y,1/c.z).divide(e.normRegionSize),this.updateLightsSecondary()}cleanup(){this.volumeTexture.dispose()}setRenderUpdateListener(e){this.renderUpdateListener=e}resetProgress(){0!==this.sampleCounter&&this.renderUpdateListener&&this.renderUpdateListener(0),this.sampleCounter=0}getNormVolumeSize(){return this.volume.normPhysicalSize.clone().multiply(this.settings.scale)}updateSettings(e,t){if(void 0===t&&(t=ix.ALL),this.settings=e,t&ix.SAMPLING){const e=this.settings.resolution.clone(),t=window.devicePixelRatio?window.devicePixelRatio:1,n=Math.floor(e.x*this.settings.pixelSamplingRate/t),r=Math.floor(e.y*this.settings.pixelSamplingRate/t);this.pathTracingUniforms.uResolution.value.x=n,this.pathTracingUniforms.uResolution.value.y=r,this.pathTracingRenderTarget.setSize(n,r),this.screenTextureRenderTarget.setSize(n,r),this.pathTracingUniforms.gStepSize.value=this.settings.primaryRayStepSize*this.gradientDelta,this.pathTracingUniforms.gStepSizeShadow.value=this.settings.secondaryRayStepSize*this.gradientDelta}if(t&ix.TRANSFORM&&(this.pathTracingUniforms.flipVolume.value=this.settings.flipAxes),t&ix.MATERIAL&&(this.pathTracingUniforms.gDensityScale.value=150*this.settings.density,this.updateMaterial()),t&ix.ROI){const{normRegionSize:e,normRegionOffset:t}=this.volume,{bmin:n,bmax:r}=this.settings.bounds,i=this.getNormVolumeSize(),o=t.clone().subScalar(.5).multiply(i),a=t.clone().add(e).subScalar(.5).multiply(i),s=n.clone().multiply(i);this.pathTracingUniforms.gClippedAaBbMin.value=s.clamp(o,a);const l=r.clone().multiply(i);this.pathTracingUniforms.gClippedAaBbMax.value=l.clamp(o,a),this.pathTracingUniforms.gVolCenter.value=this.volume.getContentCenter().multiply(this.settings.scale)}t&ix.CAMERA&&this.updateExposure(this.settings.brightness),t&ix.MASK_ALPHA&&this.updateVolumeData4(),t&ix.VIEW&&(this.pathTracingUniforms.gCamera.value.mIsOrtho=this.settings.isOrtho?1:0),t&ix.SAMPLING&&(this.volumeTexture.minFilter=this.volumeTexture.magFilter=e.useInterpolation?Fh:Dh,this.volumeTexture.needsUpdate=!0),this.resetProgress()}updateVolumeDimensions(){this.updateSettings(this.settings,ix.ROI)}doRender(e,t){if(!this.volumeTexture)return;this.cameraIsMoving?(this.resetProgress(),this.frameCounter+=1):(this.sampleCounter+=1,this.frameCounter+=1,this.renderUpdateListener&&this.renderUpdateListener(this.sampleCounter)),this.pathTracingUniforms.uSampleCounter.value=this.sampleCounter,this.pathTracingUniforms.uFrameCounter.value=this.frameCounter,t.updateMatrixWorld(!0);const n=t.matrixWorld.clone();n.setPosition(new Hf(0,0,0)),this.updateLightsSecondary(n);let r=new Hf;r=t.getWorldDirection(r);const i=(new Hf).copy(t.up),o=(new Hf).copy(t.position),a=(new xp).makeRotationFromQuaternion((new $f).setFromEuler(this.settings.rotation).invert());o.sub(this.settings.translation),o.applyMatrix4(a),i.applyMatrix4(a),r.applyMatrix4(a),this.pathTracingUniforms.gCamera.value.mIsOrtho=Jb(t)?1:0,this.pathTracingUniforms.gCamera.value.mFrom.copy(o),this.pathTracingUniforms.gCamera.value.mN.copy(r),this.pathTracingUniforms.gCamera.value.mU.crossVectors(this.pathTracingUniforms.gCamera.value.mN,i).normalize(),this.pathTracingUniforms.gCamera.value.mV.crossVectors(this.pathTracingUniforms.gCamera.value.mU,this.pathTracingUniforms.gCamera.value.mN).normalize();const s=Jb(t)?Math.abs(t.top)/t.zoom:Math.tan(.5*t.fov*Math.PI/180),l=this.pathTracingUniforms.uResolution.value.x/this.pathTracingUniforms.uResolution.value.y;this.pathTracingUniforms.gCamera.value.mScreen.set(-s*l,s*l,s,-s);const c=this.pathTracingUniforms.gCamera.value.mScreen;this.pathTracingUniforms.gCamera.value.mInvScreen.set((c.y-c.x)/this.pathTracingUniforms.uResolution.value.x,(c.w-c.z)/this.pathTracingUniforms.uResolution.value.y);const u=.035*Math.max(this.sampleCounter-1,1)*.33;u>0&&u<1?(this.screenOutputDenoiseMaterial.uniforms.gDenoiseLerpC.value=u,this.screenOutputMesh.material=this.screenOutputDenoiseMaterial):this.screenOutputMesh.material=this.screenOutputMaterial,this.screenOutputDenoiseMaterial.uniforms.gDenoisePixelSize.value.x=this.pathTracingUniforms.uResolution.value.x,this.screenOutputDenoiseMaterial.uniforms.gDenoisePixelSize.value.y=this.pathTracingUniforms.uResolution.value.y,this.pathTracingRenderToBuffer.render(e,this.pathTracingRenderTarget),this.screenTextureRenderToBuffer.render(e,this.screenTextureRenderTarget),e.setRenderTarget(null)}get3dObject(){return this.screenOutputMesh}onStartControls(){this.cameraIsMoving=!0}onChangeControls(){}onEndControls(){this.cameraIsMoving=!1,this.resetProgress()}viewpointMoved(){this.resetProgress()}updateActiveChannels(e,t){const n=[-1,-1,-1,-1];let r=0;const i=this.volume.imageInfo.numChannels;for(let o=0;o<i&&r<4;++o)0!==e[o].rgbColor&&t[o].loaded&&(n[r]=o,r++);n.every(((e,t)=>e===this.viewChannels[t]),this)||(this.pathTracingUniforms.gNChannels.value=r,this.viewChannels=n,this.updateVolumeData4(),this.resetProgress(),this.updateLuts(e,t),this.updateMaterial())}updateVolumeData4(){const{x:e,y:t,z:n}=this.volume.imageInfo.subregionSize,r=new Uint8Array(e*t*n*4);r.fill(0);for(let i=0;i<4;++i){const o=this.viewChannels[i];if(-1===o)continue;const a=this.volume.getChannel(o);for(let o=0;o<n;++o)for(let n=0;n<t;++n)for(let s=0;s<e;++s)r[i+4*s+4*n*e+4*o*e*t]=255*a.normalizeRaw(a.getIntensity(s,n,o));if(-1!==this.settings.maskChannelIndex&&this.settings.maskAlpha<1){const o=this.volume.getChannel(this.settings.maskChannelIndex);let a=1;const s=this.settings.maskAlpha;for(let l=0;l<n;++l)for(let n=0;n<t;++n)for(let c=0;c<e;++c)a=o.getIntensity(c,n,l)>0?1:s,r[i+4*c+4*n*e+4*l*e*t]*=a}}this.volumeTexture.image.data.set(r),this.volumeTexture.needsUpdate=!0}updateLuts(e,t){for(let n=0;n<this.pathTracingUniforms.gNChannels.value;++n){const r=this.viewChannels[n],i=t[r].combineLuts(e[r].rgbColor);this.pathTracingUniforms.gLutTexture.value.image.data.set(i,n*__),this.pathTracingUniforms.gIntensityMax.value.setComponent(n,this.volume.channels[r].histogram.getMax()/255),this.pathTracingUniforms.gIntensityMin.value.setComponent(n,this.volume.channels[r].histogram.getMin()/255)}this.pathTracingUniforms.gLutTexture.value.needsUpdate=!0,this.resetProgress()}updateMaterial(){for(let e=0;e<this.viewChannels.length;++e){const t=this.viewChannels[e];if(t>-1){const n=this.volume.getChannel(t).combineLuts(this.settings.diffuse[t]);this.pathTracingUniforms.gLutTexture.value.image.data.set(n,e*__),this.pathTracingUniforms.gLutTexture.value.needsUpdate=!0,this.pathTracingUniforms.gDiffuse.value[e]=new Hf(1,1,1),this.pathTracingUniforms.gSpecular.value[e]=(new Hf).fromArray(this.settings.specular[t]).multiplyScalar(1/255),this.pathTracingUniforms.gEmissive.value[e]=(new Hf).fromArray(this.settings.emissive[t]).multiplyScalar(1/255),this.pathTracingUniforms.gGlossiness.value[e]=this.settings.glossiness[t]}}this.resetProgress()}updateShadingMethod(e){this.pathTracingUniforms.gShadingType.value=e,this.resetProgress()}updateShowLights(e){this.pathTracingUniforms.uShowLights.value=e,this.resetProgress()}updateExposure(e){e>.99999&&(e=.99999),this.screenOutputMaterial.uniforms.gInvExposure.value=1/(1-e)-1,this.screenOutputDenoiseMaterial.uniforms.gInvExposure.value=1/(1-e)-1,this.resetProgress()}updateCamera(e,t,n){this.pathTracingUniforms.gCamera.value.mApertureSize=n,this.pathTracingUniforms.gCamera.value.mFocalDistance=t,this.resetProgress()}updateLights(e){this.pathTracingUniforms.gLights.value[0].mColorTop=(new Hf).copy(e[0].mColorTop),this.pathTracingUniforms.gLights.value[0].mColorMiddle=(new Hf).copy(e[0].mColorMiddle),this.pathTracingUniforms.gLights.value[0].mColorBottom=(new Hf).copy(e[0].mColorBottom),this.pathTracingUniforms.gLights.value[1].mColor=(new Hf).copy(e[1].mColor),this.pathTracingUniforms.gLights.value[1].mTheta=e[1].mTheta,this.pathTracingUniforms.gLights.value[1].mPhi=e[1].mPhi,this.pathTracingUniforms.gLights.value[1].mDistance=e[1].mDistance,this.pathTracingUniforms.gLights.value[1].mWidth=e[1].mWidth,this.pathTracingUniforms.gLights.value[1].mHeight=e[1].mHeight,this.updateLightsSecondary(),this.resetProgress()}updateLightsSecondary(e){console.log("lights secondary");const t=this.getNormVolumeSize(),n=new Hf(.5*t.x,.5*t.y,.5*t.z);for(let t=0;t<2;++t)this.pathTracingUniforms.gLights.value[t].update(n,e)}updateClipRegion(e,t,n,r,i,o){this.settings.bounds={bmin:new Hf(e-.5,n-.5,i-.5),bmax:new Hf(t-.5,r-.5,o-.5)};const a=this.getNormVolumeSize();this.pathTracingUniforms.gClippedAaBbMin.value=new Hf(e*a.x-.5*a.x,n*a.y-.5*a.y,i*a.z-.5*a.z),this.pathTracingUniforms.gClippedAaBbMax.value=new Hf(t*a.x-.5*a.x,r*a.y-.5*a.y,o*a.z-.5*a.z),this.resetProgress()}setZSlice(e){return!0}}const T_=new dm(16776960);class A_{sliceUpdateWaiting=!1;constructor(e,t=new ax(e)){this.volume=e,this.uniforms={iResolution:{type:"v2",value:new vf(100,100)},CLIP_NEAR:{type:"f",value:0},CLIP_FAR:{type:"f",value:1e4},maskAlpha:{type:"f",value:1},BRIGHTNESS:{type:"f",value:0},DENSITY:{type:"f",value:1},GAMMA_MIN:{type:"f",value:0},GAMMA_MAX:{type:"f",value:1},GAMMA_SCALE:{type:"f",value:1},BREAK_STEPS:{type:"i",value:128},ATLAS_DIMS:{type:"v2",value:new vf(6,6)},Z_SLICE:{type:"i",value:0},SLICES:{type:"f",value:50},isOrtho:{type:"f",value:0},orthoThickness:{type:"f",value:1},orthoScale:{type:"f",value:.5},AABB_CLIP_MIN:{type:"v3",value:new Hf(-.5,-.5,-.5)},AABB_CLIP_MAX:{type:"v3",value:new Hf(.5,.5,.5)},inverseModelViewMatrix:{type:"m4",value:new xp},textureAtlas:{type:"t",value:new zf},textureAtlasMask:{type:"t",value:new zf},maxProject:{type:"i",value:0},interpolationEnabled:{type:"b",value:!0},flipVolume:{type:"v3",value:new Hf(1,1,1)},volumeScale:{type:"v3",value:new Hf(1,1,1)},textureRes:{type:"v2",value:new vf(1,1)}},[this.geometry,this.geometryMesh]=this.createGeometry(this.uniforms),this.boxHelper=new cv(new qf(new Hf(-.5,-.5,-.5),new Hf(.5,.5,.5)),T_),this.boxHelper.updateMatrixWorld(),this.boxHelper.visible=!1,this.geometryTransformNode=new Tg,this.geometryTransformNode.name="VolumeContainerNode",this.geometryTransformNode.add(this.boxHelper,this.geometryMesh),this.setUniform("Z_SLICE",Math.floor(e.imageInfo.volumeSize.z/2)),this.settings=t,this.updateVolumeDimensions(),this.updateSettings(t,ix.ALL)}updateSlice(){const e=Math.floor(this.settings.zSlice),t=this.volume.imageInfo.volumeSize.z;if(e<0||e>=t)return!1;const n=this.volume.imageInfo.subregionOffset.z,r=n+this.volume.imageInfo.subregionSize.z;return e<n||e>=r?this.sliceUpdateWaiting=!0:(this.setUniform("Z_SLICE",e),this.sliceUpdateWaiting=!1),!0}updateVolumeDimensions(){const e=this.volume.normPhysicalSize.clone().multiply(this.settings.scale),t=e.clone().multiply(this.volume.normRegionSize),n=this.volume.getContentCenter().clone().multiply(this.settings.scale);this.geometryMesh.position.copy(n),this.geometryMesh.scale.copy(t),this.setUniform("volumeScale",t),this.boxHelper.box.set(e.clone().multiplyScalar(-.5),e.clone().multiplyScalar(.5));const{atlasTileDims:r,subregionSize:i,volumeSize:o}=this.volume.imageInfo,a=new vf(i.x,i.y).multiply(r);this.setUniform("ATLAS_DIMS",r),this.setUniform("textureRes",a),this.setUniform("SLICES",o.z),this.sliceUpdateWaiting&&this.updateSlice(),this.channelData&&this.channelData.width===a.x&&this.channelData.height===a.y||(this.channelData?.cleanup(),this.channelData=new s_(a.x,a.y))}updateSettings(e,t){if(void 0===t&&(t=ix.ALL),this.settings=e,t&ix.VIEW){this.geometryMesh.visible=this.settings.visible,this.setUniform("orthoScale",this.settings.orthoScale),this.setUniform("isOrtho",this.settings.isOrtho?1:0);const e=this.settings.viewAxis;if(this.settings.isOrtho&&null!==e){const t=this.settings.bounds.bmax[e]-this.settings.bounds.bmin[e];this.setUniform("orthoThickness",t)}else this.setUniform("orthoThickness",1)}if(t&ix.BOUNDING_BOX){this.boxHelper.visible=this.settings.showBoundingBox;const e=this.settings.boundingBoxColor,t=new dm(e[0],e[1],e[2]);this.boxHelper.material.color=t}if(t&ix.TRANSFORM&&(this.geometryTransformNode.position.copy(this.settings.translation),this.geometryTransformNode.rotation.copy(this.settings.rotation),this.setUniform("flipVolume",this.settings.flipAxes)),t&ix.MATERIAL&&this.setUniform("DENSITY",this.settings.density),t&ix.CAMERA&&(this.setUniform("BRIGHTNESS",2*this.settings.brightness),this.setUniform("GAMMA_MIN",this.settings.gammaMin),this.setUniform("GAMMA_MAX",this.settings.gammaMax),this.setUniform("GAMMA_SCALE",this.settings.gammaLevel)),t&ix.ROI){const e=this.settings.bounds,{normRegionSize:t,normRegionOffset:n}=this.volume,r=t.clone().divideScalar(2).add(n).subScalar(.5),i=e.bmin.clone().sub(r).divide(t).clampScalar(-.5,.5),o=e.bmax.clone().sub(r).divide(t).clampScalar(-.5,.5);if(this.setUniform("AABB_CLIP_MIN",i),this.setUniform("AABB_CLIP_MAX",o),this.updateSlice()){const e=Math.floor(this.settings.zSlice)/this.volume.imageInfo.volumeSize.z,t=(Math.floor(this.settings.zSlice)+1)/this.volume.imageInfo.volumeSize.z;this.volume.updateRequiredData({subregion:new qf(new Hf(0,0,e),new Hf(1,1,t))})}}t&ix.SAMPLING&&(this.setUniform("interpolationEnabled",this.settings.useInterpolation),this.setUniform("iResolution",this.settings.resolution)),t&ix.MASK_ALPHA&&this.setUniform("maskAlpha",this.settings.maskChannelIndex<0?1:this.settings.maskAlpha),t&ix.MASK_DATA&&this.channelData.setChannelAsMask(this.settings.maskChannelIndex,this.volume.getChannel(this.settings.maskChannelIndex))}createGeometry(e){const t=new Rg(1,1),n=new Vm(t);n.name="Plane";const r=new Ym({uniforms:e,vertexShader:"precision highp float;\nprecision highp int;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix *\n    modelViewMatrix *\n    vec4(position, 1.0);\n}\n",fragmentShader:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec2 textureRes;\nuniform float GAMMA_MIN;\nuniform float GAMMA_MAX;\nuniform float GAMMA_SCALE;\nuniform float BRIGHTNESS;\nuniform float DENSITY;\nuniform float maskAlpha;\nuniform vec2 ATLAS_DIMS;\nuniform vec3 AABB_CLIP_MIN;\nuniform vec3 AABB_CLIP_MAX;\nuniform sampler2D textureAtlas;\nuniform sampler2D textureAtlasMask;\nuniform int Z_SLICE;\nuniform float SLICES;\nuniform bool interpolationEnabled;\nuniform vec3 flipVolume;\n\nvarying vec2 vUv;\n\n// for atlased texture, we need to find the uv offset for the slice at t\nvec2 offsetFrontBack(float t) {\n  int a = int(t);\n  int ax = int(ATLAS_DIMS.x);\n  vec2 os = vec2(float(a - (a / ax) * ax), float(a / ax)) / ATLAS_DIMS;\n  return clamp(os, vec2(0.0), vec2(1.0) - vec2(1.0) / ATLAS_DIMS);\n}\n\nvec4 sampleAtlas(sampler2D tex, vec4 pos) {\n  float bounds = float(pos[0] >= 0.0 && pos[0] <= 1.0 &&\n    pos[1] >= 0.0 && pos[1] <= 1.0 &&\n    pos[2] >= 0.0 && pos[2] <= 1.0);\n\n  float nSlices = float(SLICES);\n\n  vec2 loc0 = ((pos.xy - 0.5) * flipVolume.xy + 0.5) / ATLAS_DIMS;\n\n\n  if (interpolationEnabled) {\n    // loc ranges from 0 to 1/ATLAS_DIMS\n    // shrink loc0 to within one half edge texel - so as not to sample across edges of tiles.\n    loc0 = loc0 * (vec2(1.0) - ATLAS_DIMS / textureRes);\n  }\n  else {\n    // No interpolation - sample just one slice at a pixel center.\n    loc0 = floor(loc0 * textureRes) / textureRes;\n  }\n  loc0 += vec2(0.5) / textureRes;\n\n  float z = min(floor(pos.z * nSlices), nSlices - 1.0);\n\n  if(flipVolume.z == -1.0) {\n    z = nSlices - z - 1.0;\n  }\n\n  vec2 o = offsetFrontBack(z) + loc0;\n  vec4 voxelColor = texture2D(tex, o);\n\n  // Apply mask\n  float voxelMask = texture2D(textureAtlasMask, o).x;\n  voxelMask = mix(voxelMask, 1.0, maskAlpha);\n  voxelColor.rgb *= voxelMask;\n\n  return bounds * voxelColor;\n}\n\nvoid main() {\n  gl_FragColor = vec4(0.0);\n\n  vec3 boxMin = AABB_CLIP_MIN;\n  vec3 boxMax = AABB_CLIP_MAX;\n  // Normalize UV for [-0.5, 0.5] range\n  vec2 normUv = vUv - vec2(0.5);\n\n  // Return background color if outside of clipping box\n  if(normUv.x < boxMin.x || normUv.x > boxMax.x || normUv.y < boxMin.y || normUv.y > boxMax.y) {\n    gl_FragColor = vec4(0.0);\n    return;\n  }\n\n  // Normalize z-slice by total slices\n  vec4 pos = vec4(vUv, \n    (SLICES==1.0 && Z_SLICE==0) ? 0.0 : float(Z_SLICE) / (SLICES - 1.0), \n    0.0);\n\n  vec4 C;\n  C = sampleAtlas(textureAtlas, pos);\n  C.xyz *= BRIGHTNESS;\n\n  C = clamp(C, 0.0, 1.0);\n  gl_FragColor = C;\n  return;\n}",transparent:!0,depthTest:!0,depthWrite:!1});return n.material=r,[t,n]}cleanup(){this.geometry.dispose(),this.geometryMesh.material.dispose(),this.channelData.cleanup()}viewpointMoved(){}doRender(e,t){if(!this.geometryMesh.visible)return;this.channelData.gpuFuse(e),this.setUniform("textureAtlas",this.channelData.getFusedTexture()),this.setUniform("textureAtlasMask",this.channelData.maskTexture),this.geometryTransformNode.updateMatrixWorld(!0);const n=new xp;n.multiplyMatrices(t.matrixWorldInverse,this.geometryMesh.matrixWorld);const r=new xp;r.copy(n).invert(),this.setUniform("inverseModelViewMatrix",r)}get3dObject(){return this.geometryTransformNode}updateActiveChannels(e,t){this.channelData.fuse(e,t),this.setUniform("textureAtlas",this.channelData.getFusedTexture()),this.setUniform("textureAtlasMask",this.channelData.maskTexture)}setUniform(e,t){this.uniforms[e]&&(this.uniforms[e].value=t)}setRenderUpdateListener(e){}}class P_{constructor(e,t){switch(this.volume=e,this.settings=new ax(e),this.onChannelDataReadyCallback=void 0,this.viewMode=ox.NONE,this.channelColors=this.volume.channelColorsDefault.slice(),this.channelOptions=new Array(this.volume.imageInfo.numChannels).fill({}),this.fusion=this.channelColors.map(((e,t)=>{let n;return n=0===e[0]&&0===e[1]&&0===e[2]?0:[e[0],e[1],e[2]],{chIndex:t,lut:new Uint8Array(__),rgbColor:n}})),this.sceneRoot=new qp,this.meshVolume=new a_(this.volume),t.renderMode=t.renderMode||Zb.RAYMARCH,t.renderMode){case Zb.PATHTRACE:this.renderMode=Zb.PATHTRACE,this.volumeRendering=new M_(this.volume,this.settings);break;case Zb.SLICE:case Zb.RAYMARCH:default:this.renderMode=Zb.RAYMARCH,this.volumeRendering=new c_(this.volume,this.settings)}t.renderMode!==Zb.RAYMARCH&&t.renderMode!==Zb.SLICE||this.sceneRoot.add(this.meshVolume.get3dObject()),this.sceneRoot.add(this.volumeRendering.get3dObject()),this.sceneRoot.position.set(0,0,0),this.updateScale(),this.settings.translation=(new Hf).fromArray(this.volume.getTranslation()),this.settings.rotation=(new Rp).fromArray(this.volume.getRotation()),this.setOptions(t)}updateChannelDataRequired(e){const{enabled:t,isosurfaceEnabled:n}=this.channelOptions[e],r=t||n||e===this.settings.maskChannelIndex,i=this.volume.loadSpecRequired.channels;i.includes(e)?r||this.volume.updateRequiredData({channels:i.filter((t=>t!==e))}):r&&this.volume.updateRequiredData({channels:[...i,e]})}setOptions(e){void 0!==(e=e||{}).maskChannelIndex&&this.setChannelAsMask(e.maskChannelIndex),void 0!==e.maskAlpha&&this.setMaskAlpha(e.maskAlpha),void 0!==e.clipBounds&&(this.settings.bounds={bmin:new Hf(e.clipBounds[0],e.clipBounds[2],e.clipBounds[4]),bmax:new Hf(e.clipBounds[1],e.clipBounds[3],e.clipBounds[5])},this.setAxisClip(ox.X,e.clipBounds[0],e.clipBounds[1]),this.setAxisClip(ox.Y,e.clipBounds[2],e.clipBounds[3]),this.setAxisClip(ox.Z,e.clipBounds[4],e.clipBounds[5])),void 0!==e.translation&&this.setTranslation((new Hf).fromArray(e.translation)),void 0!==e.rotation&&this.setRotation((new Rp).fromArray(e.rotation)),void 0!==e.renderMode&&this.setVolumeRendering(e.renderMode),void 0===e.primaryRayStepSize&&void 0===e.secondaryRayStepSize||this.setRayStepSizes(e.primaryRayStepSize,e.secondaryRayStepSize),void 0!==e.showBoundingBox&&this.setShowBoundingBox(e.showBoundingBox),void 0!==e.boundingBoxColor&&this.setBoundingBoxColor(e.boundingBoxColor),void 0!==e.channels&&(this.channelOptions=e.channels,this.channelOptions.forEach(((e,t)=>{this.setChannelOptions(t,e)})))}setChannelOptions(e,t){if(this.channelOptions[e]=Object.assign(this.channelOptions[e],t),void 0!==t.enabled&&this.setVolumeChannelEnabled(e,t.enabled),void 0!==t.color&&this.updateChannelColor(e,t.color),void 0!==t.isosurfaceEnabled){const n=this.hasIsosurface(e);if(n!==t.isosurfaceEnabled){if(n&&!t.isosurfaceEnabled)this.meshVolume.destroyIsosurface(e);else if(!n&&t.isosurfaceEnabled&&this.volume.channels[e].loaded){const{isovalue:n,isosurfaceOpacity:r}=t;this.meshVolume.createIsosurface(e,this.channelColors[e],n,r)}this.updateChannelDataRequired(e)}else t.isosurfaceEnabled&&(void 0!==t.isovalue&&this.meshVolume.updateIsovalue(e,t.isovalue),void 0!==t.isosurfaceOpacity&&this.meshVolume.updateOpacity(e,t.isosurfaceOpacity))}else void 0!==t.isovalue&&this.meshVolume.updateIsovalue(e,t.isovalue),void 0!==t.isosurfaceOpacity&&this.meshVolume.updateOpacity(e,t.isosurfaceOpacity)}setRayStepSizes(e,t){e===this.settings.primaryRayStepSize&&t===this.settings.secondaryRayStepSize||(void 0!==e&&(this.settings.primaryRayStepSize=e),void 0!==t&&(this.settings.secondaryRayStepSize=t),this.volumeRendering.updateSettings(this.settings,ix.SAMPLING))}updateScale(){const{normPhysicalSize:e,normRegionSize:t}=this.volume,n=e.clone().multiply(t).multiply(this.settings.scale);this.meshVolume.setScale(n,this.volume.getContentCenter().multiply(this.settings.scale)),this.volumeRendering.updateVolumeDimensions(),this.volumeRendering.updateSettings(this.settings,ix.TRANSFORM)}setOrthoScale(e){this.settings.orthoScale!==e&&(this.settings.orthoScale=e,this.volumeRendering.updateSettings(this.settings,ix.VIEW))}setResolution(e,t){const n=new vf(e,t);this.settings.resolution.equals(n)||(this.meshVolume.setResolution(e,t),this.settings.resolution=n,this.volumeRendering.updateSettings(this.settings,ix.SAMPLING))}setAxisClip(e,t,n,r){this.settings.bounds.bmax[e]===n&&this.settings.bounds.bmin[e]===t&&this.settings.viewAxis===e&&this.settings.isOrtho===(r||!1)||(this.settings.bounds.bmax[e]=n,this.settings.bounds.bmin[e]=t,this.settings.viewAxis=e,this.settings.isOrtho=r||!1,e!==ox.NONE&&this.renderMode!==Zb.PATHTRACE&&this.meshVolume.setAxisClip(e,t,n,!!r),this.volumeRendering.updateSettings(this.settings,ix.ROI|ix.VIEW))}modeStringToAxis(e){return{X:ox.X,YZ:ox.X,Y:ox.Y,XZ:ox.Y,Z:ox.Z,XY:ox.Z}[e]||ox.NONE}setViewMode(e,t){const n=this.modeStringToAxis(e);this.viewMode=n,n===ox.Z?this.renderMode!==Zb.RAYMARCH&&this.renderMode!==Zb.PATHTRACE||this.setVolumeRendering(Zb.SLICE):this.renderMode===Zb.SLICE&&this.setVolumeRendering(t),this.settings.viewAxis!==n&&(this.settings.viewAxis=n,this.volumeRendering.updateSettings(this.settings,ix.VIEW))}setIsOrtho(e){this.settings.isOrtho!==e&&(this.settings.isOrtho=e,this.volumeRendering.updateSettings(this.settings,ix.VIEW))}setInterpolationEnabled(e){this.settings.useInterpolation!==e&&(this.settings.useInterpolation=e,this.volumeRendering.updateSettings(this.settings,ix.SAMPLING))}setOrthoThickness(e){this.renderMode!==Zb.PATHTRACE&&this.meshVolume.setOrthoThickness(e)}setGamma(e,t,n){this.settings.gammaMin===e&&this.settings.gammaLevel===t&&this.settings.gammaMax===n||(this.settings.gammaMin=e,this.settings.gammaLevel=t,this.settings.gammaMax=n,this.volumeRendering.updateSettings(this.settings,ix.CAMERA))}setFlipAxes(e,t,n){const r=new Hf(e,t,n);this.settings.flipAxes.equals(r)||(this.settings.flipAxes=r,this.meshVolume.setFlipAxes(e,t,n),this.volumeRendering.updateSettings(this.settings,ix.TRANSFORM))}setMaxProjectMode(e){this.settings.maxProjectMode!==e&&(this.settings.maxProjectMode=e,this.volumeRendering.updateSettings(this.settings,ix.VIEW))}onAnimate(e,t,n){t.updateMatrixWorld(!0),t.matrixWorldInverse.copy(t.matrixWorld).invert(),this.volumeRendering.doRender(e,t,n),this.renderMode!==Zb.PATHTRACE&&this.meshVolume.doRender()}getViewMode(){return this.viewMode}getIsovalue(e){return this.meshVolume.getIsovalue(e)}hasIsosurface(e){return this.meshVolume.hasIsosurface(e)}fuse(){this.volume&&this.volumeRendering.updateActiveChannels(this.fusion,this.volume.channels)}setRenderUpdateListener(e){this.renderUpdateListener=e,this.renderMode===Zb.PATHTRACE&&this.volumeRendering.setRenderUpdateListener(e)}updateShadingMethod(e){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.updateShadingMethod(e?1:0)}updateMaterial(){this.volumeRendering.updateActiveChannels(this.fusion,this.volume.channels),this.volumeRendering.updateSettings(this.settings,ix.MATERIAL)}updateLuts(){this.volumeRendering.updateActiveChannels(this.fusion,this.volume.channels),this.volumeRendering.updateSettings(this.settings,ix.MATERIAL)}setVoxelSize(e){this.volume.setVoxelSize(e),this.updateScale()}cleanup(){this.meshVolume.cleanup(),this.volumeRendering.cleanup()}getChannel(e){return this.volume.getChannel(e)}onChannelLoaded(e){for(let t=0;t<e.length;++t){const n=e[t],r=this.channelOptions[n];if(this.setChannelOptions(n,r),r.isosurfaceEnabled){this.meshVolume.destroyIsosurface(n);const{isovalue:e,isosurfaceOpacity:t}=r;this.meshVolume.createIsosurface(n,this.channelColors[n],e,t)}}this.onChannelDataReadyCallback?.()}onChannelAdded(e){this.channelColors[e]=this.volume.channelColorsDefault[e],this.fusion[e]={chIndex:e,lut:new Uint8Array[1024],rgbColor:[this.channelColors[e][0],this.channelColors[e][1],this.channelColors[e][2]]},this.settings.diffuse[e]=[this.channelColors[e][0],this.channelColors[e][1],this.channelColors[e][2]],this.settings.specular[e]=[0,0,0],this.settings.emissive[e]=[0,0,0],this.settings.glossiness[e]=0}saveChannelIsosurface(e,t){this.meshVolume.saveChannelIsosurface(e,t,this.volume.name)}setVolumeChannelEnabled(e,t){this.fusion[e].rgbColor=t?this.channelColors[e]:0,this.settings.visible=!this.fusion.every((e=>0===e.rgbColor)),this.volumeRendering.updateSettings(this.settings,ix.VIEW),this.updateChannelDataRequired(e)}isVolumeChannelEnabled(e){return 0!==this.fusion[e].rgbColor}updateChannelColor(e,t){this.channelColors[e]&&(this.channelColors[e]=t,this.settings.diffuse[e]=t,0!==this.fusion[e].rgbColor&&(this.fusion[e].rgbColor=t),this.meshVolume.updateMeshColors(this.channelColors))}updateMeshColors(){this.meshVolume.updateMeshColors(this.channelColors)}getChannelColor(e){return this.channelColors[e]}updateChannelMaterial(e,t,n,r,i){this.channelColors[e]&&(this.updateChannelColor(e,t),this.settings.diffuse[e]=t,this.settings.specular[e]=n,this.settings.emissive[e]=r,this.settings.glossiness[e]=i)}setDensity(e){this.settings.density=e,this.volumeRendering.updateSettings(this.settings,ix.MATERIAL)}getDensity(){return this.settings.density}setBrightness(e){this.settings.brightness=e,this.volumeRendering.updateSettings(this.settings,ix.CAMERA)}getBrightness(){return this.settings.brightness}setChannelAsMask(e){this.volume.channels[e]&&this.volume.channels[e].loaded&&(this.settings.maskChannelIndex=e,this.updateChannelDataRequired(e),this.volumeRendering.updateSettings(this.settings,ix.MASK_DATA))}setMaskAlpha(e){this.settings.maskAlpha=e,this.volumeRendering.updateSettings(this.settings,ix.MASK_ALPHA)}setShowBoundingBox(e){this.settings.showBoundingBox=e,this.volumeRendering.updateSettings(this.settings,ix.BOUNDING_BOX)}setBoundingBoxColor(e){this.settings.boundingBoxColor=e,this.volumeRendering.updateSettings(this.settings,ix.BOUNDING_BOX)}getIntensity(e,t,n,r){return this.volume.getIntensity(e,t,n,r)}onStartControls(){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.onStartControls()}onChangeControls(){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.onChangeControls()}onEndControls(){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.onEndControls()}onResetCamera(){this.volumeRendering.viewpointMoved()}onCameraChanged(e,t,n){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.updateCamera(e,t,n)}updateClipRegion(e,t,n,r,i,o){this.settings.bounds.bmin=new Hf(e-.5,n-.5,i-.5),this.settings.bounds.bmax=new Hf(t-.5,r-.5,o-.5),this.meshVolume.updateClipRegion(e,t,n,r,i,o),this.volumeRendering.updateSettings(this.settings,ix.ROI)}updateLights(e){this.renderMode===Zb.PATHTRACE&&this.volumeRendering.updateLights(e)}setPixelSamplingRate(e){this.settings.pixelSamplingRate=e,this.volumeRendering.updateSettings(this.settings,ix.SAMPLING)}setVolumeRendering(e){if(e!==Zb.PATHTRACE||this.renderMode!==Zb.PATHTRACE){switch(this.renderMode!==Zb.SLICE&&this.renderMode!==Zb.RAYMARCH||this.sceneRoot.remove(this.meshVolume.get3dObject()),this.sceneRoot.remove(this.volumeRendering.get3dObject()),this.volumeRendering.cleanup(),e){case Zb.PATHTRACE:this.volumeRendering=new M_(this.volume,this.settings),this.volume.updateRequiredData({subregion:new qf(new Hf(0,0,0),new Hf(1,1,1))}),this.volumeRendering.setRenderUpdateListener(this.renderUpdateListener);break;case Zb.SLICE:this.volumeRendering=new A_(this.volume,this.settings);break;case Zb.RAYMARCH:default:this.volumeRendering=new c_(this.volume,this.settings),this.volume.updateRequiredData({subregion:new qf(new Hf(0,0,0),new Hf(1,1,1))})}e!==Zb.RAYMARCH&&e!==Zb.SLICE||(this.renderUpdateListener&&this.renderUpdateListener(0),this.sceneRoot.add(this.meshVolume.get3dObject())),this.sceneRoot.add(this.volumeRendering.get3dObject()),this.renderMode=e,this.fuse()}}setTranslation(e){this.settings.translation.copy(e),this.meshVolume.setTranslation(this.settings.translation),this.volumeRendering.updateSettings(this.settings,ix.TRANSFORM)}setRotation(e){this.settings.rotation.copy(e),this.meshVolume.setRotation(this.settings.rotation),this.volumeRendering.updateSettings(this.settings,ix.TRANSFORM)}setScale(e){this.settings.scale.copy(e),this.updateScale()}setupGui(e){e.addInput(this.settings,"translation").on("change",(({value:e})=>this.setTranslation(e))),e.addInput(this.settings,"rotation").on("change",(({value:e})=>this.setRotation(e)));const t=e.addFolder({title:"Multiscale loading"});t.addInput(this.volume.loadSpecRequired,"maxAtlasEdge").on("change",(({value:e})=>this.volume.updateRequiredData({maxAtlasEdge:e}))),t.addInput(this.volume.loadSpecRequired,"useExplicitLevel").on("change",(({value:e})=>this.volume.updateRequiredData({useExplicitLevel:e}))),t.addInput(this.volume.loadSpecRequired,"scaleLevelBias").on("change",(({value:e})=>this.volume.updateRequiredData({scaleLevelBias:e}))),t.addInput(this.volume.loadSpecRequired,"multiscaleLevel").on("change",(({value:e})=>this.volume.updateRequiredData({multiscaleLevel:e})));const n=e.addFolder({title:"Pathtrace",expanded:!1});n.addInput(this.settings,"primaryRayStepSize",{min:1,max:100}).on("change",(({value:e})=>this.setRayStepSizes(e))),n.addInput(this.settings,"secondaryRayStepSize",{min:1,max:100}).on("change",(({value:e})=>this.setRayStepSizes(void 0,e)))}setZSlice(e){const t=this.volume.imageInfo.volumeSize.z;return this.settings.zSlice!==e&&e<t&&e>=0&&(this.settings.zSlice=e,this.volumeRendering.updateSettings(this.settings,ix.ROI),!0)}get showBoundingBox(){return this.settings.showBoundingBox}}const R_=Zb.RAYMARCH,I_=Zb.PATHTRACE,O_={numChunksToPrefetchAhead:5,prefetchAlongNonPlayingAxis:!1,throttleArrivingChannelData:!0};class k_{constructor(e){const t=void 0===e?.useWebGL2||e.useWebGL2;this.canvas3d=new _x(e?.parentElement,t),this.redraw=this.redraw.bind(this),this.scene=new og,this.backgroundColor=new dm(0),this.lights=[],this.pixelSamplingRate=.75,this.exposure=.5,this.volumeRenderMode=Zb.RAYMARCH,window.addEventListener("resize",(()=>this.resize(null))),this.lightContainer=new qp,this.ambientLight=new ev,this.spotLight=new Kg,this.reflectedLight=new Qg,this.fillLight=new Qg,this.buildScene(),this.tweakpane=null,window.addEventListener("keydown",this.handleKeydown)}preRender(){const e=this.scene.getObjectByName("lightContainer");if(e&&e.rotation.setFromRotationMatrix(this.canvas3d.camera.matrixWorld),this.image&&Jb(this.canvas3d.camera)){const{top:e,zoom:t}=this.canvas3d.camera;this.image.setOrthoScale(Math.abs(e)/t),this.updateOrthoScaleBar(this.image.volume)}}updateOrthoScaleBar(e){this.canvas3d.updateOrthoScaleBar(e.physicalScale,e.imageInfo.spatialUnit)}updatePerspectiveScaleBar(e){this.canvas3d.updatePerspectiveScaleBar(e.tickMarkPhysicalLength,e.imageInfo.spatialUnit)}updateTimestepIndicator(e){const{times:t,timeScale:n,timeUnit:r}=e.imageInfo,i=e.loadSpec.time;this.canvas3d.updateTimestepIndicator(i*n,t*n,r)}capture(e){return this.canvas3d.requestCapture(e)}getDOMElement(){return this.canvas3d.containerdiv}getCameraState(){return this.canvas3d.getCameraState()}setCameraState(e){this.canvas3d.setCameraState(e),this.redraw()}redraw(){this.canvas3d.redraw()}unsetImage(){return this.image&&(this.canvas3d.removeControlHandlers(),this.canvas3d.animateFuncs=[],this.scene.remove(this.image.sceneRoot)),this.image}addVolume(e,t){e.addVolumeDataObserver(this),(t=t||{}).renderMode=this.volumeRenderMode,this.setImage(new P_(e,t))}setVolumeChannelOptions(e,t,n){this.image?.setChannelOptions(t,n),this.redraw()}setVolumeDisplayOptions(e,t){this.image?.setOptions(t),this.redraw()}removeVolume(e){const t=this.unsetImage();t&&t.cleanup(),e&&e.removeVolumeDataObserver(this)}removeAllVolumes(){this.image&&this.removeVolume(this.image.volume),this.image=void 0}setRenderUpdateListener(e){this.renderUpdateListener=e,this.image?.setRenderUpdateListener(e)}onVolumeData(e,t){this.image?.updateScale(),this.image?.onChannelLoaded(t),e.isLoaded()&&this.tweakpane&&this.tweakpane.refresh()}onVolumeChannelAdded(e,t){this.image?.onChannelAdded(t)}onVolumeLoadError(e,t){this.loadErrorHandler?.(e,t)}setLoadErrorHandler(e){this.loadErrorHandler=e}setTime(e,t,n){const r=Math.max(0,Math.min(t,e.imageInfo.times-1));e.updateRequiredData({time:r},n),this.updateTimestepIndicator(e)}setScaleLevelBias(e,t){e.updateRequiredData({scaleLevelBias:t})}setVolumeChannelAsMask(e,t){this.image?.setChannelAsMask(t),this.redraw()}setVoxelSize(e,t,n){this.image&&(this.image.setVoxelSize((new Hf).fromArray(t)),n&&this.image.volume.setUnitSymbol(n),this.updatePerspectiveScaleBar(this.image.volume)),this.redraw()}setRayStepSizes(e,t,n){this.image?.setRayStepSizes(t,n),this.redraw()}setShowBoundingBox(e,t){this.image?.setShowBoundingBox(t),this.canvas3d.setShowPerspectiveScaleBar(t&&this.canvas3d.showOrthoScaleBar&&this.volumeRenderMode!==Zb.PATHTRACE),this.redraw()}setBoundingBoxColor(e,t){this.image?.setBoundingBoxColor(t),this.canvas3d.setPerspectiveScaleBarColor(t),this.redraw()}setBackgroundColor(e){const t=(new dm).fromArray(e);this.backgroundColor=t,this.canvas3d.setClearColor(t,1),this.redraw()}hasIsosurface(e,t){return this.image?.hasIsosurface(t)||!1}saveChannelIsosurface(e,t,n){this.image?.saveChannelIsosurface(t,n)}setImage(e){const t=this.unsetImage();return this.image=e,this.scene.add(e.sceneRoot),this.image.setResolution(this.canvas3d.getWidth(),this.canvas3d.getHeight()),this.image.setIsOrtho(Jb(this.canvas3d.camera)),this.image.setBrightness(this.exposure),this.canvas3d.setControlHandlers(this.onStartControls.bind(this),this.onChangeControls.bind(this),this.onEndControls.bind(this)),this.canvas3d.animateFuncs.push(this.preRender.bind(this)),this.canvas3d.animateFuncs.push(e.onAnimate.bind(e)),this.updatePerspectiveScaleBar(e.volume),this.updateTimestepIndicator(e.volume),this.redraw(),t}onStartControls(){this.volumeRenderMode!==Zb.PATHTRACE&&this.canvas3d.startRenderLoop(),this.image?.onStartControls()}onChangeControls(){this.image?.onChangeControls()}onEndControls(){this.image?.onEndControls(),this.volumeRenderMode===Zb.PATHTRACE||this.canvas3d.controls.autoRotate||this.canvas3d.stopRenderLoop(),this.redraw()}buildScene(){this.scene=this.canvas3d.scene,this.canvas3d.setClearColor(this.backgroundColor,1),this.lights=[new h_(1),new h_(0)],this.lightContainer=new qp,this.lightContainer.name="lightContainer",this.ambientLight=new ev(wx.ambientLightSettings.color,wx.ambientLightSettings.intensity),this.ambientLight.layers.enable(1),this.lightContainer.add(this.ambientLight),this.spotLight=new Kg(wx.spotlightSettings.color,wx.spotlightSettings.intensity),this.spotLight.position.set(wx.spotlightSettings.position.x,wx.spotlightSettings.position.y,wx.spotlightSettings.position.z),this.spotLight.target=new qp,this.spotLight.angle=wx.spotlightSettings.angle,this.spotLight.layers.enable(1),this.lightContainer.add(this.spotLight),this.reflectedLight=new Qg(wx.reflectedLightSettings.color),this.reflectedLight.position.set(wx.reflectedLightSettings.position.x,wx.reflectedLightSettings.position.y,wx.reflectedLightSettings.position.z),this.reflectedLight.castShadow=wx.reflectedLightSettings.castShadow,this.reflectedLight.intensity=wx.reflectedLightSettings.intensity,this.reflectedLight.layers.enable(1),this.lightContainer.add(this.reflectedLight),this.fillLight=new Qg(wx.fillLightSettings.color),this.fillLight.position.set(wx.fillLightSettings.position.x,wx.fillLightSettings.position.y,wx.fillLightSettings.position.z),this.fillLight.castShadow=wx.fillLightSettings.castShadow,this.fillLight.intensity=wx.fillLightSettings.intensity,this.fillLight.layers.enable(1),this.lightContainer.add(this.fillLight),this.scene.add(this.lightContainer)}setCameraMode(e){this.canvas3d.switchViewMode(e),this.image?.setViewMode(e,this.volumeRenderMode),this.image?.setIsOrtho("3D"!==e),this.canvas3d.redraw()}setZSlice(e,t){return!!this.image?.setZSlice(t)&&(this.canvas3d.redraw(),!0)}setShowAxis(e){this.canvas3d.showAxis=e,this.canvas3d.redraw()}setShowScaleBar(e){this.canvas3d.setShowOrthoScaleBar(e),this.canvas3d.setShowPerspectiveScaleBar(e&&!!this.image?.showBoundingBox&&this.volumeRenderMode!==Zb.PATHTRACE)}setShowTimestepIndicator(e){const t=this.image?.volume.imageInfo.times,n=!!t&&t>1;this.canvas3d.setShowTimestepIndicator(e&&n)}setAxisPosition(e,t,n=Qb.BOTTOM_LEFT){this.canvas3d.setAxisPosition(e,t,n),this.canvas3d.showAxis&&this.canvas3d.redraw()}setScaleBarPosition(e,t,n=Qb.BOTTOM_RIGHT){this.canvas3d.setIndicatorPosition(!1,e,t,n)}setTimestepIndicatorPosition(e,t,n=Qb.BOTTOM_RIGHT){this.canvas3d.setIndicatorPosition(!0,e,t,n)}setAutoRotate(e){this.canvas3d.setAutoRotate(e),e?this.onStartControls():this.onEndControls()}setScaleUnit(e){this.image&&(this.image.volume.setUnitSymbol(e),this.updatePerspectiveScaleBar(this.image.volume),Jb(this.canvas3d.camera)&&this.updateOrthoScaleBar(this.image.volume))}setFlipVolume(e,t,n,r){this.image?.setFlipAxes(t,n,r),this.redraw()}setInterpolationEnabled(e,t){this.image?.setInterpolationEnabled(t),this.redraw()}resize(e,t,n,r,i,o){this.canvas3d.resize(e,t,n,r,i,o),this.image?.setResolution(this.canvas3d.getWidth(),this.canvas3d.getHeight()),this.redraw()}updateDensity(e,t){this.image?.setDensity(t),this.redraw()}updateShadingMethod(e,t){this.image?.updateShadingMethod(t)}setGamma(e,t,n,r){this.image?.setGamma(t,n,r),this.redraw()}setMaxProjectMode(e,t){this.image?.setMaxProjectMode(t),this.redraw()}updateActiveChannels(e){this.image?.fuse(),this.redraw()}updateLuts(e){this.image?.updateLuts(),this.redraw()}updateMaterial(e){this.image?.updateMaterial(),this.redraw()}updateExposure(e){this.exposure=e,this.image?.setBrightness(e),this.redraw()}updateCamera(e,t,n){this.canvas3d.updateCameraFocus(e,t,n),this.image?.onCameraChanged(e,t,n),this.redraw()}updateClipRegion(e,t,n,r,i,o,a){this.image?.updateClipRegion(t,n,r,i,o,a),this.redraw()}setAxisClip(e,t,n,r,i){this.image?.setAxisClip(t,n,r,i),this.redraw()}updateLights(e){this.lights=e,this.image?.updateLights(e)}updatePixelSamplingRate(e){this.pixelSamplingRate!==e&&(this.pixelSamplingRate=e,this.image?.setPixelSamplingRate(e))}updateMaskAlpha(e,t){this.image?.setMaskAlpha(t),this.redraw()}setVolumeChannelEnabled(e,t,n){this.image?.setChannelOptions(t,{enabled:n}),this.redraw()}updateChannelMaterial(e,t,n,r,i,o){this.image?.updateChannelMaterial(t,n,r,i,o)}updateChannelColor(e,t,n){this.image?.updateChannelColor(t,n)}setVolumeRenderMode(e){if(e!==this.volumeRenderMode){if(this.volumeRenderMode=e,this.image){if(this.image.getViewMode()===ox.Z)return;e===Zb.PATHTRACE&&this.canvas3d.hasWebGL2?(this.image.setVolumeRendering(Zb.PATHTRACE),this.image.updateLights(this.lights),this.canvas3d.startRenderLoop()):e===Zb.RAYMARCH&&(this.image.setVolumeRendering(Zb.RAYMARCH),this.canvas3d.redraw()),this.updatePixelSamplingRate(this.pixelSamplingRate),this.image.setIsOrtho(Jb(this.canvas3d.camera)),this.image.setResolution(this.canvas3d.getWidth(),this.canvas3d.getHeight()),this.setAutoRotate(this.canvas3d.controls.autoRotate),this.image.setRenderUpdateListener(this.renderUpdateListener)}this.canvas3d.setShowPerspectiveScaleBar(this.canvas3d.showOrthoScaleBar&&!!this.image?.showBoundingBox&&e!==Zb.PATHTRACE)}}setVolumeTranslation(e,t){this.image?.setTranslation((new Hf).fromArray(t)),this.redraw()}setVolumeRotation(e,t){this.image?.setRotation((new Rp).fromArray(t)),this.redraw()}setVolumeScale(e,t){this.image?.setScale((new Hf).fromArray(t)),this.redraw()}resetCamera(){this.canvas3d.resetCamera(),this.image?.onResetCamera(),this.redraw()}hasWebGL2(){return this.canvas3d.hasWebGL2}handleKeydown=e=>{"Digit1"===e.code&&e.altKey&&e.ctrlKey&&(this.tweakpane?(this.tweakpane.dispose(),this.tweakpane=null):this.tweakpane=this.setupGui(this.canvas3d.containerdiv))};removeEventListeners(){window.removeEventListener("keydown",this.handleKeydown)}setupGui(e){const t=new dv.Pane({title:"Advanced Settings",container:e});Object.assign(t.element.style,{position:"absolute",top:"0",right:"0"});const n=t.addFolder({title:"Lights (isosurface)"}),r=(e,t)=>{const r=n.addFolder({title:t,expanded:!1});r.addInput(e,"color",{color:{type:"float"}}),r.addInput(e,"intensity",{min:0}),e.isAmbientLight||r.addInput(e,"position")};r(this.spotLight,"spot light"),r(this.ambientLight,"ambient light"),r(this.reflectedLight,"reflected light"),r(this.fillLight,"fill light"),this.image?.setupGui(t);const i=t.addFolder({title:"Prefetch"});return i.addInput(O_,"numChunksToPrefetchAhead").on("change",(e=>{this.loaderContext?.getActiveLoader()?.updateFetchOptions({maxPrefetchDistance:[e.value,e.value,e.value,e.value]}),this.image?.volume.updateRequiredData({})})),i.addInput(O_,"prefetchAlongNonPlayingAxis").on("change",(e=>{this.loaderContext?.getActiveLoader()?.updateFetchOptions({onlyPriorityDirections:!e.value})})),i.addInput(O_,"throttleArrivingChannelData").on("change",(e=>{this.loaderContext?.setThrottleChannelData(e.value)})),t}}class L_{constructor(e){this.dataMinBin=0,this.dataMaxBin=0,this.maxBin=0,this.bins=new Uint32Array,this.min=0,this.max=0,this.binSize=0;const t=L_.calculateHistogram(e,256);this.bins=t.bins,this.min=t.min,this.max=t.max,this.binSize=t.binSize;for(let e=0;e<this.bins.length;e++)if(this.bins[e]>0){this.dataMinBin=e;break}for(let e=this.bins.length-1;e>=0;e--)if(this.bins[e]>0){this.dataMaxBin=e;break}this.pixelCount=e.length,this.maxBin=1;let n=this.bins[1];for(let e=1;e<this.bins.length;e++)this.bins[e]>n&&(this.maxBin=e,n=this.bins[e])}static findBin(e,t,n,r){let i=Math.floor((e-t)/n);return i===r&&i--,i}findBinOfValue(e){return L_.findBin(e,this.min,this.binSize,256)}getDataMin(){return this.min}getDataMax(){return this.max}getMin(){return this.dataMinBin}getMax(){return this.dataMaxBin}getNumBins(){return this.bins.length}getBin(e){return this.bins[e]}getBinRange(e){return[this.min+e*this.binSize,this.min+(e+1)*this.binSize]}findBinOfPercentile(e){const t=this.pixelCount*e;let n=0,r=0;for(n=0;n<this.bins.length&&(r+=this.bins[n],!(r>t));++n);return n}findBestFitBins(){const e=this.pixelCount/10;let t=0,n=0;for(t=1;t<this.bins.length&&(n+=this.bins[t],!(n>e));++t);const r=t;for(n=0,t=this.bins.length-1;t>=1&&(n+=this.bins[t],!(n>e));--t);return[r,t]}findAutoIJBins(){const e=this.pixelCount,t=e/10,n=e/5e3;let r=this.bins.length-1,i=1;for(let e=1;e<this.bins.length;++e)if(this.bins[e]>n&&this.bins[e]<=t){r=e;break}for(let e=this.bins.length-1;e>=1;--e)if(this.bins[e]>n&&this.bins[e]<=t){i=e;break}return i<r&&(r=0,i=255),[r,i]}findAutoMinMax(){const e=Math.floor(.1*this.bins[this.maxBin]);let t=0,n=this.bins.length-1;for(let n=1;n<this.bins.length;++n)if(this.bins[n]>e){t=n;break}for(let t=this.bins.length-1;t>=1;--t)if(this.bins[t]>e){n=t;break}return[t,n]}static calculateHistogram(e,t=1){t<1&&(t=1);let n=e[0],r=e[0];for(let t=1;t<e.length;t++)e[t]<n?n=e[t]:e[t]>r&&(r=e[t]);const i=new Uint32Array(t).fill(0),o=(r-n)/t==0?1:(r-n)/t;for(let r=0;r<e.length;r++){const a=e[r];i[L_.findBin(a,n,o,t)]++}return{bins:i,min:n,max:r,binSize:o}}}class N_{constructor(e){this.loaded=!1,this.dtype="uint8",this.imgData={data:new Uint8Array,width:0,height:0},this.rawMin=0,this.rawMax=255,this.dataTexture=new ag(new Uint8Array,0,0),this.lutTexture=new ag(new Uint8Array(__),256,1,Qh,Vh),this.lutTexture.minFilter=this.lutTexture.magFilter=Fh,this.lutTexture.generateMipmaps=!1,this.volumeData=new Uint8Array,this.name=e,this.histogram=new L_(new Uint8Array),this.dims=[0,0,0],this.lut=(new E_).createFromMinMax(0,255),this.colorPalette=new Uint8Array(__).fill(0),this.colorPaletteAlpha=0}combineLuts(e,t){const n=t||new Uint8Array(__);if(!e)return n;const r=[e[0]/255,e[1]/255,e[2]/255];if(1===this.colorPaletteAlpha)n.set(this.colorPalette);else if(0===this.colorPaletteAlpha){n.set(this.lut.lut);for(let e=0;e<256;++e)n[4*e+0]*=r[0],n[4*e+1]*=r[1],n[4*e+2]*=r[2]}else for(let e=0;e<256;++e)n[4*e+0]=this.colorPalette[4*e+0]*this.colorPaletteAlpha+this.lut.lut[4*e+0]*(1-this.colorPaletteAlpha)*r[0],n[4*e+1]=this.colorPalette[4*e+1]*this.colorPaletteAlpha+this.lut.lut[4*e+1]*(1-this.colorPaletteAlpha)*r[1],n[4*e+2]=this.colorPalette[4*e+2]*this.colorPaletteAlpha+this.lut.lut[4*e+2]*(1-this.colorPaletteAlpha)*r[2],n[4*e+3]=this.colorPalette[4*e+3]*this.colorPaletteAlpha+this.lut.lut[4*e+3]*(1-this.colorPaletteAlpha);return this.lutTexture.image.data.set(n),this.lutTexture.needsUpdate=!0,n}setRawDataRange(e,t){0===this.rawMin&&0===this.rawMax||0===e&&0===t||(this.lut.remapDomains(this.rawMin,this.rawMax,e,t),this.rawMin=e,this.rawMax=t)}getHistogram(){return this.histogram}getIntensity(e,t,n){return this.volumeData[e+t*this.dims[0]+n*(this.dims[0]*this.dims[1])]}normalizeRaw(e){return(e-this.rawMin)/(this.rawMax-this.rawMin)}getIntensityFromAtlas(e,t,n){const r=this.imgData.width/this.dims[0],i=n%r,o=Math.floor(n/r),a=i*this.dims[0]+e+(o*this.dims[1]+t)*this.imgData.width;return this.imgData.data[a]}rebuildDataTexture(e,t,n){this.dataTexture&&this.dataTexture.dispose();let r=ed,i=Vh,o="LUMINANCE";switch(this.dtype){case"uint8":i=Vh,r=id,o="R8UI";break;case"int8":i=$h,r=id,o="R8I";break;case"uint16":i=Gh,r=id,o="R16UI";break;case"int16":i=Hh,r=id,o="R16I";break;case"uint32":i=qh,r=id,o="R32UI";break;case"int32":i=Wh,r=id,o="R32I";break;case"float32":i=Xh,r=rd,o="R32F";break;default:console.warn("unsupported dtype for channel data",this.dtype)}this.dataTexture=new ag(e,t,n,r,i,300,Lh,Lh,Dh,Dh),this.dataTexture.internalFormat=o,this.dataTexture.needsUpdate=!0}setFromAtlas(e,t,n,r,i,o,a){this.dtype=r,this.imgData={data:e,width:t,height:n},this.rebuildDataTexture(this.imgData.data,t,n),this.loaded=!0,this.histogram=new L_(e),this.setRawDataRange(i,o),this.unpackFromAtlas(a.x,a.y,a.z)}unpackFromAtlas(e,t,n){const r=this.imgData.data;this.dims=[e,t,n];const i=Kb[this.dtype];this.volumeData=new i(e*t*n);const o=this.imgData.width/e,a=this.imgData.width;let s=0,l=0,c=0,u=0,h=0;for(let i=0;i<n;++i){s=i%o,l=Math.floor(i/o),c=s*e+l*t*a;for(let n=0;n<t;++n)u=n*a,h=i*(e*t)+n*e,this.volumeData.set(r.subarray(c+u,c+u+e),h)}}setFromVolumeData(e,t,n,r,i,o,a,s,l){this.dims=[t,n,r],this.volumeData=e,this.dtype=l,this.packToAtlas(t,n,r,i,o),this.loaded=!0,this.setRawDataRange(a,s),this.histogram=new L_(this.volumeData)}packToAtlas(e,t,n,r,i){(r%e!=0||i%t!=0||r/e*(i/t)<n)&&(console.log("ERROR - atlas and volume dims are inconsistent"),console.log(r,i,e,t,n));const o=Kb[this.dtype];this.imgData={width:r,height:i,data:new o(r*i)},this.imgData.data.fill(0);const a=this.imgData.data,s=e,l=t,c=n,u=this.imgData.width/s,h=this.imgData.width;let d=0,f=0,p=0,m=0,g=0;for(let e=0;e<c;++e){d=e%u,f=Math.floor(e/u),p=d*s+f*l*h;for(let t=0;t<l;++t)m=t*h,g=e*(s*l)+t*s,a.set(this.volumeData.subarray(g,g+s),p+m)}this.rebuildDataTexture(this.imgData.data,r,i)}setLut(e){this.lut=e}setColorPalette(e){this.colorPalette=e}setColorPaletteAlpha(e){this.colorPaletteAlpha=e}}function D_(e){return new Hf(e.shape[4],e.shape[3],e.shape[2])}class z_{constructor(e){this.imageInfo=e||{name:"",atlasTileDims:[1,1],subregionSize:[1,1,1],subregionOffset:[0,0,0],combinedNumChannels:1,channelNames:["0"],channelColors:[[255,255,255]],multiscaleLevel:0,multiscaleLevelDims:[{shape:[1,1,1,1,1],spacing:[1,1,1,1,1],spaceUnit:"",timeUnit:"",dataType:"uint8"}],transform:{translation:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}}}get currentLevelDims(){return this.imageInfo.multiscaleLevelDims[this.imageInfo.multiscaleLevel]}get numChannels(){return this.imageInfo.combinedNumChannels}get originalSize(){return D_(this.imageInfo.multiscaleLevelDims[0])}get volumeSize(){return D_(this.currentLevelDims)}get physicalPixelSize(){return e=this.imageInfo.multiscaleLevelDims[0],new Hf(e.spacing[4],e.spacing[3],e.spacing[2]);var e}get spatialUnit(){return this.imageInfo.multiscaleLevelDims[0].spaceUnit}get times(){return this.currentLevelDims.shape[0]}get timeScale(){return this.currentLevelDims.spacing[0]}get timeUnit(){return this.currentLevelDims.timeUnit}get numMultiscaleLevels(){return this.imageInfo.multiscaleLevelDims.length}get channelNames(){return this.imageInfo.channelNames}get channelColors(){return this.imageInfo.channelColors}get subregionSize(){return new Hf(...this.imageInfo.subregionSize)}get subregionOffset(){return new Hf(...this.imageInfo.subregionOffset)}get multiscaleLevel(){return this.imageInfo.multiscaleLevel}get atlasTileDims(){return new vf(...this.imageInfo.atlasTileDims)}get transform(){return{translation:new Hf(...this.imageInfo.transform.translation),rotation:new Hf(...this.imageInfo.transform.rotation),scale:new Hf(...this.imageInfo.transform.scale)}}}const U_=4096;function F_(e,t,n){let r=1,i=e,o=i*t/(r*n),a=r,s=i;for(;o>1;)a=r,s=i,i-=1,r=Math.ceil(e/i),o=i*t/(r*n);return new vf(a,s)}function B_(e,t=4096){const n=e[2],r=e[1],i=e[0];return Math.floor(t/n)*Math.floor(t/r)>=i}class j_{time=0;subregion=new qf(new Hf(0,0,0),new Hf(1,1,1));useExplicitLevel=!1}class V_{setPrefetchPriority(e){}syncMultichannelLoading(e){}updateFetchOptions(e){}async createVolume(e,t){const{imageInfo:n,loadSpec:r}=await this.createImageInfo(e),i=new $_(n,r,this);return i.channelLoadCallback=t,i.imageMetadata=function(e){const t=new z_(e),n=t.volumeSize.clone().multiply(t.physicalPixelSize),r={};return r.Dimensions={...t.subregionSize},r["Original dimensions"]={...t.originalSize},r["Physical size"]={x:n.x+t.spatialUnit,y:n.y+t.spatialUnit,z:n.z+t.spatialUnit},r["Physical size per pixel"]={x:t.physicalPixelSize.x+t.spatialUnit,y:t.physicalPixelSize.y+t.spatialUnit,z:t.physicalPixelSize.z+t.spatialUnit},r["Multiresolution levels"]=e.multiscaleLevelDims,r.Channels=e.combinedNumChannels,r["Time series frames"]=t.times||1,e.userData&&!function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e.userData)&&(r["User data"]=e.userData),r}(n),i}async loadVolumeData(e,t,n){const r={...e.loadSpec,...t};return this.loadRawChannelData(e.imageInfo.imageInfo,r,((t,n)=>{t&&(e.imageInfo=new z_(t),e.updateDimensions()),e.loadSpec={...n,...r}}),((t,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=t[s],c=r[s],u=i[s],h=o[s];a?e.setChannelDataFromAtlas(l,u,a[0],a[1],h,c):e.setChannelDataFromVolume(l,u,h,c),n?.(e,l)}}))}}class $_{constructor(e={name:"",atlasTileDims:[1,1],subregionSize:[1,1,1],subregionOffset:[0,0,0],combinedNumChannels:1,channelNames:["0"],channelColors:[[255,255,255]],multiscaleLevel:0,multiscaleLevelDims:[{shape:[1,1,1,1,1],spacing:[1,1,1,1,1],spaceUnit:"",timeUnit:"",dataType:"uint8"}],transform:{translation:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}},t=new j_,n){if(this.loaded=!1,this.imageInfo=new z_(e),this.name=e.name,this.loadSpec={multiscaleLevel:0,scaleLevelBias:0,maxAtlasEdge:U_,channels:Array.from({length:this.imageInfo.numChannels},((e,t)=>t)),...t},this.loadSpecRequired={...this.loadSpec,channels:this.loadSpec.channels.slice(),subregion:this.loadSpec.subregion.clone()},this.loader=n,this.imageMetadata={},this.normRegionSize=new Hf(1,1,1),this.normRegionOffset=new Hf(0,0,0),this.physicalSize=new Hf(1,1,1),this.physicalScale=1,this.normPhysicalSize=new Hf(1,1,1),this.physicalPixelSize=this.imageInfo.physicalPixelSize,this.tickMarkPhysicalLength=1,this.setVoxelSize(this.physicalPixelSize),this.numChannels=this.imageInfo.numChannels,this.channelNames=this.imageInfo.channelNames.slice(),this.channelColorsDefault=this.imageInfo.channelColors?this.imageInfo.channelColors.slice():this.channelNames.map(((e,t)=>m_(t))),this.channelColorsDefault.length<this.imageInfo.numChannels)for(let e=this.channelColorsDefault.length-1;e<this.imageInfo.numChannels;++e)this.channelColorsDefault[e]=m_(e);this.channels=[];for(let e=0;e<this.imageInfo.numChannels;++e){const t=new N_(this.channelNames[e]);this.channels.push(t),t.dims=this.imageInfo.subregionSize.toArray()}this.physicalUnitSymbol=this.imageInfo.spatialUnit,this.volumeDataObservers=[]}setUnloaded(){this.loaded=!1,this.channels.forEach((e=>{e.loaded=!1}))}isLoaded(){return this.loaded}updateDimensions(){const{volumeSize:e,subregionSize:t,subregionOffset:n}=this.imageInfo;this.setVoxelSize(this.physicalPixelSize),this.normRegionSize=t.clone().divide(e),this.normRegionOffset=n.clone().divide(e)}mustLoadNewData(){return this.loadSpec.useExplicitLevel!==this.loadSpecRequired.useExplicitLevel||this.loadSpec.time!==this.loadSpecRequired.time||!this.loadSpec.subregion.containsBox(this.loadSpecRequired.subregion)||this.loadSpecRequired.channels.some((e=>!this.loadSpec.channels.includes(e)))}mayLoadNewScaleLevel(){return!this.loadSpec.subregion.equals(this.loadSpecRequired.subregion)||this.loadSpecRequired.maxAtlasEdge!==this.loadSpec.maxAtlasEdge||this.loadSpecRequired.multiscaleLevel!==this.loadSpec.multiscaleLevel||this.loadSpecRequired.scaleLevelBias!==this.loadSpec.scaleLevelBias}async updateRequiredData(e,t){this.loadSpecRequired={...this.loadSpecRequired,...e};let n=this.mustLoadNewData();if(!n&&this.mayLoadNewScaleLevel()){const e=await this.loadScaleLevelDims();if(e){const t=e.map((({shape:e})=>[e[2],e[3],e[4]])),r=function(e,t){if(e.useExplicitLevel&&void 0!==e.multiscaleLevel)return Math.max(0,Math.min(t.length-1,e.multiscaleLevel));let n=function(e,t=4096){if(e.length<=1)return 0;for(let n=0;n<e.length;++n)if(B_(e[n],t))return n}(t,e.maxAtlasEdge);if(void 0!==n&&(n=Math.max(n+(e.scaleLevelBias??0),e.multiscaleLevel??0),n=Math.max(0,Math.min(t.length-1,n)),B_(t[n],e.maxAtlasEdge)))return n;void 0===n&&(n=t.length-1);const r=t[n];return console.error(`Volume is too large; no multiscale level found that fits in preferred memory footprint. Selected level ${n}  has dimensions `,r,`. Max atlas edge allowed is ${e.maxAtlasEdge}.`),console.log("All available levels: ",t),n}(this.loadSpecRequired,t);n=this.imageInfo.multiscaleLevel!==r}}n&&this.loadNewData(t)}async loadScaleLevelDims(){try{return await(this.loader?.loadDims(this.loadSpecRequired))}catch(e){return void this.volumeDataObservers.forEach((t=>t.onVolumeLoadError(this,e)))}}async loadNewData(e){this.setUnloaded(),this.loadSpec={...this.loadSpecRequired,subregion:this.loadSpecRequired.subregion.clone()};try{await(this.loader?.loadVolumeData(this,void 0,e))}catch(e){throw this.volumeDataObservers.forEach((t=>t.onVolumeLoadError(this,e))),e}}setVoxelSize(e){e.x=e.x>0?e.x:1,e.y=e.y>0?e.y:1,e.z=e.z>0?e.z:1,this.physicalPixelSize=e,this.physicalSize=this.imageInfo.originalSize.clone().multiply(this.physicalPixelSize),this.physicalScale=Math.max(this.physicalSize.x,this.physicalSize.y,this.physicalSize.z),this.normPhysicalSize=this.physicalSize.clone().divideScalar(this.physicalScale),this.tickMarkPhysicalLength=10**Math.floor(Math.log10(this.physicalScale/2))}setUnitSymbol(e){this.physicalUnitSymbol=e}getContentCenter(){return this.normRegionSize.clone().divideScalar(2).add(this.normRegionOffset).subScalar(.5).multiply(this.normPhysicalSize)}cleanup(){}getChannel(e){return this.channels[e]}onChannelLoaded(e){this.loadSpec.channels.every((e=>this.channels[e].loaded))&&(this.loaded=!0),e.forEach((e=>this.channelLoadCallback?.(this,e))),this.volumeDataObservers.forEach((t=>t.onVolumeData(this,e)))}setChannelDataFromAtlas(e,t,n,r,i,o="uint8"){this.channels[e].setFromAtlas(t,n,r,o,i[0],i[1],this.imageInfo.subregionSize),this.onChannelLoaded([e])}setChannelDataFromVolume(e,t,n,r="uint8"){const{subregionSize:i,atlasTileDims:o}=this.imageInfo;this.channels[e].setFromVolumeData(t,i.x,i.y,i.z,o.x*i.x,o.y*i.y,n[0],n[1],r),this.onChannelLoaded([e])}appendEmptyChannel(e,t){const n=this.imageInfo.numChannels,r=e||"channel_"+n,i=t||m_(n);this.numChannels+=1,this.channelNames.push(r),this.channelColorsDefault.push(i),this.channels.push(new N_(r));for(let e=0;e<this.volumeDataObservers.length;++e)this.volumeDataObservers[e].onVolumeChannelAdded(this,n);return n}getIntensity(e,t,n,r){return this.channels[e].getIntensity(t,n,r)}getHistogram(e){return this.channels[e].getHistogram()}setLut(e,t){this.channels[e].setLut(t)}setColorPalette(e,t){this.channels[e].setColorPalette(t)}setColorPaletteAlpha(e,t){this.channels[e].setColorPaletteAlpha(t)}getRotation(){return this.imageInfo.transform.rotation.toArray()}getTranslation(){return this.voxelsToWorldSpace(this.imageInfo.transform.translation.toArray())}voxelsToWorldSpace(e){const t=1/Math.max(this.physicalSize.x,Math.max(this.physicalSize.y,this.physicalSize.z));return(new Hf).fromArray(e).multiply(this.physicalPixelSize).multiplyScalar(t).toArray()}addVolumeDataObserver(e){this.volumeDataObservers.push(e)}removeVolumeDataObserver(e){if(e){const t=this.volumeDataObservers.indexOf(e);-1!==t&&this.volumeDataObservers.splice(t,1)}}removeAllVolumeDataObservers(){this.volumeDataObservers=[]}}class H_{#e;constructor(e,t,n){"number"==typeof e?this.#e=new Uint8Array(e):e instanceof ArrayBuffer?this.#e=new Uint8Array(e,t,n):this.#e=new Uint8Array(Array.from(e,(e=>e?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return this.#e.byteOffset}get byteLength(){return this.#e.byteLength}get buffer(){return this.#e.buffer}get length(){return this.#e.length}get(e){let t=this.#e[e];return"number"==typeof t?0!==t:t}set(e,t){this.#e[e]=t?1:0}fill(e){this.#e.fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}class G_{_data;constructor(e,t,n,r){if(this.chars=e,"number"==typeof t)this._data=new Uint8Array(t*e);else if(t instanceof ArrayBuffer)r&&(r*=e),this._data=new Uint8Array(t,n,r);else{let n=Array.from(t);this._data=new Uint8Array(n.length*e);for(let e=0;e<n.length;e++)this.set(e,n[e])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const t=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return(new TextDecoder).decode(t).replace(/\x00/g,"")}_encode(e){return(new TextEncoder).encode(e)}set(e,t){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);n.fill(0),n.set(this._encode(t))}fill(e){const t=this._encode(e);for(let e=0;e<this.length;e++)this._data.set(t,e*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}class W_{_data;constructor(e,t,n,r){if(this.chars=e,"number"==typeof t)this._data=new Int32Array(t*e);else if(t instanceof ArrayBuffer)r&&(r*=e),this._data=new Int32Array(t,n,r);else{const e=t,n=this._encode.bind(this);this._data=new Int32Array(function*(){for(let t of e){let e=n(t);yield*e}}())}}get BYTES_PER_ELEMENT(){return this._data.BYTES_PER_ELEMENT*this.chars}get byteLength(){return this._data.byteLength}get byteOffset(){return this._data.byteOffset}get buffer(){return this._data.buffer}get length(){return this._data.length/this.chars}_encode(e){let t=new Int32Array(this.chars);for(let n=0;n<this.chars;n++)t[n]=e.codePointAt(n)??0;return t}get(e){const t=this.chars*e;let n="";for(let e=0;e<this.chars;e++)n+=String.fromCodePoint(this._data[t+e]);return n.replace(/\u0000/g,"")}set(e,t){const n=this.chars*e,r=this._data.subarray(n,n+this.chars);r.fill(0),r.set(this._encode(t))}fill(e){const t=this._encode(e);for(let e=0;e<this.length;e++)this._data.set(t,e*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}function q_(e){const t=(new TextDecoder).decode(e);return JSON.parse(t)}function X_(e,t){const n=t/2,r=t-1;let i=0;for(let o=0;o<e.length;o+=t)for(let t=0;t<n;t+=1)i=e[o+t],e[o+t]=e[o+r-t],e[o+r-t]=i}const Y_={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:H_},K_=/v2:([US])(\d+)/;function Z_(e){if("v2:object"===e)return globalThis.Array;let t=e.match(K_);if(t){let[,e,n]=t;return("U"===e?W_:G_).bind(null,Number(n))}let n=Y_[e];if(!n)throw new Error(`Unknown or unsupported data_type: ${e}`);return n}function J_(e,t){return("C"===t?Q_:ew)(e)}function Q_(e){const t=e.length,n=globalThis.Array(t);for(let r=t-1,i=1;r>=0;r--)n[r]=i,i*=e[r];return n}function ew(e){const t=e.length,n=globalThis.Array(t);for(let r=0,i=1;r<t;r++)n[r]=i,i*=e[r];return n}function tw({name:e,configuration:t}){if("default"===e)return e=>["c",...e].join(t.separator);if("v2"===e)return e=>e.join(t.separator)||"0";throw new Error(`Unknown chunk key encoding: ${e}`)}function nw(e){const t=e.find((e=>"transpose"===e.name));return"F"===t?.configuration?.order?"F":"C"}const rw=/^([<|>])(.*)$/;function iw(e){return"sharding_indexed"===e?.name}function ow(e){return"uint64"!==e.data_type&&"int64"!==e.data_type||null==e.fill_value?e.fill_value:BigInt(e.fill_value)}function aw(e){return e instanceof H_||e instanceof G_||e instanceof W_?new Proxy(e,{get:(e,t)=>e.get(Number(t)),set:(e,t,n)=>(e.set(Number(t),n),!0)}):e}Symbol("v2");class sw{configuration;kind="array_to_array";constructor(e){this.configuration=e}static fromConfig(e){return new sw(e)}encode(e){return function(e){if(!e.stride)return"C";let t=J_(e.shape,"C");return e.stride.every(((e,n)=>e===t[n]))?"C":"F"}(e)===this.configuration.order?e:function(e,t){let n=function(e,t){let n;return n=e.data instanceof G_||e.data instanceof W_?new e.constructor(e.data.length,e.data.chars):new e.constructor(e.data.length),{data:n,shape:e.shape,stride:J_(e.shape,t)}}(e,t),r=e.shape.length,i=e.data.length,o=Array(r).fill(0),a=aw(e.data),s=aw(n.data);for(let t=0;t<i;t++){let i=0;for(let e=0;e<r;e++)i+=o[e]*n.stride[e];s[i]=a[t],o[0]+=1;for(let t=0;t<r;t++)if(o[t]===e.shape[t]){if(t+1===r)break;o[t]=0,o[t+1]+=1}}return n}(e,this.configuration.order)}decode(e){return e}}const lw=function(){const e=new Uint32Array([305419896]);return!(18===new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0])}();function cw(e){return"BYTES_PER_ELEMENT"in e?e.BYTES_PER_ELEMENT:4}class uw{configuration;kind="array_to_bytes";#t;#n;#r;#i;constructor(e,t){this.configuration=e,this.#n=Z_(t.data_type),this.#i=t.shape,this.#t=J_(t.shape,nw(t.codecs)),this.#r=new this.#n(0).BYTES_PER_ELEMENT}static fromConfig(e,t){return new uw(e,t)}encode(e){let t=new Uint8Array(e.data.buffer);return lw&&"big"===this.configuration.endian&&X_(t,cw(this.#n)),t}decode(e){return lw&&"big"===this.configuration.endian&&X_(e,cw(this.#n)),{data:new this.#n(e.buffer,e.byteOffset,e.byteLength/this.#r),shape:this.#i,stride:this.#t}}}class hw{kind="bytes_to_bytes";constructor(){}static fromConfig(){return new hw}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}class dw{kind="array_to_bytes";#i;#t;constructor(e){this.#i=e,this.#t=J_(e,"C")}static fromConfig(e,t){return new dw(t.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let t=new TextDecoder,n=new DataView(e.buffer),r=Array(n.getUint32(0,!0)),i=4;for(let o=0;o<r.length;o++){let a=n.getUint32(i,!0);i+=4,r[o]=t.decode(e.buffer.slice(i,i+a)),i+=a}return{data:r,shape:this.#i,stride:this.#t}}}const fw=(new Map).set("blosc",(()=>a.e(646).then(a.bind(a,5646)).then((e=>e.default)))).set("gzip",(()=>Promise.all([a.e(56),a.e(175)]).then(a.bind(a,9175)).then((e=>e.default)))).set("lz4",(()=>a.e(985).then(a.bind(a,8985)).then((e=>e.default)))).set("zlib",(()=>Promise.all([a.e(56),a.e(954)]).then(a.bind(a,6954)).then((e=>e.default)))).set("zstd",(()=>a.e(632).then(a.bind(a,5632)).then((e=>e.default)))).set("transpose",(()=>sw)).set("endian",(()=>uw)).set("crc32c",(()=>hw)).set("vlen-utf8",(()=>dw));function pw(e){let t;return{async encode(n){t||(t=await mw(e));for(const e of t.array_to_array)n=await e.encode(n);let r=await t.array_to_bytes.encode(n);for(const e of t.bytes_to_bytes)r=await e.encode(r);return r},async decode(n){t||(t=await mw(e));for(let e=t.bytes_to_bytes.length-1;e>=0;e--)n=await t.bytes_to_bytes[e].decode(n);let r=await t.array_to_bytes.decode(n);for(let e=t.array_to_array.length-1;e>=0;e--)r=await t.array_to_array[e].decode(r);return r}}}async function mw(e){let t=e.codecs.map((async e=>{let t=await(fw.get(e.name)?.());if(!t)throw new Error(`Unknown codec: ${e.name}`);return{Codec:t,meta:e}})),n=[],r=uw.fromConfig({endian:"little"},e),i=[];for await(let{Codec:o,meta:a}of t){let t=o.fromConfig(a.configuration,e);switch(t.kind){case"array_to_array":n.push(t);break;case"array_to_bytes":r=t;break;default:i.push(t)}}return{array_to_array:n,array_to_bytes:r,bytes_to_bytes:i}}const gw=18446744073709551615n;function vw(e,t,n,r){if(void 0===e.store.getRange)throw new Error("Store does not support range requests");let i=e.store.getRange.bind(e.store),o=t.map(((e,t)=>e/r.chunk_shape[t])),a=pw({data_type:"uint64",shape:[...o,2],codecs:r.index_codecs}),s={};return async t=>{let r,l=t.map(((e,t)=>Math.floor(e/o[t]))),c=e.resolve(n(l)).path;if(c in s)r=s[c];else{let e=4,t=16*o.reduce(((e,t)=>e*t),1),n=await i(c,{suffixLength:t+e});r=s[c]=n?await a.decode(n):null}if(null===r)return;let{data:u,shape:h,stride:d}=r,f=t.map(((e,t)=>e%h[t])).reduce(((e,t,n)=>e+t*d[n]),0),p=u[f],m=u[f+1];return p!==gw||m!==gw?i(c,{offset:Number(p),length:Number(m)}):void 0}}class yw{store;path;constructor(e,t="/"){this.store=e,this.path=t}resolve(e){let t=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new yw(this.store,new URL(e,t).pathname)}}class bw extends yw{kind="group";#o;constructor(e,t,n){super(e,t),this.#o=n}get attrs(){return this.#o.attributes}}const xw=Symbol("zarrita.context");class _w extends yw{kind="array";#o;[xw];constructor(e,t,n){super(e,t),this.#o={...n,fill_value:ow(n)},this[xw]=function(e,t){let{configuration:n}=t.codecs.find(iw)??{},r={encode_chunk_key:tw(t.chunk_key_encoding),TypedArray:Z_(t.data_type),fill_value:t.fill_value};if(n){let i=nw(n.codecs);return{...r,kind:"sharded",chunk_shape:n.chunk_shape,codec:pw({data_type:t.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides:(e,t)=>J_(e,t??i),get_chunk_bytes:vw(e,t.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,n)}}let i=nw(t.codecs);return{...r,kind:"regular",chunk_shape:t.chunk_grid.configuration.chunk_shape,codec:pw({data_type:t.data_type,shape:t.chunk_grid.configuration.chunk_shape,codecs:t.codecs}),get_strides:(e,t)=>J_(e,t??i),async get_chunk_bytes(t,n){let i=r.encode_chunk_key(t),o=e.resolve(i).path;return e.store.get(o,n)}}}(this,n)}get attrs(){return this.#o.attributes}get shape(){return this.#o.shape}get chunks(){return this[xw].chunk_shape}get dtype(){return this.#o.data_type}async getChunk(e,t){let n=this[xw],r=await n.get_chunk_bytes(e,t);if(!r){let e=n.chunk_shape.reduce(((e,t)=>e*t),1),t=new n.TypedArray(e);return t.fill(n.fill_value),{data:t,shape:n.chunk_shape,stride:n.get_strides(n.chunk_shape)}}return n.codec.decode(r)}is(e){return function(e,t){if("number"!==t&&"bigint"!==t&&"boolean"!==t&&"object"!==t&&"string"!==t)return e===t;let n="bool"===e;if("boolean"===t)return n;let r=e.startsWith("v2:U")||e.startsWith("v2:S");if("string"===t)return r;let i="int64"===e||"uint64"===e;if("bigint"===t)return i;let o="v2:object"===e;return"object"===t?o:!(r||i||n||o)}(this.dtype,e)}}class ww extends Error{constructor(e){super(e),this.name="NodeNotFoundError"}}class Sw extends Error{constructor(e){super(e),this.name="KeyError"}}async function Ew(e,t={}){let n="store"in e?e:new yw(e),r={};return(t.attrs??1)&&(r=await async function(e){let t=await e.store.get(e.resolve(".zattrs").path);return t?q_(t):{}}(n)),"array"===t.kind?Cw(n,r):"group"===t.kind?Mw(n,r):Cw(n,r).catch((e=>{if(e instanceof ww)return Mw(n,r);throw e}))}async function Cw(e,t){let{path:n}=e.resolve(".zarray"),r=await e.store.get(n);if(!r)throw new ww(n);return new _w(e.store,e.path,function(e,t={}){let n=[],r=function(e){if("|O"===e)return{data_type:"v2:object"};let t=e.match(rw);if(!t)throw new Error(`Invalid dtype: ${e}`);let[,n,r]=t,i={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);if(!i)throw new Error(`Unsupported or unknown dtype: ${e}`);return"|"===n?{data_type:i}:{data_type:i,endian:"<"===n?"little":"big"}}(e.dtype);"F"===e.order&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&"big"===r.endian&&n.push({name:"endian",configuration:{endian:"big"}});for(let{id:t,...r}of e.filters??[])n.push({name:t,configuration:r});if(e.compressor){let{id:t,...r}=e.compressor;n.push({name:t,configuration:r})}return{zarr_format:3,node_type:"array",shape:e.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:e.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:e.dimension_separator??"."}},codecs:n,fill_value:e.fill_value,attributes:t}}(q_(r),t))}async function Mw(e,t){let{path:n}=e.resolve(".zgroup"),r=await e.store.get(n);if(!r)throw new ww(n);return new bw(e.store,e.path,function(e,t={}){return{zarr_format:3,node_type:"group",attributes:t}}(q_(r),t))}async function Tw(e,t={}){let n="store"in e?e:new yw(e),r=await async function(e){let{store:t,path:n}=e.resolve("zarr.json"),r=await e.store.get(n);if(!r)throw new ww(n);let i=q_(r);return"array"!==i.node_type||"uint64"!==i.data_type&&"int64"!==i.data_type||null==i.fill_value||(i.fill_value=BigInt(i.fill_value)),"array"===i.node_type?new _w(t,e.path,i):new bw(t,e.path,i)}(n);if(void 0===t.kind)return r;if("array"===t.kind&&r instanceof _w)return r;if("group"===t.kind&&r instanceof bw)return r;let i=r instanceof _w?"array":"group";throw new Error(`Expected node of kind ${t.kind}, found ${i}.`)}async function Aw(e,t={}){return Tw(e,t).catch((n=>{if(n instanceof ww)return Ew(e,t);throw n}))}Aw.v2=Ew,Aw.v3=Tw,Error,Symbol.iterator,Symbol.iterator,Symbol.iterator,Symbol.iterator;const Pw=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map((e=>[e.name,e])),Rw=new Map(Pw);let Iw=function(e){return e.UNKNOWN="unknown",e.NOT_FOUND="not_found",e.TOO_LARGE="too_large",e.LOAD_DATA_FAILED="load_data_failed",e.INVALID_METADATA="invalid_metadata",e.INVALID_MULTI_SOURCE_ZARR="invalid_multi_source_zarr",e}({});class Ow extends Error{constructor(e,t){super(e,t),this.name="VolumeLoadError",this.type=t?.type??Iw.UNKNOWN}}function kw(e="Unknown error occurred while loading volume data",t=Iw.UNKNOWN,n){return r=>{if(void 0!==n&&r===n)return r;if(r instanceof Ow)throw r;throw console.log(`Error loading volume data: ${r}`),new Ow(e,{type:t,cause:r})}}Rw.set("NodeNotFoundError",ww),Rw.set("KeyError",Sw),Rw.set("VolumeLoadError",Ow);const Lw=e=>{const t=F_(e.sizeZ,e.sizeX,e.sizeY);return{name:e.name,atlasTileDims:[t.x,t.y],subregionSize:[e.sizeX,e.sizeY,e.sizeZ],subregionOffset:[0,0,0],combinedNumChannels:e.sizeC,channelNames:e.channelNames,channelColors:void 0,multiscaleLevel:0,multiscaleLevelDims:[{shape:[1,e.sizeC,e.sizeZ,e.sizeY,e.sizeX],spacing:[1,1,e.physicalPixelSize[2],e.physicalPixelSize[1],e.physicalPixelSize[0]],spaceUnit:e.spatialUnit||"m",timeUnit:"s",dataType:"uint8"}],transform:{translation:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},userData:e.userData}};class Nw extends V_{constructor(e,t){if(super(),this.jsonInfo=t,this.data=e,this.data.shape[0]!==this.jsonInfo.sizeC||this.data.shape[1]!==this.jsonInfo.sizeZ||this.data.shape[2]!==this.jsonInfo.sizeY||this.data.shape[3]!==this.jsonInfo.sizeX)throw new Error("RawArrayLoader: data shape does not match metadata")}async loadDims(e){const t=this.jsonInfo;return[{shape:[1,t.sizeC,t.sizeZ,t.sizeY,t.sizeX],spacing:[1,1,t.physicalPixelSize[2],t.physicalPixelSize[1],t.physicalPixelSize[0]],spaceUnit:t.spatialUnit||"m",dataType:"uint8",timeUnit:"s"}]}async createImageInfo(e){return{imageInfo:Lw(this.jsonInfo),loadSpec:e}}loadRawChannelData(e,t,n,r){const i=t.channels;n(void 0,{...t,subregion:new qf(new Hf(0,0,0),new Hf(1,1,1)),multiscaleLevel:0});for(let t=0;t<e.combinedNumChannels;++t){if(i&&i.length>0&&!i.includes(t))continue;const e=this.data.shape[3]*this.data.shape[2]*this.data.shape[1],n=new Uint8Array(this.data.buffer.buffer,t*e,e);r([t],["uint8"],[n],[vx(n)])}return Promise.resolve()}}function Dw(e){return(t,...n)=>Uw(e,t,n)}function zw(e,t){return Dw(Vw(e,t).get)}const{apply:Uw,construct:Fw,defineProperty:Bw,get:jw,getOwnPropertyDescriptor:Vw,getPrototypeOf:$w,has:Hw,ownKeys:Gw,set:Ww,setPrototypeOf:qw}=Reflect,{EPSILON:Xw,MAX_SAFE_INTEGER:Yw,isFinite:Kw,isNaN:Zw}=Number,{iterator:Jw,species:Qw,toStringTag:eS,for:tS}=Symbol,nS=Object,{create:rS,defineProperty:iS,freeze:oS,is:aS}=nS,sS=nS.prototype,lS=(sS.__lookupGetter__&&Dw(sS.__lookupGetter__),nS.hasOwn||Dw(sS.hasOwnProperty),Array),cS=(lS.isArray,lS.prototype),uS=(Dw(cS.join),Dw(cS.push),Dw(cS.toLocaleString),cS[Jw]),hS=Dw(uS),{abs:dS,trunc:fS}=Math,pS=ArrayBuffer,mS=(pS.isView,pS.prototype),gS=(Dw(mS.slice),zw(mS,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),vS=(gS&&zw(gS.prototype,"byteLength"),$w(Uint8Array)),yS=(vS.from,vS.prototype),bS=(yS[Jw],Dw(yS.keys),Dw(yS.values),Dw(yS.entries),Dw(yS.set),Dw(yS.reverse),Dw(yS.fill),Dw(yS.copyWithin),Dw(yS.sort),Dw(yS.slice),Dw(yS.subarray),zw(yS,"buffer"),zw(yS,"byteOffset"),zw(yS,"length"),zw(yS,eS),Uint8Array),xS=Uint16Array,_S=Uint32Array,wS=Float32Array,SS=$w([][Jw]()),ES=Dw(SS.next),CS=Dw(function*(){}().next),MS=$w(SS),TS=DataView.prototype,AS=Dw(TS.getUint16),PS=(Dw(TS.setUint16),TypeError,WeakSet.prototype),RS=(Dw(PS.add),Dw(PS.has),WeakMap),IS=RS.prototype,OS=Dw(IS.get),kS=(Dw(IS.has),Dw(IS.set)),LS=new RS,NS=rS(null,{next:{value:function(){const e=OS(LS,this);return ES(e)}},[Jw]:{value:function(){return this}}}),DS=new RS,zS=rS(MS,{next:{value:function(){const e=OS(DS,this);return CS(e)},writable:!0,configurable:!0}});for(const e of Gw(SS))"next"!==e&&iS(zS,e,Vw(SS,e));const US=new pS(4),FS=new wS(US),BS=new _S(US),jS=new xS(512),VS=new bS(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(jS[e]=0,jS[256|e]=32768,VS[e]=24,VS[256|e]=24):t<-14?(jS[e]=1024>>-t-14,jS[256|e]=1024>>-t-14|32768,VS[e]=-t-1,VS[256|e]=-t-1):t<=15?(jS[e]=t+15<<10,jS[256|e]=t+15<<10|32768,VS[e]=13,VS[256|e]=13):t<128?(jS[e]=31744,jS[256|e]=64512,VS[e]=24,VS[256|e]=24):(jS[e]=31744,jS[256|e]=64512,VS[e]=13,VS[256|e]=13)}const $S=new _S(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,$S[e]=t|n}for(let e=1024;e<2048;++e)$S[e]=939524096+(e-1024<<13);const HS=new _S(64);for(let e=1;e<31;++e)HS[e]=e<<23;HS[31]=1199570944,HS[32]=2147483648;for(let e=33;e<63;++e)HS[e]=2147483648+(e-32<<23);HS[63]=3347054592;const GS=new xS(64);for(let e=1;e<64;++e)32!==e&&(GS[e]=1024);function WS(e,t,...n){return function(e){const t=e>>10;return BS[0]=$S[GS[t]+(1023&e)]+HS[t],FS[0]}(AS(e,t,...function(e){if(e[Jw]===uS&&SS.next===ES)return e;const t=rS(NS);return kS(LS,t,hS(e)),t}(n)))}var qS=a(7379),XS=a(563),YS=a(8622);const KS=new Map;function ZS(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>KS.set(e,t)))}function JS(e,t,n,r=1){return new(Object.getPrototypeOf(e).constructor)(t*n*r)}function QS(e,t,n){return(1-n)*e+n*t}function eE(e,t,n){let r=0;for(let i=t;i<n;++i)r+=e[i];return r}function tE(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(8===t)return new Int8Array(n);if(16===t)return new Int16Array(n);if(32===t)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}ZS([void 0,1],(()=>a.e(121).then(a.bind(a,5121)).then((e=>e.default)))),ZS(5,(()=>a.e(764).then(a.bind(a,2764)).then((e=>e.default)))),ZS(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),ZS(7,(()=>a.e(457).then(a.bind(a,6457)).then((e=>e.default)))),ZS([8,32946],(()=>Promise.all([a.e(148),a.e(424)]).then(a.bind(a,424)).then((e=>e.default)))),ZS(32773,(()=>a.e(30).then(a.bind(a,1030)).then((e=>e.default)))),ZS(34887,(()=>Promise.all([a.e(148),a.e(414)]).then(a.bind(a,1414)).then((async e=>(await e.zstd.init(),e))).then((e=>e.default)))),ZS(50001,(()=>a.e(568).then(a.bind(a,6568)).then((e=>e.default))));const nE=class{constructor(e,t,n,r,i,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=r,this.tiles=i?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(e,t){return WS(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return tE(this.getSampleFormat(e),this.getBitsPerSample(e),t)}async getTileOrStrip(e,t,n,r,i){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:l}=this;let c,u;1===this.planarConfiguration?s=t*o+e:2===this.planarConfiguration&&(s=n*o*a+t*o+e),this.isTiled?(c=this.fileDirectory.TileOffsets[s],u=this.fileDirectory.TileByteCounts[s]):(c=this.fileDirectory.StripOffsets[s],u=this.fileDirectory.StripByteCounts[s]);const h=(await this.source.fetch([{offset:c,length:u}],i))[0];let d;return null!==l&&l[s]?d=l[s]:(d=(async()=>{let e=await r.decode(this.fileDirectory,h);const n=this.getSampleFormat(),i=this.getBitsPerSample();return function(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}(n,i)&&(e=function(e,t,n,r,i,o,a){const s=new DataView(e),l=2===n?1:r,c=tE(t,i,2===n?a*o:a*o*r),u=parseInt("1".repeat(i),2);if(1===t){let e;e=1===n?r*i:i;let t=o*e;7&t&&(t=t+7&-8);for(let e=0;e<a;++e){const n=e*t;for(let t=0;t<o;++t){const r=n+t*l*i;for(let n=0;n<l;++n){const a=r+n*i,h=(e*o+t)*l+n,d=Math.floor(a/8),f=a%8;if(f+i<=8)c[h]=s.getUint8(d)>>8-i-f&u;else if(f+i<=16)c[h]=s.getUint16(d)>>16-i-f&u;else if(f+i<=24){const e=s.getUint16(d)<<8|s.getUint8(d+2);c[h]=e>>24-i-f&u}else c[h]=s.getUint32(d)>>32-i-f&u}}}}return c.buffer}(e,n,this.planarConfiguration,this.getSamplesPerPixel(),i,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[s]=d)),{x:e,y:t,sample:n,data:await d}}async _readRaster(e,t,n,r,i,o,a,s,l){const c=this.getTileWidth(),u=this.getTileHeight(),h=this.getWidth(),d=this.getHeight(),f=Math.max(Math.floor(e[0]/c),0),p=Math.min(Math.ceil(e[2]/c),Math.ceil(h/c)),m=Math.max(Math.floor(e[1]/u),0),g=Math.min(Math.ceil(e[3]/u),Math.ceil(d/u)),v=e[2]-e[0];let y=this.getBytesPerPixel();const b=[],x=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?b.push(eE(this.fileDirectory.BitsPerSample,0,t[e])/8):b.push(0),x.push(this.getReaderForSample(t[e]));const _=[],{littleEndian:w}=this;for(let o=m;o<g;++o)for(let a=f;a<p;++a){let s;1===this.planarConfiguration&&(s=this.getTileOrStrip(a,o,0,i,l));for(let f=0;f<t.length;++f){const p=f,m=t[f];2===this.planarConfiguration&&(y=this.getSampleByteSize(m),s=this.getTileOrStrip(a,o,m,i,l));const g=s.then((i=>{const o=i.data,a=new DataView(o),s=this.getBlockHeight(i.y),l=i.y*u,f=i.x*c,m=l+s,g=(i.x+1)*c,_=x[p],S=Math.min(s,s-(m-e[3]),d-l),E=Math.min(c,c-(g-e[2]),h-f);for(let i=Math.max(0,e[1]-l);i<S;++i)for(let o=Math.max(0,e[0]-f);o<E;++o){const s=(i*c+o)*y,u=_.call(a,s+b[p],w);let h;r?(h=(i+l-e[1])*v*t.length+(o+f-e[0])*t.length+p,n[h]=u):(h=(i+l-e[1])*v+o+f-e[0],n[p][h]=u)}}));_.push(g)}}if(await Promise.all(_),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let i;return i=r?function(e,t,n,r,i,o,a="nearest"){switch(a.toLowerCase()){case"nearest":return function(e,t,n,r,i,o){const a=t/r,s=n/i,l=JS(e,r,i,o);for(let c=0;c<i;++c){const i=Math.min(Math.round(s*c),n-1);for(let n=0;n<r;++n){const s=Math.min(Math.round(a*n),t-1);for(let a=0;a<o;++a){const u=e[i*t*o+s*o+a];l[c*r*o+n*o+a]=u}}}return l}(e,t,n,r,i,o);case"bilinear":case"linear":return function(e,t,n,r,i,o){const a=t/r,s=n/i,l=JS(e,r,i,o);for(let c=0;c<i;++c){const i=s*c,u=Math.floor(i),h=Math.min(Math.ceil(i),n-1);for(let n=0;n<r;++n){const s=a*n,d=s%1,f=Math.floor(s),p=Math.min(Math.ceil(s),t-1);for(let a=0;a<o;++a){const s=e[u*t*o+f*o+a],m=e[u*t*o+p*o+a],g=e[h*t*o+f*o+a],v=e[h*t*o+p*o+a],y=QS(QS(s,m,d),QS(g,v,d),i%1);l[c*r*o+n*o+a]=y}}}return l}(e,t,n,r,i,o);default:throw new Error(`Unsupported resampling method: '${a}'`)}}(n,e[2]-e[0],e[3]-e[1],o,a,t.length,s):function(e,t,n,r,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(e,t,n,r,i){const o=t/r,a=n/i;return e.map((e=>{const s=JS(e,r,i);for(let l=0;l<i;++l){const i=Math.min(Math.round(a*l),n-1);for(let n=0;n<r;++n){const a=Math.min(Math.round(o*n),t-1),c=e[i*t+a];s[l*r+n]=c}}return s}))}(e,t,n,r,i);case"bilinear":case"linear":return function(e,t,n,r,i){const o=t/r,a=n/i;return e.map((e=>{const s=JS(e,r,i);for(let l=0;l<i;++l){const i=a*l,c=Math.floor(i),u=Math.min(Math.ceil(i),n-1);for(let n=0;n<r;++n){const a=o*n,h=a%1,d=Math.floor(a),f=Math.min(Math.ceil(a),t-1),p=e[c*t+d],m=e[c*t+f],g=e[u*t+d],v=e[u*t+f],y=QS(QS(p,m,h),QS(g,v,h),i%1);s[l*r+n]=y}}return s}))}(e,t,n,r,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}(n,e[2]-e[0],e[3]-e[1],o,a,s),i.width=o,i.height=a,i}return n.width=o||e[2]-e[0],n.height=a||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:r=null,width:i,height:o,resampleMethod:a,fillValue:s,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=(c[2]-c[0])*(c[3]-c[1]),h=this.getSamplesPerPixel();if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=h)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<h;++e)t.push(e);let d;if(n)d=tE(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*t.length),s&&d.fill(s);else{d=[];for(let e=0;e<t.length;++e){const n=this.getArrayForSample(t[e],u);Array.isArray(s)&&e<s.length?n.fill(s[e]):s&&!Array.isArray(s)&&n.fill(s),d.push(n)}}const f=r||await async function(e){const t=KS.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);return new(await t())(e)}(this.fileDirectory);return await this._readRaster(c,t,d,n,f,i,o,a,l)}async readRGB({window:e,interleave:t=!0,pool:n=null,width:r,height:i,resampleMethod:o,enableAlpha:a=!1,signal:s}={}){const l=e||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===YS.ub.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==YS.AC.Unspecified&&a){l=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)l.push(e)}return this.readRasters({window:e,interleave:t,samples:l,pool:n,width:r,height:i,resampleMethod:o,signal:s})}let u;switch(c){case YS.ub.WhiteIsZero:case YS.ub.BlackIsZero:case YS.ub.Palette:u=[0];break;case YS.ub.CMYK:u=[0,1,2,3];break;case YS.ub.YCbCr:case YS.ub.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:l,interleave:!0,samples:u,pool:n,width:r,height:i,resampleMethod:o,signal:s},{fileDirectory:d}=this,f=await this.readRasters(h),p=2**this.fileDirectory.BitsPerSample[0];let m;switch(c){case YS.ub.WhiteIsZero:m=function(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let n=0,r=0;n<e.length;++n,r+=3)o=256-e[n]/t*256,i[r]=o,i[r+1]=o,i[r+2]=o;return i}(f,p);break;case YS.ub.BlackIsZero:m=function(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let n=0,r=0;n<e.length;++n,r+=3)o=e[n]/t*256,i[r]=o,i[r+1]=o,i[r+2]=o;return i}(f,p);break;case YS.ub.Palette:m=function(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3),o=t.length/3,a=t.length/3*2;for(let n=0,r=0;n<e.length;++n,r+=3){const s=e[n];i[r]=t[s]/65536*256,i[r+1]=t[s+o]/65536*256,i[r+2]=t[s+a]/65536*256}return i}(f,d.ColorMap);break;case YS.ub.CMYK:m=function(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=4,n+=3){const i=e[t],o=e[t+1],a=e[t+2],s=e[t+3];r[n]=(255-i)/256*255*((255-s)/256),r[n+1]=(255-o)/256*255*((255-s)/256),r[n+2]=(255-a)/256*255*((255-s)/256)}return r}(f);break;case YS.ub.YCbCr:m=function(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){const i=e[t],o=e[t+1],a=e[t+2];r[n]=i+1.402*(a-128),r[n+1]=i-.34414*(o-128)-.71414*(a-128),r[n+2]=i+1.772*(o-128)}return r}(f);break;case YS.ub.CIELab:m=function(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){let i,o,a,s=(e[t+0]+16)/116,l=(e[t+1]<<24>>24)/500+s,c=s-(e[t+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),s=1*(s*s*s>.008856?s*s*s:(s-16/116)/7.787),c=1.08883*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),i=3.2406*l+-1.5372*s+-.4986*c,o=-.9689*l+1.8758*s+.0415*c,a=.0557*l+-.204*s+1.057*c,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,r[n]=255*Math.max(0,Math.min(1,i)),r[n+1]=255*Math.max(0,Math.min(1,o)),r[n+2]=255*Math.max(0,Math.min(1,a))}return r}(f);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(m.length/3),t=new Uint8Array(m.length/3),n=new Uint8Array(m.length/3);for(let r=0,i=0;r<m.length;r+=3,++i)e[i]=m[r],t[i]=m[r+1],n[i]=m[r+2];m=[e,t,n]}return m.width=f.width,m.height=f.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let r=XS(n,"Item");r=null===e?r.filter((e=>void 0===qS(e,"sample"))):r.filter((t=>Number(qS(t,"sample"))===e));for(let e=0;e<r.length;++e){const n=r[e];t[qS(n,"name")]=n.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return 0===n[1]&&0===n[4]?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(e){const[t,n,r]=e.getResolution();return[t*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),r*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(e=!1){const t=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[e,r,i,o,a,s,l,c]=this.fileDirectory.ModelTransformation,u=[[0,0],[0,t],[n,0],[n,t]].map((([t,n])=>[o+e*t+r*n,c+a*t+s*n])),h=u.map((e=>e[0])),d=u.map((e=>e[1]));return[Math.min(...h),Math.min(...d),Math.max(...h),Math.max(...d)]}{const e=this.getOrigin(),r=this.getResolution(),i=e[0],o=e[1],a=i+r[0]*n,s=o+r[1]*t;return[Math.min(i,a),Math.min(o,s),Math.max(i,a),Math.max(o,s)]}}};class rE{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),r=this.getUint32(e+4,t);let i;if(t){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}getInt64(e,t){let n=0;const r=(128&this._dataView.getUint8(e+(t?7:0)))>0;let i=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));r&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),n+=a*256**o}return r&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return WS(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class iE{constructor(e,t,n,r){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let r;if(this._littleEndian){if(r=t+2**32*n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*t+n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let t=0;const n=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let r=!0;for(let i=0;i<8;i++){let o=this._dataView.getUint8(e+(this._littleEndian?i:7-i));n&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),t+=o*256**i}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}function oE(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);const t={};for(const[n,r]of e)t[n.toLowerCase()]=r;return t}function aE(e){return oE(e.split("\r\n").map((e=>{const t=e.split(":").map((e=>e.trim()));return t[0]=t[0].toLowerCase(),t})))}function sE(e){let t,n,r;return e&&([,t,n,r]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}class lE{async fetch(e,t=void 0){return Promise.all(e.map((e=>this.fetchSlice(e,t))))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class cE extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield e)}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const r="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,i]=n;!1===this._deleteIfExpired(r,i)&&(yield[r,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,i]=n;this.cache.has(r)||!1===this._deleteIfExpired(r,i)&&(yield[r,i.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,r]of this.entriesAscending())e.call(t,r,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class uE extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,uE),this.name="AbortError"}}class hE extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const dE=hE;class fE{constructor(e,t,n=null){this.offset=e,this.length=t,this.data=n}get top(){return this.offset+this.length}}class pE{constructor(e,t,n){this.offset=e,this.length=t,this.blockIds=n}}class mE extends lE{constructor(e,{blockSize:t=65536,cacheSize:n=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new cE({maxSize:n,onEviction:(e,t)=>{this.evictedBlocks.set(e,t)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const n=[],r=[],i=[];this.evictedBlocks.clear();for(const{offset:t,length:o}of e){let e=t+o;const{fileSize:a}=this;null!==a&&(e=Math.min(e,a));for(let o=Math.floor(t/this.blockSize)*this.blockSize;o<e;o+=this.blockSize){const e=Math.floor(o/this.blockSize);this.blockCache.has(e)||this.blockRequests.has(e)||(this.blockIdsToFetch.add(e),r.push(e)),this.blockRequests.has(e)&&n.push(this.blockRequests.get(e)),i.push(e)}}await async function(){return new Promise((e=>setTimeout(e,undefined)))}(),this.fetchBlocks(t);const o=[];for(const e of r)this.blockRequests.has(e)&&o.push(this.blockRequests.get(e));await Promise.allSettled(n),await Promise.allSettled(o);const a=[],s=i.filter((e=>this.abortedBlockIds.has(e)||!this.blockCache.has(e)));if(s.forEach((e=>this.blockIdsToFetch.add(e))),s.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const e of s){const t=this.blockRequests.get(e);if(!t)throw new Error(`Block ${e} is not in the block requests`);a.push(t)}await Promise.allSettled(a)}if(t&&t.aborted)throw new uE("Request was aborted");const l=i.map((e=>this.blockCache.get(e)||this.evictedBlocks.get(e))),c=l.filter((e=>!e));if(c.length)throw new dE(c,"Request failed");const u=new Map(function(e,t){const n=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return n.map(((e,t)=>[e,r[t]]))}(i,l));return this.readSliceData(e,u)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(t,e);for(let r=0;r<t.length;++r){const i=t[r];for(const t of i.blockIds)this.blockRequests.set(t,(async()=>{try{const e=(await n)[r],i=t*this.blockSize,o=i-e.offset,a=Math.min(o+this.blockSize,e.data.byteLength),s=e.data.slice(o,a),l=new fE(i,s.byteLength,s,t);this.blockCache.set(t,l),this.abortedBlockIds.delete(t)}catch(n){if("AbortError"!==n.name)throw n;n.signal=e,this.blockCache.delete(t),this.abortedBlockIds.add(t)}finally{this.blockRequests.delete(t)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort(((e,t)=>e-t));if(0===t.length)return[];let n=[],r=null;const i=[];for(const e of t)null===r||r+1===e?(n.push(e),r=e):(i.push(new pE(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[e],r=e);return i.push(new pE(n[0]*this.blockSize,n.length*this.blockSize,n)),i}readSliceData(e,t){return e.map((e=>{let n=e.offset+e.length;null!==this.fileSize&&(n=Math.min(this.fileSize,n));const r=Math.floor(e.offset/this.blockSize),i=Math.floor(n/this.blockSize),o=new ArrayBuffer(e.length),a=new Uint8Array(o);for(let o=r;o<=i;++o){const r=t.get(o),i=r.offset-e.offset;let s,l=0,c=0;i<0?l=-i:i>0&&(c=i),s=r.top-n<0?r.length-l:n-r.offset-l;const u=new Uint8Array(r.data,l,s);a.set(u,c)}return o}))}}class gE{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class vE{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class yE extends gE{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class bE extends vE{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const n=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new yE(n)}}class xE extends gE{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class _E extends vE{constructRequest(e,t){return new Promise(((n,r)=>{const i=new XMLHttpRequest;i.open("GET",this.url),i.responseType="arraybuffer";for(const[t,n]of Object.entries(e))i.setRequestHeader(t,n);i.onload=()=>{const e=i.response;n(new xE(i,e))},i.onerror=r,i.onabort=()=>r(new uE("Request aborted")),i.send(),t&&(t.aborted&&i.abort(),t.addEventListener("abort",(()=>i.abort())))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}var wE=a(8625),SE=a(6504),EE=a(6580);class CE extends gE{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class ME extends vE{constructor(e){super(e),this.parsedUrl=EE.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?wE:SE}constructRequest(e,t){return new Promise(((n,r)=>{const i=this.httpApi.get({...this.parsedUrl,headers:e},(e=>{const t=new Promise((t=>{const n=[];e.on("data",(e=>{n.push(e)})),e.on("end",(()=>{const e=Buffer.concat(n).buffer;t(e)})),e.on("error",r)}));n(new CE(e,t))}));i.on("error",r),t&&(t.aborted&&i.destroy(new uE("Request aborted")),t.addEventListener("abort",(()=>i.destroy(new uE("Request aborted")))))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class TE extends lE{constructor(e,t,n,r){super(),this.client=e,this.headers=t,this.maxRanges=n,this.allowFullFile=r,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length,Promise.all(e.map((e=>this.fetchSlice(e,t)))))}async fetchSlices(e,t){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map((({offset:e,length:t})=>`${e}-${e+t}`)).join(",")}`},signal:t});if(n.ok){if(206===n.status){const{type:r,params:i}=function(e){const[t,...n]=e.split(";").map((e=>e.trim()));return{type:t,params:oE(n.map((e=>e.split("="))))}}(n.getHeader("content-type"));if("multipart/byteranges"===r){const e=function(e,t){let n=null;const r=new TextDecoder("ascii"),i=[],o=`--${t}`,a=`${o}--`;for(let t=0;t<10;++t)r.decode(new Uint8Array(e,t,o.length))===o&&(n=t);if(null===n)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const t=r.decode(new Uint8Array(e,n,Math.min(o.length+1024,e.byteLength-n)));if(0===t.length||t.startsWith(a))break;if(!t.startsWith(o))throw new Error("Part does not start with boundary");const s=t.substr(o.length+2);if(0===s.length)break;const l=s.indexOf("\r\n\r\n"),c=aE(s.substr(0,l)),{start:u,end:h,total:d}=sE(c["content-range"]),f=n+o.length+l+4,p=parseInt(h,10)+1-parseInt(u,10);i.push({headers:c,data:e.slice(f,f+p),offset:u,length:p,fileSize:d}),n=f+p+4}return i}(await n.getData(),i.boundary);return this._fileSize=e[0].fileSize||null,e}const o=await n.getData(),{start:a,end:s,total:l}=sE(n.getHeader("content-range"));this._fileSize=l||null;const c=[{data:o,offset:a,length:s-a}];if(e.length>1){const n=await Promise.all(e.slice(1).map((e=>this.fetchSlice(e,t))));return c.concat(n)}return c}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await n.getData();return this._fileSize=e.byteLength,[{data:e,offset:0,length:e.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:n,length:r}=e,i=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+r}`},signal:t});if(i.ok){if(206===i.status){const e=await i.getData(),{total:t}=sE(i.getHeader("content-range"));return this._fileSize=t||null,{data:e,offset:n,length:r}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await i.getData();return this._fileSize=e.byteLength,{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function AE(e,{blockSize:t,cacheSize:n}){return null===t?e:new mE(e,{blockSize:t,cacheSize:n})}function PE(e){switch(e){case YS.s$.BYTE:case YS.s$.ASCII:case YS.s$.SBYTE:case YS.s$.UNDEFINED:return 1;case YS.s$.SHORT:case YS.s$.SSHORT:return 2;case YS.s$.LONG:case YS.s$.SLONG:case YS.s$.FLOAT:case YS.s$.IFD:return 4;case YS.s$.RATIONAL:case YS.s$.SRATIONAL:case YS.s$.DOUBLE:case YS.s$.LONG8:case YS.s$.SLONG8:case YS.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function RE(e,t,n,r){let i=null,o=null;const a=PE(t);switch(t){case YS.s$.BYTE:case YS.s$.ASCII:case YS.s$.UNDEFINED:i=new Uint8Array(n),o=e.readUint8;break;case YS.s$.SBYTE:i=new Int8Array(n),o=e.readInt8;break;case YS.s$.SHORT:i=new Uint16Array(n),o=e.readUint16;break;case YS.s$.SSHORT:i=new Int16Array(n),o=e.readInt16;break;case YS.s$.LONG:case YS.s$.IFD:i=new Uint32Array(n),o=e.readUint32;break;case YS.s$.SLONG:i=new Int32Array(n),o=e.readInt32;break;case YS.s$.LONG8:case YS.s$.IFD8:i=new Array(n),o=e.readUint64;break;case YS.s$.SLONG8:i=new Array(n),o=e.readInt64;break;case YS.s$.RATIONAL:i=new Uint32Array(2*n),o=e.readUint32;break;case YS.s$.SRATIONAL:i=new Int32Array(2*n),o=e.readInt32;break;case YS.s$.FLOAT:i=new Float32Array(n),o=e.readFloat32;break;case YS.s$.DOUBLE:i=new Float64Array(n),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==YS.s$.RATIONAL&&t!==YS.s$.SRATIONAL)for(let t=0;t<n;++t)i[t]=o.call(e,r+t*a);else for(let t=0;t<n;t+=2)i[t]=o.call(e,r+t*a),i[t+1]=o.call(e,r+(t*a+4));return t===YS.s$.ASCII?new TextDecoder("utf-8").decode(i):i}class IE{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class OE extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class kE{async readRasters(e={}){const{window:t,width:n,height:r}=e;let{resX:i,resY:o,bbox:a}=e;const s=await this.getImage();let l=s;const c=await this.getImageCount(),u=s.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(n||r){if(t){const[e,n]=s.getOrigin(),[r,i]=s.getResolution();a=[e+t[0]*r,n+t[1]*i,e+t[2]*r,n+t[3]*i]}const e=a||u;if(n){if(i)throw new Error("Both width and resX passed");i=(e[2]-e[0])/n}if(r){if(o)throw new Error("Both width and resY passed");o=(e[3]-e[1])/r}}if(i||o){const e=[];for(let t=0;t<c;++t){const n=await this.getImage(t),{SubfileType:r,NewSubfileType:i}=n.fileDirectory;(0===t||2===r||1&i)&&e.push(n)}e.sort(((e,t)=>e.getWidth()-t.getWidth()));for(let t=0;t<e.length;++t){const n=e[t],r=(u[2]-u[0])/n.getWidth(),a=(u[3]-u[1])/n.getHeight();if(l=n,i&&i>r||o&&o>a)break}}let h=t;if(a){const[e,t]=s.getOrigin(),[n,r]=l.getResolution(s);h=[Math.round((a[0]-e)/n),Math.round((a[1]-t)/r),Math.round((a[2]-e)/n),Math.round((a[3]-t)/r)],h=[Math.min(h[0],h[2]),Math.min(h[1],h[3]),Math.max(h[0],h[2]),Math.max(h[1],h[3])]}return l.readRasters({...e,window:h})}}class LE extends kE{constructor(e,t,n,r,i={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=r,this.cache=i.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new iE((await this.source.fetch([{offset:e,length:void 0!==t?t:n}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let r=await this.getSlice(e);const i=this.bigTiff?r.readUint64(e):r.readUint16(e),o=i*t+(this.bigTiff?16:6);r.covers(e,o)||(r=await this.getSlice(e,o));const a={};let s=e+(this.bigTiff?8:2);for(let e=0;e<i;s+=t,++e){const e=r.readUint16(s),t=r.readUint16(s+2),n=this.bigTiff?r.readUint64(s+4):r.readUint32(s+4);let i,o;const l=PE(t),c=s+(this.bigTiff?12:8);if(l*n<=(this.bigTiff?8:4))i=RE(r,t,n,c);else{const e=r.readOffset(c),o=PE(t)*n;i=r.covers(e,o)?RE(r,t,n,e):RE(await this.getSlice(e,o),t,n,e)}o=1===n&&-1===YS.NZ.indexOf(e)&&t!==YS.s$.RATIONAL&&t!==YS.s$.SRATIONAL?i[0]:i,a[YS.$[e]]=o}const l=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=4*t[3];r+=4){const i=YS.Hm[t[r]],o=t[r+1]?YS.$[t[r+1]]:null,a=t[r+2],s=t[r+3];let l=null;if(o){if(l=e[o],null==l)throw new Error(`Could not get value of geoKey '${i}'.`);"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;n[i]=l}return n}(a),c=r.readOffset(e+n+t*i);return new IE(a,l,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof OE)throw new OE(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new OE(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new nE(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof OE))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;let t=await this.getSlice(e,130);if("GDAL_STRUCTURAL_METADATA_SIZE="===RE(t,YS.s$.ASCII,30,e)){const n=RE(t,YS.s$.ASCII,130,e).split("\n")[0],r=Number(n.split("=")[1].split(" ")[0])+n.length;r>130&&(t=await this.getSlice(e,r));const i=RE(t,YS.s$.ASCII,r,e);this.ghostValues={},i.split("\n").filter((e=>e.length>0)).map((e=>e.split("="))).forEach((([e,t])=>{this.ghostValues[e]=t}))}return this.ghostValues}static async fromSource(e,t,n){const r=(await e.fetch([{offset:0,length:1024}],n))[0],i=new rE(r),o=i.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const s=i.getUint16(2,a);let l;if(42===s)l=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");if(l=!0,8!==i.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const c=l?i.getUint64(8,a):i.getUint32(4,a);return new LE(e,a,l,c,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}class NE extends Error{name="NonError";constructor(e){super(NE._prepareSuperMessage(e))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const DE=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],zE=new WeakSet,UE=e=>Rw.get(e)??Error,FE=({from:e,seen:t,to:n,forceEnumerable:r,maxDepth:i,depth:o,useToJSON:a,serialize:s})=>{if(n||(n=Array.isArray(e)?[]:!s&&jE(e)?new(UE(e.name)):{}),t.push(e),o>=i)return n;if(a&&"function"==typeof e.toJSON&&!zE.has(e))return(e=>{zE.add(e);const t=e.toJSON();return zE.delete(e),t})(e);const l=e=>FE({from:e,seen:[...t],forceEnumerable:r,maxDepth:i,depth:o,useToJSON:a,serialize:s});for(const[r,i]of Object.entries(e))if(i&&i instanceof Uint8Array&&"Buffer"===i.constructor.name)n[r]="[object Buffer]";else if(null===i||"object"!=typeof i||"function"!=typeof i.pipe){if("function"!=typeof i)if(i&&"object"==typeof i)t.includes(e[r])?n[r]="[Circular]":(o++,n[r]=l(e[r]));else try{n[r]=i}catch{}}else n[r]="[object Stream]";for(const{property:t,enumerable:i}of DE)void 0!==e[t]&&null!==e[t]&&Object.defineProperty(n,t,{value:jE(e[t])?l(e[t]):e[t],enumerable:!!r||i,configurable:!0,writable:!0});return n};function BE(e,t={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if(function(e){return Boolean(e)&&"object"==typeof e&&"message"in e&&!Array.isArray(e)}(e)){const t=UE(e.name);return FE({from:e,seen:[],to:new t,maxDepth:n,depth:0,serialize:!1})}return new NE(e)}function jE(e){return Boolean(e)&&"object"==typeof e&&"name"in e&&"message"in e&&"stack"in e}class VE{sizex=0;sizey=0;sizez=1;sizec=1;sizet=1;unit="";pixeltype="";dimensionorder="";pixelsizex=1;pixelsizey=1;pixelsizez=1;channelnames=[]}function $E(e){const t={uint8:"uint8",uint16:"uint16",uint32:"uint32",int8:"int8",int16:"int16",int32:"int32",float:"float32"}[e];return void 0===t?(console.warn(`Unsupported OME pixel type ${e}; defaulting to uint8`),"uint8"):t}function HE(e,t){const n=e.getAttribute(t);if(null===n)throw new Ow(`Missing attribute ${t} in OME-TIFF metadata`,{type:Iw.INVALID_METADATA});return n}class GE extends V_{constructor(e){super(),this.url=e}async loadOmeDims(){if(!this.dims){const e=await async function(e,t={},n){return LE.fromSource(function(e,{forceXHR:t=!1,...n}={}){return"function"!=typeof fetch||t?"undefined"!=typeof XMLHttpRequest?function(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new _E(e);return AE(new TE(o,t,n,r),i)}(e,n):function(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new ME(e);return AE(new TE(o,t,n,r),i)}(e,n):function(e,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...o}={}){const a=new bE(e,n);return AE(new TE(a,t,r,i),o)}(e,n)}(e,t),n)}(this.url,{allowFullFile:!0}).catch(kw(`Could not open TIFF file at ${this.url}`,Iw.NOT_FOUND)),t=function(e){const t=new DOMParser;try{return t.parseFromString(e,"text/xml").getElementsByTagName("OME")[0]}catch(e){throw new Ow("Could not find OME metadata in TIFF file",{type:Iw.INVALID_METADATA,cause:e})}}((await e.getImage().catch(kw("Failed to open TIFF image",Iw.NOT_FOUND))).getFileDirectory().ImageDescription.trim().replace(/[\u0000]$/g,"").trim()).getElementsByTagName("Image")[0];this.dims=function(e){const t=new VE,n=e.getElementsByTagName("Pixels")[0];t.sizex=Number(HE(n,"SizeX")),t.sizey=Number(HE(n,"SizeY")),t.sizez=Number(n.getAttribute("SizeZ")),t.sizec=Number(n.getAttribute("SizeC")),t.sizet=Number(n.getAttribute("SizeT")),t.unit=n.getAttribute("PhysicalSizeXUnit")||"",t.pixeltype=n.getAttribute("Type")||"",t.dimensionorder=n.getAttribute("DimensionOrder")||"XYZCT",t.pixelsizex=Number(n.getAttribute("PhysicalSizeX")),t.pixelsizey=Number(n.getAttribute("PhysicalSizeY")),t.pixelsizez=Number(n.getAttribute("PhysicalSizeZ"));const r=n.getElementsByTagName("Channel");for(let e=0;e<r.length;++e){const n=r[e].getAttribute("Name"),i=r[e].getAttribute("ID");t.channelnames.push(n||i||"Channel"+e)}return t}(t)}return this.dims}async loadDims(e){const t=await this.loadOmeDims(),n=F_(t.sizez,t.sizex,t.sizey),r=U_,i=Math.floor(r/n.x),o=Math.floor(r/n.y);return[{shape:[t.sizet,t.sizec,t.sizez,o,i],spacing:[1,1,t.pixelsizez,t.pixelsizey*t.sizey/o,t.pixelsizex*t.sizex/i],spaceUnit:t.unit?t.unit:"micron",dataType:$E(t.pixeltype),timeUnit:"s"}]}async createImageInfo(e){const t=await this.loadOmeDims(),n=F_(t.sizez,t.sizex,t.sizey),r=U_,i=Math.floor(r/n.x),o=Math.floor(r/n.y);return{imageInfo:{name:"TEST",atlasTileDims:[n.x,n.y],subregionSize:[i,o,t.sizez],subregionOffset:[0,0,0],combinedNumChannels:t.sizec,channelNames:t.channelnames,multiscaleLevel:0,multiscaleLevelDims:[{shape:[t.sizet,t.sizec,t.sizez,o,i],spacing:[1,1,t.pixelsizez,t.pixelsizey*t.sizey/o,t.pixelsizex*t.sizex/i],spaceUnit:t.unit||"",timeUnit:"",dataType:$E(t.pixeltype)}],transform:{translation:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}},loadSpec:new j_}}async loadRawChannelData(e,t,n,r){const i=await this.loadOmeDims(),o=new z_(e).volumeSize,s=[];for(let t=0;t<e.combinedNumChannels;++t){const n=new Promise(((n,s)=>{const l={channel:t,tilesizex:o.x,tilesizey:o.y,sizec:e.combinedNumChannels,sizez:o.z,dimensionOrder:i.dimensionorder,bytesPerSample:(c=i.pixeltype,"uint8"===c?1:"uint16"===c?2:4),url:this.url};var c;const u=new Worker(new URL(a.p+a.u(647),a.b));u.onmessage=e=>{if(e.data.isError)return void s(BE(e.data.error));const{data:t,dtype:i,channel:o,range:a}=e.data;r([o],[i],[t],[a]),u.terminate(),n()},u.postMessage(l)}));s.push(n)}await Promise.all(s)}}let WE=function(e){return e[e.T_MINUS=0]="T_MINUS",e[e.T_PLUS=1]="T_PLUS",e[e.Z_MINUS=2]="Z_MINUS",e[e.Z_PLUS=3]="Z_PLUS",e[e.Y_MINUS=4]="Y_MINUS",e[e.Y_PLUS=5]="Y_PLUS",e[e.X_MINUS=6]="X_MINUS",e[e.X_PLUS=7]="X_PLUS",e}({}),qE=function(e){return e.ZARR="zarr",e.JSON="json",e.TIFF="tiff",e.DATA="data",e}({});var XE=a(9739);let YE=function(e){return e[e.INIT=0]="INIT",e[e.CREATE_LOADER=1]="CREATE_LOADER",e[e.CREATE_VOLUME=2]="CREATE_VOLUME",e[e.LOAD_DIMS=3]="LOAD_DIMS",e[e.LOAD_VOLUME_DATA=4]="LOAD_VOLUME_DATA",e[e.SET_PREFETCH_PRIORITY_DIRECTIONS=5]="SET_PREFETCH_PRIORITY_DIRECTIONS",e[e.SYNCHRONIZE_MULTICHANNEL_LOADING=6]="SYNCHRONIZE_MULTICHANNEL_LOADING",e[e.UPDATE_FETCH_OPTIONS=7]="UPDATE_FETCH_OPTIONS",e}({}),KE=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.EVENT=2]="EVENT",e}({}),ZE=function(e){return e[e.METADATA_UPDATE=0]="METADATA_UPDATE",e[e.CHANNEL_LOAD=1]="CHANNEL_LOAD",e}({});function JE(e){return{...e,subregion:new qf((new Hf).copy(e.subregion.min),(new Hf).copy(e.subregion.max))}}const QE=XE(1,16);class eC{pendingRequests=[];workerOpen=!0;throttleChannelData=!1;onChannelData=void 0;onUpdateMetadata=void 0;constructor(){this.worker=new Worker(new URL(a.p+a.u(283),a.b)),this.worker.onmessage=this.receiveMessage.bind(this)}registerMessagePromise(e){for(const[t,n]of this.pendingRequests.entries())if(void 0===n)return this.pendingRequests[t]=e,t;return this.pendingRequests.push(e)-1}get isOpen(){return this.workerOpen}close(){this.worker.terminate(),this.workerOpen=!1}sendMessage(e,t){let n=-1;const r=new Promise(((t,r)=>{n=this.registerMessagePromise({type:e,resolve:t,reject:r})})),i={msgId:n,type:e,payload:t};return this.worker.postMessage(i),r}receiveMessage({data:e}){if(e.responseResult===KE.EVENT)e.eventType===ZE.CHANNEL_LOAD?this.onChannelData&&(this.throttleChannelData?QE((()=>this.onChannelData?this.onChannelData(e):{})):!this.onChannelData||this.onChannelData(e)):e.eventType===ZE.METADATA_UPDATE&&this.onUpdateMetadata?.(e);else{const t=this.pendingRequests[e.msgId];if(void 0===t)throw new Error(`Received response for unknown message ID ${e.msgId}`);if(t.type!==e.type)throw new Error(`Received response of type ${e.type} for message of type ${t.type}`);e.responseResult===KE.ERROR?t.reject(BE(e.payload)):t.resolve(e.payload),this.pendingRequests[e.msgId]=void 0}}setThrottleChannelData(e){this.throttleChannelData=e}}class tC extends V_{isOpen=!0;currentLoadId=-1;currentLoadCallback=void 0;currentMetadataUpdateCallback=void 0;constructor(e,t){super(),this.loaderId=e,this.workerHandle=t,t.onChannelData=this.onChannelData.bind(this),t.onUpdateMetadata=this.onUpdateMetadata.bind(this)}checkIsOpen(){if(!this.isOpen||!this.workerHandle.isOpen)throw new Error("Tried to use a closed loader")}close(){this.isOpen=!1}setPrefetchPriority(e){return this.workerHandle.sendMessage(YE.SET_PREFETCH_PRIORITY_DIRECTIONS,e)}updateFetchOptions(e){return this.workerHandle.sendMessage(YE.UPDATE_FETCH_OPTIONS,e)}syncMultichannelLoading(e){return this.workerHandle.sendMessage(YE.SYNCHRONIZE_MULTICHANNEL_LOADING,e)}loadDims(e){return this.checkIsOpen(),this.workerHandle.sendMessage(YE.LOAD_DIMS,e)}async createImageInfo(e){this.checkIsOpen();const{imageInfo:t,loadSpec:n}=await this.workerHandle.sendMessage(YE.CREATE_VOLUME,e);return{imageInfo:t,loadSpec:JE(n)}}loadRawChannelData(e,t,n,r){return this.checkIsOpen(),this.currentLoadCallback=r,this.currentMetadataUpdateCallback=n,this.currentLoadId+=1,this.workerHandle.sendMessage(YE.LOAD_VOLUME_DATA,{imageInfo:e,loadSpec:t,loaderId:this.loaderId,loadId:this.currentLoadId})}onChannelData(e){e.loaderId===this.loaderId&&e.loadId===this.currentLoadId&&this.currentLoadCallback?.(e.channelIndex,e.dtype,e.data,e.ranges,e.atlasDims)}onUpdateMetadata(e){if(e.loaderId!==this.loaderId||e.loadId!==this.currentLoadId)return;const t=e.imageInfo,n=e.loadSpec&&JE(e.loadSpec);this.currentMetadataUpdateCallback?.(t,n)}}const nC=class{activeLoader=void 0;activeLoaderId=-1;constructor(e,t,n){this.workerHandle=new eC,this.openPromise=this.workerHandle.sendMessage(YE.INIT,{maxCacheSize:e,maxActiveRequests:t,maxLowPriorityRequests:n})}onOpen(){return this.workerHandle.isOpen?this.openPromise:Promise.reject("Worker is closed")}close(){this.workerHandle.close(),this.activeLoader?.close()}async createLoader(e,t){const n=Array.isArray(e)?e[0]:e,r=t?.fileType||function(e){return e.endsWith(".json")?qE.JSON:e.endsWith(".tif")||e.endsWith(".tiff")?qE.TIFF:qE.ZARR}(n);if(r===qE.TIFF)return new GE(n);if(r===qE.DATA){if(!t?.rawArrayOptions)throw new Error("Failed to create loader: Must provide RawArrayOptions for RawArrayLoader");return new Nw(t.rawArrayOptions.data,t.rawArrayOptions.metadata)}if(!await this.workerHandle.sendMessage(YE.CREATE_LOADER,{path:e,options:t}))throw new Error("Failed to create loader");return this.activeLoader?.close(),this.activeLoaderId+=1,this.activeLoader=new tC(this.activeLoaderId,this.workerHandle),this.activeLoader}setThrottleChannelData(e){this.workerHandle.setThrottleChannelData(e)}getActiveLoader(){return this.activeLoader}};function rC(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}const iC=n.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function oC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return n.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?r=r.concat(oC(e)):(0,xa.isFragment)(e)&&e.props?r=r.concat(oC(e.props.children,t)):r.push(e))})),r}const aC={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};function sC(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function lC(e){return function(e){return sC(e)instanceof ShadowRoot}(e)?sC(e):null}function cC(e,t){gn(e,"[@ant-design/icons] ".concat(t))}function uC(e){return"object"===zt(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===zt(e.icon)||"function"==typeof e.icon)}function hC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r,i=e[n];return"class"===n?(t.className=i,delete t.class):(delete t[n],t[(r=n,r.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=i),t}),{})}function dC(e,t,r){return r?n.createElement(e.tag,Xt(Xt({key:t},hC(e.attrs)),r),(e.children||[]).map((function(n,r){return dC(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):n.createElement(e.tag,Xt({key:t},hC(e.attrs)),(e.children||[]).map((function(n,r){return dC(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function fC(e){return Mi(e)[0]}function pC(e){return e?Array.isArray(e)?e:[e]:[]}var mC={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},gC=function(e){var t=(0,n.useContext)(Io),r=t.csp,i=t.prefixCls,o="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";i&&(o=o.replace(/anticon/g,i)),(0,n.useEffect)((function(){var t=lC(e.current);ln(o,"@ant-design-icons",{prepend:!0,csp:r,attachTo:t})}),[])},vC=["icon","className","onClick","style","primaryColor","secondaryColor"],yC={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},bC=function(e){var t=e.icon,r=e.className,i=e.onClick,o=e.style,a=e.primaryColor,s=e.secondaryColor,l=Ca(e,vC),c=n.useRef(),u=yC;if(a&&(u={primaryColor:a,secondaryColor:s||fC(a)}),gC(c),cC(uC(t),"icon should be icon definiton, but got ".concat(t)),!uC(t))return null;var h=t;return h&&"function"==typeof h.icon&&(h=Xt(Xt({},h),{},{icon:h.icon(u.primaryColor,u.secondaryColor)})),dC(h.icon,"svg-".concat(h.name),Xt(Xt({className:r,onClick:i,style:o,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};bC.displayName="IconReact",bC.getTwoToneColors=function(){return Xt({},yC)},bC.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;yC.primaryColor=t,yC.secondaryColor=n||fC(t),yC.calculated=!!n};const xC=bC;function _C(e){var t=Ht(pC(e),2),n=t[0],r=t[1];return xC.setTwoToneColors({primaryColor:n,secondaryColor:r})}var wC=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];_C(Di.primary);var SC=n.forwardRef((function(e,t){var r=e.className,i=e.icon,o=e.spin,a=e.rotate,s=e.tabIndex,l=e.onClick,c=e.twoToneColor,u=Ca(e,wC),h=n.useContext(Io),d=h.prefixCls,f=void 0===d?"anticon":d,p=h.rootClassName,m=va()(p,f,Ft(Ft({},"".concat(f,"-").concat(i.name),!!i.name),"".concat(f,"-spin"),!!o||"loading"===i.name),r),g=s;void 0===g&&l&&(g=-1);var v=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,y=Ht(pC(c),2),b=y[0],x=y[1];return n.createElement("span",nr({role:"img","aria-label":i.name},u,{ref:t,tabIndex:g,onClick:l,className:m}),n.createElement(xC,{icon:i,primaryColor:b,secondaryColor:x,style:v}))}));SC.displayName="AntdIcon",SC.getTwoToneColor=function(){var e=xC.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},SC.setTwoToneColor=_C;const EC=SC;var CC=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:aC}))};const MC=n.forwardRef(CC),TC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var AC=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:TC}))};const PC=n.forwardRef(AC),RC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};var IC=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:RC}))};const OC=n.forwardRef(IC),kC=xn((function e(){yn(this,e)}));var LC="CALC_UNIT",NC=new RegExp(LC,"g");function DC(e){return"number"==typeof e?"".concat(e).concat(LC):e}var zC=function(e){Ra(n,e);var t=Na(n);function n(e,r){var i;yn(this,n),Ft(ka(i=t.call(this)),"result",""),Ft(ka(i),"unitlessCssVar",void 0),Ft(ka(i),"lowPriority",void 0);var o=zt(e);return i.unitlessCssVar=r,e instanceof n?i.result="(".concat(e.result,")"):"number"===o?i.result=DC(e):"string"===o&&(i.result=e),i}return xn(n,[{key:"add",value:function(e){return e instanceof n?this.result="".concat(this.result," + ").concat(e.getResult()):"number"!=typeof e&&"string"!=typeof e||(this.result="".concat(this.result," + ").concat(DC(e))),this.lowPriority=!0,this}},{key:"sub",value:function(e){return e instanceof n?this.result="".concat(this.result," - ").concat(e.getResult()):"number"!=typeof e&&"string"!=typeof e||(this.result="".concat(this.result," - ").concat(DC(e))),this.lowPriority=!0,this}},{key:"mul",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof n?this.result="".concat(this.result," * ").concat(e.getResult(!0)):"number"!=typeof e&&"string"!=typeof e||(this.result="".concat(this.result," * ").concat(e)),this.lowPriority=!1,this}},{key:"div",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof n?this.result="".concat(this.result," / ").concat(e.getResult(!0)):"number"!=typeof e&&"string"!=typeof e||(this.result="".concat(this.result," / ").concat(e)),this.lowPriority=!1,this}},{key:"getResult",value:function(e){return this.lowPriority||e?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(e){var t=this,n=(e||{}).unit,r=!0;return"boolean"==typeof n?r=n:Array.from(this.unitlessCssVar).some((function(e){return t.result.includes(e)}))&&(r=!1),this.result=this.result.replace(NC,r?"px":""),void 0!==this.lowPriority?"calc(".concat(this.result,")"):this.result}}]),n}(kC);const UC=function(e){Ra(n,e);var t=Na(n);function n(e){var r;return yn(this,n),Ft(ka(r=t.call(this)),"result",0),e instanceof n?r.result=e.result:"number"==typeof e&&(r.result=e),r}return xn(n,[{key:"add",value:function(e){return e instanceof n?this.result+=e.result:"number"==typeof e&&(this.result+=e),this}},{key:"sub",value:function(e){return e instanceof n?this.result-=e.result:"number"==typeof e&&(this.result-=e),this}},{key:"mul",value:function(e){return e instanceof n?this.result*=e.result:"number"==typeof e&&(this.result*=e),this}},{key:"div",value:function(e){return e instanceof n?this.result/=e.result:"number"==typeof e&&(this.result/=e),this}},{key:"equal",value:function(){return this.result}}]),n}(kC),FC=function(e,t){return"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))},BC=function(e,t,n,r){var i=Xt({},t[e]);null!=r&&r.deprecatedTokens&&r.deprecatedTokens.forEach((function(e){var t,n=Ht(e,2),r=n[0],o=n[1];(null!=i&&i[r]||null!=i&&i[o])&&(null!==(t=i[o])&&void 0!==t||(i[o]=null==i?void 0:i[r]))}));var o=Xt(Xt({},n),i);return Object.keys(o).forEach((function(e){o[e]===t[e]&&delete o[e]})),o};var jC="undefined"!=typeof CSSINJS_STATISTIC,VC=!0;function $C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!jC)return Object.assign.apply(Object,[{}].concat(t));VC=!1;var r={};return t.forEach((function(e){"object"===zt(e)&&Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})}))})),VC=!0,r}var HC={};function GC(){}const WC=function(e,t,n){var r;return"function"==typeof n?n($C(t,null!==(r=t[e])&&void 0!==r?r:{})):null!=n?n:{}};var qC=new(function(){function e(){yn(this,e),Ft(this,"map",new Map),Ft(this,"objectIDMap",new WeakMap),Ft(this,"nextID",0),Ft(this,"lastAccessBeat",new Map),Ft(this,"accessBeat",0)}return xn(e,[{key:"set",value:function(e,t){this.clear();var n=this.getCompositeKey(e);this.map.set(n,t),this.lastAccessBeat.set(n,Date.now())}},{key:"get",value:function(e){var t=this.getCompositeKey(e),n=this.map.get(t);return this.lastAccessBeat.set(t,Date.now()),this.accessBeat+=1,n}},{key:"getCompositeKey",value:function(e){var t=this;return e.map((function(e){return e&&"object"===zt(e)?"obj_".concat(t.getObjectID(e)):"".concat(zt(e),"_").concat(e)})).join("|")}},{key:"getObjectID",value:function(e){if(this.objectIDMap.has(e))return this.objectIDMap.get(e);var t=this.nextID;return this.objectIDMap.set(e,t),this.nextID+=1,t}},{key:"clear",value:function(){var e=this;if(this.accessBeat>1e4){var t=Date.now();this.lastAccessBeat.forEach((function(n,r){t-n>6e5&&(e.map.delete(r),e.lastAccessBeat.delete(r))})),this.accessBeat=0}}}]),e}());const XC=function(){return{}},{genStyleHooks:YC,genComponentStyleHook:KC,genSubStyleComponent:ZC}=function(e){var t=e.useCSP,r=void 0===t?XC:t,i=e.useToken,o=e.usePrefix,a=e.getResetStyles,s=e.getCommonStyle,l=e.getCompUnitless;function c(t,l,c){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=Array.isArray(t)?t:[t,t],d=Ht(h,1)[0],f=h.join("-"),p=e.layer||{name:"antd"};return function(e){var t,h,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,g=i(),v=g.theme,y=g.realToken,b=g.hashId,x=g.token,_=g.cssVar,w=o(),S=w.rootPrefixCls,E=w.iconPrefixCls,C=r(),M=_?"css":"js",T=(t=function(){var e=new Set;return _&&Object.keys(u.unitless||{}).forEach((function(t){e.add(Bn(t,_.prefix)),e.add(Bn(t,FC(d,_.prefix)))})),function(e,t){var n="css"===e?zC:UC;return function(e){return new n(e,t)}}(M,e)},h=[M,d,null==_?void 0:_.prefix],n.useMemo((function(){var e=qC.get(h);if(e)return e;var n=t();return qC.set(h,n),n}),h)),A=function(e){return"js"===e?{max:Math.max,min:Math.min}:{max:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"max(".concat(t.map((function(e){return Un(e)})).join(","),")")},min:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"min(".concat(t.map((function(e){return Un(e)})).join(","),")")}}}(M),P=A.max,R=A.min,I={theme:v,token:x,hashId:b,nonce:function(){return C.nonce},clientOnly:u.clientOnly,layer:p,order:u.order||-999};return"function"==typeof a&&Zr(Xt(Xt({},I),{},{clientOnly:!1,path:["Shared",S]}),(function(){return a(x,{prefix:{rootPrefixCls:S,iconPrefixCls:E},csp:C})})),[Zr(Xt(Xt({},I),{},{path:[f,e,E]}),(function(){if(!1===u.injectStyle)return[];var t=function(e){var t,n=e,r=GC;return jC&&"undefined"!=typeof Proxy&&(t=new Set,n=new Proxy(e,{get:function(e,n){var r;return VC&&(null===(r=t)||void 0===r||r.add(n)),e[n]}}),r=function(e,n){var r;HC[e]={global:Array.from(t),component:Xt(Xt({},null===(r=HC[e])||void 0===r?void 0:r.component),n)}}),{token:n,keys:t,flush:r}}(x),n=t.token,r=t.flush,i=WC(d,y,c),o=".".concat(e),a=BC(d,y,i,{deprecatedTokens:u.deprecatedTokens});_&&i&&"object"===zt(i)&&Object.keys(i).forEach((function(e){i[e]="var(".concat(Bn(e,FC(d,_.prefix)),")")}));var h=$C(n,{componentCls:o,prefixCls:e,iconCls:".".concat(E),antCls:".".concat(S),calc:T,max:P,min:R},_?i:a),f=l(h,{hashId:b,prefixCls:e,rootPrefixCls:S,iconPrefixCls:E});r(d,a);var p="function"==typeof s?s(h,e,m,u.resetFont):null;return[!1===u.resetStyle?null:p,f]})),b]}}return{genStyleHooks:function(e,t,r,o){var a=Array.isArray(e)?e[0]:e;function s(e){return"".concat(String(a)).concat(e.slice(0,1).toUpperCase()).concat(e.slice(1))}var u=(null==o?void 0:o.unitless)||{},h=Xt(Xt({},"function"==typeof l?l(e):{}),{},Ft({},s("zIndexPopup"),!0));Object.keys(u).forEach((function(e){h[s(e)]=u[e]}));var d=Xt(Xt({},o),{},{unitless:h,prefixToken:s}),f=c(e,t,r,d),p=function(e,t,r){var o=r.unitless,a=r.injectStyle,s=void 0===a||a,l=r.prefixToken,c=r.ignore,u=function(a){var s=a.rootCls,u=a.cssVar,h=void 0===u?{}:u,d=i().realToken;return function(e,t){var r=e.key,i=e.prefix,o=e.unitless,a=e.ignore,s=e.token,l=e.scope,c=void 0===l?"":l,u=(0,n.useContext)(Mn),h=u.cache.instanceId,d=u.container,f=s._tokenKey,p=[].concat(Wt(e.path),[r,c,f]);Kn(Jr,p,(function(){var e=t(),n=Ht(Vn(e,r,{prefix:i,unitless:o,ignore:a,scope:c}),2),s=n[0],l=n[1];return[s,l,Xr(p,l),r]}),(function(e){var t=Ht(e,3)[2];zn&&sn(t,{mark:En})}),(function(e){var t=Ht(e,3),n=t[1],i=t[2];if(n){var o=ln(n,i,{mark:En,prepend:"queue",attachTo:d,priority:-999});o[Cn]=h,o.setAttribute(Sn,r)}}))}({path:[e],prefix:h.prefix,key:h.key,unitless:o,ignore:c,token:d,scope:s},(function(){var n=WC(e,d,t),i=BC(e,d,n,{deprecatedTokens:null==r?void 0:r.deprecatedTokens});return Object.keys(n).forEach((function(e){i[l(e)]=i[e],delete i[e]})),i})),null};return function(t){var r=i().cssVar;return[function(i){return s&&r?n.createElement(n.Fragment,null,n.createElement(u,{rootCls:t,cssVar:r,component:e}),i):i},null==r?void 0:r.key]}}(a,r,d);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Ht(f(e,t),2)[1],r=Ht(p(t),2);return[r[0],n,r[1]]}},genSubStyleComponent:function(e,t,n){var r=c(e,t,n,Xt({resetStyle:!1,order:-998},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}));return function(e){var t=e.prefixCls,n=e.rootCls;return r(t,void 0===n?t:n),null}},genComponentStyleHook:c}}({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=(0,n.useContext)(ia);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,n,r,i]=Co();return{theme:e,realToken:t,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:e,iconPrefixCls:t}=(0,n.useContext)(ia);return Hs(t,e),null!=e?e:{}},getResetStyles:e=>[{"&":js(e)}],getCommonStyle:(e,t,n,r)=>{const i=`[class^="${t}"], [class*=" ${t}"]`,o=n?`.${n}`:i,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let s={};return!1!==r&&(s={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},s),a),{[i]:a})}},getCompUnitless:()=>_o}),JC=e=>{const{antCls:t,componentCls:n,colorText:r,footerBg:i,headerHeight:o,headerPadding:a,headerColor:s,footerPadding:l,fontSize:c,bodyBg:u,headerBg:h}=e;return{[n]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:u,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${n}-header`]:{height:o,padding:a,color:s,lineHeight:Un(o),background:h,[`${t}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:l,color:r,fontSize:c,background:i},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},QC=e=>{const{colorBgLayout:t,controlHeight:n,controlHeightLG:r,colorText:i,controlHeightSM:o,marginXXS:a,colorTextLightSolid:s,colorBgContainer:l}=e,c=1.25*r;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:2*n,headerPadding:`0 ${c}px`,headerColor:i,footerPadding:`${o}px ${c}px`,footerBg:t,siderBg:"#001529",triggerHeight:r+2*a,triggerBg:"#002140",triggerColor:s,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:l,lightTriggerBg:l,lightTriggerColor:i}},eM=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],tM=YC("Layout",(e=>[JC(e)]),QC,{deprecatedTokens:eM}),nM=e=>{const{componentCls:t,siderBg:n,motionDurationMid:r,motionDurationSlow:i,antCls:o,triggerHeight:a,triggerColor:s,triggerBg:l,headerHeight:c,zeroTriggerWidth:u,zeroTriggerHeight:h,borderRadius:d,lightSiderBg:f,lightTriggerColor:p,lightTriggerBg:m,bodyBg:g}=e;return{[t]:{position:"relative",minWidth:0,background:n,transition:`all ${r}, background 0s`,"&-has-trigger":{paddingBottom:a},"&-right":{order:1},[`${t}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${o}-menu${o}-menu-inline-collapsed`]:{width:"auto"}},[`${t}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:a,color:s,lineHeight:Un(a),textAlign:"center",background:l,cursor:"pointer",transition:`all ${r}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:c,insetInlineEnd:e.calc(u).mul(-1).equal(),zIndex:1,width:u,height:h,color:s,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:n,borderStartStartRadius:0,borderStartEndRadius:d,borderEndEndRadius:d,borderEndStartRadius:0,cursor:"pointer",transition:`background ${i} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${i}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(u).mul(-1).equal(),borderStartStartRadius:d,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:d}}},"&-light":{background:f,[`${t}-trigger`]:{color:p,background:m},[`${t}-zero-width-trigger`]:{color:p,background:m,border:`1px solid ${g}`,borderInlineStart:0}}}}},rM=YC(["Layout","Sider"],(e=>[nM(e)]),QC,{deprecatedTokens:eM});const iM={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},oM=n.createContext({}),aM=(()=>{let e=0;return function(){return e+=1,`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}${e}`}})(),sM=n.forwardRef(((e,t)=>{const{prefixCls:r,className:i,trigger:o,children:a,defaultCollapsed:s=!1,theme:l="dark",style:c={},collapsible:u=!1,reverseArrow:h=!1,width:d=200,collapsedWidth:f=80,zeroWidthTriggerStyle:p,breakpoint:m,onCollapse:g,onBreakpoint:v}=e,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:b}=(0,n.useContext)(iC),[x,_]=(0,n.useState)("collapsed"in e?e.collapsed:s),[w,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>{"collapsed"in e&&_(e.collapsed)}),[e.collapsed]);const E=(t,n)=>{"collapsed"in e||_(t),null==g||g(t,n)},{getPrefixCls:C}=(0,n.useContext)(ia),M=C("layout-sider",r),[T,A,P]=rM(M),R=(0,n.useRef)();R.current=e=>{S(e.matches),null==v||v(e.matches),x!==e.matches&&E(e.matches,"responsive")},(0,n.useEffect)((()=>{function e(e){return R.current(e)}let t;if("undefined"!=typeof window){const{matchMedia:n}=window;if(n&&m&&m in iM){t=n(`screen and (max-width: ${iM[m]})`);try{t.addEventListener("change",e)}catch(n){t.addListener(e)}e(t)}}return()=>{try{null==t||t.removeEventListener("change",e)}catch(n){null==t||t.removeListener(e)}}}),[m]),(0,n.useEffect)((()=>{const e=aM("ant-sider-");return b.addSider(e),()=>b.removeSider(e)}),[]);const I=()=>{E(!x,"clickTrigger")},O=n.useMemo((()=>({siderCollapsed:x})),[x]);return T(n.createElement(oM.Provider,{value:O},(()=>{const e=rC(y,["collapsed"]),r=x?f:d,s=(S=r,!isNaN(parseFloat(S))&&isFinite(S)?`${r}px`:String(r)),m=0===parseFloat(String(f||0))?n.createElement("span",{onClick:I,className:va()(`${M}-zero-width-trigger`,`${M}-zero-width-trigger-${h?"right":"left"}`),style:p},o||n.createElement(MC,null)):null,g={expanded:h?n.createElement(OC,null):n.createElement(PC,null),collapsed:h?n.createElement(PC,null):n.createElement(OC,null)}[x?"collapsed":"expanded"],v=null!==o?m||n.createElement("div",{className:`${M}-trigger`,onClick:I,style:{width:s}},o||g):null,b=Object.assign(Object.assign({},c),{flex:`0 0 ${s}`,maxWidth:s,minWidth:s,width:s}),_=va()(M,`${M}-${l}`,{[`${M}-collapsed`]:!!x,[`${M}-has-trigger`]:u&&null!==o&&!m,[`${M}-below`]:!!w,[`${M}-zero-width`]:0===parseFloat(s)},i,A,P);var S;return n.createElement("aside",Object.assign({className:_},e,{style:b,ref:t}),n.createElement("div",{className:`${M}-children`},a),u||w&&m?v:null)})()))}));var lM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function cM(e){let{suffixCls:t,tagName:r,displayName:i}=e;return e=>n.forwardRef(((i,o)=>n.createElement(e,Object.assign({ref:o,suffixCls:t,tagName:r},i))))}const uM=n.forwardRef(((e,t)=>{const{prefixCls:r,suffixCls:i,className:o,tagName:a}=e,s=lM(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:l}=n.useContext(ia),c=l("layout",r),[u,h,d]=tM(c),f=i?`${c}-${i}`:c;return u(n.createElement(a,Object.assign({className:va()(r||f,o,h,d),ref:t},s)))})),hM=n.forwardRef(((e,t)=>{const{direction:r}=n.useContext(ia),[i,o]=n.useState([]),{prefixCls:a,className:s,rootClassName:l,children:c,hasSider:u,tagName:h,style:d}=e,f=rC(lM(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),["suffixCls"]),{getPrefixCls:p,layout:m}=n.useContext(ia),g=p("layout",a),v=function(e,t,n){return"boolean"==typeof n?n:!!e.length||oC(t).some((e=>e.type===sM))}(i,c,u),[y,b,x]=tM(g),_=va()(g,{[`${g}-has-sider`]:v,[`${g}-rtl`]:"rtl"===r},null==m?void 0:m.className,s,l,b,x),w=n.useMemo((()=>({siderHook:{addSider:e=>{o((t=>[].concat(Wt(t),[e])))},removeSider:e=>{o((t=>t.filter((t=>t!==e))))}}})),[]);return y(n.createElement(iC.Provider,{value:w},n.createElement(h,Object.assign({ref:t,className:_,style:Object.assign(Object.assign({},null==m?void 0:m.style),d)},f),c)))})),dM=cM({tagName:"div",displayName:"Layout"})(hM),fM=cM({suffixCls:"header",tagName:"header",displayName:"Header"})(uM),pM=cM({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(uM),mM=cM({suffixCls:"content",tagName:"main",displayName:"Content"})(uM),gM=dM;gM.Header=fM,gM.Footer=pM,gM.Content=mM,gM.Sider=sM,gM._InternalSiderContext=oM;const vM=gM;var yM=a(2543);const bM="144",xM=100,_M=101,wM=102,SM=200,EM=201,CM=202,MM=203,TM=204,AM=205,PM=206,RM=207,IM=208,OM=209,kM=210,LM=301,NM=302,DM=306,zM=1e3,UM=1001,FM=1002,BM=1003,jM=1004,VM=1005,$M=1006,HM=1007,GM=1008,WM=1009,qM=1014,XM=1015,YM=1016,KM=1020,ZM=1023,JM=1026,QM=1027,eT=33776,tT=33777,nT=33778,rT=33779,iT=2300,oT=2301,aT=2302,sT=3e3,lT=3001,cT="srgb",uT="srgb-linear",hT=7680,dT="300 es",fT=1035;class pT{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const mT=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gT=Math.PI/180,vT=180/Math.PI;function yT(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(mT[255&e]+mT[e>>8&255]+mT[e>>16&255]+mT[e>>24&255]+"-"+mT[255&t]+mT[t>>8&255]+"-"+mT[t>>16&15|64]+mT[t>>24&255]+"-"+mT[63&n|128]+mT[n>>8&255]+"-"+mT[n>>16&255]+mT[n>>24&255]+mT[255&r]+mT[r>>8&255]+mT[r>>16&255]+mT[r>>24&255]).toLowerCase()}function bT(e,t,n){return Math.max(t,Math.min(n,e))}function xT(e,t,n){return(1-n)*e+n*t}function _T(e){return!(e&e-1)&&0!==e}function wT(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ST(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ET(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class CT{constructor(e=0,t=0){CT.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class MT{constructor(){MT.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*p+a*v+s*x,i[3]=o*m+a*y+s*_,i[6]=o*g+a*b+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=h*p+d*v+f*x,i[5]=h*m+d*y+f*_,i[8]=h*g+d*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function TT(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function AT(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function PT(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function RT(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const IT={[cT]:{[uT]:PT},[uT]:{[cT]:RT}},OT={legacyMode:!0,get workingColorSpace(){return uT},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(IT[t]&&void 0!==IT[t][n]){const r=IT[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},kT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},LT={r:0,g:0,b:0},NT={h:0,s:0,l:0},DT={h:0,s:0,l:0};function zT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function UT(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class FT{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=cT){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,OT.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=uT){return this.r=e,this.g=t,this.b=n,OT.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=uT){if(e=(e%(i=1)+i)%i,t=bT(t,0,1),n=bT(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=zT(i,r,e+1/3),this.g=zT(i,r,e),this.b=zT(i,r,e-1/3)}var i;return OT.toWorkingColorSpace(this,r),this}setStyle(e,t=cT){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,OT.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,OT.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,o,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,OT.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,OT.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=cT){const n=kT[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=PT(e.r),this.g=PT(e.g),this.b=PT(e.b),this}copyLinearToSRGB(e){return this.r=RT(e.r),this.g=RT(e.g),this.b=RT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=cT){return OT.fromWorkingColorSpace(UT(this,LT),e),bT(255*LT.r,0,255)<<16^bT(255*LT.g,0,255)<<8^bT(255*LT.b,0,255)}getHexString(e=cT){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=uT){OT.fromWorkingColorSpace(UT(this,LT),t);const n=LT.r,r=LT.g,i=LT.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=uT){return OT.fromWorkingColorSpace(UT(this,LT),t),e.r=LT.r,e.g=LT.g,e.b=LT.b,e}getStyle(e=cT){return OT.fromWorkingColorSpace(UT(this,LT),e),e!==cT?`color(${e} ${LT.r} ${LT.g} ${LT.b})`:`rgb(${255*LT.r|0},${255*LT.g|0},${255*LT.b|0})`}offsetHSL(e,t,n){return this.getHSL(NT),NT.h+=e,NT.s+=t,NT.l+=n,this.setHSL(NT.h,NT.s,NT.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(NT),e.getHSL(DT);const n=xT(NT.h,DT.h,t),r=xT(NT.s,DT.s,t),i=xT(NT.l,DT.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let BT;FT.NAMES=kT;class jT{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===BT&&(BT=AT("canvas")),BT.width=e.width,BT.height=e.height;const n=BT.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=BT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=AT("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*PT(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*PT(t[e]/255)):t[e]=PT(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class VT{constructor(e=null){this.isSource=!0,this.uuid=yT(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push($T(r[t].image)):e.push($T(r[t]))}else e=$T(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function $T(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?jT.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let HT=0;class GT extends pT{constructor(e=GT.DEFAULT_IMAGE,t=GT.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:HT++}),this.uuid=yT(),this.name="",this.source=new VT(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new CT(0,0),this.repeat=new CT(1,1),this.center=new CT(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new MT,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zM:e.x=e.x-Math.floor(e.x);break;case UM:e.x=e.x<0?0:1;break;case FM:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case zM:e.y=e.y-Math.floor(e.y);break;case UM:e.y=e.y<0?0:1;break;case FM:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}GT.DEFAULT_IMAGE=null,GT.DEFAULT_MAPPING=300;class WT{constructor(e=0,t=0,n=0,r=1){WT.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(u+p)/4,x=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qT extends pT{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new WT(0,0,e,t),this.scissorTest=!1,this.viewport=new WT(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new GT(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:$M,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new VT(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class XT extends GT{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=BM,this.minFilter=BM,this.wrapR=UM,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YT extends GT{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=BM,this.minFilter=BM,this.wrapR=UM,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class KT{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==h||l!==d||c!==f){let e=1-a;const t=s*h+l*d+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+f*i,u=u*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+c*u+s*d-l*h,e[t+1]=s*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-s*u,e[t+3]=c*f-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bT(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ZT{constructor(e=0,t=0,n=0){ZT.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(QT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(QT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return JT.copy(this).projectOnVector(e),this.sub(JT)}reflect(e){return this.sub(JT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bT(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const JT=new ZT,QT=new KT;class eA{constructor(e=new ZT(1/0,1/0,1/0),t=new ZT(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=nA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)nA.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(nA)}else null===n.boundingBox&&n.computeBoundingBox(),rA.copy(n.boundingBox),rA.applyMatrix4(e.matrixWorld),this.union(rA);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,nA),nA.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(uA),hA.subVectors(this.max,uA),iA.subVectors(e.a,uA),oA.subVectors(e.b,uA),aA.subVectors(e.c,uA),sA.subVectors(oA,iA),lA.subVectors(aA,oA),cA.subVectors(iA,aA);let t=[0,-sA.z,sA.y,0,-lA.z,lA.y,0,-cA.z,cA.y,sA.z,0,-sA.x,lA.z,0,-lA.x,cA.z,0,-cA.x,-sA.y,sA.x,0,-lA.y,lA.x,0,-cA.y,cA.x,0];return!!pA(t,iA,oA,aA,hA)&&(t=[1,0,0,0,1,0,0,0,1],!!pA(t,iA,oA,aA,hA)&&(dA.crossVectors(sA,lA),t=[dA.x,dA.y,dA.z],pA(t,iA,oA,aA,hA)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nA.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(nA).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(tA[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tA[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tA[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tA[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tA[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tA[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tA[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tA[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tA)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tA=[new ZT,new ZT,new ZT,new ZT,new ZT,new ZT,new ZT,new ZT],nA=new ZT,rA=new eA,iA=new ZT,oA=new ZT,aA=new ZT,sA=new ZT,lA=new ZT,cA=new ZT,uA=new ZT,hA=new ZT,dA=new ZT,fA=new ZT;function pA(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){fA.fromArray(e,o);const a=i.x*Math.abs(fA.x)+i.y*Math.abs(fA.y)+i.z*Math.abs(fA.z),s=t.dot(fA),l=n.dot(fA),c=r.dot(fA);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const mA=new eA,gA=new ZT,vA=new ZT,yA=new ZT;class bA{constructor(e=new ZT,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):mA.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){yA.subVectors(e,this.center);const t=yA.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(yA.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?vA.set(0,0,1).multiplyScalar(e.radius):vA.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(gA.copy(e.center).add(vA)),this.expandByPoint(gA.copy(e.center).sub(vA)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const xA=new ZT,_A=new ZT,wA=new ZT,SA=new ZT,EA=new ZT,CA=new ZT,MA=new ZT;class TA{constructor(e=new ZT,t=new ZT(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xA)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xA.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xA.copy(this.direction).multiplyScalar(t).add(this.origin),xA.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){_A.copy(e).add(t).multiplyScalar(.5),wA.copy(t).sub(e).normalize(),SA.copy(this.origin).sub(_A);const i=.5*e.distanceTo(t),o=-this.direction.dot(wA),a=SA.dot(this.direction),s=-SA.dot(wA),l=SA.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=i*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(wA).multiplyScalar(h).add(_A),d}intersectSphere(e,t){xA.subVectors(e.center,this.origin);const n=xA.dot(this.direction),r=xA.dot(xA)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,xA)}intersectTriangle(e,t,n,r,i){EA.subVectors(t,e),CA.subVectors(n,e),MA.crossVectors(EA,CA);let o,a=this.direction.dot(MA);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}SA.subVectors(this.origin,e);const s=o*this.direction.dot(CA.crossVectors(SA,CA));if(s<0)return null;const l=o*this.direction.dot(EA.cross(SA));if(l<0)return null;if(s+l>a)return null;const c=-o*SA.dot(MA);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class AA{constructor(){AA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new AA).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/PA.setFromMatrixColumn(e,0).length(),i=1/PA.setFromMatrixColumn(e,1).length(),o=1/PA.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IA,e,OA)}lookAt(e,t,n){const r=this.elements;return NA.subVectors(e,t),0===NA.lengthSq()&&(NA.z=1),NA.normalize(),kA.crossVectors(n,NA),0===kA.lengthSq()&&(1===Math.abs(n.z)?NA.x+=1e-4:NA.z+=1e-4,NA.normalize(),kA.crossVectors(n,NA)),kA.normalize(),LA.crossVectors(NA,kA),r[0]=kA.x,r[4]=LA.x,r[8]=NA.x,r[1]=kA.y,r[5]=LA.y,r[9]=NA.y,r[2]=kA.z,r[6]=LA.z,r[10]=NA.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],C=r[1],M=r[5],T=r[9],A=r[13],P=r[2],R=r[6],I=r[10],O=r[14],k=r[3],L=r[7],N=r[11],D=r[15];return i[0]=o*_+a*C+s*P+l*k,i[4]=o*w+a*M+s*R+l*L,i[8]=o*S+a*T+s*I+l*N,i[12]=o*E+a*A+s*O+l*D,i[1]=c*_+u*C+h*P+d*k,i[5]=c*w+u*M+h*R+d*L,i[9]=c*S+u*T+h*I+d*N,i[13]=c*E+u*A+h*O+d*D,i[2]=f*_+p*C+m*P+g*k,i[6]=f*w+p*M+m*R+g*L,i[10]=f*S+p*T+m*I+g*N,i[14]=f*E+p*A+m*O+g*D,i[3]=v*_+y*C+b*P+x*k,i[7]=v*w+y*M+b*R+x*L,i[11]=v*S+y*T+b*I+x*N,i[15]=v*E+y*A+b*O+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*s*d-a*m*d-u*s*g+a*h*g,y=f*h*l-c*m*l-f*s*d+o*m*d+c*s*g-o*h*g,b=c*p*l-f*u*l+f*a*d-o*p*d-c*a*g+o*u*g,x=f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*w,e[4]=y*w,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*w,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*w,e[8]=b*w,e[9]=(f*u*i-c*p*i-f*n*d+t*p*d+c*n*g-t*u*g)*w,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*w,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*w,e[12]=x*w,e[13]=(c*p*r-f*u*r+f*n*h-t*p*h-c*n*m+t*u*m)*w,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*w,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,f=i*u,p=o*c,m=o*u,g=a*u,v=s*l,y=s*c,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=PA.set(r[0],r[1],r[2]).length();const o=PA.set(r[4],r[5],r[6]).length(),a=PA.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],RA.copy(this);const s=1/i,l=1/o,c=1/a;return RA.elements[0]*=s,RA.elements[1]*=s,RA.elements[2]*=s,RA.elements[4]*=l,RA.elements[5]*=l,RA.elements[6]*=l,RA.elements[8]*=c,RA.elements[9]*=c,RA.elements[10]*=c,t.setFromRotationMatrix(RA),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const PA=new ZT,RA=new AA,IA=new ZT(0,0,0),OA=new ZT(1,1,1),kA=new ZT,LA=new ZT,NA=new ZT,DA=new AA,zA=new KT;class UA{constructor(e=0,t=0,n=0,r=UA.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(bT(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-bT(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(bT(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-bT(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(bT(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-bT(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return DA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(DA,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zA.setFromEuler(this),this.setFromQuaternion(zA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}UA.DefaultOrder="XYZ",UA.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class FA{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let BA=0;const jA=new ZT,VA=new KT,$A=new AA,HA=new ZT,GA=new ZT,WA=new ZT,qA=new KT,XA=new ZT(1,0,0),YA=new ZT(0,1,0),KA=new ZT(0,0,1),ZA={type:"added"},JA={type:"removed"};class QA extends pT{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BA++}),this.uuid=yT(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=QA.DefaultUp.clone();const e=new ZT,t=new UA,n=new KT,r=new ZT(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new AA},normalMatrix:{value:new MT}}),this.matrix=new AA,this.matrixWorld=new AA,this.matrixAutoUpdate=QA.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=QA.DefaultMatrixWorldAutoUpdate,this.layers=new FA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return VA.setFromAxisAngle(e,t),this.quaternion.multiply(VA),this}rotateOnWorldAxis(e,t){return VA.setFromAxisAngle(e,t),this.quaternion.premultiply(VA),this}rotateX(e){return this.rotateOnAxis(XA,e)}rotateY(e){return this.rotateOnAxis(YA,e)}rotateZ(e){return this.rotateOnAxis(KA,e)}translateOnAxis(e,t){return jA.copy(e).applyQuaternion(this.quaternion),this.position.add(jA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XA,e)}translateY(e){return this.translateOnAxis(YA,e)}translateZ(e){return this.translateOnAxis(KA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4($A.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?HA.copy(e):HA.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),GA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$A.lookAt(GA,HA,this.up):$A.lookAt(HA,GA,this.up),this.quaternion.setFromRotationMatrix($A),r&&($A.extractRotation(r.matrixWorld),VA.setFromRotationMatrix($A),this.quaternion.premultiply(VA.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ZA)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(JA)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(JA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),$A.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),$A.multiply(e.parent.matrixWorld)),e.applyMatrix4($A),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(GA,e,WA),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(GA,qA,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}QA.DefaultUp=new ZT(0,1,0),QA.DefaultMatrixAutoUpdate=!0,QA.DefaultMatrixWorldAutoUpdate=!0;const eP=new ZT,tP=new ZT,nP=new ZT,rP=new ZT,iP=new ZT,oP=new ZT,aP=new ZT,sP=new ZT,lP=new ZT,cP=new ZT;class uP{constructor(e=new ZT,t=new ZT,n=new ZT){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),eP.subVectors(e,t),r.cross(eP);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){eP.subVectors(r,t),tP.subVectors(n,t),nP.subVectors(e,t);const o=eP.dot(eP),a=eP.dot(tP),s=eP.dot(nP),l=tP.dot(tP),c=tP.dot(nP),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,rP),rP.x>=0&&rP.y>=0&&rP.x+rP.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,rP),s.set(0,0),s.addScaledVector(i,rP.x),s.addScaledVector(o,rP.y),s.addScaledVector(a,rP.z),s}static isFrontFacing(e,t,n,r){return eP.subVectors(n,t),tP.subVectors(e,t),eP.cross(tP).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return eP.subVectors(this.c,this.b),tP.subVectors(this.a,this.b),.5*eP.cross(tP).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return uP.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return uP.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return uP.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return uP.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return uP.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;iP.subVectors(r,n),oP.subVectors(i,n),sP.subVectors(e,n);const s=iP.dot(sP),l=oP.dot(sP);if(s<=0&&l<=0)return t.copy(n);lP.subVectors(e,r);const c=iP.dot(lP),u=oP.dot(lP);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(iP,o);cP.subVectors(e,i);const d=iP.dot(cP),f=oP.dot(cP);if(f>=0&&d<=f)return t.copy(i);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(oP,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return aP.subVectors(i,r),a=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(aP,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(iP,o).addScaledVector(oP,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let hP=0;class dP extends pT{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hP++}),this.uuid=yT(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=xM,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hT,this.stencilZFail=hT,this.stencilZPass=hT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class fP extends dP{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new FT(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pP=new ZT,mP=new CT;class gP{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)mP.fromBufferAttribute(this,t),mP.applyMatrix3(e),this.setXY(t,mP.x,mP.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)pP.fromBufferAttribute(this,t),pP.applyMatrix3(e),this.setXYZ(t,pP.x,pP.y,pP.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)pP.fromBufferAttribute(this,t),pP.applyMatrix4(e),this.setXYZ(t,pP.x,pP.y,pP.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)pP.fromBufferAttribute(this,t),pP.applyNormalMatrix(e),this.setXYZ(t,pP.x,pP.y,pP.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)pP.fromBufferAttribute(this,t),pP.transformDirection(e),this.setXYZ(t,pP.x,pP.y,pP.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ST(t,this.array)),t}setX(e,t){return this.normalized&&(t=ET(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ST(t,this.array)),t}setY(e,t){return this.normalized&&(t=ET(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ST(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ET(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ST(t,this.array)),t}setW(e,t){return this.normalized&&(t=ET(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ET(t,this.array),n=ET(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ET(t,this.array),n=ET(n,this.array),r=ET(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=ET(t,this.array),n=ET(n,this.array),r=ET(r,this.array),i=ET(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class vP extends gP{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class yP extends gP{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class bP extends gP{constructor(e,t,n){super(new Float32Array(e),t,n)}}let xP=0;const _P=new AA,wP=new QA,SP=new ZT,EP=new eA,CP=new eA,MP=new ZT;class TP extends pT{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xP++}),this.uuid=yT(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TT(e)?yP:vP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new MT).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return _P.makeRotationFromQuaternion(e),this.applyMatrix4(_P),this}rotateX(e){return _P.makeRotationX(e),this.applyMatrix4(_P),this}rotateY(e){return _P.makeRotationY(e),this.applyMatrix4(_P),this}rotateZ(e){return _P.makeRotationZ(e),this.applyMatrix4(_P),this}translate(e,t,n){return _P.makeTranslation(e,t,n),this.applyMatrix4(_P),this}scale(e,t,n){return _P.makeScale(e,t,n),this.applyMatrix4(_P),this}lookAt(e){return wP.lookAt(e),wP.updateMatrix(),this.applyMatrix4(wP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(SP).negate(),this.translate(SP.x,SP.y,SP.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new bP(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new eA);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ZT(-1/0,-1/0,-1/0),new ZT(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];EP.setFromBufferAttribute(n),this.morphTargetsRelative?(MP.addVectors(this.boundingBox.min,EP.min),this.boundingBox.expandByPoint(MP),MP.addVectors(this.boundingBox.max,EP.max),this.boundingBox.expandByPoint(MP)):(this.boundingBox.expandByPoint(EP.min),this.boundingBox.expandByPoint(EP.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new bA);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ZT,1/0);if(e){const n=this.boundingSphere.center;if(EP.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];CP.setFromBufferAttribute(n),this.morphTargetsRelative?(MP.addVectors(EP.min,CP.min),EP.expandByPoint(MP),MP.addVectors(EP.max,CP.max),EP.expandByPoint(MP)):(EP.expandByPoint(CP.min),EP.expandByPoint(CP.max))}EP.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)MP.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(MP));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)MP.fromBufferAttribute(o,t),a&&(SP.fromBufferAttribute(e,t),MP.add(SP)),r=Math.max(r,n.distanceToSquared(MP))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new gP(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new ZT,c[e]=new ZT;const u=new ZT,h=new ZT,d=new ZT,f=new CT,p=new CT,m=new CT,g=new ZT,v=new ZT;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const x=new ZT,_=new ZT,w=new ZT,S=new ZT;function E(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(S,t);const n=_.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new gP(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ZT,i=new ZT,o=new ZT,a=new ZT,s=new ZT,l=new ZT,c=new ZT,u=new ZT;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)MP.fromBufferAttribute(e,t),MP.normalize(),e.setXYZ(t,MP.x,MP.y,MP.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new gP(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new TP,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const AP=new AA,PP=new TA,RP=new bA,IP=new ZT,OP=new ZT,kP=new ZT,LP=new ZT,NP=new ZT,DP=new ZT,zP=new ZT,UP=new ZT,FP=new ZT,BP=new CT,jP=new CT,VP=new CT,$P=new ZT,HP=new ZT;class GP extends QA{constructor(e=new TP,t=new fP){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),RP.copy(n.boundingSphere),RP.applyMatrix4(i),!1===e.ray.intersectsSphere(RP))return;if(AP.copy(i).invert(),PP.copy(e.ray).applyMatrix4(AP),null!==n.boundingBox&&!1===PP.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,h=n.attributes.uv2,d=n.groups,f=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],p=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(a.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3){const r=a.getX(n),d=a.getX(n+1),f=a.getX(n+2);o=WP(this,p,e,PP,s,l,c,u,h,r,d,f),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){const i=a.getX(n),d=a.getX(n+1),f=a.getX(n+2);o=WP(this,r,e,PP,s,l,c,u,h,i,d,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],a=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(s.count,Math.min(i.start+i.count,f.start+f.count));n<r;n+=3)o=WP(this,a,e,PP,s,l,c,u,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}else for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3)o=WP(this,r,e,PP,s,l,c,u,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}function WP(e,t,n,r,i,o,a,s,l,c,u,h){IP.fromBufferAttribute(i,c),OP.fromBufferAttribute(i,u),kP.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(o&&d){zP.set(0,0,0),UP.set(0,0,0),FP.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(LP.fromBufferAttribute(n,c),NP.fromBufferAttribute(n,u),DP.fromBufferAttribute(n,h),a?(zP.addScaledVector(LP,t),UP.addScaledVector(NP,t),FP.addScaledVector(DP,t)):(zP.addScaledVector(LP.sub(IP),t),UP.addScaledVector(NP.sub(OP),t),FP.addScaledVector(DP.sub(kP),t)))}IP.add(zP),OP.add(UP),kP.add(FP)}e.isSkinnedMesh&&(e.boneTransform(c,IP),e.boneTransform(u,OP),e.boneTransform(h,kP));const f=function(e,t,n,r,i,o,a,s){let l;if(l=1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s),null===l)return null;HP.copy(s),HP.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(HP);return c<n.near||c>n.far?null:{distance:c,point:HP.clone(),object:e}}(e,t,n,r,IP,OP,kP,$P);if(f){s&&(BP.fromBufferAttribute(s,c),jP.fromBufferAttribute(s,u),VP.fromBufferAttribute(s,h),f.uv=uP.getUV($P,IP,OP,kP,BP,jP,VP,new CT)),l&&(BP.fromBufferAttribute(l,c),jP.fromBufferAttribute(l,u),VP.fromBufferAttribute(l,h),f.uv2=uP.getUV($P,IP,OP,kP,BP,jP,VP,new CT));const e={a:c,b:u,c:h,normal:new ZT,materialIndex:0};uP.getNormal(IP,OP,kP,e.normal),f.face=e}return f}class qP extends TP{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,x=o/2,_=f/2,w=p/2,S=m+1,E=g+1;let C=0,M=0;const T=new ZT;for(let o=0;o<E;o++){const a=o*b-_;for(let s=0;s<S;s++){const h=s*y-x;T[e]=h*r,T[t]=a*i,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-o/g),C+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(d,M,v),d+=M,h+=C}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new bP(l,3)),this.setAttribute("normal",new bP(c,3)),this.setAttribute("uv",new bP(u,2))}static fromJSON(e){return new qP(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function XP(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function YP(e){const t={};for(let n=0;n<e.length;n++){const r=XP(e[n]);for(const e in r)t[e]=r[e]}return t}const KP={clone:XP,merge:YP};class ZP extends dP{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=XP(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class JP extends QA{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new AA,this.projectionMatrix=new AA,this.projectionMatrixInverse=new AA}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class QP extends JP{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*vT*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*gT*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*vT*Math.atan(Math.tan(.5*gT*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*gT*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const eR=90;class tR extends QA{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new QP(eR,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ZT(1,0,0)),this.add(r);const i=new QP(eR,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ZT(-1,0,0)),this.add(i);const o=new QP(eR,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ZT(0,1,0)),this.add(o);const a=new QP(eR,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ZT(0,-1,0)),this.add(a);const s=new QP(eR,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ZT(0,0,1)),this.add(s);const l=new QP(eR,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ZT(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class nR extends GT{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:LM,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class rR extends qT{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new nR(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$M}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new qP(5,5,5),a=new ZP({name:"CubemapFromEquirect",uniforms:XP(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=t;const s=new GP(o,a),l=t.minFilter;return t.minFilter===GM&&(t.minFilter=$M),new tR(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const iR=new ZT,oR=new ZT,aR=new MT;class sR{constructor(e=new ZT(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=iR.subVectors(n,t).cross(oR.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(iR),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||aR.getNormalMatrix(e),r=this.coplanarPoint(iR).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const lR=new bA,cR=new ZT;class uR{constructor(e=new sR,t=new sR,n=new sR,r=new sR,i=new sR,o=new sR){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,u-s,p-h,y-m).normalize(),t[1].setComponents(a+r,u+s,p+h,y+m).normalize(),t[2].setComponents(a+i,u+l,p+d,y+g).normalize(),t[3].setComponents(a-i,u-l,p-d,y-g).normalize(),t[4].setComponents(a-o,u-c,p-f,y-v).normalize(),t[5].setComponents(a+o,u+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),lR.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lR)}intersectsSprite(e){return lR.center.set(0,0,0),lR.radius=.7071067811865476,lR.applyMatrix4(e.matrixWorld),this.intersectsSphere(lR)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(cR.x=r.normal.x>0?e.max.x:e.min.x,cR.y=r.normal.y>0?e.max.y:e.min.y,cR.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cR)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function hR(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function dR(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();let s;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class fR extends TP{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new bP(f,3)),this.setAttribute("normal",new bP(p,3)),this.setAttribute("uv",new bP(m,2))}static fromJSON(e){return new fR(e.width,e.height,e.widthSegments,e.heightSegments)}}const pR={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},mR={common:{diffuse:{value:new FT(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new MT},uv2Transform:{value:new MT},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new CT(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new FT(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new FT(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new MT}},sprite:{diffuse:{value:new FT(16777215)},opacity:{value:1},center:{value:new CT(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new MT}}},gR={basic:{uniforms:YP([mR.common,mR.specularmap,mR.envmap,mR.aomap,mR.lightmap,mR.fog]),vertexShader:pR.meshbasic_vert,fragmentShader:pR.meshbasic_frag},lambert:{uniforms:YP([mR.common,mR.specularmap,mR.envmap,mR.aomap,mR.lightmap,mR.emissivemap,mR.bumpmap,mR.normalmap,mR.displacementmap,mR.fog,mR.lights,{emissive:{value:new FT(0)}}]),vertexShader:pR.meshlambert_vert,fragmentShader:pR.meshlambert_frag},phong:{uniforms:YP([mR.common,mR.specularmap,mR.envmap,mR.aomap,mR.lightmap,mR.emissivemap,mR.bumpmap,mR.normalmap,mR.displacementmap,mR.fog,mR.lights,{emissive:{value:new FT(0)},specular:{value:new FT(1118481)},shininess:{value:30}}]),vertexShader:pR.meshphong_vert,fragmentShader:pR.meshphong_frag},standard:{uniforms:YP([mR.common,mR.envmap,mR.aomap,mR.lightmap,mR.emissivemap,mR.bumpmap,mR.normalmap,mR.displacementmap,mR.roughnessmap,mR.metalnessmap,mR.fog,mR.lights,{emissive:{value:new FT(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pR.meshphysical_vert,fragmentShader:pR.meshphysical_frag},toon:{uniforms:YP([mR.common,mR.aomap,mR.lightmap,mR.emissivemap,mR.bumpmap,mR.normalmap,mR.displacementmap,mR.gradientmap,mR.fog,mR.lights,{emissive:{value:new FT(0)}}]),vertexShader:pR.meshtoon_vert,fragmentShader:pR.meshtoon_frag},matcap:{uniforms:YP([mR.common,mR.bumpmap,mR.normalmap,mR.displacementmap,mR.fog,{matcap:{value:null}}]),vertexShader:pR.meshmatcap_vert,fragmentShader:pR.meshmatcap_frag},points:{uniforms:YP([mR.points,mR.fog]),vertexShader:pR.points_vert,fragmentShader:pR.points_frag},dashed:{uniforms:YP([mR.common,mR.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pR.linedashed_vert,fragmentShader:pR.linedashed_frag},depth:{uniforms:YP([mR.common,mR.displacementmap]),vertexShader:pR.depth_vert,fragmentShader:pR.depth_frag},normal:{uniforms:YP([mR.common,mR.bumpmap,mR.normalmap,mR.displacementmap,{opacity:{value:1}}]),vertexShader:pR.meshnormal_vert,fragmentShader:pR.meshnormal_frag},sprite:{uniforms:YP([mR.sprite,mR.fog]),vertexShader:pR.sprite_vert,fragmentShader:pR.sprite_frag},background:{uniforms:{uvTransform:{value:new MT},t2D:{value:null}},vertexShader:pR.background_vert,fragmentShader:pR.background_frag},cube:{uniforms:YP([mR.envmap,{opacity:{value:1}}]),vertexShader:pR.cube_vert,fragmentShader:pR.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pR.equirect_vert,fragmentShader:pR.equirect_frag},distanceRGBA:{uniforms:YP([mR.common,mR.displacementmap,{referencePosition:{value:new ZT},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pR.distanceRGBA_vert,fragmentShader:pR.distanceRGBA_frag},shadow:{uniforms:YP([mR.lights,mR.fog,{color:{value:new FT(0)},opacity:{value:1}}]),vertexShader:pR.shadow_vert,fragmentShader:pR.shadow_frag}};function vR(e,t,n,r,i,o){const a=new FT(0);let s,l,c=!0===i?0:1,u=null,h=0,d=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),c=t,f(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(a,c)},render:function(n,i){let o=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?f(a,c):p&&p.isColor&&(f(p,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===DM)?(void 0===l&&(l=new GP(new qP(1,1,1),new ZP({name:"BackgroundCubeMaterial",uniforms:XP(gR.cube.uniforms),vertexShader:gR.cube.vertexShader,fragmentShader:gR.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,u===p&&h===p.version&&d===e.toneMapping||(l.material.needsUpdate=!0,u=p,h=p.version,d=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===s&&(s=new GP(new fR(2,2),new ZP({name:"BackgroundMaterial",uniforms:XP(gR.background.uniforms),vertexShader:gR.background.vertexShader,fragmentShader:gR.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&h===p.version&&d===e.toneMapping||(s.material.needsUpdate=!0,u=p,h=p.version,d=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}}}function yR(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=f(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function b(){x(),u=!0,c!==l&&(c=l,h(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,x){let _=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(b,d,l);c!==t&&(c=t,h(c.object)),_=function(e,t,n,r){const i=c.attributes,o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,b,d,x),_&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,b,d,x)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===d.id&&c.wireframe===e||(c.geometry=b.id,c.program=d.id,c.wireframe=e,_=!0)}null!==x&&n.update(x,34963),(_||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,l*h,(d+a/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,d,b),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function bR(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function xR(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function _R(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new sR,s=new MT,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!f)o?u(null):c();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(h,a,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function wR(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=LM:304===t&&(e.mapping=NM),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(303===o||304===o){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new rR(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}gR.physical={uniforms:YP([gR.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new CT(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new FT(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new CT},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new FT(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new FT(1,1,1)},specularColorMap:{value:null}}]),vertexShader:pR.meshphysical_vert,fragmentShader:pR.meshphysical_frag};class SR extends JP{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ER=[.125,.215,.35,.446,.526,.582],CR=new SR,MR=new FT;let TR=null;const AR=(1+Math.sqrt(5))/2,PR=1/AR,RR=[new ZT(1,1,1),new ZT(-1,1,1),new ZT(1,1,-1),new ZT(-1,1,-1),new ZT(0,AR,PR),new ZT(0,AR,-PR),new ZT(PR,0,AR),new ZT(-PR,0,AR),new ZT(AR,PR,0),new ZT(-AR,PR,0)];class IR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){TR=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=NR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=LR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TR),e.scissorTest=!1,kR(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===LM||e.mapping===NM?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TR=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:$M,minFilter:$M,generateMipmaps:!1,type:YM,format:ZM,encoding:sT,depthBuffer:!1},r=OR(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=OR(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+ER.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=ER[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),b=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(h,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const x=new TP;x.setAttribute("position",new gP(v,p)),x.setAttribute("uv",new gP(y,m)),x.setAttribute("faceIndex",new gP(b,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new ZT(0,1,0);return new ZP({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new GP(this._lodPlanes[0],e);this._renderer.compile(t,CR)}_sceneToCubeUV(e,t,n,r){const i=new QP(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(MR),s.toneMapping=0,s.autoClear=!1;const u=new fP({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new GP(new qP,u);let d=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,d=!0):(u.color.copy(MR),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1===n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t]));const l=this._cubeSize;kR(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===LM||e.mapping===NM;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=NR()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=LR());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new GP(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;kR(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,CR)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=RR[(t-1)%RR.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new GP(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];kR(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,CR)}}function OR(e,t,n){const r=new qT(e,t,n);return r.texture.mapping=DM,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function kR(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function LR(){return new ZP({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function NR(){return new ZP({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function DR(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=303===o||304===o,s=o===LM||o===NM;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new IR(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)){null===n&&(n=new IR(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function zR(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function UR(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(TT(n)?yP:vP)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function FR(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function BR(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function jR(e,t){return e[0]-t[0]}function VR(e,t){return Math.abs(t[1])-Math.abs(e[1])}function $R(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new WT,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==f?f.length:0;let m=o.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const y=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===b&&(E=2),!0===x&&(E=3);let C=c.attributes.position.count*E,M=1;C>t.maxTextureSize&&(M=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);const T=new Float32Array(C*M*4*p),A=new XT(T,C,M,p);A.type=XM,A.needsUpdate=!0;const P=4*E;for(let I=0;I<p;I++){const O=_[I],k=w[I],L=S[I],N=C*M*4*I;for(let D=0;D<O.count;D++){const z=D*P;!0===y&&(a.fromBufferAttribute(O,D),T[N+z+0]=a.x,T[N+z+1]=a.y,T[N+z+2]=a.z,T[N+z+3]=0),!0===b&&(a.fromBufferAttribute(k,D),T[N+z+4]=a.x,T[N+z+5]=a.y,T[N+z+6]=a.z,T[N+z+7]=0),!0===x&&(a.fromBufferAttribute(L,D),T[N+z+8]=a.x,T[N+z+9]=a.y,T[N+z+10]=a.z,T[N+z+11]=4===L.itemSize?a.w:1)}}function R(){A.dispose(),o.delete(c),c.removeEventListener("dispose",R)}m={count:p,texture:A,size:new CT(C,M)},o.set(c,m),c.addEventListener("dispose",R)}let g=0;for(let U=0;U<d.length;U++)g+=d[U];const v=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(e,"morphTargetBaseInfluence",v),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const F=void 0===d?0:d.length;let B=r[c.id];if(void 0===B||B.length!==F){B=[];for(let G=0;G<F;G++)B[G]=[G,0];r[c.id]=B}for(let W=0;W<F;W++){const q=B[W];q[0]=W,q[1]=d[W]}B.sort(VR);for(let X=0;X<8;X++)X<F&&B[X][1]?(s[X][0]=B[X][0],s[X][1]=B[X][1]):(s[X][0]=Number.MAX_SAFE_INTEGER,s[X][1]=0);s.sort(jR);const j=c.morphAttributes.position,V=c.morphAttributes.normal;let $=0;for(let Y=0;Y<8;Y++){const K=s[Y],Z=K[0],J=K[1];Z!==Number.MAX_SAFE_INTEGER&&J?(j&&c.getAttribute("morphTarget"+Y)!==j[Z]&&c.setAttribute("morphTarget"+Y,j[Z]),V&&c.getAttribute("morphNormal"+Y)!==V[Z]&&c.setAttribute("morphNormal"+Y,V[Z]),i[Y]=J,$+=J):(j&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),V&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const H=c.morphTargetsRelative?1:1-$;h.getUniforms().setValue(e,"morphTargetBaseInfluence",H),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function HR(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const GR=new GT,WR=new XT,qR=new YT,XR=new nR,YR=[],KR=[],ZR=new Float32Array(16),JR=new Float32Array(9),QR=new Float32Array(4);function eI(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=YR[i];if(void 0===o&&(o=new Float32Array(i),YR[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function tI(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function nI(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function rI(e,t){let n=KR[t];void 0===n&&(n=new Int32Array(t),KR[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function iI(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function oI(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tI(n,t))return;e.uniform2fv(this.addr,t),nI(n,t)}}function aI(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(tI(n,t))return;e.uniform3fv(this.addr,t),nI(n,t)}}function sI(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tI(n,t))return;e.uniform4fv(this.addr,t),nI(n,t)}}function lI(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tI(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),nI(n,t)}else{if(tI(n,r))return;QR.set(r),e.uniformMatrix2fv(this.addr,!1,QR),nI(n,r)}}function cI(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tI(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),nI(n,t)}else{if(tI(n,r))return;JR.set(r),e.uniformMatrix3fv(this.addr,!1,JR),nI(n,r)}}function uI(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(tI(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),nI(n,t)}else{if(tI(n,r))return;ZR.set(r),e.uniformMatrix4fv(this.addr,!1,ZR),nI(n,r)}}function hI(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function dI(e,t){const n=this.cache;tI(n,t)||(e.uniform2iv(this.addr,t),nI(n,t))}function fI(e,t){const n=this.cache;tI(n,t)||(e.uniform3iv(this.addr,t),nI(n,t))}function pI(e,t){const n=this.cache;tI(n,t)||(e.uniform4iv(this.addr,t),nI(n,t))}function mI(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function gI(e,t){const n=this.cache;tI(n,t)||(e.uniform2uiv(this.addr,t),nI(n,t))}function vI(e,t){const n=this.cache;tI(n,t)||(e.uniform3uiv(this.addr,t),nI(n,t))}function yI(e,t){const n=this.cache;tI(n,t)||(e.uniform4uiv(this.addr,t),nI(n,t))}function bI(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||GR,i)}function xI(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||qR,i)}function _I(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||XR,i)}function wI(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||WR,i)}function SI(e,t){e.uniform1fv(this.addr,t)}function EI(e,t){const n=eI(t,this.size,2);e.uniform2fv(this.addr,n)}function CI(e,t){const n=eI(t,this.size,3);e.uniform3fv(this.addr,n)}function MI(e,t){const n=eI(t,this.size,4);e.uniform4fv(this.addr,n)}function TI(e,t){const n=eI(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function AI(e,t){const n=eI(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function PI(e,t){const n=eI(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function RI(e,t){e.uniform1iv(this.addr,t)}function II(e,t){e.uniform2iv(this.addr,t)}function OI(e,t){e.uniform3iv(this.addr,t)}function kI(e,t){e.uniform4iv(this.addr,t)}function LI(e,t){e.uniform1uiv(this.addr,t)}function NI(e,t){e.uniform2uiv(this.addr,t)}function DI(e,t){e.uniform3uiv(this.addr,t)}function zI(e,t){e.uniform4uiv(this.addr,t)}function UI(e,t,n){const r=t.length,i=rI(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2D(t[e]||GR,i[e])}function FI(e,t,n){const r=t.length,i=rI(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture3D(t[e]||qR,i[e])}function BI(e,t,n){const r=t.length,i=rI(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTextureCube(t[e]||XR,i[e])}function jI(e,t,n){const r=t.length,i=rI(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||WR,i[e])}class VI{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return iI;case 35664:return oI;case 35665:return aI;case 35666:return sI;case 35674:return lI;case 35675:return cI;case 35676:return uI;case 5124:case 35670:return hI;case 35667:case 35671:return dI;case 35668:case 35672:return fI;case 35669:case 35673:return pI;case 5125:return mI;case 36294:return gI;case 36295:return vI;case 36296:return yI;case 35678:case 36198:case 36298:case 36306:case 35682:return bI;case 35679:case 36299:case 36307:return xI;case 35680:case 36300:case 36308:case 36293:return _I;case 36289:case 36303:case 36311:case 36292:return wI}}(t.type)}}class $I{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return SI;case 35664:return EI;case 35665:return CI;case 35666:return MI;case 35674:return TI;case 35675:return AI;case 35676:return PI;case 5124:case 35670:return RI;case 35667:case 35671:return II;case 35668:case 35672:return OI;case 35669:case 35673:return kI;case 5125:return LI;case 36294:return NI;case 36295:return DI;case 36296:return zI;case 35678:case 36198:case 36298:case 36306:case 35682:return UI;case 35679:case 36299:case 36307:return FI;case 35680:case 36300:case 36308:case 36293:return BI;case 36289:case 36303:case 36311:case 36292:return jI}}(t.type)}}class HI{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const GI=/(\w+)(\])?(\[|\.)?/g;function WI(e,t){e.seq.push(t),e.map[t.id]=t}function qI(e,t,n){const r=e.name,i=r.length;for(GI.lastIndex=0;;){const o=GI.exec(r),a=GI.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){WI(n,void 0===c?new VI(s,e,t):new $I(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new HI(s),WI(n,e)),n=e}}}class XI{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);qI(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function YI(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let KI=0;function ZI(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=i;e<o;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function JI(e,t){const n=function(e){switch(e){case sT:return["Linear","( value )"];case lT:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function QI(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function eO(e){return""!==e}function tO(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nO(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const rO=/^[ \t]*#include +<([\w\d./]+)>/gm;function iO(e){return e.replace(rO,oO)}function oO(e,t){const n=pR[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return iO(n)}const aO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sO(e){return e.replace(aO,lO)}function lO(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function cO(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function uO(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case LM:case NM:t="ENVMAP_TYPE_CUBE";break;case DM:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===NM&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(eO).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(eO).join("\n"),g.length>0&&(g+="\n"),v=[f,p].filter(eO).join("\n"),v.length>0&&(v+="\n")):(g=[cO(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(eO).join("\n"),v=[f,cO(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?pR.tonemapping_pars_fragment:"",0!==n.toneMapping?QI("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",pR.encodings_pars_fragment,JI("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(eO).join("\n")),a=iO(a),a=tO(a,n),a=nO(a,n),s=iO(s),s=tO(s,n),s=nO(s,n),a=sO(a),s=sO(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===dT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===dT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,x=YI(i,35633,y+g+a),_=YI(i,35632,b);if(i.attachShader(m,x),i.attachShader(m,_),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(x).trim(),n=i.getShaderInfoLog(_).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=ZI(i,x,"vertex"),n=ZI(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,S;return i.deleteShader(x),i.deleteShader(_),this.getUniforms=function(){return void 0===w&&(w=new XI(i,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=KI++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=_,this}let hO=0;class dO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new fO(e),t.set(e,n)),n}}class fO{constructor(e){this.id=hO++,this.code=e,this.usedTimes=0}}function pO(e,t,n,r,i,o,a){const s=new FA,l=new dO,c=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,c,m,g){const v=m.fog,y=g.geometry,b=o.isMeshStandardMaterial?m.environment:null,x=(o.isMeshStandardMaterial?n:t).get(o.envMap||b),_=x&&x.mapping===DM?x.image.height:null,w=p[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,E=void 0!==S?S.length:0;let C,M,T,A,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),w){const e=gR[w];C=e.vertexShader,M=e.fragmentShader}else C=o.vertexShader,M=o.fragmentShader,l.update(o),T=l.getVertexShaderID(o),A=l.getFragmentShaderID(o);const R=e.getRenderTarget(),I=o.alphaTest>0,O=o.clearcoat>0,k=o.iridescence>0;return{isWebGL2:u,shaderID:w,shaderName:o.type,vertexShader:C,fragmentShader:M,defines:o.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:sT,map:!!o.map,matcap:!!o.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:_,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===lT,clearcoat:O,clearcoatMap:O&&!!o.clearcoatMap,clearcoatRoughnessMap:O&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!o.clearcoatNormalMap,iridescence:k,iridescenceMap:k&&!!o.iridescenceMap,iridescenceThicknessMap:k&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&1===o.blending,alphaMap:!!o.alphaMap,alphaTest:I,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!v,useFog:!0===o.fog,fogExp2:v&&v.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:E,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=gR[t];n=KP.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new uO(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function mO(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function gO(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function vO(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function yO(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||gO),r.length>1&&r.sort(t||vO),i.length>1&&i.sort(t||vO)}}}function bO(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new yO,e.set(t,[i])):n>=r.length?(i=new yO,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function xO(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ZT,color:new FT};break;case"SpotLight":n={position:new ZT,direction:new ZT,color:new FT,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ZT,color:new FT,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ZT,skyColor:new FT,groundColor:new FT};break;case"RectAreaLight":n={color:new FT,position:new ZT,halfWidth:new ZT,halfHeight:new ZT}}return e[t.id]=n,n}}}let _O=0;function wO(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function SO(e,t){const n=new xO,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new CT};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new CT,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new ZT);const o=new ZT,a=new AA,s=new AA;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;o.sort(wO);const x=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,_=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*_*x,l+=a.g*_*x,c+=a.b*_*x;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(_*x),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[d]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*x),e.groundColor.copy(t.groundColor).multiplyScalar(_*x),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=mR.LTC_FLOAT_1,i.rectAreaLTC2=mR.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=mR.LTC_HALF_1,i.rectAreaLTC2=mR.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const _=i.hash;_.directionalLength===u&&_.pointLength===h&&_.spotLength===d&&_.rectAreaLength===f&&_.hemiLength===p&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v&&_.numSpotMaps===y||(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,_.directionalLength=u,_.pointLength=h,_.spotLength=d,_.rectAreaLength=f,_.hemiLength=p,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,_.numSpotMaps=y,i.version=_O++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function EO(e,t){const n=new SO(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function CO(e,t){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new EO(e,t),n.set(r,[a])):i>=o.length?(a=new EO(e,t),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class MO extends dP{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class TO extends dP{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ZT,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function AO(e,t,n){let r=new uR;const i=new CT,o=new CT,a=new WT,s=new MO({depthPacking:3201}),l=new TO,c={},u=n.maxTextureSize,h={0:1,1:0,2:2},d=new ZP({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new CT},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new TP;p.setAttribute("position",new gP(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new GP(p,d),g=this;function v(n,r){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new qT(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,f,m,null)}function y(t,n,r,i,o,a){let u=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==d?d:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function b(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=y(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=y(n,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),o.copy(h.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/f.x),i.x=o.x*f.x,h.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/f.y),i.y=o.y*f.y,h.mapSize.y=o.y)),null===h.map){const e=3!==this.type?{minFilter:BM,magFilter:BM}:{};h.map=new qT(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const p=h.getViewportCount();for(let e=0;e<p;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(c,e),r=h.getFrustum(),b(n,s,h.camera,c,this.type)}!0!==h.isPointLightShadow&&3===this.type&&v(h,s),h.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function PO(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new WT;let r=null;const i=new WT(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?B(2929):j(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?B(2960):j(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,_=null,w=!1,S=null,E=null,C=null,M=null,T=null;const A=e.getParameter(35661);let P=!1,R=0;const I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(I)[1]),P=R>=1):-1!==I.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),P=R>=2);let O=null,k={};const L=e.getParameter(3088),N=e.getParameter(2978),D=(new WT).fromArray(L),z=(new WT).fromArray(N);function U(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const F={};function B(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function j(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}F[3553]=U(3553,3553,1),F[34067]=U(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),B(2929),o.setFunc(3),G(!1),W(1),B(2884),H(0);const V={[xM]:32774,[_M]:32778,[wM]:32779};if(r)V[103]=32775,V[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(V[103]=e.MIN_EXT,V[104]=e.MAX_EXT)}const $={[SM]:0,[EM]:1,[CM]:768,[TM]:770,[kM]:776,[IM]:774,[PM]:772,[MM]:769,[AM]:771,[OM]:775,[RM]:773};function H(t,n,r,i,o,a,s,l){if(0!==t){if(!1===p&&(B(3042),p=!0),5===t)o=o||n,a=a||r,s=s||i,n===g&&o===b||(e.blendEquationSeparate(V[n],V[o]),g=n,b=o),r===v&&i===y&&a===x&&s===_||(e.blendFuncSeparate($[r],$[i],$[a],$[s]),v=r,y=i,x=a,_=s),m=t,w=null;else if(t!==m||l!==w){if(g===xM&&b===xM||(e.blendEquation(32774),g=xM,b=xM),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,x=null,_=null,m=t,w=l}}else!0===p&&(j(3042),p=!1)}function G(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function W(t){0!==t?(B(2884),t!==E&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):j(2884),E=t}function q(t,n,r){t?(B(32823),M===n&&T===r||(e.polygonOffset(n,r),M=n,T=r)):j(32823)}function X(t){void 0===t&&(t=33984+A-1),O!==t&&(e.activeTexture(t),O=t)}return{buffers:{color:i,depth:o,stencil:a},enable:B,disable:j,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(r,i){let o=d,a=!1;if(r)if(o=h.get(i),void 0===o&&(o=[],h.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:H,setMaterial:function(e,t){2===e.side?j(2884):B(2884);let n=1===e.side;t&&(n=!n),G(n),1===e.blending&&!1===e.transparent?H(0):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(32926):j(32926)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==C&&(P&&e.lineWidth(t),C=t)},setPolygonOffset:q,setScissorTest:function(e){e?B(3089):j(3089)},activeTexture:X,bindTexture:function(t,n){null===O&&X();let r=k[O];void 0===r&&(r={type:void 0,texture:void 0},k[O]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=k[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);s.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},O=null,k={},u={},h=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,_=null,w=!1,S=null,E=null,C=null,M=null,T=null,D.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function RO(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):AT("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?wT:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return _T(e.width)&&_T(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==BM&&e.minFilter!==$M}function w(t){e.generateMipmap(t)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===lT&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==BM&&e.minFilter!==$M?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){return e===BM||1004===e||1005===e?9728:9729}function M(e){const t=e.target;t.removeEventListener("dispose",M),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let P=0;function R(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}const I={[zM]:10497,[UM]:33071,[FM]:33648},O={[BM]:9728,[jM]:9984,[VM]:9986,[$M]:9729,[HM]:9985,[GM]:9987};function k(n,o,a){if(a?(e.texParameteri(n,10242,I[o.wrapS]),e.texParameteri(n,10243,I[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,I[o.wrapR]),e.texParameteri(n,10240,O[o.magFilter]),e.texParameteri(n,10241,O[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===UM&&o.wrapT===UM||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,C(o.magFilter)),e.texParameteri(n,10241,C(o.minFilter)),o.minFilter!==BM&&o.minFilter!==$M&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===XM&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===YM&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function L(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function N(t,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const l=L(t,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),c.version!==c.__currentVersion||!0===l){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!s&&(e.wrapS!==UM||e.wrapT!==UM||e.minFilter!==BM&&e.minFilter!==$M)}(r)&&!1===x(r.image);let i=b(r.image,t,!1,u);i=j(r,i);const h=x(i)||s,d=o.convert(r.format,r.encoding);let f,p=o.convert(r.type),m=S(r.internalFormat,d,p,r.encoding,r.isVideoTexture);k(a,r,h);const g=r.mipmaps,v=s&&!0!==r.isVideoTexture,y=void 0===c.__currentVersion||!0===l,C=E(r,i,h);if(r.isDepthTexture)m=6402,s?m=r.type===XM?36012:r.type===qM?33190:r.type===KM?35056:33189:r.type===XM&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===JM&&6402===m&&1012!==r.type&&r.type!==qM&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=qM,p=o.convert(r.type)),r.format===QM&&6402===m&&(m=34041,r.type!==KM&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=KM,p=o.convert(r.type))),y&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,d,p,null));else if(r.isDataTexture)if(g.length>0&&h){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,f.width,f.height,d,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,p,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,d,p,i.data);else if(r.isCompressedTexture){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],r.format!==ZM?null!==d?v?n.compressedTexSubImage2D(3553,e,0,0,f.width,f.height,d,f.data):n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,e,0,0,f.width,f.height,d,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data)}else if(r.isDataArrayTexture)v?(y&&n.texStorage3D(35866,C,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,p,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,p,i.data);else if(r.isData3DTexture)v?(y&&n.texStorage3D(32879,C,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,p,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,p,i.data);else if(r.isFramebufferTexture){if(y)if(v)n.texStorage2D(3553,C,m,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,m,e,t,0,d,p,null),e>>=1,t>>=1}}else if(g.length>0&&h){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,d,p,f):n.texImage2D(3553,e,m,d,p,f);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,p,i)):n.texImage2D(3553,0,m,d,p,i);_(r,h)&&w(a),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function D(t,i,a,s,l){const c=o.convert(a.format,a.encoding),u=o.convert(a.type),h=S(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),B(i)?d.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,F(i)):e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||B(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===XM?i=36012:t.type===qM&&(i=33190));const r=F(n);B(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=F(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),c=S(a.internalFormat,s,l,a.encoding),u=F(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function U(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),R(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=F(i);if(i.depthTexture.format===JM)B(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==QM)throw new Error("Unknown depthTexture format");B(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),z(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),z(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(h,e.samples)}function B(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(e,n){const r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===fT||r!==sT&&(r===lT?!1===s?!0===t.has("EXT_sRGB")&&i===ZM?(e.format=fT,e.minFilter=$M,e.generateMipmaps=!1):n=jT.sRGBToLinear(n):i===ZM&&o===WM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=P;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const a=L(t,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),l.version!==l.__currentVersion||!0===a){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=t||i?i?r.image[e].image:r.image[e]:b(r.image[e],!1,!0,c),u[e]=j(r,u[e]);const h=u[0],d=x(h)||s,f=o.convert(r.format,r.encoding),p=o.convert(r.type),m=S(r.internalFormat,f,p,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===a;let y,C=E(r,h,d);if(k(34067,r,d),t){g&&v&&n.texStorage2D(34067,C,m,h.width,h.height);for(let e=0;e<6;e++){y=u[e].mipmaps;for(let t=0;t<y.length;t++){const i=y[t];r.format!==ZM?null!==f?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,f,p,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&C++,n.texStorage2D(34067,C,m,u[0].width,u[0].height));for(let e=0;e<6;e++)if(i){g?n.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,f,p,u[e].data):n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<y.length;t++){const r=y[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,f,p,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,f,p,u[e]):n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<y.length;t++){const r=y[t];g?n.texSubImage2D(34069+e,t+1,0,0,f,p,r.image[e]):n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}}_(r,d)&&w(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&D(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&U(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=x(t)||s;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===B(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=S(i.internalFormat,a,s,i.encoding),u=F(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),k(34067,l,f);for(let e=0;e<6;e++)D(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,f)&&w(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),k(3553,o,f),D(c.__webglFramebuffer,t,o,36064+i,3553),_(o,f)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),k(e,l,f),D(c.__webglFramebuffer,t,l,36064,e),_(l,f)&&w(e),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(_(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===B(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height;let s=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),f&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=D,this.useMultisampledRTT=B}function IO(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===WM)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(n===qM)return 5125;if(n===XM)return 5126;if(n===YM)return r?5131:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===ZM)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===JM)return 6402;if(n===QM)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===fT)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===eT||n===tT||n===nT||n===rT)if(i===lT){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===eT)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===tT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===nT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===rT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===eT)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===tT)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===nT)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===rT)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===n)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===n)return i===lT?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===lT?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(36492===n)return i===lT?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===KM?r?34042:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class OO extends QP{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class kO extends QA{constructor(){super(),this.isGroup=!0,this.type="Group"}}const LO={type:"move"};class NO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new kO,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new kO,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ZT,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ZT),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new kO,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ZT,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ZT),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new kO;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(LO)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class DO extends GT{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:JM)!==JM&&c!==QM)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===JM&&(n=qM),void 0===n&&c===QM&&(n=KM),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:BM,this.minFilter=void 0!==s?s:BM,this.flipY=!1,this.generateMipmaps=!1}}class zO extends pT{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,l=null,c=null,u=null,h=null,d=null;const f=t.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new QP;y.layers.enable(1),y.viewport=new WT;const b=new QP;b.layers.enable(2),b.viewport=new WT;const x=[y,b],_=new OO;_.layers.enable(1),_.layers.enable(2);let w=null,S=null;function E(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function C(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",M);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}w=null,S=null,e.setRenderTarget(p),h=null,u=null,c=null,r=null,m=null,I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new NO,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new NO,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new NO,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",C),r.addEventListener("inputsourceschange",M),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),m=new qT(h.framebufferWidth,h.framebufferHeight,{format:ZM,type:WM,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,o=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?QM:JM,o=f.stencil?KM:qM);const s={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(s),r.updateRenderState({layers:[u]}),m=new qT(u.textureWidth,u.textureHeight,{format:ZM,type:WM,depthTexture:new DO(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),I.setContext(r),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const T=new ZT,A=new ZT;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=b.near=y.near=e.near,_.far=b.far=y.far=e.far,w===_.near&&S===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);const t=e.parent,n=_.cameras;P(_,t);for(let e=0;e<n.length;e++)P(n[e],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.matrix.copy(_.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){T.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=T.distanceTo(A),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=r/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=s+p,y=d-m,b=f+(r-m),x=l*s/v*g,_=c*s/v*g;e.projectionMatrix.makePerspective(y,b,x,_,g,v)}(_,y,b):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let R=null;const I=new hR;I.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||o),d=n,null!==l){const t=l.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==h)o=h.getViewport(i);else{const t=c.getViewSubImage(u,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=x[r];void 0===a&&(a=new QP,a.layers.enable(r),a.viewport=new WT,x[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&_.matrix.copy(a.matrix),!0===n&&_.cameras.push(a)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,s||o)}R&&R(t,n),d=null})),this.setAnimationLoop=function(e){R=e},this.dispose=function(){}}}function UO(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function FO(e,t,n,r){let i={},o={},a=[];const s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],o=c(i);i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0&&(r=n%16,0!==r&&16-r-o.boundary<0&&(n+=16-r,i.__offset=n)),n+=o.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,o),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=t.render.frame;o[n.id]!==p&&(function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,o)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(35345,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(35345,r,n.__data))}}e.bindBuffer(35345,null)}(n),o[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}function BO(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=AT("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,s=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,d=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=sT,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,y=0,b=null,x=-1,_=null;const w=new WT,S=new WT;let E=null,C=t.width,M=t.height,T=1,A=null,P=null;const R=new WT(0,0,C,M),I=new WT(0,0,C,M);let O=!1;const k=new uR;let L=!1,N=!1,D=null;const z=new AA,U=new CT,F=new ZT,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?T:1}let V,$,H,G,W,q,X,Y,K,Z,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he,de=n;function fe(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${bM}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",ye,!1),null===de){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=fe(t,e),null===de)throw fe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){V=new zR(de),$=new xR(de,V,e),V.init($),ce=new IO(de,V,$),H=new PO(de,V,$),G=new BR,W=new mO,q=new RO(de,V,H,W,$,ce,G),X=new wR(m),Y=new DR(m),K=new dR(de,$),ue=new yR(de,V,K,$),Z=new UR(de,K,G,ue),J=new HR(de,Z,K,G),ae=new $R(de,$,q),re=new _R(W),Q=new pO(m,X,Y,V,$,ue,re),ee=new UO(m,W),te=new bO,ne=new CO(V,$),oe=new vR(m,X,H,J,u,a),ie=new AO(m,J,$),he=new FO(de,G,$,H),se=new bR(de,V,G,$),le=new FR(de,V,G,$),G.programs=Q.programs,m.capabilities=$,m.extensions=V,m.properties=W,m.renderLists=te,m.shadowMap=ie,m.state=H,m.info=G}pe();const me=new zO(m,de);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=G.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;pe(),G.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ye(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function be(e){const t=e.target;t.removeEventListener("dispose",be),function(e){(function(e){const t=W.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))})(e),W.remove(e)}(t)}this.xr=me,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(C,M,!1))},this.getSize=function(e){return e.set(C,M)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,M=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(C*T,M*T).floor()},this.setDrawingBufferSize=function(e,n,r){C=e,M=n,T=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),H.viewport(w.copy(R).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),H.scissor(S.copy(I).multiplyScalar(T).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){H.setScissorTest(O=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),de.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",ye,!1),te.dispose(),ne.dispose(),W.dispose(),X.dispose(),Y.dispose(),J.dispose(),ue.dispose(),he.dispose(),Q.dispose(),me.dispose(),me.removeEventListener("sessionstart",_e),me.removeEventListener("sessionend",we),D&&(D.dispose(),D=null),Se.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=B);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=B),q.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:sT,l=(r.isMeshStandardMaterial?Y:X).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,w=W.get(r),S=d.state.lights;if(!0===L&&(!0===N||e!==_)){const t=e===_&&r.id===x;re.setState(r,e,t)}let E=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==s||i.isInstancedMesh&&!1===w.instancing?E=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?E=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===r.fog&&w.fog!==o?E=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===re.numPlanes&&w.numIntersection===re.numIntersection?(w.vertexAlphas!==c||w.vertexTangents!==u||w.morphTargets!==h||w.morphNormals!==f||w.morphColors!==p||w.toneMapping!==g||!0===$.isWebGL2&&w.morphTargetsCount!==y)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,w.__version=r.version);let C=w.currentProgram;!0===E&&(C=Ae(r,t,i));let A=!1,P=!1,R=!1;const I=C.getUniforms(),O=w.uniforms;if(H.useProgram(C.program)&&(A=!0,P=!0,R=!0),r.id!==x&&(x=r.id,P=!0),A||_!==e){if(I.setValue(de,"projectionMatrix",e.projectionMatrix),$.logarithmicDepthBuffer&&I.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,P=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=I.map.cameraPosition;void 0!==t&&t.setValue(de,F.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&I.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){I.setOptional(de,i,"bindMatrix"),I.setOptional(de,i,"bindMatrixInverse");const e=i.skeleton;e&&($.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),I.setValue(de,"boneTexture",e.boneTexture,q),I.setValue(de,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const k=n.morphAttributes;var z,U;if((void 0!==k.position||void 0!==k.normal||void 0!==k.color&&!0===$.isWebGL2)&&ae.update(i,n,r,C),(P||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,I.setValue(de,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),P&&(I.setValue(de,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&(U=R,(z=O).ambientLightColor.needsUpdate=U,z.lightProbe.needsUpdate=U,z.directionalLights.needsUpdate=U,z.directionalLightShadows.needsUpdate=U,z.pointLights.needsUpdate=U,z.pointLightShadows.needsUpdate=U,z.spotLights.needsUpdate=U,z.spotLightShadows.needsUpdate=U,z.rectAreaLights.needsUpdate=U,z.hemisphereLights.needsUpdate=U),o&&!0===r.fog&&ee.refreshFogUniforms(O,o),ee.refreshMaterialUniforms(O,r,T,M,D),XI.upload(de,w.uniformsList,O,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(XI.upload(de,w.uniformsList,O,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&I.setValue(de,"center",i.center),I.setValue(de,"modelViewMatrix",i.modelViewMatrix),I.setValue(de,"normalMatrix",i.normalMatrix),I.setValue(de,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if($.isWebGL2){const n=e[t];he.update(n,C),he.bind(n,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return C}(e,t,n,r,i);H.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=Z.getWireframeAttribute(n),h=2),ue.setup(i,r,s,n,l);let f=se;null!==l&&(u=K.get(l),f=le,f.setIndex(u));const p=null!==l?l.count:c.count,g=n.drawRange.start*h,v=n.drawRange.count*h,y=null!==o?o.start*h:0,w=null!==o?o.count*h:1/0,S=Math.max(g,y),E=Math.min(p,g+v,y+w)-1,C=Math.max(0,E-S+1);if(0!==C){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*j()),f.setMode(1)):f.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*j()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(S,C,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(S,C,e)}else f.render(S,C)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&2===e.side?(e.side=1,e.needsUpdate=!0,Ae(e,t,n),e.side=0,e.needsUpdate=!0,Ae(e,t,n),e.side=2):Ae(e,t,n)}d=ne.get(e),d.init(),p.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),p.pop(),d=null};let xe=null;function _e(){Se.stop()}function we(){Se.start()}const Se=new hR;function Ee(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=J.update(e),i=e.material;i.visible&&h.push(e,t,i,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||k.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=J.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,F.z,a)}}else i.visible&&h.push(e,t,i,n,F.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Ee(i[e],t,n,r)}function Ce(e,t,n,r){const i=e.opaque,a=e.transmissive,s=e.transparent;d.setupLightsView(n),a.length>0&&function(e,t,n){const r=$.isWebGL2;null===D&&(D=new qT(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?YM:WM,minFilter:GM,samples:r&&!0===o?4:0})),m.getDrawingBufferSize(U),r?D.setSize(U.x,U.y):D.setSize(wT(U.x),wT(U.y));const i=m.getRenderTarget();m.setRenderTarget(D),m.clear();const a=m.toneMapping;m.toneMapping=0,Me(e,t,n),m.toneMapping=a,q.updateMultisampleRenderTarget(D),q.updateRenderTargetMipmap(D),m.setRenderTarget(i)}(i,t,n),r&&H.viewport(w.copy(r)),i.length>0&&Me(i,t,n),a.length>0&&Me(a,t,n),s.length>0&&Me(s,t,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Me(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Te(a,t,n,s,l,c)}}function Te(e,t,n,r,i,o){e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,o),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=2):m.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(m,t,n,r,i,o)}function Ae(e,t,n){!0!==t.isScene&&(t=B);const r=W.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=Q.getParameters(e,i.state,o,t,n),l=Q.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",be),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Pe(e,s),u}else s.uniforms=Q.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=Q.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Pe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=u.getUniforms(),p=XI.seqWithValue(f.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function Pe(e,t){const n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Se.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!=typeof self&&Se.setContext(self),this.setAnimationLoop=function(e){xe=e,me.setAnimationLoop(e),null===e?Se.stop():Se.start()},me.addEventListener("sessionstart",_e),me.addEventListener("sessionend",we),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),d=ne.get(e,p.length),d.init(),p.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(z),N=this.localClippingEnabled,L=re.init(this.clippingPlanes,N,t),h=te.get(e,f.length),h.init(),f.push(h),Ee(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,P),!0===L&&re.beginShadows();const n=d.state.shadowsArray;if(ie.render(n,e,t),!0===L&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ce(h,e,r,r.viewport)}}else Ce(h,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),ue.resetDefaultState(),x=-1,_=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){W.get(e.texture).__webglTexture=t,W.get(e.depthTexture).__webglTexture=n;const r=W.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=W.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){b=e,v=t,y=n;let r=!0;if(e){const t=W.get(e);void 0!==t.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?q.setupRenderTarget(e):t.__hasExternalTextures&&q.rebindTextures(e,W.get(e.texture).__webglTexture,W.get(e.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],o=!0):i=$.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?W.get(e).__webglMultisampledFramebuffer:r,w.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else w.copy(R).multiplyScalar(T).floor(),S.copy(I).multiplyScalar(T).floor(),E=O;if(H.bindFramebuffer(36160,i)&&$.drawBuffers&&r&&H.drawBuffers(e,i),H.viewport(w),H.scissor(S),H.setScissorTest(E),o){const r=W.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=W.get(e.texture),i=t||0;de.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==ZM&&ce.convert(s)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===YM&&(V.has("EXT_color_buffer_half_float")||$.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(l===WM||ce.convert(l)===de.getParameter(35738)||l===XM&&($.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&de.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),o)}finally{const e=null!==b?W.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);q.setTexture2D(t,0),de.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=ce.convert(n.format),s=ce.convert(n.type);q.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);let u;if(r.isData3DTexture)q.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),u=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);const h=de.getParameter(3314),d=de.getParameter(32878),f=de.getParameter(3316),p=de.getParameter(3315),g=de.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,v.data)):de.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v),de.pixelStorei(3314,h),de.pixelStorei(32878,d),de.pixelStorei(3316,f),de.pixelStorei(3315,p),de.pixelStorei(32877,g),0===i&&r.generateMipmaps&&de.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,H.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function jO(e,t,n){return $O(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function VO(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function $O(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(class extends BO{}).prototype.isWebGL1Renderer=!0;class HO{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class GO extends HO{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+v*o[l+e]+y*o[s+e]+b*o[u+e];return i}}class WO extends HO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}class qO extends HO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class XO{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=VO(t,this.TimeBufferType),this.values=VO(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:VO(e.times,Array),values:VO(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new qO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new WO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new GO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case iT:t=this.InterpolantFactoryMethodDiscrete;break;case oT:t=this.InterpolantFactoryMethodLinear;break;case aT:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return iT;case this.InterpolantFactoryMethodLinear:return oT;case this.InterpolantFactoryMethodSmooth:return aT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=jO(n,i,o),this.values=jO(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&$O(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=jO(this.times),t=jO(this.values),n=this.getValueSize(),r=this.getInterpolation()===aT,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=jO(e,0,o),this.values=jO(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=jO(this.times,0),t=jO(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}XO.prototype.TimeBufferType=Float32Array,XO.prototype.ValueBufferType=Float32Array,XO.prototype.DefaultInterpolation=oT;class YO extends XO{}YO.prototype.ValueTypeName="bool",YO.prototype.ValueBufferType=Array,YO.prototype.DefaultInterpolation=iT,YO.prototype.InterpolantFactoryMethodLinear=void 0,YO.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends XO{}).prototype.ValueTypeName="color";(class extends XO{}).prototype.ValueTypeName="number";class KO extends HO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)KT.slerpFlat(i,0,o,l-a,o,l,s);return i}}class ZO extends XO{InterpolantFactoryMethodLinear(e){return new KO(this.times,this.values,this.getValueSize(),e)}}ZO.prototype.ValueTypeName="quaternion",ZO.prototype.DefaultInterpolation=oT,ZO.prototype.InterpolantFactoryMethodSmooth=void 0;class JO extends XO{}JO.prototype.ValueTypeName="string",JO.prototype.ValueBufferType=Array,JO.prototype.DefaultInterpolation=iT,JO.prototype.InterpolantFactoryMethodLinear=void 0,JO.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends XO{}).prototype.ValueTypeName="vector",Error;const QO="\\[\\]\\.:\\/",ek=new RegExp("["+QO+"]","g"),tk="[^"+QO+"]",nk="[^"+QO.replace("\\.","")+"]",rk=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",tk)+/(WCOD+)?/.source.replace("WCOD",nk)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tk)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tk)+"$"),ik=["material","materials","bones","map"];class ok{constructor(e,t,n){this.path=t,this.parsedPath=n||ok.parseTrackName(t),this.node=ok.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ok.Composite(e,t,n):new ok(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ek,"")}static parseTrackName(e){const t=rk.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==ik.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=ok.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ok.Composite=class{constructor(e,t,n){const r=n||ok.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},ok.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ok.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ok.prototype.GetterByBindingType=[ok.prototype._getValue_direct,ok.prototype._getValue_array,ok.prototype._getValue_arrayElement,ok.prototype._getValue_toArray],ok.prototype.SetterByBindingTypeAndVersioning=[[ok.prototype._setValue_direct,ok.prototype._setValue_direct_setNeedsUpdate,ok.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_array,ok.prototype._setValue_array_setNeedsUpdate,ok.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_arrayElement,ok.prototype._setValue_arrayElement_setNeedsUpdate,ok.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_fromArray,ok.prototype._setValue_fromArray_setNeedsUpdate,ok.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bM}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bM);var ak=function(e){return e.threeD="3D",e.xy="XY",e.xz="XZ",e.yz="YZ",e}({}),sk=function(e){return e.volumetric="volumetric",e.maxProject="maxproject",e.pathTrace="pathtrace",e}({}),lk=function(e){return e.segmentedCell="cell",e.fullField="fov",e}({});function ck(e){return ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ck(e)}function uk(e,t,n){return(t=function(e){var t=function(e){if("object"!=ck(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ck(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ck(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hk=[0,0,0],dk=[255,255,255],fk=[16,16],pk=[120,12],mk=[35,140,255],gk="Channels",vk=[255,255,255],yk=255,bk=[[226,205,179],[111,186,17],[141,163,192],[245,241,203],[224,227,209],[221,155,245],[227,244,245],[255,98,0],[247,219,120]],xk=Object.freeze([{colors:bk,name:"Default"},{colors:[[190,68,171],[189,211,75],[61,155,169],[128,128,128],[255,255,255],[239,27,45],[238,77,245],[96,255,255]],name:"Thumbnail colors"},{colors:[[128,0,0],[0,128,0],[0,0,128],[32,32,32],[255,255,0],[255,0,255],[0,255,0],[0,0,255]],name:"RGB colors"},{colors:[[128,0,128],[128,128,128],[0,128,128],[128,128,0],[255,255,255],[255,0,0],[255,0,255],[0,255,255]],name:"White structure"}]),_k=uk(uk(uk(uk({},ak.threeD,[0,0,5]),ak.xy,[0,0,2]),ak.xz,[0,2,0]),ak.yz,[2,0,0]),wk=uk(uk(uk(uk({},ak.threeD,[0,1,0]),ak.xy,[0,1,0]),ak.xz,[0,0,1]),ak.yz,[0,0,1]),Sk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ak.threeD;return{position:_k[e],target:[0,0,0],up:wk[e],fov:20,orthoScale:.5}},Ek=function(){return{viewMode:ak.threeD,renderMode:sk.volumetric,imageType:lk.segmentedCell,showAxes:!1,showBoundingBox:!1,backgroundColor:hk,boundingBoxColor:dk,autorotate:!1,maskAlpha:0,brightness:70,density:50,levels:mk,interpolationEnabled:!0,region:{x:[0,1],y:[0,1],z:[0,1]},slice:{x:.5,y:.5,z:.5},time:0,cameraState:void 0}},Ck=bk;function Mk(e){return Ck[e%Ck.length]}var Tk=function(){return{name:"",displayName:"",volumeEnabled:!1,isosurfaceEnabled:!1,colorizeEnabled:!1,colorizeAlpha:1,isovalue:128,opacity:1,color:Mk(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0),useControlPoints:!1,ramp:[0,yk],controlPoints:[{x:0,opacity:0,color:[255,255,255]},{x:255,opacity:1,color:[255,255,255]}]}};function Ak(e){return Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ak(e)}function Pk(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ak(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ak(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ak(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rk=Pk(Pk(Pk(Pk({},ak.yz,"x"),ak.xz,"y"),ak.xy,"z"),ak.threeD,null),Ik=function(e){return[e.r,e.g,e.b]},Ok=function(e){return{r:e[0],g:e[1],b:e[2]}},kk=function(e){return[e[0]/255,e[1]/255,e[2]/255]},Lk=function(e){return"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")};function Nk(e){return Nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nk(e)}function Dk(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zk(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function zk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uk(e,t,n){if("number"==typeof n.match){if(n.match===t)return!0}else if(Array.isArray(n.match)){var r,i=Dk(n.match);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("number"==typeof o){if(o===t)return!0}else if(new RegExp(o).test(e))return!0}}catch(e){i.e(e)}finally{i.f()}}else{if("string"!=typeof n.match)throw new Error("match is required for channel settings groups, and must be a string, number, or array of strings or numbers");if(new RegExp(n.match).test(e))return!0}return!1}function Fk(e,t,n){var r,i=Dk(n.channels);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(Uk(e,t,o))return o}}catch(e){i.e(e)}finally{i.f()}}function Bk(e,t,n){if(n.groups){var r,i=Dk(n.groups);try{for(i.s();!(r=i.n()).done;){var o=Fk(e,t,r.value);if(void 0!==o)return o}}catch(e){i.e(e)}finally{i.f()}}}function jk(e,t,n){if(n){var r=Bk(e,t,n);if(r)return r.name||e}return e}function Vk(e){return function(e){if(Array.isArray(e))return Hk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $k(e,t){if(e){if("string"==typeof e)return Hk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hk(e,t):void 0}}function Hk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gk(e,t){var n=e.charAt(0);if("m"===n){var r=parseFloat(e.substring(1))/100;return t.maxBin*r}if("p"===n){var i=parseFloat(e.substring(1))/100;return t.findBinOfPercentile(i)}return parseFloat(e)}function Wk(e,t,n){var r,i,o,a,s,l=e.getHistogram(t),c=function(e){var t=e.findBinOfPercentile(.5),n=e.findBinOfPercentile(.983);return(new E_).createFromMinMax(t,n)}(l),u=c,h=e.channelNames[t],d=n&&Bk(h,t,n);return d&&d.lut&&(u=null!==(a=function(e,t){var n;if(void 0!==t.lut&&2===t.lut.length)return n="autoij"===t.lut[0]||"autoij"===t.lut[1]?e.findAutoIJBins():[Gk(t.lut[0],e),Gk(t.lut[1],e)],(new E_).createFromMinMax(Math.min(n[0],n[1]),Math.max(n[0],n[1]))}(l,d))&&void 0!==a?a:c),o=null!==(r=null==d?void 0:d.controlPoints)&&void 0!==r?r:Vk(u.controlPoints),i=null!=d&&d.ramp?Xk(d.ramp):Vk(u.controlPoints),s=null!=d&&d.controlPointsEnabled?(new E_).createFromControlPoints(o):(new E_).createFromControlPoints(i),e.setLut(t,s),{ramp:i,controlPoints:o}}function qk(e){if(e.length<=1)return[0,yk];if(2===e.length)return[e[0].x,e[1].x];if(3===e.length){if(e[0].opacity!==e[1].opacity&&e[0].opacity!==e[2].opacity&&e[1].opacity!==e[2].opacity)return[e[0].x,e[2].x];if(e[0].opacity!==e[1].opacity)return[e[0].x,e[1].x];if(e[1].opacity!==e[2].opacity)return[e[1].x,e[2].x]}return[e[1].x,e[e.length-2].x]}function Xk(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,n)||$k(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return[{x:Math.min(i-1,0),opacity:0,color:vk},{x:i,opacity:0,color:vk},{x:o,opacity:1,color:vk},{x:Math.max(o+1,yk),opacity:1,color:vk}]}function Yk(e,t,n){var r=n.rawMin,i=n.rawMax;return void 0===t?e:C_(e,t[0],t[1],r,i)}function Kk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Zk(e,t){var r=void 0===t?(0,n.useRef)():(0,n.useRef)(t),i=(0,n.useCallback)((function(t){r.current=t,e(t)}),[e]);return[r,i]}function Jk(e){var t=(0,n.useRef)(null);return null===t.current&&(t.current=e()),t.current}function Qk(e){return Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qk(e)}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nL(r.key),r)}}function tL(e,t,n){return(t=nL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nL(e){var t=function(e){if("object"!=Qk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qk(t)?t:t+""}var rL=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tL(this,"playingAxis",null),tL(this,"playWaitingForLoad",!1),tL(this,"playHolding",!1),tL(this,"playTimeoutId",0)},t=[{key:"setPlayingAxis",value:function(e){var t;this.playingAxis=e,null===(t=this.onPlayingAxisChanged)||void 0===t||t.call(this,e)}},{key:"playStep",value:function(){var e;this.playingAxis&&!this.playHolding&&this.stepAxis&&(null!==(e=this.getVolumeIsLoaded)&&void 0!==e&&e.call(this)?(this.stepAxis(this.playingAxis),this.playTimeoutId=window.setTimeout(this.playStep.bind(this),125)):this.playWaitingForLoad=!0)}},{key:"onImageLoaded",value:function(){this.playWaitingForLoad&&(this.playWaitingForLoad=!1,this.playStep())}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.clearTimeout(this.playTimeoutId),this.playTimeoutId=0,this.playWaitingForLoad=!1,null===this.playingAxis||e||(this.playHolding=!1,this.setPlayingAxis(null))}},{key:"play",value:function(e){null!==this.playingAxis&&this.pause(!0),this.setPlayingAxis(e),this.playStep()}},{key:"startHold",value:function(e){this.playHolding=!0,this.pause(e===this.playingAxis)}},{key:"endHold",value:function(){this.playHolding&&(this.playHolding=!1,this.playStep())}}],t&&eL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function iL(e,t,n,r){var i,o,a,s,l,c,u,h,d,f,p,m,g,v,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tk(),b={};return r&&(b=null!==(m=Bk(e,t,r))&&void 0!==m?m:{}),{name:null!=e?e:"Channel "+t,displayName:jk(null!=e?e:"Channel "+t,t,r),volumeEnabled:null!==(i=b.enabled)&&void 0!==i?i:y.volumeEnabled,isosurfaceEnabled:null!==(o=b.surfaceEnabled)&&void 0!==o?o:y.isosurfaceEnabled,colorizeEnabled:null!==(a=b.colorizeEnabled)&&void 0!==a?a:y.colorizeEnabled,colorizeAlpha:null!==(s=b.colorizeAlpha)&&void 0!==s?s:y.colorizeAlpha,isovalue:null!==(l=b.isovalue)&&void 0!==l?l:y.isovalue,opacity:null!==(c=b.surfaceOpacity)&&void 0!==c?c:y.opacity,color:null!==(g=null!==(h=b.color)&&void 0!==h?h:"",v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(g),u=v?[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)]:null)&&void 0!==u?u:n,useControlPoints:null!==(d=b.controlPointsEnabled)&&void 0!==d?d:y.useControlPoints,controlPoints:null!==(f=b.controlPoints)&&void 0!==f?f:y.controlPoints,ramp:null!==(p=b.ramp)&&void 0!==p?p:y.ramp}}const oL={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var aL=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:oL}))};const sL=n.forwardRef(aL),lL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"};var cL=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:lL}))};const uL=n.forwardRef(cL),hL={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};var dL=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:hL}))};const fL=n.forwardRef(dL);function pL(e){var t=e.children,r=e.prefixCls,i=e.id,o=e.overlayInnerStyle,a=e.className,s=e.style;return n.createElement("div",{className:va()("".concat(r,"-content"),a),style:s},n.createElement("div",{className:"".concat(r,"-inner"),id:i,role:"tooltip",style:o},"function"==typeof t?t():t))}const mL=n.createContext(null);var gL=[];var vL="rc-util-locker-".concat(Date.now()),yL=0;function bL(e){var t=!!e,r=Ht(n.useState((function(){return yL+=1,"".concat(vL,"_").concat(yL)})),1)[0];Wn((function(){if(t){var e=(i=document.body,"undefined"!=typeof document&&i&&i instanceof Element?function(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,i,o=n.style;if(o.position="absolute",o.left="0",o.top="0",o.width="100px",o.height="100px",o.overflow="scroll",e){var a=getComputedStyle(e);o.scrollbarColor=a.scrollbarColor,o.scrollbarWidth=a.scrollbarWidth;var s=getComputedStyle(e,"::-webkit-scrollbar"),l=parseInt(s.width,10),c=parseInt(s.height,10);try{var u=l?"width: ".concat(s.width,";"):"",h=c?"height: ".concat(s.height,";"):"";ln("\n#".concat(t,"::-webkit-scrollbar {\n").concat(u,"\n").concat(h,"\n}"),t)}catch(e){console.error(e),r=l,i=c}}document.body.appendChild(n);var d=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,f=e&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),sn(t),{width:d,height:f}}(i):{width:0,height:0}).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;ln("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(e,"px);"):"","\n}"),r)}else sn(r);var i;return function(){sn(r)}}),[t,r])}var xL=!1,_L=function(e){return!1!==e&&(Kt()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)};const wL=n.forwardRef((function(e,t){var r=e.open,i=e.autoLock,a=e.getContainer,s=(e.debug,e.autoDestroy),l=void 0===s||s,c=e.children,u=Ht(n.useState(r),2),h=u[0],d=u[1],f=h||r;n.useEffect((function(){(l||r)&&d(r)}),[r,l]);var p=Ht(n.useState((function(){return _L(a)})),2),m=p[0],g=p[1];n.useEffect((function(){var e=_L(a);g(null!=e?e:null)}));var v=function(e){var t=Ht(n.useState((function(){return Kt()?document.createElement("div"):null})),1)[0],r=n.useRef(!1),i=n.useContext(mL),o=Ht(n.useState(gL),2),a=o[0],s=o[1],l=i||(r.current?void 0:function(e){s((function(t){return[e].concat(Wt(t))}))});function c(){t.parentElement||document.body.appendChild(t),r.current=!0}function u(){var e;null===(e=t.parentElement)||void 0===e||e.removeChild(t),r.current=!1}return Wn((function(){return e?i?i(c):c():u(),u}),[e]),Wn((function(){a.length&&(a.forEach((function(e){return e()})),s(gL))}),[a]),[t,l]}(f&&!m),y=Ht(v,2),b=y[0],x=y[1],_=null!=m?m:b;bL(i&&r&&Kt()&&(_===b||_===document.body));var w=null;c&&Ea(c)&&t&&(w=c.ref);var S=Sa(w,t);if(!f||!Kt()||void 0===m)return null;var E=!1===_||xL,C=c;return t&&(C=n.cloneElement(c,{ref:S})),n.createElement(mL.Provider,{value:x},E?C:(0,o.createPortal)(C,_))}));var SL=n.createContext(null),EL=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),CL="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ML=void 0!==a.g&&a.g.Math===Math?a.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),TL="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ML):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},AL=["top","right","bottom","left","width","height","size","weight"],PL="undefined"!=typeof MutationObserver,RL=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e){var t=!1,n=!1,r=0;function i(){t&&(t=!1,e()),n&&a()}function o(){TL(i)}function a(){var e=Date.now();if(t){if(e-r<2)return;n=!0}else t=!0,n=!1,setTimeout(o,20);r=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){CL&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),PL?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){CL&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;AL.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),IL=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},OL=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ML},kL=UL(0,0,0,0);function LL(e){return parseFloat(e)||0}function NL(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+LL(e["border-"+n+"-width"])}),0)}var DL="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof OL(e).SVGGraphicsElement}:function(e){return e instanceof OL(e).SVGElement&&"function"==typeof e.getBBox};function zL(e){return CL?DL(e)?function(e){var t=e.getBBox();return UL(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return kL;var r=OL(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=LL(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=LL(r.width),l=LL(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=NL(r,"left","right")+o),Math.round(l+a)!==n&&(l-=NL(r,"top","bottom")+a)),!function(e){return e===OL(e).document.documentElement}(e)){var c=Math.round(s+o)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return UL(i.left,i.top,s,l)}(e):kL}function UL(e,t,n,r){return{x:e,y:t,width:n,height:r}}var FL=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=UL(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=zL(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),BL=function(e,t){var n,r,i,o,a,s,l,c=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),IL(l,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),l);IL(this,{target:e,contentRect:c})},jL=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new EL,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof OL(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new FL(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof OL(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new BL(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),VL="undefined"!=typeof WeakMap?new WeakMap:new EL,$L=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=RL.getInstance(),r=new jL(t,n,this);VL.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){$L.prototype[e]=function(){var t;return(t=VL.get(this))[e].apply(t,arguments)}}));const HL=void 0!==ML.ResizeObserver?ML.ResizeObserver:$L;var GL=new Map,WL=new HL((function(e){e.forEach((function(e){var t,n=e.target;null===(t=GL.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))})),qL=function(e){Ra(n,e);var t=Na(n);function n(){return yn(this,n),t.apply(this,arguments)}return xn(n,[{key:"render",value:function(){return this.props.children}}]),n}(n.Component);function XL(e,t){var r=e.children,i=e.disabled,o=n.useRef(null),a=n.useRef(null),s=n.useContext(SL),l="function"==typeof r,c=l?r(o):r,u=n.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!l&&n.isValidElement(c)&&Ea(c),d=h?c.ref:null,f=Sa(d,o),p=function(){var e;return ba(o.current)||(o.current&&"object"===zt(o.current)?ba(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||ba(a.current)};n.useImperativeHandle(t,(function(){return p()}));var m=n.useRef(e);m.current=e;var g=n.useCallback((function(e){var t=m.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,a=i.height,l=e.offsetWidth,c=e.offsetHeight,h=Math.floor(o),d=Math.floor(a);if(u.current.width!==h||u.current.height!==d||u.current.offsetWidth!==l||u.current.offsetHeight!==c){var f={width:h,height:d,offsetWidth:l,offsetHeight:c};u.current=f;var p=l===Math.round(o)?o:l,g=c===Math.round(a)?a:c,v=Xt(Xt({},f),{},{offsetWidth:p,offsetHeight:g});null==s||s(v,e,r),n&&Promise.resolve().then((function(){n(v,e)}))}}),[]);return n.useEffect((function(){var e,t,n=p();return n&&!i&&(e=n,t=g,GL.has(e)||(GL.set(e,new Set),WL.observe(e)),GL.get(e).add(t)),function(){return function(e,t){GL.has(e)&&(GL.get(e).delete(t),GL.get(e).size||(WL.unobserve(e),GL.delete(e)))}(n,g)}}),[o.current,i]),n.createElement(qL,{ref:a},h?n.cloneElement(c,{ref:f}):c)}const YL=n.forwardRef(XL);function KL(e,t){var r=e.children;return("function"==typeof r?[r]:oC(r)).map((function(r,i){var o=(null==r?void 0:r.key)||"".concat("rc-observer-key","-").concat(i);return n.createElement(YL,nr({},e,{key:o,ref:0===i?t:void 0}),r)}))}var ZL=n.forwardRef(KL);ZL.Collection=function(e){var t=e.children,r=e.onBatchResize,i=n.useRef(0),o=n.useRef([]),a=n.useContext(SL),s=n.useCallback((function(e,t,n){i.current+=1;var s=i.current;o.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){s===i.current&&(null==r||r(o.current),o.current=[])})),null==a||a(e,t,n)}),[r,a]);return n.createElement(SL.Provider,{value:s},t)};const JL=ZL;var QL=0,eN=Xt({},r).useId;const tN=eN?function(e){var t=eN();return e||t}:function(e){var t=Ht(n.useState("ssr-id"),2),r=t[0],i=t[1];return n.useEffect((function(){var e=QL;QL+=1,i("rc_unique_".concat(e))}),[]),e||r},nN=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};function rN(e){var t=e.prefixCls,r=e.align,i=e.arrow,o=e.arrowPos,a=i||{},s=a.className,l=a.content,c=o.x,u=void 0===c?0:c,h=o.y,d=void 0===h?0:h,f=n.useRef();if(!r||!r.points)return null;var p={position:"absolute"};if(!1!==r.autoArrow){var m=r.points[0],g=r.points[1],v=m[0],y=m[1],b=g[0],x=g[1];v!==b&&["t","b"].includes(v)?"t"===v?p.top=0:p.bottom=0:p.top=d,y!==x&&["l","r"].includes(y)?"l"===y?p.left=0:p.right=0:p.left=u}return n.createElement("div",{ref:f,className:va()("".concat(t,"-arrow"),s),style:p},l)}function iN(e){var t=e.prefixCls,r=e.open,i=e.zIndex,o=e.mask,a=e.motion;return o?n.createElement(Ds,nr({},a,{motionAppear:!0,visible:r,removeOnLeave:!0}),(function(e){var r=e.className;return n.createElement("div",{style:{zIndex:i},className:va()("".concat(t,"-mask"),r)})})):null}const oN=n.memo((function(e){return e.children}),(function(e,t){return t.cache})),aN=n.forwardRef((function(e,t){var r=e.popup,i=e.className,o=e.prefixCls,a=e.style,s=e.target,l=e.onVisibleChanged,c=e.open,u=e.keepDom,h=e.fresh,d=e.onClick,f=e.mask,p=e.arrow,m=e.arrowPos,g=e.align,v=e.motion,y=e.maskMotion,b=e.forceRender,x=e.getPopupContainer,_=e.autoDestroy,w=e.portal,S=e.zIndex,E=e.onMouseEnter,C=e.onMouseLeave,M=e.onPointerEnter,T=e.onPointerDownCapture,A=e.ready,P=e.offsetX,R=e.offsetY,I=e.offsetR,O=e.offsetB,k=e.onAlign,L=e.onPrepare,N=e.stretch,D=e.targetWidth,z=e.targetHeight,U="function"==typeof r?r():r,F=c||u,B=(null==x?void 0:x.length)>0,j=Ht(n.useState(!x||!B),2),V=j[0],$=j[1];if(Wn((function(){!V&&B&&s&&$(!0)}),[V,B,s]),!V)return null;var H="auto",G={left:"-1000vw",top:"-1000vh",right:H,bottom:H};if(A||!c){var W,q=g.points,X=g.dynamicInset||(null===(W=g._experimental)||void 0===W?void 0:W.dynamicInset),Y=X&&"r"===q[0][1],K=X&&"b"===q[0][0];Y?(G.right=I,G.left=H):(G.left=P,G.right=H),K?(G.bottom=O,G.top=H):(G.top=R,G.bottom=H)}var Z={};return N&&(N.includes("height")&&z?Z.height=z:N.includes("minHeight")&&z&&(Z.minHeight=z),N.includes("width")&&D?Z.width=D:N.includes("minWidth")&&D&&(Z.minWidth=D)),c||(Z.pointerEvents="none"),n.createElement(w,{open:b||F,getContainer:x&&function(){return x(s)},autoDestroy:_},n.createElement(iN,{prefixCls:o,open:c,zIndex:S,mask:f,motion:y}),n.createElement(JL,{onResize:k,disabled:!c},(function(e){return n.createElement(Ds,nr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(o,"-hidden")},v,{onAppearPrepare:L,onEnterPrepare:L,visible:c,onVisibleChanged:function(e){var t;null==v||null===(t=v.onVisibleChanged)||void 0===t||t.call(v,e),l(e)}}),(function(r,s){var l=r.className,u=r.style,f=va()(o,l,i);return n.createElement("div",{ref:wa(e,t,s),className:f,style:Xt(Xt(Xt(Xt({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},G),Z),u),{},{boxSizing:"border-box",zIndex:S},a),onMouseEnter:E,onMouseLeave:C,onPointerEnter:M,onClick:d,onPointerDownCapture:T},p&&n.createElement(rN,{prefixCls:o,arrow:p,arrowPos:m,align:g}),n.createElement(oN,{cache:!c&&!h},U))}))})))})),sN=n.forwardRef((function(e,t){var r=e.children,i=e.getTriggerDOMNode,o=Ea(r),a=n.useCallback((function(e){_a(t,i?i(e):e)}),[i]),s=Sa(a,r.ref);return o?n.cloneElement(r,{ref:s}):r})),lN=n.createContext(null);function cN(e){return e?Array.isArray(e)?e:[e]:[]}const uN=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};function hN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function dN(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function fN(e){return e.ownerDocument.defaultView}function pN(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=fN(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function mN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function gN(e){return mN(parseFloat(e),0)}function vN(e,t){var n=Xt({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=fN(e).getComputedStyle(e),r=t.overflow,i=t.overflowClipMargin,o=t.borderTopWidth,a=t.borderBottomWidth,s=t.borderLeftWidth,l=t.borderRightWidth,c=e.getBoundingClientRect(),u=e.offsetHeight,h=e.clientHeight,d=e.offsetWidth,f=e.clientWidth,p=gN(o),m=gN(a),g=gN(s),v=gN(l),y=mN(Math.round(c.width/d*1e3)/1e3),b=mN(Math.round(c.height/u*1e3)/1e3),x=(d-f-g-v)*y,_=(u-h-p-m)*b,w=p*b,S=m*b,E=g*y,C=v*y,M=0,T=0;if("clip"===r){var A=gN(i);M=A*y,T=A*b}var P=c.x+E-M,R=c.y+w-T,I=P+c.width+2*M-E-C-x,O=R+c.height+2*T-w-S-_;n.left=Math.max(n.left,P),n.top=Math.max(n.top,R),n.right=Math.min(n.right,I),n.bottom=Math.min(n.bottom,O)}})),n}function yN(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function bN(e,t){var n=Ht(t||[],2),r=n[0],i=n[1];return[yN(e.width,r),yN(e.height,i)]}function xN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function _N(e,t){var n,r=t[0],i=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===i?e.x:"r"===i?e.x+e.width:e.x+e.width/2,y:n}}function wN(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var SN=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const EN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wL,t=n.forwardRef((function(t,r){var i=t.prefixCls,o=void 0===i?"rc-trigger-popup":i,a=t.children,s=t.action,l=void 0===s?"hover":s,c=t.showAction,u=t.hideAction,h=t.popupVisible,d=t.defaultPopupVisible,f=t.onPopupVisibleChange,p=t.afterPopupVisibleChange,m=t.mouseEnterDelay,g=t.mouseLeaveDelay,v=void 0===g?.1:g,y=t.focusDelay,b=t.blurDelay,x=t.mask,_=t.maskClosable,w=void 0===_||_,S=t.getPopupContainer,E=t.forceRender,C=t.autoDestroy,M=t.destroyPopupOnHide,T=t.popup,A=t.popupClassName,P=t.popupStyle,R=t.popupPlacement,I=t.builtinPlacements,O=void 0===I?{}:I,k=t.popupAlign,L=t.zIndex,N=t.stretch,D=t.getPopupClassNameFromAlign,z=t.fresh,U=t.alignPoint,F=t.onPopupClick,B=t.onPopupAlign,j=t.arrow,V=t.popupMotion,$=t.maskMotion,H=t.popupTransitionName,G=t.popupAnimation,W=t.maskTransitionName,q=t.maskAnimation,X=t.className,Y=t.getTriggerDOMNode,K=Ca(t,SN),Z=C||M||!1,J=Ht(n.useState(!1),2),Q=J[0],ee=J[1];Wn((function(){ee(nN())}),[]);var te=n.useRef({}),ne=n.useContext(lN),re=n.useMemo((function(){return{registerSubPopup:function(e,t){te.current[e]=t,null==ne||ne.registerSubPopup(e,t)}}}),[ne]),ie=tN(),oe=Ht(n.useState(null),2),ae=oe[0],se=oe[1],le=n.useRef(null),ce=za((function(e){le.current=e,ya(e)&&ae!==e&&se(e),null==ne||ne.registerSubPopup(ie,e)})),ue=Ht(n.useState(null),2),he=ue[0],de=ue[1],fe=n.useRef(null),pe=za((function(e){ya(e)&&he!==e&&(de(e),fe.current=e)})),me=n.Children.only(a),ge=(null==me?void 0:me.props)||{},ve={},ye=za((function(e){var t,n,r=he;return(null==r?void 0:r.contains(e))||(null===(t=lC(r))||void 0===t?void 0:t.host)===e||e===r||(null==ae?void 0:ae.contains(e))||(null===(n=lC(ae))||void 0===n?void 0:n.host)===e||e===ae||Object.values(te.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),be=dN(o,V,G,H),xe=dN(o,$,q,W),_e=Ht(n.useState(d||!1),2),we=_e[0],Se=_e[1],Ee=null!=h?h:we,Ce=za((function(e){void 0===h&&Se(e)}));Wn((function(){Se(h||!1)}),[h]);var Me=n.useRef(Ee);Me.current=Ee;var Te=n.useRef([]);Te.current=[];var Ae=za((function(e){var t;Ce(e),(null!==(t=Te.current[Te.current.length-1])&&void 0!==t?t:Ee)!==e&&(Te.current.push(e),null==f||f(e))})),Pe=n.useRef(),Re=function(){clearTimeout(Pe.current)},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Re(),0===t?Ae(e):Pe.current=setTimeout((function(){Ae(e)}),1e3*t)};n.useEffect((function(){return Re}),[]);var Oe=Ht(n.useState(!1),2),ke=Oe[0],Le=Oe[1];Wn((function(e){e&&!Ee||Le(!0)}),[Ee]);var Ne=Ht(n.useState(null),2),De=Ne[0],ze=Ne[1],Ue=Ht(n.useState(null),2),Fe=Ue[0],Be=Ue[1],je=function(e){Be([e.clientX,e.clientY])},Ve=function(e,t,r,i,o,a,s){var l=Ht(n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[i]||{}}),2),c=l[0],u=l[1],h=n.useRef(0),d=n.useMemo((function(){return t?pN(t):[]}),[t]),f=n.useRef({});e||(f.current={});var p=za((function(){if(t&&r&&e){var n,l,c,h,p,m=t,g=m.ownerDocument,v=fN(m).getComputedStyle(m),y=v.width,b=v.height,x=v.position,_=m.style.left,w=m.style.top,S=m.style.right,E=m.style.bottom,C=m.style.overflow,M=Xt(Xt({},o[i]),a),T=g.createElement("div");if(null===(n=m.parentElement)||void 0===n||n.appendChild(T),T.style.left="".concat(m.offsetLeft,"px"),T.style.top="".concat(m.offsetTop,"px"),T.style.position=x,T.style.height="".concat(m.offsetHeight,"px"),T.style.width="".concat(m.offsetWidth,"px"),m.style.left="0",m.style.top="0",m.style.right="auto",m.style.bottom="auto",m.style.overflow="hidden",Array.isArray(r))p={x:r[0],y:r[1],width:0,height:0};else{var A,P,R=r.getBoundingClientRect();R.x=null!==(A=R.x)&&void 0!==A?A:R.left,R.y=null!==(P=R.y)&&void 0!==P?P:R.top,p={x:R.x,y:R.y,width:R.width,height:R.height}}var I=m.getBoundingClientRect();I.x=null!==(l=I.x)&&void 0!==l?l:I.left,I.y=null!==(c=I.y)&&void 0!==c?c:I.top;var O=g.documentElement,k=O.clientWidth,L=O.clientHeight,N=O.scrollWidth,D=O.scrollHeight,z=O.scrollTop,U=O.scrollLeft,F=I.height,B=I.width,j=p.height,V=p.width,$={left:0,top:0,right:k,bottom:L},H={left:-U,top:-z,right:N-U,bottom:D-z},G=M.htmlRegion,W="visible",q="visibleFirst";"scroll"!==G&&G!==q&&(G=W);var X=G===q,Y=vN(H,d),K=vN($,d),Z=G===W?K:Y,J=X?K:Z;m.style.left="auto",m.style.top="auto",m.style.right="0",m.style.bottom="0";var Q=m.getBoundingClientRect();m.style.left=_,m.style.top=w,m.style.right=S,m.style.bottom=E,m.style.overflow=C,null===(h=m.parentElement)||void 0===h||h.removeChild(T);var ee=mN(Math.round(B/parseFloat(y)*1e3)/1e3),te=mN(Math.round(F/parseFloat(b)*1e3)/1e3);if(0===ee||0===te||ya(r)&&!uN(r))return;var ne=M.offset,re=M.targetOffset,ie=Ht(bN(I,ne),2),oe=ie[0],ae=ie[1],se=Ht(bN(p,re),2),le=se[0],ce=se[1];p.x-=le,p.y-=ce;var ue=Ht(M.points||[],2),he=ue[0],de=xN(ue[1]),fe=xN(he),pe=_N(p,de),me=_N(I,fe),ge=Xt({},M),ve=pe.x-me.x+oe,ye=pe.y-me.y+ae;function ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z,r=I.x+e,i=I.y+t,o=r+B,a=i+F,s=Math.max(r,n.left),l=Math.max(i,n.top),c=Math.min(o,n.right),u=Math.min(a,n.bottom);return Math.max(0,(c-s)*(u-l))}var be,xe,_e,we,Se=ht(ve,ye),Ee=ht(ve,ye,K),Ce=_N(p,["t","l"]),Me=_N(I,["t","l"]),Te=_N(p,["b","r"]),Ae=_N(I,["b","r"]),Pe=M.overflow||{},Re=Pe.adjustX,Ie=Pe.adjustY,Oe=Pe.shiftX,ke=Pe.shiftY,Le=function(e){return"boolean"==typeof e?e:e>=0};function dt(){be=I.y+ye,xe=be+F,_e=I.x+ve,we=_e+B}dt();var Ne=Le(Ie),De=fe[0]===de[0];if(Ne&&"t"===fe[0]&&(xe>J.bottom||f.current.bt)){var ze=ye;De?ze-=F-j:ze=Ce.y-Ae.y-ae;var Ue=ht(ve,ze),Fe=ht(ve,ze,K);Ue>Se||Ue===Se&&(!X||Fe>=Ee)?(f.current.bt=!0,ye=ze,ae=-ae,ge.points=[wN(fe,0),wN(de,0)]):f.current.bt=!1}if(Ne&&"b"===fe[0]&&(be<J.top||f.current.tb)){var Be=ye;De?Be+=F-j:Be=Te.y-Me.y-ae;var je=ht(ve,Be),Ve=ht(ve,Be,K);je>Se||je===Se&&(!X||Ve>=Ee)?(f.current.tb=!0,ye=Be,ae=-ae,ge.points=[wN(fe,0),wN(de,0)]):f.current.tb=!1}var $e=Le(Re),He=fe[1]===de[1];if($e&&"l"===fe[1]&&(we>J.right||f.current.rl)){var Ge=ve;He?Ge-=B-V:Ge=Ce.x-Ae.x-oe;var We=ht(Ge,ye),qe=ht(Ge,ye,K);We>Se||We===Se&&(!X||qe>=Ee)?(f.current.rl=!0,ve=Ge,oe=-oe,ge.points=[wN(fe,1),wN(de,1)]):f.current.rl=!1}if($e&&"r"===fe[1]&&(_e<J.left||f.current.lr)){var Xe=ve;He?Xe+=B-V:Xe=Te.x-Me.x-oe;var Ye=ht(Xe,ye),Ke=ht(Xe,ye,K);Ye>Se||Ye===Se&&(!X||Ke>=Ee)?(f.current.lr=!0,ve=Xe,oe=-oe,ge.points=[wN(fe,1),wN(de,1)]):f.current.lr=!1}dt();var Ze=!0===Oe?0:Oe;"number"==typeof Ze&&(_e<K.left&&(ve-=_e-K.left-oe,p.x+V<K.left+Ze&&(ve+=p.x-K.left+V-Ze)),we>K.right&&(ve-=we-K.right-oe,p.x>K.right-Ze&&(ve+=p.x-K.right+Ze)));var Je=!0===ke?0:ke;"number"==typeof Je&&(be<K.top&&(ye-=be-K.top-ae,p.y+j<K.top+Je&&(ye+=p.y-K.top+j-Je)),xe>K.bottom&&(ye-=xe-K.bottom-ae,p.y>K.bottom-Je&&(ye+=p.y-K.bottom+Je)));var Qe=I.x+ve,et=Qe+B,tt=I.y+ye,nt=tt+F,rt=p.x,it=rt+V,ot=p.y,at=ot+j,st=(Math.max(Qe,rt)+Math.min(et,it))/2-Qe,lt=(Math.max(tt,ot)+Math.min(nt,at))/2-tt;null==s||s(t,ge);var ct=Q.right-I.x-(ve+I.width),ut=Q.bottom-I.y-(ye+I.height);1===ee&&(ve=Math.round(ve),ct=Math.round(ct)),1===te&&(ye=Math.round(ye),ut=Math.round(ut)),u({ready:!0,offsetX:ve/ee,offsetY:ye/te,offsetR:ct/ee,offsetB:ut/te,arrowX:st/ee,arrowY:lt/te,scaleX:ee,scaleY:te,align:ge})}})),m=function(){u((function(e){return Xt(Xt({},e),{},{ready:!1})}))};return Wn(m,[i]),Wn((function(){e||m()}),[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,function(){h.current+=1;var e=h.current;Promise.resolve().then((function(){h.current===e&&p()}))}]}(Ee,ae,U&&null!==Fe?Fe:he,R,O,k,B),$e=Ht(Ve,11),He=$e[0],Ge=$e[1],We=$e[2],qe=$e[3],Xe=$e[4],Ye=$e[5],Ke=$e[6],Ze=$e[7],Je=$e[8],Qe=$e[9],et=$e[10],tt=function(e,t,r,i){return n.useMemo((function(){var n=cN(null!=r?r:t),o=cN(null!=i?i:t),a=new Set(n),s=new Set(o);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[a,s]}),[e,t,r,i])}(Q,l,c,u),nt=Ht(tt,2),rt=nt[0],it=nt[1],ot=rt.has("click"),at=it.has("click")||it.has("contextMenu"),st=za((function(){ke||et()}));!function(e,t,n,r){Wn((function(){if(e&&t&&n){var i=n,o=pN(t),a=pN(i),s=fN(i),l=new Set([s].concat(Wt(o),Wt(a)));function c(){r(),Me.current&&U&&at&&Ie(!1)}return l.forEach((function(e){e.addEventListener("scroll",c,{passive:!0})})),s.addEventListener("resize",c,{passive:!0}),r(),function(){l.forEach((function(e){e.removeEventListener("scroll",c),s.removeEventListener("resize",c)}))}}}),[e,t,n])}(Ee,he,ae,st),Wn((function(){st()}),[Fe,R]),Wn((function(){!Ee||null!=O&&O[R]||st()}),[JSON.stringify(k)]);var lt=n.useMemo((function(){var e=function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s,l=o[a];if(hN(null===(s=e[l])||void 0===s?void 0:s.points,i,r))return"".concat(t,"-placement-").concat(l)}return""}(O,o,Qe,U);return va()(e,null==D?void 0:D(Qe))}),[Qe,D,O,o,U]);n.useImperativeHandle(r,(function(){return{nativeElement:fe.current,popupElement:le.current,forceAlign:st}}));var ct=Ht(n.useState(0),2),ut=ct[0],ht=ct[1],dt=Ht(n.useState(0),2),ft=dt[0],pt=dt[1],mt=function(){if(N&&he){var e=he.getBoundingClientRect();ht(e.width),pt(e.height)}};function gt(e,t,n,r){ve[e]=function(i){var o;null==r||r(i),Ie(t,n);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];null===(o=ge[e])||void 0===o||o.call.apply(o,[ge,i].concat(s))}}Wn((function(){De&&(et(),De(),ze(null))}),[De]),(ot||at)&&(ve.onClick=function(e){var t;Me.current&&at?Ie(!1):!Me.current&&ot&&(je(e),Ie(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=ge.onClick)||void 0===t||t.call.apply(t,[ge,e].concat(r))});var vt,yt,bt=function(e,t,r,i,o,a,s,l){var c=n.useRef(e);c.current=e;var u=n.useRef(!1);return n.useEffect((function(){if(t&&i&&(!o||a)){var e=function(){u.current=!1},n=function(e){var t;!c.current||s((null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target)||u.current||l(!1)},h=fN(i);h.addEventListener("pointerdown",e,!0),h.addEventListener("mousedown",n,!0),h.addEventListener("contextmenu",n,!0);var d=lC(r);return d&&(d.addEventListener("mousedown",n,!0),d.addEventListener("contextmenu",n,!0)),function(){h.removeEventListener("pointerdown",e,!0),h.removeEventListener("mousedown",n,!0),h.removeEventListener("contextmenu",n,!0),d&&(d.removeEventListener("mousedown",n,!0),d.removeEventListener("contextmenu",n,!0))}}}),[t,r,i,o,a]),function(){u.current=!0}}(Ee,at,he,ae,x,w,ye,Ie),xt=rt.has("hover"),_t=it.has("hover");xt&&(gt("onMouseEnter",!0,m,(function(e){je(e)})),gt("onPointerEnter",!0,m,(function(e){je(e)})),vt=function(e){(Ee||ke)&&null!=ae&&ae.contains(e.target)&&Ie(!0,m)},U&&(ve.onMouseMove=function(e){var t;null===(t=ge.onMouseMove)||void 0===t||t.call(ge,e)})),_t&&(gt("onMouseLeave",!1,v),gt("onPointerLeave",!1,v),yt=function(){Ie(!1,v)}),rt.has("focus")&&gt("onFocus",!0,y),it.has("focus")&&gt("onBlur",!1,b),rt.has("contextMenu")&&(ve.onContextMenu=function(e){var t;Me.current&&it.has("contextMenu")?Ie(!1):(je(e),Ie(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=ge.onContextMenu)||void 0===t||t.call.apply(t,[ge,e].concat(r))}),X&&(ve.className=va()(ge.className,X));var wt=Xt(Xt({},ge),ve),St={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){K[e]&&(St[e]=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=wt[e])||void 0===t||t.call.apply(t,[wt].concat(r)),K[e].apply(K,r)})}));var Et=n.cloneElement(me,Xt(Xt({},wt),St)),Ct={x:Ye,y:Ke},Mt=j?Xt({},!0!==j?j:{}):null;return n.createElement(n.Fragment,null,n.createElement(JL,{disabled:!Ee,ref:pe,onResize:function(){mt(),st()}},n.createElement(sN,{getTriggerDOMNode:Y},Et)),n.createElement(lN.Provider,{value:re},n.createElement(aN,{portal:e,ref:ce,prefixCls:o,popup:T,className:va()(A,lt),style:P,target:he,onMouseEnter:vt,onMouseLeave:yt,onPointerEnter:vt,zIndex:L,open:Ee,keepDom:ke,fresh:z,onClick:F,onPointerDownCapture:bt,mask:x,motion:be,maskMotion:xe,onVisibleChanged:function(e){Le(!1),et(),null==p||p(e)},onPrepare:function(){return new Promise((function(e){mt(),ze((function(){return e}))}))},forceRender:E,autoDestroy:Z,getPopupContainer:S,align:Qe,arrow:Mt,arrowPos:Ct,ready:He,offsetX:Ge,offsetY:We,offsetR:qe,offsetB:Xe,onAlign:st,stretch:N,targetWidth:ut/Ze,targetHeight:ft/Je})))}));return t}(wL);var CN={shiftX:64,adjustY:1},MN={adjustX:1,shiftY:!0},TN=[0,0],AN={left:{points:["cr","cl"],overflow:MN,offset:[-4,0],targetOffset:TN},right:{points:["cl","cr"],overflow:MN,offset:[4,0],targetOffset:TN},top:{points:["bc","tc"],overflow:CN,offset:[0,-4],targetOffset:TN},bottom:{points:["tc","bc"],overflow:CN,offset:[0,4],targetOffset:TN},topLeft:{points:["bl","tl"],overflow:CN,offset:[0,-4],targetOffset:TN},leftTop:{points:["tr","tl"],overflow:MN,offset:[-4,0],targetOffset:TN},topRight:{points:["br","tr"],overflow:CN,offset:[0,-4],targetOffset:TN},rightTop:{points:["tl","tr"],overflow:MN,offset:[4,0],targetOffset:TN},bottomRight:{points:["tr","br"],overflow:CN,offset:[0,4],targetOffset:TN},rightBottom:{points:["bl","br"],overflow:MN,offset:[4,0],targetOffset:TN},bottomLeft:{points:["tl","bl"],overflow:CN,offset:[0,4],targetOffset:TN},leftBottom:{points:["br","bl"],overflow:MN,offset:[-4,0],targetOffset:TN}},PN=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],RN=function(e,t){var r=e.overlayClassName,i=e.trigger,o=void 0===i?["hover"]:i,a=e.mouseEnterDelay,s=void 0===a?0:a,l=e.mouseLeaveDelay,c=void 0===l?.1:l,u=e.overlayStyle,h=e.prefixCls,d=void 0===h?"rc-tooltip":h,f=e.children,p=e.onVisibleChange,m=e.afterVisibleChange,g=e.transitionName,v=e.animation,y=e.motion,b=e.placement,x=void 0===b?"right":b,_=e.align,w=void 0===_?{}:_,S=e.destroyTooltipOnHide,E=void 0!==S&&S,C=e.defaultVisible,M=e.getTooltipContainer,T=e.overlayInnerStyle,A=(e.arrowContent,e.overlay),P=e.id,R=e.showArrow,I=void 0===R||R,O=Ca(e,PN),k=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(function(){return k.current}));var L=Xt({},O);return"visible"in e&&(L.popupVisible=e.visible),n.createElement(EN,nr({popupClassName:r,prefixCls:d,popup:function(){return n.createElement(pL,{key:"content",prefixCls:d,id:P,overlayInnerStyle:T},A)},action:o,builtinPlacements:AN,popupPlacement:x,ref:k,popupAlign:w,getPopupContainer:M,onPopupVisibleChange:p,afterPopupVisibleChange:m,popupTransitionName:g,popupAnimation:v,popupMotion:y,defaultPopupVisible:C,autoDestroy:E,mouseLeaveDelay:c,popupStyle:u,mouseEnterDelay:s,arrow:I},L),f)};const IN=(0,n.forwardRef)(RN);function ON(){ON=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new R(r||[]);return i(a,"_invoke",{value:M(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==n&&r.call(w,a)&&(x=w);var S=b.prototype=v.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==zt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function M(t,n,r){var i=d;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(zt(t)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function kN(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function LN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){kN(o,r,i,a,s,"next",e)}function s(e){kN(o,r,i,a,s,"throw",e)}a(void 0)}))}}var NN="RC_FORM_INTERNAL_HOOKS",DN=function(){gn(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const zN=n.createContext({getFieldValue:DN,getFieldsValue:DN,getFieldError:DN,getFieldWarning:DN,getFieldsError:DN,isFieldsTouched:DN,isFieldTouched:DN,isFieldValidating:DN,isFieldsValidating:DN,resetFields:DN,setFields:DN,setFieldValue:DN,setFieldsValue:DN,validateFields:DN,submit:DN,getInternalHooks:function(){return DN(),{dispatch:DN,initEntityValue:DN,registerField:DN,useSubscribe:DN,setInitialValues:DN,destroyForm:DN,setCallbacks:DN,registerWatch:DN,getFields:DN,setValidateMessages:DN,setPreserve:DN,getInitialValue:DN}}}),UN=n.createContext(null);function FN(e){return null==e?[]:Array.isArray(e)?e:[e]}function BN(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var jN=BN();function VN(e){var t="function"==typeof Map?new Map:void 0;return VN=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Oa())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Pa(i,n.prototype),i}(e,arguments,Ia(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pa(n,e)},VN(e)}var $N=/%[sdj%]/g;function HN(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function GN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace($N,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}break;default:return e}})):e}function WN(e,t){return null==e||!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e)}function qN(e,t,n){var r=0,i=e.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?t(e[s],o):n([])}}([])}"undefined"!=typeof process&&process.env;var XN=function(e){Ra(n,e);var t=Na(n);function n(e,r){var i;return yn(this,n),Ft(ka(i=t.call(this,"Async Validation Error")),"errors",void 0),Ft(ka(i),"fields",void 0),i.errors=e,i.fields=r,i}return xn(n)}(VN(Error));function YN(e,t){return function(n){var r,i;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(null==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function KN(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===zt(r)&&"object"===zt(e[n])?e[n]=Xt(Xt({},e[n]),r):e[n]=r}return e}var ZN="enum";const JN=function(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!WN(t,o||e.type)||r.push(GN(i.messages.required,e.fullField))};var QN,eD=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,tD=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,nD={integer:function(e){return nD.number(e)&&parseInt(e,10)===e},float:function(e){return nD.number(e)&&!nD.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===zt(e)&&!nD.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(eD)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(QN)return QN;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],o="(?:".concat(i.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),a=new RegExp("(?:^".concat(n,"$)|(?:^").concat(o,"$)")),s=new RegExp("^".concat(n,"$")),l=new RegExp("^".concat(o,"$")),c=function(e){return e&&e.exact?a:new RegExp("(?:".concat(t(e)).concat(n).concat(t(e),")|(?:").concat(t(e)).concat(o).concat(t(e),")"),"g")};c.v4=function(e){return e&&e.exact?s:new RegExp("".concat(t(e)).concat(n).concat(t(e)),"g")},c.v6=function(e){return e&&e.exact?l:new RegExp("".concat(t(e)).concat(o).concat(t(e)),"g")};var u=c.v4().source,h=c.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(u,"|").concat(h,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return QN=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(tD)}};const rD=JN,iD=function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(GN(i.messages.whitespace,e.fullField))},oD=function(e,t,n,r,i){if(e.required&&void 0===t)JN(e,t,n,r,i);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?nD[o](t)||r.push(GN(i.messages.types[o],e.fullField,e.type)):o&&zt(t)!==e.type&&r.push(GN(i.messages.types[o],e.fullField,e.type))}},aD=function(e,t,n,r,i){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,l=t,c=null,u="number"==typeof t,h="string"==typeof t,d=Array.isArray(t);if(u?c="number":h?c="string":d&&(c="array"),!c)return!1;d&&(l=t.length),h&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==e.len&&r.push(GN(i.messages[c].len,e.fullField,e.len)):a&&!s&&l<e.min?r.push(GN(i.messages[c].min,e.fullField,e.min)):s&&!a&&l>e.max?r.push(GN(i.messages[c].max,e.fullField,e.max)):a&&s&&(l<e.min||l>e.max)&&r.push(GN(i.messages[c].range,e.fullField,e.min,e.max))},sD=function(e,t,n,r,i){e[ZN]=Array.isArray(e[ZN])?e[ZN]:[],-1===e[ZN].indexOf(t)&&r.push(GN(i.messages[ZN],e.fullField,e[ZN].join(", ")))},lD=function(e,t,n,r,i){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||r.push(GN(i.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(GN(i.messages.pattern.mismatch,e.fullField,t,e.pattern))))},cD=function(e,t,n,r,i){var o=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t,o)&&!e.required)return n();rD(e,t,r,a,i,o),WN(t,o)||oD(e,t,r,a,i)}n(a)},uD={string:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t,"string")&&!e.required)return n();rD(e,t,r,o,i,"string"),WN(t,"string")||(oD(e,t,r,o,i),aD(e,t,r,o,i),lD(e,t,r,o,i),!0===e.whitespace&&iD(e,t,r,o,i))}n(o)},method:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&oD(e,t,r,o,i)}n(o)},number:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&(oD(e,t,r,o,i),aD(e,t,r,o,i))}n(o)},boolean:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&oD(e,t,r,o,i)}n(o)},regexp:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),WN(t)||oD(e,t,r,o,i)}n(o)},integer:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&(oD(e,t,r,o,i),aD(e,t,r,o,i))}n(o)},float:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&(oD(e,t,r,o,i),aD(e,t,r,o,i))}n(o)},array:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();rD(e,t,r,o,i,"array"),null!=t&&(oD(e,t,r,o,i),aD(e,t,r,o,i))}n(o)},object:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&oD(e,t,r,o,i)}n(o)},enum:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i),void 0!==t&&sD(e,t,r,o,i)}n(o)},pattern:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t,"string")&&!e.required)return n();rD(e,t,r,o,i),WN(t,"string")||lD(e,t,r,o,i)}n(o)},date:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t,"date")&&!e.required)return n();var a;rD(e,t,r,o,i),WN(t,"date")||(a=t instanceof Date?t:new Date(t),oD(e,a,r,o,i),a&&aD(e,a.getTime(),r,o,i))}n(o)},url:cD,hex:cD,email:cD,required:function(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":zt(t);rD(e,t,r,o,i,a),n(o)},any:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(WN(t)&&!e.required)return n();rD(e,t,r,o,i)}n(o)}};var hD=function(){function e(t){yn(this,e),Ft(this,"rules",null),Ft(this,"_messages",jN),this.define(t)}return xn(e,[{key:"define",value:function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==zt(e)||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))}},{key:"messages",value:function(e){return e&&(this._messages=KN(BN(),e)),this._messages}},{key:"validate",value:function(t){var n=this,r=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof i&&(o=i,i={}),!this.rules||0===Object.keys(this.rules).length)return o&&o(null,r),Promise.resolve(r);if(i.messages){var a=this.messages();a===jN&&(a=BN()),KN(a,i.messages),i.messages=a}else i.messages=this.messages();var s={};(i.keys||Object.keys(this.rules)).forEach((function(e){var i=n.rules[e],o=r[e];i.forEach((function(i){var a=i;"function"==typeof a.transform&&(r===t&&(r=Xt({},r)),null!=(o=r[e]=a.transform(o))&&(a.type=a.type||(Array.isArray(o)?"array":zt(o)))),(a="function"==typeof a?{validator:a}:Xt({},a)).validator=n.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=n.getType(a),s[e]=s[e]||[],s[e].push({rule:a,value:o,source:r,field:e}))}))}));var l={};return function(e,t,n,r,i){if(t.first){var o=new Promise((function(t,o){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,Wt(e[n]||[]))})),t}(e);qN(a,n,(function(e){return r(e),e.length?o(new XN(e,HN(e))):t(i)}))}));return o.catch((function(e){return e})),o}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,c=0,u=[],h=new Promise((function(t,o){var h=function(e){if(u.push.apply(u,e),++c===l)return r(u),u.length?o(new XN(u,HN(u))):t(i)};s.length||(r(u),t(i)),s.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?qN(r,n,h):function(e,t,n){var r=[],i=0,o=e.length;function a(e){r.push.apply(r,Wt(e||[])),++i===o&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,h)}))}));return h.catch((function(e){return e})),h}(s,i,(function(t,n){var o,a=t.rule,s=!("object"!==a.type&&"array"!==a.type||"object"!==zt(a.fields)&&"object"!==zt(a.defaultField));function c(e,t){return Xt(Xt({},t),{},{fullField:"".concat(a.fullField,".").concat(e),fullFields:a.fullFields?[].concat(Wt(a.fullFields),[e]):[e]})}function u(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=Array.isArray(o)?o:[o];!i.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==a.message&&(u=[].concat(a.message));var h=u.map(YN(a,r));if(i.first&&h.length)return l[a.field]=1,n(h);if(s){if(a.required&&!t.value)return void 0!==a.message?h=[].concat(a.message).map(YN(a,r)):i.error&&(h=[i.error(a,GN(i.messages.required,a.field))]),n(h);var d={};a.defaultField&&Object.keys(t.value).map((function(e){d[e]=a.defaultField})),d=Xt(Xt({},d),t.rule.fields);var f={};Object.keys(d).forEach((function(e){var t=d[e],n=Array.isArray(t)?t:[t];f[e]=n.map(c.bind(null,e))}));var p=new e(f);p.messages(i.messages),t.rule.options&&(t.rule.options.messages=i.messages,t.rule.options.error=i.error),p.validate(t.value,t.rule.options||i,(function(e){var t=[];h&&h.length&&t.push.apply(t,Wt(h)),e&&e.length&&t.push.apply(t,Wt(e)),n(t.length?t:null)}))}else n(h)}if(s=s&&(a.required||!a.required&&t.value),a.field=t.field,a.asyncValidator)o=a.asyncValidator(a,t.value,u,t.source,i);else if(a.validator){try{o=a.validator(a,t.value,u,t.source,i)}catch(e){var h,d;null===(h=(d=console).error)||void 0===h||h.call(d,e),i.suppressValidatorError||setTimeout((function(){throw e}),0),u(e.message)}!0===o?u():!1===o?u("function"==typeof a.message?a.message(a.fullField||a.field):a.message||"".concat(a.fullField||a.field," fails")):o instanceof Array?u(o):o instanceof Error&&u(o.message)}o&&o.then&&o.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){!function(e){var t,n,i=[],a={};for(var s=0;s<e.length;s++)t=e[s],n=void 0,Array.isArray(t)?i=(n=i).concat.apply(n,Wt(t)):i.push(t);i.length?(a=HN(i),o(i,a)):o(null,r)}(e)}),r)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!uD.hasOwnProperty(e.type))throw new Error(GN("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?uD.required:uD[this.getType(e)]||void 0}}]),e}();Ft(hD,"register",(function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");uD[e]=t})),Ft(hD,"warning",(function(){})),Ft(hD,"messages",jN),Ft(hD,"validators",uD);var dD="'${name}' is not a valid ${type}",fD={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:dD,method:dD,array:dD,object:dD,number:dD,date:dD,boolean:dD,integer:dD,float:dD,regexp:dD,email:dD,url:dD,hex:dD},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},pD=hD;function mD(e,t){return e.replace(/\\?\$\{\w+\}/g,(function(e){if(e.startsWith("\\"))return e.slice(1);var n=e.slice(2,-1);return t[n]}))}var gD="CODE_LOGIC_ERROR";function vD(e,t,n,r,i){return yD.apply(this,arguments)}function yD(){return yD=LN(ON().mark((function e(t,r,i,o,a){var s,l,c,u,h,d,f,p,m;return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(s=Xt({},i)).ruleIndex,pD.warning=function(){},s.validator&&(l=s.validator,s.validator=function(){try{return l.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(gD)}}),c=null,s&&"array"===s.type&&s.defaultField&&(c=s.defaultField,delete s.defaultField),u=new pD(Ft({},t,[s])),h=Uo(fD,o.validateMessages),u.messages(h),d=[],e.prev=10,e.next=13,Promise.resolve(u.validate(Ft({},t,r),Xt({},o)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),e.t0.errors&&(d=e.t0.errors.map((function(e,t){var r=e.message,i=r===gD?h.default:r;return n.isValidElement(i)?n.cloneElement(i,{key:"error_".concat(t)}):i})));case 18:if(d.length||!c){e.next=23;break}return e.next=21,Promise.all(r.map((function(e,n){return vD("".concat(t,".").concat(n),e,c,o,a)})));case 21:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Wt(e),Wt(t))}),[]));case 23:return p=Xt(Xt({},i),{},{name:t,enum:(i.enum||[]).join(", ")},a),m=d.map((function(e){return"string"==typeof e?mD(e,p):e})),e.abrupt("return",m);case 26:case"end":return e.stop()}}),e,null,[[10,15]])}))),yD.apply(this,arguments)}function bD(e,t,n,r,i,o){var a,s=e.join("."),l=n.map((function(e,t){var n=e.validator,r=Xt(Xt({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var i=!1,o=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){gn(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))}));i=o&&"function"==typeof o.then&&"function"==typeof o.catch,gn(i,"`callback` is deprecated. Please return a promise instead."),i&&o.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,i=t.warningOnly,o=t.ruleIndex;return!!n==!!i?r-o:n?1:-1}));if(!0===i)a=new Promise(function(){var e=LN(ON().mark((function e(n,i){var a,c,u;return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<l.length)){e.next=12;break}return c=l[a],e.next=5,vD(s,t,c,r,o);case 5:if(!(u=e.sent).length){e.next=9;break}return i([{errors:u,rule:c}]),e.abrupt("return");case 9:a+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=l.map((function(e){return vD(s,t,e,r,o).then((function(t){return{errors:t,rule:e}}))}));a=(i?function(e){return _D.apply(this,arguments)}(c):function(e){return xD.apply(this,arguments)}(c)).then((function(e){return Promise.reject(e)}))}return a.catch((function(e){return e})),a}function xD(){return(xD=LN(ON().mark((function e(t){return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Wt(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _D(){return(_D=LN(ON().mark((function e(t){var n;return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wD(e){return FN(e)}function SD(e,t){var n={};return t.forEach((function(t){var r=ko(e,t);n=No(n,t,r)})),n}function ED(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&e.some((function(e){return CD(t,e,n)}))}function CD(e,t){return!(!e||!t)&&!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&e.length!==t.length)&&t.every((function(t,n){return e[n]===t}))}function MD(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===zt(t.target)&&e in t.target?t.target[e]:t}function TD(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Wt(e.slice(0,n)),[i],Wt(e.slice(n,t)),Wt(e.slice(t+1,r))):o<0?[].concat(Wt(e.slice(0,t)),Wt(e.slice(t+1,n+1)),[i],Wt(e.slice(n+1,r))):e}var AD=["name"],PD=[];function RD(e,t,n,r,i,o){return"function"==typeof e?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var ID=function(e){Ra(r,e);var t=Na(r);function r(e){var i;return yn(this,r),Ft(ka(i=t.call(this,e)),"state",{resetCount:0}),Ft(ka(i),"cancelRegisterFunc",null),Ft(ka(i),"mounted",!1),Ft(ka(i),"touched",!1),Ft(ka(i),"dirty",!1),Ft(ka(i),"validatePromise",void 0),Ft(ka(i),"prevValidating",void 0),Ft(ka(i),"errors",PD),Ft(ka(i),"warnings",PD),Ft(ka(i),"cancelRegister",(function(){var e=i.props,t=e.preserve,n=e.isListField,r=e.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(n,t,wD(r)),i.cancelRegisterFunc=null})),Ft(ka(i),"getNamePath",(function(){var e=i.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Wt(void 0===n?[]:n),Wt(t)):[]})),Ft(ka(i),"getRules",(function(){var e=i.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(r):e}))})),Ft(ka(i),"refresh",(function(){i.mounted&&i.setState((function(e){return{resetCount:e.resetCount+1}}))})),Ft(ka(i),"metaCache",null),Ft(ka(i),"triggerMetaEvent",(function(e){var t=i.props.onMetaChange;if(t){var n=Xt(Xt({},i.getMeta()),{},{destroy:e});vn(i.metaCache,n)||t(n),i.metaCache=n}else i.metaCache=null})),Ft(ka(i),"onStoreChange",(function(e,t,n){var r=i.props,o=r.shouldUpdate,a=r.dependencies,s=void 0===a?[]:a,l=r.onReset,c=n.store,u=i.getNamePath(),h=i.getValue(e),d=i.getValue(c),f=t&&ED(t,u);switch("valueUpdate"!==n.type||"external"!==n.source||vn(h,d)||(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=PD,i.warnings=PD,i.triggerMetaEvent()),n.type){case"reset":if(!t||f)return i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=PD,i.warnings=PD,i.triggerMetaEvent(),null==l||l(),void i.refresh();break;case"remove":if(o&&RD(o,e,c,h,d,n))return void i.reRender();break;case"setField":var p=n.data;if(f)return"touched"in p&&(i.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(i.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(i.errors=p.errors||PD),"warnings"in p&&(i.warnings=p.warnings||PD),i.dirty=!0,i.triggerMetaEvent(),void i.reRender();if("value"in p&&ED(t,u,!0))return void i.reRender();if(o&&!u.length&&RD(o,e,c,h,d,n))return void i.reRender();break;case"dependenciesUpdate":if(s.map(wD).some((function(e){return ED(n.relatedFields,e)})))return void i.reRender();break;default:if(f||(!s.length||u.length||o)&&RD(o,e,c,h,d,n))return void i.reRender()}!0===o&&i.reRender()})),Ft(ka(i),"validateRules",(function(e){var t=i.getNamePath(),n=i.getValue(),r=e||{},o=r.triggerName,a=r.validateOnly,s=void 0!==a&&a,l=Promise.resolve().then(LN(ON().mark((function r(){var a,s,c,u,h,d,f;return ON().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.mounted){r.next=2;break}return r.abrupt("return",[]);case 2:if(a=i.props,s=a.validateFirst,c=void 0!==s&&s,u=a.messageVariables,h=a.validateDebounce,d=i.getRules(),o&&(d=d.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||FN(t).includes(o)}))),!h||!o){r.next=10;break}return r.next=8,new Promise((function(e){setTimeout(e,h)}));case 8:if(i.validatePromise===l){r.next=10;break}return r.abrupt("return",[]);case 10:return(f=bD(t,n,d,e,c,u)).catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PD;if(i.validatePromise===l){var t;i.validatePromise=null;var n=[],r=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,i=e.errors,o=void 0===i?PD:i;t?r.push.apply(r,Wt(o)):n.push.apply(n,Wt(o))})),i.errors=n,i.warnings=r,i.triggerMetaEvent(),i.reRender()}})),r.abrupt("return",f);case 13:case"end":return r.stop()}}),r)}))));return s||(i.validatePromise=l,i.dirty=!0,i.errors=PD,i.warnings=PD,i.triggerMetaEvent(),i.reRender()),l})),Ft(ka(i),"isFieldValidating",(function(){return!!i.validatePromise})),Ft(ka(i),"isFieldTouched",(function(){return i.touched})),Ft(ka(i),"isFieldDirty",(function(){return!(!i.dirty&&void 0===i.props.initialValue)||void 0!==(0,i.props.fieldContext.getInternalHooks(NN).getInitialValue)(i.getNamePath())})),Ft(ka(i),"getErrors",(function(){return i.errors})),Ft(ka(i),"getWarnings",(function(){return i.warnings})),Ft(ka(i),"isListField",(function(){return i.props.isListField})),Ft(ka(i),"isList",(function(){return i.props.isList})),Ft(ka(i),"isPreserve",(function(){return i.props.preserve})),Ft(ka(i),"getMeta",(function(){return i.prevValidating=i.isFieldValidating(),{touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:null===i.validatePromise}})),Ft(ka(i),"getOnlyChild",(function(e){if("function"==typeof e){var t=i.getMeta();return Xt(Xt({},i.getOnlyChild(e(i.getControlled(),t,i.props.fieldContext))),{},{isFunction:!0})}var r=oC(e);return 1===r.length&&n.isValidElement(r[0])?{child:r[0],isFunction:!1}:{child:r,isFunction:!1}})),Ft(ka(i),"getValue",(function(e){var t=i.props.fieldContext.getFieldsValue,n=i.getNamePath();return ko(e||t(!0),n)})),Ft(ka(i),"getControlled",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.props,n=t.name,r=t.trigger,o=t.validateTrigger,a=t.getValueFromEvent,s=t.normalize,l=t.valuePropName,c=t.getValueProps,u=t.fieldContext,h=void 0!==o?o:u.validateTrigger,d=i.getNamePath(),f=u.getInternalHooks,p=u.getFieldsValue,m=f(NN).dispatch,g=i.getValue(),v=c||function(e){return Ft({},l,e)},y=e[r],b=void 0!==n?v(g):{},x=Xt(Xt({},e),b);return x[r]=function(){var e;i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=a?a.apply(void 0,n):MD.apply(void 0,[l].concat(n)),s&&(e=s(e,g,p(!0))),e!==g&&m({type:"updateValue",namePath:d,value:e}),y&&y.apply(void 0,n)},FN(h||[]).forEach((function(e){var t=x[e];x[e]=function(){t&&t.apply(void 0,arguments);var n=i.props.rules;n&&n.length&&m({type:"validateField",namePath:d,triggerName:e})}})),x})),e.fieldContext&&(0,(0,e.fieldContext.getInternalHooks)(NN).initEntityValue)(ka(i)),i}return xn(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(NN).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,r=this.props.children,i=this.getOnlyChild(r),o=i.child;return i.isFunction?e=o:n.isValidElement(o)?e=n.cloneElement(o,this.getControlled(o.props)):(gn(!o,"`children` of Field is not validate ReactElement."),e=o),n.createElement(n.Fragment,{key:t},e)}}]),r}(n.Component);Ft(ID,"contextType",zN),Ft(ID,"defaultProps",{trigger:"onChange",valuePropName:"value"});const OD=function(e){var t,r=e.name,i=Ca(e,AD),o=n.useContext(zN),a=n.useContext(UN),s=void 0!==r?wD(r):void 0,l=null!==(t=i.isListField)&&void 0!==t?t:!!a,c="keep";return l||(c="_".concat((s||[]).join("_"))),n.createElement(ID,nr({key:c,name:s,isListField:l},i,{fieldContext:o}))};var kD="__@field_split__";function LD(e){return e.map((function(e){return"".concat(zt(e),":").concat(e)})).join(kD)}const ND=function(){function e(){yn(this,e),Ft(this,"kvs",new Map)}return xn(e,[{key:"set",value:function(e,t){this.kvs.set(LD(e),t)}},{key:"get",value:function(e){return this.kvs.get(LD(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(LD(e))}},{key:"map",value:function(e){return Wt(this.kvs.entries()).map((function(t){var n=Ht(t,2),r=n[0],i=n[1],o=r.split(kD);return e({key:o.map((function(e){var t=Ht(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}();var DD=["name"],zD=xn((function e(t){var n=this;yn(this,e),Ft(this,"formHooked",!1),Ft(this,"forceRootUpdate",void 0),Ft(this,"subscribable",!0),Ft(this,"store",{}),Ft(this,"fieldEntities",[]),Ft(this,"initialValues",{}),Ft(this,"callbacks",{}),Ft(this,"validateMessages",null),Ft(this,"preserve",null),Ft(this,"lastValidatePromise",null),Ft(this,"getForm",(function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}})),Ft(this,"getInternalHooks",(function(e){return e===NN?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(gn(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),Ft(this,"useSubscribe",(function(e){n.subscribable=e})),Ft(this,"prevWithoutPreserves",null),Ft(this,"setInitialValues",(function(e,t){if(n.initialValues=e||{},t){var r,i=Uo(e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;i=No(i,n,ko(e,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}})),Ft(this,"destroyForm",(function(e){if(e)n.updateStore({});else{var t=new ND;n.getFieldEntities(!0).forEach((function(e){n.isMergedPreserve(e.isPreserve())||t.set(e.getNamePath(),!0)})),n.prevWithoutPreserves=t}})),Ft(this,"getInitialValue",(function(e){var t=ko(n.initialValues,e);return e.length?Uo(t):t})),Ft(this,"setCallbacks",(function(e){n.callbacks=e})),Ft(this,"setValidateMessages",(function(e){n.validateMessages=e})),Ft(this,"setPreserve",(function(e){n.preserve=e})),Ft(this,"watchList",[]),Ft(this,"registerWatch",(function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}})),Ft(this,"notifyWatch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(t,r,e)}))}})),Ft(this,"timeoutId",null),Ft(this,"warningUnhooked",(function(){})),Ft(this,"updateStore",(function(e){n.store=e})),Ft(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities})),Ft(this,"getFieldsMap",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ND;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t})),Ft(this,"getFieldEntitiesForNamePathList",(function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=wD(e);return t.get(n)||{INVALIDATE_NAME_PATH:wD(e)}}))})),Ft(this,"getFieldsValue",(function(e,t){var r,i,o;if(n.warningUnhooked(),!0===e||Array.isArray(e)?(r=e,i=t):e&&"object"===zt(e)&&(o=e.strict,i=e.filter),!0===r&&!i)return n.store;var a=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),s=[];return a.forEach((function(e){var t,n,a,l,c="INVALIDATE_NAME_PATH"in e?e.INVALIDATE_NAME_PATH:e.getNamePath();if(o){if(null!==(a=(l=e).isList)&&void 0!==a&&a.call(l))return}else if(!r&&null!==(t=(n=e).isListField)&&void 0!==t&&t.call(n))return;if(i){var u="getMeta"in e?e.getMeta():null;i(u)&&s.push(c)}else s.push(c)})),SD(n.store,s.map(wD))})),Ft(this,"getFieldValue",(function(e){n.warningUnhooked();var t=wD(e);return ko(n.store,t)})),Ft(this,"getFieldsError",(function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:wD(e[n]),errors:[],warnings:[]}}))})),Ft(this,"getFieldError",(function(e){n.warningUnhooked();var t=wD(e);return n.getFieldsError([t])[0].errors})),Ft(this,"getFieldWarning",(function(e){n.warningUnhooked();var t=wD(e);return n.getFieldsError([t])[0].warnings})),Ft(this,"isFieldsTouched",(function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,o=t[0],a=t[1],s=!1;0===t.length?i=null:1===t.length?Array.isArray(o)?(i=o.map(wD),s=!1):(i=null,s=o):(i=o.map(wD),s=a);var l=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!i)return s?l.every((function(e){return c(e)||e.isList()})):l.some(c);var u=new ND;i.forEach((function(e){u.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&u.update(n,(function(t){return[].concat(Wt(t),[e])}))}))}));var h=function(e){return e.some(c)},d=u.map((function(e){return e.value}));return s?d.every(h):d.some(h)})),Ft(this,"isFieldTouched",(function(e){return n.warningUnhooked(),n.isFieldsTouched([e])})),Ft(this,"isFieldsValidating",(function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(wD);return t.some((function(e){var t=e.getNamePath();return ED(r,t)&&e.isFieldValidating()}))})),Ft(this,"isFieldValidating",(function(e){return n.warningUnhooked(),n.isFieldsValidating([e])})),Ft(this,"resetWithFieldInitialValue",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new ND,i=n.getFieldEntities(!0);i.forEach((function(e){var t=e.props.initialValue,n=e.getNamePath();if(void 0!==t){var i=r.get(n)||new Set;i.add({entity:e,value:t}),r.set(n,i)}})),t.entities?e=t.entities:t.namePathList?(e=[],t.namePathList.forEach((function(t){var n,i=r.get(t);i&&(n=e).push.apply(n,Wt(Wt(i).map((function(e){return e.entity}))))}))):e=i,e.forEach((function(e){if(void 0!==e.props.initialValue){var i=e.getNamePath();if(void 0!==n.getInitialValue(i))gn(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var o=r.get(i);if(o&&o.size>1)gn(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var a=n.getFieldValue(i);e.isListField()||t.skipExist&&void 0!==a||n.updateStore(No(n.store,i,Wt(o)[0].value))}}}}))})),Ft(this,"resetFields",(function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(Uo(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(wD);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(No(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)})),Ft(this,"setFields",(function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var i=e.name,o=Ca(e,DD),a=wD(i);r.push(a),"value"in o&&n.updateStore(No(n.store,a,o.value)),n.notifyObservers(t,[a],{type:"setField",data:e})})),n.notifyWatch(r)})),Ft(this,"getFields",(function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=Xt(Xt({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))})),Ft(this,"initEntityValue",(function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===ko(n.store,r)&&n.updateStore(No(n.store,r,t))}})),Ft(this,"isMergedPreserve",(function(e){var t=void 0!==e?e:n.preserve;return null==t||t})),Ft(this,"registerField",(function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(i)&&(!r||o.length>1)){var a=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==a&&n.fieldEntities.every((function(e){return!CD(e.getNamePath(),t)}))){var s=n.store;n.updateStore(No(s,t,a,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}})),Ft(this,"dispatch",(function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,o=e.triggerName;n.validateFields([i],{triggerName:o})}})),Ft(this,"notifyObservers",(function(e,t,r){if(n.subscribable){var i=Xt(Xt({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,i)}))}else n.forceRootUpdate()})),Ft(this,"triggerDependenciesUpdate",(function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Wt(r))}),r})),Ft(this,"updateValue",(function(e,t){var r=wD(e),i=n.store;n.updateStore(No(n.store,r,t)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var o=n.triggerDependenciesUpdate(i,r),a=n.callbacks.onValuesChange;a&&a(SD(n.store,[r]),n.getFieldsValue()),n.triggerOnFieldsChange([r].concat(Wt(o)))})),Ft(this,"setFieldsValue",(function(e){n.warningUnhooked();var t=n.store;if(e){var r=Uo(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()})),Ft(this,"setFieldValue",(function(e,t){n.setFields([{name:e,value:t}])})),Ft(this,"getDependencyChildrenFields",(function(e){var t=new Set,r=[],i=new ND;return n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=wD(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))})),function e(n){(i.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))}(e),r})),Ft(this,"triggerOnFieldsChange",(function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var o=new ND;t.forEach((function(e){var t=e.name,n=e.errors;o.set(t,n)})),i.forEach((function(e){e.errors=o.get(e.name)||e.errors}))}var a=i.filter((function(t){var n=t.name;return ED(e,n)}));a.length&&r(a,i)}})),Ft(this,"validateFields",(function(e,t){var r,i;n.warningUnhooked(),Array.isArray(e)||"string"==typeof e||"string"==typeof t?(r=e,i=t):i=e;var o=!!r,a=o?r.map(wD):[],s=[],l=String(Date.now()),c=new Set,u=i||{},h=u.recursive,d=u.dirty;n.getFieldEntities(!0).forEach((function(e){if(o||a.push(e.getNamePath()),e.props.rules&&e.props.rules.length&&(!d||e.isFieldDirty())){var t=e.getNamePath();if(c.add(t.join(l)),!o||ED(a,t,h)){var r=e.validateRules(Xt({validateMessages:Xt(Xt({},fD),n.validateMessages)},i));s.push(r.then((function(){return{name:t,errors:[],warnings:[]}})).catch((function(e){var n,r=[],i=[];return null===(n=e.forEach)||void 0===n||n.call(e,(function(e){var t=e.rule.warningOnly,n=e.errors;t?i.push.apply(i,Wt(n)):r.push.apply(r,Wt(n))})),r.length?Promise.reject({name:t,errors:r,warnings:i}):{name:t,errors:r,warnings:i}})))}}}));var f=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,o){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&o(r),i(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=f,f.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var p=f.then((function(){return n.lastValidatePromise===f?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:t,outOfDate:n.lastValidatePromise!==f})}));p.catch((function(e){return e}));var m=a.filter((function(e){return c.has(e.join(l))}));return n.triggerOnFieldsChange(m),p})),Ft(this,"submit",(function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))})),this.forceRootUpdate=t}));const UD=function(e){var t=n.useRef(),r=Ht(n.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var i=new zD((function(){r({})}));t.current=i.getForm()}return[t.current]};var FD=n.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}});const BD=FD;var jD=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"];const VD=function(e,t){var r=e.name,i=e.initialValues,o=e.fields,a=e.form,s=e.preserve,l=e.children,c=e.component,u=void 0===c?"form":c,h=e.validateMessages,d=e.validateTrigger,f=void 0===d?"onChange":d,p=e.onValuesChange,m=e.onFieldsChange,g=e.onFinish,v=e.onFinishFailed,y=e.clearOnDestroy,b=Ca(e,jD),x=n.useRef(null),_=n.useContext(BD),w=Ht(UD(a),1)[0],S=w.getInternalHooks(NN),E=S.useSubscribe,C=S.setInitialValues,M=S.setCallbacks,T=S.setValidateMessages,A=S.setPreserve,P=S.destroyForm;n.useImperativeHandle(t,(function(){return Xt(Xt({},w),{},{nativeElement:x.current})})),n.useEffect((function(){return _.registerForm(r,w),function(){_.unregisterForm(r)}}),[_,w,r]),T(Xt(Xt({},_.validateMessages),h)),M({onValuesChange:p,onFieldsChange:function(e){if(_.triggerFormChange(r,e),m){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];m.apply(void 0,[e].concat(n))}},onFinish:function(e){_.triggerFormFinish(r,e),g&&g(e)},onFinishFailed:v}),A(s);var R,I=n.useRef(null);C(i,!I.current),I.current||(I.current=!0),n.useEffect((function(){return function(){return P(y)}}),[]);var O="function"==typeof l;R=O?l(w.getFieldsValue(!0),w):l,E(!O);var k=n.useRef();n.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==zt(e)||"object"!==zt(t))return!1;var n=Object.keys(e),r=Object.keys(t);return Wt(new Set([].concat(n,r))).every((function(n){var r=e[n],i=t[n];return"function"==typeof r&&"function"==typeof i||r===i}))})(k.current||[],o||[])||w.setFields(o||[]),k.current=o}),[o,w]);var L=n.useMemo((function(){return Xt(Xt({},w),{},{validateTrigger:f})}),[w,f]),N=n.createElement(UN.Provider,{value:null},n.createElement(zN.Provider,{value:L},R));return!1===u?N:n.createElement(u,nr({},b,{ref:x,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),w.submit()},onReset:function(e){var t;e.preventDefault(),w.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),N)};function $D(e){try{return JSON.stringify(e)}catch(e){return Math.random()}}var HD=n.forwardRef(VD);HD.FormProvider=function(e){var t=e.validateMessages,r=e.onFormChange,i=e.onFormFinish,o=e.children,a=n.useContext(FD),s=n.useRef({});return n.createElement(FD.Provider,{value:Xt(Xt({},a),{},{validateMessages:Xt(Xt({},a.validateMessages),t),triggerFormChange:function(e,t){r&&r(e,{changedFields:t,forms:s.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){i&&i(e,{values:t,forms:s.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=Xt(Xt({},s.current),{},Ft({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=Xt({},s.current);delete t[e],s.current=t,a.unregisterForm(e)}})},o)},HD.Field=OD,HD.List=function(e){var t=e.name,r=e.initialValue,i=e.children,o=e.rules,a=e.validateTrigger,s=e.isListField,l=n.useContext(zN),c=n.useContext(UN),u=n.useRef({keys:[],id:0}).current,h=n.useMemo((function(){var e=wD(l.prefixName)||[];return[].concat(Wt(e),Wt(wD(t)))}),[l.prefixName,t]),d=n.useMemo((function(){return Xt(Xt({},l),{},{prefixName:h})}),[l,h]),f=n.useMemo((function(){return{getKey:function(e){var t=h.length,n=e[t];return[u.keys[n],e.slice(t+1)]}}}),[h]);return"function"!=typeof i?(gn(!1,"Form.List only accepts function as children."),null):n.createElement(UN.Provider,{value:f},n.createElement(zN.Provider,{value:d},n.createElement(OD,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:a,initialValue:r,isList:!0,isListField:null!=s?s:!!c},(function(e,t){var n=e.value,r=void 0===n?[]:n,o=e.onChange,a=l.getFieldValue,s=function(){return a(h||[])||[]},c={add:function(e,t){var n=s();t>=0&&t<=n.length?(u.keys=[].concat(Wt(u.keys.slice(0,t)),[u.id],Wt(u.keys.slice(t))),o([].concat(Wt(n.slice(0,t)),[e],Wt(n.slice(t))))):(u.keys=[].concat(Wt(u.keys),[u.id]),o([].concat(Wt(n),[e]))),u.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(u.keys=u.keys.filter((function(e,t){return!n.has(t)})),o(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(u.keys=TD(u.keys,e,t),o(TD(n,e,t)))}}},d=r||[];return Array.isArray(d)||(d=[]),i(d.map((function(e,t){var n=u.keys[t];return void 0===n&&(u.keys[t]=u.id,n=u.keys[t],u.id+=1),{name:t,key:n,isListField:!0}})),c,t)}))))},HD.useForm=UD,HD.useWatch=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=void 0===o?{}:o,s=function(e){return e&&!!e._init}(a)?{form:a}:a,l=s.form,c=Ht((0,n.useState)(),2),u=c[0],h=c[1],d=(0,n.useMemo)((function(){return $D(u)}),[u]),f=(0,n.useRef)(d);f.current=d;var p=(0,n.useContext)(zN),m=l||p,g=m&&m._init,v=wD(i),y=(0,n.useRef)(v);return y.current=v,(0,n.useEffect)((function(){if(g){var e=m.getFieldsValue,t=(0,m.getInternalHooks)(NN).registerWatch,n=function(e,t){var n=s.preserve?t:e;return"function"==typeof i?i(n):ko(n,y.current)},r=t((function(e,t){var r=n(e,t),i=$D(r);f.current!==i&&(f.current=i,h(r))})),o=n(e(),e(!0));return u!==o&&h(o),r}}),[g]),u};const GD=n.createContext({}),WD=e=>{let{children:t,status:r,override:i}=e;const o=(0,n.useContext)(GD),a=(0,n.useMemo)((()=>{const e=Object.assign({},o);return i&&delete e.isFormItemInput,r&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[r,i,o]);return n.createElement(GD.Provider,{value:a},t)},qD=(0,n.createContext)(void 0),XD=e=>{const t=n.useContext(da);return n.useMemo((()=>e?"string"==typeof e?null!=e?e:t:e instanceof Function?e(t):t:t),[e,t])},YD=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},KD=e=>{const{componentCls:t,antCls:n}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"},[`${t}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},ZD=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},JD=YC("Space",(e=>{const t=$C(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[KD(t),ZD(t),YD(t)]}),(()=>({})),{resetStyle:!1});var QD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ez=n.createContext(null),tz=(e,t)=>{const r=n.useContext(ez),i=n.useMemo((()=>{if(!r)return"";const{compactDirection:n,isFirstItem:i,isLastItem:o}=r,a="vertical"===n?"-vertical-":"-";return va()(`${e}-compact${a}item`,{[`${e}-compact${a}first-item`]:i,[`${e}-compact${a}last-item`]:o,[`${e}-compact${a}item-rtl`]:"rtl"===t})}),[e,t,r]);return{compactSize:null==r?void 0:r.compactSize,compactDirection:null==r?void 0:r.compactDirection,compactItemClassnames:i}},nz=e=>{let{children:t}=e;return n.createElement(ez.Provider,{value:null},t)},rz=e=>{var{children:t}=e,r=QD(e,["children"]);return n.createElement(ez.Provider,{value:r},t)},iz=e=>{const{space:t,form:r,children:i}=e;if(null==i)return null;let o=i;return r&&(o=n.createElement(WD,{override:!0,status:!0},o)),t&&(o=n.createElement(nz,null,o)),o},oz=n.createContext(void 0),az=100,sz={Modal:az,Drawer:az,Popover:az,Popconfirm:az,Tooltip:az,Tour:az,FloatButton:az},lz={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1},cz=(e,t)=>{const[,r]=Co(),i=n.useContext(oz);let o;if(void 0!==t)o=[t,t];else{let n=null!=i?i:0;n+=e in sz?(i?0:r.zIndexPopupBase)+sz[e]:lz[e],o=[void 0===i?t:n,n]}return o},uz=()=>({height:0,opacity:0}),hz=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},dz=e=>({height:e?e.offsetHeight:0}),fz=(e,t)=>!0===(null==t?void 0:t.deadline)||"height"===t.propertyName,pz=(e,t,n)=>void 0!==n?n:`${e}-${t}`,mz=function(){return{motionName:`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta}-motion-collapse`,onAppearStart:uz,onEnterStart:uz,onAppearActive:hz,onEnterActive:hz,onLeaveStart:dz,onLeaveActive:uz,onAppearEnd:fz,onEnterEnd:fz,onLeaveEnd:fz,motionDeadline:500}};function gz(e){const{sizePopupArrow:t,borderRadiusXS:n,borderRadiusOuter:r}=e,i=t/2,o=i,a=1*r/Math.sqrt(2),s=i-r*(1-1/Math.sqrt(2)),l=i-n*(1/Math.sqrt(2)),c=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),u=2*i-l,h=c,d=2*i-a,f=s,p=2*i-0,m=o,g=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),v=r*(Math.sqrt(2)-1);return{arrowShadowWidth:g,arrowPath:`path('M 0 ${o} A ${r} ${r} 0 0 0 ${a} ${s} L ${l} ${c} A ${n} ${n} 0 0 1 ${u} ${h} L ${d} ${f} A ${r} ${r} 0 0 0 ${p} ${m} Z')`,arrowPolygon:`polygon(${v}px 100%, 50% ${v}px, ${2*i-v}px 100%, ${v}px 100%)`}}const vz=(e,t,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:o,arrowShadowWidth:a,borderRadiusXS:s,calc:l}=e;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:l(r).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Un(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}};function yz(e){const{contentRadius:t,limitVerticalRadius:n}=e,r=t>12?t+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?8:r}}function bz(e,t){return e?t:{}}function xz(e,t,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:a}=e,{arrowDistance:s=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},vz(e,t,i)),{"&:before":{background:t}})]},bz(!!l.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Un(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),bz(!!l.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Un(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),bz(!!l.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:o},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:o}})),bz(!!l.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:o},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:o}}))}}const _z={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},wz={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Sz=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Ez(e){const{arrowWidth:t,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o,visibleFirst:a}=e,s=t/2,l={};return Object.keys(_z).forEach((e=>{const c=r&&wz[e]||_z[e],u=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(l[e]=u,Sz.has(e)&&(u.autoArrow=!1),e){case"top":case"topLeft":case"topRight":u.offset[1]=-s-i;break;case"bottom":case"bottomLeft":case"bottomRight":u.offset[1]=s+i;break;case"left":case"leftTop":case"leftBottom":u.offset[0]=-s-i;break;case"right":case"rightTop":case"rightBottom":u.offset[0]=s+i}const h=yz({contentRadius:o,limitVerticalRadius:!0});if(r)switch(e){case"topLeft":case"bottomLeft":u.offset[0]=-h.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":u.offset[0]=h.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":u.offset[1]=2*-h.arrowOffsetHorizontal+s;break;case"leftBottom":case"rightBottom":u.offset[1]=2*h.arrowOffsetHorizontal-s}u.overflow=function(e,t,n,r){if(!1===r)return{adjustX:!1,adjustY:!1};const i=r&&"object"==typeof r?r:{},o={};switch(e){case"top":case"bottom":o.shiftX=2*t.arrowOffsetHorizontal+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=2*t.arrowOffsetVertical+n,o.shiftX=!0,o.adjustX=!0}const a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}(e,h,t,n),a&&(u.htmlRegion="visibleFirst")})),l}function Cz(e){return e&&n.isValidElement(e)&&e.type===n.Fragment}const Mz=(e,t,r)=>n.isValidElement(e)?n.cloneElement(e,"function"==typeof r?r(e.props||{}):r):t;function Tz(e,t){return Mz(e,e,t)}const Az=e=>({animationDuration:e,animationFillMode:"both"}),Pz=e=>({animationDuration:e,animationFillMode:"both"}),Rz=function(e,t,n,r){const i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return{[`\n      ${i}${e}-enter,\n      ${i}${e}-appear\n    `]:Object.assign(Object.assign({},Az(r)),{animationPlayState:"paused"}),[`${i}${e}-leave`]:Object.assign(Object.assign({},Pz(r)),{animationPlayState:"paused"}),[`\n      ${i}${e}-enter${e}-enter-active,\n      ${i}${e}-appear${e}-appear-active\n    `]:{animationName:t,animationPlayState:"running"},[`${i}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Iz=new ei("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Oz=new ei("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),kz=new ei("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Lz=new ei("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Nz=new ei("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Dz=new ei("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),zz={zoom:{inKeyframes:Iz,outKeyframes:Oz},"zoom-big":{inKeyframes:kz,outKeyframes:Lz},"zoom-big-fast":{inKeyframes:kz,outKeyframes:Lz},"zoom-left":{inKeyframes:new ei("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new ei("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new ei("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new ei("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:Nz,outKeyframes:Dz},"zoom-down":{inKeyframes:new ei("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new ei("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},Uz=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=zz[t];return[Rz(r,i,o,"zoom-big-fast"===t?e.motionDurationFast:e.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Fz=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Bz(e,t){return Fz.reduce(((n,r)=>{const i=e[`${r}1`],o=e[`${r}3`],a=e[`${r}6`],s=e[`${r}7`];return Object.assign(Object.assign({},n),t(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:s}))}),{})}const jz=e=>{const{componentCls:t,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:i,tooltipBorderRadius:o,zIndexPopup:a,controlHeight:s,boxShadowSecondary:l,paddingSM:c,paddingXS:u}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),{position:"absolute",zIndex:a,display:"block",width:"max-content",maxWidth:n,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${t}-inner`]:{minWidth:"1em",minHeight:s,padding:`${Un(e.calc(c).div(2).equal())} ${Un(u)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:o,boxShadow:l,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:e.min(o,8)}},[`${t}-content`]:{position:"relative"}}),Bz(e,((e,n)=>{let{darkColor:r}=n;return{[`&${t}-${e}`]:{[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{"--antd-arrow-background-color":r}}}}))),{"&-rtl":{direction:"rtl"}})},xz(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},Vz=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},yz({contentRadius:e.borderRadius,limitVerticalRadius:!0})),gz($C(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),$z=function(e){return YC("Tooltip",(e=>{const{borderRadius:t,colorTextLightSolid:n,colorBgSpotlight:r}=e,i=$C(e,{tooltipMaxWidth:250,tooltipColor:n,tooltipBorderRadius:t,tooltipBg:r});return[jz(i),Uz(e,"zoom-big-fast")]}),Vz,{resetStyle:!1,injectStyle:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]})(e)},Hz=Fz.map((e=>`${e}-inverse`));function Gz(e,t){const n=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?Fz.includes(e):[].concat(Wt(Hz),Wt(Fz)).includes(e)}(t),r=va()({[`${e}-${t}`]:t&&n}),i={},o={};return t&&!n&&(i.background=t,o["--antd-arrow-background-color"]=t),{className:r,overlayStyle:i,arrowStyle:o}}const Wz=n.forwardRef(((e,t)=>{var r,i;const{prefixCls:o,openClassName:a,getTooltipContainer:s,overlayClassName:l,color:c,overlayInnerStyle:u,children:h,afterOpenChange:d,afterVisibleChange:f,destroyTooltipOnHide:p,arrow:m=!0,title:g,overlay:v,builtinPlacements:y,arrowPointAtCenter:b=!1,autoAdjustOverflow:x=!0}=e,_=!!m,[,w]=Co(),{getPopupContainer:S,getPrefixCls:E,direction:C}=n.useContext(ia),M=jo(),T=n.useRef(null),A=()=>{var e;null===(e=T.current)||void 0===e||e.forceAlign()};n.useImperativeHandle(t,(()=>{var e;return{forceAlign:A,forcePopupAlign:()=>{M.deprecated(!1,"forcePopupAlign","forceAlign"),A()},nativeElement:null===(e=T.current)||void 0===e?void 0:e.nativeElement}}));const[P,R]=Ba(!1,{value:null!==(r=e.open)&&void 0!==r?r:e.visible,defaultValue:null!==(i=e.defaultOpen)&&void 0!==i?i:e.defaultVisible}),I=!g&&!v&&0!==g,O=n.useMemo((()=>{var e,t;let n=b;return"object"==typeof m&&(n=null!==(t=null!==(e=m.pointAtCenter)&&void 0!==e?e:m.arrowPointAtCenter)&&void 0!==t?t:b),y||Ez({arrowPointAtCenter:n,autoAdjustOverflow:x,arrowWidth:_?w.sizePopupArrow:0,borderRadius:w.borderRadius,offset:w.marginXXS,visibleFirst:!0})}),[b,m,y,w]),k=n.useMemo((()=>0===g?g:v||g||""),[v,g]),L=n.createElement(iz,{space:!0},"function"==typeof k?k():k),{getPopupContainer:N,placement:D="top",mouseEnterDelay:z=.1,mouseLeaveDelay:U=.1,overlayStyle:F,rootClassName:B}=e,j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),V=E("tooltip",o),$=E(),H=e["data-popover-inject"];let G=P;"open"in e||"visible"in e||!I||(G=!1);const W=n.isValidElement(h)&&!Cz(h)?h:n.createElement("span",null,h),q=W.props,X=q.className&&"string"!=typeof q.className?q.className:va()(q.className,a||`${V}-open`),[Y,K,Z]=$z(V,!H),J=Gz(V,c),Q=J.arrowStyle,ee=Object.assign(Object.assign({},u),J.overlayStyle),te=va()(l,{[`${V}-rtl`]:"rtl"===C},J.className,B,K,Z),[ne,re]=cz("Tooltip",j.zIndex),ie=n.createElement(IN,Object.assign({},j,{zIndex:ne,showArrow:_,placement:D,mouseEnterDelay:z,mouseLeaveDelay:U,prefixCls:V,overlayClassName:te,overlayStyle:Object.assign(Object.assign({},Q),F),getTooltipContainer:N||s||S,ref:T,builtinPlacements:O,overlay:L,visible:G,onVisibleChange:t=>{var n,r;R(!I&&t),I||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t))},afterVisibleChange:null!=d?d:f,overlayInnerStyle:ee,arrowContent:n.createElement("span",{className:`${V}-arrow-content`}),motion:{motionName:pz($,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!p}),G?Tz(W,{className:X}):W);return Y(n.createElement(oz.Provider,{value:re},ie))}));Wz._InternalPanelDoNotUseOrYouWillBeFired=e=>{const{prefixCls:t,className:r,placement:i="top",title:o,color:a,overlayInnerStyle:s}=e,{getPrefixCls:l}=n.useContext(ia),c=l("tooltip",t),[u,h,d]=$z(c),f=Gz(c,a),p=f.arrowStyle,m=Object.assign(Object.assign({},s),f.overlayStyle),g=va()(h,d,c,`${c}-pure`,`${c}-placement-${i}`,r,f.className);return u(n.createElement("div",{className:g,style:p},n.createElement("div",{className:`${c}-arrow`}),n.createElement(pL,Object.assign({},e,{className:h,prefixCls:c,overlayInnerStyle:m}),o)))};const qz=Wz,Xz=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Yz=KC("Wave",(e=>[Xz(e)])),Kz=`${ta}-wave-target`;var Zz,Jz=Xt({},s),Qz=Jz.version,eU=Jz.render,tU=Jz.unmountComponentAtNode;try{Number((Qz||"").split(".")[0])>=18&&(Zz=Jz.createRoot)}catch(yce){}function nU(e){var t=Jz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===zt(t)&&(t.usingClientEntryPoint=e)}var rU="__rc_react_root__";function iU(e,t){Zz?function(e,t){nU(!0);var n=t[rU]||Zz(t);nU(!1),n.render(e),t[rU]=n}(e,t):function(e,t){eU(e,t)}(e,t)}function oU(e){return aU.apply(this,arguments)}function aU(){return(aU=LN(ON().mark((function e(t){return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[rU])||void 0===e||e.unmount(),delete t[rU]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sU(e){tU(e)}function lU(e){return cU.apply(this,arguments)}function cU(){return(cU=LN(ON().mark((function e(t){return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Zz){e.next=2;break}return e.abrupt("return",oU(t));case 2:sU(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uU(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}function hU(e){return Number.isNaN(e)?0:e}const dU=e=>{const{className:t,target:r,component:i}=e,o=n.useRef(null),[a,s]=n.useState(null),[l,c]=n.useState([]),[u,h]=n.useState(0),[d,f]=n.useState(0),[p,m]=n.useState(0),[g,v]=n.useState(0),[y,b]=n.useState(!1),x={left:u,top:d,width:p,height:g,borderRadius:l.map((e=>`${e}px`)).join(" ")};function _(){const e=getComputedStyle(r);s(function(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return uU(t)?t:uU(n)?n:uU(r)?r:null}(r));const t="static"===e.position,{borderLeftWidth:n,borderTopWidth:i}=e;h(t?r.offsetLeft:hU(-parseFloat(n))),f(t?r.offsetTop:hU(-parseFloat(i))),m(r.offsetWidth),v(r.offsetHeight);const{borderTopLeftRadius:o,borderTopRightRadius:a,borderBottomLeftRadius:l,borderBottomRightRadius:u}=e;c([o,a,u,l].map((e=>hU(parseFloat(e)))))}if(a&&(x["--wave-color"]=a),n.useEffect((()=>{if(r){const e=bs((()=>{_(),b(!0)}));let t;return"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(_),t.observe(r)),()=>{bs.cancel(e),null==t||t.disconnect()}}}),[]),!y)return null;const w=("Checkbox"===i||"Radio"===i)&&(null==r?void 0:r.classList.contains(Kz));return n.createElement(Ds,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(e,t)=>{var n;if(t.deadline||"opacity"===t.propertyName){const e=null===(n=o.current)||void 0===n?void 0:n.parentElement;lU(e).then((()=>{null==e||e.remove()}))}return!1}},((e,r)=>{let{className:i}=e;return n.createElement("div",{ref:wa(o,r),className:va()(t,i,{"wave-quick":w}),style:x})}))},fU=(e,t)=>{var r;const{component:i}=t;if("Checkbox"===i&&!(null===(r=e.querySelector("input"))||void 0===r?void 0:r.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",null==e||e.insertBefore(o,null==e?void 0:e.firstChild),iU(n.createElement(dU,Object.assign({},t,{target:e})),o)},pU=(e,t,r)=>{const{wave:i}=n.useContext(ia),[,o,a]=Co(),s=za((n=>{const s=e.current;if((null==i?void 0:i.disabled)||!s)return;const l=s.querySelector(`.${Kz}`)||s,{showEffect:c}=i||{};(c||fU)(l,{className:t,token:o,component:r,event:n,hashId:a})})),l=n.useRef();return e=>{bs.cancel(l.current),l.current=bs((()=>{s(e)}))}},mU=e=>{const{children:t,disabled:r,component:i}=e,{getPrefixCls:o}=(0,n.useContext)(ia),a=(0,n.useRef)(null),s=o("wave"),[,l]=Yz(s),c=pU(a,va()(s,l),i);return n.useEffect((()=>{const e=a.current;if(!e||1!==e.nodeType||r)return;const t=t=>{!uN(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||c(t)};return e.addEventListener("click",t,!0),()=>{e.removeEventListener("click",t,!0)}}),[r]),n.isValidElement(t)?Tz(t,{ref:Ea(t)?wa(t.ref,a):a}):null!=t?t:null};const gU=n.createContext(void 0),vU=/^[\u4E00-\u9FA5]{2}$/,yU=vU.test.bind(vU);function bU(e){return"danger"===e?{danger:!0}:{type:e}}function xU(e){return"string"==typeof e}function _U(e){return"text"===e||"link"===e}const wU=(0,n.forwardRef)(((e,t)=>{const{className:r,style:i,children:o,prefixCls:a}=e,s=va()(`${a}-icon`,r);return n.createElement("span",{ref:t,className:s,style:i},o)})),SU=(0,n.forwardRef)(((e,t)=>{const{prefixCls:r,className:i,style:o,iconClassName:a}=e,s=va()(`${r}-loading-icon`,i);return n.createElement(wU,{prefixCls:r,className:s,style:o,ref:t},n.createElement(sL,{className:a}))})),EU=()=>({width:0,opacity:0,transform:"scale(0)"}),CU=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),MU=e=>{const{prefixCls:t,loading:r,existIcon:i,className:o,style:a}=e,s=!!r;return i?n.createElement(SU,{prefixCls:t,className:o,style:a}):n.createElement(Ds,{visible:s,motionName:`${t}-loading-icon-motion`,motionLeave:s,removeOnLeave:!0,onAppearStart:EU,onAppearActive:CU,onEnterStart:EU,onEnterActive:CU,onLeaveStart:CU,onLeaveActive:EU},((e,r)=>{let{className:i,style:s}=e;return n.createElement(SU,{prefixCls:t,className:o,style:Object.assign(Object.assign({},a),s),ref:r,iconClassName:i})}))},TU=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),AU=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:o}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:n}},TU(`${t}-primary`,i),TU(`${t}-danger`,o)]}},PU=Math.round;function RU(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map((e=>parseFloat(e)));for(let e=0;e<3;e+=1)r[e]=t(r[e]||0,n[e]||"",e);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const IU=(e,t,n)=>0===n?e:e/100;function OU(e,t){const n=t||255;return e>n?n:e<0?0:e}class kU{constructor(e){function t(t){return t[0]in e&&t[1]in e&&t[2]in e}if(Ft(this,"isValid",!0),Ft(this,"r",0),Ft(this,"g",0),Ft(this,"b",0),Ft(this,"a",1),Ft(this,"_h",void 0),Ft(this,"_s",void 0),Ft(this,"_l",void 0),Ft(this,"_v",void 0),Ft(this,"_max",void 0),Ft(this,"_min",void 0),Ft(this,"_brightness",void 0),e)if("string"==typeof e){const n=e.trim();function r(e){return n.startsWith(e)}/^#?[A-F\d]{3,8}$/i.test(n)?this.fromHexString(n):r("rgb")?this.fromRgbString(n):r("hsl")?this.fromHslString(n):(r("hsv")||r("hsb"))&&this.fromHsvString(n)}else if(e instanceof kU)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=OU(e.r),this.g=OU(e.g),this.b=OU(e.b),this.a="number"==typeof e.a?OU(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else{if(!t("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e));this.fromHsv(e)}}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*e(this.r)+.7152*e(this.g)+.0722*e(this.b)}getHue(){if(void 0===this._h){const e=this.getMax()-this.getMin();this._h=0===e?0:PU(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(void 0===this._s){const e=this.getMax()-this.getMin();this._s=0===e?0:e/this.getMax()}return this._s}getLightness(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:n,l:r,a:this.a})}lighten(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:n,l:r,a:this.a})}mix(e,t=50){const n=this._c(e),r=t/100,i=e=>(n[e]-this[e])*r+this[e],o={r:PU(i("r")),g:PU(i("g")),b:PU(i("b")),a:PU(100*i("a"))/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),n=this.a+t.a*(1-this.a),r=e=>PU((this[e]*this.a+t[e]*t.a*(1-this.a))/n);return this._c({r:r("r"),g:r("g"),b:r("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=2===t.length?t:"0"+t;const n=(this.g||0).toString(16);e+=2===n.length?n:"0"+n;const r=(this.b||0).toString(16);if(e+=2===r.length?r:"0"+r,"number"==typeof this.a&&this.a>=0&&this.a<1){const t=PU(255*this.a).toString(16);e+=2===t.length?t:"0"+t}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=PU(100*this.getSaturation()),n=PU(100*this.getLightness());return 1!==this.a?`hsla(${e},${t}%,${n}%,${this.a})`:`hsl(${e},${t}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,n){const r=this.clone();return r[e]=OU(t,n),r}_c(e){return new this.constructor(e)}getMax(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function n(e,n){return parseInt(t[e]+t[n||e],16)}t.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=t[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=t[6]?n(6,7)/255:1)}fromHsl({h:e,s:t,l:n,a:r}){if(this._h=e%360,this._s=t,this._l=n,this.a="number"==typeof r?r:1,t<=0){const e=PU(255*n);this.r=e,this.g=e,this.b=e}let i=0,o=0,a=0;const s=e/60,l=(1-Math.abs(2*n-1))*t,c=l*(1-Math.abs(s%2-1));s>=0&&s<1?(i=l,o=c):s>=1&&s<2?(i=c,o=l):s>=2&&s<3?(o=l,a=c):s>=3&&s<4?(o=c,a=l):s>=4&&s<5?(i=c,a=l):s>=5&&s<6&&(i=l,a=c);const u=n-l/2;this.r=PU(255*(i+u)),this.g=PU(255*(o+u)),this.b=PU(255*(a+u))}fromHsv({h:e,s:t,v:n,a:r}){this._h=e%360,this._s=t,this._v=n,this.a="number"==typeof r?r:1;const i=PU(255*n);if(this.r=i,this.g=i,this.b=i,t<=0)return;const o=e/60,a=Math.floor(o),s=o-a,l=PU(n*(1-t)*255),c=PU(n*(1-t*s)*255),u=PU(n*(1-t*(1-s))*255);switch(a){case 0:this.g=u,this.b=l;break;case 1:this.r=c,this.b=l;break;case 2:this.r=l,this.b=u;break;case 3:this.r=l,this.g=c;break;case 4:this.r=u,this.g=l;break;default:this.g=l,this.b=c}}fromHsvString(e){const t=RU(e,IU);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=RU(e,IU);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=RU(e,((e,t)=>t.includes("%")?PU(e/100*255):e));this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var LU,NU=["b"],DU=["v"],zU=function(e){return Math.round(Number(e||0))},UU=function(e){Ra(n,e);var t=Na(n);function n(e){return yn(this,n),t.call(this,function(e){if(e instanceof kU)return e;if(e&&"object"===zt(e)&&"h"in e&&"b"in e){var t=e,n=t.b;return Xt(Xt({},Ca(t,NU)),{},{v:n})}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return xn(n,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=zU(100*e.s),n=zU(100*e.b),r=zU(e.h),i=e.a,o="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),a="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(i.toFixed(0===i?0:2),")");return 1===i?o:a}},{key:"toHsb",value:function(){var e=this.toHsv(),t=e.v;return Xt(Xt({},Ca(e,DU)),{},{b:t,a:this.a})}}]),n}(kU);(LU="#1677ff")instanceof UU||new UU(LU);let FU=function(){return xn((function e(t){var n;if(yn(this,e),this.cleared=!1,t instanceof e)return this.metaColor=t.metaColor.clone(),this.colors=null===(n=t.colors)||void 0===n?void 0:n.map((t=>({color:new e(t.color),percent:t.percent}))),void(this.cleared=t.cleared);const r=Array.isArray(t);r&&t.length?(this.colors=t.map((t=>{let{color:n,percent:r}=t;return{color:new e(n),percent:r}})),this.metaColor=new UU(this.colors[0].color.metaColor)):this.metaColor=new UU(r?"":t),(!t||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}),[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return e=this.toHexString(),t=this.metaColor.a<1,e?((e,t)=>(null==e?void 0:e.replace(/[^\w/]/g,"").slice(0,t?8:6))||"")(e,t):"";var e,t}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:e}=this;return e?`linear-gradient(90deg, ${e.map((e=>`${e.color.toRgbString()} ${e.percent}%`)).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!(!e||this.isGradient()!==e.isGradient())&&(this.isGradient()?this.colors.length===e.colors.length&&this.colors.every(((t,n)=>{const r=e.colors[n];return t.percent===r.percent&&t.color.equals(r.color)})):this.toHexString()===e.toHexString())}}])}();const BU=e=>{const{paddingInline:t,onlyIconSize:n,paddingBlock:r}=e;return $C(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},jU=e=>{var t,n,r,i,o,a;const s=null!==(t=e.contentFontSize)&&void 0!==t?t:e.fontSize,l=null!==(n=e.contentFontSizeSM)&&void 0!==n?n:e.fontSize,c=null!==(r=e.contentFontSizeLG)&&void 0!==r?r:e.fontSizeLG,u=null!==(i=e.contentLineHeight)&&void 0!==i?i:ao(s),h=null!==(o=e.contentLineHeightSM)&&void 0!==o?o:ao(l),d=null!==(a=e.contentLineHeightLG)&&void 0!==a?a:ao(c),f=((e,t)=>{const{r:n,g:r,b:i,a:o}=e.toRgb(),a=new UU(e.toRgbString()).onBackground(t).toHsv();return o<=.5?a.v>.5:.299*n+.587*r+.114*i>192})(new FU(e.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:f,contentFontSize:s,contentFontSizeSM:l,contentFontSizeLG:c,contentLineHeight:u,contentLineHeightSM:h,contentLineHeightLG:d,paddingBlock:Math.max((e.controlHeight-s*u)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-l*h)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-c*d)/2-e.lineWidth,0)}},VU=e=>{const{componentCls:t,iconCls:n,fontWeight:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Un(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},[`> span, ${t}-icon`]:{display:"inline-flex"},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},$s(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},$U=(e,t,n)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":n}}),HU=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),GU=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),WU=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),qU=(e,t,n,r,i,o,a,s)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},$U(e,Object.assign({background:t},a),Object.assign({background:t},s))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:o||void 0}})}),XU=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},WU(e))}),YU=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),KU=(e,t,n,r)=>{const i=r&&["link","text"].includes(r)?YU:XU;return Object.assign(Object.assign({},i(e)),$U(e.componentCls,t,n))},ZU=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:t,background:n},KU(e,r,i))}),JU=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:t,background:n},KU(e,r,i))}),QU=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),eF=(e,t,n,r)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:t},KU(e,n,r))}),tF=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-${n}`]:Object.assign({color:t,boxShadow:"none"},KU(e,r,i,n))}),nF=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},ZU(e,e.solidTextColor,e.colorBgSolid,{background:e.colorBgSolidHover},{background:e.colorBgSolidActive})),QU(e)),eF(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),tF(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),qU(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),rF=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},JU(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),QU(e)),eF(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),tF(e,e.colorLink,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),qU(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),iF=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},ZU(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),JU(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),QU(e)),eF(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),tF(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),tF(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),qU(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),oF=e=>{const{componentCls:t}=e;return{[`${t}-color-default`]:nF(e),[`${t}-color-primary`]:rF(e),[`${t}-color-dangerous`]:iF(e)}},aF=e=>Object.assign(Object.assign(Object.assign(Object.assign({},JU(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),tF(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),ZU(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),tF(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),sF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:i,lineHeight:o,borderRadius:a,buttonPaddingHorizontal:s,iconCls:l,buttonPaddingVertical:c,motionDurationSlow:u,motionEaseInOut:h,buttonIconOnlyFontSize:d,opacityLoading:f}=e;return[{[t]:{fontSize:i,lineHeight:o,height:r,padding:`${Un(c)} ${Un(s)}`,borderRadius:a,[`&${n}-icon-only`]:{width:r,paddingInline:0,[`&${n}-compact-item`]:{flex:"none"},[`&${n}-round`]:{width:"auto"},[l]:{fontSize:d}},[`&${n}-loading`]:{opacity:f,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${u} ${h}, opacity ${u} ${h}`}}},{[`${n}${n}-circle${t}`]:HU(e)},{[`${n}${n}-round${t}`]:GU(e)}]},lF=e=>{const t=$C(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return sF(t,e.componentCls)},cF=e=>{const t=$C(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return sF(t,`${e.componentCls}-sm`)},uF=e=>{const t=$C(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return sF(t,`${e.componentCls}-lg`)},hF=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},dF=YC("Button",(e=>{const t=BU(e);return[VU(t),lF(t),cF(t),uF(t),hF(t),oF(t),aF(t),AU(t)]}),jU,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function fF(e,t,n){const{focusElCls:r,focus:i,borderElCls:o}=n,a=o?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map((e=>`&:${e} ${a}`)).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function pF(e,t,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function mF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0};const{componentCls:n}=e,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},fF(e,r,t)),pF(n,r,t))}}function gF(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function vF(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},gF(e,t)),(n=e.componentCls,r=t,{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var n,r}const yF=e=>{const{componentCls:t,colorPrimaryHover:n,lineWidth:r,calc:i}=e,o=i(r).mul(-1).equal(),a=e=>({[`${t}-compact${e?"-vertical":""}-item${t}-primary:not([disabled])`]:{"& + &::before":{position:"absolute",top:e?o:0,insetInlineStart:e?0:o,backgroundColor:n,content:'""',width:e?"100%":r,height:e?r:"100%"}}});return Object.assign(Object.assign({},a()),a(!0))},bF=ZC(["Button","compact"],(e=>{const t=BU(e);return[mF(t),vF(t),yF(t)]}),jU);const xF={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},_F=n.forwardRef(((e,t)=>{var r,i,o,a;const{loading:s=!1,prefixCls:l,color:c,variant:u,type:h,danger:d=!1,shape:f="default",size:p,styles:m,disabled:g,className:v,rootClassName:y,children:b,icon:x,iconPosition:_="start",ghost:w=!1,block:S=!1,htmlType:E="button",classNames:C,style:M={},autoInsertSpace:T,autoFocus:A}=e,P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),R=h||"default",[I,O]=(0,n.useMemo)((()=>{if(c&&u)return[c,u];const e=xF[R]||[];return d?["danger",e[1]]:e}),[h,c,u,d]),k="danger"===I?"dangerous":I,{getPrefixCls:L,direction:N,button:D}=(0,n.useContext)(ia),z=null===(r=null!=T?T:null==D?void 0:D.autoInsertSpace)||void 0===r||r,U=L("btn",l),[F,B,j]=dF(U),V=(0,n.useContext)(ca),$=null!=g?g:V,H=(0,n.useContext)(gU),G=(0,n.useMemo)((()=>function(e){if("object"==typeof e&&e){let t=null==e?void 0:e.delay;return t=Number.isNaN(t)||"number"!=typeof t?0:t,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}(s)),[s]),[W,q]=(0,n.useState)(G.loading),[X,Y]=(0,n.useState)(!1),K=(0,n.useRef)(),Z=Sa(t,K),J=1===n.Children.count(b)&&!x&&!_U(O);(0,n.useEffect)((()=>{let e=null;return G.delay>0?e=setTimeout((()=>{e=null,q(!0)}),G.delay):q(G.loading),function(){e&&(clearTimeout(e),e=null)}}),[G]),(0,n.useEffect)((()=>{if(!K.current||!z)return;const e=K.current.textContent||"";J&&yU(e)?X||Y(!0):X&&Y(!1)})),(0,n.useEffect)((()=>{A&&K.current&&K.current.focus()}),[]);const Q=n.useCallback((t=>{var n;W||$?t.preventDefault():null===(n=e.onClick)||void 0===n||n.call(e,t)}),[e.onClick,W,$]),{compactSize:ee,compactItemClassnames:te}=tz(U,N),ne=XD((e=>{var t,n;return null!==(n=null!==(t=null!=p?p:ee)&&void 0!==t?t:H)&&void 0!==n?n:e})),re=ne&&null!==(i={large:"lg",small:"sm",middle:void 0}[ne])&&void 0!==i?i:"",ie=W?"loading":x,oe=rC(P,["navigate"]),ae=va()(U,B,j,{[`${U}-${f}`]:"default"!==f&&f,[`${U}-${R}`]:R,[`${U}-dangerous`]:d,[`${U}-color-${k}`]:k,[`${U}-variant-${O}`]:O,[`${U}-${re}`]:re,[`${U}-icon-only`]:!b&&0!==b&&!!ie,[`${U}-background-ghost`]:w&&!_U(O),[`${U}-loading`]:W,[`${U}-two-chinese-chars`]:X&&z&&!W,[`${U}-block`]:S,[`${U}-rtl`]:"rtl"===N,[`${U}-icon-end`]:"end"===_},te,v,y,null==D?void 0:D.className),se=Object.assign(Object.assign({},null==D?void 0:D.style),M),le=va()(null==C?void 0:C.icon,null===(o=null==D?void 0:D.classNames)||void 0===o?void 0:o.icon),ce=Object.assign(Object.assign({},(null==m?void 0:m.icon)||{}),(null===(a=null==D?void 0:D.styles)||void 0===a?void 0:a.icon)||{}),ue=x&&!W?n.createElement(wU,{prefixCls:U,className:le,style:ce},x):n.createElement(MU,{existIcon:!!x,prefixCls:U,loading:W}),he=b||0===b?function(e,t){let r=!1;const i=[];return n.Children.forEach(e,(e=>{const t=typeof e,n="string"===t||"number"===t;if(r&&n){const t=i.length-1,n=i[t];i[t]=`${n}${e}`}else i.push(e);r=n})),n.Children.map(i,(e=>function(e,t){if(null==e)return;const r=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&xU(e.type)&&yU(e.props.children)?Tz(e,{children:e.props.children.split("").join(r)}):xU(e)?yU(e)?n.createElement("span",null,e.split("").join(r)):n.createElement("span",null,e):Cz(e)?n.createElement("span",null,e):e}(e,t)))}(b,J&&z):null;if(void 0!==oe.href)return F(n.createElement("a",Object.assign({},oe,{className:va()(ae,{[`${U}-disabled`]:$}),href:$?void 0:oe.href,style:se,onClick:Q,ref:Z,tabIndex:$?-1:0}),ue,he));let de=n.createElement("button",Object.assign({},P,{type:E,className:ae,style:se,onClick:Q,disabled:$,ref:Z}),ue,he,te&&n.createElement(bF,{prefixCls:U}));return _U(O)||(de=n.createElement(mU,{component:"Button",disabled:W},de)),F(de)}));_F.Group=e=>{const{getPrefixCls:t,direction:r}=n.useContext(ia),{prefixCls:i,size:o,className:a}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","size","className"]),l=t("btn-group",i),[,,c]=Co();let u="";switch(o){case"large":u="lg";break;case"small":u="sm"}const h=va()(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:"rtl"===r},a,c);return n.createElement(gU.Provider,{value:o},n.createElement("div",Object.assign({},s,{className:h})))},_F.__ANT_BUTTON=!0;const wF=_F,SF={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"};var EF=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:SF}))};const CF=n.forwardRef(EF),MF={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};var TF=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:MF}))};const AF=n.forwardRef(TF);function PF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return RF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const IF=function(e){var t=e.value,r=e.step,i=void 0===r?1:r,o=e.precision,a=void 0===o?i:o,s=e.min,l=void 0===s?0:s,c=e.max,u=void 0===c?Number.MAX_SAFE_INTEGER:c,h=e.disabled,d=void 0!==h&&h,f=e.className,p=void 0===f?"":f,m=e.onChange,g=PF(n.useState(!1),2),v=g[0],y=PF(Zk(g[1],v),2),b=y[0],x=y[1],_=PF(n.useState(""),2),w=_[0],S=_[1],E=n.useRef(null),C=function(e){return Math.min(Math.max(e,l),u)},M=function(e){return C(Math.round(e/a)*a)},T=function(e){return!(isNaN(e)||e===t||d)},A=M(t),P=function(e){var t,n=C(A+(e?i:-i));T(n)&&(m(n),S(n.toString()),x(!0)),null===(t=E.current)||void 0===t||t.focus()},R="numinput"+(d?" numinput-disabled":"")+(p&&" ".concat(p));return n.createElement("div",{className:R,onKeyDown:function(e){var t=e.key;if(["Up","ArrowUp","Down","ArrowDown"].includes(t))P("Up"===t||"ArrowUp"===t),e.preventDefault();else if("Enter"===t){var n;null===(n=E.current)||void 0===n||n.blur()}}},n.createElement("input",{value:v?w:A,step:i,min:l,max:u,disabled:d,className:"numinput-input",autoComplete:"off",role:"spinbutton","aria-valuenow":A,"aria-valuemin":l,"aria-valuemax":u,ref:E,onChange:function(e){return function(e){S(e);var t=""===e?0:parseFloat(e),n=M(t);T(n)&&m(n)}(e.target.value)},onFocus:function(){b.current||(S(A.toString()),x(!0))},onBlur:function(){return x(!1)}}),n.createElement("div",{className:"numinput-controls"},n.createElement("div",{className:"numinput-controls-button numinput-controls-button-up",role:"button","aria-label":"Increase Value","aria-disabled":d,onClick:function(){return P(!0)}},n.createElement(CF,{className:"numinput-controls-button-icon"})),n.createElement("div",{className:"numinput-controls-button numinput-controls-button-down",role:"button","aria-label":"Decrease Value","aria-disabled":d,onClick:function(){return P(!1)}},n.createElement(AF,{className:"numinput-controls-button-icon"}))))};var OF=a(7057),kF=a.n(OF);function LF(e){return LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LF(e)}function NF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NF(Object(n),!0).forEach((function(t){zF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zF(e,t,n){return(t=function(e){var t=function(e){if("object"!=LF(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=LF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==LF(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var FF=n.memo(kF(),(function(e,t){return t.noUpdate}));const BF=function(e){var t,r,i=(t=n.useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,r)||function(e,t){if(e){if("string"==typeof e)return UF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UF(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=function(e,t){return function(){a(e),t&&t.apply(void 0,arguments)}},l=s(!0,e.onStart),c=s(!1,e.onEnd);return n.createElement(FF,DF(DF({},e),{},{noUpdate:o,onStart:l,onEnd:c}))};function jF(e){return jF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jF(e)}function VF(e,t,n){return(t=function(e){var t=function(e){if("object"!=jF(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jF(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return HF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var GF=["x","y","z"],WF=function(e){var t=e.label,r=e.vals,i=e.valsReadout,o=void 0===i?r:i,a=e.max,s=e.onSlide,l=e.onChange,c=void 0===l?s:l,u=e.onStart,h=e.onEnd,d=r.length>1,f=d?a:a-1;return n.createElement("span",{className:"axis-slider-container"},n.createElement("span",{className:"slider-name"},t),0===f?n.createElement("i",null,"No values to adjust"):n.createElement("span",{className:"axis-slider"},n.createElement(BF,{className:d?"":"slider-single-handle",connect:!0,range:{min:0,max:f},start:r,step:1,margin:1,behaviour:"drag",pips:{mode:"positions",values:[25,50,75],density:25,format:{to:function(){return""}}},format:{to:Math.round,from:parseInt},onSlide:s,onChange:c,onStart:u,onEnd:h})),f>0&&n.createElement("span",{className:"slider-values"},n.createElement(IF,{max:f,value:o[0],onChange:function(e){return null==c?void 0:c(d?[e,r[1]]:[e])}}),d&&n.createElement(n.Fragment,null," , ",n.createElement(IF,{max:f,value:o[1],onChange:function(e){return null==c?void 0:c([r[0],e])}}))," / ",a-1))},qF=function(e){var t=$F((0,n.useState)(e.val),2),r=t[0],i=t[1],o=$F((0,n.useState)(!1),2),a=o[0],s=o[1],l=(0,n.useCallback)((function(t){var n,r=$F(t,1)[0];return null===(n=e.onChange)||void 0===n?void 0:n.call(e,r)}),[e.onChange]),c=(0,n.useCallback)((function(e){var t=$F(e,1)[0];return i(t)}),[]),u=(0,n.useCallback)((function(){var t;i(e.val),s(!0),null===(t=e.onStart)||void 0===t||t.call(e)}),[e.onStart]),h=(0,n.useCallback)((function(){var t;s(!1),null===(t=e.onEnd)||void 0===t||t.call(e)}),[e.onEnd]);return n.createElement(n.Fragment,null,n.createElement(WF,{label:e.label,vals:[e.val],valsReadout:e.updateWhileSliding||!a?void 0:[r],max:e.max,onSlide:e.updateWhileSliding?l:c,onChange:e.updateWhileSliding?void 0:l,onStart:u,onEnd:h}),e.max>1&&n.createElement(qz,{placement:"top",title:"Play through sequence",trigger:["hover","focus"]},n.createElement(wF,{className:"slider-play-button",onClick:function(){return e.onTogglePlayback(!e.playing)},icon:e.playing?n.createElement(uL,null):n.createElement(fL,null),"aria-label":(e.playing?"Pause ":"Play ")+e.label})))};const XF=function(e){var t=Rk[e.mode],r=function(t){e.playControls.playHolding&&e.playingAxis===t||e.playControls.pause()};(0,n.useEffect)((function(){return e.playControls.pause()}),[e.mode,e.image]);var i,o,a,s=function(t,n){n?e.playControls.play(t):e.playControls.pause()};return n.createElement("div",{className:t?"clip-sliders clip-sliders-2d":"clip-sliders"},n.createElement("span",{className:"slider-group"},n.createElement("h4",{className:"slider-group-title"},"ROI"),n.createElement("span",{className:"slider-group-rows"},t?(i=t,o=e.numSlices[i],a=e.numSlicesLoaded[i],n.createElement("div",{key:i+o+a,className:"slider-row slider-".concat(i)},n.createElement(qF,{label:i.toUpperCase(),val:Math.round(e.slices[i]*o),max:o,onChange:function(t){return function(t,n){r(t),e.changeViewerSetting("slice",VF({},t,n/e.numSlices[t]))}(i,t)},onStart:function(){return e.playControls.startHold(i)},onEnd:function(){return e.playControls.endHold()},playing:e.playingAxis===i,onTogglePlayback:function(e){return s(i,e)},updateWhileSliding:o===a}))):GF.map((function(t){var i=e.numSlices[t];if(1===i)return null;var o=e.region[t];return n.createElement("div",{key:t+i+"3d",className:"slider-row slider-".concat(t)},n.createElement(WF,{label:t.toUpperCase(),vals:[Math.round(o[0]*i),Math.round(o[1]*i)],max:i,onSlide:function(n){return function(t,n,i){r(t);var o=e.changeViewerSetting,a=e.numSlices[t];o("region",VF({},t,[n/a,i/a]))}(t,n[0],n[1])},onStart:function(){return e.playControls.startHold(t)},onEnd:function(){return e.playControls.endHold()}}))})))),e.numTimesteps>1&&n.createElement("span",{className:"slider-group"},n.createElement("h4",{className:"slider-group-title"},"Time"),n.createElement("span",{className:"slider-group-rows"},n.createElement("div",{className:"slider-row slider-t"},n.createElement(qF,{label:"",val:e.time,max:e.numTimesteps,playing:"t"===e.playingAxis,onTogglePlayback:function(e){return s("t",e)},onChange:function(t){return function(t){r("t"),e.changeViewerSetting("time",t)}(t)},onStart:function(){return e.playControls.startHold("t")},onEnd:function(){return e.playControls.endHold()}})))))};var YF=n.createContext(null),KF=n.createContext({});const ZF=YF;var JF={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=JF.F1&&t<=JF.F12)return!1;switch(t){case JF.ALT:case JF.CAPS_LOCK:case JF.CONTEXT_MENU:case JF.CTRL:case JF.DOWN:case JF.END:case JF.ESC:case JF.HOME:case JF.INSERT:case JF.LEFT:case JF.MAC_FF_META:case JF.META:case JF.NUMLOCK:case JF.NUM_CENTER:case JF.PAGE_DOWN:case JF.PAGE_UP:case JF.PAUSE:case JF.PRINT_SCREEN:case JF.RIGHT:case JF.SHIFT:case JF.UP:case JF.WIN_KEY:case JF.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=JF.ZERO&&e<=JF.NINE)return!0;if(e>=JF.NUM_ZERO&&e<=JF.NUM_MULTIPLY)return!0;if(e>=JF.A&&e<=JF.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case JF.SPACE:case JF.QUESTION_MARK:case JF.NUM_PLUS:case JF.NUM_MINUS:case JF.NUM_PERIOD:case JF.NUM_DIVISION:case JF.SEMICOLON:case JF.DASH:case JF.EQUALS:case JF.COMMA:case JF.PERIOD:case JF.SLASH:case JF.APOSTROPHE:case JF.SINGLE_QUOTE:case JF.OPEN_SQUARE_BRACKET:case JF.BACKSLASH:case JF.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const QF=JF;var eB="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function tB(e,t){return 0===e.indexOf(t)}function nB(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Xt({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||tB(n,"aria-"))||t.data&&tB(n,"data-")||t.attr&&eB.includes(n))&&(r[n]=e[n])})),r}var rB=["prefixCls","className","containerRef"];const iB=function(e){var t=e.prefixCls,r=e.className,i=e.containerRef,o=Ca(e,rB),a=n.useContext(KF).panel,s=Sa(a,i);return n.createElement("div",nr({className:va()("".concat(t,"-content"),r),role:"dialog",ref:s},nB(e,{aria:!0}),{"aria-modal":"true"},o))};function oB(e){return"string"==typeof e&&String(Number(e))===e?(gn(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var aB={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function sB(e,t){var r,i,o,a=e.prefixCls,s=e.open,l=e.placement,c=e.inline,u=e.push,h=e.forceRender,d=e.autoFocus,f=e.keyboard,p=e.classNames,m=e.rootClassName,g=e.rootStyle,v=e.zIndex,y=e.className,b=e.id,x=e.style,_=e.motion,w=e.width,S=e.height,E=e.children,C=e.mask,M=e.maskClosable,T=e.maskMotion,A=e.maskClassName,P=e.maskStyle,R=e.afterOpenChange,I=e.onClose,O=e.onMouseEnter,k=e.onMouseOver,L=e.onMouseLeave,N=e.onClick,D=e.onKeyDown,z=e.onKeyUp,U=e.styles,F=e.drawerRender,B=n.useRef(),j=n.useRef(),V=n.useRef();n.useImperativeHandle(t,(function(){return B.current})),n.useEffect((function(){var e;s&&d&&(null===(e=B.current)||void 0===e||e.focus({preventScroll:!0}))}),[s]);var $=Ht(n.useState(!1),2),H=$[0],G=$[1],W=n.useContext(ZF),q=null!==(r=null!==(i=null===(o="boolean"==typeof u?u?{}:{distance:0}:u||{})||void 0===o?void 0:o.distance)&&void 0!==i?i:null==W?void 0:W.pushDistance)&&void 0!==r?r:180,X=n.useMemo((function(){return{pushDistance:q,push:function(){G(!0)},pull:function(){G(!1)}}}),[q]);n.useEffect((function(){var e,t;s?null==W||null===(e=W.push)||void 0===e||e.call(W):null==W||null===(t=W.pull)||void 0===t||t.call(W)}),[s]),n.useEffect((function(){return function(){var e;null==W||null===(e=W.pull)||void 0===e||e.call(W)}}),[]);var Y=C&&n.createElement(Ds,nr({key:"mask"},T,{visible:s}),(function(e,t){var r=e.className,i=e.style;return n.createElement("div",{className:va()("".concat(a,"-mask"),r,null==p?void 0:p.mask,A),style:Xt(Xt(Xt({},i),P),null==U?void 0:U.mask),onClick:M&&s?I:void 0,ref:t})})),K="function"==typeof _?_(l):_,Z={};if(H&&q)switch(l){case"top":Z.transform="translateY(".concat(q,"px)");break;case"bottom":Z.transform="translateY(".concat(-q,"px)");break;case"left":Z.transform="translateX(".concat(q,"px)");break;default:Z.transform="translateX(".concat(-q,"px)")}"left"===l||"right"===l?Z.width=oB(w):Z.height=oB(S);var J={onMouseEnter:O,onMouseOver:k,onMouseLeave:L,onClick:N,onKeyDown:D,onKeyUp:z},Q=n.createElement(Ds,nr({key:"panel"},K,{visible:s,forceRender:h,onVisibleChanged:function(e){null==R||R(e)},removeOnLeave:!1,leavedClassName:"".concat(a,"-content-wrapper-hidden")}),(function(t,r){var i=t.className,o=t.style,s=n.createElement(iB,nr({id:b,containerRef:r,prefixCls:a,className:va()(y,null==p?void 0:p.content),style:Xt(Xt({},x),null==U?void 0:U.content)},nB(e,{aria:!0}),J),E);return n.createElement("div",nr({className:va()("".concat(a,"-content-wrapper"),null==p?void 0:p.wrapper,i),style:Xt(Xt(Xt({},Z),o),null==U?void 0:U.wrapper)},nB(e,{data:!0})),F?F(s):s)})),ee=Xt({},g);return v&&(ee.zIndex=v),n.createElement(ZF.Provider,{value:X},n.createElement("div",{className:va()(a,"".concat(a,"-").concat(l),m,Ft(Ft({},"".concat(a,"-open"),s),"".concat(a,"-inline"),c)),style:ee,tabIndex:-1,ref:B,onKeyDown:function(e){var t=e.keyCode,n=e.shiftKey;switch(t){case QF.TAB:var r;if(t===QF.TAB)if(n||document.activeElement!==V.current){if(n&&document.activeElement===j.current){var i;null===(i=V.current)||void 0===i||i.focus({preventScroll:!0})}}else null===(r=j.current)||void 0===r||r.focus({preventScroll:!0});break;case QF.ESC:I&&f&&(e.stopPropagation(),I(e))}}},Y,n.createElement("div",{tabIndex:0,ref:j,style:aB,"aria-hidden":"true","data-sentinel":"start"}),Q,n.createElement("div",{tabIndex:0,ref:V,style:aB,"aria-hidden":"true","data-sentinel":"end"})))}const lB=n.forwardRef(sB),cB=function(e){var t=e.open,r=void 0!==t&&t,i=e.prefixCls,o=void 0===i?"rc-drawer":i,a=e.placement,s=void 0===a?"right":a,l=e.autoFocus,c=void 0===l||l,u=e.keyboard,h=void 0===u||u,d=e.width,f=void 0===d?378:d,p=e.mask,m=void 0===p||p,g=e.maskClosable,v=void 0===g||g,y=e.getContainer,b=e.forceRender,x=e.afterOpenChange,_=e.destroyOnClose,w=e.onMouseEnter,S=e.onMouseOver,E=e.onMouseLeave,C=e.onClick,M=e.onKeyDown,T=e.onKeyUp,A=e.panelRef,P=Ht(n.useState(!1),2),R=P[0],I=P[1],O=Ht(n.useState(!1),2),k=O[0],L=O[1];Wn((function(){L(!0)}),[]);var N=!!k&&r,D=n.useRef(),z=n.useRef();Wn((function(){N&&(z.current=document.activeElement)}),[N]);var U=n.useMemo((function(){return{panel:A}}),[A]);if(!b&&!R&&!N&&_)return null;var F={onMouseEnter:w,onMouseOver:S,onMouseLeave:E,onClick:C,onKeyDown:M,onKeyUp:T},B=Xt(Xt({},e),{},{open:N,prefixCls:o,placement:s,autoFocus:c,keyboard:h,width:f,mask:m,maskClosable:v,inline:!1===y,afterOpenChange:function(e){var t,n;I(e),null==x||x(e),e||!z.current||null!==(t=D.current)&&void 0!==t&&t.contains(z.current)||null===(n=z.current)||void 0===n||n.focus({preventScroll:!0})},ref:D},F);return n.createElement(KF.Provider,{value:U},n.createElement(wL,{open:N||b||R,autoDestroy:!1,getContainer:y,autoLock:m&&(N||R)},n.createElement(lB,B)))};function uB(){}const hB=n.createContext({add:uB,remove:uB});function dB(e){const t=n.useContext(hB),r=n.useRef();return za((n=>{if(n){const i=e?n.querySelector(e):n;t.add(i),r.current=i}else t.remove(r.current)}))}const fB={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var pB=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:fB}))};const mB=n.forwardRef(pB);function gB(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function vB(e){const{closable:t,closeIcon:r}=e||{};return n.useMemo((()=>{if(!t&&(!1===t||!1===r||null===r))return!1;if(void 0===t&&void 0===r)return null;let e={closeIcon:"boolean"!=typeof r&&null!==r?r:void 0};return t&&"object"==typeof t&&(e=Object.assign(Object.assign({},e),t)),e}),[t,r])}function yB(){const e={};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((t=>{t&&Object.keys(t).forEach((n=>{void 0!==t[n]&&(e[n]=t[n])}))})),e}const bB={};function xB(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bB;const i=vB(e),o=vB(t),a="boolean"!=typeof i&&!!(null==i?void 0:i.disabled),s=n.useMemo((()=>Object.assign({closeIcon:n.createElement(mB,null)},r)),[r]),l=n.useMemo((()=>!1!==i&&(i?yB(s,o,i):!1!==o&&(o?yB(s,o):!!s.closable&&s))),[i,o,s]);return n.useMemo((()=>{if(!1===l)return[!1,null,a];const{closeIconRender:e}=s,{closeIcon:t}=l;let r=t;if(null!=r){e&&(r=e(t));const i=nB(l,!0);Object.keys(i).length&&(r=n.isValidElement(r)?n.cloneElement(r,i):n.createElement("span",Object.assign({},i),r))}return[!0,r,a]}),[l,s])}const _B=e=>{const{prefixCls:t,className:r,style:i,size:o,shape:a}=e,s=va()({[`${t}-lg`]:"large"===o,[`${t}-sm`]:"small"===o}),l=va()({[`${t}-circle`]:"circle"===a,[`${t}-square`]:"square"===a,[`${t}-round`]:"round"===a}),c=n.useMemo((()=>"number"==typeof o?{width:o,height:o,lineHeight:`${o}px`}:{}),[o]);return n.createElement("span",{className:va()(t,s,l,r),style:Object.assign(Object.assign({},c),i)})},wB=new ei("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),SB=e=>({height:e,lineHeight:Un(e)}),EB=e=>Object.assign({width:e},SB(e)),CB=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:wB,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),MB=(e,t)=>Object.assign({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal()},SB(e)),TB=e=>{const{skeletonAvatarCls:t,gradientFromColor:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o}=e;return{[t]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},EB(r)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},EB(i)),[`${t}${t}-sm`]:Object.assign({},EB(o))}},AB=e=>{const{controlHeight:t,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:a,calc:s}=e;return{[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:n},MB(t,s)),[`${r}-lg`]:Object.assign({},MB(i,s)),[`${r}-sm`]:Object.assign({},MB(o,s))}},PB=e=>Object.assign({width:e},SB(e)),RB=e=>{const{skeletonImageCls:t,imageSizeBase:n,gradientFromColor:r,borderRadiusSM:i,calc:o}=e;return{[t]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:r,borderRadius:i},PB(o(n).mul(2).equal())),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},PB(n)),{maxWidth:o(n).mul(4).equal(),maxHeight:o(n).mul(4).equal()}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},IB=(e,t,n)=>{const{skeletonButtonCls:r}=e;return{[`${n}${r}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:t}}},OB=(e,t)=>Object.assign({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal()},SB(e)),kB=e=>{const{borderRadiusSM:t,skeletonButtonCls:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:a,calc:s}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:t,width:s(r).mul(2).equal(),minWidth:s(r).mul(2).equal()},OB(r,s))},IB(e,r,n)),{[`${n}-lg`]:Object.assign({},OB(i,s))}),IB(e,i,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},OB(o,s))}),IB(e,o,`${n}-sm`))},LB=e=>{const{componentCls:t,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:i,skeletonButtonCls:o,skeletonInputCls:a,skeletonImageCls:s,controlHeight:l,controlHeightLG:c,controlHeightSM:u,gradientFromColor:h,padding:d,marginSM:f,borderRadius:p,titleHeight:m,blockRadius:g,paragraphLiHeight:v,controlHeightXS:y,paragraphMarginTop:b}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:d,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:h},EB(l)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},EB(c)),[`${n}-sm`]:Object.assign({},EB(u))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:m,background:h,borderRadius:g,[`+ ${i}`]:{marginBlockStart:u}},[i]:{padding:0,"> li":{width:"100%",height:v,listStyle:"none",background:h,borderRadius:g,"+ li":{marginBlockStart:y}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${r}, ${i} > li`]:{borderRadius:p}}},[`${t}-with-avatar ${t}-content`]:{[r]:{marginBlockStart:f,[`+ ${i}`]:{marginBlockStart:b}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},kB(e)),TB(e)),AB(e)),RB(e)),[`${t}${t}-block`]:{width:"100%",[o]:{width:"100%"},[a]:{width:"100%"}},[`${t}${t}-active`]:{[`\n        ${r},\n        ${i} > li,\n        ${n},\n        ${o},\n        ${a},\n        ${s}\n      `]:Object.assign({},CB(e))}}},NB=YC("Skeleton",(e=>{const{componentCls:t,calc:n}=e,r=$C(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:n(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[LB(r)]}),(e=>{const{colorFillContent:t,colorFill:n}=e;return{color:t,colorGradientEnd:n,gradientFromColor:t,gradientToColor:n,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}}),{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),DB=(e,t)=>{const{width:n,rows:r=2}=t;return Array.isArray(n)?n[e]:r-1===e?n:void 0},zB=e=>{const{prefixCls:t,className:r,style:i,rows:o}=e,a=Wt(new Array(o)).map(((t,r)=>n.createElement("li",{key:r,style:{width:DB(r,e)}})));return n.createElement("ul",{className:va()(t,r),style:i},a)},UB=e=>{let{prefixCls:t,className:r,width:i,style:o}=e;return n.createElement("h3",{className:va()(t,r),style:Object.assign({width:i},o)})};function FB(e){return e&&"object"==typeof e?e:{}}const BB=e=>{const{prefixCls:t,loading:r,className:i,rootClassName:o,style:a,children:s,avatar:l=!1,title:c=!0,paragraph:u=!0,active:h,round:d}=e,{getPrefixCls:f,direction:p,skeleton:m}=n.useContext(ia),g=f("skeleton",t),[v,y,b]=NB(g);if(r||!("loading"in e)){const e=!!l,t=!!c,r=!!u;let s,f;if(e){const e=Object.assign(Object.assign({prefixCls:`${g}-avatar`},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(t,r)),FB(l));s=n.createElement("div",{className:`${g}-header`},n.createElement(_B,Object.assign({},e)))}if(t||r){let i,o;if(t){const t=Object.assign(Object.assign({prefixCls:`${g}-title`},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(e,r)),FB(c));i=n.createElement(UB,Object.assign({},t))}if(r){const r=Object.assign(Object.assign({prefixCls:`${g}-paragraph`},function(e,t){const n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(e,t)),FB(u));o=n.createElement(zB,Object.assign({},r))}f=n.createElement("div",{className:`${g}-content`},i,o)}const x=va()(g,{[`${g}-with-avatar`]:e,[`${g}-active`]:h,[`${g}-rtl`]:"rtl"===p,[`${g}-round`]:d},null==m?void 0:m.className,i,o,y,b);return v(n.createElement("div",{className:x,style:Object.assign(Object.assign({},null==m?void 0:m.style),a)},s,f))}return null!=s?s:null};BB.Button=e=>{const{prefixCls:t,className:r,rootClassName:i,active:o,block:a=!1,size:s="default"}=e,{getPrefixCls:l}=n.useContext(ia),c=l("skeleton",t),[u,h,d]=NB(c),f=rC(e,["prefixCls"]),p=va()(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:a},r,i,h,d);return u(n.createElement("div",{className:p},n.createElement(_B,Object.assign({prefixCls:`${c}-button`,size:s},f))))},BB.Avatar=e=>{const{prefixCls:t,className:r,rootClassName:i,active:o,shape:a="circle",size:s="default"}=e,{getPrefixCls:l}=n.useContext(ia),c=l("skeleton",t),[u,h,d]=NB(c),f=rC(e,["prefixCls","className"]),p=va()(c,`${c}-element`,{[`${c}-active`]:o},r,i,h,d);return u(n.createElement("div",{className:p},n.createElement(_B,Object.assign({prefixCls:`${c}-avatar`,shape:a,size:s},f))))},BB.Input=e=>{const{prefixCls:t,className:r,rootClassName:i,active:o,block:a,size:s="default"}=e,{getPrefixCls:l}=n.useContext(ia),c=l("skeleton",t),[u,h,d]=NB(c),f=rC(e,["prefixCls"]),p=va()(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:a},r,i,h,d);return u(n.createElement("div",{className:p},n.createElement(_B,Object.assign({prefixCls:`${c}-input`,size:s},f))))},BB.Image=e=>{const{prefixCls:t,className:r,rootClassName:i,style:o,active:a}=e,{getPrefixCls:s}=n.useContext(ia),l=s("skeleton",t),[c,u,h]=NB(l),d=va()(l,`${l}-element`,{[`${l}-active`]:a},r,i,u,h);return c(n.createElement("div",{className:d},n.createElement("div",{className:va()(`${l}-image`,r),style:o},n.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},n.createElement("title",null,"Image placeholder"),n.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:`${l}-image-path`})))))},BB.Node=e=>{const{prefixCls:t,className:r,rootClassName:i,style:o,active:a,children:s}=e,{getPrefixCls:l}=n.useContext(ia),c=l("skeleton",t),[u,h,d]=NB(c),f=va()(c,`${c}-element`,{[`${c}-active`]:a},h,r,i,d);return u(n.createElement("div",{className:f},n.createElement("div",{className:va()(`${c}-image`,r),style:o},s)))};const jB=BB,VB=e=>{var t,r;const{prefixCls:i,title:o,footer:a,extra:s,loading:l,onClose:c,headerStyle:u,bodyStyle:h,footerStyle:d,children:f,classNames:p,styles:m}=e,{drawer:g}=n.useContext(ia),v=n.useCallback((e=>n.createElement("button",{type:"button",onClick:c,"aria-label":"Close",className:`${i}-close`},e)),[c]),[y,b]=xB(gB(e),gB(g),{closable:!0,closeIconRender:v}),x=n.useMemo((()=>{var e,t;return o||y?n.createElement("div",{style:Object.assign(Object.assign(Object.assign({},null===(e=null==g?void 0:g.styles)||void 0===e?void 0:e.header),u),null==m?void 0:m.header),className:va()(`${i}-header`,{[`${i}-header-close-only`]:y&&!o&&!s},null===(t=null==g?void 0:g.classNames)||void 0===t?void 0:t.header,null==p?void 0:p.header)},n.createElement("div",{className:`${i}-header-title`},b,o&&n.createElement("div",{className:`${i}-title`},o)),s&&n.createElement("div",{className:`${i}-extra`},s)):null}),[y,b,s,u,i,o]),_=n.useMemo((()=>{var e,t;if(!a)return null;const r=`${i}-footer`;return n.createElement("div",{className:va()(r,null===(e=null==g?void 0:g.classNames)||void 0===e?void 0:e.footer,null==p?void 0:p.footer),style:Object.assign(Object.assign(Object.assign({},null===(t=null==g?void 0:g.styles)||void 0===t?void 0:t.footer),d),null==m?void 0:m.footer)},a)}),[a,d,i]);return n.createElement(n.Fragment,null,x,n.createElement("div",{className:va()(`${i}-body`,null==p?void 0:p.body,null===(t=null==g?void 0:g.classNames)||void 0===t?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},null===(r=null==g?void 0:g.styles)||void 0===r?void 0:r.body),h),null==m?void 0:m.body)},l?n.createElement(jB,{active:!0,title:!1,paragraph:{rows:5},className:`${i}-body-skeleton`}):f),_)},$B=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},HB=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),GB=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},HB({opacity:e},{opacity:1})),WB=(e,t)=>[GB(.7,t),HB({transform:$B(e)},{transform:"none"})],qB=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:GB(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[`&-${t}`]:WB(t,n)})),{})}}},XB=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:r,colorBgMask:i,colorBgElevated:o,motionDurationSlow:a,motionDurationMid:s,paddingXS:l,padding:c,paddingLG:u,fontSizeLG:h,lineHeightLG:d,lineWidth:f,lineType:p,colorSplit:m,marginXS:g,colorIcon:v,colorIconHover:y,colorBgTextHover:b,colorBgTextActive:x,colorText:_,fontWeightStrong:w,footerPaddingBlock:S,footerPaddingInline:E,calc:C}=e,M=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:r,pointerEvents:"none",color:_,"&-pure":{position:"relative",background:o,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:r,background:i,pointerEvents:"auto"},[M]:{position:"absolute",zIndex:r,maxWidth:"100vw",transition:`all ${a}`,"&-hidden":{display:"none"}},[`&-left > ${M}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${M}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${M}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${M}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:o,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${Un(c)} ${Un(u)}`,fontSize:h,lineHeight:d,borderBottom:`${Un(f)} ${p} ${m}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:C(h).add(l).equal(),height:C(h).add(l).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:g,color:v,fontWeight:w,fontSize:h,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${s}`,textRendering:"auto","&:hover":{color:y,backgroundColor:b,textDecoration:"none"},"&:active":{backgroundColor:x}},$s(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:h,lineHeight:d},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:u,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${Un(S)} ${Un(E)}`,borderTop:`${Un(f)} ${p} ${m}`},"&-rtl":{direction:"rtl"}}}},YB=YC("Drawer",(e=>{const t=$C(e,{});return[XB(t),qB(t)]}),(e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding})));var KB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ZB={distance:180},JB=e=>{const{rootClassName:t,width:r,height:i,size:o="default",mask:a=!0,push:s=ZB,open:l,afterOpenChange:c,onClose:u,prefixCls:h,getContainer:d,style:f,className:p,visible:m,afterVisibleChange:g,maskStyle:v,drawerStyle:y,contentWrapperStyle:b}=e,x=KB(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:_,getPrefixCls:w,direction:S,drawer:E}=n.useContext(ia),C=w("drawer",h),[M,T,A]=YB(C),P=void 0===d&&_?()=>_(document.body):d,R=va()({"no-mask":!a,[`${C}-rtl`]:"rtl"===S},t,T,A),I=n.useMemo((()=>null!=r?r:"large"===o?736:378),[r,o]),O=n.useMemo((()=>null!=i?i:"large"===o?736:378),[i,o]),k={motionName:pz(C,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},L=dB(),[N,D]=cz("Drawer",x.zIndex),{classNames:z={},styles:U={}}=x,{classNames:F={},styles:B={}}=E||{};return M(n.createElement(iz,{form:!0,space:!0},n.createElement(oz.Provider,{value:D},n.createElement(cB,Object.assign({prefixCls:C,onClose:u,maskMotion:k,motion:e=>({motionName:pz(C,`panel-motion-${e}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500})},x,{classNames:{mask:va()(z.mask,F.mask),content:va()(z.content,F.content),wrapper:va()(z.wrapper,F.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},U.mask),v),B.mask),content:Object.assign(Object.assign(Object.assign({},U.content),y),B.content),wrapper:Object.assign(Object.assign(Object.assign({},U.wrapper),b),B.wrapper)},open:null!=l?l:m,mask:a,push:s,width:I,height:O,style:Object.assign(Object.assign({},null==E?void 0:E.style),f),className:va()(null==E?void 0:E.className,p),rootClassName:R,getContainer:P,afterOpenChange:null!=c?c:g,panelRef:L,zIndex:N}),n.createElement(VB,Object.assign({prefixCls:C},x,{onClose:u}))))))};JB._InternalPanelDoNotUseOrYouWillBeFired=e=>{const{prefixCls:t,style:r,className:i,placement:o="right"}=e,a=KB(e,["prefixCls","style","className","placement"]),{getPrefixCls:s}=n.useContext(ia),l=s("drawer",t),[c,u,h]=YB(l),d=va()(l,`${l}-pure`,`${l}-${o}`,u,h,i);return c(n.createElement("div",{className:d,style:r},n.createElement(VB,Object.assign({prefixCls:l},a))))};const QB=JB;var ej=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],tj=n.forwardRef((function(e,t){var r=e.className,i=e.component,o=e.viewBox,a=e.spin,s=e.rotate,l=e.tabIndex,c=e.onClick,u=e.children,h=Ca(e,ej),d=n.useRef(),f=Sa(d,t);cC(Boolean(i||u),"Should have `component` prop or `children`."),gC(d);var p=n.useContext(Io),m=p.prefixCls,g=void 0===m?"anticon":m,v=p.rootClassName,y=va()(v,g,Ft({},"".concat(g,"-spin"),!!a&&!!i),r),b=va()(Ft({},"".concat(g,"-spin"),!!a)),x=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,_=Xt(Xt({},mC),{},{className:b,style:x,viewBox:o});o||delete _.viewBox;var w=l;return void 0===w&&c&&(w=-1),n.createElement("span",nr({role:"img"},h,{ref:f,tabIndex:w,onClick:c,className:y}),i?n.createElement(i,_,u):u?(cC(Boolean(o)||1===n.Children.count(u)&&n.isValidElement(u)&&"use"===n.Children.only(u).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),n.createElement("svg",nr({},_,{viewBox:o}),u)):null)}));tj.displayName="AntdIcon";const nj=tj;function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(null,arguments)}function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ij.apply(null,arguments)}function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oj.apply(null,arguments)}function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(null,arguments)}function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sj.apply(null,arguments)}function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lj.apply(null,arguments)}function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cj.apply(null,arguments)}function uj(){return uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uj.apply(null,arguments)}function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hj.apply(null,arguments)}function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dj.apply(null,arguments)}function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fj.apply(null,arguments)}const pj={axes:function(e){return n.createElement("svg",rj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("circle",{cx:6.26,cy:12.84,r:1,fill:"currentColor"}),n.createElement("path",{fill:"currentColor",d:"m14.27 15.23.7-1.64H8.11c.09-.23.15-.48.15-.75s-.06-.52-.15-.75h6.86l-.7-1.64 5.66 2.39zM6.26.03 3.87 5.69 5.51 5v5.99q.345-.15.75-.15c.405 0 .52.05.75.15V5l1.64.69zM5.59 17.23.07 19.91 2 14.08l.77 1.6 1.61-1.83s.08-.06.11-.09c.23.44.62.78 1.09.95-.02.04-.04.09-.07.12L3.9 16.67z"}))},boundingBox:function(e){return n.createElement("svg",ij({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M13.28 10.25a.38.38 0 1 0 .76 0V9a.38.38 0 1 0-.76 0zm-2.5 3.42a.38.38 0 0 0-.38-.38H9.15a.38.38 0 1 0 0 .76h1.25c.21 0 .38-.17.38-.38m3.93.52-.68-.67v-1.26a.38.38 0 1 0-.76 0v1.05h-.88a.38.38 0 1 0 0 .76h1.1l.68.67c.07.07.17.11.26.11s.19-.04.27-.11c.15-.15.15-.38 0-.53Zm2.31 2.29-.89-.88a.377.377 0 0 0-.53 0c-.15.15-.15.38 0 .53l.89.88c.07.07.17.11.26.11s.19-.04.27-.11c.15-.15.15-.38 0-.53M4.29 13.67a.38.38 0 0 0-.38-.38H2.66a.38.38 0 1 0 0 .76h1.25c.21 0 .38-.17.38-.38m8.98-9.92a.38.38 0 1 0 .76 0V2.5a.38.38 0 1 0-.76 0zm.75 2a.38.38 0 1 0-.76 0v.08h.75v-.08Zm-.38 1.62c.21 0 .38-.17.38-.38v-.17h-.75v.17c0 .21.17.38.38.38Zm0-3.25c.21 0 .38-.17.38-.38V2.49a.38.38 0 1 0-.76 0v1.25c0 .21.17.38.38.38M3.9 13.3H2.65a.38.38 0 1 0 0 .76H3.9a.38.38 0 1 0 0-.76m1.62.38c0 .19.14.34.32.36v-.73c-.18.03-.32.18-.32.36Zm10.59 1.93a.377.377 0 0 0-.53 0c-.15.15-.15.38 0 .53l.89.88c.07.07.17.11.26.11s.19-.04.27-.11c.15-.15.15-.38 0-.53zm2.86 2.84-.56-.55a.37.37 0 0 0-.53 0c-.15.15-.15.38 0 .53l.55.54h.54zm-8.58-5.14H9.14a.38.38 0 1 0 0 .76h1.25a.38.38 0 1 0 0-.76m3.62.22v-1.26a.38.38 0 1 0-.76 0v1.05h-.88a.38.38 0 1 0 0 .76h1.1l.68.67c.07.07.17.11.26.11s.19-.04.27-.11c.15-.15.15-.38 0-.53l-.68-.67Zm-.37-2.89c.21 0 .38-.17.38-.38V9.01a.38.38 0 1 0-.76 0v1.25c0 .21.17.38.38.38m-6.12 3.05a.38.38 0 0 0-.38-.38h-.3v.75h.3c.21 0 .38-.17.38-.38Z"}),n.createElement("path",{fill:"currentColor",d:"m19.83 5.98-.7-.69L14.7.88l-.69-.69a.5.5 0 0 0-.35-.15H.52c-.28 0-.5.22-.5.5v13.13c0 .14.06.26.15.35.46.46.7.69.7.69l4.44 4.41s.23.23.7.69c.09.09.21.15.35.15h13.13c.28 0 .5-.22.5-.5V6.33a.5.5 0 0 0-.15-.35ZM5.85 13.31v4.96l-4.29-4.26s-.19-.19-.55-.54V1.74L5.3 6s.19.19.55.54zm.16-8.02L1.73 1.04h11.71l.55.55 4.28 4.25H6.55L6 5.29Zm.84 13.68V6.83h12.13v12.13H6.85Z"}))},camera:function(e){return n.createElement("svg",oj({xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 2",viewBox:"0 0 32 32",role:"img"},e),n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M29.54 32H2.46C1.1 32 0 30.9 0 29.55V15.34c0-1.35 1.1-2.45 2.46-2.45H9.1c1.21 0 2.34-.54 3.1-1.48l.88-1.09a3.92 3.92 0 0 1 3.08-1.47h6.32c1.21 0 2.33.54 3.08 1.47l.88 1.09a3.97 3.97 0 0 0 3.1 1.48c1.36 0 2.46 1.1 2.46 2.45v14.21C32 30.9 30.9 32 29.54 32M2.46 13.9c-.8 0-1.46.65-1.46 1.45v14.21c0 .8.65 1.45 1.46 1.45h27.08c.8 0 1.46-.65 1.46-1.45V15.34c0-.8-.65-1.45-1.46-1.45-1.52 0-2.93-.68-3.88-1.85l-.88-1.09c-.56-.7-1.4-1.1-2.3-1.1h-6.32c-.9 0-1.74.4-2.3 1.1l-.88 1.09a4.95 4.95 0 0 1-3.88 1.85H2.46Zm4.25 4.85c.58 0 1.04-.46 1.04-1.03s-.47-1.03-1.04-1.03H5.04c-.58 0-1.04.46-1.04 1.03s.47 1.03 1.04 1.03zm12.61-3.24c2.81 0 5.09 2.29 5.09 5.1s-2.28 5.1-5.09 5.1-5.09-2.29-5.09-5.1 2.28-5.1 5.09-5.1m0-2c-3.91 0-7.09 3.18-7.09 7.1s3.17 7.1 7.09 7.1 7.09-3.18 7.09-7.1-3.17-7.1-7.09-7.1M19.39 3.87c-.28 0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5s.5.22.5.5v2.87c0 .28-.22.5-.5.5m4.76 1.12 2.15-2.34c.19-.2.17-.52-.03-.71a.514.514 0 0 0-.71.03l-2.15 2.34c-.19.2-.17.52.03.71.1.09.22.13.34.13a.5.5 0 0 0 .37-.16m-8.95.03c.2-.19.22-.5.03-.71l-2.15-2.34c-.19-.2-.5-.21-.71-.03-.2.19-.22.5-.03.71l2.15 2.34c.1.11.23.16.37.16.12 0 .24-.04.34-.13"})))},channels:function(e){return n.createElement("svg",aj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M13.55 10.36h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76M2.65 6.64a.38.38 0 0 1-.38-.38v-.3c0-.26.03-.52.08-.78.04-.2.24-.33.45-.29.2.04.33.24.29.45-.04.2-.07.41-.07.62v.3c0 .21-.17.38-.38.38Zm1.06-2.7c-.1 0-.2-.04-.28-.12a.38.38 0 0 1 .02-.53c.27-.25.59-.46.92-.62.19-.09.41 0 .5.18s0 .41-.18.5c-.27.12-.51.29-.73.49-.07.07-.16.1-.25.1m9.78-.86h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76M13.44 17.69h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-3 0h-1a.38.38 0 1 1 0-.76h1a.38.38 0 1 1 0 .76m-2.95-.32c-.05 0-.11-.01-.16-.04-.33-.16-.64-.38-.91-.63-.15-.14-.16-.38-.02-.53s.38-.16.53-.02c.22.2.46.37.73.5.19.09.26.32.17.5-.06.13-.2.21-.34.21Zm-1.78-2.28c-.17 0-.33-.12-.37-.3-.05-.24-.07-.48-.07-.73v-.34a.38.38 0 1 1 .76 0v.34c0 .19.02.39.06.58.04.2-.09.4-.29.44h-.08ZM5.42 12.69H.01v-5.4h5.41zm-4.4-1h3.4v-3.4H1.01v3.4ZM19.99 5.41h-5.4V0h5.4zm-4.4-1h3.4V1h-3.4v3.4ZM19.99 12.69h-5.4v-5.4h5.4zm-4.4-1h3.4v-3.4h-3.4zM19.99 19.97h-5.4v-5.4h5.4zm-4.4-1h3.4v-3.4h-3.4z"}))},closePanel:function(e){return n.createElement("svg",sj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M10.64 17.78c-.21 0-.41-.06-.59-.2-.44-.33-.54-.96-.21-1.4l4.59-6.21-4.6-6.21c-.33-.44-.23-1.07.21-1.4s1.07-.23 1.4.21l5.03 6.8c.26.35.26.84 0 1.19l-5.03 6.81a1 1 0 0 1-.81.41Z"}),n.createElement("path",{fill:"currentColor",d:"M4.33 17.84c-.21 0-.41-.06-.59-.2-.44-.33-.54-.96-.21-1.4l4.59-6.21-4.59-6.21c-.33-.44-.23-1.07.21-1.4s1.07-.23 1.4.21l5.03 6.81c.26.35.26.83 0 1.19l-5.03 6.81a1 1 0 0 1-.81.41Z"}))},download:function(e){return n.createElement("svg",lj({xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 2",viewBox:"0 0 32 32",role:"img"},e),n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M17 14.93V0h-2v14.93l-3.44-1.46L16 24l4.44-10.53z"}),n.createElement("path",{d:"M28.5 32h-25A2.5 2.5 0 0 1 1 29.5V20h1v9.5c0 .83.67 1.5 1.5 1.5h25c.83 0 1.5-.67 1.5-1.5V20h1v9.5a2.5 2.5 0 0 1-2.5 2.5"})))},dropdownArrow:function(e){return n.createElement("svg",cj({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 12 12",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M1.117 3.12a.47.47 0 0 1 .662.035L6.006 7.85l4.227-4.695a.469.469 0 1 1 .697.627L6.372 8.845A.47.47 0 0 1 6.006 9a.47.47 0 0 1-.366-.155L1.082 3.782a.47.47 0 0 1 .035-.662"}))},metadata:function(e){return n.createElement("svg",uj({xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 2",viewBox:"0 0 32 32",role:"img"},e),n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M19.46 21.54c0-.28-.22-.5-.5-.5H.5c-.28 0-.5.22-.5.5s.22.5.5.5h18.46c.28 0 .5-.22.5-.5m3.52-14.03c0-.28-.22-.5-.5-.5H.51c-.28 0-.51.23-.51.5s.22.5.5.5h21.98c.28 0 .5-.22.5-.5m-4.74 7.01c0-.28-.22-.5-.5-.5H.5c-.28 0-.5.22-.5.5s.22.5.5.5h17.25c.28 0 .5-.22.5-.5ZM32 .5c0-.28-.22-.5-.5-.5H.54c-.28 0-.5.22-.5.5s.22.5.5.5H31.5c.28 0 .5-.22.5-.5M23.62 14.79l.16-.56h6.29L25.4 27.89c-.13.4-.26.81-.4 1.23-.13.42-.2.81-.2 1.19 0 .32.09.6.28.83.18.23.46.34.83.34.42 0 .84-.15 1.25-.44s.78-.64 1.13-1.03c.34-.39.63-.79.87-1.19s.41-.73.51-.97l.47.2c-.11.21-.27.54-.49.99-.23.44-.53.89-.93 1.33-.39.44-.88.83-1.46 1.15S26 32 25.2 32c-.87 0-1.56-.18-2.08-.54s-.77-.97-.77-1.83c0-.46.08-.96.24-1.51s.32-1.05.48-1.51l4.07-11.81h-3.52Zm4.67-6.57c0 .54.18.99.53 1.35s.8.54 1.32.54.97-.18 1.32-.54.53-.81.53-1.35-.18-.99-.53-1.35-.8-.54-1.32-.54-.97.18-1.32.54-.53.81-.53 1.35"})))},preferences:function(e){return n.createElement("svg",hj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M8.04 3.61H.81a.749.749 0 1 1 0-1.5h7.23zm11.15-1.5h-5.65v1.5h5.65c.41 0 .75-.34.75-.75s-.34-.75-.75-.75M10.79 5.61c-.41 0-.75-.34-.75-.75V.85c0-.41.34-.75.75-.75s.75.34.75.75v4.01c0 .41-.34.75-.75.75M2.81 10.75h-2c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2zm16.38-1.5H8.31v1.5h10.88c.41 0 .75-.34.75-.75s-.34-.75-.75-.75M5.56 12.76c-.41 0-.75-.34-.75-.75V7.99c0-.41.34-.75.75-.75s.75.34.75.75V12c0 .41-.34.75-.75.75ZM19.94 17.14c0 .41-.34.75-.75.75h-3.08v-1.5h3.08c.41 0 .75.34.75.75m-9.33-.75H.81c-.41 0-.75.34-.75.75s.34.75.75.75h9.8zM13.36 19.9c-.41 0-.75-.34-.75-.75v-4.01c0-.41.34-.75.75-.75s.75.34.75.75v4.01c0 .41-.34.75-.75.75"}))},resetView:function(e){return n.createElement("svg",dj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,"data-name":"icon-resetView",viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M.6 5.48c-.28 0-.5-.22-.5-.5V.09h4.89c.28 0 .5.22.5.5s-.22.5-.5.5H1.1v3.89c0 .28-.22.5-.5.5M4.99 19.91H.1v-4.88c0-.28.22-.5.5-.5s.5.22.5.5v3.88h3.89c.28 0 .5.22.5.5s-.22.5-.5.5M19.9 19.91h-4.89c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h3.89v-3.88c0-.28.22-.5.5-.5s.5.22.5.5zM19.4 6.11c-.28 0-.5-.22-.5-.5V1.09h-4.51c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h5.51v5.52c0 .28-.22.5-.5.5M16.46 16.46H3.54V3.54h12.92zm-10.92-2h8.92V5.54H5.54z"}))},turnTable:function(e){return n.createElement("svg",fj({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M19.19 7.69c-.09.16-.19.3-.3.44-.26-.29-.55-.56-.85-.8.34-.28.58-.61.61-.99.05-.55-.4-1.15-.95-1.59-.56-.45-1.23-.79-1.92-1.07-.08-.04-.12-.13-.08-.21.03-.07.11-.11.19-.09.73.21 1.46.48 2.15.89.34.21.67.46.95.79.28.32.51.76.55 1.25.05.49-.1.99-.35 1.38M7.85 5.12l1.54-1.8c-1.27.03-2.52.18-3.73.46-.71.16-1.4.37-2.05.65-.64.28-1.25.63-1.67 1.06-.43.45-.54.87-.33 1.29.22.45.76.88 1.36 1.19 1.13.6 2.46.94 3.81 1.15-.27.42-.51.87-.7 1.35-1.29-.23-2.56-.6-3.79-1.26-.71-.4-1.46-.9-1.93-1.83C.13 6.92.06 6.33.2 5.81c.14-.53.43-.94.75-1.27.65-.65 1.39-1.04 2.13-1.35.75-.32 1.51-.54 2.28-.71 1.39-.31 2.79-.45 4.19-.46L8.28 0l5.86 3.07zM18.17 8.83c-.31-.36-.66-.67-1.05-.95h-.01a6.6 6.6 0 0 0-3.89-1.26c-2.16 0-4.09 1.03-5.3 2.63-.33.42-.61.88-.82 1.38a6.68 6.68 0 0 0 6.12 9.35 6.68 6.68 0 0 0 6.68-6.68c0-1.73-.65-3.29-1.73-4.47m-4.95 10.15c-3.13 0-5.68-2.55-5.68-5.68 0-.92.22-1.79.62-2.56.26-.52.6-1 1.01-1.41a5.63 5.63 0 0 1 4.05-1.71 5.62 5.62 0 0 1 4.11 1.78 5.6 5.6 0 0 1 1.57 3.9c0 3.13-2.55 5.68-5.68 5.68"}),n.createElement("path",{fill:"currentColor",d:"m12.83 10.68-1.18-.94v7.16l4.48-3.58zm-.18 1.14 1.88 1.5-1.88 1.5z"}))}};function mj(e){return mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mj(e)}function gj(){return gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gj.apply(null,arguments)}function vj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vj(Object(n),!0).forEach((function(t){bj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bj(e,t,n){return(t=function(e){var t=function(e){if("object"!=mj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=mj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xj={fontSize:"19px"};const _j=function(e){var t=yj({},e);return t.style=yj(yj({},xj),e.style),n.createElement(nj,gj({component:pj[e.type]},t))};function wj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Sj=function(e){var t,r,i=e.children,o=e.title,a=e.onVisibleChange,s=e.onVisibleChangeEnd,l=(t=(0,n.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,r)||function(e,t){if(e){if("string"==typeof e)return wj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wj(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1];(0,n.useEffect)((function(){null==a||a(c),c||null==s||s(c)}),[]);var h=n.createElement(wF,{className:"options-button",size:"small",onClick:function(){u(!c),a&&a(!c)}},o||"Options",n.createElement(_j,{type:"closePanel",className:"button-arrow",style:{fontSize:"15px"}}));return n.createElement("div",{className:"bottom-panel"},n.createElement(QB,{className:"drawer",placement:"bottom",closable:!1,getContainer:!1,open:c,mask:!1,title:h,afterOpenChange:s},n.createElement("div",{className:"drawer-body-wrapper"},i)))};function Ej(e){return Ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ej(e)}function Cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cj(Object(n),!0).forEach((function(t){Tj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tj(e,t,n){return(t=Rj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Pj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rj(r.key),r)}}function Rj(e){var t=function(e){if("object"!=Ej(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ej(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ej(t)?t:t+""}var Ij=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=t,this.savedViewerState={},this.channelsToReset=new Set,this.channelsToResetOnLoad=new Set,this.savedViewerChannelSettings=void 0,this.useDefaultViewerChannelSettings=!1,this.resetToSavedViewerState=this.resetToSavedViewerState.bind(this),this.resetToDefaultViewerState=this.resetToDefaultViewerState.bind(this),this.resetToState=this.resetToState.bind(this),this.setSavedViewerState=this.setSavedViewerState.bind(this),this.setSavedViewerChannelSettings=this.setSavedViewerChannelSettings.bind(this),this.getChannelsAwaitingReset=this.getChannelsAwaitingReset.bind(this),this.getChannelsAwaitingResetOnLoad=this.getChannelsAwaitingResetOnLoad.bind(this),this.onResetChannel=this.onResetChannel.bind(this),this.getCurrentViewerChannelSettings=this.getCurrentViewerChannelSettings.bind(this)},t=[{key:"setSavedViewerState",value:function(e){this.savedViewerState=e}},{key:"setSavedViewerChannelSettings",value:function(e){this.savedViewerChannelSettings=e}},{key:"getChannelsAwaitingReset",value:function(){return this.channelsToReset}},{key:"getChannelsAwaitingResetOnLoad",value:function(){return this.channelsToResetOnLoad}},{key:"onResetChannel",value:function(e){this.channelsToReset.delete(e),this.channelsToResetOnLoad.delete(e)}},{key:"getCurrentViewerChannelSettings",value:function(){return this.useDefaultViewerChannelSettings?{groups:[{name:"Channels",channels:[{match:[0,1,2],enabled:!0},{match:"(.+)",enabled:!1}]}]}:this.savedViewerChannelSettings}},{key:"resetToState",value:function(e,t){var n=this.ref.current,r=n.changeViewerSetting,i=n.setChannelSettings,o=n.channelSettings,a=n.viewMode,s=n.time,l=n.slice,c=a!==e.viewMode&&(a===ak.xy||e.viewMode===ak.xy),u=s!==e.time,h=e.viewMode===ak.xy&&!(0,yM.isEqual)(e.slice.z,l.z),d=c||u||h;if(function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(i,t[i])}e("renderMode",t.renderMode)}(r,e),function(e,t,n){for(var r=0;r<n.length;r++)n[r].name=t[r].name,n[r].controlPoints=t[r].controlPoints,n[r].ramp=t[r].ramp;e(n)}(i,o,t),this.channelsToReset=new Set(Array(t.length).keys()),d){var f=function(e){for(var t=[],n=0;n<e.length;n++)(e[n].volumeEnabled||e[n].isosurfaceEnabled)&&t.push(n);return t}(t);this.channelsToResetOnLoad=new Set(f);var p,m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Aj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aj(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(f);try{for(m.s();!(p=m.n()).done;){var g=p.value;this.channelsToReset.delete(g)}}catch(e){m.e(e)}finally{m.f()}}}},{key:"resetToSavedViewerState",value:function(){var e=this,t=this.ref.current.channelSettings,n=Mj(Mj({},Ek()),{},{cameraState:Sk(this.savedViewerState.viewMode||ak.threeD)},this.savedViewerState),r=t.map((function(n,r){return iL(t[r].name,r,Mk(r),e.savedViewerChannelSettings)}));this.resetToState(n,r),this.useDefaultViewerChannelSettings=!1}},{key:"resetToDefaultViewerState",value:function(){for(var e=this.ref.current.channelSettings,t=Mj(Mj({},Ek()),{},{cameraState:Sk(ak.threeD)}),n=e.map((function(e,t){return Tk(t)})),r=0;r<Math.min(3,n.length);r++)n[r].volumeEnabled=!0;this.resetToState(t,n),this.useDefaultViewerChannelSettings=!0}}],t&&Pj(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Oj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||kj(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kj(e,t){if(e){if("string"==typeof e)return Lj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lj(e,t):void 0}}function Lj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nj(Object(n),!0).forEach((function(t){zj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zj(e,t,n){return(t=function(e){var t=function(e){if("object"!=Uj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Uj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Uj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uj(e){return Uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uj(e)}var Fj=function(e){return"object"===Uj(e)&&null!==e&&!Array.isArray(e)},Bj={viewMode:function(e,t){var n=t!==ak.threeD&&e.renderMode===sk.pathTrace;return Dj(Dj({},e),{},{viewMode:t,renderMode:n?sk.volumetric:e.renderMode})},renderMode:function(e,t){return t===sk.pathTrace&&e.viewMode!==ak.threeD?Dj({},e):Dj(Dj({},e),{},{renderMode:t,autorotate:t!==sk.pathTrace&&e.autorotate})},autorotate:function(e,t){return Dj(Dj({},e),{},{autorotate:e.renderMode!==sk.pathTrace&&t})}},jj=function(e,t){var n=t.key,r=t.value,i=Bj[n];if(i)return i(e,r);var o=e[n];return Fj(o)&&Fj(r)?Dj(Dj({},e),{},zj({},n,Dj(Dj({},o),r))):Dj(Dj({},e),{},zj({},n,r))},Vj=function(e){return e.UniformUpdate="UniformUpdate",e.ArrayUpdate="ArrayUpdate",e.Init="Init",e}(Vj||{}),$j=function(e,t){if(t.type===Vj.Init)return t.value;if(t.type===Vj.ArrayUpdate)return e.map((function(e,n){return t.value[n]?Dj(Dj({},e),{},zj({},t.key,t.value[n])):e}));if(Array.isArray(t.index))return e.map((function(e,n){return t.index.includes(n)?Dj(Dj({},e),t.value):e}));var n=e.slice();return t.index>=0&&t.index<e.length&&(n[t.index]=Dj(Dj({},n[t.index]),t.value)),n},Hj=function(){},Gj=Dj(Dj({},Ek()),{},{channelSettings:[],changeViewerSetting:Hj,setChannelSettings:Hj,changeChannelSetting:Hj,applyColorPresets:Hj,resetToSavedViewerState:Hj,resetToDefaultViewerState:Hj,setSavedViewerChannelSettings:Hj,getCurrentViewerChannelSettings:function(){return{groups:[{name:"Channels",channels:[{match:[0,1,2],enabled:!0},{match:"(.+)",enabled:!1}]}]}},getChannelsAwaitingReset:function(){return new Set},getChannelsAwaitingResetOnLoad:function(){return new Set},onResetChannel:Hj}),Wj=Object.keys(Gj),qj={ref:{current:Gj}},Xj=n.createContext(qj);function Yj(e,t){var r=n.memo(e),i=function(e){var i,o=(0,n.useContext)(Xj),a=Dj({},e),s=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=kj(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a[l]=o.ref.current[l]}}catch(e){s.e(e)}finally{s.f()}return n.createElement(r,a)};return i.displayName="Connected(".concat(e.displayName||e.name,")"),i}const Kj=function(e){var t=Oj((0,n.useReducer)(jj,Dj({},Ek())),2),r=t[0],i=t[1],o=Oj((0,n.useReducer)($j,[]),2),a=o[0],s=o[1],l=(0,n.useRef)(Gj),c=Jk((function(){return new Ij(l)}));(0,n.useEffect)((function(){c.setSavedViewerState(e.viewerSettings||{})}),[e.viewerSettings]);var u=(0,n.useCallback)((function(e,t){return i({key:e,value:t})}),[]),h=(0,n.useCallback)((function(e,t){s({type:Vj.UniformUpdate,index:e,value:t})}),[]),d=(0,n.useCallback)((function(e){return s({type:Vj.ArrayUpdate,key:"color",value:e})}),[]),f=(0,n.useCallback)((function(e){return s({type:Vj.Init,value:e})}),[]);(0,n.useMemo)((function(){if(e.viewerSettings)for(var t=0,n=Object.keys(e.viewerSettings);t<n.length;t++){var i=n[t];r[i]!==e.viewerSettings[i]&&u(i,e.viewerSettings[i])}}),[e.viewerSettings]);var p=(0,n.useMemo)((function(){return l.current=Dj(Dj({},r),{},{channelSettings:a,changeViewerSetting:u,setChannelSettings:f,changeChannelSetting:h,applyColorPresets:d,setSavedViewerChannelSettings:c.setSavedViewerChannelSettings,getCurrentViewerChannelSettings:c.getCurrentViewerChannelSettings,getChannelsAwaitingReset:c.getChannelsAwaitingReset,getChannelsAwaitingResetOnLoad:c.getChannelsAwaitingResetOnLoad,onResetChannel:c.onResetChannel,resetToSavedViewerState:c.resetToSavedViewerState,resetToDefaultViewerState:c.resetToDefaultViewerState}),{ref:l}}),[r,a]);return n.createElement(Xj.Provider,{value:p},e.children)};function Zj(e){return Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zj(e)}function Jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jj(Object(n),!0).forEach((function(t){eV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eV(e,t,n){return(t=function(e){var t=function(e){if("object"!=Zj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const tV=Yj((function(e){var t=n.createRef();n.useEffect((function(){t.current.appendChild(e.view3d.getDOMElement()),e.view3d.setAutoRotate(e.autorotate)}),[]),n.useEffect((function(){e.view3d.resize(null)}));var r,i,o=e.appHeight,a=e.changeViewerSetting,s=e.visibleControls,l=e.numSlices,c=e.numTimesteps,u=e.viewMode,h=e.region,d=e.slice,f=e.time;return n.createElement("div",{className:"cell-canvas",style:Qj(Qj({},nV.viewer),{},{height:o})},n.createElement("div",{ref:t,style:nV.view3d}),n.createElement(Sj,{title:"Clipping",onVisibleChange:function(t){var n;return null===(n=e.onClippingPanelVisibleChange)||void 0===n?void 0:n.call(e,t,c>1)},onVisibleChangeEnd:e.onClippingPanelVisibleChangeEnd},s.axisClipSliders&&!!e.image&&n.createElement(XF,{mode:u,image:e.image,changeViewerSetting:a,numSlices:l,numSlicesLoaded:e.numSlicesLoaded,region:h,slices:d,numTimesteps:c,time:f,playControls:e.playControls,playingAxis:e.playingAxis})),(r=e.loadingImage&&!e.playingAxis?n.createElement("div",{style:nV.noImage},n.createElement(sL,{style:{fontSize:60,zIndex:1e3}})):null,(i=e.loadingImage||e.image?null:n.createElement("div",{style:nV.noImage},"No image selected"))&&e.view3d&&e.view3d.removeAllVolumes(),i||r))}),["autorotate","viewMode","region","slice","time","changeViewerSetting"]);var nV={viewer:{display:"flex",position:"relative"},view3d:{width:"100%",display:"flex",overflow:"hidden"},noImage:{position:"absolute",zIndex:999,top:0,left:0,bottom:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#eeeee",color:"#9b9b9b",fontSize:"2em",opacity:.75}},rV=QF.ESC,iV=QF.TAB;const oV=(0,n.forwardRef)((function(e,t){var r=e.overlay,i=e.arrow,o=e.prefixCls,a=(0,n.useMemo)((function(){return"function"==typeof r?r():r}),[r]),s=wa(t,null==a?void 0:a.ref);return n.createElement(n.Fragment,null,i&&n.createElement("div",{className:"".concat(o,"-arrow")}),n.cloneElement(a,{ref:Ea(a)?s:void 0}))}));var aV={adjustX:1,adjustY:1},sV=[0,0];const lV={topLeft:{points:["bl","tl"],overflow:aV,offset:[0,-4],targetOffset:sV},top:{points:["bc","tc"],overflow:aV,offset:[0,-4],targetOffset:sV},topRight:{points:["br","tr"],overflow:aV,offset:[0,-4],targetOffset:sV},bottomLeft:{points:["tl","bl"],overflow:aV,offset:[0,4],targetOffset:sV},bottom:{points:["tc","bc"],overflow:aV,offset:[0,4],targetOffset:sV},bottomRight:{points:["tr","br"],overflow:aV,offset:[0,4],targetOffset:sV}};var cV=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function uV(e,t){var r,i=e.arrow,o=void 0!==i&&i,a=e.prefixCls,s=void 0===a?"rc-dropdown":a,l=e.transitionName,c=e.animation,u=e.align,h=e.placement,d=void 0===h?"bottomLeft":h,f=e.placements,p=void 0===f?lV:f,m=e.getPopupContainer,g=e.showAction,v=e.hideAction,y=e.overlayClassName,b=e.overlayStyle,x=e.visible,_=e.trigger,w=void 0===_?["hover"]:_,S=e.autoFocus,E=e.overlay,C=e.children,M=e.onVisibleChange,T=Ca(e,cV),A=Ht(n.useState(),2),P=A[0],R=A[1],I="visible"in e?x:P,O=n.useRef(null),k=n.useRef(null),L=n.useRef(null);n.useImperativeHandle(t,(function(){return O.current}));var N=function(e){R(e),null==M||M(e)};!function(e){var t=e.visible,r=e.triggerRef,i=e.onVisibleChange,o=e.autoFocus,a=e.overlayRef,s=n.useRef(!1),l=function(){var e,n;t&&(null===(e=r.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e),null==i||i(!1))},c=function(){var e;return!(null===(e=a.current)||void 0===e||!e.focus||(a.current.focus(),s.current=!0,0))},u=function(e){switch(e.keyCode){case rV:l();break;case iV:var t=!1;s.current||(t=c()),t?e.preventDefault():l()}};n.useEffect((function(){return t?(window.addEventListener("keydown",u),o&&bs(c,3),function(){window.removeEventListener("keydown",u),s.current=!1}):function(){s.current=!1}}),[t])}({visible:I,triggerRef:L,onVisibleChange:N,autoFocus:S,overlayRef:k});var D,z,U,F=function(){return n.createElement(oV,{ref:k,overlay:E,prefixCls:s,arrow:o})},B=n.cloneElement(C,{className:va()(null===(r=C.props)||void 0===r?void 0:r.className,I&&(D=e.openClassName,void 0!==D?D:"".concat(s,"-open"))),ref:Ea(C)?wa(L,C.ref):void 0}),j=v;return j||-1===w.indexOf("contextMenu")||(j=["click"]),n.createElement(EN,nr({builtinPlacements:p},T,{prefixCls:s,ref:O,popupClassName:va()(y,Ft({},"".concat(s,"-show-arrow"),o)),popupStyle:b,action:w,showAction:g,hideAction:j,popupPlacement:d,popupAlign:u,popupTransitionName:l,popupAnimation:c,popupVisible:I,stretch:(z=e.minOverlayWidthMatchTrigger,U=e.alignPoint,("minOverlayWidthMatchTrigger"in e?z:!U)?"minWidth":""),popup:"function"==typeof E?F:F(),onPopupVisibleChange:N,onPopupClick:function(t){var n=e.onOverlayClick;R(!1),n&&n(t)},getPopupContainer:m}),B)}const hV=n.forwardRef(uV);function dV(e){return t=>n.createElement(tl,{theme:{token:{motion:!1,zIndexPopupBase:0}}},n.createElement(e,Object.assign({},t)))}const fV=(e,t,r,i)=>dV((o=>{const{prefixCls:a,style:s}=o,l=n.useRef(null),[c,u]=n.useState(0),[h,d]=n.useState(0),[f,p]=Ba(!1,{value:o.open}),{getPrefixCls:m}=n.useContext(ia),g=m(t||"select",a);n.useEffect((()=>{if(p(!0),"undefined"!=typeof ResizeObserver){const e=new ResizeObserver((e=>{const t=e[0].target;u(t.offsetHeight+8),d(t.offsetWidth)})),t=setInterval((()=>{var n;const i=r?`.${r(g)}`:`.${g}-dropdown`,o=null===(n=l.current)||void 0===n?void 0:n.querySelector(i);o&&(clearInterval(t),e.observe(o))}),10);return()=>{clearInterval(t),e.disconnect()}}}),[]);let v=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},s),{margin:0}),open:f,visible:f,getPopupContainer:()=>l.current});i&&(v=i(v));const y={paddingBottom:c,position:"relative",minWidth:h};return n.createElement("div",{ref:l,style:y},n.createElement(e,Object.assign({},v)))})),pV=e=>{const[,,,,t]=Co();return t?`${e}-css-var`:""};var mV=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],gV=void 0;function vV(e,t){var r=e.prefixCls,i=e.invalidate,o=e.item,a=e.renderItem,s=e.responsive,l=e.responsiveDisabled,c=e.registerSize,u=e.itemKey,h=e.className,d=e.style,f=e.children,p=e.display,m=e.order,g=e.component,v=void 0===g?"div":g,y=Ca(e,mV),b=s&&!p;function x(e){c(u,e)}n.useEffect((function(){return function(){x(null)}}),[]);var _,w=a&&o!==gV?a(o):f;i||(_={opacity:b?0:1,height:b?0:gV,overflowY:b?"hidden":gV,order:s?m:gV,pointerEvents:b?"none":gV,position:b?"absolute":gV});var S={};b&&(S["aria-hidden"]=!0);var E=n.createElement(v,nr({className:va()(!i&&r,h),style:Xt(Xt({},_),d)},S,y,{ref:t}),w);return s&&(E=n.createElement(JL,{onResize:function(e){x(e.offsetWidth)},disabled:l},E)),E}var yV=n.forwardRef(vV);yV.displayName="Item";const bV=yV;function xV(e,t){var r=Ht(n.useState(t),2),i=r[0],o=r[1];return[i,za((function(t){e((function(){o(t)}))}))]}var _V=n.createContext(null),wV=["component"],SV=["className"],EV=["className"],CV=function(e,t){var r=n.useContext(_V);if(!r){var i=e.component,o=void 0===i?"div":i,a=Ca(e,wV);return n.createElement(o,nr({},a,{ref:t}))}var s=r.className,l=Ca(r,SV),c=e.className,u=Ca(e,EV);return n.createElement(_V.Provider,{value:null},n.createElement(bV,nr({ref:t,className:va()(s,c)},l,u)))},MV=n.forwardRef(CV);MV.displayName="RawItem";const TV=MV;var AV=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],PV="responsive",RV="invalidate";function IV(e){return"+ ".concat(e.length," ...")}function OV(e,t){var r,i=e.prefixCls,a=void 0===i?"rc-overflow":i,s=e.data,l=void 0===s?[]:s,c=e.renderItem,u=e.renderRawItem,h=e.itemKey,d=e.itemWidth,f=void 0===d?10:d,p=e.ssr,m=e.style,g=e.className,v=e.maxCount,y=e.renderRest,b=e.renderRawRest,x=e.suffix,_=e.component,w=void 0===_?"div":_,S=e.itemComponent,E=e.onVisibleChange,C=Ca(e,AV),M="full"===p,T=(r=n.useRef(null),function(e){r.current||(r.current=[],function(e){if("undefined"==typeof MessageChannel)bs(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,o.unstable_batchedUpdates)((function(){r.current.forEach((function(e){e()})),r.current=null}))}))),r.current.push(e)}),A=Ht(xV(T,null),2),P=A[0],R=A[1],I=P||0,O=Ht(xV(T,new Map),2),k=O[0],L=O[1],N=Ht(xV(T,0),2),D=N[0],z=N[1],U=Ht(xV(T,0),2),F=U[0],B=U[1],j=Ht(xV(T,0),2),V=j[0],$=j[1],H=Ht((0,n.useState)(null),2),G=H[0],W=H[1],q=Ht((0,n.useState)(null),2),X=q[0],Y=q[1],K=n.useMemo((function(){return null===X&&M?Number.MAX_SAFE_INTEGER:X||0}),[X,P]),Z=Ht((0,n.useState)(!1),2),J=Z[0],Q=Z[1],ee="".concat(a,"-item"),te=Math.max(D,F),ne=v===PV,re=l.length&&ne,ie=v===RV,oe=re||"number"==typeof v&&l.length>v,ae=(0,n.useMemo)((function(){var e=l;return re?e=null===P&&M?l:l.slice(0,Math.min(l.length,I/f)):"number"==typeof v&&(e=l.slice(0,v)),e}),[l,f,P,v,re]),se=(0,n.useMemo)((function(){return re?l.slice(K+1):l.slice(ae.length)}),[l,ae,re,K]),le=(0,n.useCallback)((function(e,t){var n;return"function"==typeof h?h(e):null!==(n=h&&(null==e?void 0:e[h]))&&void 0!==n?n:t}),[h]),ce=(0,n.useCallback)(c||function(e){return e},[c]);function ue(e,t,n){(X!==e||void 0!==t&&t!==G)&&(Y(e),n||(Q(e<l.length-1),null==E||E(e)),void 0!==t&&W(t))}function he(e,t){L((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return k.get(le(ae[e],e))}Wn((function(){if(I&&"number"==typeof te&&ae){var e=V,t=ae.length,n=t-1;if(!t)return void ue(0,null);for(var r=0;r<t;r+=1){var i=de(r);if(M&&(i=i||0),void 0===i){ue(r-1,void 0,!0);break}if(e+=i,0===n&&e<=I||r===n-1&&e+de(n)<=I){ue(n,null);break}if(e+te>I){ue(r-1,e-i-V+F);break}}x&&de(0)+V>I&&W(null)}}),[I,k,F,V,le,ae]);var fe=J&&!!se.length,pe={};null!==G&&re&&(pe={position:"absolute",left:G,top:0});var me,ge={prefixCls:ee,responsive:re,component:S,invalidate:ie},ve=u?function(e,t){var r=le(e,t);return n.createElement(_V.Provider,{key:r,value:Xt(Xt({},ge),{},{order:t,item:e,itemKey:r,registerSize:he,display:t<=K})},u(e,t))}:function(e,t){var r=le(e,t);return n.createElement(bV,nr({},ge,{order:t,key:r,item:e,renderItem:ce,itemKey:r,registerSize:he,display:t<=K}))},ye={order:fe?K:Number.MAX_SAFE_INTEGER,className:"".concat(ee,"-rest"),registerSize:function(e,t){B(t),z(F)},display:fe};if(b)b&&(me=n.createElement(_V.Provider,{value:Xt(Xt({},ge),ye)},b(se)));else{var be=y||IV;me=n.createElement(bV,nr({},ge,ye),"function"==typeof be?be(se):be)}var xe=n.createElement(w,nr({className:va()(!ie&&a,g),style:m,ref:t},C),ae.map(ve),oe?me:null,x&&n.createElement(bV,nr({},ge,{responsive:ne,responsiveDisabled:!re,order:K,className:"".concat(ee,"-suffix"),registerSize:function(e,t){$(t)},display:!0,style:pe}),x));return ne&&(xe=n.createElement(JL,{onResize:function(e,t){R(t.clientWidth)},disabled:!re},xe)),xe}var kV=n.forwardRef(OV);kV.displayName="Overflow",kV.Item=TV,kV.RESPONSIVE=PV,kV.INVALIDATE=RV;const LV=kV;var NV=n.createContext(null);function DV(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function zV(e){return DV(n.useContext(NV),e)}var UV=["children","locked"],FV=n.createContext(null);function BV(e){var t=e.children,r=e.locked,i=Ca(e,UV),o=n.useContext(FV),a=cn((function(){return e=i,t=Xt({},o),Object.keys(e).forEach((function(n){var r=e[n];void 0!==r&&(t[n]=r)})),t;var e,t}),[o,i],(function(e,t){return!(r||e[0]===t[0]&&vn(e[1],t[1],!0))}));return n.createElement(FV.Provider,{value:a},t)}var jV=[],VV=n.createContext(null);function $V(){return n.useContext(VV)}var HV=n.createContext(jV);function GV(e){var t=n.useContext(HV);return n.useMemo((function(){return void 0!==e?[].concat(Wt(t),[e]):t}),[t,e])}var WV=n.createContext(null);const qV=n.createContext({});function XV(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(uN(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}var YV=QF.LEFT,KV=QF.RIGHT,ZV=QF.UP,JV=QF.DOWN,QV=QF.ENTER,e$=QF.ESC,t$=QF.HOME,n$=QF.END,r$=[ZV,JV,YV,KV];function i$(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Wt(e.querySelectorAll("*")).filter((function(e){return XV(e,t)}));return XV(e,t)&&n.unshift(e),n}(e,!0).filter((function(e){return t.has(e)}))}function o$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=i$(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}var a$=function(e,t){var n=new Set,r=new Map,i=new Map;return e.forEach((function(e){var o=document.querySelector("[data-menu-id='".concat(DV(t,e),"']"));o&&(n.add(o),i.set(o,e),r.set(e,o))})),{elements:n,key2element:r,element2key:i}};var s$="__RC_UTIL_PATH_SPLIT__",l$=function(e){return e.join(s$)},c$="rc-menu-more";function u$(e){var t=n.useRef(e);t.current=e;var r=n.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?r:void 0}var h$=Math.random().toFixed(5).toString().slice(2),d$=0;function f$(e,t,r,i){var o=n.useContext(FV),a=o.activeKey,s=o.onActive,l=o.onInactive,c={active:a===e};return t||(c.onMouseEnter=function(t){null==r||r({key:e,domEvent:t}),s(e)},c.onMouseLeave=function(t){null==i||i({key:e,domEvent:t}),l(e)}),c}function p$(e){var t=n.useContext(FV),r=t.mode,i=t.rtl,o=t.inlineIndent;return"inline"!==r?null:i?{paddingRight:e*o}:{paddingLeft:e*o}}function m$(e){var t,r=e.icon,i=e.props,o=e.children;return null===r||!1===r?null:("function"==typeof r?t=n.createElement(r,Xt({},i)):"boolean"!=typeof r&&(t=r),t||o||null)}var g$=["item"];function v$(e){var t=e.item,n=Ca(e,g$);return Object.defineProperty(n,"item",{get:function(){return gn(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var y$=["title","attribute","elementRef"],b$=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],x$=["active"],_$=function(e){Ra(r,e);var t=Na(r);function r(){return yn(this,r),t.apply(this,arguments)}return xn(r,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.attribute,i=e.elementRef,o=rC(Ca(e,y$),["eventKey","popupClassName","popupOffset","onTitleClick"]);return gn(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),n.createElement(LV.Item,nr({},r,{title:"string"==typeof t?t:void 0},o,{ref:i}))}}]),r}(n.Component),w$=n.forwardRef((function(e,t){var r=e.style,i=e.className,o=e.eventKey,a=(e.warnKey,e.disabled),s=e.itemIcon,l=e.children,c=e.role,u=e.onMouseEnter,h=e.onMouseLeave,d=e.onClick,f=e.onKeyDown,p=e.onFocus,m=Ca(e,b$),g=zV(o),v=n.useContext(FV),y=v.prefixCls,b=v.onItemClick,x=v.disabled,_=v.overflowDisabled,w=v.itemIcon,S=v.selectedKeys,E=v.onActive,C=n.useContext(qV)._internalRenderMenuItem,M="".concat(y,"-item"),T=n.useRef(),A=n.useRef(),P=x||a,R=Sa(t,A),I=GV(o),O=function(e){return{key:o,keyPath:Wt(I).reverse(),item:T.current,domEvent:e}},k=s||w,L=f$(o,P,u,h),N=L.active,D=Ca(L,x$),z=S.includes(o),U=p$(I.length),F={};"option"===e.role&&(F["aria-selected"]=z);var B=n.createElement(_$,nr({ref:T,elementRef:R,role:null===c?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":_&&g?null:g},rC(m,["extra"]),D,F,{component:"li","aria-disabled":a,style:Xt(Xt({},U),r),className:va()(M,Ft(Ft(Ft({},"".concat(M,"-active"),N),"".concat(M,"-selected"),z),"".concat(M,"-disabled"),P),i),onClick:function(e){if(!P){var t=O(e);null==d||d(v$(t)),b(t)}},onKeyDown:function(e){if(null==f||f(e),e.which===QF.ENTER){var t=O(e);null==d||d(v$(t)),b(t)}},onFocus:function(e){E(o),null==p||p(e)}}),l,n.createElement(m$,{props:Xt(Xt({},e),{},{isSelected:z}),icon:k}));return C&&(B=C(B,e,{selected:z})),B}));function S$(e,t){var r=e.eventKey,i=$V(),o=GV(r);return n.useEffect((function(){if(i)return i.registerPath(r,o),function(){i.unregisterPath(r,o)}}),[o]),i?null:n.createElement(w$,nr({},e,{ref:t}))}const E$=n.forwardRef(S$);var C$=["className","children"],M$=function(e,t){var r=e.className,i=e.children,o=Ca(e,C$),a=n.useContext(FV),s=a.prefixCls,l=a.mode,c=a.rtl;return n.createElement("ul",nr({className:va()(s,c&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),r),role:"menu"},o,{"data-menu-list":!0,ref:t}),i)},T$=n.forwardRef(M$);T$.displayName="SubMenuList";const A$=T$;function P$(e,t){return oC(e).map((function(e,r){if(n.isValidElement(e)){var i,o,a=e.key,s=null!==(i=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a;null==s&&(s="tmp_key-".concat([].concat(Wt(t),[r]).join("-")));var l={key:s,eventKey:s};return n.cloneElement(e,l)}return e}))}var R$={adjustX:1,adjustY:1},I$={topLeft:{points:["bl","tl"],overflow:R$},topRight:{points:["br","tr"],overflow:R$},bottomLeft:{points:["tl","bl"],overflow:R$},bottomRight:{points:["tr","br"],overflow:R$},leftTop:{points:["tr","tl"],overflow:R$},leftBottom:{points:["br","bl"],overflow:R$},rightTop:{points:["tl","tr"],overflow:R$},rightBottom:{points:["bl","br"],overflow:R$}},O$={topLeft:{points:["bl","tl"],overflow:R$},topRight:{points:["br","tr"],overflow:R$},bottomLeft:{points:["tl","bl"],overflow:R$},bottomRight:{points:["tr","br"],overflow:R$},rightTop:{points:["tr","tl"],overflow:R$},rightBottom:{points:["br","bl"],overflow:R$},leftTop:{points:["tl","tr"],overflow:R$},leftBottom:{points:["bl","br"],overflow:R$}};function k$(e,t,n){return t||(n?n[e]||n.other:void 0)}var L$={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function N$(e){var t=e.prefixCls,r=e.visible,i=e.children,o=e.popup,a=e.popupStyle,s=e.popupClassName,l=e.popupOffset,c=e.disabled,u=e.mode,h=e.onVisibleChange,d=n.useContext(FV),f=d.getPopupContainer,p=d.rtl,m=d.subMenuOpenDelay,g=d.subMenuCloseDelay,v=d.builtinPlacements,y=d.triggerSubMenuAction,b=d.forceSubMenuRender,x=d.rootClassName,_=d.motion,w=d.defaultMotions,S=Ht(n.useState(!1),2),E=S[0],C=S[1],M=Xt(Xt({},p?O$:I$),v),T=L$[u],A=k$(u,_,w),P=n.useRef(A);"inline"!==u&&(P.current=A);var R=Xt(Xt({},P.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),I=n.useRef();return n.useEffect((function(){return I.current=bs((function(){C(r)})),function(){bs.cancel(I.current)}}),[r]),n.createElement(EN,{prefixCls:t,popupClassName:va()("".concat(t,"-popup"),Ft({},"".concat(t,"-rtl"),p),s,x),stretch:"horizontal"===u?"minWidth":null,getPopupContainer:f,builtinPlacements:M,popupPlacement:T,popupVisible:E,popup:o,popupStyle:a,popupAlign:l&&{offset:l},action:c?[]:[y],mouseEnterDelay:m,mouseLeaveDelay:g,onPopupVisibleChange:h,forceRender:b,popupMotion:R,fresh:!0},i)}function D$(e){var t=e.id,r=e.open,i=e.keyPath,o=e.children,a="inline",s=n.useContext(FV),l=s.prefixCls,c=s.forceSubMenuRender,u=s.motion,h=s.defaultMotions,d=s.mode,f=n.useRef(!1);f.current=d===a;var p=Ht(n.useState(!f.current),2),m=p[0],g=p[1],v=!!f.current&&r;n.useEffect((function(){f.current&&g(!1)}),[d]);var y=Xt({},k$(a,u,h));i.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return f.current||e||g(!0),null==b?void 0:b(e)},m?null:n.createElement(BV,{mode:a,locked:!f.current},n.createElement(Ds,nr({visible:v},y,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var r=e.className,i=e.style;return n.createElement(A$,{id:t,className:r,style:i},o)})))}var z$=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],U$=["active"],F$=n.forwardRef((function(e,t){var r=e.style,i=e.className,o=e.title,a=e.eventKey,s=(e.warnKey,e.disabled),l=e.internalPopupClose,c=e.children,u=e.itemIcon,h=e.expandIcon,d=e.popupClassName,f=e.popupOffset,p=e.popupStyle,m=e.onClick,g=e.onMouseEnter,v=e.onMouseLeave,y=e.onTitleClick,b=e.onTitleMouseEnter,x=e.onTitleMouseLeave,_=Ca(e,z$),w=zV(a),S=n.useContext(FV),E=S.prefixCls,C=S.mode,M=S.openKeys,T=S.disabled,A=S.overflowDisabled,P=S.activeKey,R=S.selectedKeys,I=S.itemIcon,O=S.expandIcon,k=S.onItemClick,L=S.onOpenChange,N=S.onActive,D=n.useContext(qV)._internalRenderSubMenuItem,z=n.useContext(WV).isSubPathKey,U=GV(),F="".concat(E,"-submenu"),B=T||s,j=n.useRef(),V=n.useRef(),$=null!=u?u:I,H=null!=h?h:O,G=M.includes(a),W=!A&&G,q=z(R,a),X=f$(a,B,b,x),Y=X.active,K=Ca(X,U$),Z=Ht(n.useState(!1),2),J=Z[0],Q=Z[1],ee=function(e){B||Q(e)},te=n.useMemo((function(){return Y||"inline"!==C&&(J||z([P],a))}),[C,Y,P,J,a,z]),ne=p$(U.length),re=u$((function(e){null==m||m(v$(e)),k(e)})),ie=w&&"".concat(w,"-popup"),oe=n.createElement("div",nr({role:"menuitem",style:ne,className:"".concat(F,"-title"),tabIndex:B?null:-1,ref:j,title:"string"==typeof o?o:null,"data-menu-id":A&&w?null:w,"aria-expanded":W,"aria-haspopup":!0,"aria-controls":ie,"aria-disabled":B,onClick:function(e){B||(null==y||y({key:a,domEvent:e}),"inline"===C&&L(a,!G))},onFocus:function(){N(a)}},K),o,n.createElement(m$,{icon:"horizontal"!==C?H:void 0,props:Xt(Xt({},e),{},{isOpen:W,isSubMenu:!0})},n.createElement("i",{className:"".concat(F,"-arrow")}))),ae=n.useRef(C);if("inline"!==C&&U.length>1?ae.current="vertical":ae.current=C,!A){var se=ae.current;oe=n.createElement(N$,{mode:se,prefixCls:F,visible:!l&&W&&"inline"!==C,popupClassName:d,popupOffset:f,popupStyle:p,popup:n.createElement(BV,{mode:"horizontal"===se?"vertical":se},n.createElement(A$,{id:ie,ref:V},c)),disabled:B,onVisibleChange:function(e){"inline"!==C&&L(a,e)}},oe)}var le=n.createElement(LV.Item,nr({ref:t,role:"none"},_,{component:"li",style:r,className:va()(F,"".concat(F,"-").concat(C),i,Ft(Ft(Ft(Ft({},"".concat(F,"-open"),W),"".concat(F,"-active"),te),"".concat(F,"-selected"),q),"".concat(F,"-disabled"),B)),onMouseEnter:function(e){ee(!0),null==g||g({key:a,domEvent:e})},onMouseLeave:function(e){ee(!1),null==v||v({key:a,domEvent:e})}}),oe,!A&&n.createElement(D$,{id:ie,open:W,keyPath:U},c));return D&&(le=D(le,e,{selected:q,active:te,open:W,disabled:B})),n.createElement(BV,{onItemClick:re,mode:"horizontal"===C?"vertical":C,itemIcon:$,expandIcon:H},le)}));const B$=n.forwardRef((function(e,t){var r,i=e.eventKey,o=e.children,a=GV(i),s=P$(o,a),l=$V();return n.useEffect((function(){if(l)return l.registerPath(i,a),function(){l.unregisterPath(i,a)}}),[a]),r=l?s:n.createElement(F$,nr({ref:t},e),s),n.createElement(HV.Provider,{value:a},r)}));function j$(e){var t=e.className,r=e.style,i=n.useContext(FV).prefixCls;return $V()?null:n.createElement("li",{role:"separator",className:va()("".concat(i,"-item-divider"),t),style:r})}var V$=["className","title","eventKey","children"],$$=n.forwardRef((function(e,t){var r=e.className,i=e.title,o=(e.eventKey,e.children),a=Ca(e,V$),s=n.useContext(FV).prefixCls,l="".concat(s,"-item-group");return n.createElement("li",nr({ref:t,role:"presentation"},a,{onClick:function(e){return e.stopPropagation()},className:va()(l,r)}),n.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:"string"==typeof i?i:void 0},i),n.createElement("ul",{role:"group",className:"".concat(l,"-list")},o))}));const H$=n.forwardRef((function(e,t){var r=e.eventKey,i=P$(e.children,GV(r));return $V()?i:n.createElement($$,nr({ref:t},rC(e,["warnKey"])),i)}));var G$=["label","children","key","type","extra"];function W$(e,t,r){var i=t.item,o=t.group,a=t.submenu,s=t.divider;return(e||[]).map((function(e,l){if(e&&"object"===zt(e)){var c=e,u=c.label,h=c.children,d=c.key,f=c.type,p=c.extra,m=Ca(c,G$),g=null!=d?d:"tmp-".concat(l);return h||"group"===f?"group"===f?n.createElement(o,nr({key:g},m,{title:u}),W$(h,t,r)):n.createElement(a,nr({key:g},m,{title:u}),W$(h,t,r)):"divider"===f?n.createElement(s,nr({key:g},m)):n.createElement(i,nr({key:g},m,{extra:p}),u,(!!p||0===p)&&n.createElement("span",{className:"".concat(r,"-item-extra")},p))}return null})).filter((function(e){return e}))}function q$(e,t,n,r,i){var o=e,a=Xt({divider:j$,item:E$,group:H$,submenu:B$},r);return t&&(o=W$(t,a,i)),P$(o,n)}var X$=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Y$=[],K$=n.forwardRef((function(e,t){var r,i=e,a=i.prefixCls,s=void 0===a?"rc-menu":a,l=i.rootClassName,c=i.style,u=i.className,h=i.tabIndex,d=void 0===h?0:h,f=i.items,p=i.children,m=i.direction,g=i.id,v=i.mode,y=void 0===v?"vertical":v,b=i.inlineCollapsed,x=i.disabled,_=i.disabledOverflow,w=i.subMenuOpenDelay,S=void 0===w?.1:w,E=i.subMenuCloseDelay,C=void 0===E?.1:E,M=i.forceSubMenuRender,T=i.defaultOpenKeys,A=i.openKeys,P=i.activeKey,R=i.defaultActiveFirst,I=i.selectable,O=void 0===I||I,k=i.multiple,L=void 0!==k&&k,N=i.defaultSelectedKeys,D=i.selectedKeys,z=i.onSelect,U=i.onDeselect,F=i.inlineIndent,B=void 0===F?24:F,j=i.motion,V=i.defaultMotions,$=i.triggerSubMenuAction,H=void 0===$?"hover":$,G=i.builtinPlacements,W=i.itemIcon,q=i.expandIcon,X=i.overflowedIndicator,Y=void 0===X?"...":X,K=i.overflowedIndicatorPopupClassName,Z=i.getPopupContainer,J=i.onClick,Q=i.onOpenChange,ee=i.onKeyDown,te=(i.openAnimation,i.openTransitionName,i._internalRenderMenuItem),ne=i._internalRenderSubMenuItem,re=i._internalComponents,ie=Ca(i,X$),oe=Ht(n.useMemo((function(){return[q$(p,f,Y$,re,s),q$(p,f,Y$,{},s)]}),[p,f,re]),2),ae=oe[0],se=oe[1],le=Ht(n.useState(!1),2),ce=le[0],ue=le[1],he=n.useRef(),de=function(e){var t=Ht(Ba(e,{value:e}),2),r=t[0],i=t[1];return n.useEffect((function(){d$+=1;var e="".concat(h$,"-").concat(d$);i("rc-menu-uuid-".concat(e))}),[]),r}(g),fe="rtl"===m,pe=Ht(Ba(T,{value:A,postState:function(e){return e||Y$}}),2),me=pe[0],ge=pe[1],ve=function(e){function t(){ge(e),null==Q||Q(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,o.flushSync)(t):t()},ye=Ht(n.useState(me),2),be=ye[0],xe=ye[1],_e=n.useRef(!1),we=Ht(n.useMemo((function(){return"inline"!==y&&"vertical"!==y||!b?[y,!1]:["vertical",b]}),[y,b]),2),Se=we[0],Ee=we[1],Ce="inline"===Se,Me=Ht(n.useState(Se),2),Te=Me[0],Ae=Me[1],Pe=Ht(n.useState(Ee),2),Re=Pe[0],Ie=Pe[1];n.useEffect((function(){Ae(Se),Ie(Ee),_e.current&&(Ce?ge(be):ve(Y$))}),[Se,Ee]);var Oe=Ht(n.useState(0),2),ke=Oe[0],Le=Oe[1],Ne=ke>=ae.length-1||"horizontal"!==Te||_;n.useEffect((function(){Ce&&xe(me)}),[me]),n.useEffect((function(){return _e.current=!0,function(){_e.current=!1}}),[]);var De=function(){var e=Ht(n.useState({}),2)[1],t=(0,n.useRef)(new Map),r=(0,n.useRef)(new Map),i=Ht(n.useState([]),2),o=i[0],a=i[1],s=(0,n.useRef)(0),l=(0,n.useRef)(!1),c=(0,n.useCallback)((function(n,i){var o=l$(i);r.current.set(o,n),t.current.set(n,o),s.current+=1;var a,c=s.current;a=function(){c===s.current&&(l.current||e({}))},Promise.resolve().then(a)}),[]),u=(0,n.useCallback)((function(e,n){var i=l$(n);r.current.delete(i),t.current.delete(e)}),[]),h=(0,n.useCallback)((function(e){a(e)}),[]),d=(0,n.useCallback)((function(e,n){var r=(t.current.get(e)||"").split(s$);return n&&o.includes(r[0])&&r.unshift(c$),r}),[o]),f=(0,n.useCallback)((function(e,t){return e.filter((function(e){return void 0!==e})).some((function(e){return d(e,!0).includes(t)}))}),[d]),p=(0,n.useCallback)((function(e){var n="".concat(t.current.get(e)).concat(s$),i=new Set;return Wt(r.current.keys()).forEach((function(e){e.startsWith(n)&&i.add(r.current.get(e))})),i}),[]);return n.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:u,refreshOverflowKeys:h,isSubPathKey:f,getKeyPath:d,getKeys:function(){var e=Wt(t.current.keys());return o.length&&e.push(c$),e},getSubPathKeys:p}}(),ze=De.registerPath,Ue=De.unregisterPath,Fe=De.refreshOverflowKeys,Be=De.isSubPathKey,je=De.getKeyPath,Ve=De.getKeys,$e=De.getSubPathKeys,He=n.useMemo((function(){return{registerPath:ze,unregisterPath:Ue}}),[ze,Ue]),Ge=n.useMemo((function(){return{isSubPathKey:Be}}),[Be]);n.useEffect((function(){Fe(Ne?Y$:ae.slice(ke+1).map((function(e){return e.key})))}),[ke,Ne]);var We=Ht(Ba(P||R&&(null===(r=ae[0])||void 0===r?void 0:r.key),{value:P}),2),qe=We[0],Xe=We[1],Ye=u$((function(e){Xe(e)})),Ke=u$((function(){Xe(void 0)}));(0,n.useImperativeHandle)(t,(function(){return{list:he.current,focus:function(e){var t,n,r=Ve(),i=a$(r,de),o=i.elements,a=i.key2element,s=i.element2key,l=i$(he.current,o),c=null!=qe?qe:l[0]?s.get(l[0]):null===(t=ae.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key,u=a.get(c);c&&u&&(null==u||null===(n=u.focus)||void 0===n||n.call(u,e))}}}));var Ze=Ht(Ba(N||[],{value:D,postState:function(e){return Array.isArray(e)?e:null==e?Y$:[e]}}),2),Je=Ze[0],Qe=Ze[1],et=u$((function(e){null==J||J(v$(e)),function(e){if(O){var t,n=e.key,r=Je.includes(n);t=L?r?Je.filter((function(e){return e!==n})):[].concat(Wt(Je),[n]):[n],Qe(t);var i=Xt(Xt({},e),{},{selectedKeys:t});r?null==U||U(i):null==z||z(i)}!L&&me.length&&"inline"!==Te&&ve(Y$)}(e)})),tt=u$((function(e,t){var n=me.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Te){var r=$e(e);n=n.filter((function(e){return!r.has(e)}))}vn(me,n,!0)||ve(n,!0)})),nt=function(e,t,r,i,o,a,s,l,c,u){var h=n.useRef(),d=n.useRef();d.current=t;var f=function(){bs.cancel(h.current)};return n.useEffect((function(){return function(){f()}}),[]),function(n){var p=n.which;if([].concat(r$,[QV,e$,t$,n$]).includes(p)){var m=a(),g=a$(m,i),v=g,y=v.elements,b=v.key2element,x=v.element2key,_=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),y),w=x.get(_),S=function(e,t,n,r){var i,o="prev",a="next",s="children",l="parent";if("inline"===e&&r===QV)return{inlineTrigger:!0};var c=Ft(Ft({},ZV,o),JV,a),u=Ft(Ft(Ft(Ft({},YV,n?a:o),KV,n?o:a),JV,s),QV,s),h=Ft(Ft(Ft(Ft(Ft(Ft({},ZV,o),JV,a),QV,s),e$,l),YV,n?s:l),KV,n?l:s);switch(null===(i={inline:c,horizontal:u,vertical:h,inlineSub:c,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===i?void 0:i[r]){case o:return{offset:-1,sibling:!0};case a:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}(e,1===s(w,!0).length,r,p);if(!S&&p!==t$&&p!==n$)return;(r$.includes(p)||[t$,n$].includes(p))&&n.preventDefault();var E=function(e){if(e){var t=e,n=e.querySelector("a");null!=n&&n.getAttribute("href")&&(t=n);var r=x.get(e);l(r),f(),h.current=bs((function(){d.current===r&&t.focus()}))}};if([t$,n$].includes(p)||S.sibling||!_){var C,M,T=i$(C=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):o.current,y);M=p===t$?T[0]:p===n$?T[T.length-1]:o$(C,y,_,S.offset),E(M)}else if(S.inlineTrigger)c(w);else if(S.offset>0)c(w,!0),f(),h.current=bs((function(){g=a$(m,i);var e=_.getAttribute("aria-controls"),t=o$(document.getElementById(e),g.elements);E(t)}),5);else if(S.offset<0){var A=s(w,!0),P=A[A.length-2],R=b.get(P);c(P,!1),E(R)}}null==u||u(n)}}(Te,qe,fe,de,he,Ve,je,Xe,(function(e,t){var n=null!=t?t:!me.includes(e);tt(e,n)}),ee);n.useEffect((function(){ue(!0)}),[]);var rt=n.useMemo((function(){return{_internalRenderMenuItem:te,_internalRenderSubMenuItem:ne}}),[te,ne]),it="horizontal"!==Te||_?ae:ae.map((function(e,t){return n.createElement(BV,{key:e.key,overflowDisabled:t>ke},e)})),ot=n.createElement(LV,nr({id:g,ref:he,prefixCls:"".concat(s,"-overflow"),component:"ul",itemComponent:E$,className:va()(s,"".concat(s,"-root"),"".concat(s,"-").concat(Te),u,Ft(Ft({},"".concat(s,"-inline-collapsed"),Re),"".concat(s,"-rtl"),fe),l),dir:m,style:c,role:"menu",tabIndex:d,data:it,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,r=t?ae.slice(-t):null;return n.createElement(B$,{eventKey:c$,title:Y,disabled:Ne,internalPopupClose:0===t,popupClassName:K},r)},maxCount:"horizontal"!==Te||_?LV.INVALIDATE:LV.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Le(e)},onKeyDown:nt},ie));return n.createElement(qV.Provider,{value:rt},n.createElement(NV.Provider,{value:de},n.createElement(BV,{prefixCls:s,rootClassName:l,mode:Te,openKeys:me,rtl:fe,disabled:x,motion:ce?j:null,defaultMotions:ce?V:null,activeKey:qe,onActive:Ye,onInactive:Ke,selectedKeys:Je,inlineIndent:B,subMenuOpenDelay:S,subMenuCloseDelay:C,forceSubMenuRender:M,builtinPlacements:G,triggerSubMenuAction:H,getPopupContainer:Z,itemIcon:W,expandIcon:q,onItemClick:et,onOpenChange:tt},n.createElement(WV.Provider,{value:Ge},ot),n.createElement("div",{style:{display:"none"},"aria-hidden":!0},n.createElement(VV.Provider,{value:He},se)))))})),Z$=K$;Z$.Item=E$,Z$.SubMenu=B$,Z$.ItemGroup=H$,Z$.Divider=j$;const J$=Z$,Q$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};var eH=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Q$}))};const tH=n.forwardRef(eH),nH=(0,n.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});const rH=e=>{const{prefixCls:t,className:r,dashed:i}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","dashed"]),{getPrefixCls:a}=n.useContext(ia),s=a("menu",t),l=va()({[`${s}-item-divider-dashed`]:!!i},r);return n.createElement(j$,Object.assign({className:l},o))},iH=e=>{var t;const{className:r,children:i,icon:o,title:a,danger:s,extra:l}=e,{prefixCls:c,firstLevel:u,direction:h,disableMenuItemTitleTooltip:d,inlineCollapsed:f}=n.useContext(nH),{siderCollapsed:p}=n.useContext(oM);let m=a;void 0===a?m=u?i:"":!1===a&&(m="");const g={title:m};p||f||(g.title=null,g.open=!1);const v=oC(i).length;let y=n.createElement(E$,Object.assign({},rC(e,["title","icon","danger"]),{className:va()({[`${c}-item-danger`]:s,[`${c}-item-only-child`]:1===(o?v+1:v)},r),title:"string"==typeof a?a:void 0}),Tz(o,{className:va()(n.isValidElement(o)?null===(t=o.props)||void 0===t?void 0:t.className:"",`${c}-item-icon`)}),(e=>{const t=null==i?void 0:i[0],r=n.createElement("span",{className:va()(`${c}-title-content`,{[`${c}-title-content-with-extra`]:!!l||0===l})},i);return(!o||n.isValidElement(i)&&"span"===i.type)&&i&&e&&u&&"string"==typeof t?n.createElement("div",{className:`${c}-inline-collapsed-noicon`},t.charAt(0)):r})(f));return d||(y=n.createElement(qz,Object.assign({},g,{placement:"rtl"===h?"left":"right",overlayClassName:`${c}-inline-collapsed-tooltip`}),y)),y};const oH=n.createContext(null),aH=n.forwardRef(((e,t)=>{const{children:r}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children"]),o=n.useContext(oH),a=n.useMemo((()=>Object.assign(Object.assign({},o),i)),[o,i.prefixCls,i.mode,i.selectable,i.rootClassName]),s=function(e){return(0,n.isValidElement)(e)&&!(0,xa.isFragment)(e)}(l=r)&&Ea(l);var l;const c=Sa(t,s?r.ref:null);return n.createElement(oH.Provider,{value:a},n.createElement(iz,{space:!0},s?n.cloneElement(r,{ref:c}):r))})),sH=oH,lH=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},\n        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},\n        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),cH=new ei("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),uH=new ei("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),hH=new ei("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),dH=new ei("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),fH=new ei("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),pH=new ei("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),mH=new ei("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),gH=new ei("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),vH={"slide-up":{inKeyframes:cH,outKeyframes:uH},"slide-down":{inKeyframes:hH,outKeyframes:dH},"slide-left":{inKeyframes:fH,outKeyframes:pH},"slide-right":{inKeyframes:mH,outKeyframes:gH}},yH=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=vH[t];return[Rz(r,i,o,e.motionDurationMid),{[`\n      ${r}-enter,\n      ${r}-appear\n    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},bH=e=>{const{componentCls:t,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:i,lineWidth:o,lineType:a,itemPaddingInline:s}=e;return{[`${t}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${Un(o)} ${a} ${i}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${t}-item:hover,\n        > ${t}-item-active,\n        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},xH=e=>{let{componentCls:t,menuArrowOffset:n,calc:r}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,\n    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Un(r(n).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Un(n)})`}}}}},_H=e=>Object.assign({},Vs(e)),wH=(e,t)=>{const{componentCls:n,itemColor:r,itemSelectedColor:i,groupTitleColor:o,itemBg:a,subMenuItemBg:s,itemSelectedBg:l,activeBarHeight:c,activeBarWidth:u,activeBarBorderWidth:h,motionDurationSlow:d,motionEaseInOut:f,motionEaseOut:p,itemPaddingInline:m,motionDurationMid:g,itemHoverColor:v,lineType:y,colorSplit:b,itemDisabledColor:x,dangerItemColor:_,dangerItemHoverColor:w,dangerItemSelectedColor:S,dangerItemActiveBg:E,dangerItemSelectedBg:C,popupBg:M,itemHoverBg:T,itemActiveBg:A,menuSubMenuBg:P,horizontalItemSelectedColor:R,horizontalItemSelectedBg:I,horizontalItemBorderRadius:O,horizontalItemHoverBg:k}=e;return{[`${n}-${t}, ${n}-${t} > ${n}`]:{color:r,background:a,[`&${n}-root:focus-visible`]:Object.assign({},_H(e)),[`${n}-item`]:{"&-group-title, &-extra":{color:o}},[`${n}-submenu-selected`]:{[`> ${n}-submenu-title`]:{color:i}},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},_H(e))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${x} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:v}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:T},"&:active":{backgroundColor:A}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:T},"&:active":{backgroundColor:A}}},[`${n}-item-danger`]:{color:_,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:w}},[`&${n}-item:active`]:{background:E}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:i,[`&${n}-item-danger`]:{color:S},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:l,[`&${n}-item-danger`]:{backgroundColor:C}},[`&${n}-submenu > ${n}`]:{backgroundColor:P},[`&${n}-popup > ${n}`]:{backgroundColor:M},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:M},[`&${n}-horizontal`]:Object.assign(Object.assign({},"dark"===t?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:h,marginTop:e.calc(h).mul(-1).equal(),marginBottom:0,borderRadius:O,"&::after":{position:"absolute",insetInline:m,bottom:0,borderBottom:`${Un(c)} solid transparent`,transition:`border-color ${d} ${f}`,content:'""'},"&:hover, &-active, &-open":{background:k,"&::after":{borderBottomWidth:c,borderBottomColor:R}},"&-selected":{color:R,backgroundColor:I,"&:hover":{backgroundColor:I},"&::after":{borderBottomWidth:c,borderBottomColor:R}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${Un(h)} ${y} ${b}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:s},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Un(u)} solid ${i}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${g} ${p}`,`opacity ${g} ${p}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:S}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${g} ${f}`,`opacity ${g} ${f}`].join(",")}}}}}},SH=e=>{const{componentCls:t,itemHeight:n,itemMarginInline:r,padding:i,menuArrowSize:o,marginXS:a,itemMarginBlock:s,itemWidth:l,itemPaddingInline:c}=e,u=e.calc(o).add(i).add(a).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:n,lineHeight:Un(n),paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:s,width:l},[`> ${t}-item,\n            > ${t}-submenu > ${t}-submenu-title`]:{height:n,lineHeight:Un(n)},[`${t}-item-group-list ${t}-submenu-title,\n            ${t}-submenu-title`]:{paddingInlineEnd:u}}},EH=e=>{const{componentCls:t,iconCls:n,itemHeight:r,colorTextLightSolid:i,dropdownWidth:o,controlHeightLG:a,motionEaseOut:s,paddingXL:l,itemMarginInline:c,fontSizeLG:u,motionDurationFast:h,motionDurationSlow:d,paddingXS:f,boxShadowSecondary:p,collapsedWidth:m,collapsedIconSize:g}=e,v={height:r,lineHeight:Un(r),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},SH(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},SH(e)),{boxShadow:p})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:o,maxHeight:`calc(100vh - ${Un(e.calc(a).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${d}`,`background ${d}`,`padding ${h} ${s}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:v,[`& ${t}-item-group-title`]:{paddingInlineStart:l}},[`${t}-item`]:v}},{[`${t}-inline-collapsed`]:{width:m,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:u,textAlign:"center"}}},[`> ${t}-item,\n          > ${t}-item-group > ${t}-item-group-list > ${t}-item,\n          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,\n          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Un(e.calc(u).div(2).equal())} - ${Un(c)})`,textOverflow:"clip",[`\n            ${t}-submenu-arrow,\n            ${t}-submenu-expand-icon\n          `]:{opacity:0},[`${t}-item-icon, ${n}`]:{margin:0,fontSize:g,lineHeight:Un(r),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:i}},[`${t}-item-group-title`]:Object.assign(Object.assign({},Fs),{paddingInline:f})}}]},CH=e=>{const{componentCls:t,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:i,motionEaseOut:o,iconCls:a,iconSize:s,iconMarginInlineEnd:l}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${i}`].join(","),[`${t}-item-icon, ${a}`]:{minWidth:s,fontSize:s,transition:[`font-size ${r} ${o}`,`margin ${n} ${i}`,`color ${n}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${n} ${i}`,`margin ${n}`,`color ${n}`].join(",")}},[`${t}-item-icon`]:Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),[`&${t}-item-only-child`]:{[`> ${a}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},MH=e=>{const{componentCls:t,motionDurationSlow:n,motionEaseInOut:r,borderRadius:i,menuArrowSize:o,menuArrowOffset:a}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(o).mul(.6).equal(),height:e.calc(o).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:i,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Un(e.calc(a).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Un(a)})`}}}}},TH=e=>{const{antCls:t,componentCls:n,fontSize:r,motionDurationSlow:i,motionDurationMid:o,motionEaseInOut:a,paddingXS:s,padding:l,colorSplit:c,lineWidth:u,zIndexPopup:h,borderRadiusLG:d,subMenuItemBorderRadius:f,menuArrowSize:p,menuArrowOffset:m,lineType:g,groupTitleLineHeight:v,groupTitleFontSize:y}=e;return[{"":{[n]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${i} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${Un(s)} ${Un(l)}`,fontSize:y,lineHeight:v,transition:`all ${i}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`,`padding ${o} ${a}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${i} ${a}`,`padding ${i} ${a}`].join(",")},[`${n}-title-content`]:{transition:`color ${i}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:e.padding,fontSize:e.fontSizeSM}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:c,borderStyle:g,borderWidth:0,borderTopWidth:u,marginBlock:u,padding:0,"&-dashed":{borderStyle:"dashed"}}}),CH(e)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${Un(e.calc(r).mul(2).equal())} ${Un(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:h,borderRadius:d,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:d},CH(e)),MH(e)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:f},[`${n}-submenu-title::after`]:{transition:`transform ${i} ${a}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),MH(e)),{[`&-inline-collapsed ${n}-submenu-arrow,\n        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Un(m)})`},"&::after":{transform:`rotate(45deg) translateX(${Un(e.calc(m).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${Un(e.calc(p).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Un(e.calc(m).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Un(m)})`}}})},{[`${t}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},AH=e=>{var t,n,r;const{colorPrimary:i,colorError:o,colorTextDisabled:a,colorErrorBg:s,colorText:l,colorTextDescription:c,colorBgContainer:u,colorFillAlter:h,colorFillContent:d,lineWidth:f,lineWidthBold:p,controlItemBgActive:m,colorBgTextHover:g,controlHeightLG:v,lineHeight:y,colorBgElevated:b,marginXXS:x,padding:_,fontSize:w,controlHeightSM:S,fontSizeLG:E,colorTextLightSolid:C,colorErrorHover:M}=e,T=null!==(t=e.activeBarWidth)&&void 0!==t?t:0,A=null!==(n=e.activeBarBorderWidth)&&void 0!==n?n:f,P=null!==(r=e.itemMarginInline)&&void 0!==r?r:e.marginXXS,R=new ro(C).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:i,horizontalItemHoverColor:i,colorGroupTitle:c,groupTitleColor:c,colorItemTextSelected:i,itemSelectedColor:i,colorItemTextSelectedHorizontal:i,horizontalItemSelectedColor:i,colorItemBg:u,itemBg:u,colorItemBgHover:g,itemHoverBg:g,colorItemBgActive:d,itemActiveBg:m,colorSubItemBg:h,subMenuItemBg:h,colorItemBgSelected:m,itemSelectedBg:m,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:T,colorActiveBarHeight:p,activeBarHeight:p,colorActiveBarBorderSize:f,activeBarBorderWidth:A,colorItemTextDisabled:a,itemDisabledColor:a,colorDangerItemText:o,dangerItemColor:o,colorDangerItemTextHover:o,dangerItemHoverColor:o,colorDangerItemTextSelected:o,dangerItemSelectedColor:o,colorDangerItemBgActive:s,dangerItemActiveBg:s,colorDangerItemBgSelected:s,dangerItemSelectedBg:s,itemMarginInline:P,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:v,groupTitleLineHeight:y,collapsedWidth:2*v,popupBg:b,itemMarginBlock:x,itemPaddingInline:_,horizontalLineHeight:1.15*v+"px",iconSize:w,iconMarginInlineEnd:S-w,collapsedIconSize:E,groupTitleFontSize:w,darkItemDisabledColor:new ro(C).setAlpha(.25).toRgbString(),darkItemColor:R,darkDangerItemColor:o,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:C,darkItemSelectedBg:i,darkDangerItemSelectedBg:o,darkItemHoverBg:"transparent",darkGroupTitleColor:R,darkItemHoverColor:C,darkDangerItemHoverColor:M,darkDangerItemSelectedColor:C,darkDangerItemActiveBg:o,itemWidth:T?`calc(100% + ${A}px)`:`calc(100% - ${2*P}px)`}},PH=e=>{var t;const{popupClassName:r,icon:i,title:o,theme:a}=e,s=n.useContext(nH),{prefixCls:l,inlineCollapsed:c,theme:u}=s,h=GV();let d;if(i){const e=n.isValidElement(o)&&"span"===o.type;d=n.createElement(n.Fragment,null,Tz(i,{className:va()(n.isValidElement(i)?null===(t=i.props)||void 0===t?void 0:t.className:"",`${l}-item-icon`)}),e?o:n.createElement("span",{className:`${l}-title-content`},o))}else d=c&&!h.length&&o&&"string"==typeof o?n.createElement("div",{className:`${l}-inline-collapsed-noicon`},o.charAt(0)):n.createElement("span",{className:`${l}-title-content`},o);const f=n.useMemo((()=>Object.assign(Object.assign({},s),{firstLevel:!1})),[s]),[p]=cz("Menu");return n.createElement(nH.Provider,{value:f},n.createElement(B$,Object.assign({},rC(e,["icon"]),{title:d,popupClassName:va()(l,r,`${l}-${a||u}`),popupStyle:Object.assign({zIndex:p},e.popupStyle)})))};function RH(e){return null===e||!1===e}const IH={item:iH,submenu:PH,divider:rH},OH=(0,n.forwardRef)(((e,t)=>{var r;const i=n.useContext(sH),o=i||{},{getPrefixCls:a,getPopupContainer:s,direction:l,menu:c}=n.useContext(ia),u=a(),{prefixCls:h,className:d,style:f,theme:p="light",expandIcon:m,_internalDisableMenuItemTitleTooltip:g,inlineCollapsed:v,siderCollapsed:y,rootClassName:b,mode:x,selectable:_,onClick:w,overflowedIndicatorPopupClassName:S}=e,E=rC(function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),["collapsedWidth"]);null===(r=o.validator)||void 0===r||r.call(o,{mode:x});const C=za((function(){var e;null==w||w.apply(void 0,arguments),null===(e=o.onClick)||void 0===e||e.call(o)})),M=o.mode||x,T=null!=_?_:o.selectable,A=null!=v?v:y,P={horizontal:{motionName:`${u}-slide-up`},inline:mz(u),other:{motionName:`${u}-zoom-big`}},R=a("menu",h||o.prefixCls),I=pV(R),[O,k,L]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return YC("Menu",(e=>{const{colorBgElevated:t,controlHeightLG:n,fontSize:r,darkItemColor:i,darkDangerItemColor:o,darkItemBg:a,darkSubMenuItemBg:s,darkItemSelectedColor:l,darkItemSelectedBg:c,darkDangerItemSelectedBg:u,darkItemHoverBg:h,darkGroupTitleColor:d,darkItemHoverColor:f,darkItemDisabledColor:p,darkDangerItemHoverColor:m,darkDangerItemSelectedColor:g,darkDangerItemActiveBg:v,popupBg:y,darkPopupBg:b}=e,x=e.calc(r).div(7).mul(5).equal(),_=$C(e,{menuArrowSize:x,menuHorizontalHeight:e.calc(n).mul(1.15).equal(),menuArrowOffset:e.calc(x).mul(.25).equal(),menuSubMenuBg:t,calc:e.calc,popupBg:y}),w=$C(_,{itemColor:i,itemHoverColor:f,groupTitleColor:d,itemSelectedColor:l,itemBg:a,popupBg:b,subMenuItemBg:s,itemActiveBg:"transparent",itemSelectedBg:c,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:h,itemDisabledColor:p,dangerItemColor:o,dangerItemHoverColor:m,dangerItemSelectedColor:g,dangerItemActiveBg:v,dangerItemSelectedBg:u,menuSubMenuBg:s,horizontalItemSelectedColor:l,horizontalItemSelectedBg:c});return[TH(_),bH(_),EH(_),wH(_,"light"),wH(w,"dark"),xH(_),lH(_),yH(_,"slide-up"),yH(_,"slide-down"),Uz(_,"zoom-big")]}),AH,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],unitless:{groupTitleLineHeight:!0}})(e,t)}(R,I,!i),N=va()(`${R}-${p}`,null==c?void 0:c.className,d),D=n.useMemo((()=>{var e,t;if("function"==typeof m||RH(m))return m||null;if("function"==typeof o.expandIcon||RH(o.expandIcon))return o.expandIcon||null;if("function"==typeof(null==c?void 0:c.expandIcon)||RH(null==c?void 0:c.expandIcon))return(null==c?void 0:c.expandIcon)||null;const r=null!==(e=null!=m?m:null==o?void 0:o.expandIcon)&&void 0!==e?e:null==c?void 0:c.expandIcon;return Tz(r,{className:va()(`${R}-submenu-expand-icon`,n.isValidElement(r)?null===(t=r.props)||void 0===t?void 0:t.className:void 0)})}),[m,null==o?void 0:o.expandIcon,null==c?void 0:c.expandIcon,R]),z=n.useMemo((()=>({prefixCls:R,inlineCollapsed:A||!1,direction:l,firstLevel:!0,theme:p,mode:M,disableMenuItemTitleTooltip:g})),[R,A,l,g,p]);return O(n.createElement(sH.Provider,{value:null},n.createElement(nH.Provider,{value:z},n.createElement(J$,Object.assign({getPopupContainer:s,overflowedIndicator:n.createElement(tH,null),overflowedIndicatorPopupClassName:va()(R,`${R}-${p}`,S),mode:M,selectable:T,onClick:C},E,{inlineCollapsed:A,style:Object.assign(Object.assign({},null==c?void 0:c.style),f),className:N,prefixCls:R,direction:l,defaultMotions:P,expandIcon:D,ref:t,rootClassName:va()(b,k,o.rootClassName,L,I),_internalComponents:IH})))))})),kH=(0,n.forwardRef)(((e,t)=>{const r=(0,n.useRef)(null),i=n.useContext(oM);return(0,n.useImperativeHandle)(t,(()=>({menu:r.current,focus:e=>{var t;null===(t=r.current)||void 0===t||t.focus(e)}}))),n.createElement(OH,Object.assign({ref:r},e,i))}));kH.Item=iH,kH.SubMenu=PH,kH.Divider=rH,kH.ItemGroup=H$;const LH=kH,NH=new ei("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),DH=new ei("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),zH=new ei("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),UH=new ei("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),FH=new ei("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),BH=new ei("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),jH={"move-up":{inKeyframes:new ei("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new ei("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:NH,outKeyframes:DH},"move-left":{inKeyframes:zH,outKeyframes:UH},"move-right":{inKeyframes:FH,outKeyframes:BH}},VH=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=jH[t];return[Rz(r,i,o,e.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},$H=e=>{const{componentCls:t,menuCls:n,colorError:r,colorTextLightSolid:i}=e,o=`${n}-item`;return{[`${t}, ${t}-menu-submenu`]:{[`${n} ${o}`]:{[`&${o}-danger:not(${o}-disabled)`]:{color:r,"&:hover":{color:i,backgroundColor:r}}}}}},HH=e=>{const{componentCls:t,menuCls:n,zIndexPopup:r,dropdownArrowDistance:i,sizePopupArrow:o,antCls:a,iconCls:s,motionDurationMid:l,paddingBlock:c,fontSize:u,dropdownEdgeChildPadding:h,colorTextDisabled:d,fontSizeIcon:f,controlPaddingHorizontal:p,colorBgElevated:m}=e;return[{[t]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:e.calc(o).div(2).sub(i).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${a}-btn`]:{[`& > ${s}-down, & > ${a}-btn-icon > ${s}-down`]:{fontSize:f}},[`${t}-wrap`]:{position:"relative",[`${a}-btn > ${s}-down`]:{fontSize:f},[`${s}-down::before`]:{transition:`transform ${l}`}},[`${t}-wrap-open`]:{[`${s}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottomLeft,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottomLeft,\n          &${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottom,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottom,\n          &${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottomRight,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottomRight`]:{animationName:cH},[`&${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-topLeft,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-topLeft,\n          &${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-top,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-top,\n          &${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-topRight,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-topRight`]:{animationName:hH},[`&${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottomLeft,\n          &${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottom,\n          &${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottomRight`]:{animationName:uH},[`&${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-topLeft,\n          &${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-top,\n          &${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-topRight`]:{animationName:dH}}},xz(e,m,{arrowPlacement:{top:!0,bottom:!0}}),{[`${t} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${t}, ${t}-menu-submenu`]:Object.assign(Object.assign({},Bs(e)),{[n]:Object.assign(Object.assign({padding:h,listStyleType:"none",backgroundColor:m,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},$s(e)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${Un(c)} ${Un(p)}`,color:e.colorTextDescription,transition:`all ${l}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:u,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${l}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:e.padding,marginInlineStart:"auto",fontSize:e.fontSizeSM,color:e.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${Un(c)} ${Un(p)}`,color:e.colorText,fontWeight:"normal",fontSize:u,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${l}`,borderRadius:e.borderRadiusSM,"&:hover, &-active":{backgroundColor:e.controlItemBgHover}},$s(e)),{"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:d,cursor:"not-allowed","&:hover":{color:d,backgroundColor:m,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${Un(e.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit},[`${t}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,[`${t}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:f,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${Un(e.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:e.calc(p).add(e.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${t}-menu-submenu-title`]:{[`&, ${t}-menu-submenu-arrow-icon`]:{color:d,backgroundColor:m,cursor:"not-allowed"}},[`${n}-submenu-selected ${t}-menu-submenu-title`]:{color:e.colorPrimary}})})},[yH(e,"slide-up"),yH(e,"slide-down"),VH(e,"move-up"),VH(e,"move-down"),Uz(e,"zoom-big")]]},GH=YC("Dropdown",(e=>{const{marginXXS:t,sizePopupArrow:n,paddingXXS:r,componentCls:i}=e,o=$C(e,{menuCls:`${i}-menu`,dropdownArrowDistance:e.calc(n).div(2).add(t).equal(),dropdownEdgeChildPadding:r});return[HH(o),$H(o)]}),(e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+50,paddingBlock:(e.controlHeight-e.fontSize*e.lineHeight)/2},yz({contentRadius:e.borderRadiusLG,limitVerticalRadius:!0})),gz(e))),{resetStyle:!1}),WH=e=>{var t;const{menu:r,arrow:i,prefixCls:o,children:a,trigger:s,disabled:l,dropdownRender:c,getPopupContainer:u,overlayClassName:h,rootClassName:d,overlayStyle:f,open:p,onOpenChange:m,visible:g,onVisibleChange:v,mouseEnterDelay:y=.15,mouseLeaveDelay:b=.1,autoAdjustOverflow:x=!0,placement:_="",overlay:w,transitionName:S}=e,{getPopupContainer:E,getPrefixCls:C,direction:M,dropdown:T}=n.useContext(ia);jo();const A=n.useMemo((()=>{const e=C();return void 0!==S?S:_.includes("top")?`${e}-slide-down`:`${e}-slide-up`}),[C,_,S]),P=n.useMemo((()=>_?_.includes("Center")?_.slice(0,_.indexOf("Center")):_:"rtl"===M?"bottomRight":"bottomLeft"),[_,M]),R=C("dropdown",o),I=pV(R),[O,k,L]=GH(R,I),[,N]=Co(),D=n.Children.only(a),z=Tz(D,{className:va()(`${R}-trigger`,{[`${R}-rtl`]:"rtl"===M},D.props.className),disabled:null!==(t=D.props.disabled)&&void 0!==t?t:l}),U=l?[]:s,F=!!(null==U?void 0:U.includes("contextMenu")),[B,j]=Ba(!1,{value:null!=p?p:g}),V=za((e=>{null==m||m(e,{source:"trigger"}),null==v||v(e),j(e)})),$=va()(h,d,k,L,I,null==T?void 0:T.className,{[`${R}-rtl`]:"rtl"===M}),H=Ez({arrowPointAtCenter:"object"==typeof i&&i.pointAtCenter,autoAdjustOverflow:x,offset:N.marginXXS,arrowWidth:i?N.sizePopupArrow:0,borderRadius:N.borderRadius}),G=n.useCallback((()=>{(null==r?void 0:r.selectable)&&(null==r?void 0:r.multiple)||(null==m||m(!1,{source:"menu"}),j(!1))}),[null==r?void 0:r.selectable,null==r?void 0:r.multiple]),[W,q]=cz("Dropdown",null==f?void 0:f.zIndex);let X=n.createElement(hV,Object.assign({alignPoint:F},rC(e,["rootClassName"]),{mouseEnterDelay:y,mouseLeaveDelay:b,visible:B,builtinPlacements:H,arrow:!!i,overlayClassName:$,prefixCls:R,getPopupContainer:u||E,transitionName:A,trigger:U,overlay:()=>{let e;return e=(null==r?void 0:r.items)?n.createElement(LH,Object.assign({},r)):"function"==typeof w?w():w,c&&(e=c(e)),e=n.Children.only("string"==typeof e?n.createElement("span",null,e):e),n.createElement(aH,{prefixCls:`${R}-menu`,rootClassName:va()(L,I),expandIcon:n.createElement("span",{className:`${R}-menu-submenu-arrow`},n.createElement(OC,{className:`${R}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:G,validator:e=>{let{mode:t}=e}},e)},placement:P,onVisibleChange:V,overlayStyle:Object.assign(Object.assign(Object.assign({},null==T?void 0:T.style),f),{zIndex:W})}),z);return W&&(X=n.createElement(oz.Provider,{value:q},X)),O(X)},qH=fV(WH,"dropdown",(e=>e),(function(e){return Object.assign(Object.assign({},e),{align:{overflow:{adjustX:!1,adjustY:!1}}})}));WH._InternalPanelDoNotUseOrYouWillBeFired=e=>n.createElement(qH,Object.assign({},e),n.createElement("span",null));const XH=WH;function YH(e){return["small","middle","large"].includes(e)}function KH(e){return!!e&&"number"==typeof e&&!Number.isNaN(e)}const ZH=n.createContext({latestIndex:0}),JH=ZH.Provider,QH=e=>{let{className:t,index:r,children:i,split:o,style:a}=e;const{latestIndex:s}=n.useContext(ZH);return null==i?null:n.createElement(n.Fragment,null,n.createElement("div",{className:t,style:a},i),r<s&&o&&n.createElement("span",{className:`${t}-split`},o))};const eG=n.forwardRef(((e,t)=>{var r,i,o;const{getPrefixCls:a,space:s,direction:l}=n.useContext(ia),{size:c=(null!==(r=null==s?void 0:s.size)&&void 0!==r?r:"small"),align:u,className:h,rootClassName:d,children:f,direction:p="horizontal",prefixCls:m,split:g,style:v,wrap:y=!1,classNames:b,styles:x}=e,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[w,S]=Array.isArray(c)?c:[c,c],E=YH(S),C=YH(w),M=KH(S),T=KH(w),A=oC(f,{keepEmpty:!0}),P=void 0===u&&"horizontal"===p?"center":u,R=a("space",m),[I,O,k]=JD(R),L=va()(R,null==s?void 0:s.className,O,`${R}-${p}`,{[`${R}-rtl`]:"rtl"===l,[`${R}-align-${P}`]:P,[`${R}-gap-row-${S}`]:E,[`${R}-gap-col-${w}`]:C},h,d,k),N=va()(`${R}-item`,null!==(i=null==b?void 0:b.item)&&void 0!==i?i:null===(o=null==s?void 0:s.classNames)||void 0===o?void 0:o.item);let D=0;const z=A.map(((e,t)=>{var r,i;null!=e&&(D=t);const o=(null==e?void 0:e.key)||`${N}-${t}`;return n.createElement(QH,{className:N,key:o,index:t,split:g,style:null!==(r=null==x?void 0:x.item)&&void 0!==r?r:null===(i=null==s?void 0:s.styles)||void 0===i?void 0:i.item},e)})),U=n.useMemo((()=>({latestIndex:D})),[D]);if(0===A.length)return null;const F={};return y&&(F.flexWrap="wrap"),!C&&T&&(F.columnGap=w),!E&&M&&(F.rowGap=S),I(n.createElement("div",Object.assign({ref:t,className:L,style:Object.assign(Object.assign(Object.assign({},F),null==s?void 0:s.style),v)},_),n.createElement(JH,{value:U},z)))}));eG.Compact=e=>{const{getPrefixCls:t,direction:r}=n.useContext(ia),{size:i,direction:o,block:a,prefixCls:s,className:l,rootClassName:c,children:u}=e,h=QD(e,["size","direction","block","prefixCls","className","rootClassName","children"]),d=XD((e=>null!=i?i:e)),f=t("space-compact",s),[p,m]=JD(f),g=va()(f,m,{[`${f}-rtl`]:"rtl"===r,[`${f}-block`]:a,[`${f}-vertical`]:"vertical"===o},l,c),v=n.useContext(ez),y=oC(u),b=n.useMemo((()=>y.map(((e,t)=>{const r=(null==e?void 0:e.key)||`${f}-item-${t}`;return n.createElement(rz,{key:r,compactSize:d,compactDirection:o,isFirstItem:0===t&&(!v||(null==v?void 0:v.isFirstItem)),isLastItem:t===y.length-1&&(!v||(null==v?void 0:v.isLastItem))},e)}))),[i,y,v]);return 0===y.length?null:p(n.createElement("div",Object.assign({className:g},h),b))};const tG=eG;const nG=e=>{const{getPopupContainer:t,getPrefixCls:r,direction:i}=n.useContext(ia),{prefixCls:o,type:a="default",danger:s,disabled:l,loading:c,onClick:u,htmlType:h,children:d,className:f,menu:p,arrow:m,autoFocus:g,overlay:v,trigger:y,align:b,open:x,onOpenChange:_,placement:w,getPopupContainer:S,href:E,icon:C=n.createElement(tH,null),title:M,buttonsRender:T=e=>e,mouseEnterDelay:A,mouseLeaveDelay:P,overlayClassName:R,overlayStyle:I,destroyPopupOnHide:O,dropdownRender:k}=e,L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),N=r("dropdown",o),D=`${N}-button`,z={menu:p,arrow:m,autoFocus:g,align:b,disabled:l,trigger:l?[]:y,onOpenChange:_,getPopupContainer:S||t,mouseEnterDelay:A,mouseLeaveDelay:P,overlayClassName:R,overlayStyle:I,destroyPopupOnHide:O,dropdownRender:k},{compactSize:U,compactItemClassnames:F}=tz(N,i),B=va()(D,F,f);"overlay"in e&&(z.overlay=v),"open"in e&&(z.open=x),z.placement="placement"in e?w:"rtl"===i?"bottomLeft":"bottomRight";const j=n.createElement(wF,{type:a,danger:s,disabled:l,loading:c,onClick:u,htmlType:h,href:E,title:M},d),V=n.createElement(wF,{type:a,danger:s,icon:C}),[$,H]=T([j,V]);return n.createElement(tG.Compact,Object.assign({className:B,size:U,block:!0},L),$,n.createElement(XH,Object.assign({},z),H))};nG.__ANT_BUTTON=!0;const rG=nG,iG=XH;iG.Button=rG;const oG=iG,aG=["wrap","nowrap","wrap-reverse"],sG=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],lG=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],cG=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},uG=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},hG=e=>{const{componentCls:t}=e,n={};return aG.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},dG=e=>{const{componentCls:t}=e,n={};return lG.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},fG=e=>{const{componentCls:t}=e,n={};return sG.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n},pG=YC("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,i=$C(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[cG(i),uG(i),hG(i),dG(i),fG(i)]}),(()=>({})),{resetStyle:!1});const mG=n.forwardRef(((e,t)=>{const{prefixCls:r,rootClassName:i,className:o,style:a,flex:s,gap:l,children:c,vertical:u=!1,component:h="div"}=e,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:f,direction:p,getPrefixCls:m}=n.useContext(ia),g=m("flex",r),[v,y,b]=pG(g),x=null!=u?u:null==f?void 0:f.vertical,_=va()(o,i,null==f?void 0:f.className,g,y,b,function(e,t){return va()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&aG.includes(n)}})(e,t)),((e,t)=>{const n={};return lG.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return sG.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))}(g,e),{[`${g}-rtl`]:"rtl"===p,[`${g}-gap-${l}`]:YH(l),[`${g}-vertical`]:x}),w=Object.assign(Object.assign({},null==f?void 0:f.style),a);return s&&(w.flex=s),l&&!YH(l)&&(w.gap=l),v(n.createElement(h,Object.assign({ref:t,className:_,style:w},rC(d,["justify","wrap","align"])),c))}));var gG=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.forceRender,o=e.className,a=e.style,s=e.children,l=e.isActive,c=e.role,u=e.classNames,h=e.styles,d=Ht(n.useState(l||i),2),f=d[0],p=d[1];return n.useEffect((function(){(i||l)&&p(!0)}),[i,l]),f?n.createElement("div",{ref:t,className:va()("".concat(r,"-content"),Ft(Ft({},"".concat(r,"-content-active"),l),"".concat(r,"-content-inactive"),!l),o),style:a,role:c},n.createElement("div",{className:va()("".concat(r,"-content-box"),null==u?void 0:u.body),style:null==h?void 0:h.body},s)):null}));gG.displayName="PanelContent";const vG=gG;var yG=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"];const bG=n.forwardRef((function(e,t){var r=e.showArrow,i=void 0===r||r,o=e.headerClass,a=e.isActive,s=e.onItemClick,l=e.forceRender,c=e.className,u=e.classNames,h=void 0===u?{}:u,d=e.styles,f=void 0===d?{}:d,p=e.prefixCls,m=e.collapsible,g=e.accordion,v=e.panelKey,y=e.extra,b=e.header,x=e.expandIcon,_=e.openMotion,w=e.destroyInactivePanel,S=e.children,E=Ca(e,yG),C="disabled"===m,M=null!=y&&"boolean"!=typeof y,T=Ft(Ft(Ft({onClick:function(){null==s||s(v)},onKeyDown:function(e){"Enter"!==e.key&&e.keyCode!==QF.ENTER&&e.which!==QF.ENTER||null==s||s(v)},role:g?"tab":"button"},"aria-expanded",a),"aria-disabled",C),"tabIndex",C?-1:0),A="function"==typeof x?x(e):n.createElement("i",{className:"arrow"}),P=A&&n.createElement("div",nr({className:"".concat(p,"-expand-icon")},["header","icon"].includes(m)?T:{}),A),R=va()("".concat(p,"-item"),Ft(Ft({},"".concat(p,"-item-active"),a),"".concat(p,"-item-disabled"),C),c),I=Xt({className:va()(o,"".concat(p,"-header"),Ft({},"".concat(p,"-collapsible-").concat(m),!!m),h.header),style:f.header},["header","icon"].includes(m)?{}:T);return n.createElement("div",nr({},E,{ref:t,className:R}),n.createElement("div",I,i&&P,n.createElement("span",nr({className:"".concat(p,"-header-text")},"header"===m?T:{}),b),M&&n.createElement("div",{className:"".concat(p,"-extra")},y)),n.createElement(Ds,nr({visible:a,leavedClassName:"".concat(p,"-content-hidden")},_,{forceRender:l,removeOnLeave:w}),(function(e,t){var r=e.className,i=e.style;return n.createElement(vG,{ref:t,prefixCls:p,className:r,classNames:h,style:i,styles:f,isActive:a,forceRender:l,role:g?"tabpanel":void 0},S)})))}));var xG=["children","label","key","collapsible","onItemClick","destroyInactivePanel"];function _G(e){var t=e;if(!Array.isArray(t)){var n=zt(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var wG=n.forwardRef((function(e,t){var r=e.prefixCls,i=void 0===r?"rc-collapse":r,o=e.destroyInactivePanel,a=void 0!==o&&o,s=e.style,l=e.accordion,c=e.className,u=e.children,h=e.collapsible,d=e.openMotion,f=e.expandIcon,p=e.activeKey,m=e.defaultActiveKey,g=e.onChange,v=e.items,y=va()(i,c),b=Ht(Ba([],{value:p,onChange:function(e){return null==g?void 0:g(e)},defaultValue:m,postState:_G}),2),x=b[0],_=b[1];gn(!u,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var w=function(e,t,r){return Array.isArray(e)?function(e,t){var r=t.prefixCls,i=t.accordion,o=t.collapsible,a=t.destroyInactivePanel,s=t.onItemClick,l=t.activeKey,c=t.openMotion,u=t.expandIcon;return e.map((function(e,t){var h,d=e.children,f=e.label,p=e.key,m=e.collapsible,g=e.onItemClick,v=e.destroyInactivePanel,y=Ca(e,xG),b=String(null!=p?p:t),x=null!=m?m:o,_=null!=v?v:a;return h=i?l[0]===b:l.indexOf(b)>-1,n.createElement(bG,nr({},y,{prefixCls:r,key:b,panelKey:b,isActive:h,accordion:i,openMotion:c,expandIcon:u,header:f,collapsible:x,onItemClick:function(e){"disabled"!==x&&(s(e),null==g||g(e))},destroyInactivePanel:_}),d)}))}(e,r):oC(t).map((function(e,t){return function(e,t,r){if(!e)return null;var i,o=r.prefixCls,a=r.accordion,s=r.collapsible,l=r.destroyInactivePanel,c=r.onItemClick,u=r.activeKey,h=r.openMotion,d=r.expandIcon,f=e.key||String(t),p=e.props,m=p.header,g=p.headerClass,v=p.destroyInactivePanel,y=p.collapsible,b=p.onItemClick;i=a?u[0]===f:u.indexOf(f)>-1;var x=null!=y?y:s,_={key:f,panelKey:f,header:m,headerClass:g,isActive:i,prefixCls:o,destroyInactivePanel:null!=v?v:l,openMotion:h,accordion:a,children:e.props.children,onItemClick:function(e){"disabled"!==x&&(c(e),null==b||b(e))},expandIcon:d,collapsible:x};return"string"==typeof e.type?e:(Object.keys(_).forEach((function(e){void 0===_[e]&&delete _[e]})),n.cloneElement(e,_))}(e,t,r)}))}(v,u,{prefixCls:i,accordion:l,openMotion:d,expandIcon:f,collapsible:h,destroyInactivePanel:a,onItemClick:function(e){return _((function(){return l?x[0]===e?[]:[e]:x.indexOf(e)>-1?x.filter((function(t){return t!==e})):[].concat(Wt(x),[e])}))},activeKey:x});return n.createElement("div",nr({ref:t,className:y,style:s,role:l?"tablist":void 0},nB(e,{aria:!0,data:!0})),w)}));const SG=Object.assign(wG,{Panel:bG}),EG=SG;SG.Panel;const CG=n.forwardRef(((e,t)=>{const{getPrefixCls:r}=n.useContext(ia),{prefixCls:i,className:o,showArrow:a=!0}=e,s=r("collapse",i),l=va()({[`${s}-no-arrow`]:!a},o);return n.createElement(EG.Panel,Object.assign({ref:t},e,{prefixCls:s,className:l}))})),MG=e=>{const{componentCls:t,contentBg:n,padding:r,headerBg:i,headerPadding:o,collapseHeaderPaddingSM:a,collapseHeaderPaddingLG:s,collapsePanelBorderRadius:l,lineWidth:c,lineType:u,colorBorder:h,colorText:d,colorTextHeading:f,colorTextDisabled:p,fontSizeLG:m,lineHeight:g,lineHeightLG:v,marginSM:y,paddingSM:b,paddingLG:x,paddingXS:_,motionDurationSlow:w,fontSizeIcon:S,contentPadding:E,fontHeight:C,fontHeightLG:M}=e,T=`${Un(c)} ${u} ${h}`;return{[t]:Object.assign(Object.assign({},Bs(e)),{backgroundColor:i,border:T,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:T,"&:last-child":{[`\n            &,\n            & > ${t}-header`]:{borderRadius:`0 0 ${Un(l)} ${Un(l)}`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:o,color:f,lineHeight:g,cursor:"pointer",transition:`all ${w}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},[`${t}-expand-icon`]:{height:C,display:"flex",alignItems:"center",paddingInlineEnd:y},[`${t}-arrow`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{fontSize:S,transition:`transform ${w}`,svg:{transition:`transform ${w}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-collapsible-header`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-collapsible-icon`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:d,backgroundColor:n,borderTop:T,[`& > ${t}-content-box`]:{padding:E},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:a,paddingInlineStart:_,[`> ${t}-expand-icon`]:{marginInlineStart:e.calc(b).sub(_).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:b}}},"&-large":{[`> ${t}-item`]:{fontSize:m,lineHeight:v,[`> ${t}-header`]:{padding:s,paddingInlineStart:r,[`> ${t}-expand-icon`]:{height:M,marginInlineStart:e.calc(x).sub(r).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:x}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${Un(l)} ${Un(l)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:p,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:y}}}}})}},TG=e=>{const{componentCls:t}=e,n=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},AG=e=>{const{componentCls:t,headerBg:n,paddingXXS:r,colorBorder:i}=e;return{[`${t}-borderless`]:{backgroundColor:n,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${i}`},[`\n        > ${t}-item:last-child,\n        > ${t}-item:last-child ${t}-header\n      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:r}}}},PG=e=>{const{componentCls:t,paddingSM:n}=e;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:n}}}}}},RG=YC("Collapse",(e=>{const t=$C(e,{collapseHeaderPaddingSM:`${Un(e.paddingXS)} ${Un(e.paddingSM)}`,collapseHeaderPaddingLG:`${Un(e.padding)} ${Un(e.paddingLG)}`,collapsePanelBorderRadius:e.borderRadiusLG});return[MG(t),AG(t),PG(t),TG(t),lH(t)]}),(e=>({headerPadding:`${e.paddingSM}px ${e.padding}px`,headerBg:e.colorFillAlter,contentPadding:`${e.padding}px 16px`,contentBg:e.colorBgContainer}))),IG=n.forwardRef(((e,t)=>{const{getPrefixCls:r,direction:i,collapse:o}=n.useContext(ia),{prefixCls:a,className:s,rootClassName:l,style:c,bordered:u=!0,ghost:h,size:d,expandIconPosition:f="start",children:p,expandIcon:m}=e,g=XD((e=>{var t;return null!==(t=null!=d?d:e)&&void 0!==t?t:"middle"})),v=r("collapse",a),y=r(),[b,x,_]=RG(v),w=n.useMemo((()=>"left"===f?"start":"right"===f?"end":f),[f]),S=null!=m?m:null==o?void 0:o.expandIcon,E=n.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="function"==typeof S?S(e):n.createElement(OC,{rotate:e.isActive?90:void 0,"aria-label":e.isActive?"expanded":"collapsed"});return Tz(t,(()=>{var e;return{className:va()(null===(e=null==t?void 0:t.props)||void 0===e?void 0:e.className,`${v}-arrow`)}}))}),[S,v]),C=va()(`${v}-icon-position-${w}`,{[`${v}-borderless`]:!u,[`${v}-rtl`]:"rtl"===i,[`${v}-ghost`]:!!h,[`${v}-${g}`]:"middle"!==g},null==o?void 0:o.className,s,l,x,_),M=Object.assign(Object.assign({},mz(y)),{motionAppear:!1,leavedClassName:`${v}-content-hidden`}),T=n.useMemo((()=>p?oC(p).map(((e,t)=>{var n,r;if(null===(n=e.props)||void 0===n?void 0:n.disabled){const n=null!==(r=e.key)&&void 0!==r?r:String(t),{disabled:i,collapsible:o}=e.props;return Tz(e,Object.assign(Object.assign({},rC(e.props,["disabled"])),{key:n,collapsible:null!=o?o:i?"disabled":void 0}))}return e})):null),[p]);return b(n.createElement(EG,Object.assign({ref:t,openMotion:M},rC(e,["rootClassName"]),{expandIcon:E,prefixCls:v,className:C,style:Object.assign(Object.assign({},null==o?void 0:o.style),c)}),T))})),OG=Object.assign(IG,{Panel:CG}),kG=["xxl","xl","lg","md","sm","xs"];function LG(){const[,e]=Co(),t=(e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}))((e=>{const t=e,n=[].concat(kG).reverse();return n.forEach(((e,r)=>{const i=e.toUpperCase(),o=`screen${i}Min`,a=`screen${i}`;if(!(t[o]<=t[a]))throw new Error(`${o}<=${a} fails : !(${t[o]}<=${t[a]})`);if(r<n.length-1){const e=`screen${i}Max`;if(!(t[a]<=t[e]))throw new Error(`${a}<=${e} fails : !(${t[a]}<=${t[e]})`);const o=`screen${n[r+1].toUpperCase()}Min`;if(!(t[e]<=t[o]))throw new Error(`${e}<=${o} fails : !(${t[e]}<=${t[o]})`)}})),e})(e));return n.useMemo((()=>{const e=new Map;let n=-1,r={};return{matchHandlers:{},dispatch:t=>(r=t,e.forEach((e=>e(r))),e.size>=1),subscribe(t){return e.size||this.register(),n+=1,e.set(n,t),t(r),n},unsubscribe(t){e.delete(t),e.size||this.unregister()},unregister(){Object.keys(t).forEach((e=>{const n=t[e],r=this.matchHandlers[n];null==r||r.mql.removeListener(null==r?void 0:r.listener)})),e.clear()},register(){Object.keys(t).forEach((e=>{const n=t[e],i=t=>{let{matches:n}=t;this.dispatch(Object.assign(Object.assign({},r),{[e]:n}))},o=window.matchMedia(n);o.addListener(i),this.matchHandlers[n]={mql:o,listener:i},i(o)}))},responsiveMap:t}}),[e])}const NG=(e,t)=>{const r=n.useContext(Qo);return[n.useMemo((()=>{var n;const i=t||Xo[e],o=null!==(n=null==r?void 0:r[e])&&void 0!==n?n:{};return Object.assign(Object.assign({},"function"==typeof i?i():i),o||{})}),[e,t,r]),n.useMemo((()=>{const e=null==r?void 0:r.locale;return(null==r?void 0:r.exist)&&!e?Xo.locale:e}),[r])]},DG=()=>{const[,e]=Co(),[t]=NG("Empty"),r=new ro(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return n.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,(null==t?void 0:t.description)||"Empty"),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(24 31.67)"},n.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),n.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),n.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),n.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),n.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),n.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),n.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},n.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),n.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},zG=()=>{const[,e]=Co(),[t]=NG("Empty"),{colorFill:r,colorFillTertiary:i,colorFillQuaternary:o,colorBgContainer:a}=e,{borderColor:s,shadowColor:l,contentColor:c}=(0,n.useMemo)((()=>({borderColor:new ro(r).onBackground(a).toHexShortString(),shadowColor:new ro(i).onBackground(a).toHexShortString(),contentColor:new ro(o).onBackground(a).toHexShortString()})),[r,i,o,a]);return n.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,(null==t?void 0:t.description)||"Empty"),n.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),n.createElement("g",{fillRule:"nonzero",stroke:s},n.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),n.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},UG=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=e;return{[t]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},FG=YC("Empty",(e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,i=$C(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[UG(i)]}));const BG=n.createElement(DG,null),jG=n.createElement(zG,null),VG=e=>{var{className:t,rootClassName:r,prefixCls:i,image:o=BG,description:a,children:s,imageStyle:l,style:c}=e,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:h,direction:d,empty:f}=n.useContext(ia),p=h("empty",i),[m,g,v]=FG(p),[y]=NG("Empty"),b=void 0!==a?a:null==y?void 0:y.description,x="string"==typeof b?b:"empty";let _=null;return _="string"==typeof o?n.createElement("img",{alt:x,src:o}):o,m(n.createElement("div",Object.assign({className:va()(g,v,p,null==f?void 0:f.className,{[`${p}-normal`]:o===jG,[`${p}-rtl`]:"rtl"===d},t,r),style:Object.assign(Object.assign({},null==f?void 0:f.style),c)},u),n.createElement("div",{className:`${p}-image`,style:l},_),b&&n.createElement("div",{className:`${p}-description`},b),s&&n.createElement("div",{className:`${p}-footer`},s)))};VG.PRESENTED_IMAGE_DEFAULT=BG,VG.PRESENTED_IMAGE_SIMPLE=jG;const $G=VG,HG=e=>{const{componentName:t}=e,{getPrefixCls:r}=(0,n.useContext)(ia),i=r("empty");switch(t){case"Table":case"List":return n.createElement($G,{image:$G.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return n.createElement($G,{image:$G.PRESENTED_IMAGE_SIMPLE,className:`${i}-small`});case"Table.filter":return null;default:return n.createElement($G,null)}},GG=(0,n.createContext)({}),WG=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},qG=(e,t)=>((e,t)=>{const{prefixCls:n,componentCls:r,gridColumns:i}=e,o={};for(let e=i;e>=0;e--)0===e?(o[`${r}${t}-${e}`]={display:"none"},o[`${r}-push-${e}`]={insetInlineStart:"auto"},o[`${r}-pull-${e}`]={insetInlineEnd:"auto"},o[`${r}${t}-push-${e}`]={insetInlineStart:"auto"},o[`${r}${t}-pull-${e}`]={insetInlineEnd:"auto"},o[`${r}${t}-offset-${e}`]={marginInlineStart:0},o[`${r}${t}-order-${e}`]={order:0}):(o[`${r}${t}-${e}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${e/i*100}%`,maxWidth:e/i*100+"%"}],o[`${r}${t}-push-${e}`]={insetInlineStart:e/i*100+"%"},o[`${r}${t}-pull-${e}`]={insetInlineEnd:e/i*100+"%"},o[`${r}${t}-offset-${e}`]={marginInlineStart:e/i*100+"%"},o[`${r}${t}-order-${e}`]={order:e});return o[`${r}${t}-flex`]={flex:`var(--${n}${t}-flex)`},o})(e,t),XG=YC("Grid",(e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}}),(()=>({}))),YG=YC("Grid",(e=>{const t=$C(e,{gridColumns:24}),n={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[WG(t),qG(t,""),qG(t,"-xs"),Object.keys(n).map((e=>((e,t,n)=>({[`@media (min-width: ${Un(t)})`]:Object.assign({},qG(e,n))}))(t,n[e],e))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})]}),(()=>({})));function KG(e,t){const[r,i]=n.useState("string"==typeof e?e:"");return n.useEffect((()=>{(()=>{if("string"==typeof e&&i(e),"object"==typeof e)for(let n=0;n<kG.length;n++){const r=kG[n];if(!t[r])continue;const o=e[r];if(void 0!==o)return void i(o)}})()}),[JSON.stringify(e),t]),r}const ZG=n.forwardRef(((e,t)=>{const{prefixCls:r,justify:i,align:o,className:a,style:s,children:l,gutter:c=0,wrap:u}=e,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:d,direction:f}=n.useContext(ia),[p,m]=n.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[g,v]=n.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),y=KG(o,g),b=KG(i,g),x=n.useRef(c),_=LG();n.useEffect((()=>{const e=_.subscribe((e=>{v(e);const t=x.current||0;(!Array.isArray(t)&&"object"==typeof t||Array.isArray(t)&&("object"==typeof t[0]||"object"==typeof t[1]))&&m(e)}));return()=>_.unsubscribe(e)}),[]);const w=d("row",r),[S,E,C]=XG(w),M=(()=>{const e=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach(((t,n)=>{if("object"==typeof t)for(let r=0;r<kG.length;r++){const i=kG[r];if(p[i]&&void 0!==t[i]){e[n]=t[i];break}}else e[n]=t})),e})(),T=va()(w,{[`${w}-no-wrap`]:!1===u,[`${w}-${b}`]:b,[`${w}-${y}`]:y,[`${w}-rtl`]:"rtl"===f},a,E,C),A={},P=null!=M[0]&&M[0]>0?M[0]/-2:void 0;P&&(A.marginLeft=P,A.marginRight=P);const[R,I]=M;A.rowGap=I;const O=n.useMemo((()=>({gutter:[R,I],wrap:u})),[R,I,u]);return S(n.createElement(GG.Provider,{value:O},n.createElement("div",Object.assign({},h,{className:T,style:Object.assign(Object.assign({},A),s),ref:t}),l)))})),JG=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,n.useRef)({}),r=function(){const[,e]=n.useReducer((e=>e+1),0);return e}(),i=LG();return Wn((()=>{const n=i.subscribe((n=>{t.current=n,e&&r()}));return()=>i.unsubscribe(n)}),[]),t.current},QG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};var eW=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:QG}))};const tW=n.forwardRef(eW),nW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};var rW=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:nW}))};const iW=n.forwardRef(rW),oW={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""};var aW=["10","20","50","100"];const sW=function(e){var t=e.pageSizeOptions,r=void 0===t?aW:t,i=e.locale,o=e.changeSize,a=e.pageSize,s=e.goButton,l=e.quickGo,c=e.rootPrefixCls,u=e.selectComponentClass,h=e.selectPrefixCls,d=e.disabled,f=e.buildOptionText,p=e.showSizeChanger,m=Ht(n.useState(""),2),g=m[0],v=m[1],y=function(){return!g||Number.isNaN(g)?void 0:Number(g)},b="function"==typeof f?f:function(e){return"".concat(e," ").concat(i.items_per_page)},x=function(e){""!==g&&(e.keyCode!==QF.ENTER&&"click"!==e.type||(v(""),null==l||l(y())))},_="".concat(c,"-options");if(!p&&!l)return null;var w=null,S=null,E=null;if(p&&u){var C="object"===zt(p)?p:{},M=C.options,T=C.className,A=M?void 0:(r.some((function(e){return e.toString()===a.toString()}))?r:r.concat([a.toString()]).sort((function(e,t){return(Number.isNaN(Number(e))?0:Number(e))-(Number.isNaN(Number(t))?0:Number(t))}))).map((function(e,t){return n.createElement(u.Option,{key:t,value:e.toString()},b(e))}));w=n.createElement(u,nr({disabled:d,prefixCls:h,showSearch:!1,optionLabelProp:M?"label":"children",popupMatchSelectWidth:!1,value:(a||r[0]).toString(),getPopupContainer:function(e){return e.parentNode},"aria-label":i.page_size,defaultOpen:!1},"object"===zt(p)?p:null,{className:va()("".concat(_,"-size-changer"),T),options:M,onChange:function(e,t){var n;null==o||o(Number(e)),"object"===zt(p)&&(null===(n=p.onChange)||void 0===n||n.call(p,e,t))}}),A)}return l&&(s&&(E="boolean"==typeof s?n.createElement("button",{type:"button",onClick:x,onKeyUp:x,disabled:d,className:"".concat(_,"-quick-jumper-button")},i.jump_to_confirm):n.createElement("span",{onClick:x,onKeyUp:x},s)),S=n.createElement("div",{className:"".concat(_,"-quick-jumper")},i.jump_to,n.createElement("input",{disabled:d,type:"text",value:g,onChange:function(e){v(e.target.value)},onKeyUp:x,onBlur:function(e){s||""===g||(v(""),e.relatedTarget&&(e.relatedTarget.className.indexOf("".concat(c,"-item-link"))>=0||e.relatedTarget.className.indexOf("".concat(c,"-item"))>=0)||null==l||l(y()))},"aria-label":i.page}),i.page,E)),n.createElement("li",{className:_},w,S)},lW=function(e){var t=e.rootPrefixCls,r=e.page,i=e.active,o=e.className,a=e.showTitle,s=e.onClick,l=e.onKeyPress,c=e.itemRender,u="".concat(t,"-item"),h=va()(u,"".concat(u,"-").concat(r),Ft(Ft({},"".concat(u,"-active"),i),"".concat(u,"-disabled"),!r),o),d=c(r,"page",n.createElement("a",{rel:"nofollow"},r));return d?n.createElement("li",{title:a?String(r):null,className:h,onClick:function(){s(r)},onKeyDown:function(e){l(e,s,r)},tabIndex:0},d):null};var cW=function(e,t,n){return n};function uW(){}function hW(e){var t=Number(e);return"number"==typeof t&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function dW(e,t,n){var r=void 0===e?t:e;return Math.floor((n-1)/r)+1}const fW=function(e){var t=e.prefixCls,r=void 0===t?"rc-pagination":t,i=e.selectPrefixCls,o=void 0===i?"rc-select":i,a=e.className,s=e.selectComponentClass,l=e.current,c=e.defaultCurrent,u=void 0===c?1:c,h=e.total,d=void 0===h?0:h,f=e.pageSize,p=e.defaultPageSize,m=void 0===p?10:p,g=e.onChange,v=void 0===g?uW:g,y=e.hideOnSinglePage,b=e.align,x=e.showPrevNextJumpers,_=void 0===x||x,w=e.showQuickJumper,S=e.showLessItems,E=e.showTitle,C=void 0===E||E,M=e.onShowSizeChange,T=void 0===M?uW:M,A=e.locale,P=void 0===A?oW:A,R=e.style,I=e.totalBoundaryShowSizeChanger,O=void 0===I?50:I,k=e.disabled,L=e.simple,N=e.showTotal,D=e.showSizeChanger,z=void 0===D?d>O:D,U=e.pageSizeOptions,F=e.itemRender,B=void 0===F?cW:F,j=e.jumpPrevIcon,V=e.jumpNextIcon,$=e.prevIcon,H=e.nextIcon,G=n.useRef(null),W=Ht(Ba(10,{value:f,defaultValue:m}),2),q=W[0],X=W[1],Y=Ht(Ba(1,{value:l,defaultValue:u,postState:function(e){return Math.max(1,Math.min(e,dW(void 0,q,d)))}}),2),K=Y[0],Z=Y[1],J=Ht(n.useState(K),2),Q=J[0],ee=J[1];(0,n.useEffect)((function(){ee(K)}),[K]);var te=Math.max(1,K-(S?3:5)),ne=Math.min(dW(void 0,q,d),K+(S?3:5));function re(t,i){var o=t||n.createElement("button",{type:"button","aria-label":i,className:"".concat(r,"-item-link")});return"function"==typeof t&&(o=n.createElement(t,Xt({},e))),o}function ie(e){var t=e.target.value,n=dW(void 0,q,d);return""===t?t:Number.isNaN(Number(t))?Q:t>=n?n:Number(t)}var oe=d>q&&w;function ae(e){var t=ie(e);switch(t!==Q&&ee(t),e.keyCode){case QF.ENTER:se(t);break;case QF.UP:se(t-1);break;case QF.DOWN:se(t+1)}}function se(e){if(function(e){return hW(e)&&e!==K&&hW(d)&&d>0}(e)&&!k){var t=dW(void 0,q,d),n=e;return e>t?n=t:e<1&&(n=1),n!==Q&&ee(n),Z(n),null==v||v(n,q),n}return K}var le=K>1,ce=K<dW(void 0,q,d);function ue(){le&&se(K-1)}function he(){ce&&se(K+1)}function de(){se(te)}function fe(){se(ne)}function pe(e,t){if("Enter"===e.key||e.charCode===QF.ENTER||e.keyCode===QF.ENTER){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];t.apply(void 0,r)}}function me(e){"click"!==e.type&&e.keyCode!==QF.ENTER||se(Q)}var ge=null,ve=nB(e,{aria:!0,data:!0}),ye=N&&n.createElement("li",{className:"".concat(r,"-total-text")},N(d,[0===d?0:(K-1)*q+1,K*q>d?d:K*q])),be=null,xe=dW(void 0,q,d);if(y&&d<=q)return null;var _e=[],we={rootPrefixCls:r,onClick:se,onKeyPress:pe,showTitle:C,itemRender:B,page:-1},Se=K-1>0?K-1:0,Ee=K+1<xe?K+1:xe,Ce=w&&w.goButton,Me="object"===zt(L)?L.readOnly:!L,Te=Ce,Ae=null;L&&(Ce&&(Te="boolean"==typeof Ce?n.createElement("button",{type:"button",onClick:me,onKeyUp:me},P.jump_to_confirm):n.createElement("span",{onClick:me,onKeyUp:me},Ce),Te=n.createElement("li",{title:C?"".concat(P.jump_to).concat(K,"/").concat(xe):null,className:"".concat(r,"-simple-pager")},Te)),Ae=n.createElement("li",{title:C?"".concat(K,"/").concat(xe):null,className:"".concat(r,"-simple-pager")},Me?Q:n.createElement("input",{type:"text",value:Q,disabled:k,onKeyDown:function(e){e.keyCode!==QF.UP&&e.keyCode!==QF.DOWN||e.preventDefault()},onKeyUp:ae,onChange:ae,onBlur:function(e){se(ie(e))},size:3}),n.createElement("span",{className:"".concat(r,"-slash")},"/"),xe));var Pe=S?1:2;if(xe<=3+2*Pe){xe||_e.push(n.createElement(lW,nr({},we,{key:"noPager",page:1,className:"".concat(r,"-item-disabled")})));for(var Re=1;Re<=xe;Re+=1)_e.push(n.createElement(lW,nr({},we,{key:Re,page:Re,active:K===Re})))}else{var Ie=S?P.prev_3:P.prev_5,Oe=S?P.next_3:P.next_5,ke=B(te,"jump-prev",re(j,"prev page")),Le=B(ne,"jump-next",re(V,"next page"));_&&(ge=ke?n.createElement("li",{title:C?Ie:null,key:"prev",onClick:de,tabIndex:0,onKeyDown:function(e){pe(e,de)},className:va()("".concat(r,"-jump-prev"),Ft({},"".concat(r,"-jump-prev-custom-icon"),!!j))},ke):null,be=Le?n.createElement("li",{title:C?Oe:null,key:"next",onClick:fe,tabIndex:0,onKeyDown:function(e){pe(e,fe)},className:va()("".concat(r,"-jump-next"),Ft({},"".concat(r,"-jump-next-custom-icon"),!!V))},Le):null);var Ne=Math.max(1,K-Pe),De=Math.min(K+Pe,xe);K-1<=Pe&&(De=1+2*Pe),xe-K<=Pe&&(Ne=xe-2*Pe);for(var ze=Ne;ze<=De;ze+=1)_e.push(n.createElement(lW,nr({},we,{key:ze,page:ze,active:K===ze})));if(K-1>=2*Pe&&3!==K&&(_e[0]=n.cloneElement(_e[0],{className:va()("".concat(r,"-item-after-jump-prev"),_e[0].props.className)}),_e.unshift(ge)),xe-K>=2*Pe&&K!==xe-2){var Ue=_e[_e.length-1];_e[_e.length-1]=n.cloneElement(Ue,{className:va()("".concat(r,"-item-before-jump-next"),Ue.props.className)}),_e.push(be)}1!==Ne&&_e.unshift(n.createElement(lW,nr({},we,{key:1,page:1}))),De!==xe&&_e.push(n.createElement(lW,nr({},we,{key:xe,page:xe})))}var Fe=function(e){var t=B(e,"prev",re($,"prev page"));return n.isValidElement(t)?n.cloneElement(t,{disabled:!le}):t}(Se);if(Fe){var Be=!le||!xe;Fe=n.createElement("li",{title:C?P.prev_page:null,onClick:ue,tabIndex:Be?null:0,onKeyDown:function(e){pe(e,ue)},className:va()("".concat(r,"-prev"),Ft({},"".concat(r,"-disabled"),Be)),"aria-disabled":Be},Fe)}var je,Ve,$e=function(e){var t=B(e,"next",re(H,"next page"));return n.isValidElement(t)?n.cloneElement(t,{disabled:!ce}):t}(Ee);$e&&(L?(je=!ce,Ve=le?0:null):Ve=(je=!ce||!xe)?null:0,$e=n.createElement("li",{title:C?P.next_page:null,onClick:he,tabIndex:Ve,onKeyDown:function(e){pe(e,he)},className:va()("".concat(r,"-next"),Ft({},"".concat(r,"-disabled"),je)),"aria-disabled":je},$e));var He=va()(r,a,Ft(Ft(Ft(Ft(Ft({},"".concat(r,"-start"),"start"===b),"".concat(r,"-center"),"center"===b),"".concat(r,"-end"),"end"===b),"".concat(r,"-simple"),L),"".concat(r,"-disabled"),k));return n.createElement("ul",nr({className:He,style:R,ref:G},ve),ye,Fe,L?Ae:_e,$e,n.createElement(sW,{locale:P,rootPrefixCls:r,disabled:k,selectComponentClass:s,selectPrefixCls:o,changeSize:function(e){var t=dW(e,q,d),n=K>t&&0!==t?t:K;X(e),ee(n),null==T||T(K,e),Z(n),null==v||v(n,e)},pageSize:q,pageSizeOptions:U,quickGo:oe?se:null,goButton:Te,showSizeChanger:z}))},pW=function(e){var t=e.className,r=e.customizeIcon,i=e.customizeIconProps,o=e.children,a=e.onMouseDown,s=e.onClick,l="function"==typeof r?r(i):r;return n.createElement("span",{className:t,onMouseDown:function(e){e.preventDefault(),null==a||a(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:s,"aria-hidden":!0},void 0!==l?l:n.createElement("span",{className:va()(t.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},o))};var mW=n.createContext(null);function gW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=n.useRef(null),r=n.useRef(null);return n.useEffect((function(){return function(){window.clearTimeout(r.current)}}),[]),[function(){return t.current},function(n){(n||null===t.current)&&(t.current=n),window.clearTimeout(r.current),r.current=window.setTimeout((function(){t.current=null}),e)}]}var vW=function(e,t){var r,i=e.prefixCls,o=e.id,a=e.inputElement,s=e.disabled,l=e.tabIndex,c=e.autoFocus,u=e.autoComplete,h=e.editable,d=e.activeDescendantId,f=e.value,p=e.maxLength,m=e.onKeyDown,g=e.onMouseDown,v=e.onChange,y=e.onPaste,b=e.onCompositionStart,x=e.onCompositionEnd,_=e.open,w=e.attrs,S=a||n.createElement("input",null),E=S,C=E.ref,M=E.props,T=M.onKeyDown,A=M.onChange,P=M.onMouseDown,R=M.onCompositionStart,I=M.onCompositionEnd,O=M.style;return S.props,n.cloneElement(S,Xt(Xt(Xt({type:"search"},M),{},{id:o,ref:wa(t,C),disabled:s,tabIndex:l,autoComplete:u||"off",autoFocus:c,className:va()("".concat(i,"-selection-search-input"),null===(r=S)||void 0===r||null===(r=r.props)||void 0===r?void 0:r.className),role:"combobox","aria-expanded":_||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":_?d:void 0},w),{},{value:h?f:"",maxLength:p,readOnly:!h,unselectable:h?null:"on",style:Xt(Xt({},O),{},{opacity:h?null:0}),onKeyDown:function(e){m(e),T&&T(e)},onMouseDown:function(e){g(e),P&&P(e)},onChange:function(e){v(e),A&&A(e)},onCompositionStart:function(e){b(e),R&&R(e)},onCompositionEnd:function(e){x(e),I&&I(e)},onPaste:y}))};const yW=n.forwardRef(vW);function bW(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var xW="undefined"!=typeof window&&window.document&&window.document.documentElement;function _W(e){return["string","number"].includes(zt(e))}function wW(e){var t=void 0;return e&&(_W(e.title)?t=e.title.toString():_W(e.label)&&(t=e.label.toString())),t}function SW(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.value}var EW=function(e){e.preventDefault(),e.stopPropagation()};const CW=function(e){var t,r,i=e.id,o=e.prefixCls,a=e.values,s=e.open,l=e.searchValue,c=e.autoClearSearchValue,u=e.inputRef,h=e.placeholder,d=e.disabled,f=e.mode,p=e.showSearch,m=e.autoFocus,g=e.autoComplete,v=e.activeDescendantId,y=e.tabIndex,b=e.removeIcon,x=e.maxTagCount,_=e.maxTagTextLength,w=e.maxTagPlaceholder,S=void 0===w?function(e){return"+ ".concat(e.length," ...")}:w,E=e.tagRender,C=e.onToggleOpen,M=e.onRemove,T=e.onInputChange,A=e.onInputPaste,P=e.onInputKeyDown,R=e.onInputMouseDown,I=e.onInputCompositionStart,O=e.onInputCompositionEnd,k=n.useRef(null),L=Ht((0,n.useState)(0),2),N=L[0],D=L[1],z=Ht((0,n.useState)(!1),2),U=z[0],F=z[1],B="".concat(o,"-selection"),j=s||"multiple"===f&&!1===c||"tags"===f?l:"",V="tags"===f||"multiple"===f&&!1===c||p&&(s||U);t=function(){D(k.current.scrollWidth)},r=[j],xW?n.useLayoutEffect(t,r):n.useEffect(t,r);var $=function(e,t,r,i,o){return n.createElement("span",{title:wW(e),className:va()("".concat(B,"-item"),Ft({},"".concat(B,"-item-disabled"),r))},n.createElement("span",{className:"".concat(B,"-item-content")},t),i&&n.createElement(pW,{className:"".concat(B,"-item-remove"),onMouseDown:EW,onClick:o,customizeIcon:b},""))},H=function(e,t,r,i,o,a){return n.createElement("span",{onMouseDown:function(e){EW(e),C(!s)}},E({label:t,value:e,disabled:r,closable:i,onClose:o,isMaxTag:!!a}))},G=n.createElement("div",{className:"".concat(B,"-search"),style:{width:N},onFocus:function(){F(!0)},onBlur:function(){F(!1)}},n.createElement(yW,{ref:u,open:s,prefixCls:o,id:i,inputElement:null,disabled:d,autoFocus:m,autoComplete:g,editable:V,activeDescendantId:v,value:j,onKeyDown:P,onMouseDown:R,onChange:T,onPaste:A,onCompositionStart:I,onCompositionEnd:O,tabIndex:y,attrs:nB(e,!0)}),n.createElement("span",{ref:k,className:"".concat(B,"-search-mirror"),"aria-hidden":!0},j,"")),W=n.createElement(LV,{prefixCls:"".concat(B,"-overflow"),data:a,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,i=!d&&!t,o=n;if("number"==typeof _&&("string"==typeof n||"number"==typeof n)){var a=String(o);a.length>_&&(o="".concat(a.slice(0,_),"..."))}var s=function(t){t&&t.stopPropagation(),M(e)};return"function"==typeof E?H(r,o,t,i,s):$(e,o,t,i,s)},renderRest:function(e){var t="function"==typeof S?S(e):S;return"function"==typeof E?H(void 0,t,!1,!1,void 0,!0):$({title:t},t,!1)},suffix:G,itemKey:SW,maxCount:x});return n.createElement("span",{className:"".concat(B,"-wrap")},W,!a.length&&!j&&n.createElement("span",{className:"".concat(B,"-placeholder")},h))},MW=function(e){var t=e.inputElement,r=e.prefixCls,i=e.id,o=e.inputRef,a=e.disabled,s=e.autoFocus,l=e.autoComplete,c=e.activeDescendantId,u=e.mode,h=e.open,d=e.values,f=e.placeholder,p=e.tabIndex,m=e.showSearch,g=e.searchValue,v=e.activeValue,y=e.maxLength,b=e.onInputKeyDown,x=e.onInputMouseDown,_=e.onInputChange,w=e.onInputPaste,S=e.onInputCompositionStart,E=e.onInputCompositionEnd,C=e.title,M=Ht(n.useState(!1),2),T=M[0],A=M[1],P="combobox"===u,R=P||m,I=d[0],O=g||"";P&&v&&!T&&(O=v),n.useEffect((function(){P&&A(!1)}),[P,v]);var k=!("combobox"!==u&&!h&&!m||!O),L=void 0===C?wW(I):C,N=n.useMemo((function(){return I?null:n.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:k?{visibility:"hidden"}:void 0},f)}),[I,k,f,r]);return n.createElement("span",{className:"".concat(r,"-selection-wrap")},n.createElement("span",{className:"".concat(r,"-selection-search")},n.createElement(yW,{ref:o,prefixCls:r,id:i,open:h,inputElement:t,disabled:a,autoFocus:s,autoComplete:l,editable:R,activeDescendantId:c,value:O,onKeyDown:b,onMouseDown:x,onChange:function(e){A(!0),_(e)},onPaste:w,onCompositionStart:S,onCompositionEnd:E,tabIndex:p,attrs:nB(e,!0),maxLength:P?y:void 0})),!P&&I?n.createElement("span",{className:"".concat(r,"-selection-item"),title:L,style:k?{visibility:"hidden"}:void 0},I.label):null,N)};var TW=function(e,t){var r=(0,n.useRef)(null),i=(0,n.useRef)(!1),o=e.prefixCls,a=e.open,s=e.mode,l=e.showSearch,c=e.tokenWithEnter,u=e.disabled,h=e.prefix,d=e.autoClearSearchValue,f=e.onSearch,p=e.onSearchSubmit,m=e.onToggleOpen,g=e.onInputKeyDown,v=e.domRef;n.useImperativeHandle(t,(function(){return{focus:function(e){r.current.focus(e)},blur:function(){r.current.blur()}}}));var y=Ht(gW(0),2),b=y[0],x=y[1],_=(0,n.useRef)(null),w=function(e){!1!==f(e,!0,i.current)&&m(!0)},S={inputRef:r,onInputKeyDown:function(e){var t,n=e.which,o=r.current instanceof HTMLTextAreaElement;o||!a||n!==QF.UP&&n!==QF.DOWN||e.preventDefault(),g&&g(e),n!==QF.ENTER||"tags"!==s||i.current||a||null==p||p(e.target.value),o&&!a&&~[QF.UP,QF.DOWN,QF.LEFT,QF.RIGHT].indexOf(n)||(t=n)&&![QF.ESC,QF.SHIFT,QF.BACKSPACE,QF.TAB,QF.WIN_KEY,QF.ALT,QF.META,QF.WIN_KEY_RIGHT,QF.CTRL,QF.SEMICOLON,QF.EQUALS,QF.CAPS_LOCK,QF.CONTEXT_MENU,QF.F1,QF.F2,QF.F3,QF.F4,QF.F5,QF.F6,QF.F7,QF.F8,QF.F9,QF.F10,QF.F11,QF.F12].includes(t)&&m(!0)},onInputMouseDown:function(){x(!0)},onInputChange:function(e){var t=e.target.value;if(c&&_.current&&/[\r\n]/.test(_.current)){var n=_.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,_.current)}_.current=null,w(t)},onInputPaste:function(e){var t=e.clipboardData,n=null==t?void 0:t.getData("text");_.current=n||""},onInputCompositionStart:function(){i.current=!0},onInputCompositionEnd:function(e){i.current=!1,"combobox"!==s&&w(e.target.value)}},E="multiple"===s||"tags"===s?n.createElement(CW,nr({},e,S)):n.createElement(MW,nr({},e,S));return n.createElement("div",{ref:v,className:"".concat(o,"-selector"),onClick:function(e){e.target!==r.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){r.current.focus()})):r.current.focus())},onMouseDown:function(e){var t=b();e.target===r.current||t||"combobox"===s&&u||e.preventDefault(),("combobox"===s||l&&t)&&a||(a&&!1!==d&&f("",!0,!1),m())}},h&&n.createElement("div",{className:"".concat(o,"-prefix")},h),E)};const AW=n.forwardRef(TW);var PW=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],RW=function(e,t){var r=e.prefixCls,i=(e.disabled,e.visible),o=e.children,a=e.popupElement,s=e.animation,l=e.transitionName,c=e.dropdownStyle,u=e.dropdownClassName,h=e.direction,d=void 0===h?"ltr":h,f=e.placement,p=e.builtinPlacements,m=e.dropdownMatchSelectWidth,g=e.dropdownRender,v=e.dropdownAlign,y=e.getPopupContainer,b=e.empty,x=e.getTriggerDOMNode,_=e.onPopupVisibleChange,w=e.onPopupMouseEnter,S=Ca(e,PW),E="".concat(r,"-dropdown"),C=a;g&&(C=g(a));var M=n.useMemo((function(){return p||function(e){var t=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"}}}(m)}),[p,m]),T=s?"".concat(E,"-").concat(s):l,A="number"==typeof m,P=n.useMemo((function(){return A?null:!1===m?"minWidth":"width"}),[m,A]),R=c;A&&(R=Xt(Xt({},R),{},{width:m}));var I=n.useRef(null);return n.useImperativeHandle(t,(function(){return{getPopupElement:function(){var e;return null===(e=I.current)||void 0===e?void 0:e.popupElement}}})),n.createElement(EN,nr({},S,{showAction:_?["click"]:[],hideAction:_?["click"]:[],popupPlacement:f||("rtl"===d?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:E,popupTransitionName:T,popup:n.createElement("div",{onMouseEnter:w},C),ref:I,stretch:P,popupAlign:v,popupVisible:i,getPopupContainer:y,popupClassName:va()(u,Ft({},"".concat(E,"-empty"),b)),popupStyle:R,getTriggerDOMNode:x,onPopupVisibleChange:_}),o)};const IW=n.forwardRef(RW);function OW(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!=r?r:void 0!==n?n:"rc-index-key-".concat(t)}function kW(e){return void 0!==e&&!Number.isNaN(e)}function LW(e,t){var n=e||{},r=n.label||(t?"children":"label");return{label:r,value:n.value||"value",options:n.options||"options",groupLabel:n.groupLabel||r}}function NW(e){var t=Xt({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return gn(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}const DW=n.createContext(null);function zW(e){var t=e.visible,r=e.values;return t?n.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,50).map((function(e){var t=e.label,n=e.value;return["number","string"].includes(zt(t))?t:n})).join(", ")),r.length>50?", ...":null):null}var UW=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],FW=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],BW=function(e){return"tags"===e||"multiple"===e};const jW=n.forwardRef((function(e,t){var r,i=e.id,o=e.prefixCls,a=e.className,s=e.showSearch,l=e.tagRender,c=e.direction,u=e.omitDomProps,h=e.displayValues,d=e.onDisplayValuesChange,f=e.emptyOptions,p=e.notFoundContent,m=void 0===p?"Not Found":p,g=e.onClear,v=e.mode,y=e.disabled,b=e.loading,x=e.getInputElement,_=e.getRawInputElement,w=e.open,S=e.defaultOpen,E=e.onDropdownVisibleChange,C=e.activeValue,M=e.onActiveValueChange,T=e.activeDescendantId,A=e.searchValue,P=e.autoClearSearchValue,R=e.onSearch,I=e.onSearchSplit,O=e.tokenSeparators,k=e.allowClear,L=e.prefix,N=e.suffixIcon,D=e.clearIcon,z=e.OptionList,U=e.animation,F=e.transitionName,B=e.dropdownStyle,j=e.dropdownClassName,V=e.dropdownMatchSelectWidth,$=e.dropdownRender,H=e.dropdownAlign,G=e.placement,W=e.builtinPlacements,q=e.getPopupContainer,X=e.showAction,Y=void 0===X?[]:X,K=e.onFocus,Z=e.onBlur,J=e.onKeyUp,Q=e.onKeyDown,ee=e.onMouseDown,te=Ca(e,UW),ne=BW(v),re=(void 0!==s?s:ne)||"combobox"===v,ie=Xt({},te);FW.forEach((function(e){delete ie[e]})),null==u||u.forEach((function(e){delete ie[e]}));var oe=Ht(n.useState(!1),2),ae=oe[0],se=oe[1];n.useEffect((function(){se(nN())}),[]);var le=n.useRef(null),ce=n.useRef(null),ue=n.useRef(null),he=n.useRef(null),de=n.useRef(null),fe=n.useRef(!1),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=Ht(n.useState(!1),2),r=t[0],i=t[1],o=n.useRef(null),a=function(){window.clearTimeout(o.current)};return n.useEffect((function(){return a}),[]),[r,function(t,n){a(),o.current=window.setTimeout((function(){i(t),n&&n()}),e)},a]}(),me=Ht(pe,3),ge=me[0],ve=me[1],ye=me[2];n.useImperativeHandle(t,(function(){var e,t;return{focus:null===(e=he.current)||void 0===e?void 0:e.focus,blur:null===(t=he.current)||void 0===t?void 0:t.blur,scrollTo:function(e){var t;return null===(t=de.current)||void 0===t?void 0:t.scrollTo(e)},nativeElement:le.current||ce.current}}));var be=n.useMemo((function(){var e;if("combobox"!==v)return A;var t=null===(e=h[0])||void 0===e?void 0:e.value;return"string"==typeof t||"number"==typeof t?String(t):""}),[A,v,h]),xe="combobox"===v&&"function"==typeof x&&x()||null,_e="function"==typeof _&&_(),we=Sa(ce,null==_e||null===(r=_e.props)||void 0===r?void 0:r.ref),Se=Ht(n.useState(!1),2),Ee=Se[0],Ce=Se[1];Wn((function(){Ce(!0)}),[]);var Me=Ht(Ba(!1,{defaultValue:S,value:w}),2),Te=Me[0],Ae=Me[1],Pe=!!Ee&&Te,Re=!m&&f;(y||Re&&Pe&&"combobox"===v)&&(Pe=!1);var Ie=!Re&&Pe,Oe=n.useCallback((function(e){var t=void 0!==e?e:!Pe;y||(Ae(t),Pe!==t&&(null==E||E(t)))}),[y,Pe,Ae,E]),ke=n.useMemo((function(){return(O||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[O]),Le=n.useContext(DW)||{},Ne=Le.maxCount,De=Le.rawValues,ze=function(e,t,n){if(!(ne&&kW(Ne)&&(null==De?void 0:De.size)>=Ne)){var r=!0,i=e;null==M||M(null);var o=function(e,t,n){if(!t||!t.length)return null;var r=!1,i=function e(t,n){var i=Oo(n),o=i[0],a=i.slice(1);if(!o)return[t];var s=t.split(o);return r=r||s.length>1,s.reduce((function(t,n){return[].concat(Wt(t),Wt(e(n,a)))}),[]).filter(Boolean)}(e,t);return r?void 0!==n?i.slice(0,n):i:null}(e,O,kW(Ne)?Ne-De.size:void 0),a=n?null:o;return"combobox"!==v&&a&&(i="",null==I||I(a),Oe(!1),r=!1),R&&be!==i&&R(i,{source:t?"typing":"effect"}),r}};n.useEffect((function(){Pe||ne||"combobox"===v||ze("",!1,!1)}),[Pe]),n.useEffect((function(){Te&&y&&Ae(!1),y&&!fe.current&&ve(!1)}),[y]);var Ue=Ht(gW(),2),Fe=Ue[0],Be=Ue[1],je=n.useRef(!1),Ve=n.useRef(!1),$e=[];n.useEffect((function(){return function(){$e.forEach((function(e){return clearTimeout(e)})),$e.splice(0,$e.length)}}),[]);var He,Ge=Ht(n.useState({}),2)[1];_e&&(He=function(e){Oe(e)}),function(e,t,r,i){var o=n.useRef(null);o.current={open:t,triggerOpen:r,customizedTrigger:i},n.useEffect((function(){function e(e){var t,n;if(null===(t=o.current)||void 0===t||!t.customizedTrigger){var r=e.target;r.shadowRoot&&e.composed&&(r=e.composedPath()[0]||r),o.current.open&&[le.current,null===(n=ue.current)||void 0===n?void 0:n.getPopupElement()].filter((function(e){return e})).every((function(e){return!e.contains(r)&&e!==r}))&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[])}(0,Ie,Oe,!!_e);var We,qe=n.useMemo((function(){return Xt(Xt({},e),{},{notFoundContent:m,open:Pe,triggerOpen:Ie,id:i,showSearch:re,multiple:ne,toggleOpen:Oe})}),[e,m,Ie,Pe,i,re,ne,Oe]),Xe=!!N||b;Xe&&(We=n.createElement(pW,{className:va()("".concat(o,"-arrow"),Ft({},"".concat(o,"-arrow-loading"),b)),customizeIcon:N,customizeIconProps:{loading:b,searchValue:be,open:Pe,focused:ge,showSearch:re}}));var Ye,Ke=function(e,t,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=n.useMemo((function(){return"object"===zt(i)?i.clearIcon:o||void 0}),[i,o]);return{allowClear:n.useMemo((function(){return!(a||!i||!r.length&&!s||"combobox"===l&&""===s)}),[i,a,r.length,s,l]),clearIcon:n.createElement(pW,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:c},"")}}(o,(function(){var e;null==g||g(),null===(e=he.current)||void 0===e||e.focus(),d([],{type:"clear",values:h}),ze("",!1,!1)}),h,k,D,y,be,v),Ze=Ke.allowClear,Je=Ke.clearIcon,Qe=n.createElement(z,{ref:de}),et=va()(o,a,Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({},"".concat(o,"-focused"),ge),"".concat(o,"-multiple"),ne),"".concat(o,"-single"),!ne),"".concat(o,"-allow-clear"),k),"".concat(o,"-show-arrow"),Xe),"".concat(o,"-disabled"),y),"".concat(o,"-loading"),b),"".concat(o,"-open"),Pe),"".concat(o,"-customize-input"),xe),"".concat(o,"-show-search"),re)),tt=n.createElement(IW,{ref:ue,disabled:y,prefixCls:o,visible:Ie,popupElement:Qe,animation:U,transitionName:F,dropdownStyle:B,dropdownClassName:j,direction:c,dropdownMatchSelectWidth:V,dropdownRender:$,dropdownAlign:H,placement:G,builtinPlacements:W,getPopupContainer:q,empty:f,getTriggerDOMNode:function(e){return ce.current||e},onPopupVisibleChange:He,onPopupMouseEnter:function(){Ge({})}},_e?n.cloneElement(_e,{ref:we}):n.createElement(AW,nr({},e,{domRef:ce,prefixCls:o,inputElement:xe,ref:he,id:i,prefix:L,showSearch:re,autoClearSearchValue:P,mode:v,activeDescendantId:T,tagRender:l,values:h,open:Pe,onToggleOpen:Oe,activeValue:C,searchValue:be,onSearch:ze,onSearchSubmit:function(e){e&&e.trim()&&R(e,{source:"submit"})},onRemove:function(e){var t=h.filter((function(t){return t!==e}));d(t,{type:"remove",values:[e]})},tokenWithEnter:ke})));return Ye=_e?tt:n.createElement("div",nr({className:et},ie,{ref:le,onMouseDown:function(e){var t,n=e.target,r=null===(t=ue.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var i=setTimeout((function(){var e,t=$e.indexOf(i);-1!==t&&$e.splice(t,1),ye(),ae||r.contains(document.activeElement)||null===(e=he.current)||void 0===e||e.focus()}));$e.push(i)}for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];null==ee||ee.apply(void 0,[e].concat(a))},onKeyDown:function(e){var t,n=Fe(),r=e.key,i="Enter"===r;if(i&&("combobox"!==v&&e.preventDefault(),Pe||Oe(!0)),Be(!!be),"Backspace"===r&&!n&&ne&&!be&&h.length){for(var o=Wt(h),a=null,s=o.length-1;s>=0;s-=1){var l=o[s];if(!l.disabled){o.splice(s,1),a=l;break}}a&&d(o,{type:"remove",values:[a]})}for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];!Pe||i&&je.current||null===(t=de.current)||void 0===t||t.onKeyDown.apply(t,[e].concat(u)),i&&(je.current=!0),null==Q||Q.apply(void 0,[e].concat(u))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;Pe&&(null===(i=de.current)||void 0===i||i.onKeyUp.apply(i,[e].concat(n))),"Enter"===e.key&&(je.current=!1),null==J||J.apply(void 0,[e].concat(n))},onFocus:function(){ve(!0),y||(K&&!Ve.current&&K.apply(void 0,arguments),Y.includes("focus")&&Oe(!0)),Ve.current=!0},onBlur:function(){fe.current=!0,ve(!1,(function(){Ve.current=!1,fe.current=!1,Oe(!1)})),y||(be&&("tags"===v?R(be,{source:"submit"}):"multiple"===v&&R("",{source:"blur"})),Z&&Z.apply(void 0,arguments))}}),n.createElement(zW,{visible:ge&&!Pe,values:h}),tt,We,Ze&&Je),n.createElement(mW.Provider,{value:qe},Ye)}));var VW=function(){return null};VW.isSelectOptGroup=!0;const $W=VW;var HW=function(){return null};HW.isSelectOption=!0;const GW=HW;var WW=n.forwardRef((function(e,t){var r=e.height,i=e.offsetY,o=e.offsetX,a=e.children,s=e.prefixCls,l=e.onInnerResize,c=e.innerProps,u=e.rtl,h=e.extra,d={},f={display:"flex",flexDirection:"column"};return void 0!==i&&(d={height:r,position:"relative",overflow:"hidden"},f=Xt(Xt({},f),{},Ft(Ft(Ft(Ft(Ft({transform:"translateY(".concat(i,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),n.createElement("div",{style:d},n.createElement(JL,{onResize:function(e){e.offsetHeight&&l&&l()}},n.createElement("div",nr({style:f,className:va()(Ft({},"".concat(s,"-holder-inner"),s)),ref:t},c),a,h)))}));WW.displayName="Filler";const qW=WW;function XW(e){var t=e.children,r=e.setRef,i=n.useCallback((function(e){r(e)}),[]);return n.cloneElement(t,{ref:i})}const YW="object"===("undefined"==typeof navigator?"undefined":zt(navigator))&&/Firefox/i.test(navigator.userAgent),KW=function(e,t,r,i){var o=(0,n.useRef)(!1),a=(0,n.useRef)(null),s=(0,n.useRef)({top:e,bottom:t,left:r,right:i});return s.current.top=e,s.current.bottom=t,s.current.left=r,s.current.right=i,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e?t<0&&s.current.left||t>0&&s.current.right:t<0&&s.current.top||t>0&&s.current.bottom;return n&&r?(clearTimeout(a.current),o.current=!1):r&&!o.current||(clearTimeout(a.current),o.current=!0,a.current=setTimeout((function(){o.current=!1}),50)),!o.current&&r}};const ZW=function(){function e(){yn(this,e),Ft(this,"maps",void 0),Ft(this,"id",0),this.maps=Object.create(null)}return xn(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();function JW(e){var t=parseFloat(e);return isNaN(t)?0:t}var QW=14/15;function eq(e){return Math.floor(Math.pow(e,.5))}function tq(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}const nq=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.rtl,o=e.scrollOffset,a=e.scrollRange,s=e.onStartMove,l=e.onStopMove,c=e.onScroll,u=e.horizontal,h=e.spinSize,d=e.containerSize,f=e.style,p=e.thumbStyle,m=Ht(n.useState(!1),2),g=m[0],v=m[1],y=Ht(n.useState(null),2),b=y[0],x=y[1],_=Ht(n.useState(null),2),w=_[0],S=_[1],E=!i,C=n.useRef(),M=n.useRef(),T=Ht(n.useState(!1),2),A=T[0],P=T[1],R=n.useRef(),I=function(){clearTimeout(R.current),P(!0),R.current=setTimeout((function(){P(!1)}),3e3)},O=a-d||0,k=d-h||0,L=n.useMemo((function(){return 0===o||0===O?0:o/O*k}),[o,O,k]),N=n.useRef({top:L,dragging:g,pageY:b,startTop:w});N.current={top:L,dragging:g,pageY:b,startTop:w};var D=function(e){v(!0),x(tq(e,u)),S(N.current.top),s(),e.stopPropagation(),e.preventDefault()};n.useEffect((function(){var e=function(e){e.preventDefault()},t=C.current,n=M.current;return t.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchstart",D,{passive:!1}),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",D)}}),[]);var z=n.useRef();z.current=O;var U=n.useRef();U.current=k,n.useEffect((function(){if(g){var e,t=function(t){var n=N.current,r=n.dragging,i=n.pageY,o=n.startTop;bs.cancel(e);var a=C.current.getBoundingClientRect(),s=d/(u?a.width:a.height);if(r){var l=(tq(t,u)-i)*s,h=o;!E&&u?h-=l:h+=l;var f=z.current,p=U.current,m=p?h/p:0,g=Math.ceil(m*f);g=Math.max(g,0),g=Math.min(g,f),e=bs((function(){c(g,u)}))}},n=function(){v(!1),l()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),bs.cancel(e)}}}),[g]),n.useEffect((function(){return I(),function(){clearTimeout(R.current)}}),[o]),n.useImperativeHandle(t,(function(){return{delayHidden:I}}));var F="".concat(r,"-scrollbar"),B={position:"absolute",visibility:A?null:"hidden"},j={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(B.height=8,B.left=0,B.right=0,B.bottom=0,j.height="100%",j.width=h,E?j.left=L:j.right=L):(B.width=8,B.top=0,B.bottom=0,E?B.right=0:B.left=0,j.width="100%",j.height=h,j.top=L),n.createElement("div",{ref:C,className:va()(F,Ft(Ft(Ft({},"".concat(F,"-horizontal"),u),"".concat(F,"-vertical"),!u),"".concat(F,"-visible"),A)),style:Xt(Xt({},B),f),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:I},n.createElement("div",{ref:M,className:va()("".concat(F,"-thumb"),Ft({},"".concat(F,"-thumb-moving"),g)),style:Xt(Xt({},j),p),onMouseDown:D}))}));function rq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,20),Math.floor(t)}var iq=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],oq=[],aq={overflowY:"auto",overflowAnchor:"none"};function sq(e,t){var r=e.prefixCls,i=void 0===r?"rc-virtual-list":r,a=e.className,s=e.height,l=e.itemHeight,c=e.fullHeight,u=void 0===c||c,h=e.style,d=e.data,f=e.children,p=e.itemKey,m=e.virtual,g=e.direction,v=e.scrollWidth,y=e.component,b=void 0===y?"div":y,x=e.onScroll,_=e.onVirtualScroll,w=e.onVisibleChange,S=e.innerProps,E=e.extraRender,C=e.styles,M=Ca(e,iq),T=n.useCallback((function(e){return"function"==typeof p?p(e):null==e?void 0:e[p]}),[p]),A=function(e){var t=Ht(n.useState(0),2),r=t[0],i=t[1],o=(0,n.useRef)(new Map),a=(0,n.useRef)(new ZW),s=(0,n.useRef)();function l(){bs.cancel(s.current)}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l();var t=function(){o.current.forEach((function(e,t){if(e&&e.offsetParent){var n=ba(e),r=n.offsetHeight,i=getComputedStyle(n),o=i.marginTop,s=i.marginBottom,l=r+JW(o)+JW(s);a.current.get(t)!==l&&a.current.set(t,l)}})),i((function(e){return e+1}))};e?t():s.current=bs(t)}return(0,n.useEffect)((function(){return l}),[]),[function(t,n){var r=e(t);o.current.get(r);n?(o.current.set(r,n),c()):o.current.delete(r)},c,a.current,r]}(T),P=Ht(A,4),R=P[0],I=P[1],O=P[2],k=P[3],L=!(!1===m||!s||!l),N=n.useMemo((function(){return Object.values(O.maps).reduce((function(e,t){return e+t}),0)}),[O.id,O.maps]),D=L&&d&&(Math.max(l*d.length,N)>s||!!v),z="rtl"===g,U=va()(i,Ft({},"".concat(i,"-rtl"),z),a),F=d||oq,B=(0,n.useRef)(),j=(0,n.useRef)(),V=(0,n.useRef)(),$=Ht((0,n.useState)(0),2),H=$[0],G=$[1],W=Ht((0,n.useState)(0),2),q=W[0],X=W[1],Y=Ht((0,n.useState)(!1),2),K=Y[0],Z=Y[1],J=function(){Z(!0)},Q=function(){Z(!1)},ee={getKey:T};function te(e){G((function(t){var n=function(e){var t=e;return Number.isNaN(ye.current)||(t=Math.min(t,ye.current)),t=Math.max(t,0)}("function"==typeof e?e(t):e);return B.current.scrollTop=n,n}))}var ne=(0,n.useRef)({start:0,end:F.length}),re=(0,n.useRef)(),ie=Ht(function(e,t,r){var i=Ht(n.useState(e),2),o=i[0],a=i[1],s=Ht(n.useState(null),2),l=s[0],c=s[1];return n.useEffect((function(){var n=function(e,t,n){var r,i,o=e.length,a=t.length;if(0===o&&0===a)return null;o<a?(r=e,i=t):(r=t,i=e);var s={__EMPTY_ITEM__:!0};function l(e){return void 0!==e?n(e):s}for(var c=null,u=1!==Math.abs(o-a),h=0;h<i.length;h+=1){var d=l(r[h]);if(d!==l(i[h])){c=h,u=u||d!==l(i[h+1]);break}}return null===c?null:{index:c,multiple:u}}(o||[],e||[],t);void 0!==(null==n?void 0:n.index)&&(null==r||r(n.index),c(e[n.index])),a(e)}),[e]),[l]}(F,T),1)[0];re.current=ie;var oe=n.useMemo((function(){if(!L)return{scrollHeight:void 0,start:0,end:F.length-1,offset:void 0};var e;if(!D)return{scrollHeight:(null===(e=j.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:F.length-1,offset:void 0};for(var t,n,r,i=0,o=F.length,a=0;a<o;a+=1){var c=F[a],u=T(c),h=O.get(u),d=i+(void 0===h?l:h);d>=H&&void 0===t&&(t=a,n=i),d>H+s&&void 0===r&&(r=a),i=d}return void 0===t&&(t=0,n=0,r=Math.ceil(s/l)),void 0===r&&(r=F.length-1),{scrollHeight:i,start:t,end:r=Math.min(r+1,F.length-1),offset:n}}),[D,L,H,F,k,s]),ae=oe.scrollHeight,se=oe.start,le=oe.end,ce=oe.offset;ne.current.start=se,ne.current.end=le;var ue=Ht(n.useState({width:0,height:s}),2),he=ue[0],de=ue[1],fe=(0,n.useRef)(),pe=(0,n.useRef)(),me=n.useMemo((function(){return rq(he.width,v)}),[he.width,v]),ge=n.useMemo((function(){return rq(he.height,ae)}),[he.height,ae]),ve=ae-s,ye=(0,n.useRef)(ve);ye.current=ve;var be=H<=0,xe=H>=ve,_e=q<=0,we=q>=v,Se=KW(be,xe,_e,we),Ee=function(){return{x:z?-q:q,y:H}},Ce=(0,n.useRef)(Ee()),Me=za((function(e){if(_){var t=Xt(Xt({},Ee()),e);Ce.current.x===t.x&&Ce.current.y===t.y||(_(t),Ce.current=t)}}));function Te(e,t){var n=e;t?((0,o.flushSync)((function(){X(n)})),Me()):te(n)}var Ae=function(e){var t=e,n=v?v-he.width:0;return t=Math.max(t,0),Math.min(t,n)},Pe=za((function(e,t){t?((0,o.flushSync)((function(){X((function(t){return Ae(t+(z?-e:e))}))})),Me()):te((function(t){return t+e}))})),Re=Ht(function(e,t,r,i,o,a,s){var l=(0,n.useRef)(0),c=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,n.useRef)(!1),d=KW(t,r,i,o),f=(0,n.useRef)(null),p=(0,n.useRef)(null);return[function(t){if(e){bs.cancel(p.current),p.current=bs((function(){f.current=null}),2);var n=t.deltaX,r=t.deltaY,i=t.shiftKey,o=n,m=r;("sx"===f.current||!f.current&&i&&r&&!n)&&(o=r,m=0,f.current="sx");var g=Math.abs(o),v=Math.abs(m);null===f.current&&(f.current=a&&g>v?"x":"y"),"y"===f.current?function(e,t){if(bs.cancel(c.current),!d(!1,t)){var n=e;n._virtualHandled||(n._virtualHandled=!0,l.current+=t,u.current=t,YW||n.preventDefault(),c.current=bs((function(){var e=h.current?10:1;s(l.current*e,!1),l.current=0})))}}(t,m):function(e,t){s(t,!0),YW||e.preventDefault()}(t,o)}},function(t){e&&(h.current=t.detail===u.current)}]}(L,be,xe,_e,we,!!v,Pe),2),Ie=Re[0],Oe=Re[1];!function(e,t,r){var i,o=(0,n.useRef)(!1),a=(0,n.useRef)(0),s=(0,n.useRef)(0),l=(0,n.useRef)(null),c=(0,n.useRef)(null),u=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),n=Math.ceil(e.touches[0].pageY),i=a.current-t,l=s.current-n,u=Math.abs(i)>Math.abs(l);u?a.current=t:s.current=n;var h=r(u,u?i:l,!1,e);h&&e.preventDefault(),clearInterval(c.current),h&&(c.current=setInterval((function(){u?i*=QW:l*=QW;var e=Math.floor(u?i:l);(!r(u,e,!0)||Math.abs(e)<=.1)&&clearInterval(c.current)}),16))}},h=function(){o.current=!1,i()},d=function(e){i(),1!==e.touches.length||o.current||(o.current=!0,a.current=Math.ceil(e.touches[0].pageX),s.current=Math.ceil(e.touches[0].pageY),l.current=e.target,l.current.addEventListener("touchmove",u,{passive:!1}),l.current.addEventListener("touchend",h,{passive:!0}))};i=function(){l.current&&(l.current.removeEventListener("touchmove",u),l.current.removeEventListener("touchend",h))},Wn((function(){return e&&t.current.addEventListener("touchstart",d,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",d),i(),clearInterval(c.current)}}),[e])}(L,B,(function(e,t,n,r){var i=r;return!(Se(e,t,n)||i&&i._virtualHandled||(i&&(i._virtualHandled=!0),Ie({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),0))})),function(e,t){n.useEffect((function(){var n=t.current;if(e&&n){var r,i,o=!1,a=function(){bs.cancel(r)},s=function e(){a(),r=bs((function(){var t;t=i,te((function(e){return e+t})),e()}))},l=function(e){var t=e;t._virtualHandled||(t._virtualHandled=!0,o=!0)},c=function(){o=!1,a()},u=function(e){if(o){var t=tq(e,!1),r=n.getBoundingClientRect(),l=r.top,c=r.bottom;t<=l?(i=-eq(l-t),s()):t>=c?(i=eq(t-c),s()):a()}};return n.addEventListener("mousedown",l),n.ownerDocument.addEventListener("mouseup",c),n.ownerDocument.addEventListener("mousemove",u),function(){n.removeEventListener("mousedown",l),n.ownerDocument.removeEventListener("mouseup",c),n.ownerDocument.removeEventListener("mousemove",u),a()}}}),[e])}(D,B),Wn((function(){function e(e){var t=be&&e.detail<0,n=xe&&e.detail>0;!L||t||n||e.preventDefault()}var t=B.current;return t.addEventListener("wheel",Ie,{passive:!1}),t.addEventListener("DOMMouseScroll",Oe,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",Ie),t.removeEventListener("DOMMouseScroll",Oe),t.removeEventListener("MozMousePixelScroll",e)}}),[L,be,xe]),Wn((function(){if(v){var e=Ae(q);X(e),Me({x:e})}}),[he.width,v]);var ke=function(){var e,t;null===(e=fe.current)||void 0===e||e.delayHidden(),null===(t=pe.current)||void 0===t||t.delayHidden()},Le=function(e,t,r,i,o,a,s,l){var c=n.useRef(),u=Ht(n.useState(null),2),h=u[0],d=u[1];return Wn((function(){if(h&&h.times<10){if(!e.current)return void d((function(e){return Xt({},e)}));a();var n=h.targetAlign,l=h.originAlign,c=h.index,u=h.offset,f=e.current.clientHeight,p=!1,m=n,g=null;if(f){for(var v=n||l,y=0,b=0,x=0,_=Math.min(t.length-1,c),w=0;w<=_;w+=1){var S=o(t[w]);b=y;var E=r.get(S);y=x=b+(void 0===E?i:E)}for(var C="top"===v?u:f-u,M=_;M>=0;M-=1){var T=o(t[M]),A=r.get(T);if(void 0===A){p=!0;break}if((C-=A)<=0)break}switch(v){case"top":g=b-u;break;case"bottom":g=x-f+u;break;default:var P=e.current.scrollTop;b<P?m="top":x>P+f&&(m="bottom")}null!==g&&s(g),g!==h.lastTop&&(p=!0)}p&&d(Xt(Xt({},h),{},{times:h.times+1,targetAlign:m,lastTop:g}))}}),[h,e.current]),function(e){if(null!=e){if(bs.cancel(c.current),"number"==typeof e)s(e);else if(e&&"object"===zt(e)){var n,r=e.align;n="index"in e?e.index:t.findIndex((function(t){return o(t)===e.key}));var i=e.offset;d({times:0,index:n,offset:void 0===i?0:i,originAlign:r})}}else l()}}(B,F,O,l,T,(function(){return I(!0)}),te,ke);n.useImperativeHandle(t,(function(){return{nativeElement:V.current,getScrollInfo:Ee,scrollTo:function(e){var t;(t=e)&&"object"===zt(t)&&("left"in t||"top"in t)?(void 0!==e.left&&X(Ae(e.left)),Le(e.top)):Le(e)}}})),Wn((function(){if(w){var e=F.slice(se,le+1);w(e,F)}}),[se,le,F]);var Ne=function(e,t,r,i){var o=Ht(n.useMemo((function(){return[new Map,[]]}),[e,r.id,i]),2),a=o[0],s=o[1];return function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,l=a.get(n),c=a.get(o);if(void 0===l||void 0===c)for(var u=e.length,h=s.length;h<u;h+=1){var d,f=e[h],p=t(f);a.set(p,h);var m=null!==(d=r.get(p))&&void 0!==d?d:i;if(s[h]=(s[h-1]||0)+m,p===n&&(l=h),p===o&&(c=h),void 0!==l&&void 0!==c)break}return{top:s[l-1]||0,bottom:s[c]}}}(F,T,O,l),De=null==E?void 0:E({start:se,end:le,virtual:D,offsetX:q,offsetY:ce,rtl:z,getSize:Ne}),ze=function(e,t,r,i,o,a,s,l){var c=l.getKey;return e.slice(t,r+1).map((function(e,r){var l=s(e,t+r,{style:{width:i},offsetX:o}),u=c(e);return n.createElement(XW,{key:u,setRef:function(t){return a(e,t)}},l)}))}(F,se,le,v,q,R,f,ee),Ue=null;s&&(Ue=Xt(Ft({},u?"height":"maxHeight",s),aq),L&&(Ue.overflowY="hidden",v&&(Ue.overflowX="hidden"),K&&(Ue.pointerEvents="none")));var Fe={};return z&&(Fe.dir="rtl"),n.createElement("div",nr({ref:V,style:Xt(Xt({},h),{},{position:"relative"}),className:U},Fe,M),n.createElement(JL,{onResize:function(e){de({width:e.offsetWidth,height:e.offsetHeight})}},n.createElement(b,{className:"".concat(i,"-holder"),style:Ue,ref:B,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==H&&te(t),null==x||x(e),Me()},onMouseEnter:ke},n.createElement(qW,{prefixCls:i,height:ae,offsetX:q,offsetY:ce,scrollWidth:v,onInnerResize:I,ref:j,innerProps:S,rtl:z,extra:De},ze))),D&&ae>s&&n.createElement(nq,{ref:fe,prefixCls:i,scrollOffset:H,scrollRange:ae,rtl:z,onScroll:Te,onStartMove:J,onStopMove:Q,spinSize:ge,containerSize:he.height,style:null==C?void 0:C.verticalScrollBar,thumbStyle:null==C?void 0:C.verticalScrollBarThumb}),D&&v>he.width&&n.createElement(nq,{ref:pe,prefixCls:i,scrollOffset:q,scrollRange:v,rtl:z,onScroll:Te,onStartMove:J,onStopMove:Q,spinSize:me,containerSize:he.width,horizontal:!0,style:null==C?void 0:C.horizontalScrollBar,thumbStyle:null==C?void 0:C.horizontalScrollBarThumb}))}var lq=n.forwardRef(sq);lq.displayName="List";const cq=lq;var uq=["disabled","title","children","style","className"];function hq(e){return"string"==typeof e||"number"==typeof e}var dq=function(e,t){var r=n.useContext(mW),i=r.prefixCls,o=r.id,a=r.open,s=r.multiple,l=r.mode,c=r.searchValue,u=r.toggleOpen,h=r.notFoundContent,d=r.onPopupScroll,f=n.useContext(DW),p=f.maxCount,m=f.flattenOptions,g=f.onActiveValue,v=f.defaultActiveFirstOption,y=f.onSelect,b=f.menuItemSelectedIcon,x=f.rawValues,_=f.fieldNames,w=f.virtual,S=f.direction,E=f.listHeight,C=f.listItemHeight,M=f.optionRender,T="".concat(i,"-item"),A=cn((function(){return m}),[a,m],(function(e,t){return t[0]&&e[1]!==t[1]})),P=n.useRef(null),R=n.useMemo((function(){return s&&kW(p)&&(null==x?void 0:x.size)>=p}),[s,p,null==x?void 0:x.size]),I=function(e){e.preventDefault()},O=function(e){var t;null===(t=P.current)||void 0===t||t.scrollTo("number"==typeof e?{index:e}:e)},k=n.useCallback((function(e){return"combobox"!==l&&x.has(e)}),[l,Wt(x).toString(),x.size]),L=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=A.length,r=0;r<n;r+=1){var i=(e+r*t+n)%n,o=A[i]||{},a=o.group,s=o.data;if(!a&&(null==s||!s.disabled)&&(k(s.value)||!R))return i}return-1},N=Ht(n.useState((function(){return L(0)})),2),D=N[0],z=N[1],U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];z(e);var n={source:t?"keyboard":"mouse"},r=A[e];r?g(r.value,e,n):g(null,-1,n)};(0,n.useEffect)((function(){U(!1!==v?L(0):-1)}),[A.length,c]);var F=n.useCallback((function(e){return"combobox"===l?String(e).toLowerCase()===c.toLowerCase():x.has(e)}),[l,c,Wt(x).toString(),x.size]);(0,n.useEffect)((function(){var e,t=setTimeout((function(){if(!s&&a&&1===x.size){var e=Array.from(x)[0],t=A.findIndex((function(t){return t.data.value===e}));-1!==t&&(U(t),O(t))}}));return a&&(null===(e=P.current)||void 0===e||e.scrollTo(void 0)),function(){return clearTimeout(t)}}),[a,c]);var B=function(e){void 0!==e&&y(e,{selected:!x.has(e)}),s||u(!1)};if(n.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which,n=e.ctrlKey;switch(t){case QF.N:case QF.P:case QF.UP:case QF.DOWN:var r=0;if(t===QF.UP?r=-1:t===QF.DOWN?r=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(t===QF.N?r=1:t===QF.P&&(r=-1)),0!==r){var i=L(D+r,r);O(i),U(i,!0)}break;case QF.TAB:case QF.ENTER:var o,s=A[D];!s||null!=s&&null!==(o=s.data)&&void 0!==o&&o.disabled||R?B(void 0):B(s.value),a&&e.preventDefault();break;case QF.ESC:u(!1),a&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){O(e)}}})),0===A.length)return n.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(T,"-empty"),onMouseDown:I},h);var j=Object.keys(_).map((function(e){return _[e]})),V=function(e){return e.label};function $(e,t){return{role:e.group?"presentation":"option",id:"".concat(o,"_list_").concat(t)}}var H=function(e){var t=A[e];if(!t)return null;var r=t.data||{},i=r.value,o=t.group,a=nB(r,!0),s=V(t);return t?n.createElement("div",nr({"aria-label":"string"!=typeof s||o?null:s},a,{key:e},$(t,e),{"aria-selected":F(i)}),i):null},G={role:"listbox",id:"".concat(o,"_list")};return n.createElement(n.Fragment,null,w&&n.createElement("div",nr({},G,{style:{height:0,width:0,overflow:"hidden"}}),H(D-1),H(D),H(D+1)),n.createElement(cq,{itemKey:"key",ref:P,data:A,height:E,itemHeight:C,fullHeight:!1,onMouseDown:I,onScroll:d,virtual:w,direction:S,innerProps:w?null:G},(function(e,t){var r=e.group,i=e.groupOption,o=e.data,a=e.label,s=e.value,l=o.key;if(r){var c,u=null!==(c=o.title)&&void 0!==c?c:hq(a)?a.toString():void 0;return n.createElement("div",{className:va()(T,"".concat(T,"-group"),o.className),title:u},void 0!==a?a:l)}var h=o.disabled,d=o.title,f=(o.children,o.style),p=o.className,m=rC(Ca(o,uq),j),g=k(s),v=h||!g&&R,y="".concat(T,"-option"),x=va()(T,y,p,Ft(Ft(Ft(Ft({},"".concat(y,"-grouped"),i),"".concat(y,"-active"),D===t&&!v),"".concat(y,"-disabled"),v),"".concat(y,"-selected"),g)),_=V(e),S=!b||"function"==typeof b||g,E="number"==typeof _?_:_||s,C=hq(E)?E.toString():void 0;return void 0!==d&&(C=d),n.createElement("div",nr({},nB(m),w?{}:$(e,t),{"aria-selected":F(s),className:x,title:C,onMouseMove:function(){D===t||v||U(t)},onClick:function(){v||B(s)},style:f}),n.createElement("div",{className:"".concat(y,"-content")},"function"==typeof M?M(e,{index:t}):E),n.isValidElement(b)||g,S&&n.createElement(pW,{className:"".concat(T,"-option-state"),customizeIcon:b,customizeIconProps:{value:s,disabled:v,isSelected:g}},g?"":null))})))};const fq=n.forwardRef(dq);function pq(e,t){return bW(e).join("").toUpperCase().includes(t)}var mq=0,gq=Kt();var vq=["children","value"],yq=["children"];function bq(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oC(e).map((function(e,r){if(!n.isValidElement(e)||!e.type)return null;var i=e,o=i.type.isSelectOptGroup,a=i.key,s=i.props,l=s.children,c=Ca(s,yq);return t||!o?function(e){var t=e,n=t.key,r=t.props,i=r.children,o=r.value;return Xt({key:n,value:void 0!==o?o:n,children:i},Ca(r,vq))}(e):Xt(Xt({key:"__RC_SELECT_GRP__".concat(null===a?r:a,"__"),label:a},c),{},{options:bq(l)})})).filter((function(e){return e}))}const xq=function(e,t,r,i,o){return n.useMemo((function(){var n=e;!e&&(n=bq(t));var a=new Map,s=new Map,l=function(e,t,n){n&&"string"==typeof n&&e.set(t[n],t)};return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=0;c<t.length;c+=1){var u=t[c];!u[r.options]||n?(a.set(u[r.value],u),l(s,u,r.label),l(s,u,i),l(s,u,o)):e(u[r.options],!0)}}(n),{options:n,valueOptions:a,labelOptions:s}}),[e,t,r,i,o])};function _q(e){var t=n.useRef();t.current=e;var r=n.useCallback((function(){return t.current.apply(t,arguments)}),[]);return r}var wq=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Sq=["inputValue"],Eq=n.forwardRef((function(e,t){var r=e.id,i=e.mode,o=e.prefixCls,a=void 0===o?"rc-select":o,s=e.backfill,l=e.fieldNames,c=e.inputValue,u=e.searchValue,h=e.onSearch,d=e.autoClearSearchValue,f=void 0===d||d,p=e.onSelect,m=e.onDeselect,g=e.dropdownMatchSelectWidth,v=void 0===g||g,y=e.filterOption,b=e.filterSort,x=e.optionFilterProp,_=e.optionLabelProp,w=e.options,S=e.optionRender,E=e.children,C=e.defaultActiveFirstOption,M=e.menuItemSelectedIcon,T=e.virtual,A=e.direction,P=e.listHeight,R=void 0===P?200:P,I=e.listItemHeight,O=void 0===I?20:I,k=e.labelRender,L=e.value,N=e.defaultValue,D=e.labelInValue,z=e.onChange,U=e.maxCount,F=Ca(e,wq),B=function(e){var t=Ht(n.useState(),2),r=t[0],i=t[1];return n.useEffect((function(){var e;i("rc_select_".concat((gq?(e=mq,mq+=1):e="TEST_OR_SSR",e)))}),[]),e||r}(r),j=BW(i),V=!(w||!E),$=n.useMemo((function(){return(void 0!==y||"combobox"!==i)&&y}),[y,i]),H=n.useMemo((function(){return LW(l,V)}),[JSON.stringify(l),V]),G=Ht(Ba("",{value:void 0!==u?u:c,postState:function(e){return e||""}}),2),W=G[0],q=G[1],X=xq(w,E,H,x,_),Y=X.valueOptions,K=X.labelOptions,Z=X.options,J=n.useCallback((function(e){return bW(e).map((function(e){var t,n,r,i,o,a;!function(e){return!e||"object"!==zt(e)}(e)?(r=e.key,n=e.label,t=null!==(a=e.value)&&void 0!==a?a:r):t=e;var s,l=Y.get(t);return l&&(void 0===n&&(n=null==l?void 0:l[_||H.label]),void 0===r&&(r=null!==(s=null==l?void 0:l.key)&&void 0!==s?s:t),i=null==l?void 0:l.disabled,o=null==l?void 0:l.title),{label:n,value:t,key:r,disabled:i,title:o}}))}),[H,_,Y]),Q=Ht(Ba(N,{value:L}),2),ee=Q[0],te=Q[1],ne=n.useMemo((function(){var e,t=J(j&&null===ee?[]:ee);return"combobox"===i&&function(e){return!e&&0!==e}(null===(e=t[0])||void 0===e?void 0:e.value)?[]:t}),[ee,J,i,j]),re=function(e,t){var r=n.useRef({values:new Map,options:new Map});return[n.useMemo((function(){var n=r.current,i=n.values,o=n.options,a=e.map((function(e){var t;return void 0===e.label?Xt(Xt({},e),{},{label:null===(t=i.get(e.value))||void 0===t?void 0:t.label}):e})),s=new Map,l=new Map;return a.forEach((function(e){s.set(e.value,e),l.set(e.value,t.get(e.value)||o.get(e.value))})),r.current.values=s,r.current.options=l,a}),[e,t]),n.useCallback((function(e){return t.get(e)||r.current.options.get(e)}),[t])]}(ne,Y),ie=Ht(re,2),oe=ie[0],ae=ie[1],se=n.useMemo((function(){if(!i&&1===oe.length){var e=oe[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return oe.map((function(e){var t;return Xt(Xt({},e),{},{label:null!==(t="function"==typeof k?k(e):e.label)&&void 0!==t?t:e.value})}))}),[i,oe,k]),le=n.useMemo((function(){return new Set(oe.map((function(e){return e.value})))}),[oe]);n.useEffect((function(){if("combobox"===i){var e,t=null===(e=oe[0])||void 0===e?void 0:e.value;q(function(e){return null!=e}(t)?String(t):"")}}),[oe]);var ce=_q((function(e,t){var n=null!=t?t:e;return Ft(Ft({},H.value,e),H.label,n)})),ue=function(e,t,r,i,o){return n.useMemo((function(){if(!r||!1===i)return e;var n=t.options,a=t.label,s=t.value,l=[],c="function"==typeof i,u=r.toUpperCase(),h=c?i:function(e,t){return o?pq(t[o],u):t[n]?pq(t["children"!==a?a:"label"],u):pq(t[s],u)},d=c?function(e){return NW(e)}:function(e){return e};return e.forEach((function(e){if(e[n])if(h(r,d(e)))l.push(e);else{var t=e[n].filter((function(e){return h(r,d(e))}));t.length&&l.push(Xt(Xt({},e),{},Ft({},n,t)))}else h(r,d(e))&&l.push(e)})),l}),[e,i,o,r,t])}(n.useMemo((function(){if("tags"!==i)return Z;var e=Wt(Z);return Wt(oe).sort((function(e,t){return e.value<t.value?-1:1})).forEach((function(t){var n=t.value;(function(e){return Y.has(e)})(n)||e.push(ce(n,t.label))})),e}),[ce,Z,Y,oe,i]),H,W,$,x),he=n.useMemo((function(){return"tags"!==i||!W||ue.some((function(e){return e[x||"value"]===W}))||ue.some((function(e){return e[H.value]===W}))?ue:[ce(W)].concat(Wt(ue))}),[ce,x,i,ue,W,H]),de=function e(t){return Wt(t).sort((function(e,t){return b(e,t,{searchValue:W})})).map((function(t){return Array.isArray(t.options)?Xt(Xt({},t),{},{options:t.options.length>0?e(t.options):t.options}):t}))},fe=n.useMemo((function(){return b?de(he):he}),[he,b,W]),pe=n.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,i=[],o=LW(n,!1),a=o.label,s=o.value,l=o.options,c=o.groupLabel;return function e(t,n){Array.isArray(t)&&t.forEach((function(t){if(n||!(l in t)){var o=t[s];i.push({key:OW(t,i.length),groupOption:n,data:t,label:t[a],value:o})}else{var u=t[c];void 0===u&&r&&(u=t.label),i.push({key:OW(t,i.length),group:!0,data:t,label:u}),e(t[l],!0)}}))}(e,!1),i}(fe,{fieldNames:H,childrenAsData:V})}),[fe,H,V]),me=function(e){var t=J(e);if(te(t),z&&(t.length!==oe.length||t.some((function(e,t){var n;return(null===(n=oe[t])||void 0===n?void 0:n.value)!==(null==e?void 0:e.value)})))){var n=D?t:t.map((function(e){return e.value})),r=t.map((function(e){return NW(ae(e.value))}));z(j?n:n[0],j?r:r[0])}},ge=Ht(n.useState(null),2),ve=ge[0],ye=ge[1],be=Ht(n.useState(0),2),xe=be[0],_e=be[1],we=void 0!==C?C:"combobox"!==i,Se=n.useCallback((function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,r=void 0===n?"keyboard":n;_e(t),s&&"combobox"===i&&null!==e&&"keyboard"===r&&ye(String(e))}),[s,i]),Ee=function(e,t,n){var r=function(){var t,n=ae(e);return[D?{label:null==n?void 0:n[H.label],value:e,key:null!==(t=null==n?void 0:n.key)&&void 0!==t?t:e}:e,NW(n)]};if(t&&p){var i=Ht(r(),2),o=i[0],a=i[1];p(o,a)}else if(!t&&m&&"clear"!==n){var s=Ht(r(),2),l=s[0],c=s[1];m(l,c)}},Ce=_q((function(e,t){var n,r=!j||t.selected;n=r?j?[].concat(Wt(oe),[e]):[e]:oe.filter((function(t){return t.value!==e})),me(n),Ee(e,r),"combobox"===i?ye(""):BW&&!f||(q(""),ye(""))})),Me=n.useMemo((function(){var e=!1!==T&&!1!==v;return Xt(Xt({},X),{},{flattenOptions:pe,onActiveValue:Se,defaultActiveFirstOption:we,onSelect:Ce,menuItemSelectedIcon:M,rawValues:le,fieldNames:H,virtual:e,direction:A,listHeight:R,listItemHeight:O,childrenAsData:V,maxCount:U,optionRender:S})}),[U,X,pe,Se,we,Ce,M,le,H,T,v,A,R,O,V,S]);return n.createElement(DW.Provider,{value:Me},n.createElement(jW,nr({},F,{id:B,prefixCls:a,ref:t,omitDomProps:Sq,mode:i,displayValues:se,onDisplayValuesChange:function(e,t){me(e);var n=t.type,r=t.values;"remove"!==n&&"clear"!==n||r.forEach((function(e){Ee(e.value,!1,n)}))},direction:A,searchValue:W,onSearch:function(e,t){if(q(e),ye(null),"submit"!==t.source)"blur"!==t.source&&("combobox"===i&&me(e),null==h||h(e));else{var n=(e||"").trim();if(n){var r=Array.from(new Set([].concat(Wt(le),[n])));me(r),Ee(n,!0),q("")}}},autoClearSearchValue:f,onSearchSplit:function(e){var t=e;"tags"!==i&&(t=e.map((function(e){var t=K.get(e);return null==t?void 0:t.value})).filter((function(e){return void 0!==e})));var n=Array.from(new Set([].concat(Wt(le),Wt(t))));me(n),n.forEach((function(e){Ee(e,!0)}))},dropdownMatchSelectWidth:v,OptionList:fq,emptyOptions:!pe.length,activeValue:ve,activeDescendantId:"".concat(B,"_list_").concat(xe)})))})),Cq=Eq;Cq.Option=GW,Cq.OptGroup=$W;const Mq=Cq;function Tq(e,t,n){return va()({[`${e}-status-success`]:"success"===t,[`${e}-status-warning`]:"warning"===t,[`${e}-status-error`]:"error"===t,[`${e}-status-validating`]:"validating"===t,[`${e}-has-feedback`]:n})}const Aq=(e,t)=>t||e,Pq=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var i,o;const{variant:a,[e]:s}=(0,n.useContext)(ia),l=(0,n.useContext)(qD),c=null==s?void 0:s.variant;let u;return u=void 0!==t?t:!1===r?"borderless":null!==(o=null!==(i=null!=l?l:c)&&void 0!==i?i:a)&&void 0!==o?o:"outlined",[u,ra.includes(u)]},Rq=function(e,t){return e||(e=>{const t={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"scroll"===e?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},t),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},t),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},t),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},t),{points:["br","tr"],offset:[0,-4]})}})(t)},Iq=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:i}=e;return{position:"relative",display:"block",minHeight:t,padding:i,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},Oq=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,i=`&${t}-slide-up-enter${t}-slide-up-enter-active`,o=`&${t}-slide-up-appear${t}-slide-up-appear-active`,a=`&${t}-slide-up-leave${t}-slide-up-leave-active`,s=`${n}-dropdown-placement-`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},Bs(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`\n          ${i}${s}bottomLeft,\n          ${o}${s}bottomLeft\n        `]:{animationName:cH},[`\n          ${i}${s}topLeft,\n          ${o}${s}topLeft,\n          ${i}${s}topRight,\n          ${o}${s}topRight\n        `]:{animationName:hH},[`${a}${s}bottomLeft`]:{animationName:uH},[`\n          ${a}${s}topLeft,\n          ${a}${s}topRight\n        `]:{animationName:dH},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},Iq(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Fs),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary},[`&:has(+ ${r}-option-selected:not(${r}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${r}-option-selected:not(${r}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Iq(e)),{color:e.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},yH(e,"slide-up"),yH(e,"slide-down"),VH(e,"move-up"),VH(e,"move-down")]},kq=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:i,paddingXS:o,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:s,colorIcon:l,colorIconHover:c,INTERNAL_FIXED_ITEM_MARGIN:u}=e,h=`${t}-selection-overflow`;return{[h]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:u,borderRadius:r,cursor:"default",transition:`font-size ${i}, line-height ${i}, height ${i}`,marginInlineEnd:e.calc(u).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:e.calc(o).div(2).equal(),[`${t}-disabled&`]:{color:a,borderColor:s,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{display:"inline-flex",alignItems:"center",color:l,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:c}})}}}},Lq=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,i=`${n}-selection-overflow`,o=e.multipleSelectItemHeight,a=(e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()})(e),s=t?`${n}-${t}`:"",l=(e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:i}=e,o=e.max(e.calc(n).sub(r).equal(),0);return{basePadding:o,containerPadding:e.max(e.calc(o).sub(i).equal(),0),itemHeight:Un(t),itemLineHeight:Un(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}})(e);return{[`${n}-multiple${s}`]:Object.assign(Object.assign({},kq(e)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:l.basePadding,paddingBlock:l.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Un(r)} 0`,lineHeight:Un(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:l.itemHeight,lineHeight:Un(l.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Un(o),marginBlock:r}},[`${n}-prefix`]:{marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(l.basePadding).equal()},[`${i}-item + ${i}-item,\n        ${n}-prefix + ${n}-selection-wrap\n      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${i}-item-suffix`]:{minHeight:l.itemHeight,marginBlock:r},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:e.fontFamily,lineHeight:Un(o),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(l.basePadding).equal(),insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function Nq(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",i={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`\n        &${n}-show-arrow ${n}-selector,\n        &${n}-allow-clear ${n}-selector\n      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[Lq(e,t),i]}const Dq=e=>{const{componentCls:t}=e,n=$C(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=$C(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[Nq(e),Nq(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},Nq(r,"lg")]};function zq(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i}=e,o=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),a=t?`${n}-${t}`:"";return{[`${n}-single${a}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},Bs(e,!0)),{display:"flex",borderRadius:i,flex:"1 1 auto",[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`\n          ${n}-selection-item,\n          ${n}-selection-placeholder\n        `]:{display:"block",padding:0,lineHeight:Un(o),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`\n        &${n}-show-arrow ${n}-selection-item,\n        &${n}-show-arrow ${n}-selection-search,\n        &${n}-show-arrow ${n}-selection-placeholder\n      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Un(r)}`,[`${n}-selection-search-input`]:{height:o},"&:after":{lineHeight:Un(o)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Un(r)}`,"&:after":{display:"none"}}}}}}}function Uq(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[zq(e),zq($C(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selector`]:{padding:`0 ${Un(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`\n            &${t}-show-arrow ${t}-selection-item,\n            &${t}-show-arrow ${t}-selection-placeholder\n          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},zq($C(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const Fq=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:i}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${Un(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${Un(i)} ${t.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:t.color}}}},Bq=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},Fq(e,t))}),jq=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},Fq(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),Bq(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),Bq(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Un(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),Vq=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${Un(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},$q=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},Vq(e,t))}),Hq=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},Vq(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),$q(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),$q(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),Gq=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",border:`${Un(e.lineWidth)} ${e.lineType} transparent`},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Un(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),Wq=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},jq(e)),Hq(e)),Gq(e))}),qq=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},Xq=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},Yq=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:i}=e;return{[n]:Object.assign(Object.assign({},Bs(e)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},qq(e)),Xq(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Fs),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},Fs),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[i]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative","&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:e.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}}}},Kq=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},Yq(e),Uq(e),Dq(e),Oq(e),{[`${t}-rtl`]:{direction:"rtl"}},mF(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},Zq=YC("Select",((e,t)=>{let{rootPrefixCls:n}=t;const r=$C(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[Kq(r),Wq(r)]}),(e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:i,controlHeightSM:o,controlHeightLG:a,paddingXXS:s,controlPaddingHorizontal:l,zIndexPopupBase:c,colorText:u,fontWeightStrong:h,controlItemBgActive:d,controlItemBgHover:f,colorBgContainer:p,colorFillSecondary:m,colorBgContainerDisabled:g,colorTextDisabled:v,colorPrimaryHover:y,colorPrimary:b,controlOutline:x}=e,_=2*s,w=2*r,S=Math.min(i-_,i-w),E=Math.min(o-_,o-w),C=Math.min(a-_,a-w);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(s/2),zIndexPopup:c+50,optionSelectedColor:u,optionSelectedFontWeight:h,optionSelectedBg:d,optionActiveBg:f,optionPadding:`${(i-t*n)/2}px ${l}px`,optionFontSize:t,optionLineHeight:n,optionHeight:i,selectorBg:p,clearBg:p,singleItemHeightLG:a,multipleItemBg:m,multipleItemBorderColor:"transparent",multipleItemHeight:S,multipleItemHeightSM:E,multipleItemHeightLG:C,multipleSelectorBgDisabled:g,multipleItemColorDisabled:v,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(1.25*e.fontSize),hoverBorderColor:y,activeBorderColor:b,activeOutlineColor:x,selectAffixPadding:s}}),{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}}),Jq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var Qq=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Jq}))};const eX=n.forwardRef(Qq),tX={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var nX=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:tX}))};const rX=n.forwardRef(nX),iX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var oX=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:iX}))};const aX=n.forwardRef(oX),sX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};var lX=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:sX}))};const cX=n.forwardRef(lX);const uX="SECRET_COMBOBOX_MODE_DO_NOT_USE",hX=(e,t)=>{var r;const{prefixCls:i,bordered:o,className:a,rootClassName:s,getPopupContainer:l,popupClassName:c,dropdownClassName:u,listHeight:h=256,placement:d,listItemHeight:f,size:p,disabled:m,notFoundContent:g,status:v,builtinPlacements:y,dropdownMatchSelectWidth:b,popupMatchSelectWidth:x,direction:_,style:w,allowClear:S,variant:E,dropdownStyle:C,transitionName:M,tagRender:T,maxCount:A,prefix:P}=e,R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:I,getPrefixCls:O,renderEmpty:k,direction:L,virtual:N,popupMatchSelectWidth:D,popupOverflow:z,select:U}=n.useContext(ia),[,F]=Co(),B=null!=f?f:null==F?void 0:F.controlHeight,j=O("select",i),V=O(),$=null!=_?_:L,{compactSize:H,compactItemClassnames:G}=tz(j,$),[W,q]=Pq("select",E,o),X=pV(j),[Y,K,Z]=Zq(j,X),J=n.useMemo((()=>{const{mode:t}=e;if("combobox"!==t)return t===uX?"combobox":t}),[e.mode]),Q="multiple"===J||"tags"===J,ee=function(e,t){return void 0!==t?t:null!==e}(e.suffixIcon,e.showArrow),te=null!==(r=null!=x?x:b)&&void 0!==r?r:D,{status:ne,hasFeedback:re,isFormItemInput:ie,feedbackIcon:oe}=n.useContext(GD),ae=Aq(ne,v);let se;se=void 0!==g?g:"combobox"===J?null:(null==k?void 0:k("Select"))||n.createElement(HG,{componentName:"Select"});const{suffixIcon:le,itemIcon:ce,removeIcon:ue,clearIcon:he}=function(e){let{suffixIcon:t,clearIcon:r,menuItemSelectedIcon:i,removeIcon:o,loading:a,multiple:s,hasFeedback:l,prefixCls:c,showSuffixIcon:u,feedbackIcon:h,showArrow:d,componentName:f}=e;const p=null!=r?r:n.createElement(rX,null),m=e=>null!==t||l||d?n.createElement(n.Fragment,null,!1!==u&&e,l&&h):null;let g=null;if(void 0!==t)g=m(t);else if(a)g=m(n.createElement(sL,{spin:!0}));else{const e=`${c}-suffix`;g=t=>{let{open:r,showSearch:i}=t;return m(r&&i?n.createElement(cX,{className:e}):n.createElement(aX,{className:e}))}}let v=null;v=void 0!==i?i:s?n.createElement(eX,null):null;let y=null;return y=void 0!==o?o:n.createElement(mB,null),{clearIcon:p,suffixIcon:g,itemIcon:v,removeIcon:y}}(Object.assign(Object.assign({},R),{multiple:Q,hasFeedback:re,feedbackIcon:oe,showSuffixIcon:ee,prefixCls:j,componentName:"Select"})),de=!0===S?{clearIcon:he}:S,fe=rC(R,["suffixIcon","itemIcon"]),pe=va()(c||u,{[`${j}-dropdown-${$}`]:"rtl"===$},s,Z,X,K),me=XD((e=>{var t;return null!==(t=null!=p?p:H)&&void 0!==t?t:e})),ge=n.useContext(ca),ve=null!=m?m:ge,ye=va()({[`${j}-lg`]:"large"===me,[`${j}-sm`]:"small"===me,[`${j}-rtl`]:"rtl"===$,[`${j}-${W}`]:q,[`${j}-in-form-item`]:ie},Tq(j,ae,re),G,null==U?void 0:U.className,a,s,Z,X,K),be=n.useMemo((()=>void 0!==d?d:"rtl"===$?"bottomRight":"bottomLeft"),[d,$]),[xe]=cz("SelectLike",null==C?void 0:C.zIndex);return Y(n.createElement(Mq,Object.assign({ref:t,virtual:N,showSearch:null==U?void 0:U.showSearch},fe,{style:Object.assign(Object.assign({},null==U?void 0:U.style),w),dropdownMatchSelectWidth:te,transitionName:pz(V,"slide-up",M),builtinPlacements:Rq(y,z),listHeight:h,listItemHeight:B,mode:J,prefixCls:j,placement:be,direction:$,prefix:P,suffixIcon:le,menuItemSelectedIcon:ce,removeIcon:ue,allowClear:de,notFoundContent:se,className:ye,getPopupContainer:l||I,dropdownClassName:pe,disabled:ve,dropdownStyle:Object.assign(Object.assign({},C),{zIndex:xe}),maxCount:Q?A:void 0,tagRender:Q?T:void 0})))},dX=n.forwardRef(hX),fX=fV(dX);dX.SECRET_COMBOBOX_MODE_DO_NOT_USE=uX,dX.Option=GW,dX.OptGroup=$W,dX._InternalPanelDoNotUseOrYouWillBeFired=fX;const pX=dX,mX=e=>n.createElement(pX,Object.assign({},e,{showSearch:!0,size:"small"})),gX=e=>n.createElement(pX,Object.assign({},e,{showSearch:!0,size:"middle"}));function vX(e){return $C(e,{inputAffixPadding:e.paddingXXS})}mX.Option=pX.Option,gX.Option=pX.Option;const yX=e=>{const{controlHeight:t,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:o,controlHeightLG:a,fontSizeLG:s,lineHeightLG:l,paddingSM:c,controlPaddingHorizontalSM:u,controlPaddingHorizontal:h,colorFillAlter:d,colorPrimaryHover:f,colorPrimary:p,controlOutlineWidth:m,controlOutline:g,colorErrorOutline:v,colorWarningOutline:y,colorBgContainer:b}=e;return{paddingBlock:Math.max(Math.round((t-n*r)/2*10)/10-i,0),paddingBlockSM:Math.max(Math.round((o-n*r)/2*10)/10-i,0),paddingBlockLG:Math.ceil((a-s*l)/2*10)/10-i,paddingInline:c-i,paddingInlineSM:u-i,paddingInlineLG:h-i,addonBg:d,activeBorderColor:p,hoverBorderColor:f,activeShadow:`0 0 0 ${m}px ${g}`,errorActiveShadow:`0 0 0 ${m}px ${v}`,warningActiveShadow:`0 0 0 ${m}px ${y}`,hoverBg:b,activeBg:b,inputFontSize:n,inputFontSizeLG:s,inputFontSizeSM:n}},bX=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),xX=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},bX($C(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),_X=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),wX=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},_X(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),SX=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_X(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},xX(e))}),wX(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),wX(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),EX=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),CX=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},EX(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),EX(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},xX(e))}})}),MX=(e,t)=>{const{componentCls:n}=e;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}}},t)}},TX=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:null==t?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),AX=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},TX(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),PX=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},TX(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},xX(e))}),AX(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),AX(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),RX=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),IX=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},RX(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),RX(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),OX=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),kX=e=>{const{paddingBlockLG:t,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=e;return{padding:`${Un(t)} ${Un(i)}`,fontSize:e.inputFontSizeLG,lineHeight:n,borderRadius:r}},LX=e=>({padding:`${Un(e.paddingBlockSM)} ${Un(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),NX=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Un(e.paddingBlock)} ${Un(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},OX(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},kX(e)),"&-sm":Object.assign({},LX(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),DX=e=>{const{componentCls:t,antCls:n}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},kX(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},LX(e)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Un(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${Un(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${Un(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${Un(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${Un(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[t]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`\n        & > ${t}-affix-wrapper,\n        & > ${t}-number-affix-wrapper,\n        & > ${n}-picker-range\n      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[t]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,\n      & > ${n}-select-auto-complete ${t},\n      & > ${n}-cascader-picker ${t},\n      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,\n      & > ${n}-select:first-child > ${n}-select-selector,\n      & > ${n}-select-auto-complete:first-child ${t},\n      & > ${n}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,\n      & > ${n}-select:last-child > ${n}-select-selector,\n      & > ${n}-cascader-picker:last-child ${t},\n      & > ${n}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${n}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},zX=e=>{const{componentCls:t,controlHeightSM:n,lineWidth:r,calc:i}=e,o=i(n).sub(i(r).mul(2)).sub(16).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),NX(e)),SX(e)),PX(e)),MX(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:n,paddingTop:o,paddingBottom:o}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},UX=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,lineHeight:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Un(e.inputAffixPadding)}`}}}},FX=e=>{const{componentCls:t,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:a,iconCls:s}=e,l=`${t}-affix-wrapper`,c=`${t}-affix-wrapper-disabled`;return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},NX(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[t]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),UX(e)),{[`${s}${t}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:a}}}),[c]:{[`${s}${t}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},BX=e=>{const{componentCls:t,borderRadiusLG:n,borderRadiusSM:r}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Bs(e)),DX(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:n,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}}},CX(e)),IX(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},jX=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-search`;return{[r]:{[t]:{"&:hover, &:focus":{[`+ ${t}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{height:e.controlHeight,borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal()},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightLG}},"&-small":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,\n        > ${t},\n        ${t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},VX=e=>{const{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`\n        &-allow-clear > ${t},\n        &-affix-wrapper${r}-has-feedback ${t}\n      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},$X=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}},HX=YC("Input",(e=>{const t=$C(e,vX(e));return[zX(t),VX(t),FX(t),BX(t),jX(t),$X(t),mF(t)]}),yX,{resetFont:!1}),GX=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},WX=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:Un(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Un(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Un(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`\n    &${t}-mini ${t}-prev ${t}-item-link,\n    &${t}-mini ${t}-next ${t}-item-link\n    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:Un(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:Un(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:Un(e.itemSizeSM),input:Object.assign(Object.assign({},LX(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},qX=e=>{const{componentCls:t}=e;return{[`\n    &${t}-simple ${t}-prev,\n    &${t}-simple ${t}-next\n    `]:{height:e.itemSizeSM,lineHeight:Un(e.itemSizeSM),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:Un(e.itemSizeSM)}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${Un(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${Un(e.inputOutlineOffset)} 0 ${Un(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},XX=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`\n    ${t}-prev,\n    ${t}-jump-prev,\n    ${t}-jump-next\n    `]:{marginInlineEnd:e.marginXS},[`\n    ${t}-prev,\n    ${t}-next,\n    ${t}-jump-prev,\n    ${t}-jump-next\n    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:Un(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Un(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:Un(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},NX(e)),_X(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},xX(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},YX=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:Un(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${Un(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Un(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},KX=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:Un(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),YX(e)),XX(e)),qX(e)),WX(e)),GX(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},ZX=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},$s(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},Vs(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},Vs(e))}}}},JX=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},yX(e)),QX=e=>$C(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},vX(e)),eY=YC("Pagination",(e=>{const t=QX(e);return[KX(t),ZX(t)]}),JX),tY=e=>{const{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},nY=ZC(["Pagination","bordered"],(e=>{const t=QX(e);return[tY(t)]}),JX);const rY=e=>{const{align:t,prefixCls:r,selectPrefixCls:i,className:o,rootClassName:a,style:s,size:l,locale:c,selectComponentClass:u,responsive:h,showSizeChanger:d}=e,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:p}=JG(h),[,m]=Co(),{getPrefixCls:g,direction:v,pagination:y={}}=n.useContext(ia),b=g("pagination",r),[x,_,w]=eY(b),S=null!=d?d:y.showSizeChanger,E=n.useMemo((()=>{const e=n.createElement("span",{className:`${b}-item-ellipsis`},"");return{prevIcon:n.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},"rtl"===v?n.createElement(OC,null):n.createElement(PC,null)),nextIcon:n.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},"rtl"===v?n.createElement(PC,null):n.createElement(OC,null)),jumpPrevIcon:n.createElement("a",{className:`${b}-item-link`},n.createElement("div",{className:`${b}-item-container`},"rtl"===v?n.createElement(iW,{className:`${b}-item-link-icon`}):n.createElement(tW,{className:`${b}-item-link-icon`}),e)),jumpNextIcon:n.createElement("a",{className:`${b}-item-link`},n.createElement("div",{className:`${b}-item-container`},"rtl"===v?n.createElement(tW,{className:`${b}-item-link-icon`}):n.createElement(iW,{className:`${b}-item-link-icon`}),e))}}),[v,b]),[C]=NG("Pagination",$o),M=Object.assign(Object.assign({},C),c),T=XD(l),A="small"===T||!(!p||T||!h),P=g("select",i),R=va()({[`${b}-${t}`]:!!t,[`${b}-mini`]:A,[`${b}-rtl`]:"rtl"===v,[`${b}-bordered`]:m.wireframe},null==y?void 0:y.className,o,a,_,w),I=Object.assign(Object.assign({},null==y?void 0:y.style),s);return x(n.createElement(n.Fragment,null,m.wireframe&&n.createElement(nY,{prefixCls:b}),n.createElement(fW,Object.assign({},E,f,{style:I,prefixCls:b,selectPrefixCls:P,className:R,selectComponentClass:u||(A?mX:gX),locale:M,showSizeChanger:S}))))};const iY=80*Math.PI,oY=e=>{const{dotClassName:t,style:r,hasCircleCls:i}=e;return n.createElement("circle",{className:va()(`${t}-circle`,{[`${t}-circle-bg`]:i}),r:40,cx:50,cy:50,strokeWidth:20,style:r})},aY=e=>{let{percent:t,prefixCls:r}=e;const i=`${r}-dot`,o=`${i}-holder`,a=`${o}-hidden`,[s,l]=n.useState(!1);Wn((()=>{0!==t&&l(!0)}),[0!==t]);const c=Math.max(Math.min(t,100),0);if(!s)return null;const u={strokeDashoffset:""+iY/4,strokeDasharray:`${iY*c/100} ${iY*(100-c)/100}`};return n.createElement("span",{className:va()(o,`${i}-progress`,c<=0&&a)},n.createElement("svg",{viewBox:"0 0 100 100",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},n.createElement(oY,{dotClassName:i,hasCircleCls:!0}),n.createElement(oY,{dotClassName:i,style:u})))};function sY(e){const{prefixCls:t,percent:r=0}=e,i=`${t}-dot`,o=`${i}-holder`,a=`${o}-hidden`;return n.createElement(n.Fragment,null,n.createElement("span",{className:va()(o,r>0&&a)},n.createElement("span",{className:va()(i,`${t}-dot-spin`)},[1,2,3,4].map((e=>n.createElement("i",{className:`${t}-dot-item`,key:e}))))),n.createElement(aY,{prefixCls:t,percent:r}))}function lY(e){const{prefixCls:t,indicator:r,percent:i}=e,o=`${t}-dot`;return r&&n.isValidElement(r)?Tz(r,{className:va()(r.props.className,o),percent:i}):n.createElement(sY,{prefixCls:t,percent:i})}const cY=new ei("antSpinMove",{to:{opacity:1}}),uY=new ei("antRotate",{to:{transform:"rotate(405deg)"}}),hY=e=>{const{componentCls:t,calc:n}=e;return{[t]:Object.assign(Object.assign({},Bs(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:cY,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:uY,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map((t=>`${t} ${e.motionDurationSlow} ease`)).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},dY=YC("Spin",(e=>{const t=$C(e,{spinDotDefault:e.colorTextDescription});return[hY(t)]}),(e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:.35*t,dotSizeLG:n}})),fY=[[30,.05],[70,.03],[96,.01]];let pY;const mY=e=>{var t;const{prefixCls:r,spinning:i=!0,delay:o=0,className:a,rootClassName:s,size:l="default",tip:c,wrapperClassName:u,style:h,children:d,fullscreen:f=!1,indicator:p,percent:m}=e,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:v,direction:y,spin:b}=n.useContext(ia),x=v("spin",r),[_,w,S]=dY(x),[E,C]=n.useState((()=>i&&!function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(i,o))),M=function(e,t){const[r,i]=n.useState(0),o=n.useRef(),a="auto"===t;return n.useEffect((()=>(a&&e&&(i(0),o.current=setInterval((()=>{i((e=>{const t=100-e;for(let n=0;n<fY.length;n+=1){const[r,i]=fY[n];if(e<=r)return e+t*i}return e}))}),200)),()=>{clearInterval(o.current)})),[a,e]),a?r:t}(E,m);n.useEffect((()=>{if(i){const e=function(e,t,n){var r=(n||{}).atBegin;return function(e,t,n){var r,i=n||{},o=i.noTrailing,a=void 0!==o&&o,s=i.noLeading,l=void 0!==s&&s,c=i.debounceMode,u=void 0===c?void 0:c,h=!1,d=0;function f(){r&&clearTimeout(r)}function p(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,c=Date.now()-d;function p(){d=Date.now(),t.apply(s,i)}function m(){r=void 0}h||(l||!u||r||p(),f(),void 0===u&&c>e?l?(d=Date.now(),a||(r=setTimeout(u?m:p,e))):p():!0!==a&&(r=setTimeout(u?m:p,void 0===u?e-c:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;f(),h=!n},p}(e,t,{debounceMode:!1!==(void 0!==r&&r)})}(o,(()=>{C(!0)}));return e(),()=>{var t;null===(t=null==e?void 0:e.cancel)||void 0===t||t.call(e)}}C(!1)}),[o,i]);const T=n.useMemo((()=>void 0!==d&&!f),[d,f]),A=va()(x,null==b?void 0:b.className,{[`${x}-sm`]:"small"===l,[`${x}-lg`]:"large"===l,[`${x}-spinning`]:E,[`${x}-show-text`]:!!c,[`${x}-rtl`]:"rtl"===y},a,!f&&s,w,S),P=va()(`${x}-container`,{[`${x}-blur`]:E}),R=null!==(t=null!=p?p:null==b?void 0:b.indicator)&&void 0!==t?t:pY,I=Object.assign(Object.assign({},null==b?void 0:b.style),h),O=n.createElement("div",Object.assign({},g,{style:I,className:A,"aria-live":"polite","aria-busy":E}),n.createElement(lY,{prefixCls:x,indicator:R,percent:M}),c&&(T||f)?n.createElement("div",{className:`${x}-text`},c):null);return _(T?n.createElement("div",Object.assign({},g,{className:va()(`${x}-nested-loading`,u,w,S)}),E&&n.createElement("div",{key:"loading"},O),n.createElement("div",{className:P,key:"container"},d)):f?n.createElement("div",{className:va()(`${x}-fullscreen`,{[`${x}-fullscreen-show`]:E},s,w,S)},O):O)};mY.setDefaultIndicator=e=>{pY=e};const gY=mY,vY=n.createContext({});vY.Consumer;function yY(e){return"number"==typeof e?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const bY=["xs","sm","md","lg","xl","xxl"],xY=n.forwardRef(((e,t)=>{const{getPrefixCls:r,direction:i}=n.useContext(ia),{gutter:o,wrap:a}=n.useContext(GG),{prefixCls:s,span:l,order:c,offset:u,push:h,pull:d,className:f,children:p,flex:m,style:g}=e,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),y=r("col",s),[b,x,_]=YG(y),w={};let S={};bY.forEach((t=>{let n={};const r=e[t];"number"==typeof r?n.span=r:"object"==typeof r&&(n=r||{}),delete v[t],S=Object.assign(Object.assign({},S),{[`${y}-${t}-${n.span}`]:void 0!==n.span,[`${y}-${t}-order-${n.order}`]:n.order||0===n.order,[`${y}-${t}-offset-${n.offset}`]:n.offset||0===n.offset,[`${y}-${t}-push-${n.push}`]:n.push||0===n.push,[`${y}-${t}-pull-${n.pull}`]:n.pull||0===n.pull,[`${y}-rtl`]:"rtl"===i}),n.flex&&(S[`${y}-${t}-flex`]=!0,w[`--${y}-${t}-flex`]=yY(n.flex))}));const E=va()(y,{[`${y}-${l}`]:void 0!==l,[`${y}-order-${c}`]:c,[`${y}-offset-${u}`]:u,[`${y}-push-${h}`]:h,[`${y}-pull-${d}`]:d},f,S,x,_),C={};if(o&&o[0]>0){const e=o[0]/2;C.paddingLeft=e,C.paddingRight=e}return m&&(C.flex=yY(m),!1!==a||C.minWidth||(C.minWidth=0)),b(n.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign(Object.assign({},C),g),w),className:E,ref:t}),p))}));var _Y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const wY=n.forwardRef(((e,t)=>{const{prefixCls:r,children:i,actions:o,extra:a,styles:s,className:l,classNames:c,colStyle:u}=e,h=_Y(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:d,itemLayout:f}=(0,n.useContext)(vY),{getPrefixCls:p,list:m}=(0,n.useContext)(ia),g=e=>{var t,n;return va()(null===(n=null===(t=null==m?void 0:m.item)||void 0===t?void 0:t.classNames)||void 0===n?void 0:n[e],null==c?void 0:c[e])},v=e=>{var t,n;return Object.assign(Object.assign({},null===(n=null===(t=null==m?void 0:m.item)||void 0===t?void 0:t.styles)||void 0===n?void 0:n[e]),null==s?void 0:s[e])},y=p("list",r),b=o&&o.length>0&&n.createElement("ul",{className:va()(`${y}-item-action`,g("actions")),key:"actions",style:v("actions")},o.map(((e,t)=>n.createElement("li",{key:`${y}-item-action-${t}`},e,t!==o.length-1&&n.createElement("em",{className:`${y}-item-action-split`}))))),x=d?"div":"li",_=n.createElement(x,Object.assign({},h,d?{}:{ref:t},{className:va()(`${y}-item`,{[`${y}-item-no-flex`]:!("vertical"===f?a:!(()=>{let e=!1;return n.Children.forEach(i,(t=>{"string"==typeof t&&(e=!0)})),e&&n.Children.count(i)>1})())},l)}),"vertical"===f&&a?[n.createElement("div",{className:`${y}-item-main`,key:"content"},i,b),n.createElement("div",{className:va()(`${y}-item-extra`,g("extra")),key:"extra",style:v("extra")},a)]:[i,b,Tz(a,{key:"extra"})]);return d?n.createElement(xY,{ref:t,flex:1,style:u},_):_}));wY.Meta=e=>{var{prefixCls:t,className:r,avatar:i,title:o,description:a}=e,s=_Y(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=(0,n.useContext)(ia),c=l("list",t),u=va()(`${c}-item-meta`,r),h=n.createElement("div",{className:`${c}-item-meta-content`},o&&n.createElement("h4",{className:`${c}-item-meta-title`},o),a&&n.createElement("div",{className:`${c}-item-meta-description`},a));return n.createElement("div",Object.assign({},s,{className:u}),i&&n.createElement("div",{className:`${c}-item-meta-avatar`},i),(o||a)&&h)};const SY=wY,EY=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:i,itemPaddingSM:o,itemPaddingLG:a,marginLG:s,borderRadiusLG:l}=e;return{[t]:{border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:l,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${Un(i)} ${Un(s)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:o}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:a}}}},CY=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:i,marginSM:o,margin:a}=e;return{[`@media screen and (max-width:${r}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${Un(a)}`}}}}}},MY=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:i,paddingSM:o,marginLG:a,padding:s,itemPadding:l,colorPrimary:c,itemPaddingSM:u,itemPaddingLG:h,paddingXS:d,margin:f,colorText:p,colorTextDescription:m,motionDurationSlow:g,lineWidth:v,headerBg:y,footerBg:b,emptyTextPadding:x,metaMarginBottom:_,avatarMarginRight:w,titleMarginBottom:S,descriptionFontSize:E}=e;return{[t]:Object.assign(Object.assign({},Bs(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:y},[`${t}-footer`]:{background:b},[`${t}-header, ${t}-footer`]:{paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:a,[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:l,color:p,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:w},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:p},[`${t}-item-meta-title`]:{margin:`0 0 ${Un(e.marginXXS)} 0`,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:p,transition:`all ${g}`,"&:hover":{color:c}}},[`${t}-item-meta-description`]:{color:m,fontSize:E,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Un(d)}`,color:m,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:v,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${Un(s)} 0`,color:m,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:x,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:f,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:a},[`${t}-item-meta`]:{marginBlockEnd:_,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:S,color:p,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:s,marginInlineStart:"auto","> li":{padding:`0 ${Un(s)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:h},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},TY=YC("List",(e=>{const t=$C(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[MY(t),EY(t),CY(t)]}),(e=>({contentWidth:220,itemPadding:`${Un(e.paddingContentVertical)} 0`,itemPaddingSM:`${Un(e.paddingContentVerticalSM)} ${Un(e.paddingContentHorizontal)}`,itemPaddingLG:`${Un(e.paddingContentVerticalLG)} ${Un(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize})));function AY(e,t){var{pagination:r=!1,prefixCls:i,bordered:o=!1,split:a=!0,className:s,rootClassName:l,style:c,children:u,itemLayout:h,loadMore:d,grid:f,dataSource:p=[],size:m,header:g,footer:v,loading:y=!1,rowKey:b,renderItem:x,locale:_}=e,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const S=r&&"object"==typeof r?r:{},[E,C]=n.useState(S.defaultCurrent||1),[M,T]=n.useState(S.defaultPageSize||10),{getPrefixCls:A,renderEmpty:P,direction:R,list:I}=n.useContext(ia),O=e=>(t,n)=>{var i;C(t),T(n),r&&(null===(i=null==r?void 0:r[e])||void 0===i||i.call(r,t,n))},k=O("onChange"),L=O("onShowSizeChange"),N=A("list",i),[D,z,U]=TY(N);let F=y;"boolean"==typeof F&&(F={spinning:F});const B=!!(null==F?void 0:F.spinning);let j="";switch(XD(m)){case"large":j="lg";break;case"small":j="sm"}const V=va()(N,{[`${N}-vertical`]:"vertical"===h,[`${N}-${j}`]:j,[`${N}-split`]:a,[`${N}-bordered`]:o,[`${N}-loading`]:B,[`${N}-grid`]:!!f,[`${N}-something-after-last-item`]:!!(d||r||v),[`${N}-rtl`]:"rtl"===R},null==I?void 0:I.className,s,l,z,U),$=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];n&&Object.keys(n).forEach((t=>{const r=n[t];void 0!==r&&(e[t]=r)}))}return e}({current:1,total:0},{total:p.length,current:E,pageSize:M},r||{}),H=Math.ceil($.total/$.pageSize);$.current>H&&($.current=H);const G=r&&n.createElement("div",{className:va()(`${N}-pagination`)},n.createElement(rY,Object.assign({align:"end"},$,{onChange:k,onShowSizeChange:L})));let W=Wt(p);r&&p.length>($.current-1)*$.pageSize&&(W=Wt(p).splice(($.current-1)*$.pageSize,$.pageSize));const q=Object.keys(f||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),X=JG(q),Y=n.useMemo((()=>{for(let e=0;e<kG.length;e+=1){const t=kG[e];if(X[t])return t}}),[X]),K=n.useMemo((()=>{if(!f)return;const e=Y&&f[Y]?f[Y]:f.column;return e?{width:100/e+"%",maxWidth:100/e+"%"}:void 0}),[JSON.stringify(f),Y]);let Z=B&&n.createElement("div",{style:{minHeight:53}});if(W.length>0){const e=W.map(((e,t)=>((e,t)=>{if(!x)return null;let r;return r="function"==typeof b?b(e):b?e[b]:e.key,r||(r=`list-item-${t}`),n.createElement(n.Fragment,{key:r},x(e,t))})(e,t)));Z=f?n.createElement(ZG,{gutter:f.gutter},n.Children.map(e,(e=>n.createElement("div",{key:null==e?void 0:e.key,style:K},e)))):n.createElement("ul",{className:`${N}-items`},e)}else u||B||(Z=n.createElement("div",{className:`${N}-empty-text`},(null==_?void 0:_.emptyText)||(null==P?void 0:P("List"))||n.createElement(HG,{componentName:"List"})));const J=$.position||"bottom",Q=n.useMemo((()=>({grid:f,itemLayout:h})),[JSON.stringify(f),h]);return D(n.createElement(vY.Provider,{value:Q},n.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},null==I?void 0:I.style),c),className:V},w),("top"===J||"both"===J)&&G,g&&n.createElement("div",{className:`${N}-header`},g),n.createElement(gY,Object.assign({},F),Z,u),v&&n.createElement("div",{className:`${N}-footer`},v),d||("bottom"===J||"both"===J)&&G)))}const PY=n.forwardRef(AY);PY.Item=SY;const RY=PY;var IY=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],OY=(0,n.forwardRef)((function(e,t){var r=e.prefixCls,i=void 0===r?"rc-checkbox":r,o=e.className,a=e.style,s=e.checked,l=e.disabled,c=e.defaultChecked,u=void 0!==c&&c,h=e.type,d=void 0===h?"checkbox":h,f=e.title,p=e.onChange,m=Ca(e,IY),g=(0,n.useRef)(null),v=(0,n.useRef)(null),y=Ht(Ba(u,{value:s}),2),b=y[0],x=y[1];(0,n.useImperativeHandle)(t,(function(){return{focus:function(e){var t;null===(t=g.current)||void 0===t||t.focus(e)},blur:function(){var e;null===(e=g.current)||void 0===e||e.blur()},input:g.current,nativeElement:v.current}}));var _=va()(i,o,Ft(Ft({},"".concat(i,"-checked"),b),"".concat(i,"-disabled"),l));return n.createElement("span",{className:_,title:f,style:a,ref:v},n.createElement("input",nr({},m,{className:"".concat(i,"-input"),ref:g,onChange:function(t){l||("checked"in e||x(t.target.checked),null==p||p({target:Xt(Xt({},e),{},{type:d,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:l,checked:!!b,type:d})),n.createElement("span",{className:"".concat(i,"-inner")}))}));const kY=OY,LY=n.createContext(null),NY=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},Bs(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,[`> ${e.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},Bs(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},Bs(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:e.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},Vs(e))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${Un(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:e.calc(e.checkboxSize).div(14).mul(5).equal(),height:e.calc(e.checkboxSize).div(14).mul(8).equal(),border:`${Un(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[`\n        ${n}:not(${n}-disabled),\n        ${t}:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}}},[`\n        ${n}-checked:not(${n}-disabled),\n        ${t}-checked:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:e.calc(e.fontSizeLG).div(2).equal(),height:e.calc(e.fontSizeLG).div(2).equal(),backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function DY(e,t){const n=$C(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[NY(n)]}const zY=YC("Checkbox",((e,t)=>{let{prefixCls:n}=t;return[DY(n,e)]}));const UY=(e,t)=>{var r;const{prefixCls:i,className:o,rootClassName:a,children:s,indeterminate:l=!1,style:c,onMouseEnter:u,onMouseLeave:h,skipGroup:d=!1,disabled:f}=e,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:m,direction:g,checkbox:v}=n.useContext(ia),y=n.useContext(LY),{isFormItemInput:b}=n.useContext(GD),x=n.useContext(ca),_=null!==(r=(null==y?void 0:y.disabled)||f)&&void 0!==r?r:x,w=n.useRef(p.value),S=n.useRef(null),E=wa(t,S);n.useEffect((()=>{null==y||y.registerValue(p.value)}),[]),n.useEffect((()=>{if(!d)return p.value!==w.current&&(null==y||y.cancelValue(w.current),null==y||y.registerValue(p.value),w.current=p.value),()=>null==y?void 0:y.cancelValue(p.value)}),[p.value]),n.useEffect((()=>{var e;(null===(e=S.current)||void 0===e?void 0:e.input)&&(S.current.input.indeterminate=l)}),[l]);const C=m("checkbox",i),M=pV(C),[T,A,P]=zY(C,M),R=Object.assign({},p);y&&!d&&(R.onChange=function(){p.onChange&&p.onChange.apply(p,arguments),y.toggleOption&&y.toggleOption({label:s,value:p.value})},R.name=y.name,R.checked=y.value.includes(p.value));const I=va()(`${C}-wrapper`,{[`${C}-rtl`]:"rtl"===g,[`${C}-wrapper-checked`]:R.checked,[`${C}-wrapper-disabled`]:_,[`${C}-wrapper-in-form-item`]:b},null==v?void 0:v.className,o,a,P,M,A),O=va()({[`${C}-indeterminate`]:l},Kz,A);return T(n.createElement(mU,{component:"Checkbox",disabled:_},n.createElement("label",{className:I,style:Object.assign(Object.assign({},null==v?void 0:v.style),c),onMouseEnter:u,onMouseLeave:h},n.createElement(kY,Object.assign({},R,{prefixCls:C,className:O,disabled:_,ref:E})),void 0!==s&&n.createElement("span",null,s))))},FY=n.forwardRef(UY);const BY=n.forwardRef(((e,t)=>{const{defaultValue:r,children:i,options:o=[],prefixCls:a,className:s,rootClassName:l,style:c,onChange:u}=e,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:d,direction:f}=n.useContext(ia),[p,m]=n.useState(h.value||r||[]),[g,v]=n.useState([]);n.useEffect((()=>{"value"in h&&m(h.value||[])}),[h.value]);const y=n.useMemo((()=>o.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[o]),b=d("checkbox",a),x=`${b}-group`,_=pV(b),[w,S,E]=zY(b,_),C=rC(h,["value","disabled"]),M=o.length?y.map((e=>n.createElement(FY,{prefixCls:b,key:e.value.toString(),disabled:"disabled"in e?e.disabled:h.disabled,value:e.value,checked:p.includes(e.value),onChange:e.onChange,className:`${x}-item`,style:e.style,title:e.title,id:e.id,required:e.required},e.label))):i,T={toggleOption:e=>{const t=p.indexOf(e.value),n=Wt(p);-1===t?n.push(e.value):n.splice(t,1),"value"in h||m(n),null==u||u(n.filter((e=>g.includes(e))).sort(((e,t)=>y.findIndex((t=>t.value===e))-y.findIndex((e=>e.value===t)))))},value:p,disabled:h.disabled,name:h.name,registerValue:e=>{v((t=>[].concat(Wt(t),[e])))},cancelValue:e=>{v((t=>t.filter((t=>t!==e))))}},A=va()(x,{[`${x}-rtl`]:"rtl"===f},s,l,E,_,S);return w(n.createElement("div",Object.assign({className:A,style:c},C,{ref:t}),n.createElement(LY.Provider,{value:T},M)))})),jY=BY,VY=FY;VY.Group=jY,VY.__ANT_CHECKBOX=!0;const $Y=VY;var HY=a(8527),GY={},WY=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(GY[i])return GY[i];var o=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return GY[i]=o,o},qY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XY=function(e){var t=e.white,r=e.grey,i=e.size,o=e.renderers,a=e.borderRadius,s=e.boxShadow,l=e.children,c=(0,HY.Ay)({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+WY(t,r,i,o.canvas)+") center left"}}});return(0,n.isValidElement)(l)?n.cloneElement(l,qY({},l.props,{style:qY({},l.props.style,c.grid)})):n.createElement("div",{style:c.grid})};XY.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const YY=XY;var KY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZY=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function JY(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var QY=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=JY(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h;if(h=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var d;if(r!==(d=c<0?0:c>o?1:Math.round(100*c/o)/100))return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},JY(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ZY(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,r=(0,HY.Ay)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:KY({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return n.createElement("div",{style:r.alpha},n.createElement("div",{style:r.checkboard},n.createElement(YY,{renderers:this.props.renderers})),n.createElement("div",{style:r.gradient}),n.createElement("div",{style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},n.createElement("div",{style:r.pointer},this.props.pointer?n.createElement(this.props.pointer,this.props):n.createElement("div",{style:r.slider}))))}}]),t}(n.PureComponent||n.Component);const eK=QY;var tK=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nK=[38,40],rK=1,iK=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,nK.indexOf(t)>-1)){var i=n.getArrowOffset(),o=38===e.keyCode?r+i:r-i;n.setUpdatedValue(o,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+rK++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),tK(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,HY.Ay)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return n.createElement("div",{style:t.wrap},n.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?n.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(n.PureComponent||n.Component);const oK=iK;var aK=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function sK(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var lK=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=sK(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u;if(u=c<0?359:c>o?0:360*(-100*c/o+100)/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h;if(h=l<0?0:l>i?359:100*l/i*360/100,n.h!==h)return{h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},sK(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),aK(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,r=void 0===t?"horizontal":t,i=(0,HY.Ay)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return n.createElement("div",{style:i.hue},n.createElement("div",{className:"hue-"+r,style:i.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},n.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),n.createElement("div",{style:i.pointer},this.props.pointer?n.createElement(this.props.pointer,this.props):n.createElement("div",{style:i.slider}))))}}]),t}(n.PureComponent||n.Component);const cK=lK;var uK=a(5556),hK=a.n(uK);const dK=function(e,t){return e===t||e!=e&&t!=t},fK=function(e,t){for(var n=e.length;n--;)if(dK(e[n][0],t))return n;return-1};var pK=Array.prototype.splice;function mK(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mK.prototype.clear=function(){this.__data__=[],this.size=0},mK.prototype.delete=function(e){var t=this.__data__,n=fK(t,e);return!(n<0||(n==t.length-1?t.pop():pK.call(t,n,1),--this.size,0))},mK.prototype.get=function(e){var t=this.__data__,n=fK(t,e);return n<0?void 0:t[n][1]},mK.prototype.has=function(e){return fK(this.__data__,e)>-1},mK.prototype.set=function(e,t){var n=this.__data__,r=fK(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const gK=mK,vK="object"==typeof global&&global&&global.Object===Object&&global;var yK="object"==typeof self&&self&&self.Object===Object&&self;const bK=vK||yK||Function("return this")(),xK=bK.Symbol;var _K=Object.prototype,wK=_K.hasOwnProperty,SK=_K.toString,EK=xK?xK.toStringTag:void 0;var CK=Object.prototype.toString;var MK=xK?xK.toStringTag:void 0;const TK=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":MK&&MK in Object(e)?function(e){var t=wK.call(e,EK),n=e[EK];try{e[EK]=void 0;var r=!0}catch(e){}var i=SK.call(e);return r&&(t?e[EK]=n:delete e[EK]),i}(e):function(e){return CK.call(e)}(e)},AK=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},PK=function(e){if(!AK(e))return!1;var t=TK(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},RK=bK["__core-js_shared__"];var IK,OK=(IK=/[^.]+$/.exec(RK&&RK.keys&&RK.keys.IE_PROTO||""))?"Symbol(src)_1."+IK:"";var kK=Function.prototype.toString;const LK=function(e){if(null!=e){try{return kK.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var NK=/^\[object .+?Constructor\]$/,DK=Function.prototype,zK=Object.prototype,UK=DK.toString,FK=zK.hasOwnProperty,BK=RegExp("^"+UK.call(FK).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const jK=function(e){return!(!AK(e)||(t=e,OK&&OK in t))&&(PK(e)?BK:NK).test(LK(e));var t},VK=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return jK(n)?n:void 0},$K=VK(bK,"Map"),HK=VK(Object,"create");var GK=Object.prototype.hasOwnProperty;var WK=Object.prototype.hasOwnProperty;function qK(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qK.prototype.clear=function(){this.__data__=HK?HK(null):{},this.size=0},qK.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qK.prototype.get=function(e){var t=this.__data__;if(HK){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return GK.call(t,e)?t[e]:void 0},qK.prototype.has=function(e){var t=this.__data__;return HK?void 0!==t[e]:WK.call(t,e)},qK.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=HK&&void 0===t?"__lodash_hash_undefined__":t,this};const XK=qK,YK=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function KK(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}KK.prototype.clear=function(){this.size=0,this.__data__={hash:new XK,map:new($K||gK),string:new XK}},KK.prototype.delete=function(e){var t=YK(this,e).delete(e);return this.size-=t?1:0,t},KK.prototype.get=function(e){return YK(this,e).get(e)},KK.prototype.has=function(e){return YK(this,e).has(e)},KK.prototype.set=function(e,t){var n=YK(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const ZK=KK;function JK(e){var t=this.__data__=new gK(e);this.size=t.size}JK.prototype.clear=function(){this.__data__=new gK,this.size=0},JK.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},JK.prototype.get=function(e){return this.__data__.get(e)},JK.prototype.has=function(e){return this.__data__.has(e)},JK.prototype.set=function(e,t){var n=this.__data__;if(n instanceof gK){var r=n.__data__;if(!$K||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ZK(r)}return n.set(e,t),this.size=n.size,this};const QK=JK,eZ=function(){try{var e=VK(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),tZ=function(e,t,n){"__proto__"==t&&eZ?eZ(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},nZ=function(e,t,n){(void 0!==n&&!dK(e[t],n)||void 0===n&&!(t in e))&&tZ(e,t,n)},rZ=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e};var iZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,oZ=iZ&&"object"==typeof module&&module&&!module.nodeType&&module,aZ=oZ&&oZ.exports===iZ?bK.Buffer:void 0,sZ=aZ?aZ.allocUnsafe:void 0;const lZ=bK.Uint8Array,cZ=function(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new lZ(r).set(new lZ(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)};var uZ=Object.create;const hZ=function(){function e(){}return function(t){if(!AK(t))return{};if(uZ)return uZ(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),dZ=function(e,t){return function(n){return e(t(n))}},fZ=dZ(Object.getPrototypeOf,Object);var pZ=Object.prototype;const mZ=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pZ)},gZ=function(e){return null!=e&&"object"==typeof e},vZ=function(e){return gZ(e)&&"[object Arguments]"==TK(e)};var yZ=Object.prototype,bZ=yZ.hasOwnProperty,xZ=yZ.propertyIsEnumerable;const _Z=vZ(function(){return arguments}())?vZ:function(e){return gZ(e)&&bZ.call(e,"callee")&&!xZ.call(e,"callee")},wZ=Array.isArray,SZ=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},EZ=function(e){return null!=e&&SZ(e.length)&&!PK(e)};var CZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,MZ=CZ&&"object"==typeof module&&module&&!module.nodeType&&module,TZ=MZ&&MZ.exports===CZ?bK.Buffer:void 0;const AZ=(TZ?TZ.isBuffer:void 0)||function(){return!1};var PZ=Function.prototype,RZ=Object.prototype,IZ=PZ.toString,OZ=RZ.hasOwnProperty,kZ=IZ.call(Object);var LZ={};LZ["[object Float32Array]"]=LZ["[object Float64Array]"]=LZ["[object Int8Array]"]=LZ["[object Int16Array]"]=LZ["[object Int32Array]"]=LZ["[object Uint8Array]"]=LZ["[object Uint8ClampedArray]"]=LZ["[object Uint16Array]"]=LZ["[object Uint32Array]"]=!0,LZ["[object Arguments]"]=LZ["[object Array]"]=LZ["[object ArrayBuffer]"]=LZ["[object Boolean]"]=LZ["[object DataView]"]=LZ["[object Date]"]=LZ["[object Error]"]=LZ["[object Function]"]=LZ["[object Map]"]=LZ["[object Number]"]=LZ["[object Object]"]=LZ["[object RegExp]"]=LZ["[object Set]"]=LZ["[object String]"]=LZ["[object WeakMap]"]=!1;var NZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,DZ=NZ&&"object"==typeof module&&module&&!module.nodeType&&module,zZ=DZ&&DZ.exports===NZ&&vK.process,UZ=function(){try{return DZ&&DZ.require&&DZ.require("util").types||zZ&&zZ.binding&&zZ.binding("util")}catch(e){}}(),FZ=UZ&&UZ.isTypedArray;const BZ=FZ?(jZ=FZ,function(e){return jZ(e)}):function(e){return gZ(e)&&SZ(e.length)&&!!LZ[TK(e)]};var jZ;const VZ=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var $Z=Object.prototype.hasOwnProperty;const HZ=function(e,t,n){var r=e[t];$Z.call(e,t)&&dK(r,n)&&(void 0!==n||t in e)||tZ(e,t,n)};var GZ=/^(?:0|[1-9]\d*)$/;const WZ=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&GZ.test(e))&&e>-1&&e%1==0&&e<t};var qZ=Object.prototype.hasOwnProperty;const XZ=function(e,t){var n=wZ(e),r=!n&&_Z(e),i=!n&&!r&&AZ(e),o=!n&&!r&&!i&&BZ(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!qZ.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||WZ(c,l))||s.push(c);return s};var YZ=Object.prototype.hasOwnProperty;const KZ=function(e){if(!AK(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=mZ(e),n=[];for(var r in e)("constructor"!=r||!t&&YZ.call(e,r))&&n.push(r);return n},ZZ=function(e){return EZ(e)?XZ(e,!0):KZ(e)},JZ=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?tZ(n,s,l):HZ(n,s,l)}return n}(e,ZZ(e))},QZ=function(e,t,n,r,i,o,a){var s,l=VZ(e,n),c=VZ(t,n),u=a.get(c);if(u)nZ(e,n,u);else{var h=o?o(l,c,n+"",e,t,a):void 0,d=void 0===h;if(d){var f=wZ(c),p=!f&&AZ(c),m=!f&&!p&&BZ(c);h=c,f||p||m?wZ(l)?h=l:gZ(s=l)&&EZ(s)?h=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(l):p?(d=!1,h=function(e,t){if(t)return e.slice();var n=e.length,r=sZ?sZ(n):new e.constructor(n);return e.copy(r),r}(c,!0)):m?(d=!1,h=cZ(c,!0)):h=[]:function(e){if(!gZ(e)||"[object Object]"!=TK(e))return!1;var t=fZ(e);if(null===t)return!0;var n=OZ.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&IZ.call(n)==kZ}(c)||_Z(c)?(h=l,_Z(l)?h=JZ(l):AK(l)&&!PK(l)||(h=function(e){return"function"!=typeof e.constructor||mZ(e)?{}:hZ(fZ(e))}(c))):d=!1}d&&(a.set(c,h),i(h,c,r,o,a),a.delete(c)),nZ(e,n,h)}},eJ=function e(t,n,r,i,o){t!==n&&rZ(n,(function(a,s){if(o||(o=new QK),AK(a))QZ(t,n,s,r,e,i,o);else{var l=i?i(VZ(t,s),a,s+"",t,n,o):void 0;void 0===l&&(l=a),nZ(t,s,l)}}),ZZ)},tJ=function(e){return e};var nJ=Math.max;const rJ=eZ?function(e,t){return eZ(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:tJ;var iJ=Date.now;const oJ=function(e){var t=0,n=0;return function(){var r=iJ(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(rJ),aJ=function(e,t){return oJ(function(e,t,n){return t=nJ(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=nJ(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,tJ),e+"")},sJ=(lJ=function(e,t,n){eJ(e,t,n)},aJ((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=lJ.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!AK(n))return!1;var r=typeof t;return!!("number"==r?EZ(n)&&WZ(t,n.length):"string"==r&&t in n)&&dK(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&lJ(e,a,n)}return e})));var lJ,cJ=function(e){var t=e.zDepth,r=e.radius,i=e.background,o=e.children,a=e.styles,s=void 0===a?{}:a,l=(0,HY.Ay)(sJ({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===t});return n.createElement("div",{style:l.wrap},n.createElement("div",{style:l.bg}),n.createElement("div",{style:l.content},o))};cJ.propTypes={background:hK().string,zDepth:hK().oneOf([0,1,2,3,4,5]),radius:hK().number,styles:hK().object},cJ.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const uJ=cJ,hJ=function(){return bK.Date.now()};var dJ=/\s/;var fJ=/^\s+/;const pJ=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&dJ.test(e.charAt(t)););return t}(e)+1).replace(fJ,""):e},mJ=function(e){return"symbol"==typeof e||gZ(e)&&"[object Symbol]"==TK(e)};var gJ=/^[-+]0x[0-9a-f]+$/i,vJ=/^0b[01]+$/i,yJ=/^0o[0-7]+$/i,bJ=parseInt;const xJ=function(e){if("number"==typeof e)return e;if(mJ(e))return NaN;if(AK(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=AK(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=pJ(e);var n=vJ.test(e);return n||yJ.test(e)?bJ(e.slice(2),n?2:8):gJ.test(e)?NaN:+e};var _J=Math.max,wJ=Math.min;const SJ=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=hJ();if(p(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return h?wJ(n,o-(e-c)):n}(e))}function g(e){return s=void 0,d&&r?f(e):(r=i=void 0,a)}function v(){var e=hJ(),n=p(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?f(e):a}(l);if(h)return clearTimeout(s),s=setTimeout(m,t),f(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=xJ(t)||0,AK(n)&&(u=!!n.leading,o=(h="maxWait"in n)?_J(xJ(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:g(hJ())},v};var EJ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),CJ=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>o&&(c=o);var u=l/i,h=1-c/o;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return AK(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),SJ(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),EJ(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},r=t.color,i=t.white,o=t.black,a=t.pointer,s=t.circle,l=(0,HY.Ay)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:i,black:o,pointer:a,circle:s}},{custom:!!this.props.style});return n.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},n.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),n.createElement("div",{style:l.white,className:"saturation-white"},n.createElement("div",{style:l.black,className:"saturation-black"}),n.createElement("div",{style:l.pointer},this.props.pointer?n.createElement(this.props.pointer,this.props):n.createElement("div",{style:l.circle}))))}}]),t}(n.PureComponent||n.Component);const MJ=CJ,TJ=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},AJ=dZ(Object.keys,Object);var PJ=Object.prototype.hasOwnProperty;const RJ=function(e){return EZ(e)?XZ(e):function(e){if(!mZ(e))return AJ(e);var t=[];for(var n in Object(e))PJ.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},IJ=function(e,t){if(null==e)return e;if(!EZ(e))return function(e,t){return e&&rZ(e,t,RJ)}(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e},OJ=function(e,t){return(wZ(e)?TJ:IJ)(e,"function"==typeof(n=t)?n:tJ);var n};function kJ(e){return kJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kJ(e)}var LJ=/^\s+/,NJ=/\s+$/;function DJ(e,t){if(t=t||{},(e=e||"")instanceof DJ)return e;if(!(this instanceof DJ))return new DJ(e,t);var n=function(e){var t,n,r,i={r:0,g:0,b:0},o=1,a=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){e=e.replace(LJ,"").replace(NJ,"").toLowerCase();var t,n=!1;if(QJ[e])e=QJ[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=dQ.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=dQ.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=dQ.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=dQ.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=dQ.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=dQ.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=dQ.hex8.exec(e))?{r:iQ(t[1]),g:iQ(t[2]),b:iQ(t[3]),a:lQ(t[4]),format:n?"name":"hex8"}:(t=dQ.hex6.exec(e))?{r:iQ(t[1]),g:iQ(t[2]),b:iQ(t[3]),format:n?"name":"hex"}:(t=dQ.hex4.exec(e))?{r:iQ(t[1]+""+t[1]),g:iQ(t[2]+""+t[2]),b:iQ(t[3]+""+t[3]),a:lQ(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=dQ.hex3.exec(e))&&{r:iQ(t[1]+""+t[1]),g:iQ(t[2]+""+t[2]),b:iQ(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==kJ(e)&&(fQ(e.r)&&fQ(e.g)&&fQ(e.b)?(t=e.r,n=e.g,r=e.b,i={r:255*nQ(t,255),g:255*nQ(n,255),b:255*nQ(r,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):fQ(e.h)&&fQ(e.s)&&fQ(e.v)?(a=aQ(e.s),s=aQ(e.v),i=function(e,t,n){e=6*nQ(e,360),t=nQ(t,100),n=nQ(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(e.h,a,s),c=!0,u="hsv"):fQ(e.h)&&fQ(e.s)&&fQ(e.l)&&(a=aQ(e.s),l=aQ(e.l),i=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=nQ(e,360),t=nQ(t,100),n=nQ(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,a,l),c=!0,u="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=tQ(o),{ok:c,format:e.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function zJ(e,t,n){e=nQ(e,255),t=nQ(t,255),n=nQ(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function UJ(e,t,n){e=nQ(e,255),t=nQ(t,255),n=nQ(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function FJ(e,t,n,r){var i=[oQ(Math.round(e).toString(16)),oQ(Math.round(t).toString(16)),oQ(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function BJ(e,t,n,r){return[oQ(sQ(r)),oQ(Math.round(e).toString(16)),oQ(Math.round(t).toString(16)),oQ(Math.round(n).toString(16))].join("")}function jJ(e,t){t=0===t?0:t||10;var n=DJ(e).toHsl();return n.s-=t/100,n.s=rQ(n.s),DJ(n)}function VJ(e,t){t=0===t?0:t||10;var n=DJ(e).toHsl();return n.s+=t/100,n.s=rQ(n.s),DJ(n)}function $J(e){return DJ(e).desaturate(100)}function HJ(e,t){t=0===t?0:t||10;var n=DJ(e).toHsl();return n.l+=t/100,n.l=rQ(n.l),DJ(n)}function GJ(e,t){t=0===t?0:t||10;var n=DJ(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),DJ(n)}function WJ(e,t){t=0===t?0:t||10;var n=DJ(e).toHsl();return n.l-=t/100,n.l=rQ(n.l),DJ(n)}function qJ(e,t){var n=DJ(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,DJ(n)}function XJ(e){var t=DJ(e).toHsl();return t.h=(t.h+180)%360,DJ(t)}function YJ(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=DJ(e).toHsl(),r=[DJ(e)],i=360/t,o=1;o<t;o++)r.push(DJ({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function KJ(e){var t=DJ(e).toHsl(),n=t.h;return[DJ(e),DJ({h:(n+72)%360,s:t.s,l:t.l}),DJ({h:(n+216)%360,s:t.s,l:t.l})]}function ZJ(e,t,n){t=t||6,n=n||30;var r=DJ(e).toHsl(),i=360/n,o=[DJ(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(DJ(r));return o}function JJ(e,t){t=t||6;for(var n=DJ(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(DJ({h:r,s:i,v:o})),o=(o+s)%1;return a}DJ.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=tQ(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=UJ(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=UJ(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=zJ(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=zJ(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return FJ(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[oQ(Math.round(e).toString(16)),oQ(Math.round(t).toString(16)),oQ(Math.round(n).toString(16)),oQ(sQ(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*nQ(this._r,255))+"%",g:Math.round(100*nQ(this._g,255))+"%",b:Math.round(100*nQ(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*nQ(this._r,255))+"%, "+Math.round(100*nQ(this._g,255))+"%, "+Math.round(100*nQ(this._b,255))+"%)":"rgba("+Math.round(100*nQ(this._r,255))+"%, "+Math.round(100*nQ(this._g,255))+"%, "+Math.round(100*nQ(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(eQ[FJ(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+BJ(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=DJ(e);n="#"+BJ(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return DJ(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(HJ,arguments)},brighten:function(){return this._applyModification(GJ,arguments)},darken:function(){return this._applyModification(WJ,arguments)},desaturate:function(){return this._applyModification(jJ,arguments)},saturate:function(){return this._applyModification(VJ,arguments)},greyscale:function(){return this._applyModification($J,arguments)},spin:function(){return this._applyModification(qJ,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(ZJ,arguments)},complement:function(){return this._applyCombination(XJ,arguments)},monochromatic:function(){return this._applyCombination(JJ,arguments)},splitcomplement:function(){return this._applyCombination(KJ,arguments)},triad:function(){return this._applyCombination(YJ,[3])},tetrad:function(){return this._applyCombination(YJ,[4])}},DJ.fromRatio=function(e,t){if("object"==kJ(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:aQ(e[r]));e=n}return DJ(e,t)},DJ.equals=function(e,t){return!(!e||!t)&&DJ(e).toRgbString()==DJ(t).toRgbString()},DJ.random=function(){return DJ.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},DJ.mix=function(e,t,n){n=0===n?0:n||50;var r=DJ(e).toRgb(),i=DJ(t).toRgb(),o=n/100;return DJ({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},DJ.readability=function(e,t){var n=DJ(e),r=DJ(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},DJ.isReadable=function(e,t,n){var r,i,o,a,s,l=DJ.readability(e,t);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=l>=4.5;break;case"AAlarge":i=l>=3;break;case"AAAsmall":i=l>=7}return i},DJ.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=DJ.readability(e,t[c]))>l&&(l=r,s=DJ(t[c]));return DJ.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,DJ.mostReadable(e,["#fff","#000"],n))};var QJ=DJ.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},eQ=DJ.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(QJ);function tQ(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function nQ(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function rQ(e){return Math.min(1,Math.max(0,e))}function iQ(e){return parseInt(e,16)}function oQ(e){return 1==e.length?"0"+e:""+e}function aQ(e){return e<=1&&(e=100*e+"%"),e}function sQ(e){return Math.round(255*parseFloat(e)).toString(16)}function lQ(e){return iQ(e)/255}var cQ,uQ,hQ,dQ=(uQ="[\\s|\\(]+("+(cQ="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+cQ+")[,|\\s]+("+cQ+")\\s*\\)?",hQ="[\\s|\\(]+("+cQ+")[,|\\s]+("+cQ+")[,|\\s]+("+cQ+")[,|\\s]+("+cQ+")\\s*\\)?",{CSS_UNIT:new RegExp(cQ),rgb:new RegExp("rgb"+uQ),rgba:new RegExp("rgba"+hQ),hsl:new RegExp("hsl"+uQ),hsla:new RegExp("hsla"+hQ),hsv:new RegExp("hsv"+uQ),hsva:new RegExp("hsva"+hQ),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function fQ(e){return!!dQ.CSS_UNIT.exec(e)}var pQ=function(e){var t=0,n=0;return OJ(["r","g","b","a","h","s","l","v"],(function(r){e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)&&/^\d+%$/.test(e[r])&&(n+=1)})),t===n&&e},mQ=function(e,t){var n=e.hex?DJ(e.hex):DJ(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},gQ=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&DJ(e).isValid()},vQ=function(e){if(!e)return"#fff";var t=mQ(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},yQ=function(e,t){return DJ(t+" ("+e.replace("","")+")")._ok},bQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xQ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();const _Q=function(e){var t=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.handleChange=function(e,n){if(pQ(e)){var r=mQ(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(pQ(e)){var r=mQ(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=bQ({},mQ(e.color,0)),t.debounce=SJ((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),xQ(r,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),n.createElement(e,bQ({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return bQ({},mQ(e.color,t.oldHue))}}]),r}(n.PureComponent||n.Component);return t.propTypes=bQ({},e.propTypes),t.defaultProps=bQ({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var wQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SQ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function EQ(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var CQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const MQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function i(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=EQ(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},EQ(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),SQ(i,[{key:"render",value:function(){return n.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},n.createElement(e,wQ({},this.props,this.state)))}}]),i}(n.Component)}((function(e){var t=e.color,r=e.style,i=e.onClick,o=void 0===i?function(){}:i,a=e.onHover,s=e.title,l=void 0===s?t:s,c=e.children,u=e.focus,h=e.focusStyle,d=void 0===h?{}:h,f="transparent"===t,p=(0,HY.Ay)({default:{swatch:CQ({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,u?d:{})}}),m={};return a&&(m.onMouseOver=function(e){return a(t,e)}),n.createElement("div",CQ({style:p.swatch,onClick:function(e){return o(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},m),c,f&&n.createElement(YY,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var TQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AQ=function(e){var t=e.rgb,r=e.hsl,i=e.width,o=e.height,a=e.onChange,s=e.direction,l=e.style,c=e.renderers,u=e.pointer,h=e.className,d=void 0===h?"":h,f=(0,HY.Ay)({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:l}}});return n.createElement("div",{style:f.picker,className:"alpha-picker "+d},n.createElement(eK,TQ({},f.alpha,{rgb:t,hsl:r,pointer:u,renderers:c,onChange:a,direction:s})))};AQ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,r=(0,HY.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.createElement("div",{style:r.picker})}},_Q(AQ);const PQ=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};function RQ(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ZK;++t<n;)this.add(e[t])}RQ.prototype.add=RQ.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},RQ.prototype.has=function(e){return this.__data__.has(e)};const IQ=RQ,OQ=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},kQ=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new IQ:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(r)var g=a?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!OQ(t,(function(e,t){if(a=t,!f.has(a)&&(p===e||i(p,e,n,r,o)))return f.push(t);var a}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d},LQ=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},NQ=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var DQ=xK?xK.prototype:void 0,zQ=DQ?DQ.valueOf:void 0;var UQ=Object.prototype.propertyIsEnumerable,FQ=Object.getOwnPropertySymbols;const BQ=FQ?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(FQ(e),(function(t){return UQ.call(e,t)})))}:function(){return[]},jQ=function(e){return function(e,t,n){var r=t(e);return wZ(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,RJ,BQ)};var VQ=Object.prototype.hasOwnProperty;const $Q=VK(bK,"DataView"),HQ=VK(bK,"Promise"),GQ=VK(bK,"Set"),WQ=VK(bK,"WeakMap");var qQ="[object Map]",XQ="[object Promise]",YQ="[object Set]",KQ="[object WeakMap]",ZQ="[object DataView]",JQ=LK($Q),QQ=LK($K),e0=LK(HQ),t0=LK(GQ),n0=LK(WQ),r0=TK;($Q&&r0(new $Q(new ArrayBuffer(1)))!=ZQ||$K&&r0(new $K)!=qQ||HQ&&r0(HQ.resolve())!=XQ||GQ&&r0(new GQ)!=YQ||WQ&&r0(new WQ)!=KQ)&&(r0=function(e){var t=TK(e),n="[object Object]"==t?e.constructor:void 0,r=n?LK(n):"";if(r)switch(r){case JQ:return ZQ;case QQ:return qQ;case e0:return XQ;case t0:return YQ;case n0:return KQ}return t});const i0=r0;var o0="[object Arguments]",a0="[object Array]",s0="[object Object]",l0=Object.prototype.hasOwnProperty;const c0=function(e,t,n,r,i,o){var a=wZ(e),s=wZ(t),l=a?a0:i0(e),c=s?a0:i0(t),u=(l=l==o0?s0:l)==s0,h=(c=c==o0?s0:c)==s0,d=l==c;if(d&&AZ(e)){if(!AZ(t))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new QK),a||BZ(e)?kQ(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new lZ(e),new lZ(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return dK(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=LQ;case"[object Set]":var l=1&r;if(s||(s=NQ),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=kQ(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(zQ)return zQ.call(e)==zQ.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var f=u&&l0.call(e,"__wrapped__"),p=h&&l0.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return o||(o=new QK),i(m,g,n,r,o)}}return!!d&&(o||(o=new QK),function(e,t,n,r,i,o){var a=1&n,s=jQ(e),l=s.length;if(l!=jQ(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:VQ.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))},u0=function e(t,n,r,i,o){return t===n||(null==t||null==n||!gZ(t)&&!gZ(n)?t!=t&&n!=n:c0(t,n,r,i,e,o))},h0=function(e){return e==e&&!AK(e)},d0=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},f0=function(e){var t=function(e){for(var t=RJ(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,h0(i)]}return t}(e);return 1==t.length&&t[0][2]?d0(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new QK;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?u0(u,c,3,r,h):d))return!1}}return!0}(n,e,t)}};var p0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m0=/^\w*$/;const g0=function(e,t){if(wZ(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!mJ(e))||m0.test(e)||!p0.test(e)||null!=t&&e in Object(t)};function v0(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(v0.Cache||ZK),n}v0.Cache=ZK;var y0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b0=/\\(\\)?/g;const x0=(_0=v0((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(y0,(function(e,n,r,i){t.push(r?i.replace(b0,"$1"):n||e)})),t}),(function(e){return 500===w0.size&&w0.clear(),e})),w0=_0.cache,_0);var _0,w0,S0=xK?xK.prototype:void 0,E0=S0?S0.toString:void 0;const C0=function e(t){if("string"==typeof t)return t;if(wZ(t))return PQ(t,e)+"";if(mJ(t))return E0?E0.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},M0=function(e){return null==e?"":C0(e)},T0=function(e,t){return wZ(e)?e:g0(e,t)?[e]:x0(M0(e))},A0=function(e){if("string"==typeof e||mJ(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},P0=function(e,t){for(var n=0,r=(t=T0(t,e)).length;null!=e&&n<r;)e=e[A0(t[n++])];return n&&n==r?e:void 0},R0=function(e,t){return null!=e&&t in Object(e)},I0=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=T0(t,e)).length,o=!1;++r<i;){var a=A0(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&SZ(i)&&WZ(a,i)&&(wZ(e)||_Z(e))}(e,t,R0)},O0=function(e,t){return g0(e)&&h0(t)?d0(A0(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:P0(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?I0(n,e):u0(t,r,3)}},k0=function(e){return g0(e)?(t=A0(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return P0(t,e)}}(e);var t},L0=function(e,t){var n=-1,r=EZ(e)?Array(e.length):[];return IJ(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},N0=function(e,t){return(wZ(e)?PQ:L0)(e,"function"==typeof(n=t)?n:null==n?tJ:"object"==typeof n?wZ(n)?O0(n[0],n[1]):f0(n):k0(n));var n},D0=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,o=(0,HY.Ay)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return n.createElement("div",{style:o.swatches},N0(t,(function(e){return n.createElement(MQ,{key:e,color:e,style:o.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.createElement("div",{style:o.clear}))};var z0=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,d="transparent"===i,f=function(e,n){gQ(e)&&t({hex:e,source:"hex"},n)},p=(0,HY.Ay)(sJ({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:vQ(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===s});return n.createElement("div",{style:p.card,className:"block-picker "+h},n.createElement("div",{style:p.triangle}),n.createElement("div",{style:p.head},d&&n.createElement(YY,{borderRadius:"6px 6px 0 0"}),n.createElement("div",{style:p.label},i)),n.createElement("div",{style:p.body},n.createElement(D0,{colors:o,onClick:f,onSwatchHover:r}),n.createElement(oK,{style:{input:p.input},value:i,onChange:f})))};z0.propTypes={width:hK().oneOfType([hK().string,hK().number]),colors:hK().arrayOf(hK().string),triangle:hK().oneOf(["top","hide"]),styles:hK().object},z0.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},_Q(z0);var U0="#ffcdd2",F0="#e57373",B0="#f44336",j0="#d32f2f",V0="#b71c1c",$0="#f8bbd0",H0="#f06292",G0="#e91e63",W0="#c2185b",q0="#880e4f",X0="#e1bee7",Y0="#ba68c8",K0="#9c27b0",Z0="#7b1fa2",J0="#4a148c",Q0="#d1c4e9",e1="#9575cd",t1="#673ab7",n1="#512da8",r1="#311b92",i1="#c5cae9",o1="#7986cb",a1="#3f51b5",s1="#303f9f",l1="#1a237e",c1="#bbdefb",u1="#64b5f6",h1="#2196f3",d1="#1976d2",f1="#0d47a1",p1="#b3e5fc",m1="#4fc3f7",g1="#03a9f4",v1="#0288d1",y1="#01579b",b1="#b2ebf2",x1="#4dd0e1",_1="#00bcd4",w1="#0097a7",S1="#006064",E1="#b2dfdb",C1="#4db6ac",M1="#009688",T1="#00796b",A1="#004d40",P1="#c8e6c9",R1="#81c784",I1="#4caf50",O1="#388e3c",k1="#dcedc8",L1="#aed581",N1="#8bc34a",D1="#689f38",z1="#33691e",U1="#f0f4c3",F1="#dce775",B1="#cddc39",j1="#afb42b",V1="#827717",$1="#fff9c4",H1="#fff176",G1="#ffeb3b",W1="#fbc02d",q1="#f57f17",X1="#ffecb3",Y1="#ffd54f",K1="#ffc107",Z1="#ffa000",J1="#ff6f00",Q1="#ffe0b2",e2="#ffb74d",t2="#ff9800",n2="#f57c00",r2="#e65100",i2="#ffccbc",o2="#ff8a65",a2="#ff5722",s2="#e64a19",l2="#bf360c",c2="#d7ccc8",u2="#a1887f",h2="#795548",d2="#5d4037",f2="#3e2723",p2="#cfd8dc",m2="#90a4ae",g2="#607d8b",v2="#455a64",y2="#263238",b2=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,o=e.hover,a=e.active,s=e.circleSize,l=e.circleSpacing,c=(0,HY.Ay)({default:{swatch:{width:s,height:s,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:a});return n.createElement("div",{style:c.swatch},n.createElement(MQ,{style:c.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};b2.defaultProps={circleSize:28,circleSpacing:14};const x2=(0,HY.H8)(b2);var _2=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,o=e.colors,a=e.hex,s=e.circleSize,l=e.styles,c=void 0===l?{}:l,u=e.circleSpacing,h=e.className,d=void 0===h?"":h,f=(0,HY.Ay)(sJ({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),p=function(e,t){return r({hex:e,source:"hex"},t)};return n.createElement("div",{style:f.card,className:"circle-picker "+d},N0(o,(function(e){return n.createElement(x2,{key:e,color:e,onClick:p,onSwatchHover:i,active:a===e.toLowerCase(),circleSize:s,circleSpacing:u})})))};_2.propTypes={width:hK().oneOfType([hK().string,hK().number]),circleSize:hK().number,circleSpacing:hK().number,styles:hK().object},_2.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[B0,G0,K0,t1,a1,h1,g1,_1,M1,I1,N1,B1,G1,K1,t2,a2,h2,g2],styles:{}},_Q(_2);const w2=function(e){return void 0===e};var S2=a(4657),E2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C2=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?gQ(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(w2(e.s)?n.props.hsl.s:e.s),l:Number(w2(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),E2(t,[{key:"render",value:function(){var e=this,t=(0,HY.Ay)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=n.createElement("div",{style:t.fields,className:"flexbox-fix"},n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=n.createElement("div",{style:t.fields,className:"flexbox-fix"},n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),n.createElement("div",{style:t.alpha},n.createElement(oK,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=n.createElement("div",{style:t.fields,className:"flexbox-fix"},n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),n.createElement("div",{style:t.field},n.createElement(oK,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),n.createElement("div",{style:t.alpha},n.createElement(oK,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),n.createElement("div",{style:t.wrap,className:"flexbox-fix"},r,n.createElement("div",{style:t.toggle},n.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},n.createElement(S2.A,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(n.Component);C2.defaultProps={view:"hex"};const M2=C2,T2=function(){var e=(0,HY.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.createElement("div",{style:e.picker})},A2=function(){var e=(0,HY.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return n.createElement("div",{style:e.picker})};var P2=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,o=e.rgb,a=e.hsl,s=e.hsv,l=e.hex,c=e.renderers,u=e.styles,h=void 0===u?{}:u,d=e.className,f=void 0===d?"":d,p=e.defaultView,m=(0,HY.Ay)(sJ({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:i});return n.createElement("div",{style:m.picker,className:"chrome-picker "+f},n.createElement("div",{style:m.saturation},n.createElement(MJ,{style:m.Saturation,hsl:a,hsv:s,pointer:A2,onChange:r})),n.createElement("div",{style:m.body},n.createElement("div",{style:m.controls,className:"flexbox-fix"},n.createElement("div",{style:m.color},n.createElement("div",{style:m.swatch},n.createElement("div",{style:m.active}),n.createElement(YY,{renderers:c}))),n.createElement("div",{style:m.toggles},n.createElement("div",{style:m.hue},n.createElement(cK,{style:m.Hue,hsl:a,pointer:T2,onChange:r})),n.createElement("div",{style:m.alpha},n.createElement(eK,{style:m.Alpha,rgb:o,hsl:a,pointer:T2,renderers:c,onChange:r})))),n.createElement(M2,{rgb:o,hsl:a,hex:l,view:p,onChange:r,disableAlpha:i})))};P2.propTypes={width:hK().oneOfType([hK().string,hK().number]),disableAlpha:hK().bool,styles:hK().object,defaultView:hK().oneOf(["hex","rgb","hsl"])},P2.defaultProps={width:225,disableAlpha:!1,styles:{}},_Q(P2);const R2=function(e){var t=e.color,r=e.onClick,i=void 0===r?function(){}:r,o=e.onSwatchHover,a=e.active,s=(0,HY.Ay)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:vQ(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.createElement(MQ,{style:s.color,color:t,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},n.createElement("div",{style:s.dot}))},I2=function(e){var t=e.hex,r=e.rgb,i=e.onChange,o=(0,HY.Ay)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?i({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return n.createElement("div",{style:o.fields,className:"flexbox-fix"},n.createElement("div",{style:o.active}),n.createElement(oK,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:a}),n.createElement(oK,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),n.createElement(oK,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),n.createElement(oK,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}))};var O2=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,a=e.rgb,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=(0,HY.Ay)(sJ({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(e,n){e.hex?gQ(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return n.createElement(uJ,{style:h.Compact,styles:l},n.createElement("div",{style:h.compact,className:"compact-picker "+u},n.createElement("div",null,N0(i,(function(e){return n.createElement(R2,{key:e,color:e,active:e.toLowerCase()===o,onClick:d,onSwatchHover:r})})),n.createElement("div",{style:h.clear})),n.createElement(I2,{hex:o,rgb:a,onChange:d})))};O2.propTypes={colors:hK().arrayOf(hK().string),styles:hK().object},O2.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},_Q(O2);const k2=(0,HY.H8)((function(e){var t=e.hover,r=e.color,i=e.onClick,o=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,HY.Ay)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return n.createElement("div",{style:s.swatch},n.createElement(MQ,{color:r,onClick:i,onHover:o,focusStyle:a}))}));var L2=function(e){var t=e.width,r=e.colors,i=e.onChange,o=e.onSwatchHover,a=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=(0,HY.Ay)(sJ({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),d=function(e,t){return i({hex:e,source:"hex"},t)};return n.createElement("div",{style:h.card,className:"github-picker "+u},n.createElement("div",{style:h.triangleShadow}),n.createElement("div",{style:h.triangle}),N0(r,(function(e){return n.createElement(k2,{color:e,key:e,onClick:d,onSwatchHover:o})})))};L2.propTypes={width:hK().oneOfType([hK().string,hK().number]),colors:hK().arrayOf(hK().string),triangle:hK().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:hK().object},L2.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},_Q(L2);var N2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D2=function(e){var t=e.width,r=e.height,i=e.onChange,o=e.hsl,a=e.direction,s=e.pointer,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,d=(0,HY.Ay)(sJ({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},c));return n.createElement("div",{style:d.picker,className:"hue-picker "+h},n.createElement(cK,N2({},d.hue,{hsl:o,pointer:s,onChange:function(e){return i({a:1,h:e.h,l:.5,s:1})},direction:a})))};D2.propTypes={styles:hK().object},D2.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,r=(0,HY.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.createElement("div",{style:r.picker})},styles:{}},_Q(D2),_Q((function(e){var t=e.onChange,r=e.hex,i=e.rgb,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=(0,HY.Ay)(sJ({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(e,n){e.hex?gQ(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||i.r,g:e.g||i.g,b:e.b||i.b,source:"rgb"},n)};return n.createElement(uJ,{styles:a},n.createElement("div",{style:c.material,className:"material-picker "+l},n.createElement(oK,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:r,onChange:u}),n.createElement("div",{style:c.split,className:"flexbox-fix"},n.createElement("div",{style:c.third},n.createElement(oK,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:i.r,onChange:u})),n.createElement("div",{style:c.third},n.createElement(oK,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:i.g,onChange:u})),n.createElement("div",{style:c.third},n.createElement(oK,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:i.b,onChange:u})))))}));const z2=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,o=e.hex,a=(0,HY.Ay)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,n){e["#"]?gQ(e["#"])&&t({hex:e["#"],source:"hex"},n):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n):(e.h||e.s||e.v)&&t({h:e.h||i.h,s:e.s||i.s,v:e.v||i.v,source:"hsv"},n)};return n.createElement("div",{style:a.fields},n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:s}),n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*i.s),onChange:s}),n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*i.v),onChange:s}),n.createElement("div",{style:a.divider}),n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:s}),n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:s}),n.createElement(oK,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:s}),n.createElement("div",{style:a.divider}),n.createElement(oK,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),n.createElement("div",{style:a.fieldSymbols},n.createElement("div",{style:a.symbol},""),n.createElement("div",{style:a.symbol},"%"),n.createElement("div",{style:a.symbol},"%")))},U2=function(e){var t=e.hsl,r=(0,HY.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return n.createElement("div",{style:r.picker})},F2=function(){var e=(0,HY.Ay)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return n.createElement("div",{style:e.pointer},n.createElement("div",{style:e.left},n.createElement("div",{style:e.leftInside})),n.createElement("div",{style:e.right},n.createElement("div",{style:e.rightInside})))},B2=function(e){var t=e.onClick,r=e.label,i=e.children,o=e.active,a=(0,HY.Ay)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return n.createElement("div",{style:a.button,onClick:t},r||i)},j2=function(e){var t=e.rgb,r=e.currentColor,i=(0,HY.Ay)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return n.createElement("div",null,n.createElement("div",{style:i.label},"new"),n.createElement("div",{style:i.swatches},n.createElement("div",{style:i.new}),n.createElement("div",{style:i.current})),n.createElement("div",{style:i.label},"current"))};var V2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$2=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),V2(t,[{key:"render",value:function(){var e=this.props,t=e.styles,r=void 0===t?{}:t,i=e.className,o=void 0===i?"":i,a=(0,HY.Ay)(sJ({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},r));return n.createElement("div",{style:a.picker,className:"photoshop-picker "+o},n.createElement("div",{style:a.head},this.props.header),n.createElement("div",{style:a.body,className:"flexbox-fix"},n.createElement("div",{style:a.saturation},n.createElement(MJ,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:U2,onChange:this.props.onChange})),n.createElement("div",{style:a.hue},n.createElement(cK,{direction:"vertical",hsl:this.props.hsl,pointer:F2,onChange:this.props.onChange})),n.createElement("div",{style:a.controls},n.createElement("div",{style:a.top,className:"flexbox-fix"},n.createElement("div",{style:a.previews},n.createElement(j2,{rgb:this.props.rgb,currentColor:this.state.currentColor})),n.createElement("div",{style:a.actions},n.createElement(B2,{label:"OK",onClick:this.props.onAccept,active:!0}),n.createElement(B2,{label:"Cancel",onClick:this.props.onCancel}),n.createElement(z2,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(n.Component);$2.propTypes={header:hK().string,styles:hK().object},$2.defaultProps={header:"Color Picker",styles:{}},_Q($2);const H2=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,a=e.disableAlpha,s=(0,HY.Ay)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(e,n){e.hex?gQ(e.hex)&&t({hex:e.hex,source:"hex"},n):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},n):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:i.h,s:i.s,l:i.l,a:e.a,source:"rgb"},n))};return n.createElement("div",{style:s.fields,className:"flexbox-fix"},n.createElement("div",{style:s.double},n.createElement(oK,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:l})),n.createElement("div",{style:s.single},n.createElement(oK,{style:{input:s.input,label:s.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),n.createElement("div",{style:s.single},n.createElement(oK,{style:{input:s.input,label:s.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),n.createElement("div",{style:s.single},n.createElement(oK,{style:{input:s.input,label:s.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),n.createElement("div",{style:s.alpha},n.createElement(oK,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*r.a),onChange:l,dragLabel:"true",dragMax:"100"})))};var G2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W2=function(e){var t=e.colors,r=e.onClick,i=void 0===r?function(){}:r,o=e.onSwatchHover,a=(0,HY.Ay)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){i({hex:e,source:"hex"},t)};return n.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,r=""+t.color+(t.title||"");return n.createElement("div",{key:r,style:a.swatchWrap},n.createElement(MQ,G2({},t,{style:a.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};W2.propTypes={colors:hK().arrayOf(hK().oneOfType([hK().string,hK().shape({color:hK().string,title:hK().string})])).isRequired};const q2=W2;var X2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y2=function(e){var t=e.width,r=e.rgb,i=e.hex,o=e.hsv,a=e.hsl,s=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,h=e.renderers,d=e.styles,f=void 0===d?{}:d,p=e.className,m=void 0===p?"":p,g=(0,HY.Ay)(sJ({default:X2({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:c});return n.createElement("div",{style:g.picker,className:"sketch-picker "+m},n.createElement("div",{style:g.saturation},n.createElement(MJ,{style:g.Saturation,hsl:a,hsv:o,onChange:s})),n.createElement("div",{style:g.controls,className:"flexbox-fix"},n.createElement("div",{style:g.sliders},n.createElement("div",{style:g.hue},n.createElement(cK,{style:g.Hue,hsl:a,onChange:s})),n.createElement("div",{style:g.alpha},n.createElement(eK,{style:g.Alpha,rgb:r,hsl:a,renderers:h,onChange:s}))),n.createElement("div",{style:g.color},n.createElement(YY,null),n.createElement("div",{style:g.activeColor}))),n.createElement(H2,{rgb:r,hsl:a,hex:i,onChange:s,disableAlpha:c}),n.createElement(q2,{colors:u,onClick:s,onSwatchHover:l}))};Y2.propTypes={disableAlpha:hK().bool,width:hK().oneOfType([hK().string,hK().number]),styles:hK().object},Y2.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const K2=_Q(Y2),Z2=function(e){var t=e.hsl,r=e.offset,i=e.onClick,o=void 0===i?function(){}:i,a=e.active,s=e.first,l=e.last,c=(0,HY.Ay)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:l});return n.createElement("div",{style:c.swatch,onClick:function(e){return o({h:t.h,s:.5,l:r,source:"hsl"},e)}})},J2=function(e){var t=e.onClick,r=e.hsl,i=(0,HY.Ay)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return n.createElement("div",{style:i.swatches},n.createElement("div",{style:i.swatch},n.createElement(Z2,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<o&&Math.abs(r.s-.5)<o,onClick:t,first:!0})),n.createElement("div",{style:i.swatch},n.createElement(Z2,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<o&&Math.abs(r.s-.5)<o,onClick:t})),n.createElement("div",{style:i.swatch},n.createElement(Z2,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<o&&Math.abs(r.s-.5)<o,onClick:t})),n.createElement("div",{style:i.swatch},n.createElement(Z2,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<o&&Math.abs(r.s-.5)<o,onClick:t})),n.createElement("div",{style:i.swatch},n.createElement(Z2,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<o&&Math.abs(r.s-.5)<o,onClick:t,last:!0})),n.createElement("div",{style:i.clear}))};var Q2=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=(0,HY.Ay)(sJ({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return n.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},n.createElement("div",{style:c.hue},n.createElement(cK,{style:c.Hue,hsl:t,pointer:i,onChange:r})),n.createElement("div",{style:c.swatches},n.createElement(J2,{hsl:t,onClick:r})))};Q2.propTypes={styles:hK().object},Q2.defaultProps={pointer:function(){var e=(0,HY.Ay)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.createElement("div",{style:e.picker})},styles:{}},_Q(Q2);var e3=a(748);const t3=function(e){var t=e.color,r=e.onClick,i=void 0===r?function(){}:r,o=e.onSwatchHover,a=e.first,s=e.last,l=e.active,c=(0,HY.Ay)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:vQ(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.createElement(MQ,{color:t,style:c.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},n.createElement("div",{style:c.check},n.createElement(e3.A,null)))},n3=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,o=e.active,a=(0,HY.Ay)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return n.createElement("div",{style:a.group},N0(i,(function(e,a){return n.createElement(t3,{key:e,color:e,active:e.toLowerCase()===o,first:0===a,last:a===i.length-1,onClick:t,onSwatchHover:r})})))};var r3=function(e){var t=e.width,r=e.height,i=e.onChange,o=e.onSwatchHover,a=e.colors,s=e.hex,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,d=(0,HY.Ay)(sJ({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),f=function(e,t){return i({hex:e,source:"hex"},t)};return n.createElement("div",{style:d.picker,className:"swatches-picker "+h},n.createElement(uJ,null,n.createElement("div",{style:d.overflow},n.createElement("div",{style:d.body},N0(a,(function(e){return n.createElement(n3,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:o})})),n.createElement("div",{style:d.clear})))))};r3.propTypes={width:hK().oneOfType([hK().string,hK().number]),height:hK().oneOfType([hK().string,hK().number]),colors:hK().arrayOf(hK().arrayOf(hK().string)),styles:hK().object},r3.defaultProps={width:320,height:240,colors:[[V0,j0,B0,F0,U0],[q0,W0,G0,H0,$0],[J0,Z0,K0,Y0,X0],[r1,n1,t1,e1,Q0],[l1,s1,a1,o1,i1],[f1,d1,h1,u1,c1],[y1,v1,g1,m1,p1],[S1,w1,_1,x1,b1],[A1,T1,M1,C1,E1],["#194D33",O1,I1,R1,P1],[z1,D1,N1,L1,k1],[V1,j1,B1,F1,U1],[q1,W1,G1,H1,$1],[J1,Z1,K1,Y1,X1],[r2,n2,t2,e2,Q1],[l2,s2,a2,o2,i2],[f2,d2,h2,u2,c2],[y2,v2,g2,m2,p2],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},_Q(r3);var i3=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,d=(0,HY.Ay)(sJ({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){gQ(e)&&t({hex:e,source:"hex"},n)};return n.createElement("div",{style:d.card,className:"twitter-picker "+h},n.createElement("div",{style:d.triangleShadow}),n.createElement("div",{style:d.triangle}),n.createElement("div",{style:d.body},N0(o,(function(e,t){return n.createElement(MQ,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.createElement("div",{style:d.hash},"#"),n.createElement(oK,{label:null,style:{input:d.input},value:i.replace("#",""),onChange:f}),n.createElement("div",{style:d.clear})))};i3.propTypes={width:hK().oneOfType([hK().string,hK().number]),triangle:hK().oneOf(["hide","top-left","top-right"]),colors:hK().arrayOf(hK().string),styles:hK().object},i3.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},_Q(i3);var o3=function(e){var t=(0,HY.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return n.createElement("div",{style:t.picker})};o3.propTypes={hsl:hK().shape({h:hK().number,s:hK().number,l:hK().number,a:hK().number})},o3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const a3=o3;var s3=function(e){var t=(0,HY.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return n.createElement("div",{style:t.picker})};s3.propTypes={hsl:hK().shape({h:hK().number,s:hK().number,l:hK().number,a:hK().number})},s3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const l3=s3,c3=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,a=e.hsv,s=function(e,n){if(e.hex)gQ(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");yQ(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");yQ(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var o=e.hsl.split(",");yQ(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},n))}},l=(0,HY.Ay)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=r.r+", "+r.g+", "+r.b,u=Math.round(i.h)+", "+Math.round(100*i.s)+"%, "+Math.round(100*i.l)+"%",h=Math.round(a.h)+", "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return n.createElement("div",{style:l.wrap,className:"flexbox-fix"},n.createElement("div",{style:l.fields},n.createElement("div",{style:l.double},n.createElement(oK,{style:{input:l.input,label:l.label},label:"hex",value:o,onChange:s})),n.createElement("div",{style:l.column},n.createElement("div",{style:l.single},n.createElement(oK,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:s})),n.createElement("div",{style:l.single},n.createElement(oK,{style:{input:l.input2,label:l.label2},label:"hsv",value:h,onChange:s})),n.createElement("div",{style:l.single},n.createElement(oK,{style:{input:l.input2,label:l.label2},label:"hsl",value:u,onChange:s})))))};var u3=function(e){var t=e.width,r=e.onChange,i=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,l=e.header,c=e.styles,u=void 0===c?{}:c,h=e.className,d=void 0===h?"":h,f=(0,HY.Ay)(sJ({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return n.createElement("div",{style:f.picker,className:"google-picker "+d},n.createElement("div",{style:f.head},l),n.createElement("div",{style:f.swatch}),n.createElement("div",{style:f.saturation},n.createElement(MJ,{hsl:o,hsv:a,pointer:a3,onChange:r})),n.createElement("div",{style:f.body},n.createElement("div",{style:f.controls,className:"flexbox-fix"},n.createElement("div",{style:f.hue},n.createElement(cK,{style:f.Hue,hsl:o,radius:"4px",pointer:l3,onChange:r}))),n.createElement(c3,{rgb:i,hsl:o,hex:s,hsv:a,onChange:r})))};function h3(e){return h3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h3(e)}function d3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d3(Object(n),!0).forEach((function(t){p3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p3(e,t,n){return(t=function(e){var t=function(e){if("object"!=h3(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=h3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h3(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g3(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}u3.propTypes={width:hK().oneOfType([hK().string,hK().number]),styles:hK().object,header:hK().string},u3.defaultProps={width:652,styles:{},header:"Color picker"},_Q(u3);var v3={r:"241",g:"112",b:"19",a:"1"};const y3=function(e){var t=m3(n.useState(!1),2),r=t[0],i=t[1],o=m3(n.useState(!1),2),a=o[0],s=o[1],l=m3(n.useState(e.color||v3),2),c=l[0],u=l[1],h=n.useRef(null);n.useEffect((function(){return u(e.color)}),[e.color]);var d=e.width||36,f=a?{bottom:"21px"}:{top:"0px"};return n.createElement("div",null,n.createElement("div",{style:b3.swatch,ref:h,onClick:function(){var e=h.current.getBoundingClientRect(),t=e.bottom>window.innerHeight-310;i(!r),s(t&&e.top>310)}},n.createElement("div",{style:f3(f3({},b3.color),{},{width:"".concat(d,"px"),background:"rgba(".concat((0,yM.map)(c,(function(e){return e})),")")})})),n.createElement("div",{style:{position:"absolute"}},r?n.createElement("div",{style:f3(f3({},b3.popover),f)},n.createElement("div",{style:b3.cover,onClick:function(){return i(!1)}}),n.createElement(K2,{color:c,onChange:function(t){var n;u(t.rgb),null===(n=e.onColorChange)||void 0===n||n.call(e,t.rgb,c,e.idx)},onChangeComplete:function(t){var n;u(t.rgb),null===(n=e.onColorChangeComplete)||void 0===n||n.call(e,t.rgb,c,e.idx)},disableAlpha:e.disableAlpha})):null))};var b3={color:{height:"14px",margin:"3px",borderRadius:"2px"},swatch:{borderRadius:"3px",border:"1px solid var(--color-controlpanel-border)",display:"inline-block",cursor:"pointer",verticalAlign:"middle"},popover:{position:"absolute",zIndex:"9999"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},x3={to:Math.round,from:Number};const _3=function(e){return n.createElement("div",{className:"viewer-control-row"},n.createElement("div",{className:"control-name"},e.label),n.createElement("div",{className:"control"},void 0===e.start?e.children:!e.hideSlider&&n.createElement(BF,{range:{min:0,max:e.max},start:e.start,connect:!0,tooltips:!0,behaviour:"drag",format:e.formatInteger?x3:void 0,onUpdate:e.onUpdate,onChange:e.onChange})))},w3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};var S3=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:w3}))};const E3=n.forwardRef(S3);function C3(){return"function"==typeof BigInt}function M3(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}function T3(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",i=r.split("."),o=i[0]||"0",a=i[1]||"0";"0"===o&&"0"===a&&(n=!1);var s=n?"-":"";return{negative:n,negativeStr:s,trimStr:r,integerStr:o,decimalStr:a,fullStr:"".concat(s).concat(r)}}function A3(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function P3(e){var t=String(e);if(A3(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return null!=r&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&I3(t)?t.length-t.indexOf(".")-1:0}function R3(e){var t=String(e);if(A3(e)){if(e>Number.MAX_SAFE_INTEGER)return String(C3()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(C3()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(P3(t))}return T3(t).fullStr}function I3(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}var O3=function(){function e(t){if(yn(this,e),Ft(this,"origin",""),Ft(this,"negative",void 0),Ft(this,"integer",void 0),Ft(this,"decimal",void 0),Ft(this,"decimalLen",void 0),Ft(this,"empty",void 0),Ft(this,"nan",void 0),M3(t))this.empty=!0;else if(this.origin=String(t),"-"===t||Number.isNaN(t))this.nan=!0;else{var n=t;if(A3(n)&&(n=Number(n)),I3(n="string"==typeof n?n:R3(n))){var r=T3(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}}return xn(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,n,r){var i=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),o=n(this.alignDecimal(i),t.alignDecimal(i)).toString(),a=r(i),s=T3(o),l=s.negativeStr,c=s.trimStr,u="".concat(l).concat(c.padStart(a+1,"0"));return new e("".concat(u.slice(0,-a),".").concat(u.slice(-a)))}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);return n.isInvalidate()?this:this.cal(n,(function(e,t){return e+t}),(function(e){return e}))}},{key:"multi",value:function(t){var n=new e(t);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,(function(e,t){return e*t}),(function(e){return 2*e}))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.origin:this.isInvalidate()?"":T3("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr}}]),e}(),k3=function(){function e(t){yn(this,e),Ft(this,"origin",""),Ft(this,"number",void 0),Ft(this,"empty",void 0),M3(t)?this.empty=!0:(this.origin=String(t),this.number=Number(t))}return xn(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var i=Math.max(P3(this.number),P3(n));return new e(r.toFixed(i))}},{key:"multi",value:function(t){var n=Number(t);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var r=this.number*n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var i=Math.max(P3(this.number),P3(n));return new e(r.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.origin:this.isInvalidate()?"":R3(this.number)}}]),e}();function L3(e){return C3()?new O3(e):new k3(e)}function N3(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var i=T3(e),o=i.negativeStr,a=i.integerStr,s=i.decimalStr,l="".concat(t).concat(s),c="".concat(o).concat(a);if(n>=0){var u=Number(s[n]);return u>=5&&!r?N3(L3(e).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-u)).toString(),t,n,r):0===n?c:"".concat(c).concat(t).concat(s.padEnd(n,"0").slice(0,n))}return".0"===l?c:"".concat(c).concat(l)}const D3=L3;function z3(e,t,n){var r=t.cloneNode(!0),i=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=n,"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},i}function U3(e,t,n,r){if(n){var i=t;"click"!==t.type?"file"===e.type||void 0===r?n(i):n(i=z3(t,e,r)):n(i=z3(t,e,""))}}function F3(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}const B3=n.forwardRef((function(e,t){var r,i,o=e.inputElement,a=e.children,s=e.prefixCls,l=e.prefix,c=e.suffix,u=e.addonBefore,h=e.addonAfter,d=e.className,f=e.style,p=e.disabled,m=e.readOnly,g=e.focused,v=e.triggerFocus,y=e.allowClear,b=e.value,x=e.handleReset,_=e.hidden,w=e.classes,S=e.classNames,E=e.dataAttrs,C=e.styles,M=e.components,T=e.onClear,A=null!=a?a:o,P=(null==M?void 0:M.affixWrapper)||"span",R=(null==M?void 0:M.groupWrapper)||"span",I=(null==M?void 0:M.wrapper)||"span",O=(null==M?void 0:M.groupAddon)||"span",k=(0,n.useRef)(null),L=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(e),N=(0,n.cloneElement)(A,{value:b,className:va()(A.props.className,!L&&(null==S?void 0:S.variant))||null}),D=(0,n.useRef)(null);if(n.useImperativeHandle(t,(function(){return{nativeElement:D.current||k.current}})),L){var z=null;if(y){var U=!p&&!m&&b,F="".concat(s,"-clear-icon"),B="object"===zt(y)&&null!=y&&y.clearIcon?y.clearIcon:"";z=n.createElement("span",{onClick:function(e){null==x||x(e),null==T||T()},onMouseDown:function(e){return e.preventDefault()},className:va()(F,Ft(Ft({},"".concat(F,"-hidden"),!U),"".concat(F,"-has-suffix"),!!c)),role:"button",tabIndex:-1},B)}var j="".concat(s,"-affix-wrapper"),V=va()(j,Ft(Ft(Ft(Ft(Ft({},"".concat(s,"-disabled"),p),"".concat(j,"-disabled"),p),"".concat(j,"-focused"),g),"".concat(j,"-readonly"),m),"".concat(j,"-input-with-clear-btn"),c&&y&&b),null==w?void 0:w.affixWrapper,null==S?void 0:S.affixWrapper,null==S?void 0:S.variant),$=(c||y)&&n.createElement("span",{className:va()("".concat(s,"-suffix"),null==S?void 0:S.suffix),style:null==C?void 0:C.suffix},z,c);N=n.createElement(P,nr({className:V,style:null==C?void 0:C.affixWrapper,onClick:function(e){var t;null!==(t=k.current)&&void 0!==t&&t.contains(e.target)&&(null==v||v())}},null==E?void 0:E.affixWrapper,{ref:k}),l&&n.createElement("span",{className:va()("".concat(s,"-prefix"),null==S?void 0:S.prefix),style:null==C?void 0:C.prefix},l),N,$)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(e)){var H="".concat(s,"-group"),G="".concat(H,"-addon"),W="".concat(H,"-wrapper"),q=va()("".concat(s,"-wrapper"),H,null==w?void 0:w.wrapper,null==S?void 0:S.wrapper),X=va()(W,Ft({},"".concat(W,"-disabled"),p),null==w?void 0:w.group,null==S?void 0:S.groupWrapper);N=n.createElement(R,{className:X,ref:D},n.createElement(I,{className:q},u&&n.createElement(O,{className:G},u),N,h&&n.createElement(O,{className:G},h)))}return n.cloneElement(N,{className:va()(null===(r=N.props)||void 0===r?void 0:r.className,d)||null,style:Xt(Xt({},null===(i=N.props)||void 0===i?void 0:i.style),f),hidden:_})}));var j3=["show"];function V3(e,t){return n.useMemo((function(){var n={};t&&(n.show="object"===zt(t)&&t.formatter?t.formatter:!!t);var r=n=Xt(Xt({},n),e),i=r.show,o=Ca(r,j3);return Xt(Xt({},o),{},{show:!!i,showFormatter:"function"==typeof i?i:void 0,strategy:o.strategy||function(e){return e.length}})}),[e,t])}var $3=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"];const H3=(0,n.forwardRef)((function(e,t){var r=e.autoComplete,i=e.onChange,o=e.onFocus,a=e.onBlur,s=e.onPressEnter,l=e.onKeyDown,c=e.onKeyUp,u=e.prefixCls,h=void 0===u?"rc-input":u,d=e.disabled,f=e.htmlSize,p=e.className,m=e.maxLength,g=e.suffix,v=e.showCount,y=e.count,b=e.type,x=void 0===b?"text":b,_=e.classes,w=e.classNames,S=e.styles,E=e.onCompositionStart,C=e.onCompositionEnd,M=Ca(e,$3),T=Ht((0,n.useState)(!1),2),A=T[0],P=T[1],R=(0,n.useRef)(!1),I=(0,n.useRef)(!1),O=(0,n.useRef)(null),k=(0,n.useRef)(null),L=function(e){O.current&&F3(O.current,e)},N=Ht(Ba(e.defaultValue,{value:e.value}),2),D=N[0],z=N[1],U=null==D?"":String(D),F=Ht((0,n.useState)(null),2),B=F[0],j=F[1],V=V3(y,v),$=V.max||m,H=V.strategy(U),G=!!$&&H>$;(0,n.useImperativeHandle)(t,(function(){var e;return{focus:L,blur:function(){var e;null===(e=O.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=O.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=O.current)||void 0===e||e.select()},input:O.current,nativeElement:(null===(e=k.current)||void 0===e?void 0:e.nativeElement)||O.current}})),(0,n.useEffect)((function(){I.current&&(I.current=!1),P((function(e){return(!e||!d)&&e}))}),[d]);var W=function(e,t,n){var r,o,a=t;if(!R.current&&V.exceedFormatter&&V.max&&V.strategy(t)>V.max)t!==(a=V.exceedFormatter(t,{max:V.max}))&&j([(null===(r=O.current)||void 0===r?void 0:r.selectionStart)||0,(null===(o=O.current)||void 0===o?void 0:o.selectionEnd)||0]);else if("compositionEnd"===n.source)return;z(a),O.current&&U3(O.current,e,i,a)};(0,n.useEffect)((function(){var e;B&&(null===(e=O.current)||void 0===e||e.setSelectionRange.apply(e,Wt(B)))}),[B]);var q,X=G&&"".concat(h,"-out-of-range");return n.createElement(B3,nr({},M,{prefixCls:h,className:va()(p,X),handleReset:function(e){z(""),L(),O.current&&U3(O.current,e,i)},value:U,focused:A,triggerFocus:L,suffix:function(){var e=Number($)>0;if(g||V.show){var t=V.showFormatter?V.showFormatter({value:U,count:H,maxLength:$}):"".concat(H).concat(e?" / ".concat($):"");return n.createElement(n.Fragment,null,V.show&&n.createElement("span",{className:va()("".concat(h,"-show-count-suffix"),Ft({},"".concat(h,"-show-count-has-suffix"),!!g),null==w?void 0:w.count),style:Xt({},null==S?void 0:S.count)},t),g)}return null}(),disabled:d,classes:_,classNames:w,styles:S}),(q=rC(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),n.createElement("input",nr({autoComplete:r},q,{onChange:function(e){W(e,e.target.value,{source:"change"})},onFocus:function(e){P(!0),null==o||o(e)},onBlur:function(e){I.current&&(I.current=!1),P(!1),null==a||a(e)},onKeyDown:function(e){s&&"Enter"===e.key&&!I.current&&(I.current=!0,s(e)),null==l||l(e)},onKeyUp:function(e){"Enter"===e.key&&(I.current=!1),null==c||c(e)},className:va()(h,Ft({},"".concat(h,"-disabled"),d),null==w?void 0:w.input),style:null==S?void 0:S.input,ref:O,size:f,type:x,onCompositionStart:function(e){R.current=!0,null==E||E(e)},onCompositionEnd:function(e){R.current=!1,W(e,e.currentTarget.value,{source:"compositionEnd"}),null==C||C(e)}}))))}));function G3(e){var t=e.prefixCls,r=e.upNode,i=e.downNode,o=e.upDisabled,a=e.downDisabled,s=e.onStep,l=n.useRef(),c=n.useRef([]),u=n.useRef();u.current=s;var h,d,f,p=function(){clearTimeout(l.current)},m=function(e,t){e.preventDefault(),p(),u.current(t),l.current=setTimeout((function e(){u.current(t),l.current=setTimeout(e,200)}),600)};if(n.useEffect((function(){return function(){p(),c.current.forEach((function(e){return bs.cancel(e)}))}}),[]),h=Ht((0,n.useState)(!1),2),d=h[0],f=h[1],Wn((function(){f(nN())}),[]),d)return null;var g="".concat(t,"-handler"),v=va()(g,"".concat(g,"-up"),Ft({},"".concat(g,"-up-disabled"),o)),y=va()(g,"".concat(g,"-down"),Ft({},"".concat(g,"-down-disabled"),a)),b=function(){return c.current.push(bs(p))},x={unselectable:"on",role:"button",onMouseUp:b,onMouseLeave:b};return n.createElement("div",{className:"".concat(g,"-wrap")},n.createElement("span",nr({},x,{onMouseDown:function(e){m(e,!0)},"aria-label":"Increase Value","aria-disabled":o,className:v}),r||n.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),n.createElement("span",nr({},x,{onMouseDown:function(e){m(e,!1)},"aria-label":"Decrease Value","aria-disabled":a,className:y}),i||n.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function W3(e){var t="number"==typeof e?R3(e):T3(e).fullStr;return t.includes(".")?T3(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}var q3=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],X3=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Y3=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},K3=function(e){var t=D3(e);return t.isInvalidate()?null:t},Z3=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.className,o=e.style,a=e.min,s=e.max,l=e.step,c=void 0===l?1:l,u=e.defaultValue,h=e.value,d=e.disabled,f=e.readOnly,p=e.upHandler,m=e.downHandler,g=e.keyboard,v=e.changeOnWheel,y=void 0!==v&&v,b=e.controls,x=void 0===b||b,_=(e.classNames,e.stringMode),w=e.parser,S=e.formatter,E=e.precision,C=e.decimalSeparator,M=e.onChange,T=e.onInput,A=e.onPressEnter,P=e.onStep,R=e.changeOnBlur,I=void 0===R||R,O=e.domRef,k=Ca(e,q3),L="".concat(r,"-input"),N=n.useRef(null),D=Ht(n.useState(!1),2),z=D[0],U=D[1],F=n.useRef(!1),B=n.useRef(!1),j=n.useRef(!1),V=Ht(n.useState((function(){return D3(null!=h?h:u)})),2),$=V[0],H=V[1],G=n.useCallback((function(e,t){if(!t)return E>=0?E:Math.max(P3(e),P3(c))}),[E,c]),W=n.useCallback((function(e){var t=String(e);if(w)return w(t);var n=t;return C&&(n=n.replace(C,".")),n.replace(/[^\w.-]+/g,"")}),[w,C]),q=n.useRef(""),X=n.useCallback((function(e,t){if(S)return S(e,{userTyping:t,input:String(q.current)});var n="number"==typeof e?R3(e):e;if(!t){var r=G(n,t);I3(n)&&(C||r>=0)&&(n=N3(n,C||".",r))}return n}),[S,G,C]),Y=Ht(n.useState((function(){var e=null!=u?u:h;return $.isInvalidate()&&["string","number"].includes(zt(e))?Number.isNaN(e)?"":e:X($.toString(),!1)})),2),K=Y[0],Z=Y[1];function J(e,t){Z(X(e.isInvalidate()?e.toString(!1):e.toString(!t),t))}q.current=K;var Q,ee,te,ne,re,ie=n.useMemo((function(){return K3(s)}),[s,E]),oe=n.useMemo((function(){return K3(a)}),[a,E]),ae=n.useMemo((function(){return!(!ie||!$||$.isInvalidate())&&ie.lessEquals($)}),[ie,$]),se=n.useMemo((function(){return!(!oe||!$||$.isInvalidate())&&$.lessEquals(oe)}),[oe,$]),le=(Q=N.current,ee=z,te=(0,n.useRef)(null),[function(){try{var e=Q.selectionStart,t=Q.selectionEnd,n=Q.value,r=n.substring(0,e),i=n.substring(t);te.current={start:e,end:t,value:n,beforeTxt:r,afterTxt:i}}catch(e){}},function(){if(Q&&te.current&&ee)try{var e=Q.value,t=te.current,n=t.beforeTxt,r=t.afterTxt,i=t.start,o=e.length;if(e.startsWith(n))o=n.length;else if(e.endsWith(r))o=e.length-te.current.afterTxt.length;else{var a=n[i-1],s=e.indexOf(a,i-1);-1!==s&&(o=s+1)}Q.setSelectionRange(o,o)}catch(e){gn(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(e.message))}}]),ce=Ht(le,2),ue=ce[0],he=ce[1],de=function(e){return ie&&!e.lessEquals(ie)?ie:oe&&!oe.lessEquals(e)?oe:null},fe=function(e){return!de(e)},pe=function(e,t){var n=e,r=fe(n)||n.isEmpty();if(n.isEmpty()||t||(n=de(n)||n,r=!0),!f&&!d&&r){var i=n.toString(),o=G(i,t);return o>=0&&(n=D3(N3(i,".",o)),fe(n)||(n=D3(N3(i,".",o,!0)))),n.equals($)||(void 0===h&&H(n),null==M||M(n.isEmpty()?null:Y3(_,n)),void 0===h&&J(n,t)),n}return $},me=(ne=(0,n.useRef)(0),re=function(){bs.cancel(ne.current)},(0,n.useEffect)((function(){return re}),[]),function(e){re(),ne.current=bs((function(){e()}))}),ge=function e(t){if(ue(),q.current=t,Z(t),!B.current){var n=W(t),r=D3(n);r.isNaN()||pe(r,!0)}null==T||T(t),me((function(){var n=t;w||(n=t.replace(//g,".")),n!==t&&e(n)}))},ve=function(e){var t;if(!(e&&ae||!e&&se)){F.current=!1;var n=D3(j.current?W3(c):c);e||(n=n.negate());var r=($||D3(0)).add(n.toString()),i=pe(r,!1);null==P||P(Y3(_,i),{offset:j.current?W3(c):c,type:e?"up":"down"}),null===(t=N.current)||void 0===t||t.focus()}},ye=function(e){var t,n=D3(W(K));t=n.isNaN()?pe($,e):pe(n,e),void 0!==h?J($,!1):t.isNaN()||J(t,!1)};return n.useEffect((function(){if(y&&z){var e=function(e){ve(e.deltaY<0),e.preventDefault()},t=N.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),function(){return t.removeEventListener("wheel",e)}}})),Gn((function(){$.isInvalidate()||J($,!1)}),[E,S]),Gn((function(){var e=D3(h);H(e);var t=D3(W(K));e.equals(t)&&F.current&&!S||J(e,F.current)}),[h]),Gn((function(){S&&he()}),[K]),n.createElement("div",{ref:O,className:va()(r,i,Ft(Ft(Ft(Ft(Ft({},"".concat(r,"-focused"),z),"".concat(r,"-disabled"),d),"".concat(r,"-readonly"),f),"".concat(r,"-not-a-number"),$.isNaN()),"".concat(r,"-out-of-range"),!$.isInvalidate()&&!fe($))),style:o,onFocus:function(){U(!0)},onBlur:function(){I&&ye(!1),U(!1),F.current=!1},onKeyDown:function(e){var t=e.key,n=e.shiftKey;F.current=!0,j.current=n,"Enter"===t&&(B.current||(F.current=!1),ye(!1),null==A||A(e)),!1!==g&&!B.current&&["Up","ArrowUp","Down","ArrowDown"].includes(t)&&(ve("Up"===t||"ArrowUp"===t),e.preventDefault())},onKeyUp:function(){F.current=!1,j.current=!1},onCompositionStart:function(){B.current=!0},onCompositionEnd:function(){B.current=!1,ge(N.current.value)},onBeforeInput:function(){F.current=!0}},x&&n.createElement(G3,{prefixCls:r,upNode:p,downNode:m,upDisabled:ae,downDisabled:se,onStep:ve}),n.createElement("div",{className:"".concat(L,"-wrap")},n.createElement("input",nr({autoComplete:"off",role:"spinbutton","aria-valuemin":a,"aria-valuemax":s,"aria-valuenow":$.isInvalidate()?null:$.toString(),step:c},k,{ref:wa(N,t),className:L,value:K,onChange:function(e){ge(e.target.value)},disabled:d,readOnly:f}))))}));const J3=n.forwardRef((function(e,t){var r=e.disabled,i=e.style,o=e.prefixCls,a=void 0===o?"rc-input-number":o,s=e.value,l=e.prefix,c=e.suffix,u=e.addonBefore,h=e.addonAfter,d=e.className,f=e.classNames,p=Ca(e,X3),m=n.useRef(null),g=n.useRef(null),v=n.useRef(null),y=function(e){v.current&&F3(v.current,e)};return n.useImperativeHandle(t,(function(){return e=v.current,t={focus:y,nativeElement:m.current.nativeElement||g.current},"undefined"!=typeof Proxy&&e?new Proxy(e,{get:function(e,n){if(t[n])return t[n];var r=e[n];return"function"==typeof r?r.bind(e):r}}):e;var e,t})),n.createElement(B3,{className:d,triggerFocus:y,prefixCls:a,value:s,disabled:r,style:i,prefix:l,suffix:c,addonAfter:h,addonBefore:u,classNames:f,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:m},n.createElement(Z3,nr({prefixCls:a,disabled:r,ref:v,domRef:g,className:null==f?void 0:f.input},p)))})),Q3=(e,t)=>{let{componentCls:n,borderRadiusSM:r,borderRadiusLG:i}=e;const o="lg"===t?i:r;return{[`&-${t}`]:{[`${n}-handler-wrap`]:{borderStartEndRadius:o,borderEndEndRadius:o},[`${n}-handler-up`]:{borderStartEndRadius:o},[`${n}-handler-down`]:{borderEndEndRadius:o}}}},e5=e=>{const{componentCls:t,lineWidth:n,lineType:r,borderRadius:i,inputFontSizeSM:o,inputFontSizeLG:a,controlHeightLG:s,controlHeightSM:l,colorError:c,paddingInlineSM:u,paddingBlockSM:h,paddingBlockLG:d,paddingInlineLG:f,colorTextDescription:p,motionDurationMid:m,handleHoverColor:g,handleOpacity:v,paddingInline:y,paddingBlock:b,handleBg:x,handleActiveBg:_,colorTextDisabled:w,borderRadiusSM:S,borderRadiusLG:E,controlWidth:C,handleBorderColor:M,filledHandleBg:T,lineHeightLG:A,calc:P}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),NX(e)),{display:"inline-block",width:C,margin:0,padding:0,borderRadius:i}),SX(e,{[`${t}-handler-wrap`]:{background:x,[`${t}-handler-down`]:{borderBlockStart:`${Un(n)} ${r} ${M}`}}})),PX(e,{[`${t}-handler-wrap`]:{background:T,[`${t}-handler-down`]:{borderBlockStart:`${Un(n)} ${r} ${M}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:x}}})),MX(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:a,lineHeight:A,borderRadius:E,[`input${t}-input`]:{height:P(s).sub(P(n).mul(2)).equal(),padding:`${Un(d)} ${Un(f)}`}},"&-sm":{padding:0,fontSize:o,borderRadius:S,[`input${t}-input`]:{height:P(l).sub(P(n).mul(2)).equal(),padding:`${Un(h)} ${Un(u)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:c}}},"&-group":Object.assign(Object.assign(Object.assign({},Bs(e)),DX(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:E,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:S}}},CX(e)),IX(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Bs(e)),{width:"100%",padding:`${Un(b)} ${Un(y)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${m} linear`,appearance:"textfield",fontSize:"inherit"}),OX(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:v,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${m}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`\n              ${t}-handler-up-inner,\n              ${t}-handler-down-inner\n            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:p,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${Un(n)} ${r} ${M}`,transition:`all ${m} linear`,"&:active":{background:_},"&:hover":{height:"60%",[`\n              ${t}-handler-up-inner,\n              ${t}-handler-down-inner\n            `]:{color:g}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{color:p,transition:`all ${m} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}},Q3(e,"lg")),Q3(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`\n          ${t}-handler-up-disabled,\n          ${t}-handler-down-disabled\n        `]:{cursor:"not-allowed"},[`\n          ${t}-handler-up-disabled:hover &-handler-up-inner,\n          ${t}-handler-down-disabled:hover &-handler-down-inner\n        `]:{color:w}})}]},t5=e=>{const{componentCls:t,paddingBlock:n,paddingInline:r,inputAffixPadding:i,controlWidth:o,borderRadiusLG:a,borderRadiusSM:s,paddingInlineLG:l,paddingInlineSM:c,paddingBlockLG:u,paddingBlockSM:h,motionDurationMid:d}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${Un(n)} 0`}},NX(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:o,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:a,paddingInlineStart:l,[`input${t}-input`]:{padding:`${Un(u)} 0`}},"&-sm":{borderRadius:s,paddingInlineStart:c,[`input${t}-input`]:{padding:`${Un(h)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:i,transition:`margin ${d}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(r).equal()}})}},n5=YC("InputNumber",(e=>{const t=$C(e,vX(e));return[e5(t),t5(t),mF(t)]}),(e=>{var t;const n=null!==(t=e.handleVisible)&&void 0!==t?t:"auto",r=e.controlHeightSM-2*e.lineWidth;return Object.assign(Object.assign({},yX(e)),{controlWidth:90,handleWidth:r,handleFontSize:e.fontSize/2,handleVisible:n,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new ro(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:!0===n?1:0,handleVisibleWidth:!0===n?r:0})}),{unitless:{handleOpacity:!0}});const r5=n.forwardRef(((e,t)=>{const{getPrefixCls:r,direction:i}=n.useContext(ia),o=n.useRef(null);n.useImperativeHandle(t,(()=>o.current));const{className:a,rootClassName:s,size:l,disabled:c,prefixCls:u,addonBefore:h,addonAfter:d,prefix:f,suffix:p,bordered:m,readOnly:g,status:v,controls:y,variant:b}=e,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),_=r("input-number",u),w=pV(_),[S,E,C]=n5(_,w),{compactSize:M,compactItemClassnames:T}=tz(_,i);let A=n.createElement(E3,{className:`${_}-handler-up-inner`}),P=n.createElement(aX,{className:`${_}-handler-down-inner`});const R="boolean"==typeof y?y:void 0;"object"==typeof y&&(A=void 0===y.upIcon?A:n.createElement("span",{className:`${_}-handler-up-inner`},y.upIcon),P=void 0===y.downIcon?P:n.createElement("span",{className:`${_}-handler-down-inner`},y.downIcon));const{hasFeedback:I,status:O,isFormItemInput:k,feedbackIcon:L}=n.useContext(GD),N=Aq(O,v),D=XD((e=>{var t;return null!==(t=null!=l?l:M)&&void 0!==t?t:e})),z=n.useContext(ca),U=null!=c?c:z,[F,B]=Pq("inputNumber",b,m),j=I&&n.createElement(n.Fragment,null,L),V=va()({[`${_}-lg`]:"large"===D,[`${_}-sm`]:"small"===D,[`${_}-rtl`]:"rtl"===i,[`${_}-in-form-item`]:k},E),$=`${_}-group`;return S(n.createElement(J3,Object.assign({ref:o,disabled:U,className:va()(C,w,a,s,T),upHandler:A,downHandler:P,prefixCls:_,readOnly:g,controls:R,prefix:f,suffix:j||p,addonBefore:h&&n.createElement(iz,{form:!0,space:!0},h),addonAfter:d&&n.createElement(iz,{form:!0,space:!0},d),classNames:{input:V,variant:va()({[`${_}-${F}`]:B},Tq(_,N,I)),affixWrapper:va()({[`${_}-affix-wrapper-sm`]:"small"===D,[`${_}-affix-wrapper-lg`]:"large"===D,[`${_}-affix-wrapper-rtl`]:"rtl"===i,[`${_}-affix-wrapper-without-controls`]:!1===y},E),wrapper:va()({[`${$}-rtl`]:"rtl"===i},E),groupWrapper:va()({[`${_}-group-wrapper-sm`]:"small"===D,[`${_}-group-wrapper-lg`]:"large"===D,[`${_}-group-wrapper-rtl`]:"rtl"===i,[`${_}-group-wrapper-${F}`]:B},Tq(`${_}-group-wrapper`,N,I),E)}},x)))})),i5=r5;i5._InternalPanelDoNotUseOrYouWillBeFired=e=>n.createElement(tl,{theme:{components:{InputNumber:{handleVisible:!0}}}},n.createElement(r5,Object.assign({},e)));const o5=i5;function a5(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s5(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function l5(e){let t,n,r;function i(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=a5,n=(t,n)=>a5(e(t),n),r=(t,n)=>e(t)-n):(t=e===a5||e===s5?e:c5,n=e,r=e),{left:i,center:function(e,t,n=0,o=e.length){const a=i(e,t,n,o-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function c5(){return 0}function u5(e){return e}var h5=1e-6;function d5(e){return"translate("+e+",0)"}function f5(e){return"translate(0,"+e+")"}function p5(e){return t=>+e(t)}function m5(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function g5(){return!this.__axis}function v5(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",h=1===e||3===e?d5:f5;function d(d){var f=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):u5:i,m=Math.max(o,0)+s,g=t.range(),v=+g[0]+l,y=+g[g.length-1]+l,b=(t.bandwidth?m5:p5)(t.copy(),l),x=d.selection?d.selection():d,_=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(f,t).order(),S=w.exit(),E=w.enter().append("g").attr("class","tick"),C=w.select("line"),M=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(E),C=C.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),M=M.merge(E.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==x&&(_=_.transition(d),w=w.transition(d),C=C.transition(d),M=M.transition(d),S=S.transition(d).attr("opacity",h5).attr("transform",(function(e){return isFinite(e=b(e))?h(e+l):this.getAttribute("transform")})),E.attr("opacity",h5).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+l)}))),S.remove(),_.attr("d",4===e||2===e?a?"M"+c*a+","+v+"H"+l+"V"+y+"H"+c*a:"M"+l+","+v+"V"+y:a?"M"+v+","+c*a+"V"+l+"H"+y+"V"+c*a:"M"+v+","+l+"H"+y),w.attr("opacity",1).attr("transform",(function(e){return h(b(e)+l)})),C.attr(u+"2",c*o),M.attr(u,c*m).text(p),x.filter(g5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),x.each((function(){this.__axis=b}))}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),d):r&&r.slice()},d.tickFormat=function(e){return arguments.length?(i=e,d):i},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d.offset=function(e){return arguments.length?(l=+e,d):l},d}function y5(){}function b5(e){return null==e?y5:function(){return this.querySelector(e)}}function x5(){return[]}function _5(e){return null==e?x5:function(){return this.querySelectorAll(e)}}function w5(e){return function(){return this.matches(e)}}function S5(e){return function(t){return t.matches(e)}}var E5=Array.prototype.find;function C5(){return this.firstElementChild}var M5=Array.prototype.filter;function T5(){return Array.from(this.children)}function A5(e){return new Array(e.length)}function P5(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function R5(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new P5(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function I5(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new P5(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function O5(e){return e.__data__}function k5(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function L5(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}P5.prototype={constructor:P5,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var N5="http://www.w3.org/1999/xhtml";const D5={svg:"http://www.w3.org/2000/svg",xhtml:N5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z5(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),D5.hasOwnProperty(t)?{space:D5[t],local:e}:e}function U5(e){return function(){this.removeAttribute(e)}}function F5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B5(e,t){return function(){this.setAttribute(e,t)}}function j5(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function V5(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function $5(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function H5(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G5(e){return function(){this.style.removeProperty(e)}}function W5(e,t,n){return function(){this.style.setProperty(e,t,n)}}function q5(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function X5(e,t){return e.style.getPropertyValue(t)||H5(e).getComputedStyle(e,null).getPropertyValue(t)}function Y5(e){return function(){delete this[e]}}function K5(e,t){return function(){this[e]=t}}function Z5(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function J5(e){return e.trim().split(/^|\s+/)}function Q5(e){return e.classList||new e4(e)}function e4(e){this._node=e,this._names=J5(e.getAttribute("class")||"")}function t4(e,t){for(var n=Q5(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function n4(e,t){for(var n=Q5(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function r4(e){return function(){t4(this,e)}}function i4(e){return function(){n4(this,e)}}function o4(e,t){return function(){(t.apply(this,arguments)?t4:n4)(this,e)}}function a4(){this.textContent=""}function s4(e){return function(){this.textContent=e}}function l4(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function c4(){this.innerHTML=""}function u4(e){return function(){this.innerHTML=e}}function h4(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function d4(){this.nextSibling&&this.parentNode.appendChild(this)}function f4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p4(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===N5&&t.documentElement.namespaceURI===N5?t.createElement(e):t.createElementNS(n,e)}}function m4(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function g4(e){var t=z5(e);return(t.local?m4:p4)(t)}function v4(){return null}function y4(){var e=this.parentNode;e&&e.removeChild(this)}function b4(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function x4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _4(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function w4(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function S4(e,t,n){var r=H5(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function E4(e,t){return function(){return S4(this,e,t)}}function C4(e,t){return function(){return S4(this,e,t.apply(this,arguments))}}e4.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var M4=[null];function T4(e,t){this._groups=e,this._parents=t}function A4(){return new T4([[document.documentElement]],M4)}T4.prototype=A4.prototype={constructor:T4,select:function(e){"function"!=typeof e&&(e=b5(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new T4(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):_5(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new T4(r,i)},selectChild:function(e){return this.select(null==e?C5:function(e){return function(){return E5.call(this.children,e)}}("function"==typeof e?e:S5(e)))},selectChildren:function(e){return this.selectAll(null==e?T5:function(e){return function(){return M5.call(this.children,e)}}("function"==typeof e?e:S5(e)))},filter:function(e){"function"!=typeof e&&(e=w5(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new T4(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,O5);var n,r=t?I5:R5,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p=k5(e.call(h,h&&h.__data__,u,i)),m=p.length,g=l[u]=new Array(m),v=s[u]=new Array(m);r(h,d,g,v,c[u]=new Array(f),p,t);for(var y,b,x=0,_=0;x<m;++x)if(y=g[x]){for(x>=_&&(_=x+1);!(b=v[_])&&++_<m;);y._next=b||null}}return(s=new T4(s,i))._enter=l,s._exit=c,s},enter:function(){return new T4(this._enter||this._groups.map(A5),this._parents)},exit:function(){return new T4(this._exit||this._groups.map(A5),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,f=s[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)s[l]=n[l];return new T4(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=L5);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new T4(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=z5(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?F5:U5:"function"==typeof t?n.local?$5:V5:n.local?j5:B5)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?G5:"function"==typeof t?q5:W5)(e,t,null==n?"":n)):X5(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Y5:"function"==typeof t?Z5:K5)(e,t)):this.node()[e]},classed:function(e,t){var n=J5(e+"");if(arguments.length<2){for(var r=Q5(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?o4:t?r4:i4)(n,t))},text:function(e){return arguments.length?this.each(null==e?a4:("function"==typeof e?l4:s4)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?c4:("function"==typeof e?h4:u4)(e)):this.node().innerHTML},raise:function(){return this.each(d4)},lower:function(){return this.each(f4)},append:function(e){var t="function"==typeof e?e:g4(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:g4(e),r=null==t?v4:"function"==typeof t?t:b5(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(y4)},clone:function(e){return this.select(e?x4:b4)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?w4:_4,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?C4:E4)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const P4=A4;var R4={value:()=>{}};function I4(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new O4(r)}function O4(e){this._=e}function k4(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function L4(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=R4,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}O4.prototype=I4.prototype={constructor:O4,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=L4(i[n],e.name,t);else if(null==t)for(n in i)i[n]=L4(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=k4(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new O4(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const N4=I4;var D4,z4,U4=0,F4=0,B4=0,j4=0,V4=0,$4=0,H4="object"==typeof performance&&performance.now?performance:Date,G4="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function W4(){return V4||(G4(q4),V4=H4.now()+$4)}function q4(){V4=0}function X4(){this._call=this._time=this._next=null}function Y4(e,t,n){var r=new X4;return r.restart(e,t,n),r}function K4(){V4=(j4=H4.now())+$4,U4=F4=0;try{!function(){W4(),++U4;for(var e,t=D4;t;)(e=V4-t._time)>=0&&t._call.call(void 0,e),t=t._next;--U4}()}finally{U4=0,function(){for(var e,t,n=D4,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:D4=t);z4=e,J4(r)}(),V4=0}}function Z4(){var e=H4.now(),t=e-j4;t>1e3&&($4-=t,j4=e)}function J4(e){U4||(F4&&(F4=clearTimeout(F4)),e-V4>24?(e<1/0&&(F4=setTimeout(K4,e-H4.now()-$4)),B4&&(B4=clearInterval(B4))):(B4||(j4=H4.now(),B4=setInterval(Z4,1e3)),U4=1,G4(K4)))}function Q4(e,t,n){var r=new X4;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}X4.prototype=Y4.prototype={constructor:X4,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?W4():+n)+(null==t?0:+t),this._next||z4===this||(z4?z4._next=this:D4=this,z4=this),this._call=e,this._time=n,J4()},stop:function(){this._call&&(this._call=null,this._time=1/0,J4())}};var e6=N4("start","end","cancel","interrupt"),t6=[];function n6(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(l){var c,u,h,d;if(1!==n.state)return s();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return Q4(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(Q4((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Y4((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:e6,tween:t6,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function r6(e,t){var n=o6(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function i6(e,t){var n=o6(e,t);if(n.state>3)throw new Error("too late; already running");return n}function o6(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function a6(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var s6,l6=180/Math.PI,c6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function u6(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*l6,skewX:Math.atan(l)*l6,scaleX:a,scaleY:s}}function h6(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:a6(e,i)},{i:l-2,x:a6(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:a6(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:a6(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:a6(e,n)},{i:s-2,x:a6(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var d6=h6((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?c6:u6(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),f6=h6((function(e){return null==e?c6:(s6||(s6=document.createElementNS("http://www.w3.org/2000/svg","g")),s6.setAttribute("transform",e),(e=s6.transform.baseVal.consolidate())?u6((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):c6)}),", ",")",")");function p6(e,t){var n,r;return function(){var i=i6(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function m6(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=i6(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function g6(e,t,n){var r=e._id;return e.each((function(){var e=i6(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return o6(e,r).value[t]}}function v6(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function y6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function b6(){}var x6=.7,_6=1/x6,w6="\\s*([+-]?\\d+)\\s*",S6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",E6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C6=/^#([0-9a-f]{3,8})$/,M6=new RegExp(`^rgb\\(${w6},${w6},${w6}\\)$`),T6=new RegExp(`^rgb\\(${E6},${E6},${E6}\\)$`),A6=new RegExp(`^rgba\\(${w6},${w6},${w6},${S6}\\)$`),P6=new RegExp(`^rgba\\(${E6},${E6},${E6},${S6}\\)$`),R6=new RegExp(`^hsl\\(${S6},${E6},${E6}\\)$`),I6=new RegExp(`^hsla\\(${S6},${E6},${E6},${S6}\\)$`),O6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function k6(){return this.rgb().formatHex()}function L6(){return this.rgb().formatRgb()}function N6(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=C6.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?D6(t):3===n?new F6(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?z6(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?z6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=M6.exec(e))?new F6(t[1],t[2],t[3],1):(t=T6.exec(e))?new F6(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=A6.exec(e))?z6(t[1],t[2],t[3],t[4]):(t=P6.exec(e))?z6(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=R6.exec(e))?G6(t[1],t[2]/100,t[3]/100,1):(t=I6.exec(e))?G6(t[1],t[2]/100,t[3]/100,t[4]):O6.hasOwnProperty(e)?D6(O6[e]):"transparent"===e?new F6(NaN,NaN,NaN,0):null}function D6(e){return new F6(e>>16&255,e>>8&255,255&e,1)}function z6(e,t,n,r){return r<=0&&(e=t=n=NaN),new F6(e,t,n,r)}function U6(e,t,n,r){return 1===arguments.length?((i=e)instanceof b6||(i=N6(i)),i?new F6((i=i.rgb()).r,i.g,i.b,i.opacity):new F6):new F6(e,t,n,null==r?1:r);var i}function F6(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function B6(){return`#${H6(this.r)}${H6(this.g)}${H6(this.b)}`}function j6(){const e=V6(this.opacity);return`${1===e?"rgb(":"rgba("}${$6(this.r)}, ${$6(this.g)}, ${$6(this.b)}${1===e?")":`, ${e})`}`}function V6(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $6(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function H6(e){return((e=$6(e))<16?"0":"")+e.toString(16)}function G6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new q6(e,t,n,r)}function W6(e){if(e instanceof q6)return new q6(e.h,e.s,e.l,e.opacity);if(e instanceof b6||(e=N6(e)),!e)return new q6;if(e instanceof q6)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new q6(a,s,l,e.opacity)}function q6(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function X6(e){return(e=(e||0)%360)<0?e+360:e}function Y6(e){return Math.max(0,Math.min(1,e||0))}function K6(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Z6(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}v6(b6,N6,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:k6,formatHex:k6,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return W6(this).formatHsl()},formatRgb:L6,toString:L6}),v6(F6,U6,y6(b6,{brighter(e){return e=null==e?_6:Math.pow(_6,e),new F6(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?x6:Math.pow(x6,e),new F6(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new F6($6(this.r),$6(this.g),$6(this.b),V6(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B6,formatHex:B6,formatHex8:function(){return`#${H6(this.r)}${H6(this.g)}${H6(this.b)}${H6(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:j6,toString:j6})),v6(q6,(function(e,t,n,r){return 1===arguments.length?W6(e):new q6(e,t,n,null==r?1:r)}),y6(b6,{brighter(e){return e=null==e?_6:Math.pow(_6,e),new q6(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?x6:Math.pow(x6,e),new q6(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new F6(K6(e>=240?e-240:e+120,i,r),K6(e,i,r),K6(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new q6(X6(this.h),Y6(this.s),Y6(this.l),V6(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=V6(this.opacity);return`${1===e?"hsl(":"hsla("}${X6(this.h)}, ${100*Y6(this.s)}%, ${100*Y6(this.l)}%${1===e?")":`, ${e})`}`}}));const J6=e=>()=>e;function Q6(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):J6(isNaN(e)?t:e)}const e8=function e(t){var n=function(e){return 1==(e=+e)?Q6:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):J6(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=U6(e)).r,(t=U6(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Q6(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function t8(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=U6(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}t8((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Z6((n-r/t)*t,a,i,o,s)}})),t8((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Z6((n-r/t)*t,i,o,a,s)}}));var n8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r8=new RegExp(n8.source,"g");function i8(e,t){var n,r,i,o=n8.lastIndex=r8.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=n8.exec(e))&&(r=r8.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:a6(n,r)})),o=r8.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function o8(e,t){var n;return("number"==typeof t?a6:t instanceof N6?e8:(n=N6(t))?(t=n,e8):i8)(e,t)}function a8(e){return function(){this.removeAttribute(e)}}function s8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l8(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function c8(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function u8(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function h8(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function d8(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function f8(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function p8(e,t){return function(){r6(this,e).delay=+t.apply(this,arguments)}}function m8(e,t){return t=+t,function(){r6(this,e).delay=t}}function g8(e,t){return function(){i6(this,e).duration=+t.apply(this,arguments)}}function v8(e,t){return t=+t,function(){i6(this,e).duration=t}}var y8=P4.prototype.constructor;function b8(e){return function(){this.style.removeProperty(e)}}var x8=0;function _8(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function w8(){return++x8}var S8=P4.prototype;_8.prototype=function(e){return P4().transition(e)}.prototype={constructor:_8,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=b5(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=e.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,n6(h[d],t,n,d,h,o6(s,n)));return new _8(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_5(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=e.call(l,l.__data__,h,c),p=o6(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&n6(d,t,n,m,f,p);o.push(f),a.push(l)}return new _8(o,a,t,n)},selectChild:S8.selectChild,selectChildren:S8.selectChildren,filter:function(e){"function"!=typeof e&&(e=w5(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new _8(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new _8(a,this._parents,this._name,this._id)},selection:function(){return new y8(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=w8(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=o6(a,t);n6(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new _8(r,this._parents,e,n)},call:S8.call,nodes:S8.nodes,node:S8.node,size:S8.size,empty:S8.empty,each:S8.each,on:function(e,t){var n=this._id;return arguments.length<2?o6(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?r6:i6;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=z5(e),r="transform"===n?f6:o8;return this.attrTween(e,"function"==typeof t?(n.local?h8:u8)(n,r,g6(this,"attr."+e,t)):null==t?(n.local?s8:a8)(n):(n.local?c8:l8)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=z5(e);return this.tween(n,(r.local?d8:f8)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?d6:o8;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=X5(this,e),a=(this.style.removeProperty(e),X5(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,b8(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=X5(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=X5(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,g6(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=i6(this,e),c=l.on,u=null==l.value[a]?o||(o=b8(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=X5(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(g6(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=o6(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?p6:m6)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?p8:m8)(t,e)):o6(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?g8:v8)(t,e)):o6(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){i6(this,e).ease=t}}(t,e)):o6(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;i6(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--i&&o()}};n.each((function(){var n=i6(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:S8[Symbol.iterator]};var E8={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function C8(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}P4.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},P4.prototype.transition=function(e){var t,n;e instanceof _8?(t=e._id,e=e._name):(t=w8(),(n=E8).time=W4(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&n6(a,e,t,c,s,n||C8(a,t));return new _8(r,this._parents,e,t)};const{abs:M8,max:T8,min:A8}=Math;function P8(e){return{type:e}}["w","e"].map(P8),["n","s"].map(P8),["n","w","e","s","nw","ne","sw","se"].map(P8);const R8=Math.sqrt(50),I8=Math.sqrt(10),O8=Math.sqrt(2);function k8(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=R8?10:o>=I8?5:o>=O8?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?k8(e,t,2*n):[s,l,c]}function L8(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const r=t<e,[i,o,a]=r?k8(t,e,n):k8(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let e=0;e<s;++e)l[e]=(o-e)/-a;else for(let e=0;e<s;++e)l[e]=(o-e)*a;else if(a<0)for(let e=0;e<s;++e)l[e]=(i+e)/-a;else for(let e=0;e<s;++e)l[e]=(i+e)*a;return l}function N8(e,t,n){return k8(e=+e,t=+t,n=+n)[2]}const D8=l5(a5),z8=D8.right,U8=(D8.left,l5((function(e){return null===e?NaN:+e})).center,z8);function F8(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=$8(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function B8(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function j8(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=$8(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function V8(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function $8(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?J6(t):("number"===i?a6:"string"===i?(n=N6(t))?(t=n,e8):i8:t instanceof N6?e8:t instanceof Date?B8:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?F8:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?j8:a6:V8))(e,t)}function H8(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function G8(e){return+e}var W8=[0,1];function q8(e){return e}function X8(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Y8(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=X8(i,r),o=n(a,o)):(r=X8(r,i),o=n(o,a)),function(e){return o(r(e))}}function K8(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=X8(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=U8(e,t,1,r)-1;return o[n](i[n](t))}}function Z8(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function J8(){var e,t,n,r,i,o,a=W8,s=W8,l=$8,c=q8;function u(){var e,t,n,l=Math.min(a.length,s.length);return c!==q8&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?K8:Y8,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),a6)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,G8),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=H8,u()},h.clamp=function(e){return arguments.length?(c=!!e||q8,u()):c!==q8},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function Q8(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var e7,t7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n7(e){if(!(t=t7.exec(e)))throw new Error("invalid format: "+e);var t;return new r7({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function r7(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function i7(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function o7(e){return(e=i7(Math.abs(e)))?e[1]:NaN}function a7(e,t){var n=i7(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}n7.prototype=r7.prototype,r7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const s7={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>a7(100*e,t),r:a7,s:function(e,t){var n=i7(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(e7=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+i7(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function l7(e){return e}var c7,u7,h7,d7=Array.prototype.map,f7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function p7(){var e=J8()(q8,q8);return e.copy=function(){return Z8(e,p7())},Q8.apply(e,arguments),function(e){var t=e.domain;return e.ticks=function(e){var n=t();return L8(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var i,o=function(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?N8(t,e,n):N8(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=n7(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(o7(t)/3)))-o7(Math.abs(e)))}(o,a))||(r.precision=i),h7(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,o7(t)-o7(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-o7(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return u7(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=N8(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}(e)}function m7(e){return Math.log(e)}function g7(e){return Math.exp(e)}function v7(e){return-Math.log(-e)}function y7(e){return-Math.exp(-e)}function b7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function x7(e){return(t,n)=>-e(-t,n)}function _7(){const e=function(e){const t=e(m7,g7),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?b7:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=x7(r),i=x7(i),e(v7,y7)):e(m7,g7),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=r(a),d=r(s);const f=null==e?10:+e;let p=[];if(!(o%1)&&d-h<f){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(c=1;c<o;++c)if(u=h<0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}}else for(;h<=d;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}2*p.length<f&&(p=L8(a,s,f))}else p=L8(h,d,Math.min(d-h,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=n7(n)).precision||(n.trim=!0),n=u7(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}(J8()).domain([1,10]);return e.copy=()=>Z8(e,_7()).base(e.base()),Q8.apply(e,arguments),e}function w7(e){return"string"==typeof e?new T4([[document.querySelector(e)]],[document.documentElement]):new T4([[e]],M4)}function S7(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function E7(e){return function(){return e}}function C7(e){this._context=e}function M7(e){return new C7(e)}c7=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?l7:(t=d7.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?l7:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(d7.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=n7(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):s7[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?o:/[%p]/.test(y)?l:"",_=s7[y],w=/[defgprs%]/.test(y);function S(e){var i,o,l,d=b,S=x;if("c"===y)S=_(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:_(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===y?f7[8+e7/3]:"")+S+(E&&"("===h?")":""),w)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var C=d.length+e.length+S.length,M=C<p?new Array(p-C+1).join(t):"";switch(m&&f&&(e=r(M+e,M.length?p-S.length:1/0),M=""),n){case"<":e=d+e+S+M;break;case"=":e=d+M+e+S;break;case"^":e=M.slice(0,C=M.length>>1)+d+e+S+M.slice(C);break;default:e=M+d+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=n7(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(o7(t)/3))),i=Math.pow(10,-r),o=f7[8+r/3];return function(e){return n(i*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),u7=c7.format,h7=c7.formatPrefix,Array.prototype.slice,C7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};const T7=Math.PI,A7=2*T7,P7=1e-6,R7=A7-P7;function I7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class O7{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?I7:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return I7;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>P7)if(Math.abs(u*s-l*c)>P7&&i){let d=n-o,f=r-a,p=s*s+l*l,m=d*d+f*f,g=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((T7-Math.acos((p+h-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>P7&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*d>c*f)},${this._x1=e+x*s},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>P7||Math.abs(this._y1-c)>P7)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%A7+A7),h>R7?this._append`A${n},${n},0,1,${u},${e-a},${t-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>P7&&this._append`A${n},${n},0,${+(h>=T7)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function k7(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new O7(t)}function L7(e){return e[0]}function N7(e){return e[1]}Math.abs,Math.atan2;const D7=Math.cos,z7=(Math.max,Math.min,Math.sin),U7=Math.sqrt,F7=Math.PI,B7=2*F7;U7(3);const j7={draw(e,t){const n=U7(t/F7);e.moveTo(n,0),e.arc(0,0,n,0,B7)}};U7(1/3),z7(F7/10),z7(7*F7/10);function V7(e,t,n){this.k=e,this.x=t,this.y=n}function $7(e){return $7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$7(e)}function H7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H7(Object(n),!0).forEach((function(t){q7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W7(e){return function(e){if(Array.isArray(e))return K7(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y7(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q7(e,t,n){return(t=function(e){var t=function(e){if("object"!=$7(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$7(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Y7(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y7(e,t){if(e){if("string"==typeof e)return K7(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K7(e,t):void 0}}function K7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}z7(B7/10),D7(B7/10),U7(3),U7(3),U7(3),U7(12),V7.prototype={constructor:V7,scale:function(e){return 1===e?this:new V7(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new V7(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new V7(1,0,0),V7.prototype;var Z7=function(e){return e.Min="min",e.Max="max",e}(Z7||{}),J7={autoXF:function(e){var t=X7(e.findAutoMinMax(),2),n=t[0],r=t[1];return(new E_).createFromMinMax(n,r)},auto2XF:function(e){var t=X7(e.findAutoIJBins(),2),n=t[0],r=t[1];return(new E_).createFromMinMax(n,r)},auto98XF:function(e){var t=e.findBinOfPercentile(.5),n=e.findBinOfPercentile(.983);return(new E_).createFromMinMax(t,n)},bestFitXF:function(e){var t=X7(e.findBestFitBins(),2),n=t[0],r=t[1];return(new E_).createFromMinMax(n,r)},resetXF:function(e){return(new E_).createFullRange()}},Q7={draw:function(e,t){var n=Math.sqrt(1.9*t),r=.4*n,i=.325*n;e.moveTo(-i,-n),e.lineTo(i,-n),e.lineTo(i,-r),e.lineTo(0,0),e.lineTo(-i,-r),e.closePath()}},e9=function(e){var t=e.controlPoints,r=e.id,i=t[t.length-1].x-t[0].x;return n.createElement("defs",null,n.createElement("linearGradient",{id:r,gradientUnits:"objectBoundingBox",spreadMethod:"pad",x2:"100%"},t.map((function(e,r){var o="".concat((e.x-t[0].x)/i*100,"%"),a=Math.min(e.opacity,.9);return n.createElement("stop",{key:r,stopColor:Lk(e.color),stopOpacity:a,offset:o})}))))},t9=function(e){return void 0===e?"":Number(e).toFixed(0)},n9=function(e,t,n){return Math.min(Math.max(e,t),n)};const r9=function(e){var t=e.changeChannelSetting,r=e.width-25-20,i=e.height-18-30,o=X7((0,n.useState)(null),2),a=o[0],s=o[1],l=X7((0,n.useState)(null),2),c=l[0],u=l[1],h=(0,n.useCallback)((function(e){return t({controlPoints:e})}),[t]),d=(0,n.useCallback)((function(e){return t({ramp:e})}),[t]),f=X7(Zk(h,e.controlPoints),2),p=f[0],m=f[1],g=X7(Zk(u,c),2),v=g[0],y=g[1],b=X7((0,n.useState)(null),2),x=b[0],_=b[1],w=(0,n.useRef)(vk),S=(0,n.useRef)(null),E=(0,n.useMemo)((function(){return p7().domain([0,yk]).rangeRound([0,r])}),[r]),C=(0,n.useMemo)((function(){return p7().domain([0,1]).range([i,0])}),[i]),M=function(e){var t,n,o=null!==(t=null===(n=S.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{x:0,y:0};return[E.invert(n9(e.clientX-o.x-25,0,r)),C.invert(n9(e.clientY-o.y-18,0,i))]},T=function(e){y(null),e.currentTarget.releasePointerCapture(e.pointerId)},A=function(e){if(e.preventDefault(),e.target&&S.current){var t=S.current.getBoundingClientRect(),n=e.target.getBoundingClientRect(),r=n.left+n.width/2-t.left<t.width/2?n.right-t.left+2:n.left-t.right-2,i=window.innerHeight-n.bottom<310?t.top-n.bottom:n.top-t.top;_([r,i])}else _(null)},P=(0,n.useMemo)((function(){return e.useControlPoints?e.controlPoints:Xk(e.ramp)}),[e.controlPoints,e.ramp,e.useControlPoints]),R=(0,n.useMemo)((function(){var e;return null!==(e=function(e,t,n){var r=null,i=E7(!0),o=null,a=M7,s=null,l=k7(c);function c(c){var u,h,d,f,p,m=(c=S7(c)).length,g=!1,v=new Array(m),y=new Array(m);for(null==o&&(s=a(p=l())),u=0;u<=m;++u){if(!(u<m&&i(f=c[u],u,c))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(v[d],y[d]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(f,u,c),y[u]=+t(f,u,c),s.point(r?+r(f,u,c):v[u],n?+n(f,u,c):y[u]))}if(p)return s=null,p+""||null}function u(){return function(e,t){var n=E7(!0),r=null,i=M7,o=null,a=k7(s);function s(s){var l,c,u,h=(s=S7(s)).length,d=!1;for(null==r&&(o=i(u=a())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,l,s),+t(c,l,s));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?L7:E7(e),t="function"==typeof t?t:void 0===t?N7:E7(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:E7(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:E7(+e),s):t},s.defined=function(e){return arguments.length?(n="function"==typeof e?e:E7(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?L7:E7(+e),t="function"==typeof t?t:E7(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?N7:E7(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:E7(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:E7(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:E7(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:E7(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:E7(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:E7(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"==typeof e?e:E7(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),c):a},c.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),c):o},c}().x((function(e){return E(e.x)})).y0((function(e){return C(e.opacity)})).y1(i).curve(M7)(P))&&void 0!==e?e:void 0}),[P,E,C,i]),I=(0,n.useMemo)((function(){var e;return null!==(e=function(e,t){let n=null,r=k7(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"==typeof e?e:E7(e||j7),t="function"==typeof t?t:E7(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:E7(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:E7(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(Q7).size(80)())&&void 0!==e?e:void 0}),[]),O=(0,n.useCallback)((function(t){var n,r=E.ticks(4);r[r.length-1]=E.domain()[1],w7(t).call((n=E,v5(3,n)).tickValues(r).tickPadding(e.useControlPoints?3:10))}),[E,e.useControlPoints]),k=(0,n.useCallback)((function(e){return w7(e).call((t=C,v5(4,t)).ticks(4));var t}),[C]),L=(0,n.useCallback)((function(t){if(null!==t&&!(e.channelData.histogram.getNumBins()<1)){var n=function(e){for(var t=[],n=Number.NEGATIVE_INFINITY,r=0;r<e.getNumBins();r++){var i=e.getBin(r);t.push(i),n=Math.max(n,i)}return{binLengths:t,max:n}}(e.channelData.histogram),o=n.binLengths,a=n.max,s=r/e.channelData.histogram.getNumBins(),l=_7().domain([.1,a]).range([i,0]).base(2).clamp(!0);w7(t).selectAll(".bar").data(o).join("rect").attr("class","bar").attr("width",s).attr("x",(function(e,t){return E(t)})).attr("y",(function(e){return l(e)})).attr("height",(function(e){return i-l(e)}))}}),[e.channelData.histogram,r,i]),N=(0,n.useCallback)((function(t){s(null),w.current=vk;var n=J7[t](e.channelData.histogram);e.useControlPoints?m(n.controlPoints.map((function(e){return G7(G7({},e),{},{color:vk})}))):d(qk(n.controlPoints))}),[e.channelData.histogram,e.useControlPoints]),D=function(e,t,r){return n.createElement(qz,{title:r,placement:"top"},n.createElement(wF,{onClick:function(){return N(e)}},t))},z=e.useControlPoints?e.controlPoints.map((function(e,t){return n.createElement("circle",{key:t,className:t===a?"selected":"",cx:E(e.x),cy:C(e.opacity),style:{fill:Lk(e.color)},r:5,onPointerDown:function(){return y(t)},onContextMenu:A})})):null;null!==z&&null!==a&&z.push(z.splice(a,1)[0]);var U,F,B,j,V=e.useControlPoints?"advanced":"basic";return n.createElement("div",null,n.createElement("div",{className:"button-row"},D("resetXF","None","Reset transfer function to full range."),D("auto98XF","Default","Ramp from 50th percentile to 98th."),D("auto2XF","IJ Auto",'Emulates ImageJ\'s "auto" button.'),D("bestFitXF","Auto 2","Ramp over the middle 80% of data."),n.createElement($Y,{checked:e.useControlPoints,onChange:function(e){return t({useControlPoints:e.target.checked})},style:{marginLeft:"auto"}},"Advanced")),null!==x&&n.createElement("div",{className:"tf-editor-popover"},n.createElement("div",{className:"tf-editor-cover",onClick:function(){return _(null)}}),n.createElement("div",{style:(U=x,F=X7(U,2),B=F[0],j=F[1],q7(q7({position:"absolute"},B<0?"right":"left",Math.abs(B)),j<0?"bottom":"top",j))},n.createElement(K2,{color:Ok(w.current),onChange:function(t){if(w.current=Ik(t.rgb),null!==a){var n=W7(e.controlPoints);n[a].color=w.current,m(n)}},disableAlpha:!0}))),n.createElement("svg",{className:"tf-editor-svg ".concat(V).concat(null!==c?" dragging":""),ref:S,width:e.width,height:e.height,onPointerDown:function(t){if(e.useControlPoints){if(null===v.current&&0===t.button){var n=X7(M(t),2),r={x:n[0],opacity:n[1],color:w.current},i=l5((function(e,t){return e.x-t.x})).left(e.controlPoints,r);y(i);var o=W7(e.controlPoints);o.splice(i,0,r),m(o)}else p.current=e.controlPoints;"string"!=typeof v.current&&s(v.current)}0===t.button&&null!==v.current?t.currentTarget.setPointerCapture(t.nativeEvent.pointerId):y(null)},onPointerMove:function(t){if(null!==v.current)if(1&t.buttons){t.stopPropagation(),t.preventDefault();var n=X7(M(t),2),r=n[0],i=n[1];"number"==typeof v.current?function(e,t,n){var r=W7(p.current),i=r[e];i.x=t,i.opacity=n;var o=l5((function(e,t){return e.x-t.x})),a=o.left(r,i),l=o.right(r,i);if(a<e){var c=e-a;r.splice(a,c);var u=e-c;y(u),s(u)}else l>e+1&&r.splice(e+1,l-e-1);m(r)}(v.current,r,i):function(t,n){if(t===Z7.Min){var r=e.ramp[1];d([Math.min(n,r),r])}else{var i=e.ramp[0];d([i,Math.max(n,i)])}}(v.current,r)}else T(t)},onPointerUp:T},n.createElement(e9,{controlPoints:P,id:"tfGradient-".concat(e.id)}),n.createElement("g",{transform:"translate(".concat(25,",").concat(18,")")},n.createElement("g",{ref:L}),n.createElement("path",{className:"line",fill:"url(#tfGradient-".concat(e.id,")"),d:R}),n.createElement("g",{ref:O,className:"axis",transform:"translate(0,".concat(i,")")}),n.createElement("g",{ref:k,className:"axis"}),z,!e.useControlPoints&&n.createElement("g",{className:"ramp-sliders"},n.createElement("g",{transform:"translate(".concat(E(e.ramp[0]),")")},n.createElement("line",{y1:i,strokeDasharray:"5,5",strokeWidth:2}),n.createElement("path",{d:I,transform:"translate(0,".concat(i,") rotate(180)"),onPointerDown:function(){return y(Z7.Min)}})),n.createElement("g",{transform:"translate(".concat(E(e.ramp[1]),")")},n.createElement("line",{y1:i,strokeDasharray:"5,5",strokeWidth:2}),n.createElement("path",{d:I,onPointerDown:function(){return y(Z7.Max)}}))))),!e.useControlPoints&&n.createElement("div",{className:"tf-editor-numeric-input-row"},n.createElement("span",null,"Min"," ",n.createElement(o5,{value:e.ramp[0],onChange:function(t){return null!==t&&d([t,e.ramp[1]])},formatter:t9,min:0,max:Math.min(e.ramp[1],yk),size:"small"})),n.createElement("span",null,"Max"," ",n.createElement(o5,{value:e.ramp[1],onChange:function(t){return null!==t&&d([e.ramp[0],t])},formatter:t9,min:Math.max(0,e.ramp[0]),max:yk,size:"small",width:45}))),n.createElement(_3,{label:n.createElement($Y,{checked:e.colorizeEnabled,onChange:function(e){return t({colorizeEnabled:e.target.checked})}},"Colorize"),max:1,start:e.colorizeAlpha,onUpdate:function(e){return t({colorizeAlpha:e[0]})},hideSlider:!e.colorizeEnabled}))};function i9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o9(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o9(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const a9=function(e){var t,r,i,o,a,s=e.index,l=e.changeChannelSetting,c=e.saveIsosurface,u=e.channelState,h=i9((0,n.useState)(!1),2),d=h[0],f=h[1],p=(0,n.useCallback)((function(e){return l(s,e)}),[l,s]),m=n.createElement("div",{className:"channel-visibility-controls"},n.createElement($Y,{checked:u.volumeEnabled,onChange:function(e){var t=e.target;l(s,{volumeEnabled:t.checked})}},"Vol"),n.createElement($Y,{checked:u.isosurfaceEnabled,onChange:function(e){var t=e.target;l(s,{isosurfaceEnabled:t.checked})}},"Surf"),n.createElement(wF,{icon:n.createElement(_j,{type:"preferences",style:{fontSize:"16px"}}),onClick:function(){return f(!d)},title:"Open channel settings",type:"text"})),g=d?"channel-row":"channel-row controls-closed";return n.createElement(RY.Item,{key:s,className:g},n.createElement(RY.Item.Meta,{title:e.name,avatar:n.createElement(y3,{color:Ok(u.color),onColorChange:function(t,n,r){var i=Ik(t);e.changeChannelSetting(r,{color:i})},onColorChangeComplete:e.onColorChangeComplete,disableAlpha:!0,idx:s,width:18})}),m,d&&n.createElement("div",{style:{width:"100%"}},u.volumeEnabled||u.isosurfaceEnabled?n.createElement(n.Fragment,null,u.volumeEnabled&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Volume settings:"),(t=u.controlPoints,r=u.colorizeEnabled,i=u.colorizeAlpha,o=u.useControlPoints,a=u.ramp,n.createElement(r9,{id:"TFEditor"+s,width:418,height:145,channelData:e.channelDataForChannel,controlPoints:t,changeChannelSetting:p,colorizeEnabled:r,colorizeAlpha:i,useControlPoints:o,ramp:a}))),u.isosurfaceEnabled&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Surface settings:"),n.createElement("div",null,n.createElement(_3,{label:"Isovalue",max:255,start:u.isovalue,onChange:function(e){var t=i9(e,1)[0];return p({isovalue:t})},formatInteger:!0}),n.createElement(_3,{label:"Opacity",max:255,start:255*u.opacity,onChange:function(e){var t=i9(e,1)[0];return p({opacity:t/255})},formatInteger:!0}),n.createElement("div",{className:"button-row"},n.createElement(wF,{onClick:function(){return c(s,"GLTF")}},"Export GLTF"),n.createElement(wF,{onClick:function(){return c(s,"STL")}},"Export STL"))))):n.createElement("h4",{style:{fontStyle:"italic"}},"Not currently visible")))},s9=function(e){var t=!!e.checkedList.length&&e.checkedList.length<e.allOptions.length,r=e.checkedList.length===e.allOptions.length;return n.createElement($Y,{indeterminate:t,onChange:function(t){var n=t.target;return e.onChange(n.checked,e.allOptions)},checked:r,style:e.style},e.children)};function l9(e){return l9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l9(e)}function c9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u9(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u9(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const h9=Yj((function(e){var t=e.channelGroupedByType,r=e.channelSettings,i=e.channelDataChannels,o=e.filterFunc,a=e.viewerChannelSettings,s=function(t){return function(n,r){var i,o,a;e.changeChannelSetting(r,(i={},a=n,(o=function(e){var t=function(e){if("object"!=l9(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l9(t)?t:t+""}(o=t))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i))}},l=s("volumeEnabled"),c=s("isosurfaceEnabled"),u=function(e){var t=[],i=[];return e.forEach((function(e){var n=r[e];n&&(n.volumeEnabled&&t.push(e),n.isosurfaceEnabled&&i.push(e))})),n.createElement(n.Fragment,null,n.createElement(s9,{allOptions:e,checkedList:t,onChange:l},"All Vol"),n.createElement(s9,{allOptions:e,checkedList:i,onChange:c,style:{flex:5}},"All Surf"))},h=function(t){var o=r[t];return o?n.createElement(a9,{key:"".concat(t,"_").concat(o.name,"_").concat(t),index:t,channelDataForChannel:i[t],name:jk(o.name,t,a),channelState:o,changeChannelSetting:e.changeChannelSetting,onColorChangeComplete:e.onColorChangeComplete,saveIsosurface:e.saveIsosurface}):null},d=Object.keys(t)[0],f=i&&Object.entries(t).filter((function(e){var t=c9(e,2),n=t[0];return t[1].length>0&&(!o||o(n))})).map((function(e){var t=c9(e,2),r=t[0],i=t[1];return{key:r,label:r,children:n.createElement(RY,{itemLayout:"horizontal",dataSource:i,renderItem:h}),extra:u(i)}}));return n.createElement(OG,{bordered:!1,defaultActiveKey:d,items:f,collapsible:"icon"})}),["channelSettings","changeChannelSetting"]),d9=Yj((function(e){var t=function(t,r,i,o){return n.createElement(_3,{label:t,start:r,max:i,onUpdate:function(t,n,r){var i=1===r.length?r[0]:r;e.changeViewerSetting(o,i)}})},r=e.visibleControls,i=e.maskAlpha,o=e.brightness,a=e.density,s=e.levels;return n.createElement("div",{style:{paddingTop:18,paddingBottom:22}},r.alphaMaskSlider&&t("mask cell",i,100,"maskAlpha"),r.brightnessSlider&&t("brightness",o,100,"brightness"),r.densitySlider&&t("density",a,100,"density"),r.levelsSliders&&t("levels",s,255,"levels"),r.interpolationControl&&n.createElement(_3,{label:"interpolate"},n.createElement($Y,{checked:e.interpolationEnabled,onChange:function(t){var n=t.target;return e.changeViewerSetting("interpolationEnabled",n.checked)}})))}),["maskAlpha","brightness","density","levels","interpolationEnabled","changeViewerSetting"]);var f9=function(e){var t=e.color,r=e.onColorChange,i=e.children;return n.createElement("div",{style:p9.colorPickerRow},n.createElement("span",{style:p9.colorPicker},n.createElement(y3,{color:Ok(t),onColorChange:function(e){return r(Ik(e))},width:18,disableAlpha:!0})),n.createElement("span",null,i))},p9={colorPickerRow:{padding:"14px 0",display:"flex",borderBottom:"1px solid #6e6e6e",color:"var(--color-controlpanel-text)"},colorPicker:{marginRight:"16px"}};const m9=Yj((function(e){return n.createElement(n.Fragment,null,e.visibleControls.backgroundColorPicker&&n.createElement(f9,{color:e.backgroundColor,onColorChange:function(t){return e.changeViewerSetting("backgroundColor",t)}},"Background color"),e.visibleControls.boundingBoxColorPicker&&n.createElement(f9,{color:e.boundingBoxColor,onColorChange:function(t){return e.changeViewerSetting("boundingBoxColor",t)}},"Bounding box color",!e.showBoundingBox&&n.createElement("i",null," - bounding box turned off")))}),["showBoundingBox","backgroundColor","boundingBoxColor","changeViewerSetting"]);function g9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v9(Object(n),!0).forEach((function(t){b9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b9(e,t,n){return(t=function(e){var t=function(e){if("object"!=x9(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x9(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x9(e){return x9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x9(e)}var _9=function(e){return"object"===x9(e)&&null!==e},w9=function(e){var t,r,i=e.metadata,o=e.title,a=(t=n.useState(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,r)||function(e,t){if(e){if("string"==typeof e)return g9(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g9(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=s?" metadata-collapse-collapsed":"";return n.createElement(n.Fragment,null,n.createElement("tr",{className:"metadata-row-collapse-title"+c,onClick:function(){return l(!s)}},n.createElement("td",{colSpan:2},n.createElement("span",{className:"metadata-collapse-caret"},n.createElement(OC,{style:{transform:"rotate(".concat(s?0:90,"deg)")}})),o)),n.createElement("tr",{className:"metadata-row-collapse-content"+c},n.createElement("td",{className:"metadata-collapse-content",colSpan:2},n.createElement(S9,{metadata:i}))))},S9=function(e){var t=e.metadata,r=e.topLevel,i=Object.keys(t),o=Array.isArray(t);return n.createElement("table",{className:"viewer-metadata-table"+(r?" metadata-top-level":"")},n.createElement("tbody",null,i.map((function(e,r){var i=function(e){if(!_9(e)||Array.isArray(e))return e;var t={},n={};for(var r in e)_9(e[r])?t[r]=e[r]:n[r]=e[r];return y9(y9({},t),n)}(o?t[r]:t[e]);return _9(i)?n.createElement(w9,{key:e,metadata:i,title:e}):n.createElement("tr",{key:e},n.createElement("td",{className:"metadata-key"},e),n.createElement("td",{className:"metadata-value"},i+""))}))))};const E9=function(e){var t=e.metadata;return n.createElement(S9,{metadata:t,topLevel:!0})};function C9(){return C9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C9.apply(null,arguments)}function M9(e){return M9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M9(e)}function T9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A9(e,t,n){return(t=function(e){var t=function(e){if("object"!=M9(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M9(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P9=function(e){return e[e.Channels=0]="Channels",e[e.Advanced=1]="Advanced",e[e.Metadata=2]="Metadata",e}(P9||{}),R9=A9(A9(A9({},P9.Channels,"Channel Settings"),P9.Advanced,"Advanced Settings"),P9.Metadata,"Metadata");const I9=Yj((function(e){var t,r,i,o,a,s=(o=n.useState(P9.Channels),a=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(o,a)||function(e,t){if(e){if("string"==typeof e)return T9(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T9(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=n.useRef(null),h=u.current?function(){return u.current}:void 0,d=e.viewerChannelSettings,f=e.visibleControls,p=e.hasImage,m=function(t,r){return n.createElement(qz,C9({title:R9[t],placement:"right"},!e.collapsed&&{open:!1}),n.createElement(wF,{className:l===t?"ant-btn-icon-only btn-tabactive":"ant-btn-icon-only",onClick:function(){return c(t)},icon:"string"==typeof r?r:void 0},"object"===M9(r)&&r))};return n.createElement("div",{className:"control-panel-col-container",ref:u},n.createElement("div",{className:"control-panel-tab-col",style:{flex:"0 0 50px"}},n.createElement(wF,{className:"ant-btn-icon-only btn-collapse"+(e.collapsed?" btn-collapse-collapsed":""),onClick:function(){return e.setCollapsed(!e.collapsed)}},n.createElement(_j,{type:"closePanel"})),n.createElement("div",{className:"tab-divider"}),m(P9.Channels,n.createElement(_j,{type:"channels"})),m(P9.Advanced,n.createElement(_j,{type:"preferences"})),e.visibleControls.metadataViewer&&m(P9.Metadata,n.createElement(_j,{type:"metadata"}))),n.createElement("div",{className:"control-panel-col",style:{flex:"0 0 450px"}},n.createElement("h2",{className:"control-panel-title"},R9[l]),f.colorPresetsDropdown&&l===P9.Channels&&(i={items:xk.map((function(e,t){return{key:t,label:e.name}})),onClick:function(t){var n=t.key;return e.onApplyColorPresets(xk[n].colors)}},n.createElement("div",{className:"color-presets-dropdown"},n.createElement(oG,{trigger:["click"],menu:i,getPopupContainer:h},n.createElement(wF,null,n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"}},"Apply palette",n.createElement(_j,{type:"dropdownArrow",style:{fontSize:"14px"}})))))),p&&n.createElement("div",{className:"channel-rows-list"},l===P9.Channels&&n.createElement(h9,{channelDataChannels:e.channelDataChannels,channelGroupedByType:e.channelGroupedByType,saveIsosurface:e.saveIsosurface,onColorChangeComplete:e.onColorChangeComplete,onApplyColorPresets:e.onApplyColorPresets,filterFunc:e.filterFunc,viewerChannelSettings:d}),l===P9.Advanced&&(t=[{key:0,label:"Rendering adjustments",children:n.createElement(d9,{imageName:e.imageName,pixelSize:e.pixelSize,visibleControls:f})}],(r=f.backgroundColorPicker||f.boundingBoxColorPicker)&&t.push({key:1,label:"Customize",children:n.createElement(m9,{visibleControls:e.visibleControls})}),n.createElement(mG,{gap:10,vertical:!0},n.createElement(OG,{bordered:!1,defaultActiveKey:r?[0,1]:0,items:t}),n.createElement("div",{style:{margin:"0 10px",width:"fit-content"}},n.createElement(qz,{trigger:["hover","focus"],placement:"right",title:"Clears ALL rendering settings and channel configuration to the default viewer state. This will replace any edits to channel settings, color presets, and rendering adjustments."},n.createElement(wF,{onClick:e.resetToDefaultViewerState},"Clear all settings"))))),l===P9.Metadata&&n.createElement(E9,{metadata:e.getMetadata()}))))}),["resetToDefaultViewerState"]),O9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var k9=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:O9}))};const L9=n.forwardRef(k9),N9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var D9=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:N9}))};const z9=n.forwardRef(D9),U9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};var F9=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:U9}))};const B9=n.forwardRef(F9),j9=(e,t,n,r,i)=>({background:e,border:`${Un(r.lineWidth)} ${r.lineType} ${t}`,[`${i}-icon`]:{color:n}}),V9=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:r,marginSM:i,fontSize:o,fontSizeLG:a,lineHeight:s,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:u,colorText:h,colorTextHeading:d,withDescriptionPadding:f,defaultPadding:p}=e;return{[t]:Object.assign(Object.assign({},Bs(e)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:l,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:o,lineHeight:s},"&-message":{color:d},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},\n        padding-top ${n} ${c}, padding-bottom ${n} ${c},\n        margin-bottom ${n} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:f,[`${t}-icon`]:{marginInlineEnd:i,fontSize:u,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:r,color:d,fontSize:a},[`${t}-description`]:{display:"block",color:h}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},$9=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:r,colorSuccessBg:i,colorWarning:o,colorWarningBorder:a,colorWarningBg:s,colorError:l,colorErrorBorder:c,colorErrorBg:u,colorInfo:h,colorInfoBorder:d,colorInfoBg:f}=e;return{[t]:{"&-success":j9(i,r,n,e,t),"&-info":j9(f,d,h,e,t),"&-warning":j9(s,a,o,e,t),"&-error":Object.assign(Object.assign({},j9(u,c,l,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},H9=e=>{const{componentCls:t,iconCls:n,motionDurationMid:r,marginXS:i,fontSizeIcon:o,colorIcon:a,colorIconHover:s}=e;return{[t]:{"&-action":{marginInlineStart:i},[`${t}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:o,lineHeight:Un(o),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:a,transition:`color ${r}`,"&:hover":{color:s}}},"&-close-text":{color:a,transition:`color ${r}`,"&:hover":{color:s}}}}},G9=YC("Alert",(e=>[V9(e),$9(e),H9(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`})));var W9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const q9={success:L9,info:B9,error:rX,warning:z9},X9=e=>{const{icon:t,prefixCls:r,type:i}=e,o=q9[i]||null;return t?Mz(t,n.createElement("span",{className:`${r}-icon`},t),(()=>({className:va()(`${r}-icon`,{[t.props.className]:t.props.className})}))):n.createElement(o,{className:`${r}-icon`})},Y9=e=>{const{isClosable:t,prefixCls:r,closeIcon:i,handleClose:o,ariaProps:a}=e,s=!0===i||void 0===i?n.createElement(mB,null):i;return t?n.createElement("button",Object.assign({type:"button",onClick:o,className:`${r}-close-icon`,tabIndex:0},a),s):null},K9=n.forwardRef(((e,t)=>{const{description:r,prefixCls:i,message:o,banner:a,className:s,rootClassName:l,style:c,onMouseEnter:u,onMouseLeave:h,onClick:d,afterClose:f,showIcon:p,closable:m,closeText:g,closeIcon:v,action:y,id:b}=e,x=W9(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[_,w]=n.useState(!1),S=n.useRef(null);n.useImperativeHandle(t,(()=>({nativeElement:S.current})));const{getPrefixCls:E,direction:C,alert:M}=n.useContext(ia),T=E("alert",i),[A,P,R]=G9(T),I=t=>{var n;w(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},O=n.useMemo((()=>void 0!==e.type?e.type:a?"warning":"info"),[e.type,a]),k=n.useMemo((()=>!("object"!=typeof m||!m.closeIcon)||!!g||("boolean"==typeof m?m:!1!==v&&null!=v||!!(null==M?void 0:M.closable))),[g,v,m,null==M?void 0:M.closable]),L=!(!a||void 0!==p)||p,N=va()(T,`${T}-${O}`,{[`${T}-with-description`]:!!r,[`${T}-no-icon`]:!L,[`${T}-banner`]:!!a,[`${T}-rtl`]:"rtl"===C},null==M?void 0:M.className,s,l,R,P),D=nB(x,{aria:!0,data:!0}),z=n.useMemo((()=>{var e,t;return"object"==typeof m&&m.closeIcon?m.closeIcon:g||(void 0!==v?v:"object"==typeof(null==M?void 0:M.closable)&&(null===(e=null==M?void 0:M.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==M?void 0:M.closable)||void 0===t?void 0:t.closeIcon:null==M?void 0:M.closeIcon)}),[v,m,g,null==M?void 0:M.closeIcon]),U=n.useMemo((()=>{const e=null!=m?m:null==M?void 0:M.closable;if("object"==typeof e){const{closeIcon:t}=e;return W9(e,["closeIcon"])}return{}}),[m,null==M?void 0:M.closable]);return A(n.createElement(Ds,{visible:!_,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:f},((t,i)=>{let{className:a,style:s}=t;return n.createElement("div",Object.assign({id:b,ref:wa(S,i),"data-show":!_,className:va()(N,a),style:Object.assign(Object.assign(Object.assign({},null==M?void 0:M.style),c),s),onMouseEnter:u,onMouseLeave:h,onClick:d,role:"alert"},D),L?n.createElement(X9,{description:r,icon:e.icon,prefixCls:T,type:O}):null,n.createElement("div",{className:`${T}-content`},o?n.createElement("div",{className:`${T}-message`},o):null,r?n.createElement("div",{className:`${T}-description`},r):null),y?n.createElement("div",{className:`${T}-action`},y):null,n.createElement(Y9,{isClosable:k,prefixCls:T,closeIcon:z,handleClose:I,ariaProps:U}))})))})),Z9=function(e){function t(){var e,n,r,i;return yn(this,t),(n=this,r=t,i=arguments,r=Ia(r),e=La(n,Oa()?Reflect.construct(r,i||[],Ia(n).constructor):r.apply(n,i))).state={error:void 0,info:{componentStack:""}},e}return Ra(t,e),xn(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:r,children:i}=this.props,{error:o,info:a}=this.state,s=(null==a?void 0:a.componentStack)||null,l=void 0===e?(o||"").toString():e,c=void 0===t?s:t;return o?n.createElement(K9,{id:r,type:"error",message:l,description:n.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},c)}):i}}])}(n.Component),J9=K9;J9.ErrorBoundary=Z9;const Q9=J9;function eee(e){return eee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eee(e)}function tee(e){return function(e){if(Array.isArray(e))return iee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ree(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||ree(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ree(e,t){if(e){if("string"==typeof e)return iee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iee(e,t):void 0}}function iee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oee(e,t,n){return(t=function(e){var t=function(e){if("object"!=eee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=eee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==eee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aee=function(e){var t=e.bug,r=e.children;return n.createElement("a",{href:"https://github.com/allen-cell-animated/vole-app/issues/new".concat(t?"?template=bug_report.md":"/choose"),target:"_blank",rel:"noreferrer noopener"},r)},see=n.createElement(n.Fragment,null,"An unknown error occurred. Check the browser console (F12) for more details. If this looks like a bug,"," ",n.createElement(aee,{bug:!0},"send us a bug report here"),"."),lee=oee(oee(oee(oee(oee(oee({},Iw.UNKNOWN,n.createElement(n.Fragment,null,"An unknown error occurred while loading volume data. Check the browser console (F12) for more details. If this looks like a bug, ",n.createElement(aee,{bug:!0},"send us a bug report here"),".")),Iw.NOT_FOUND,n.createElement(n.Fragment,null,"The viewer was unable to find any volume data at the specified location. Check that the provided URL is correct and try again.")),Iw.TOO_LARGE,n.createElement(n.Fragment,null,"No scale level is available for this volume which fits within our maximum GPU memory footprint. This maximum is tuned to ensure compatibility with the majority of browsers. If you're trying to load your own OME-Zarr dataset, you may be able to open this volume by including a lower scale level.")),Iw.LOAD_DATA_FAILED,n.createElement(n.Fragment,null,"The viewer was able to find a source of volume data at the specified location, but encountered an error while trying to load it. Check that your dataset is complete and properly formatted. You can also check the browser console (F12) for more details about this error. If it looks like a problem on our end,"," ",n.createElement(aee,{bug:!0},"start a bug report here"),".")),Iw.INVALID_METADATA,n.createElement(n.Fragment,null,"The viewer was unable to read all necessary information from this volume's metadata. Check that your dataset's metadata is complete and properly formatted. If you believe your data is valid and should be supported by our viewer, let us know by ",n.createElement(aee,null,"opening a GitHub issue"),".")),Iw.INVALID_MULTI_SOURCE_ZARR,n.createElement(n.Fragment,null,"The viewer is currently configured to consolidate multiple OME-Zarr datasets into a single volume, but the provided datasets can't all be matched up. Ensure that all dataset URLs are correct and that at least one equivalently-sized scale level exists in all datasets.")),cee=function(e){var t;return e instanceof Error&&(null===(t=e.toString)||void 0===t?void 0:t.call(e))||"Unknown error"},uee=function(e){var t=e.errors,r=e.firstErrorCount,i=void 0===r?0:r,o=e.afterClose,a=e.onSkipError,s=nee(n.useState(!1),2),l=s[0],c=s[1],u=nee(n.useState(0),2),h=u[0],d=u[1],f=Array.isArray(t)?t[0]:t,p=n.createElement(n.Fragment,null,n.createElement("div",null,cee(f)+(i>1?" (".concat(i,")"):"")," ",n.createElement(wF,{type:"text",onClick:function(){return c(!l)}},l?"Show less info":"Show more info")),n.createElement("div",{style:{display:l?void 0:"none"}},function(e){var t,n=e.type;return n&&null!==(t=lee[n])&&void 0!==t?t:see}(f))),m=Array.isArray(t)&&t.length>1&&n.createElement(wF,{type:"text",onClick:function(){d((function(e){return e+1})),null==a||a()}},"Error ",h+1," of ",t.length+h," ",n.createElement(OC,null));return n.createElement(Q9,{showIcon:!0,type:"error",className:"load-error-alert",message:p,closable:!0,afterClose:function(){d(0),null==o||o()},action:m})};const hee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"};var dee=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:hee}))};const fee=n.forwardRef(dee),pee=n.createContext(null),mee=pee.Provider,gee=pee,vee=n.createContext(null),yee=vee.Provider,bee=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-group`;return{[r]:Object.assign(Object.assign({},Bs(e)),{display:"inline-block",fontSize:0,[`&${r}-rtl`]:{direction:"rtl"},[`&${r}-block`]:{display:"flex"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"}})}},xee=e=>{const{componentCls:t,wrapperMarginInlineEnd:n,colorPrimary:r,radioSize:i,motionDurationSlow:o,motionDurationMid:a,motionEaseInOutCirc:s,colorBgContainer:l,colorBorder:c,lineWidth:u,colorBgContainerDisabled:h,colorTextDisabled:d,paddingXS:f,dotColorDisabled:p,lineType:m,radioColor:g,radioBgColor:v,calc:y}=e,b=`${t}-inner`,x=y(i).sub(y(4).mul(2)),_=y(1).mul(i).equal({unit:!0});return{[`${t}-wrapper`]:Object.assign(Object.assign({},Bs(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},"&-block":{flex:1,justifyContent:"center"},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${Un(u)} ${m} ${r}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[t]:Object.assign(Object.assign({},Bs(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,\n        &:hover ${b}`]:{borderColor:r},[`${t}-input:focus-visible + ${b}`]:Object.assign({},Vs(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:_,height:_,marginBlockStart:y(1).mul(i).div(-2).equal({unit:!0}),marginInlineStart:y(1).mul(i).div(-2).equal({unit:!0}),backgroundColor:g,borderBlockStart:0,borderInlineStart:0,borderRadius:_,transform:"scale(0)",opacity:0,transition:`all ${o} ${s}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:_,height:_,backgroundColor:l,borderColor:c,borderStyle:"solid",borderWidth:u,borderRadius:"50%",transition:`all ${a}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[b]:{borderColor:r,backgroundColor:v,"&::after":{transform:`scale(${e.calc(e.dotSize).div(i).equal()})`,opacity:1,transition:`all ${o} ${s}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[b]:{backgroundColor:h,borderColor:c,cursor:"not-allowed","&::after":{backgroundColor:p}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:d,cursor:"not-allowed"},[`&${t}-checked`]:{[b]:{"&::after":{transform:`scale(${y(x).div(i).equal()})`}}}},[`span${t} + *`]:{paddingInlineStart:f,paddingInlineEnd:f}})}},_ee=e=>{const{buttonColor:t,controlHeight:n,componentCls:r,lineWidth:i,lineType:o,colorBorder:a,motionDurationSlow:s,motionDurationMid:l,buttonPaddingInline:c,fontSize:u,buttonBg:h,fontSizeLG:d,controlHeightLG:f,controlHeightSM:p,paddingXS:m,borderRadius:g,borderRadiusSM:v,borderRadiusLG:y,buttonCheckedBg:b,buttonSolidCheckedColor:x,colorTextDisabled:_,colorBgContainerDisabled:w,buttonCheckedBgDisabled:S,buttonCheckedColorDisabled:E,colorPrimary:C,colorPrimaryHover:M,colorPrimaryActive:T,buttonSolidCheckedBg:A,buttonSolidCheckedHoverBg:P,buttonSolidCheckedActiveBg:R,calc:I}=e;return{[`${r}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:c,paddingBlock:0,color:t,fontSize:u,lineHeight:Un(I(n).sub(I(i).mul(2)).equal()),background:h,border:`${Un(i)} ${o} ${a}`,borderBlockStartWidth:I(i).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:i,cursor:"pointer",transition:[`color ${l}`,`background ${l}`,`box-shadow ${l}`].join(","),a:{color:t},[`> ${r}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:I(i).mul(-1).equal(),insetInlineStart:I(i).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:i,paddingInline:0,backgroundColor:a,transition:`background-color ${s}`,content:'""'}},"&:first-child":{borderInlineStart:`${Un(i)} ${o} ${a}`,borderStartStartRadius:g,borderEndStartRadius:g},"&:last-child":{borderStartEndRadius:g,borderEndEndRadius:g},"&:first-child:last-child":{borderRadius:g},[`${r}-group-large &`]:{height:f,fontSize:d,lineHeight:Un(I(f).sub(I(i).mul(2)).equal()),"&:first-child":{borderStartStartRadius:y,borderEndStartRadius:y},"&:last-child":{borderStartEndRadius:y,borderEndEndRadius:y}},[`${r}-group-small &`]:{height:p,paddingInline:I(m).sub(i).equal(),paddingBlock:0,lineHeight:Un(I(p).sub(I(i).mul(2)).equal()),"&:first-child":{borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v}},"&:hover":{position:"relative",color:C},"&:has(:focus-visible)":Object.assign({},Vs(e)),[`${r}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${r}-button-wrapper-disabled)`]:{zIndex:1,color:C,background:b,borderColor:C,"&::before":{backgroundColor:C},"&:first-child":{borderColor:C},"&:hover":{color:M,borderColor:M,"&::before":{backgroundColor:M}},"&:active":{color:T,borderColor:T,"&::before":{backgroundColor:T}}},[`${r}-group-solid &-checked:not(${r}-button-wrapper-disabled)`]:{color:x,background:A,borderColor:A,"&:hover":{color:x,background:P,borderColor:P},"&:active":{color:x,background:R,borderColor:R}},"&-disabled":{color:_,backgroundColor:w,borderColor:a,cursor:"not-allowed","&:first-child, &:hover":{color:_,backgroundColor:w,borderColor:a}},[`&-disabled${r}-button-wrapper-checked`]:{color:E,backgroundColor:S,borderColor:a,boxShadow:"none"},"&-block":{flex:1,textAlign:"center"}}}},wee=YC("Radio",(e=>{const{controlOutline:t,controlOutlineWidth:n}=e,r=`0 0 0 ${Un(n)} ${t}`,i=$C(e,{radioFocusShadow:r,radioButtonFocusShadow:r});return[bee(i),xee(i),_ee(i)]}),(e=>{const{wireframe:t,padding:n,marginXS:r,lineWidth:i,fontSizeLG:o,colorText:a,colorBgContainer:s,colorTextDisabled:l,controlItemBgActiveDisabled:c,colorTextLightSolid:u,colorPrimary:h,colorPrimaryHover:d,colorPrimaryActive:f,colorWhite:p}=e;return{radioSize:o,dotSize:t?o-8:o-2*(4+i),dotColorDisabled:l,buttonSolidCheckedColor:u,buttonSolidCheckedBg:h,buttonSolidCheckedHoverBg:d,buttonSolidCheckedActiveBg:f,buttonBg:s,buttonCheckedBg:s,buttonColor:a,buttonCheckedBgDisabled:c,buttonCheckedColorDisabled:l,buttonPaddingInline:n-i,wrapperMarginInlineEnd:r,radioColor:t?h:p,radioBgColor:t?s:h}}),{unitless:{radioSize:!0,dotSize:!0}});const See=(e,t)=>{var r,i;const o=n.useContext(gee),a=n.useContext(vee),{getPrefixCls:s,direction:l,radio:c}=n.useContext(ia),u=n.useRef(null),h=wa(t,u),{isFormItemInput:d}=n.useContext(GD),{prefixCls:f,className:p,rootClassName:m,children:g,style:v,title:y}=e,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","children","style","title"]),x=s("radio",f),_="button"===((null==o?void 0:o.optionType)||a),w=_?`${x}-button`:x,S=pV(x),[E,C,M]=wee(x,S),T=Object.assign({},b),A=n.useContext(ca);o&&(T.name=o.name,T.onChange=t=>{var n,r;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(r=null==o?void 0:o.onChange)||void 0===r||r.call(o,t)},T.checked=e.value===o.value,T.disabled=null!==(r=T.disabled)&&void 0!==r?r:o.disabled),T.disabled=null!==(i=T.disabled)&&void 0!==i?i:A;const P=va()(`${w}-wrapper`,{[`${w}-wrapper-checked`]:T.checked,[`${w}-wrapper-disabled`]:T.disabled,[`${w}-wrapper-rtl`]:"rtl"===l,[`${w}-wrapper-in-form-item`]:d,[`${w}-wrapper-block`]:!!(null==o?void 0:o.block)},null==c?void 0:c.className,p,m,C,M,S);return E(n.createElement(mU,{component:"Radio",disabled:T.disabled},n.createElement("label",{className:P,style:Object.assign(Object.assign({},null==c?void 0:c.style),v),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,title:y},n.createElement(kY,Object.assign({},T,{className:va()(T.className,{[Kz]:!_}),type:"radio",prefixCls:w,ref:h})),void 0!==g?n.createElement("span",null,g):null)))},Eee=n.forwardRef(See),Cee=n.forwardRef(((e,t)=>{const{getPrefixCls:r,direction:i}=n.useContext(ia),{prefixCls:o,className:a,rootClassName:s,options:l,buttonStyle:c="outline",disabled:u,children:h,size:d,style:f,id:p,optionType:m,name:g,defaultValue:v,value:y,block:b=!1,onChange:x,onMouseEnter:_,onMouseLeave:w,onFocus:S,onBlur:E}=e,[C,M]=Ba(v,{value:y}),T=n.useCallback((t=>{const n=C,r=t.target.value;"value"in e||M(r),r!==n&&(null==x||x(t))}),[C,M,x]),A=r("radio",o),P=`${A}-group`,R=pV(A),[I,O,k]=wee(A,R);let L=h;l&&l.length>0&&(L=l.map((e=>"string"==typeof e||"number"==typeof e?n.createElement(Eee,{key:e.toString(),prefixCls:A,disabled:u,value:e,checked:C===e},e):n.createElement(Eee,{key:`radio-group-value-options-${e.value}`,prefixCls:A,disabled:e.disabled||u,value:e.value,checked:C===e.value,title:e.title,style:e.style,id:e.id,required:e.required},e.label))));const N=XD(d),D=va()(P,`${P}-${c}`,{[`${P}-${N}`]:N,[`${P}-rtl`]:"rtl"===i,[`${P}-block`]:b},a,s,O,k,R),z=n.useMemo((()=>({onChange:T,value:C,disabled:u,name:g,optionType:m,block:b})),[T,C,u,g,m,b]);return I(n.createElement("div",Object.assign({},nB(e,{aria:!0,data:!0}),{className:D,style:f,onMouseEnter:_,onMouseLeave:w,onFocus:S,onBlur:E,id:p,ref:t}),n.createElement(mee,{value:z},L)))})),Mee=n.memo(Cee);const Tee=(e,t)=>{const{getPrefixCls:r}=n.useContext(ia),{prefixCls:i}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls"]),a=r("radio",i);return n.createElement(yee,{value:"button"},n.createElement(Eee,Object.assign({prefixCls:a},o,{type:"radio",ref:t})))},Aee=n.forwardRef(Tee),Pee=Eee;Pee.Button=Aee,Pee.Group=Mee,Pee.__ANT_RADIO=!0;const Ree=Pee;var Iee=[ak.threeD,ak.xy,ak.xz,ak.yz];const Oee=function(e){return n.createElement(Ree.Group,{onChange:function(t){var n=t.target;e.mode!==n.value&&e.onViewModeChange(n.value)},value:e.mode.toString()},Iee.map((function(e,t){return n.createElement(Ree.Button,{key:t,value:e.toString()},e)})))},kee=function(e){var t=e.fovDownloadHref,r=e.cellDownloadHref;if(e.hasFov){var i={className:"download-dropdown",items:[{key:"1",label:n.createElement("a",{href:r},n.createElement(_j,{type:"download"})," Segmented cell")},{key:"2",label:n.createElement("a",{href:t},n.createElement(_j,{type:"download"})," Full field image")}]};return n.createElement(qz,{trigger:["hover","focus"],placement:"bottom",title:"Download volume data"},n.createElement(oG,{menu:i,placement:"bottomRight",trigger:["click"]},n.createElement(wF,{className:"ant-btn-icon-only btn-borderless"},n.createElement(_j,{type:"download"}))))}return r?n.createElement(qz,{trigger:["hover","focus"],placement:"bottom",title:"Download volume data"},n.createElement(wF,{className:"ant-btn-icon-only btn-borderless",href:r},n.createElement(_j,{type:"download"}))):null};function Lee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dee={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const zee=Yj((function(e){var t=n.useRef(null),r=n.useRef(null),i=n.useRef(null),o=n.useRef(null),a=n.useRef(null),s=Lee(n.useState(!1),2),l=s[0],c=s[1],u=Lee(n.useState(!1),2),h=u[0],d=u[1],f=Lee(n.useState(!1),2),p=f[0],m=f[1],g=n.useCallback((function(){var e=r.current;e&&(d(e.scrollLeft>0),m(e.scrollLeft<e.scrollWidth-e.clientWidth))}),[]),v=n.useCallback((0,yM.debounce)((function(){if(i.current&&a.current&&o.current&&r.current){var e=i.current.getBoundingClientRect(),t=a.current.getBoundingClientRect(),n=o.current.getBoundingClientRect();l?r.current.getBoundingClientRect().width>2*Math.max(e.width,n.width)+t.width+15&&c(!1):(e.right>t.left||t.right>n.left)&&c(!0),g()}}),50),[l,g]);n.useEffect(v,[]),n.useEffect((function(){return window.addEventListener("resize",v),function(){return window.removeEventListener("resize",v)}}),[v]);var y=function(e){return r.current.scrollLeft+=e},b=function(e){return"ant-btn-icon-only btn-borderless"+(e?" btn-active":"")},x=e.changeViewerSetting,_=e.resetToSavedViewerState,w=e.visibleControls,S=e.showAxes,E=e.showBoundingBox,C=e.autorotate,M=e.viewMode!==ak.threeD,T=w.viewModeRadioButtons||w.resetCameraButton||w.autoRotateButton,A=w.showAxesButton||w.showBoundingBoxButton,P=S?"Hide axes":"Show axes",R=E?"Hide bounding box":"Show bounding box",I=C?"Turn off turntable":"Turn on turntable",O=t.current?function(){return t.current}:void 0;return n.createElement("div",{className:"viewer-toolbar-container".concat(l?" viewer-toolbar-scroll":""),ref:t},n.createElement("div",{className:"viewer-toolbar-scroll-left",style:{display:h?"flex":"none"},onClick:function(){return y(-100)}},n.createElement(_j,{type:"closePanel",style:{fontSize:"12px",transform:"rotate(180deg)"}})),n.createElement("div",{className:"viewer-toolbar",ref:r,onWheel:function(e){e.preventDefault(),0!==e.deltaY&&y(e.deltaY)},onScroll:g},n.createElement("div",{className:"viewer-toolbar-left",ref:i},n.createElement(qz,{placement:"bottom",title:"Reset to initial settings",trigger:["focus","hover"]},n.createElement(wF,{className:"ant-btn-icon-only btn-borderless",onClick:_},n.createElement(fee,null),n.createElement("span",{style:Dee},"Reset to initial settings")))),n.createElement("div",{className:"viewer-toolbar-center",ref:a},T&&n.createElement("div",{className:"viewer-toolbar-group"},w.viewModeRadioButtons&&n.createElement(Oee,{mode:e.viewMode,onViewModeChange:function(e){return x("viewMode",e)}}),w.resetCameraButton&&n.createElement(qz,{placement:"bottom",title:"Reset camera"},n.createElement(wF,{className:"ant-btn-icon-only btn-borderless",onClick:e.resetCamera},n.createElement(_j,{type:"resetView"}))),w.autoRotateButton&&n.createElement(qz,{placement:"bottom",title:I},n.createElement(wF,{className:b(C&&!M),disabled:M||e.renderMode===sk.pathTrace,onClick:function(){return x("autorotate",!C)}},n.createElement(_j,{type:"turnTable"})))),w.fovCellSwitchControls&&e.hasCellId&&e.hasParentImage&&n.createElement("div",{className:"viewer-toolbar-group"},n.createElement(Ree.Group,{value:e.imageType,onChange:function(e){var t=e.target;return x("imageType",t.value)}},n.createElement(Ree.Button,{value:lk.segmentedCell},"Single cell"),n.createElement(Ree.Button,{value:lk.fullField},"Full field"))),n.createElement("div",{className:"viewer-toolbar-group"},n.createElement(pX,{className:"select-render-setting",popupClassName:"viewer-toolbar-dropdown",value:e.renderMode,onChange:function(e){return x("renderMode",e)},getPopupContainer:O},n.createElement(pX.Option,{value:sk.volumetric,key:sk.volumetric},"Volumetric"),e.canPathTrace&&n.createElement(pX.Option,{value:sk.pathTrace,key:sk.pathTrace,disabled:M},"Path trace"),n.createElement(pX.Option,{value:sk.maxProject,key:sk.maxProject},"Max project"))),A&&n.createElement("div",{className:"viewer-toolbar-group"},w.showAxesButton&&n.createElement(qz,{placement:"bottom",title:P},n.createElement(wF,{className:b(S),onClick:function(){return e.changeViewerSetting("showAxes",!e.showAxes)}},n.createElement(_j,{type:"axes"}))),w.showBoundingBoxButton&&n.createElement(qz,{placement:"bottom",title:R},n.createElement(wF,{className:b(E),onClick:function(){return e.changeViewerSetting("showBoundingBox",!e.showBoundingBox)}},n.createElement(_j,{type:"boundingBox"}))))),n.createElement("div",{className:"viewer-toolbar-right viewer-toolbar-group",ref:o},n.createElement(qz,{placement:"bottom",title:"Download"},n.createElement(kee,{cellDownloadHref:e.cellDownloadHref,fovDownloadHref:e.fovDownloadHref,hasFov:e.hasCellId&&e.hasParentImage})),n.createElement(qz,{placement:"bottom",title:"Screenshot"},n.createElement(wF,{className:"ant-btn-icon-only btn-borderless",onClick:e.downloadScreenshot},n.createElement(_j,{type:"camera"}))))),n.createElement("div",{className:"viewer-toolbar-scroll-right",style:{display:p?"flex":"none"},onClick:function(){return y(100)}},n.createElement(_j,{type:"closePanel",style:{fontSize:"12px"}})))}),["imageType","renderMode","viewMode","autorotate","showAxes","showBoundingBox","changeViewerSetting","resetToSavedViewerState"]);function Uee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Fee=function(e){var t=e.index,r=e.channelState,i=e.view3d,o=e.image,a=e.version,s=r.volumeEnabled,l=r.isosurfaceEnabled,c=r.isovalue,u=r.colorizeEnabled,h=r.colorizeAlpha,d=r.opacity,f=r.color,p=function(e,t){var r;(0,n.useEffect)((function(){if(o&&a>0)return e(o)}),[].concat(function(e){if(Array.isArray(e))return Uee(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Uee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uee(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o,a]))};(0,n.useEffect)((function(){o&&(i.setVolumeChannelEnabled(o,t,s),i.updateLuts(o))}),[o,s]),(0,n.useEffect)((function(){o&&i.setVolumeChannelOptions(o,t,{isosurfaceEnabled:l})}),[o,l]),p((function(e){return i.setVolumeChannelOptions(e,t,{isovalue:c})}),[c]),p((function(e){return i.setVolumeChannelOptions(e,t,{isosurfaceOpacity:d})}),[d]),p((function(e){i.setVolumeChannelOptions(e,t,{color:f}),i.updateLuts(e)}),[f]);var m=r.controlPoints,g=r.ramp,v=r.useControlPoints;return p((function(e){if(!(v&&m.length<2)){var n=function(e){return(new E_).createFromControlPoints(e)}(v?m:Xk(g));e.setLut(t,n),i.updateLuts(e)}}),[m,g,v]),p((function(e){if(u){var n=(new E_).createLabelColors(e.getHistogram(t));e.setColorPalette(t,n.lut),e.setColorPaletteAlpha(t,h)}else e.setColorPaletteAlpha(t,0);i.updateLuts(e)}),[u]),p((function(e){e.setColorPaletteAlpha(t,u?h:0),i.updateLuts(e)}),[h]),null};function Bee(e){return Bee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bee(e)}function jee(){jee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new R(r||[]);return i(a,"_invoke",{value:M(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==n&&r.call(w,a)&&(x=w);var S=b.prototype=v.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Bee(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function M(t,n,r){var i=d;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Bee(t)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Vee(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function $ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$ee(Object(n),!0).forEach((function(t){Gee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gee(e,t,n){return(t=function(e){var t=function(e){if("object"!=Bee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Bee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||qee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qee(e,t){if(e){if("string"==typeof e)return Xee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xee(e,t):void 0}}function Xee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Yee=vM.Sider,Kee=vM.Content,Zee={alphaMaskSlider:!0,autoRotateButton:!0,axisClipSliders:!0,brightnessSlider:!0,backgroundColorPicker:!0,boundingBoxColorPicker:!0,colorPresetsDropdown:!0,densitySlider:!0,levelsSliders:!0,interpolationControl:!0,saveSurfaceButtons:!0,fovCellSwitchControls:!0,viewModeRadioButtons:!0,resetCameraButton:!0,showAxesButton:!0,showBoundingBoxButton:!0,metadataViewer:!0},Jee={rawData:void 0,rawDims:void 0,imageUrl:"",parentImageUrl:"",appHeight:"100vh",visibleControls:Zee,viewerSettings:Ek(),cellId:"",imageDownloadHref:"",parentImageDownloadHref:"",pixelSize:void 0,canvasMargin:"0 0 0 0",view3dRef:void 0},Qee={t:WE.T_PLUS,z:WE.Z_PLUS,y:WE.Y_PLUS,x:WE.X_PLUS},ete=function(e,t,n){var r=fk[1],i=Wee(pk,2),o=i[0],a=i[1];t&&(r+=150,a+=150),n&&(o+=120,e.setShowTimestepIndicator(!0)),e.setAxisPosition(fk[0],r),e.setTimestepIndicatorPosition(pk[0],a),e.setScaleBarPosition(o,a)};const tte=function(e){var t,r,i,o,a;e=Hee(Hee({},Jee),e);var s=(0,n.useContext)(Xj).ref,l=s.current,c=l.channelSettings,u=l.setChannelSettings,h=l.changeViewerSetting,d=l.changeChannelSetting,f=l.applyColorPresets,p=l.setSavedViewerChannelSettings,m=l.getCurrentViewerChannelSettings,g=l.getChannelsAwaitingReset,v=l.getChannelsAwaitingResetOnLoad,y=l.onResetChannel;(0,n.useMemo)((function(){e.viewerChannelSettings&&p(e.viewerChannelSettings)}),[e.viewerChannelSettings]);var b=Jk((function(){return new k_}));void 0!==e.view3dRef&&(e.view3dRef.current=b);var x=Jk((function(){return new nC(1e9,10,4)}));b.loaderContext=x;var _,w,S,E,C,M,T,A,P,R,I,O=(0,n.useRef)(),k=Wee((0,n.useState)(null),2),L=k[0],N=k[1],D=(0,n.useRef)(""),z=Wee((w=(_=nee(n.useState([]),2))[0],S=_[1],E=Jk((function(){return new Map})),M=(C=nee(n.useState([]),2))[0],T=C[1],A=n.useCallback((function(e){var t;console.error(e);var n=cee(e),r=(null!==(t=E.get(n))&&void 0!==t?t:0)+1;S((function(t){return[].concat(tee(t),[e])})),T((function(e){return[].concat(tee(e),[r])})),E.set(n,r)}),[]),P=n.useCallback((function(){S((function(e){return e.slice(1)})),T((function(e){return e.slice(1)}))}),[]),R=n.useCallback((function(){S([]),T([])}),[]),I=M[0],[w.length>0&&n.createElement(uee,{errors:w,firstErrorCount:I,onSkipError:P,afterClose:R}),A]),2),U=z[0],F=z[1],B=function(e){F(e),q(!1)};(0,n.useEffect)((function(){return b.setLoadErrorHandler((function(e,t){return B(t)})),function(){return b.setLoadErrorHandler(void 0)}}),[b]);var j=null!==(t=null==L?void 0:L.imageInfo.volumeSize)&&void 0!==t?t:{x:0,y:0,z:0},V=null!==(r=null==L?void 0:L.imageInfo.subregionSize)&&void 0!==r?r:{x:0,y:0,z:0},$=null!==(i=null==L?void 0:L.imageInfo.times)&&void 0!==i?i:1,H=(0,n.useRef)([]),G=Wee((0,n.useState)(!1),2),W=G[0],q=G[1],X=Wee((0,n.useState)(!1),2),Y=X[0],K=X[1],Z=function(){var e,t,r=(e=(0,n.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kk(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],a=(0,n.useRef)(i);return[i,(0,n.useCallback)((function(e){a.current=e,o(e)}),[]),(0,n.useCallback)((function(){return a.current}),[])]}(),J=Wee(Z,3),Q=J[0],ee=J[1],te=J[2],ne=(0,n.useRef)([]),re=Wee((0,n.useState)({}),2),ie=re[0],oe=re[1],ae=Wee((0,n.useState)((function(){return window.innerWidth<970})),2),se=ae[0],le=ae[1],ce=Wee((0,n.useState)(!1),2),ue=ce[0],he=ce[1],de=(0,n.useRef)(!0),fe=Jk((function(){return new rL})),pe=Wee((0,n.useState)(null),2),me=pe[0],ge=pe[1];fe.onPlayingAxisChanged=function(e){var t,n;if(null===(t=O.current)||void 0===t||t.setPrefetchPriority(e?[Qee[e]]:[]),null===(n=O.current)||void 0===n||n.syncMultichannelLoading(!!e),L)if(null===e)b.setScaleLevelBias(L,0);else{var r="t"===e||j[e]!==V[e];b.setScaleLevelBias(L,r?1:0)}ge(e)};var ve=function(e){ee(new Array(e).fill(0))},ye=function(e,t,n){var r,i,o,a=e.getChannel(n);!function(e,t,n){var r=e.getChannel(n);if(H.current[n]&&t.controlPoints&&t.ramp&&!v().has(n)){var i=ne.current[n];if(t.useControlPoints){var o=Yk(Xk(t.ramp),i,r);d(n,{ramp:qk(o),controlPoints:r.lut.controlPoints})}else{var a=qk(r.lut.controlPoints),s=Yk(t.controlPoints,i,r);d(n,{controlPoints:s,ramp:a})}}else{var l=Wk(e,n,m()),c=l.ramp,u=l.controlPoints;d(n,{controlPoints:u,ramp:qk(c)}),y(n)}}(e,t,n),ne.current[n]=[a.rawMin,a.rawMax],b.updateLuts(e),b.onVolumeData(e,[n]),b.setVolumeChannelEnabled(e,n,t.volumeEnabled),e.channelNames[n]===(null===(r=m())||void 0===r?void 0:r.maskChannelName)&&b.setVolumeChannelAsMask(e,n),H.current[n]=!0,q(!1),i=n,(o=te().slice())[i]++,ee(o),e.isLoaded()&&(b.updateActiveChannels(e),K(!0),fe.onImageLoaded())},be=function(e){var t=function(e,t){if(!e)return{};if(!t)return n={},r=gk,i=e.map((function(e,t){return t})),(r=function(e){var t=function(e){if("object"!=Nk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Nk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nk(t)?t:t+""}(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n;var n,r,i,o=t.groups,a={},s=[];if(void 0!==o){var l,c=Dk(o);try{var u=function(){var t=l.value;a[t.name]=[],t.channels.forEach((function(n){e.forEach((function(e,r){s.includes(r)||Uk(e,r,n)&&(a[t.name].push(r),s.push(r))}))}))};for(c.s();!(l=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}}if(s.length<e.length){var h=0===o.length?gk:"Other";a[h]=[],e.forEach((function(e,t){s.includes(t)||a[h].push(t)}))}return a}(e,m());if(oe(t),e.every((function(e,t){var n;return jk(e,t,m())===(null===(n=c[t])||void 0===n?void 0:n.displayName)}))){var n=e.map((function(e,t){return Hee(Hee({},c[t]),{},{name:e})}));return u(n),n}var r=e.map((function(e,t){return iL(e,t,Mk(t),m())}));return u(r),r},xe=function(e,t){N(e);var n=t||c;b.removeAllVolumes(),b.addVolume(e,{channels:e.channelNames.map((function(e){var t,r=(t=e,(n||s.current.channelSettings).find((function(e){return e.name===t})));return r?{enabled:r.volumeEnabled,isosurfaceEnabled:r.isosurfaceEnabled,isovalue:r.isovalue,isosurfaceOpacity:r.opacity,color:r.color}:{}}))}),ete(b,de.current,e.imageInfo.times>1),Re.current.forEach((function(t){return t(e)})),fe.stepAxis=function(t){if("t"===t)h("time",(s.current.time+1)%e.imageInfo.times);else{var n=e.imageInfo.volumeSize[t],r=s.current.slice[t]*n;h("slice",Hee(Hee({},s.current.slice),{},Gee({},t,(r+1)%n/n)))}},fe.getVolumeIsLoaded=function(){return e.isLoaded()},b.updateActiveChannels(e),b.setCameraMode(we.viewMode)},_e=function(){var t,n=(t=jee().mark((function t(){var n,r,i,o,a,l,c,u,h,d,f,p,g,v,y,_,w,S;return jee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(r=e).imageUrl,o=r.parentImageUrl,a=r.rawData,l=r.rawDims,c=s.current.imageType===lk.fullField&&void 0!==o,(u=c?o:i)!==D.current||a||l){t.next=5;break}return t.abrupt("return");case 5:return q(!0),K(!1),H.current=[],(h=new j_).time=s.current.time,t.next=12,x.onOpen();case 12:return d={},a&&l&&(d.fileType=qE.DATA,d.rawArrayOptions={data:a,metadata:l}),t.prev=14,t.next=17,x.createLoader(u,Hee({},d));case 17:return O.current=t.sent,t.next=20,O.current.createVolume(h,(function(e,t){var n=s.current.channelSettings[t];ye(e,n,t)}));case 20:f=t.sent,t.next=27;break;case 23:throw t.prev=23,t.t0=t.catch(14),B(t.t0),t.t0;case 27:p=f.imageInfo.channelNames,g=be(p),b.removeAllVolumes(),ve(p.length),xe(f,g),ne.current=new Array(p.length).fill(void 0),(v=new j_).time=s.current.time,y=g?g.map((function(e,t){return e.volumeEnabled?t:-1})).filter((function(e){return e>=0})):[],(_=null===(n=m())||void 0===n?void 0:n.maskChannelName)&&(w=p.indexOf(_))>=0&&!y.includes(w)&&y.push(w),v.channels=y,we.viewMode===ak.xy&&(S=we.slice,v.subregion=new eA(new ZT(0,0,S.z),new ZT(1,1,S.z))),O.current.loadVolumeData(f,v).catch((function(e){throw B(e),e})),D.current=u;case 42:case"end":return t.stop()}}),t,null,[[14,23]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Vee(o,r,i,a,s,"next",e)}function s(e){Vee(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),we=s.current,Se=(0,n.useCallback)((function(e,t){L&&b.saveChannelIsosurface(L,e,t)}),[L]),Ee=(0,n.useCallback)((function(){b.capture((function(e){var t=document.createElement("a");t.href=e,t.download="screenshot.png",t.click()}))}),[]),Ce=(0,n.useCallback)((function(){return b.resetCamera()}),[]),Me=(0,n.useCallback)((function(e,t){de.current=e,ete(b,e,t),b.setShowScaleBar(!1),b.setShowTimestepIndicator(!1),b.setShowAxis(!1)}),[we.showAxes]),Te=(0,n.useCallback)((function(){b.setShowScaleBar(!0),b.setShowTimestepIndicator(!0),we.showAxes&&b.setShowAxis(!0)}),[we.showAxes]),Ae=(0,n.useCallback)((function(){var t=e,n=t.metadata,r=t.metadataFormatter,i=null==L?void 0:L.imageMetadata;return i&&r&&(i=r(i)),i&&Object.keys(i).length>0?Hee({Image:i},n):n||{}}),[e.metadata,e.metadataFormatter,L]);(0,n.useEffect)((function(){var e=(0,yM.debounce)((function(){window.innerWidth<970?ue||(le(!0),he(!0)):he(!1)}),500);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[ue]),(0,n.useEffect)((function(){b.setCameraMode(we.viewMode)}),[]),(0,n.useEffect)((function(){_e()}),[e.imageUrl,e.cellId,we.imageType,e.rawDims,e.rawData]),(0,n.useEffect)((function(){return e.onControlPanelToggle&&e.onControlPanelToggle(se)}),[se,e.onControlPanelToggle]),(0,n.useEffect)((function(){window.setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200)}),[se]);var Pe=function(e,t){var r;(0,n.useEffect)((function(){if(L&&Y)return e(L)}),[].concat(function(e){if(Array.isArray(e))return Xee(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||qee(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[L,Y]))},Re=(0,n.useRef)([]);Re.current=[];var Ie=function(e,t){Pe(e,t),Re.current.push(e)};Pe((function(e){b.setCameraMode(we.viewMode),b.resize(null)}),[we.viewMode]),Pe((function(e){we.cameraState&&b.setCameraState(we.cameraState)}),[we.cameraState]),Pe((function(e){return b.setAutoRotate(we.autorotate)}),[we.autorotate]),Pe((function(e){return b.setShowAxis(we.showAxes)}),[we.showAxes]),Pe((function(e){return b.setBackgroundColor(kk(we.backgroundColor))}),[we.backgroundColor]),Pe((function(e){return b.setBoundingBoxColor(e,kk(we.boundingBoxColor))}),[we.boundingBoxColor]),Pe((function(e){return b.setShowBoundingBox(e,we.showBoundingBox)}),[we.showBoundingBox]),Pe((function(e){for(var t=g(),n=0;n<c.length;n++)if(t.has(n)){var r=Wk(e,n,m()),i=r.ramp,o=r.controlPoints;d(n,{controlPoints:o,ramp:qk(i)}),y(n)}}),[c]),Ie((function(e){var t=we.renderMode;b.setMaxProjectMode(e,t===sk.maxProject),b.setVolumeRenderMode(t===sk.pathTrace?I_:R_),b.updateActiveChannels(e)}),[we.renderMode]),Pe((function(e){b.updateMaskAlpha(e,1-we.maskAlpha/100),b.updateActiveChannels(e)}),[we.maskAlpha]),Ie((function(e){we.renderMode,sk.pathTrace;var t=+we.brightness/100;b.updateExposure(t)}),[we.brightness]),Ie((function(e){we.renderMode,sk.pathTrace;var t=+we.density/100;b.updateDensity(e,t)}),[we.density]),Ie((function(e){var t=function(e){var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]);(n>r||n<t)&&(n=.5*(t+r));var i=((n/=255)-(t/=255))/((r/=255)-t),o=4*i*i;return(n-.5)*(n-.5)<5e-4&&(o=1),{min:t,max:r,scale:o}}(we.levels);b.setGamma(e,t.min,t.scale,t.max)}),[we.levels]),(0,n.useEffect)((function(){L&&(q(!0),ve(L.numChannels),b.setTime(L,we.time))}),[we.time]),Ie((function(e){return b.setInterpolationEnabled(e,we.interpolationEnabled)}),[we.interpolationEnabled]),Ie((function(t){var n;return b.setVolumeTranslation(t,(null===(n=e.transform)||void 0===n?void 0:n.translation)||[0,0,0])}),[null===(o=e.transform)||void 0===o?void 0:o.translation]),Ie((function(t){var n;return b.setVolumeRotation(t,(null===(n=e.transform)||void 0===n?void 0:n.rotation)||[0,0,0])}),[null===(a=e.transform)||void 0===a?void 0:a.rotation]);var Oe=function(e,t,n){var r=Wee(t,2),i=r[0],o=r[1];Pe((function(t){var r=!1,a=0,s=1;if(we.viewMode===ak.threeD)a=i,s=o,r=!1;else{r=Rk[we.viewMode]===e;var l=1/t.imageInfo.volumeSize[e];a=r?n:0,s=r?n+l:1,"z"===e&&we.viewMode===ak.xy&&(b.setZSlice(t,Math.floor(n*t.imageInfo.volumeSize.z)),t.isLoaded()||K(!1))}b.setAxisClip(t,e,a-.5,s-.5,r),b.setCameraMode(we.viewMode)}),[i,o,n,we.viewMode])};Oe("x",we.region.x,we.slice.x),Oe("y",we.region.y,we.slice.y),Oe("z",we.region.z,we.slice.z);var ke=(0,n.useMemo)((function(){return Hee(Hee({},Zee),e.visibleControls)}),[e.visibleControls]),Le=(0,n.useMemo)((function(){return L?L.imageInfo.physicalPixelSize.toArray():[1,1,1]}),[null==L?void 0:L.imageInfo.physicalPixelSize]);return n.createElement(Qu,null,U,n.createElement(vM,{className:"cell-viewer-app",style:{height:e.appHeight}},c.map((function(e,t){return n.createElement(Fee,{key:"".concat(t,"_").concat(e.name),channelState:e,index:t,view3d:b,image:L,version:Q[t]})})),n.createElement(Yee,{className:"control-panel-holder",collapsible:!0,defaultCollapsed:!1,collapsedWidth:50,trigger:null,collapsed:se,width:500},n.createElement(I9,{visibleControls:ke,collapsed:se,imageName:null==L?void 0:L.name,hasImage:!!L,pixelSize:Le,channelDataChannels:null==L?void 0:L.channels,channelGroupedByType:ie,setCollapsed:le,saveIsosurface:Se,onApplyColorPresets:f,viewerChannelSettings:e.viewerChannelSettings,getMetadata:Ae})),n.createElement(vM,{className:"cell-viewer-wrapper",style:{margin:e.canvasMargin}},n.createElement(Kee,null,n.createElement(zee,{fovDownloadHref:e.parentImageDownloadHref,cellDownloadHref:e.imageDownloadHref,hasParentImage:!!e.parentImageUrl,hasCellId:!!e.cellId,canPathTrace:!!b&&b.hasWebGL2(),resetCamera:Ce,downloadScreenshot:Ee,visibleControls:ke}),n.createElement(tV,{view3d:b,image:L,loadingImage:W,numSlices:j,numSlicesLoaded:V,numTimesteps:$,playControls:fe,playingAxis:me,appHeight:e.appHeight,visibleControls:ke,onClippingPanelVisibleChange:Me,onClippingPanelVisibleChangeEnd:Te})))))};var nte,rte=a(5215),ite=a(6199),ote=a(5319),ate=a(6336),ste=a(1588),lte="0.4.17",cte="w:"+lte,ute="FIS_v2",hte=((nte={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',nte["not-registered"]="Firebase Installation is not registered.",nte["installation-not-found"]="Firebase Installation not found.",nte["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',nte["app-offline"]="Could not process request. Application offline.",nte["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",nte),dte=new ate.ErrorFactory("installations","Installations",hte);function fte(e){return e instanceof ate.FirebaseError&&e.code.includes("request-failed")}function pte(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function mte(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function gte(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,dte.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function vte(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yte(e,t){var n=t.refreshToken,r=vte(e);return r.append("Authorization",function(e){return ute+" "+e}(n)),r}function bte(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t;return(0,rte.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function xte(e,t){var n=t.fid;return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return(0,rte.__generator)(this,(function(l){switch(l.label){case 0:return t=pte(e),r=vte(e),i={fid:n,authVersion:ute,appId:e.appId,sdkVersion:cte},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,bte((function(){return fetch(t,o)}))];case 1:return(a=l.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=l.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:mte(s.authToken)}];case 3:return[4,gte("Create Installation",a)];case 4:throw l.sent()}}))}))}function _te(e){return new Promise((function(t){setTimeout(t,e)}))}var wte=/^[cdef][\w-]{21}$/;function Ste(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t;return(t=e,btoa(String.fromCharCode.apply(String,(0,rte.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return wte.test(t)?t:""}catch(e){return""}}function Ete(e){return e.appName+"!"+e.appId}var Cte=new Map;function Mte(e,t){var n=Ete(e);Tte(n,t),function(e,t){var n=Pte();n&&n.postMessage({key:e,fid:t}),Rte()}(n,t)}function Tte(e,t){var n,r,i=Cte.get(e);if(i)try{for(var o=(0,rte.__values)(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Ate=null;function Pte(){return!Ate&&"BroadcastChannel"in self&&((Ate=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Tte(e.data.key,e.data.fid)}),Ate}function Rte(){0===Cte.size&&Ate&&(Ate.close(),Ate=null)}var Ite,Ote="firebase-installations-store",kte=null;function Lte(){return kte||(kte=(0,ste.openDb)("firebase-installations-database",1,(function(e){0===e.oldVersion&&e.createObjectStore(Ote)}))),kte}function Nte(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,rte.__generator)(this,(function(s){switch(s.label){case 0:return n=Ete(e),[4,Lte()];case 1:return r=s.sent(),i=r.transaction(Ote,"readwrite"),[4,(o=i.objectStore(Ote)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||Mte(e,t.fid),[2,t]}}))}))}function Dte(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return t=Ete(e),[4,Lte()];case 1:return n=i.sent(),[4,(r=n.transaction(Ote,"readwrite")).objectStore(Ote).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function zte(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,rte.__generator)(this,(function(l){switch(l.label){case 0:return n=Ete(e),[4,Lte()];case 1:return r=l.sent(),i=r.transaction(Ote,"readwrite"),[4,(o=i.objectStore(Ote)).get(n)];case 2:return a=l.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),!s||a&&a.fid===s.fid||Mte(e,s.fid),[2,s]}}))}))}function Ute(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return[4,zte(e,(function(n){var r=function(e){return jte(e||{fid:Ste(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(dte.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,xte(e,t)];case 1:return n=i.sent(),[2,Nte(e,n)];case 2:return fte(r=i.sent())&&409===r.serverCode?[4,Dte(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Nte(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Fte(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Fte(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,rte.__generator)(this,(function(o){switch(o.label){case 0:return[4,Bte(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,_te(100)];case 3:return o.sent(),[4,Bte(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ute(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Bte(e){return zte(e,(function(e){if(!e)throw dte.create("installation-not-found");return jte(e)}))}function jte(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Vte(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,rte.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,l;return(0,rte.__generator)(this,(function(c){switch(c.label){case 0:return e=function(e,t){var n=t.fid;return pte(e)+"/"+n+"/authTokens:generate"}(n,t),i=yte(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:cte}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,bte((function(){return fetch(e,s)}))];case 1:return(l=c.sent()).ok?[4,l.json()]:[3,3];case 2:return[2,mte(c.sent())];case 3:return[4,gte("Generate Auth Token",l)];case 4:throw c.sent()}}))}))}function $te(e,t){return void 0===t&&(t=!1),(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,rte.__generator)(this,(function(o){switch(o.label){case 0:return[4,zte(e.appConfig,(function(r){if(!Gte(r))throw dte.create("not-registered");var i,o=r.authToken;if(!t&&(2===(i=o).requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(i)))return r;if(1===o.requestStatus)return n=function(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return[4,Hte(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,_te(100)];case 3:return i.sent(),[4,Hte(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,$te(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw dte.create("app-offline");var a=function(e){var t={requestStatus:1,requestTime:Date.now()};return(0,rte.__assign)((0,rte.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,rte.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Vte(e,t)];case 1:return n=o.sent(),i=(0,rte.__assign)((0,rte.__assign)({},t),{authToken:n}),[4,Nte(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!fte(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,Dte(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,rte.__assign)((0,rte.__assign)({},t),{authToken:{requestStatus:0}}),[4,Nte(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,a),a}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Hte(e){return zte(e,(function(e){if(!Gte(e))throw dte.create("not-registered");var t;return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?(0,rte.__assign)((0,rte.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Gte(e){return void 0!==e&&2===e.registrationStatus}function Wte(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t;return(0,rte.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ute(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function qte(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,rte.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return pte(e)+"/"+n}(e,t),r=yte(e,t),i={method:"DELETE",headers:r},[4,bte((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,gte("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Xte(e){return dte.create("missing-app-config-values",{valueName:e})}(Ite=ite.default).INTERNAL.registerComponent(new ote.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw Xte("App Configuration");if(!e.name)throw Xte("App Name");try{for(var r=(0,rte.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Xte(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r={appConfig:n,platformLoggerProvider:e.getProvider("platform-logger")},i={app:t,getId:function(){return function(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,rte.__generator)(this,(function(i){switch(i.label){case 0:return[4,Ute(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):$te(e).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),(0,rte.__awaiter)(this,void 0,void 0,(function(){return(0,rte.__generator)(this,(function(n){switch(n.label){case 0:return[4,Wte(e.appConfig)];case 1:return n.sent(),[4,$te(e,t)];case 2:return[2,n.sent().token]}}))}))}(r,e)},delete:function(){return function(e){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,rte.__generator)(this,(function(r){switch(r.label){case 0:return[4,zte(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw dte.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw dte.create("app-offline");case 3:return[4,qte(t,n)];case 4:return r.sent(),[4,Dte(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(e){return function(e,t){var n=e.appConfig;return function(e,t){Pte();var n=Ete(e),r=Cte.get(n);r||(r=new Set,Cte.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=Ete(e),r=Cte.get(n);r&&(r.delete(t),0===r.size&&Cte.delete(n),Rte())}(n,t)}}(r,e)}};return i}),"PUBLIC")),Ite.registerVersion("@firebase/installations",lte);var Yte,Kte,Zte,Jte,Qte=a(2477),ene="https://www.googletagmanager.com/gtag/js";(Kte=Yte||(Yte={})).EVENT="event",Kte.SET="set",Kte.CONFIG="config",(Jte=Zte||(Zte={})).ADD_SHIPPING_INFO="add_shipping_info",Jte.ADD_PAYMENT_INFO="add_payment_info",Jte.ADD_TO_CART="add_to_cart",Jte.ADD_TO_WISHLIST="add_to_wishlist",Jte.BEGIN_CHECKOUT="begin_checkout",Jte.CHECKOUT_PROGRESS="checkout_progress",Jte.EXCEPTION="exception",Jte.GENERATE_LEAD="generate_lead",Jte.LOGIN="login",Jte.PAGE_VIEW="page_view",Jte.PURCHASE="purchase",Jte.REFUND="refund",Jte.REMOVE_FROM_CART="remove_from_cart",Jte.SCREEN_VIEW="screen_view",Jte.SEARCH="search",Jte.SELECT_CONTENT="select_content",Jte.SELECT_ITEM="select_item",Jte.SELECT_PROMOTION="select_promotion",Jte.SET_CHECKOUT_OPTION="set_checkout_option",Jte.SHARE="share",Jte.SIGN_UP="sign_up",Jte.TIMING_COMPLETE="timing_complete",Jte.VIEW_CART="view_cart",Jte.VIEW_ITEM="view_item",Jte.VIEW_ITEM_LIST="view_item_list",Jte.VIEW_PROMOTION="view_promotion",Jte.VIEW_SEARCH_RESULTS="view_search_results";var tne,nne=new Qte.Logger("@firebase/analytics");function rne(e,t,n,r,i,o){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var a,s,l,c;return(0,rte.__generator)(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=u.sent(),(l=s.find((function(e){return e.measurementId===i})))?[4,t[l.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return c=u.sent(),nne.error(c),[3,8];case 8:return e(Yte.CONFIG,i,o),[2]}}))}))}function ine(e,t,n,r,i){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var o,a,s,l,c,u,h,d;return(0,rte.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=f.sent(),l=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,u=a;c<u.length&&(h=u[c],"break"!==l(h));c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return f.sent(),e(Yte.EVENT,r,i||{}),[3,5];case 4:return d=f.sent(),nne.error(d),[3,5];case 5:return[2]}}))}))}var one=((tne={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",tne["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",tne["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",tne["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",tne["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",tne["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",tne["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",tne["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',tne["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',tne),ane=new ate.ErrorFactory("analytics","Analytics",one),sne=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function lne(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function cne(e){var t;return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,l;return(0,rte.__generator)(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:lne(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return l=c.sent(),(null===(t=l.error)||void 0===t?void 0:t.message)&&(s=l.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw ane.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function une(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=sne),(0,rte.__awaiter)(this,void 0,void 0,(function(){var t,a,s,l,c,u,h;return(0,rte.__generator)(this,(function(d){switch(d.label){case 0:t=e.appId,a=e.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,hne(n,i)];case 2:return d.sent(),[3,4];case 3:if(s=d.sent(),a)return nne.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return d.trys.push([4,6,,7]),[4,cne(e)];case 5:return l=d.sent(),r.deleteThrottleMetadata(t),[2,l];case 6:if(!function(e){if(!(e instanceof ate.FirebaseError))return!1;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(c=d.sent())){if(r.deleteThrottleMetadata(t),a)return nne.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return u=503===Number(c.httpStatus)?(0,ate.calculateBackoffMillis)(o,r.intervalMillis,30):(0,ate.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:o+1},r.setThrottleMetadata(t,h),nne.debug("Calling attemptFetch again in "+u+" millis"),[2,une(e,h,n,r)];case 7:return[2]}}))}))}function hne(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(ane.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var dne=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();var fne,pne,mne={},gne=[],vne={},yne="dataLayer",bne="gtag",xne=!1;function _ne(e){if(xne)throw ane.create("already-initialized");e.dataLayerName&&(yne=e.dataLayerName),e.gtagName&&(bne=e.gtagName)}function wne(e,t){!function(){var e=[];if((0,ate.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,ate.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=ane.create("invalid-analytics-context",{errorInfo:t});nne.warn(n.message)}}();var n,r,i=e.options.appId;if(!i)throw ane.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ane.create("no-api-key");nne.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=mne[i])throw ane.create("already-exists",{id:i});if(!xne){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(ene))return r}return null})()||(n=yne,(r=document.createElement("script")).src=ene+"?l="+n,r.async=!0,document.head.appendChild(r)),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(yne);var o=function(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var s;return(0,rte.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),i!==Yte.EVENT?[3,2]:[4,ine(e,t,n,o,a)];case 1:return l.sent(),[3,5];case 2:return i!==Yte.CONFIG?[3,4]:[4,rne(e,t,n,r,o,a)];case 3:return l.sent(),[3,5];case 4:e(Yte.SET,o),l.label=5;case 5:return[3,7];case 6:return s=l.sent(),nne.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(mne,gne,vne,yne,bne),a=o.wrappedGtag,s=o.gtagCore;pne=a,fne=s,xne=!0}mne[i]=function(e,t,n,r,i){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var o,a,s,l,c,u,h;return(0,rte.__generator)(this,(function(d){switch(d.label){case 0:return o=function(e,t){return void 0===t&&(t=sne),(0,rte.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,l=this;return(0,rte.__generator)(this,(function(c){if(n=e.options,r=n.appId,i=n.apiKey,o=n.measurementId,!r)throw ane.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw ane.create("no-api-key")}return a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new dne,setTimeout((function(){return(0,rte.__awaiter)(l,void 0,void 0,(function(){return(0,rte.__generator)(this,(function(e){return s.abort(),[2]}))}))}),6e4),[2,une({appId:r,apiKey:i,measurementId:o},a,s,t)]}))}))}(e),o.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&nne.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return nne.error(e)})),t.push(o),a=function(){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var e;return(0,rte.__generator)(this,(function(t){switch(t.label){case 0:return(0,ate.isIndexedDBAvailable)()?[3,1]:(nne.warn(ane.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,ate.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),nne.warn(ane.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([o,a])];case 1:return s=d.sent(),l=s[0],c=s[1],i("js",new Date),(h={}).origin="firebase",h.update=!0,u=h,null!=c&&(u.firebase_id=c),i(Yte.CONFIG,l.measurementId,u),[2,l.measurementId]}}))}))}(e,gne,vne,t,fne);var l={app:e,logEvent:function(e,t,n){(function(e,t,n,r,i){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,rte.__generator)(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(Yte.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=(0,rte.__assign)((0,rte.__assign)({},r),{send_to:o}),e(Yte.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(pne,mne[i],e,t,n).catch((function(e){return nne.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var i;return(0,rte.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(Yte.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Yte.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(pne,mne[i],e,t).catch((function(e){return nne.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var i;return(0,rte.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(Yte.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Yte.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(pne,mne[i],e,t).catch((function(e){return nne.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,l;return(0,rte.__generator)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(Yte.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=c.sent(),e(Yte.CONFIG,l,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(pne,mne[i],e,t).catch((function(e){return nne.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,rte.__awaiter)(this,void 0,void 0,(function(){var n;return(0,rte.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(mne[i],e).catch((function(e){return nne.error(e)}))},INTERNAL:{delete:function(){return delete mne[i],Promise.resolve()}}};return l}var Sne="analytics";function Ene(){return(0,rte.__awaiter)(this,void 0,void 0,(function(){return(0,rte.__generator)(this,(function(e){switch(e.label){case 0:if((0,ate.isBrowserExtension)())return[2,!1];if(!(0,ate.areCookiesEnabled)())return[2,!1];if(!(0,ate.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,ate.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}!function(e){e.INTERNAL.registerComponent(new ote.Component(Sne,(function(e){return wne(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:_ne,EventName:Zte,isSupported:Ene})),e.INTERNAL.registerComponent(new ote.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(Sne).getImmediate().logEvent}}catch(e){throw ane.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.0")}(ite.default);var Cne=a(5577),Mne=a.n(Cne);a(1241),Mne().initializeApp({apiKey:"AIzaSyD691xhXsWl-8QU_9htjZnMUd7siWVCTAE",appId:"1:40711248674:web:511cb4cede47191274237b",authDomain:"allen-cell-resource.firebaseapp.com",databaseURL:"https://allen-cell-resource.firebaseio.com",measurementId:"G-8553S8ESS7",messagingSenderId:"40711248674",projectId:"allen-cell-resource",storageBucket:"allen-cell-resource.appspot.com"}),Cne.analytics.isSupported().then((function(e){e&&Mne().analytics()}));var Tne=Mne().firestore();function Ane(e){return Ane="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ane(e)}function Pne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pne(Object(n),!0).forEach((function(t){kne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ine(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lne(r.key),r)}}function One(e,t,n){return t&&Ine(e.prototype,t),n&&Ine(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kne(e,t,n){return(t=Lne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lne(e){var t=function(e){if("object"!=Ane(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ane(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ane(t)?t:t+""}const Nne=One((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kne(this,"getDoc",(function(e){return Tne.doc(e).get()})),kne(this,"getCollection",(function(e){return Tne.collection(e).get()})),kne(this,"getAvailableDatasets",(function(){return Tne.collection("dataset-descriptions").get().then((function(e){var t=[];return e.forEach((function(e){var n,r=e.data();(!(n=location.hostname)||n.includes("localhost")||n.includes("staging")||n.includes("stg")||r.production)&&t.push(r)})),t}))})),kne(this,"setCollectionRef",(function(e){t.collectionRef=Tne.collection("cfe-datasets").doc(e)})),kne(this,"getManifest",(function(e){return Tne.doc(e).get().then((function(e){return e.data()}))})),kne(this,"selectDataset",(function(e){return t.getManifest(e).then((function(e){return t.featuresDataPath=e.featuresDataPath,t.thumbnailRoot=e.thumbnailRoot,t.downloadRoot=e.downloadRoot,t.volumeViewerDataRoot=e.volumeViewerDataRoot,t.featuresDisplayOrder=e.featuresDisplayOrder,t.cellLineDataPath=e.cellLineDataPath,t.fileInfoPath=e.fileInfoPath,t.featuresDataOrder=e.featuresDataOrder,t.featureDefsPath=e.featureDefsPath,t.albumPath=e.albumPath,{defaultXAxis:e.defaultXAxis,defaultYAxis:e.defaultYAxis,thumbnailRoot:e.thumbnailRoot,downloadRoot:e.downloadRoot,volumeViewerDataRoot:e.volumeViewerDataRoot}}))})),kne(this,"getFileInfoByCellId",(function(e){return t.getDoc("".concat(t.fileInfoPath,"/").concat(e)).then((function(e){var t=e.data();if(t)return Rne(Rne({},t),{},{CellId:t.CellId.toString(),FOVId:t.FOVId.toString()})}))})),kne(this,"getFileInfoByArrayOfCellIds",(function(e){return Promise.all(e.map((function(e){return t.getDoc("".concat(t.fileInfoPath,"/").concat(e)).then((function(e){var t=e.data();if(t)return Rne(Rne({},t),{},{CellId:t.CellId.toString(),FOVId:t.FOVId.toString()})}))})))})),this.featuresDataPath="",this.cellLineDataPath="",this.thumbnailRoot="",this.downloadRoot="",this.volumeViewerDataRoot="",this.featuresDisplayOrder=[],this.fileInfoPath="",this.datasetId="",this.featuresDataOrder=[],this.albumPath="",this.featureDefsPath="",this.collectionRef=Tne.collection("cfe-datasets").doc("v1")}));function Dne(e){var t={};for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}function zne(e,t){var n={};for(var r in e)(0,yM.isEqual)(e[r],t[r])||(n[r]=e[r]);return n}function Une(e,t,n){return Math.min(Math.max(e,t),n)}function Fne(e){return Fne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fne(e)}var Bne,jne,Vne,$ne,Hne,Gne,Wne,qne,Xne,Yne,Kne,Zne,Jne,Qne,ere,tre,nre;function rre(){rre=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new R(r||[]);return i(a,"_invoke",{value:M(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==n&&r.call(w,a)&&(x=w);var S=b.prototype=v.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Fne(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function M(t,n,r){var i=d;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Fne(t)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ire(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ore(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ire(Object(n),!0).forEach((function(t){gre(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ire(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function are(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function sre(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){are(o,r,i,a,s,"next",e)}function s(e){are(o,r,i,a,s,"throw",e)}a(void 0)}))}}function lre(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||hre(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cre(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=hre(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ure(e){return function(e){if(Array.isArray(e))return dre(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hre(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hre(e,t){if(e){if("string"==typeof e)return dre(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dre(e,t):void 0}}function dre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vre(r.key),r)}}function pre(e,t,n){return t&&fre(e.prototype,t),n&&fre(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gre(e,t,n){return(t=vre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vre(e){var t=function(e){if("object"!=Fne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fne(t)?t:t+""}var yre=/%2C/g,bre=/%3A/g,xre=[255,255,255],_re=/^c[0-9]+$/,wre=/^-?[a-z0-9.]*:[ ]*-?[a-z0-9.]*$/,Sre=/^-?[0-9.]*:-?[0-9.]*$/,Ere=/^[0-9.]*,[0-9.]*,[0-9.]*$/,Cre=/^([0-9.]*:[0-9.]*)(,[0-9.]*:[0-9.]*){2}$/,Mre=new RegExp("(([0-9a-fA-F]{6})|".concat("1",")")),Tre=/-?[0-9.]*/,Are=new RegExp("(".concat(Tre.source,":").concat(Tre.source,":").concat(Mre.source,")")),Pre=new RegExp("^".concat(Mre.source,"$")),Rre=new RegExp("^".concat(Are.source,"(,").concat(Are.source,")*$")),Ire=new RegExp("^".concat(Are.source,"(:").concat(Are.source,")*$")),Ore=function(e){return e.View="view",e.Mode="mode",e.Mask="mask",e.Image="image",e.Axes="axes",e.BoundingBox="bb",e.BoundingBoxColor="bbcol",e.BackgroundColor="bgcol",e.Autorotate="rot",e.Brightness="bright",e.Density="dens",e.Levels="lvl",e.Interpolation="interp",e.Region="reg",e.Slice="slice",e.Time="t",e.CameraState="cam",e}({}),kre=function(e){return e.Position="pos",e.Target="tar",e.Up="up",e.OrthoScale="ort",e.Fov="fov",e}({}),Lre=function(e){return e.Color="col",e.Colorize="clz",e.ColorizeAlpha="cza",e.IsosurfaceAlpha="isa",e.Lut="lut",e.Ramp="rmp",e.ControlPoints="cps",e.ControlPointsEnabled="cpe",e.VolumeEnabled="ven",e.SurfaceEnabled="sen",e.IsosurfaceValue="isv",e}({});Lre.Color,Lre.Colorize,Lre.ColorizeAlpha,Lre.IsosurfaceAlpha,Lre.Lut,Lre.ControlPoints,Lre.ControlPointsEnabled,Lre.Ramp,Lre.VolumeEnabled,Lre.SurfaceEnabled,Lre.IsosurfaceValue,Bne=Ore.View,jne=Ore.Mode,Vne=Ore.Mask,$ne=Ore.Image,Hne=Ore.Axes,Gne=Ore.BoundingBox,Wne=Ore.BoundingBoxColor,qne=Ore.BackgroundColor,Xne=Ore.Autorotate,Yne=Ore.Brightness,Kne=Ore.Density,Zne=Ore.Levels,Jne=Ore.Interpolation,Qne=Ore.Region,ere=Ore.Slice,tre=Ore.Time,nre=Ore.CameraState;var Nre=pre((function e(){mre(this,e),gre(this,Bne,void 0),gre(this,jne,void 0),gre(this,Vne,void 0),gre(this,$ne,void 0),gre(this,Hne,void 0),gre(this,Gne,void 0),gre(this,Wne,void 0),gre(this,qne,void 0),gre(this,Xne,void 0),gre(this,Yne,void 0),gre(this,Kne,void 0),gre(this,Zne,void 0),gre(this,Jne,void 0),gre(this,Qne,void 0),gre(this,ere,void 0),gre(this,tre,void 0),gre(this,nre,void 0)})),Dre=pre((function e(){mre(this,e),gre(this,"url",void 0),gre(this,"dataset",void 0),gre(this,"id",void 0)})),zre=pre((function e(){mre(this,e),gre(this,"ch",void 0),gre(this,"luts",void 0),gre(this,"colors",void 0)})),Ure=[].concat(ure(Object.keys(new Nre)),ure(Object.keys(new Dre)),ure(Object.keys(new zre))),Fre=function(e){return-1!==Ure.indexOf(e)},Bre=function(e){return _re.test(e)};function jre(e){var t,n={},r=cre(e.entries());try{for(r.s();!(t=r.n()).done;){var i=lre(t.value,2),o=i[0],a=i[1];(Fre(o)||Bre(o))&&(n[o]=a)}}catch(e){r.e(e)}finally{r.f()}return n}var Vre=function(e){var t=decodeURIComponent(e);return t.endsWith("/")?t.slice(0,-1):t},$re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(e.includes(t)){var n,r=e.split(t).map((function(e){return Vre(e)})),i=cre(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;try{new URL(o)}catch(e){return}}}catch(e){i.e(e)}finally{i.f()}return r}};function Hre(e){if(""===e)return{};var t,n={},r=cre(e.split(","));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.indexOf(":"),a=i.slice(0,o),s=i.slice(o+1);n[decodeURIComponent(a).trim()]=decodeURIComponent(s).trim()}}catch(e){r.e(e)}finally{r.f()}return n}function Gre(e){var t=[];for(var n in e){var r=e[n];if(void 0!==r){var i=encodeURIComponent(r.trim()).replace(bre,":");t.push("".concat(encodeURIComponent(n.trim()),":").concat(i))}}return t.join(",")}function Wre(e,t,n){if(void 0!==e){var r=Number.parseFloat(e);return Number.isNaN(r)?void 0:Une(r,t,n)}}function qre(e,t,n){if(void 0!==e){var r=Number.parseInt(e,10);if(!Number.isNaN(r))return Une(r,t,n)}}function Xre(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return void 0!==e&&Object.values(t).includes(e)?e:n}function Yre(e){if(void 0!==e)return"1"===e}function Kre(e){if(e&&Pre.test(e))return"1"===e?xre:[Number.parseInt(e.slice(0,2),16),Number.parseInt(e.slice(2,4),16),Number.parseInt(e.slice(4,6),16)]}function Zre(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("").toLowerCase()}function Jre(e){if(e&&Ere.test(e)){var t=lre(e.split(",").map((function(e){return Wre(e,0,1)})),3),n=t[0],r=t[1],i=t[2];if(void 0!==n&&void 0!==r&&void 0!==i)return{x:n,y:r,z:i}}}function Qre(e,t){var n,r,i;if(e){var o=null!==(n=null==t?void 0:t.min)&&void 0!==n?n:Number.NEGATIVE_INFINITY,a=null!==(r=null==t?void 0:t.max)&&void 0!==r?r:Number.POSITIVE_INFINITY,s=null!==(i=null==t?void 0:t.separator)&&void 0!==i?i:",",l=lre(e.split(s).map((function(e){return Wre(e,o,a)})),3),c=l[0],u=l[1],h=l[2];if(void 0!==c&&void 0!==u&&void 0!==h)return[c,u,h]}}function eie(e){if(e&&Cre.test(e)){var t=e.split(",").map((function(e){var t=lre(e.split(":").map((function(e){return Wre(e,0,1)})),2),n=t[0],r=t[1];if(void 0!==n&&void 0!==r)return n<r?[n,r]:[r,n]})),n=lre(t,3),r=n[0],i=n[1],o=n[2];if(void 0!==r&&void 0!==i&&void 0!==o)return{x:r,y:i,z:o}}}function tie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Number.isInteger(e)?e.toString():Number(e.toPrecision(t)).toString()}function nie(e){return[e.x,e.y,e.z]}function rie(e){if(void 0!==e)return e?"1":"0"}function iie(e){if(e){var t=Hre(e);return Dne({position:Qre(t[kre.Position],{separator:":"}),target:Qre(t[kre.Target],{separator:":"}),up:Qre(t[kre.Up],{separator:":"}),orthoScale:Wre(t[kre.OrthoScale],0,1/0),fov:Wre(t[kre.Fov],0,180)})}}function oie(e){var t={maskAlpha:qre(e[Ore.Mask],0,100),imageType:Xre(e[Ore.Image],lk),showAxes:Yre(e[Ore.Axes]),showBoundingBox:Yre(e[Ore.BoundingBox]),boundingBoxColor:Kre(e[Ore.BoundingBoxColor]),backgroundColor:Kre(e[Ore.BackgroundColor]),autorotate:Yre(e[Ore.Autorotate]),brightness:Wre(e[Ore.Brightness],0,100),density:Wre(e[Ore.Density],0,100),levels:Qre(e[Ore.Levels],{min:0,max:255}),interpolationEnabled:Yre(e[Ore.Interpolation]),region:eie(e[Ore.Region]),slice:Jre(e[Ore.Slice]),time:qre(e[Ore.Time],0,Number.POSITIVE_INFINITY),renderMode:Xre(e[Ore.Mode],sk),cameraState:iie(e[Ore.CameraState])};if(e.view){var n,r={"3D":ak.threeD,Z:ak.xy,Y:ak.xz,X:ak.yz};n=Object.keys(r).includes(e.view.toUpperCase())?e.view.toUpperCase():"3D",t.viewMode=r[n]}return Dne(t)}function aie(e){if(e.ch){for(var t={groups:[{name:"Channels",channels:[]}]},n=t.groups[0].channels,r=e.ch.split(",").map((function(e){return Number.parseInt(e,10)})),i=0;i<r.length;++i)n.push({match:r[i],enabled:!0});if(e.luts){var o=e.luts.split(",");if(o.length!==2*n.length)console.warn("ILL-FORMED QUERYSTRING: luts must have a min/max for each ch");else for(var a=0;a<n.length;++a)n[a].lut=[o[2*a],o[2*a+1]]}if(e.colors){var s=e.colors.split(",");if(s.length!==n.length)console.warn("ILL-FORMED QUERYSTRING: if colors specified, must have a color for each ch");else for(var l=0;l<n.length;++l)n[l].color=s[l]}return t}}function sie(e){var t=new Map;if(Object.keys(e).forEach((function(n){if(Bre(n)){var r=Number.parseInt(n.slice(1),10);try{var i=function(e,t){var n={match:e,enabled:Yre(t[Lre.VolumeEnabled]),surfaceEnabled:Yre(t[Lre.SurfaceEnabled]),isovalue:Wre(t[Lre.IsosurfaceValue],0,255),surfaceOpacity:Wre(t[Lre.IsosurfaceAlpha],0,1),colorizeEnabled:Yre(t[Lre.Colorize]),colorizeAlpha:Wre(t[Lre.ColorizeAlpha],0,1),controlPointsEnabled:Yre(t[Lre.ControlPointsEnabled])};if(t[Lre.Color]&&Mre.test(t.col)&&(n.color=t[Lre.Color]),t[Lre.Lut]&&wre.test(t.lut)){var r=lre(t[Lre.Lut].split(":"),2),i=r[0],o=r[1];n.lut=[i.trim(),o.trim()]}if(t[Lre.Ramp]&&Sre.test(t.rmp)){var a=lre(t[Lre.Ramp].split(":"),2),s=a[0],l=a[1];n.ramp=[Number.parseFloat(s),Number.parseFloat(l)]}return t[Lre.ControlPoints]&&(n.controlPoints=function(e){if(e&&(Ire.test(e)||Rre.test(e)))return(Rre.test(e)?e.split(",").map((function(e){return e.split(":")})):e.split(":").reduce((function(e,t,n,r){return(n+1)%3==0&&e.push([r[n-2],r[n-1],r[n]]),e}),[])).map((function(e){var t,n,r,i=lre(e,3),o=i[0],a=i[1],s=i[2];return{x:null!==(t=Wre(o,-1/0,1/0))&&void 0!==t?t:0,opacity:null!==(n=Wre(a,0,1))&&void 0!==n?n:1,color:null!==(r=Kre(s))&&void 0!==r?r:xre}})).sort((function(e,t){return e.x-t.x}))}(t[Lre.ControlPoints])),n}(r,Hre(e[n]));t.set(r,i)}catch(e){console.warn("url_utils.getArgsFromParams: Failed to parse channel settings for channel ".concat(r," from URL parameters."),e)}}})),t.size>0)return{groups:[{name:"Channels",channels:Array.from(t.values())}]}}function lie(e,t){return cie.apply(this,arguments)}function cie(){return(cie=sre(rre().mark((function e(t,n){var r,i,o,a,s,l,c,u,h,d,f,p,m;return rre().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Nne,i={},e.next=4,r.getAvailableDatasets();case 4:o=e.sent,a=void 0,s=cre(o),e.prev=7,s.s();case 9:if((l=s.n()).done){e.next=19;break}if(c=l.value,u=c.datasets,h=Object.keys(u),!(d=h.find((function(e){return e===t})))){e.next=17;break}return a=u[d],e.abrupt("break",19);case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(void 0!==a){e.next=30;break}return console.error("No matching dataset: ".concat(t)),e.abrupt("return",{});case 30:return e.next=32,r.selectDataset(a.manifest);case 32:return f=e.sent,p=f.volumeViewerDataRoot+"/",i.imageDownloadHref=f.downloadRoot+"/"+n,e.next=37,r.getFileInfoByCellId(n);case 37:return m=e.sent,i.imageUrl=p+m.volumeviewerPath,i.parentImageUrl=p+m.fovVolumeviewerPath,e.abrupt("return",i);case 41:case"end":return e.stop()}}),e,null,[[7,21,24,27]])})))).apply(this,arguments)}function uie(e){return hie.apply(this,arguments)}function hie(){return(hie=sre(rre().mark((function e(t){var n,r,i,o,a,s,l,c,u;return rre().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=jre(t),r={},i=oie(n),o=aie(n),a=sie(n),r.viewerChannelSettings=null!=a?a:o,!n.url){e.next=17;break}l=null!==(s=$re(n.url))&&void 0!==s?s:Vre(n.url),c=Array.isArray(l)?l[0]:l,r.cellId="1",r.imageUrl=l,r.imageDownloadHref=c,r.parentImageUrl="",r.parentImageDownloadHref="",c.endsWith("json")||r.viewerChannelSettings||(r.viewerChannelSettings={groups:[{name:"Channels",channels:[{match:[0,1,2],enabled:!0},{match:"(.+)",enabled:!1}]}]}),e.next=22;break;case 17:if(!n.dataset||!n.id){e.next=22;break}return e.next=20,lie(n.dataset,n.id);case 20:u=e.sent,r=ore(ore({},r),u);case 22:return e.abrupt("return",{args:Dne(r),viewerSettings:Dne(i)});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const die={prefix:"fas",iconName:"up-right-from-square",icon:[512,512,["external-link-alt"],"f35d","M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-128c0-17.7-14.3-32-32-32L352 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"]};function fie(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pie(Object(n),!0).forEach((function(t){fie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gie=()=>{};let vie={},yie={},bie=null,xie={mark:gie,measure:gie};try{"undefined"!=typeof window&&(vie=window),"undefined"!=typeof document&&(yie=document),"undefined"!=typeof MutationObserver&&(bie=MutationObserver),"undefined"!=typeof performance&&(xie=performance)}catch(yce){}const{userAgent:_ie=""}=vie.navigator||{},wie=vie,Sie=yie,Eie=bie,Cie=xie,Mie=(wie.document,!!Sie.documentElement&&!!Sie.head&&"function"==typeof Sie.addEventListener&&"function"==typeof Sie.createElement),Tie=~_ie.indexOf("MSIE")||~_ie.indexOf("Trident/");var Aie={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Pie=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Rie="classic",Iie="duotone",Oie=[Rie,Iie,"sharp","sharp-duotone"],kie=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Lie=["fak","fa-kit","fakd","fa-kit-duotone"],Nie=["fak","fakd"],Die={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},zie=["fak","fa-kit","fakd","fa-kit-duotone"],Uie={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Fie=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Bie=[1,2,3,4,5,6,7,8,9,10],jie=Bie.concat([11,12,13,14,15,16,17,18,19,20]),Vie=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Die.GROUP,Die.SWAP_OPACITY,Die.PRIMARY,Die.SECONDARY].concat(Bie.map((e=>"".concat(e,"x")))).concat(jie.map((e=>"w-".concat(e))));const $ie="___FONT_AWESOME___",Hie=16,Gie="svg-inline--fa",Wie="data-fa-i2svg",qie="data-fa-pseudo-element",Xie="data-prefix",Yie="data-icon",Kie="fontawesome-i2svg",Zie=["HTML","HEAD","STYLE","SCRIPT"],Jie=(()=>{try{return!0}catch(e){return!1}})();function Qie(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[Rie]})}const eoe=mie({},Aie);eoe[Rie]=mie(mie(mie(mie({},{"fa-duotone":"duotone"}),Aie[Rie]),{fak:"kit","fa-kit":"kit"}),{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"});const toe=Qie(eoe),noe=mie({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});noe[Rie]=mie(mie(mie(mie({},{duotone:"fad"}),noe[Rie]),{kit:"fak"}),{"kit-duotone":"fakd"});const roe=Qie(noe),ioe=mie({},Uie);ioe[Rie]=mie(mie({},ioe[Rie]),{fak:"fa-kit"});const ooe=Qie(ioe),aoe=mie({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});aoe[Rie]=mie(mie({},aoe[Rie]),{"fa-kit":"fak"}),Qie(aoe);const soe=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,loe="fa-layers-text",coe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,uoe=(Qie(mie({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),hoe="duotone-group",doe="primary",foe="secondary",poe=["kit",...Vie],moe=wie.FontAwesomeConfig||{};Sie&&"function"==typeof Sie.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Sie.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));null!=r&&(moe[n]=r)}));const goe={styleDefault:"solid",familyDefault:Rie,cssPrefix:"fa",replacementClass:Gie,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};moe.familyPrefix&&(moe.cssPrefix=moe.familyPrefix);const voe=mie(mie({},goe),moe);voe.autoReplaceSvg||(voe.observeMutations=!1);const yoe={};Object.keys(goe).forEach((e=>{Object.defineProperty(yoe,e,{enumerable:!0,set:function(t){voe[e]=t,boe.forEach((e=>e(yoe)))},get:function(){return voe[e]}})})),Object.defineProperty(yoe,"familyPrefix",{enumerable:!0,set:function(e){voe.cssPrefix=e,boe.forEach((e=>e(yoe)))},get:function(){return voe.cssPrefix}}),wie.FontAwesomeConfig=yoe;const boe=[],xoe=Hie,_oe={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function woe(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Soe(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Eoe(e){return e.classList?Soe(e.classList):(e.getAttribute("class")||"").split(" ").filter((e=>e))}function Coe(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Moe(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";")),"")}function Toe(e){return e.size!==_oe.size||e.x!==_oe.x||e.y!==_oe.y||e.rotate!==_oe.rotate||e.flipX||e.flipY}function Aoe(){const e="fa",t=Gie,n=yoe.cssPrefix,r=yoe.replacementClass;let i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||r!==t){const o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}let Poe=!1;function Roe(){yoe.autoAddCss&&!Poe&&(function(e){if(!e||!Mie)return;const t=Sie.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Sie.head.childNodes;let r=null;for(let e=n.length-1;e>-1;e--){const t=n[e],i=(t.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(i)>-1&&(r=t)}Sie.head.insertBefore(t,r)}(Aoe()),Poe=!0)}var Ioe={mixout:()=>({dom:{css:Aoe,insertCss:Roe}}),hooks:()=>({beforeDOMElementCreation(){Roe()},beforeI2svg(){Roe()}})};const Ooe=wie||{};Ooe[$ie]||(Ooe[$ie]={}),Ooe[$ie].styles||(Ooe[$ie].styles={}),Ooe[$ie].hooks||(Ooe[$ie].hooks={}),Ooe[$ie].shims||(Ooe[$ie].shims=[]);var koe=Ooe[$ie];const Loe=[],Noe=function(){Sie.removeEventListener("DOMContentLoaded",Noe),Doe=1,Loe.map((e=>e()))};let Doe=!1;function zoe(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"==typeof e?Coe(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,'="').concat(Coe(e[n]),'" ')),"").trim()}(n),">").concat(r.map(zoe).join(""),"</").concat(t,">")}function Uoe(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Mie&&(Doe=(Sie.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Sie.readyState),Doe||Sie.addEventListener("DOMContentLoaded",Noe));var Foe=function(e,t,n,r){var i,o,a,s=Object.keys(e),l=s.length,c=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<l;i++)a=c(a,e[o=s[i]],o,e);return a};function Boe(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function joe(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Voe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,i=joe(t);"function"!=typeof koe.hooks.addPack||r?koe.styles[e]=mie(mie({},koe.styles[e]||{}),i):koe.hooks.addPack(e,joe(t)),"fas"===e&&Voe("fa",t)}const{styles:$oe,shims:Hoe}=koe,Goe=Object.keys(ooe),Woe=Goe.reduce(((e,t)=>(e[t]=Object.keys(ooe[t]),e)),{});let qoe=null,Xoe={},Yoe={},Koe={},Zoe={},Joe={};const Qoe=()=>{const e=e=>Foe($oe,((t,n,r)=>(t[r]=Foe(n,e,{}),t)),{});Xoe=e(((e,t,n)=>(t[3]&&(e[t[3]]=n),t[2]&&t[2].filter((e=>"number"==typeof e)).forEach((t=>{e[t.toString(16)]=n})),e))),Yoe=e(((e,t,n)=>(e[n]=n,t[2]&&t[2].filter((e=>"string"==typeof e)).forEach((t=>{e[t]=n})),e))),Joe=e(((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach((t=>{e[t]=n})),e}));const t="far"in $oe||yoe.autoFetchSvg,n=Foe(Hoe,((e,n)=>{const r=n[0];let i=n[1];const o=n[2];return"far"!==i||t||(i="fas"),"string"==typeof r&&(e.names[r]={prefix:i,iconName:o}),"number"==typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:o}),e}),{names:{},unicodes:{}});Koe=n.names,Zoe=n.unicodes,qoe=oae(yoe.styleDefault,{family:yoe.familyDefault})};var eae;function tae(e,t){return(Xoe[e]||{})[t]}function nae(e,t){return(Joe[e]||{})[t]}function rae(e){return Koe[e]||{prefix:null,iconName:null}}function iae(){return qoe}function oae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=Rie}=t,r=toe[n][e];if(n===Iie&&!e)return"fad";const i=roe[n][e]||roe[n][r],o=e in koe.styles?e:null;return i||o||null}function aae(e){return e.sort().filter(((e,t,n)=>n.indexOf(e)===t))}function sae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const i=Fie.concat(zie),o=aae(e.filter((e=>i.includes(e)))),a=aae(e.filter((e=>!Fie.includes(e)))),s=o.filter((e=>(r=e,!Pie.includes(e)))),[l=null]=s,c=function(e){let t=Rie;const n=Goe.reduce(((e,t)=>(e[t]="".concat(yoe.cssPrefix,"-").concat(t),e)),{});return Oie.forEach((r=>{(e.includes(n[r])||e.some((e=>Woe[r].includes(e))))&&(t=r)})),t}(o),u=mie(mie({},function(e){let t=[],n=null;return e.forEach((e=>{const r=function(e,t){const n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r!==e||""===i||function(e){return~poe.indexOf(e)}(i)?null:i}(yoe.cssPrefix,e);r?n=r:e&&t.push(e)})),{iconName:n,rest:t}}(a)),{},{prefix:oae(l,{family:c})});return mie(mie(mie({},u),function(e){const{values:t,family:n,canonical:r,givenPrefix:i="",styles:o={},config:a={}}=e,s=n===Iie,l=t.includes("fa-duotone")||t.includes("fad"),c="duotone"===a.familyDefault,u="fad"===r.prefix||"fa-duotone"===r.prefix;if(!s&&(l||c||u)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&lae.includes(n)&&(Object.keys(o).find((e=>cae.includes(e)))||a.autoFetchSvg)){const e=kie.get(n).defaultShortPrefixId;r.prefix=e,r.iconName=nae(r.prefix,r.iconName)||r.iconName}return"fa"!==r.prefix&&"fa"!==i||(r.prefix=iae()||"fas"),r}({values:e,family:c,styles:$oe,config:yoe,canonical:u,givenPrefix:r})),function(e,t,n){let{prefix:r,iconName:i}=n;if(e||!r||!i)return{prefix:r,iconName:i};const o="fa"===t?rae(i):{},a=nae(r,i);return i=o.iconName||a||i,r=o.prefix||r,"far"!==r||$oe.far||!$oe.fas||yoe.autoFetchSvg||(r="fas"),{prefix:r,iconName:i}}(n,r,u))}eae=e=>{qoe=oae(e.styleDefault,{family:yoe.familyDefault})},boe.push(eae),Qoe();const lae=Oie.filter((e=>e!==Rie||e!==Iie)),cae=Object.keys(Uie).filter((e=>e!==Rie)).map((e=>Object.keys(Uie[e]))).flat();let uae=[],hae={};const dae={},fae=Object.keys(dae);function pae(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(hae[e]||[]).forEach((e=>{t=e.apply(null,[t,...r])})),t}function mae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(hae[e]||[]).forEach((e=>{e.apply(null,n)}))}function gae(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return dae[e]?dae[e].apply(null,t):void 0}function vae(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||iae();if(t)return t=nae(n,t)||t,Uoe(yae.definitions,n,t)||Uoe(koe.styles,n,t)}const yae=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach((e=>{this.definitions[e]=mie(mie({},this.definitions[e]||{}),r[e]),Voe(e,r[e]);const t=ooe[Rie][e];t&&Voe(t,r[e]),Qoe()}))}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((t=>{const{prefix:r,iconName:i,icon:o}=n[t],a=o[2];e[r]||(e[r]={}),a.length>0&&a.forEach((t=>{"string"==typeof t&&(e[r][t]=o)})),e[r][i]=o})),e}},bae={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Mie?(mae("beforeI2svg",e),gae("pseudoElements2svg",e),gae("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===yoe.autoReplaceSvg&&(yoe.autoReplaceSvg=!0),yoe.observeMutations=!0,n=()=>{_ae({autoReplaceSvgRoot:t}),mae("watch",e)},Mie&&(Doe?setTimeout(n,0):Loe.push(n))}},xae={noAuto:()=>{yoe.autoReplaceSvg=!1,yoe.observeMutations=!1,mae("noAuto")},config:yoe,dom:bae,parse:{icon:e=>{if(null===e)return null;if("object"==typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:nae(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=oae(e[0]);return{prefix:n,iconName:nae(n,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(yoe.cssPrefix,"-"))>-1||e.match(soe))){const t=sae(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||iae(),iconName:nae(t.prefix,t.iconName)||t.iconName}}if("string"==typeof e){const t=iae();return{prefix:t,iconName:nae(t,e)||e}}}},library:yae,findIconDefinition:vae,toHtml:zoe},_ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=Sie}=e;(Object.keys(koe.styles).length>0||yoe.autoFetchSvg)&&Mie&&yoe.autoReplaceSvg&&xae.dom.i2svg({node:t})};function wae(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((e=>zoe(e)))}}),Object.defineProperty(e,"node",{get:function(){if(!Mie)return;const t=Sie.createElement("div");return t.innerHTML=e.html,t.children}}),e}function Sae(e){const{icons:{main:t,mask:n},prefix:r,iconName:i,transform:o,symbol:a,title:s,maskId:l,titleId:c,extra:u,watchable:h=!1}=e,{width:d,height:f}=n.found?n:t,p=Nie.includes(r),m=[yoe.replacementClass,i?"".concat(yoe.cssPrefix,"-").concat(i):""].filter((e=>-1===u.classes.indexOf(e))).filter((e=>""!==e||!!e)).concat(u.classes).join(" ");let g={children:[],attributes:mie(mie({},u.attributes),{},{"data-prefix":r,"data-icon":i,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(f)})};const v=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(d/f*16*.0625,"em")}:{};h&&(g.attributes[Wie]=""),s&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||woe())},children:[s]}),delete g.attributes.title);const y=mie(mie({},g),{},{prefix:r,iconName:i,main:t,mask:n,maskId:l,transform:o,symbol:a,styles:mie(mie({},v),u.styles)}),{children:b,attributes:x}=n.found&&t.found?gae("generateAbstractMask",y)||{children:[],attributes:{}}:gae("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=b,y.attributes=x,a?function(e){let{prefix:t,iconName:n,children:r,attributes:i,symbol:o}=e;const a=!0===o?"".concat(t,"-").concat(yoe.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:mie(mie({},i),{},{id:a}),children:r}]}]}(y):function(e){let{children:t,main:n,mask:r,attributes:i,styles:o,transform:a}=e;if(Toe(a)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};i.style=Moe(mie(mie({},o),{},{"transform-origin":"".concat(r.x+a.x/16,"em ").concat(r.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(y)}function Eae(e){const{content:t,width:n,height:r,transform:i,title:o,extra:a,watchable:s=!1}=e,l=mie(mie(mie({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});s&&(l[Wie]="");const c=mie({},a.styles);Toe(i)&&(c.transform=function(e){let{transform:t,width:n=Hie,height:r=Hie,startCentered:i=!1}=e,o="";return o+=i&&Tie?"translate(".concat(t.x/xoe-n/2,"em, ").concat(t.y/xoe-r/2,"em) "):i?"translate(calc(-50% + ".concat(t.x/xoe,"em), calc(-50% + ").concat(t.y/xoe,"em)) "):"translate(".concat(t.x/xoe,"em, ").concat(t.y/xoe,"em) "),o+="scale(".concat(t.size/xoe*(t.flipX?-1:1),", ").concat(t.size/xoe*(t.flipY?-1:1),") "),o+="rotate(".concat(t.rotate,"deg) "),o}({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=Moe(c);u.length>0&&(l.style=u);const h=[];return h.push({tag:"span",attributes:l,children:[t]}),o&&h.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),h}const{styles:Cae}=koe;function Mae(e){const t=e[0],n=e[1],[r]=e.slice(4);let i=null;return i=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(yoe.cssPrefix,"-").concat(hoe)},children:[{tag:"path",attributes:{class:"".concat(yoe.cssPrefix,"-").concat(foe),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(yoe.cssPrefix,"-").concat(doe),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:i}}const Tae={found:!1,width:512,height:512};function Aae(e,t){let n=t;return"fa"===t&&null!==yoe.styleDefault&&(t=iae()),new Promise(((r,i)=>{if("fa"===n){const n=rae(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&Cae[t]&&Cae[t][e])return r(Mae(Cae[t][e]));!function(e,t){Jie||yoe.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(mie(mie({},Tae),{},{icon:yoe.showMissingIcons&&e&&gae("missingIconAbstract")||{}}))}))}const Pae=()=>{},Rae=yoe.measurePerformance&&Cie&&Cie.mark&&Cie.measure?Cie:{mark:Pae,measure:Pae},Iae='FA "6.7.1"';var Oae=e=>(Rae.mark("".concat(Iae," ").concat(e," begins")),()=>(e=>{Rae.mark("".concat(Iae," ").concat(e," ends")),Rae.measure("".concat(Iae," ").concat(e),"".concat(Iae," ").concat(e," begins"),"".concat(Iae," ").concat(e," ends"))})(e));const kae=()=>{};function Lae(e){return"string"==typeof(e.getAttribute?e.getAttribute(Wie):null)}function Nae(e){return Sie.createElementNS("http://www.w3.org/2000/svg",e)}function Dae(e){return Sie.createElement(e)}function zae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?Nae:Dae)}=t;if("string"==typeof e)return Sie.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(zae(e,{ceFn:n}))})),r}const Uae={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach((e=>{t.parentNode.insertBefore(zae(e),t)})),null===t.getAttribute(Wie)&&yoe.keepOriginalSource){let e=Sie.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~Eoe(t).indexOf(yoe.replacementClass))return Uae.replace(e);const r=new RegExp("".concat(yoe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce(((e,t)=>(t===yoe.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e)),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const i=n.map((e=>zoe(e))).join("\n");t.setAttribute(Wie,""),t.innerHTML=i}};function Fae(e){e()}function Bae(e,t){const n="function"==typeof t?t:kae;if(0===e.length)n();else{let t=Fae;"async"===yoe.mutateApproach&&(t=wie.requestAnimationFrame||Fae),t((()=>{const t=!0===yoe.autoReplaceSvg?Uae.replace:Uae[yoe.autoReplaceSvg]||Uae.replace,r=Oae("mutate");e.map(t),r(),n()}))}}let jae=!1;function Vae(){jae=!0}function $ae(){jae=!1}let Hae=null;function Gae(e){if(!Eie)return;if(!yoe.observeMutations)return;const{treeCallback:t=kae,nodeCallback:n=kae,pseudoElementsCallback:r=kae,observeMutationsRoot:i=Sie}=e;Hae=new Eie((e=>{if(jae)return;const i=iae();Soe(e).forEach((e=>{if("childList"===e.type&&e.addedNodes.length>0&&!Lae(e.addedNodes[0])&&(yoe.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&yoe.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&Lae(e.target)&&~uoe.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(Xie):null,n=e.getAttribute?e.getAttribute(Yie):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=sae(Eoe(e.target));e.target.setAttribute(Xie,t||i),n&&e.target.setAttribute(Yie,n)}else(o=e.target)&&o.classList&&o.classList.contains&&o.classList.contains(yoe.replacementClass)&&n(e.target);var o}))})),Mie&&Hae.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Wae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=function(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let i=sae(Eoe(e));return i.prefix||(i.prefix=iae()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=(o=i.prefix,a=e.innerText,(Yoe[o]||{})[a]||tae(i.prefix,Boe(e.innerText)))),!i.iconName&&yoe.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i;var o,a}(e),o=function(e){const t=Soe(e.attributes).reduce(((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e)),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return yoe.autoA11y&&(n?t["aria-labelledby"]="".concat(yoe.replacementClass,"-title-").concat(r||woe()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=pae("parseNodeAttributes",{},e);let s=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce(((e,t)=>{const n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return mie({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:_oe,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:s,attributes:o}},a)}const{styles:qae}=koe;function Xae(e){const t="nest"===yoe.autoReplaceSvg?Wae(e,{styleParser:!1}):Wae(e);return~t.extra.classes.indexOf(loe)?gae("generateLayersText",e,t):gae("generateSvgReplacementMutation",e,t)}function Yae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Mie)return Promise.resolve();const n=Sie.documentElement.classList,r=e=>n.add("".concat(Kie,"-").concat(e)),i=e=>n.remove("".concat(Kie,"-").concat(e)),o=yoe.autoFetchSvg?[...Lie,...Fie]:Pie.concat(Object.keys(qae));o.includes("fa")||o.push("fa");const a=[".".concat(loe,":not([").concat(Wie,"])")].concat(o.map((e=>".".concat(e,":not([").concat(Wie,"])")))).join(", ");if(0===a.length)return Promise.resolve();let s=[];try{s=Soe(e.querySelectorAll(a))}catch(e){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");const l=Oae("onTree"),c=s.reduce(((e,t)=>{try{const n=Xae(t);n&&e.push(n)}catch(e){Jie||"MissingIcon"===e.name&&console.error(e)}return e}),[]);return new Promise(((e,n)=>{Promise.all(c).then((n=>{Bae(n,(()=>{r("active"),r("complete"),i("pending"),"function"==typeof t&&t(),l(),e()}))})).catch((e=>{l(),n(e)}))}))}function Kae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Xae(e).then((e=>{e&&Bae([e],t)}))}const Zae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=_oe,symbol:r=!1,mask:i=null,maskId:o=null,title:a=null,titleId:s=null,classes:l=[],attributes:c={},styles:u={}}=t;if(!e)return;const{prefix:h,iconName:d,icon:f}=e;return wae(mie({type:"icon"},e),(()=>(mae("beforeDOMElementCreation",{iconDefinition:e,params:t}),yoe.autoA11y&&(a?c["aria-labelledby"]="".concat(yoe.replacementClass,"-title-").concat(s||woe()):(c["aria-hidden"]="true",c.focusable="false")),Sae({icons:{main:Mae(f),mask:i?Mae(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:d,transform:mie(mie({},_oe),n),symbol:r,title:a,maskId:o,titleId:s,extra:{attributes:c,styles:u,classes:l}}))))};var Jae={mixout(){return{icon:(e=Zae,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:vae(t||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:vae(i||{})),e(r,mie(mie({},n),{},{mask:i}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=Yae,e.nodeCallback=Kae,e)}),provides(e){e.i2svg=function(e){const{node:t=Sie,callback:n=()=>{}}=e;return Yae(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:i,prefix:o,transform:a,symbol:s,mask:l,maskId:c,extra:u}=t;return new Promise(((t,h)=>{Promise.all([Aae(n,o),l.iconName?Aae(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((l=>{let[h,d]=l;t([e,Sae({icons:{main:h,mask:d},prefix:o,iconName:n,transform:a,symbol:s,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:i,styles:o}=e;const a=Moe(o);let s;return a.length>0&&(n.style=a),Toe(i)&&(s=gae("generateAbstractTransformGrouping",{main:r,transform:i,containerWidth:r.width,iconWidth:r.width})),t.push(s||r.icon),{children:t,attributes:n}}}},Qae={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return wae({type:"layer"},(()=>{mae("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e((e=>{Array.isArray(e)?e.map((e=>{r=r.concat(e.abstract)})):r=r.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(yoe.cssPrefix,"-layers"),...n].join(" ")},children:r}]}))}})},ese={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:o={}}=t;return wae({type:"counter",content:e},(()=>(mae("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,i=mie(mie(mie({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Moe(r.styles);o.length>0&&(i.style=o);const a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}({content:e.toString(),title:n,extra:{attributes:i,styles:o,classes:["".concat(yoe.cssPrefix,"-layers-counter"),...r]}}))))}})},tse={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=_oe,title:r=null,classes:i=[],attributes:o={},styles:a={}}=t;return wae({type:"text",content:e},(()=>(mae("beforeDOMElementCreation",{content:e,params:t}),Eae({content:e,transform:mie(mie({},_oe),n),title:r,extra:{attributes:o,styles:a,classes:["".concat(yoe.cssPrefix,"-layers-text"),...i]}}))))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:i}=t;let o=null,a=null;if(Tie){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();o=n.width/t,a=n.height/t}return yoe.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,Eae({content:e.innerHTML,width:o,height:a,transform:r,title:n,extra:i,watchable:!0})])}}};const nse=new RegExp('"',"ug"),rse=[1105920,1112319],ise=mie(mie(mie(mie({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),ose=Object.keys(ise).reduce(((e,t)=>(e[t.toLowerCase()]=ise[t],e)),{}),ase=Object.keys(ose).reduce(((e,t)=>{const n=ose[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e}),{});function sse(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(((r,i)=>{if(null!==e.getAttribute(n))return r();const o=Soe(e.children).filter((e=>e.getAttribute(qie)===t))[0],a=wie.getComputedStyle(e,t),s=a.getPropertyValue("font-family"),l=s.match(coe),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return e.removeChild(o),r();if(l&&"none"!==u&&""!==u){const u=a.getPropertyValue("content");let h=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),i=isNaN(r)?"normal":r;return(ose[n]||{})[i]||ase[n]}(s,c);const{value:d,isSecondary:f}=function(e){const t=e.replace(nse,""),n=function(e){const t=e.length;let n,r=e.charCodeAt(0);return r>=55296&&r<=56319&&t>1&&(n=e.charCodeAt(1),n>=56320&&n<=57343)?1024*(r-55296)+n-56320+65536:r}(t),r=n>=rse[0]&&n<=rse[1],i=2===t.length&&t[0]===t[1];return{value:Boe(i?t[0]:t),isSecondary:r||i}}(u),p=l[0].startsWith("FontAwesome");let m=tae(h,d),g=m;if(p){const e=function(e){const t=Zoe[e],n=tae("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);e.iconName&&e.prefix&&(m=e.iconName,h=e.prefix)}if(!m||f||o&&o.getAttribute(Xie)===h&&o.getAttribute(Yie)===g)r();else{e.setAttribute(n,g),o&&e.removeChild(o);const a={iconName:null,title:null,titleId:null,prefix:null,transform:_oe,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:s}=a;s.attributes[qie]=t,Aae(m,h).then((i=>{const o=Sae(mie(mie({},a),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:h,iconName:g,extra:s,watchable:!0})),l=Sie.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(l,e.firstChild):e.appendChild(l),l.outerHTML=o.map((e=>zoe(e))).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function lse(e){return Promise.all([sse(e,"::before"),sse(e,"::after")])}function cse(e){return!(e.parentNode===document.head||~Zie.indexOf(e.tagName.toUpperCase())||e.getAttribute(qie)||e.parentNode&&"svg"===e.parentNode.tagName)}function use(e){if(Mie)return new Promise(((t,n)=>{const r=Soe(e.querySelectorAll("*")).filter(cse).map(lse),i=Oae("searchPseudoElements");Vae(),Promise.all(r).then((()=>{i(),$ae(),t()})).catch((()=>{i(),$ae(),n()}))}))}let hse=!1;const dse=e=>e.toLowerCase().split(" ").reduce(((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0}),fse={x:0,y:0,width:"100%",height:"100%"};function pse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}!function(e,t){let{mixoutsTo:n}=t;uae=e,hae={},Object.keys(dae).forEach((e=>{-1===fae.indexOf(e)&&delete dae[e]})),uae.forEach((e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((e=>{"function"==typeof t[e]&&(n[e]=t[e]),"object"==typeof t[e]&&Object.keys(t[e]).forEach((r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){const t=e.hooks();Object.keys(t).forEach((e=>{hae[e]||(hae[e]=[]),hae[e].push(t[e])}))}e.provides&&e.provides(dae)}))}([Ioe,Jae,Qae,ese,tse,{hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=use,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=Sie}=e;yoe.searchPseudoElements&&use(t)}}},{mixout:()=>({dom:{unwatch(){Vae(),hse=!0}}}),hooks:()=>({bootstrap(){Gae(pae("mutationObserverCallbacks",{}))},noAuto(){Hae&&Hae.disconnect()},watch(e){const{observeMutationsRoot:t}=e;hse?$ae():Gae(pae("mutationObserverCallbacks",{observeMutationsRoot:t}))}})},{mixout:()=>({parse:{transform:e=>dse(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=dse(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:i}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:o,inner:{transform:"".concat(a," ").concat(s," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:mie({},c.outer),children:[{tag:"g",attributes:mie({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:mie(mie({},t.icon.attributes),c.path)}]}]}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?sae(n.split(" ").map((e=>e.trim()))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=iae()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:i,maskId:o,transform:a}=e;const{width:s,icon:l}=r,{width:c,icon:u}=i,h=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:a,containerWidth:c,iconWidth:s}),d={tag:"rect",attributes:mie(mie({},fse),{},{fill:"white"})},f=l.children?{children:l.children.map(pse)}:{},p={tag:"g",attributes:mie({},h.inner),children:[pse(mie({tag:l.tag,attributes:mie(mie({},l.attributes),h.path)},f))]},m={tag:"g",attributes:mie({},h.outer),children:[p]},g="mask-".concat(o||woe()),v="clip-".concat(o||woe()),y={tag:"mask",attributes:mie(mie({},fse),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(x=u,"g"===x.tag?x.children:[x])},y]};var x;return t.push(b,{tag:"rect",attributes:mie({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(g,")")},fse)}),{children:t,attributes:n}}}},{provides(e){let t=!1;wie.matchMedia&&(t=wie.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:mie(mie({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=mie(mie({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:mie(mie({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:mie(mie({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:mie(mie({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:mie(mie({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:mie(mie({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:mie(mie({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:mie(mie({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})}],{mixoutsTo:xae});const mse=xae.parse,gse=xae.icon;function vse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vse(Object(n),!0).forEach((function(t){xse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bse(e){return bse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bse(e)}function xse(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _se(e){return function(e){if(Array.isArray(e))return wse(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wse(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wse(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wse(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sse(e){return t=e,(t-=0)==t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Ese=["style"],Cse=!1;try{Cse=!0}catch(yce){}function Mse(e){return e&&"object"===bse(e)&&e.prefix&&e.iconName&&e.icon?e:mse.icon?mse.icon(e):null===e?null:e&&"object"===bse(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function Tse(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?xse({},e,t):{}}var Ase={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Pse=n.forwardRef((function(e,t){var n=yse(yse({},Ase),e),r=n.icon,i=n.mask,o=n.symbol,a=n.className,s=n.title,l=n.titleId,c=n.maskId,u=Mse(r),h=Tse("classes",[].concat(_se(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,o=e.bounce,a=e.shake,s=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,v=e.size,y=e.rotation,b=e.pull,x=(xse(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":a,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),null!=v),xse(t,"fa-rotate-".concat(y),null!=y&&0!==y),xse(t,"fa-pull-".concat(b),null!=b),xse(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(x).map((function(e){return x[e]?e:null})).filter((function(e){return e}))}(n)),_se((a||"").split(" ")))),d=Tse("transform","string"==typeof n.transform?mse.transform(n.transform):n.transform),f=Tse("mask",Mse(i)),p=gse(u,yse(yse(yse(yse({},h),d),f),{},{symbol:o,title:s,titleId:l,maskId:c}));if(!p)return function(){var e;!Cse&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=p.abstract,g={ref:t};return Object.keys(n).forEach((function(e){Ase.hasOwnProperty(e)||(g[e]=n[e])})),zse(m[0],g)}));Pse.displayName="FontAwesomeIcon",Pse.propTypes={beat:hK().bool,border:hK().bool,beatFade:hK().bool,bounce:hK().bool,className:hK().string,fade:hK().bool,flash:hK().bool,mask:hK().oneOfType([hK().object,hK().array,hK().string]),maskId:hK().string,fixedWidth:hK().bool,inverse:hK().bool,flip:hK().oneOf([!0,!1,"horizontal","vertical","both"]),icon:hK().oneOfType([hK().object,hK().array,hK().string]),listItem:hK().bool,pull:hK().oneOf(["right","left"]),pulse:hK().bool,rotation:hK().oneOf([0,90,180,270]),shake:hK().bool,size:hK().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:hK().bool,spinPulse:hK().bool,spinReverse:hK().bool,symbol:hK().oneOfType([hK().bool,hK().string]),title:hK().string,titleId:hK().string,transform:hK().oneOfType([hK().string,hK().object]),swapOpacity:hK().bool};var Rse,Ise,Ose,kse,Lse,Nse,Dse,zse=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Sse(t.slice(0,r)),o=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Sse(t)]=r}return e}),{attrs:{}}),a=r.style,s=void 0===a?{}:a,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,Ese);return o.attrs.style=yse(yse({},o.attrs.style),s),t.apply(void 0,[n.tag,yse(yse({},o.attrs),l)].concat(_se(i)))}.bind(null,n.createElement);function Use(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Fse=Fu.div(Rse||(Rse=Use(["\n  display: flex;\n  ","\n"])),(function(e){if(e.$gap)return Lu(Ise||(Ise=Use(["\n        gap: ","px;\n      "])),e.$gap)})),Bse=Fu(Fse)(Ose||(Ose=Use(["\n  flex-direction: column;\n"]))),jse=Fu(Bse)(kse||(kse=Use(["\n  align-items: center;\n"]))),Vse=Fu(Fse)(Lse||(Lse=Use(["\n  flex-direction: row;\n"]))),$se=Fu(Vse)(Nse||(Nse=Use(["\n  align-items: center;\n"]))),Hse=Fu.span(Dse||(Dse=Use(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n"])));function Gse(e){return n.createElement("a",{href:e.href,style:{whiteSpace:"nowrap"},rel:"noopener noreferrer",target:"_blank"},e.children,n.createElement(Pse,{icon:die,size:"sm",style:{marginBottom:"0px",marginLeft:"3px"}}))}function Wse(){return Wse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wse.apply(null,arguments)}const qse=function(e){return n.createElement("svg",Wse({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 83.85 84.84",role:"img"},e),n.createElement("defs",null,n.createElement("style",null,".cls-2{fill:#fff}")),n.createElement("g",{"data-name":"Layer 1"},n.createElement("path",{d:"M27.87 17.74a42.6 42.6 0 0 0 0-15.28 41.6 41.6 0 0 0-13.08 7.64 41.9 41.9 0 0 0 13.08 7.64M22.91 31.31a43 43 0 0 0 4.41-11.06 44.6 44.6 0 0 1-14.41-8.43 42.5 42.5 0 0 0-11.7 20.46 44.8 44.8 0 0 1 14.4 8.41 42 42 0 0 0 7.3-9.38M56 17.74a41.9 41.9 0 0 0 13.07-7.64A41.8 41.8 0 0 0 56 2.47a42.8 42.8 0 0 0 0 15.27M.69 50a42.1 42.1 0 0 0 13-7.62 42.1 42.1 0 0 0-13-7.62A42.4 42.4 0 0 0 .69 50M56 67.1a43 43 0 0 0 0 15.27 41.9 41.9 0 0 0 13-7.63 41.9 41.9 0 0 0-13-7.64M82.64 52.55a44.6 44.6 0 0 1-14.39-8.41 42.2 42.2 0 0 0-7.31 9.38 42.8 42.8 0 0 0-4.39 11.07A44.6 44.6 0 0 1 71 73a42.53 42.53 0 0 0 11.64-20.45M12.91 73a44.4 44.4 0 0 1 14.4-8.43 42.6 42.6 0 0 0-4.4-11.06 42.3 42.3 0 0 0-7.3-9.39 44.6 44.6 0 0 1-14.4 8.42A42.56 42.56 0 0 0 12.91 73M68.25 40.69a44.8 44.8 0 0 1 14.39-8.41 42.5 42.5 0 0 0-11.7-20.46 44.3 44.3 0 0 1-14.39 8.42 42.8 42.8 0 0 0 4.39 11.07 41.8 41.8 0 0 0 7.31 9.38M83.16 34.8a42.2 42.2 0 0 0-13 7.62 42.4 42.4 0 0 0 13 7.62 42.4 42.4 0 0 0 0-15.24M30.25 66.32a45.4 45.4 0 0 1 0 16.83 41.24 41.24 0 0 0 23.37 0 45.6 45.6 0 0 1 0-16.83 41.17 41.17 0 0 0-23.35 0M27.83 82.37a43 43 0 0 0 0-15.27 41.7 41.7 0 0 0-13 7.64 41.7 41.7 0 0 0 13 7.63M53.6 18.52a45.8 45.8 0 0 1 0-16.84 41.4 41.4 0 0 0-23.35 0 45 45 0 0 1 0 16.85 41.6 41.6 0 0 0 11.68 1.67 41.3 41.3 0 0 0 11.67-1.68",className:"cls-2"}),n.createElement("path",{d:"M58.76 32.58A45.4 45.4 0 0 1 54.14 21a44 44 0 0 1-12.21 1.74A43.6 43.6 0 0 1 29.73 21a45.4 45.4 0 0 1-4.64 11.57 45 45 0 0 1-7.63 9.84 44.3 44.3 0 0 1 7.63 9.83 45 45 0 0 1 4.62 11.58 43.75 43.75 0 0 1 24.43 0 45.8 45.8 0 0 1 4.62-11.58 44.6 44.6 0 0 1 7.63-9.83 45 45 0 0 1-7.63-9.84",style:{fill:"#fff"}})))};function Xse(){return Xse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xse.apply(null,arguments)}const Yse=function(e){return n.createElement("svg",Xse({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 329.24 84.84",role:"img"},e),n.createElement("defs",null,n.createElement("style",null,".cls-1,.cls-2{fill:#fff}")),n.createElement("g",{id:"Layer_2","data-name":"Layer 2"},n.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},n.createElement("path",{d:"M264.93 32.04h-1.49V18.5h-4.93v-1.35h11.35v1.35h-4.93zM274.39 30.69h7.87v1.35h-9.37V17.15h9.12v1.35h-7.62v5.11h7.12v1.34h-7.12zM249.94 32.48a5.7 5.7 0 0 1-2.72-.58 5 5 0 0 1-1.69-1.46 5.5 5.5 0 0 1-.86-1.93 8.7 8.7 0 0 1-.24-2v-9.3h1.5v9.17a7.2 7.2 0 0 0 .21 1.75 4.3 4.3 0 0 0 .67 1.52 3.4 3.4 0 0 0 1.24 1.07 4.56 4.56 0 0 0 3.78 0 3.6 3.6 0 0 0 1.24-1.07 4.5 4.5 0 0 0 .67-1.52 7.2 7.2 0 0 0 .21-1.75v-9.17h1.5v9.34a8.7 8.7 0 0 1-.24 2 5.4 5.4 0 0 1-.87 1.93 5 5 0 0 1-1.69 1.46 5.7 5.7 0 0 1-2.71.58",className:"cls-1"}),n.createElement("path",{d:"M294.43 26h-1.6l-1 6.07h-1l1.03-6.07h-1.44l.16-.82H292l.32-1.87a5.3 5.3 0 0 1 .27-1 2.8 2.8 0 0 1 .51-.81 2.4 2.4 0 0 1 .75-.55 2.3 2.3 0 0 1 1-.21h.4a2 2 0 0 1 .4.08l-.23.86a2.4 2.4 0 0 0-.68-.09 1.3 1.3 0 0 0-.61.14 1.24 1.24 0 0 0-.42.37 2.2 2.2 0 0 0-.27.57 4 4 0 0 0-.17.69l-.27 1.79h1.63ZM301.52 28a2.5 2.5 0 0 0-.15-.88 2 2 0 0 0-.43-.7 1.8 1.8 0 0 0-.69-.46 2.2 2.2 0 0 0-.91-.17 2.5 2.5 0 0 0-1.17.27 2.9 2.9 0 0 0-.93.74 3.7 3.7 0 0 0-.62 1.07 3.7 3.7 0 0 0-.22 1.3 2.5 2.5 0 0 0 .14.87 2 2 0 0 0 1.11 1.17 2.4 2.4 0 0 0 .91.17 2.7 2.7 0 0 0 1.2-.27 3 3 0 0 0 .93-.74 3.4 3.4 0 0 0 .61-1.07 4 4 0 0 0 .22-1.3m-3 4.2a3.4 3.4 0 0 1-1.26-.22 3 3 0 0 1-1-.61 2.7 2.7 0 0 1-.65-.94 3.2 3.2 0 0 1-.23-1.22 4.8 4.8 0 0 1 .29-1.64 4.5 4.5 0 0 1 .84-1.35 4.1 4.1 0 0 1 1.28-.92 3.8 3.8 0 0 1 1.63-.34 3.7 3.7 0 0 1 1.28.21 3 3 0 0 1 1 .62 2.7 2.7 0 0 1 .64.94 2.9 2.9 0 0 1 .23 1.2 4.6 4.6 0 0 1-.29 1.67 4.05 4.05 0 0 1-.88 1.4 3.9 3.9 0 0 1-1.28.91 3.8 3.8 0 0 1-1.63.34M305.68 25.94c.05-.29.08-.56.1-.79h.93c0 .19 0 .39-.07.62s-.06.41-.09.56a3 3 0 0 1 1-1 2.36 2.36 0 0 1 1.31-.38h.33l.31.06-.23.94-.27-.06a3 3 0 0 0-.4 0 2 2 0 0 0-.77.15 1.85 1.85 0 0 0-.7.46 3.2 3.2 0 0 0-.55.81 4.4 4.4 0 0 0-.36 1.19l-.62 3.5h-1l.93-5.37c0-.19.08-.43.12-.73",className:"cls-2"}),n.createElement("path",{d:"M217.64 32.04h-1.49V18.5h-4.93v-1.35h11.35v1.35h-4.93zM225.6 17.15h1.5v14.89h-1.5zM236.55 32.04h-1.49V18.5h-4.93v-1.35h11.35v1.35h-4.93zM207.89 19.55a3.7 3.7 0 0 0-1.23-1.09 3.74 3.74 0 0 0-1.8-.41 4 4 0 0 0-1.11.17 3.1 3.1 0 0 0-1 .52 2.6 2.6 0 0 0-.74.87 2.55 2.55 0 0 0-.28 1.24A2.3 2.3 0 0 0 202 22a2.7 2.7 0 0 0 .71.79 4.5 4.5 0 0 0 1 .53l1.19.42c.51.17 1 .35 1.54.55a5.4 5.4 0 0 1 1.4.77 3.6 3.6 0 0 1 1 1.19 3.9 3.9 0 0 1 .39 1.84 4.1 4.1 0 0 1-.42 1.93 4 4 0 0 1-1.09 1.33 4.6 4.6 0 0 1-1.53.78 6.2 6.2 0 0 1-1.74.25 6.7 6.7 0 0 1-1.33-.13 6.3 6.3 0 0 1-1.27-.41 4.9 4.9 0 0 1-1.12-.7 5.2 5.2 0 0 1-.91-1l1.29-1a3.8 3.8 0 0 0 1.34 1.33 3.7 3.7 0 0 0 2 .54 3.9 3.9 0 0 0 1.15-.18 3.2 3.2 0 0 0 1-.54 3.1 3.1 0 0 0 .78-.91 2.84 2.84 0 0 0 0-2.54 2.8 2.8 0 0 0-.81-.87 4.7 4.7 0 0 0-1.14-.57c-.43-.16-.88-.31-1.35-.47a14 14 0 0 1-1.43-.52 4.8 4.8 0 0 1-1.27-.77 3.55 3.55 0 0 1-.91-1.17 3.9 3.9 0 0 1-.34-1.7 3.75 3.75 0 0 1 .43-1.85 3.8 3.8 0 0 1 1.11-1.28 4.7 4.7 0 0 1 1.52-.74 6.2 6.2 0 0 1 1.64-.23 5.55 5.55 0 0 1 2.55.54 4.3 4.3 0 0 1 1.6 1.27ZM105.75 26.74h6.49L109 18.83ZM103.59 32H102l6.36-14.89h1.45L116.08 32h-1.66l-1.62-3.91h-7.61ZM120.57 30.69h6.86v1.35h-8.36V17.15h1.5zM132 30.69h6.86v1.35h-8.36V17.15h1.5zM143.43 30.69h7.88v1.35h-9.37V17.15h9.12v1.35h-7.63v5.11h7.13v1.34h-7.13zM165.5 29.83h.04V17.15h1.5v14.89h-1.87l-8.56-12.81h-.05v12.81h-1.49V17.15h1.87zM177.81 17.15h1.5v14.89h-1.5zM194.47 29.83h.04V17.15h1.5v14.89h-1.87l-8.56-12.81h-.05v12.81h-1.49V17.15h1.87z",className:"cls-1"}),n.createElement("path",{d:"M120.75 61.51a10 10 0 0 1-1.4 1.66 9 9 0 0 1-1.9 1.38 10.4 10.4 0 0 1-2.39.94 11.1 11.1 0 0 1-2.85.35 12.3 12.3 0 0 1-4.77-.91 11.2 11.2 0 0 1-3.76-2.53 11.3 11.3 0 0 1-2.47-3.83 13.7 13.7 0 0 1 0-9.71 11.4 11.4 0 0 1 6.26-6.35 12.1 12.1 0 0 1 4.72-.91 11.3 11.3 0 0 1 2.47.26 12 12 0 0 1 2.27.75 9.5 9.5 0 0 1 1.93 1.15 6.7 6.7 0 0 1 1.45 1.52l-1.93 1.43a6.3 6.3 0 0 0-1-1.11 6.6 6.6 0 0 0-1.4-1 9 9 0 0 0-1.76-.69 7.8 7.8 0 0 0-2.05-.26 9.4 9.4 0 0 0-4 .81 8.9 8.9 0 0 0-3 2.2 9.5 9.5 0 0 0-1.87 3.2 11.4 11.4 0 0 0-.65 3.83 11.1 11.1 0 0 0 .66 3.83 9.7 9.7 0 0 0 1.89 3.2 8.9 8.9 0 0 0 3 2.19 9.14 9.14 0 0 0 3.94.82 8.75 8.75 0 0 0 3.74-.82 7 7 0 0 0 3-2.61ZM128.35 63.17h12.21v2.08h-14.53V42.18h14.14v2.09h-11.82v7.92h11.05v2.08h-11.05zM148.71 63.17h10.63v2.08h-12.95V42.18h2.32zM166.42 63.17h10.63v2.08H164.1V42.18h2.32zM201.44 45.9a5.6 5.6 0 0 0-1.9-1.68 5.8 5.8 0 0 0-2.81-.64 6 6 0 0 0-1.7.26 5 5 0 0 0-1.58.8 3.93 3.93 0 0 0-1.58 3.28 3.53 3.53 0 0 0 .42 1.82A3.8 3.8 0 0 0 193.4 51a6.7 6.7 0 0 0 1.57.83l1.84.65c.8.26 1.6.54 2.4.85a8.9 8.9 0 0 1 2.17 1.18 5.7 5.7 0 0 1 1.62 1.83 5.9 5.9 0 0 1 .61 2.85 6.5 6.5 0 0 1-.65 3 6.4 6.4 0 0 1-1.69 2.07 7 7 0 0 1-2.38 1.2 9.5 9.5 0 0 1-2.69.39 10.4 10.4 0 0 1-2.06-.21 8.7 8.7 0 0 1-2-.64 7.8 7.8 0 0 1-1.74-1.07 7.5 7.5 0 0 1-1.42-1.5l2-1.5A6 6 0 0 0 193 63a5.8 5.8 0 0 0 3.15.83 6.1 6.1 0 0 0 1.77-.27 5 5 0 0 0 1.62-.85 4.8 4.8 0 0 0 1.2-1.4 3.9 3.9 0 0 0 .46-1.94 4 4 0 0 0-.46-2 4.3 4.3 0 0 0-1.2-1.37 7.6 7.6 0 0 0-1.78-.9c-.66-.24-1.36-.48-2.09-.72s-1.49-.51-2.22-.81a7.7 7.7 0 0 1-2-1.19 5.6 5.6 0 0 1-1.4-1.81 6 6 0 0 1-.53-2.64 5.9 5.9 0 0 1 .66-2.87 6.1 6.1 0 0 1 1.72-2 7.3 7.3 0 0 1 2.39-1.06 9.3 9.3 0 0 1 2.54-.35 8.6 8.6 0 0 1 4 .83 6.75 6.75 0 0 1 2.48 2ZM229 61.51a9.4 9.4 0 0 1-1.4 1.66 9 9 0 0 1-1.9 1.38 10.5 10.5 0 0 1-2.38.94 11.2 11.2 0 0 1-2.85.35 12.25 12.25 0 0 1-4.77-.91 11.2 11.2 0 0 1-3.7-2.53 11.5 11.5 0 0 1-2.47-3.83 13.7 13.7 0 0 1 0-9.71A11.6 11.6 0 0 1 212 45a11.4 11.4 0 0 1 3.77-2.53 12 12 0 0 1 4.72-.91 11.3 11.3 0 0 1 2.46.26 11.6 11.6 0 0 1 2.27.75 9.5 9.5 0 0 1 1.93 1.15 6.5 6.5 0 0 1 1.45 1.52l-1.93 1.43a5.9 5.9 0 0 0-.95-1.11 6.6 6.6 0 0 0-1.4-1 9 9 0 0 0-1.76-.69 7.8 7.8 0 0 0-2-.26 9.4 9.4 0 0 0-4 .81 8.9 8.9 0 0 0-3 2.2 9.5 9.5 0 0 0-1.87 3.2 11.4 11.4 0 0 0-.64 3.83 11.1 11.1 0 0 0 .66 3.83 9.8 9.8 0 0 0 1.88 3.2 9 9 0 0 0 3 2.19 9.2 9.2 0 0 0 3.95.82 8.7 8.7 0 0 0 3.73-.82 7.1 7.1 0 0 0 3-2.61ZM234.22 42.18h2.32v23.07h-2.32zM246.21 63.17h12.2v2.08h-14.52V42.18h14.14v2.09h-11.82v7.92h11.05v2.08h-11.05zM280.42 61.84h.06V42.18h2.32v23.08h-2.9l-13.27-19.85h-.07v19.85h-2.31V42.18h2.9zM309.44 61.51a9.5 9.5 0 0 1-1.44 1.66 8.7 8.7 0 0 1-1.89 1.38 10.4 10.4 0 0 1-2.39.94 11.1 11.1 0 0 1-2.85.35 12.25 12.25 0 0 1-4.77-.91 11.2 11.2 0 0 1-3.76-2.53 11.3 11.3 0 0 1-2.47-3.83 13.7 13.7 0 0 1 0-9.71 11.4 11.4 0 0 1 6.26-6.35 12.1 12.1 0 0 1 4.72-.91 11.3 11.3 0 0 1 2.47.26 12 12 0 0 1 2.27.75 9.5 9.5 0 0 1 1.93 1.15 6.7 6.7 0 0 1 1.48 1.52l-1.93 1.43a6.3 6.3 0 0 0-.95-1.11 6.6 6.6 0 0 0-1.4-1 9 9 0 0 0-1.76-.69 7.8 7.8 0 0 0-2.05-.26 9.4 9.4 0 0 0-4 .81 8.8 8.8 0 0 0-3 2.2 9.5 9.5 0 0 0-1.87 3.2 11.4 11.4 0 0 0-.65 3.83 11.1 11.1 0 0 0 .66 3.83 9.7 9.7 0 0 0 1.89 3.2 8.9 8.9 0 0 0 3 2.19 9.14 9.14 0 0 0 3.94.82 8.75 8.75 0 0 0 3.74-.82 7 7 0 0 0 3-2.61ZM317.04 63.17h12.21v2.09h-14.53V42.18h14.14v2.09h-11.82v7.92h11.05v2.08h-11.05zM27.87 17.74a42.6 42.6 0 0 0 0-15.28 41.6 41.6 0 0 0-13.08 7.64 41.9 41.9 0 0 0 13.08 7.64M22.91 31.31a43 43 0 0 0 4.41-11.06 44.6 44.6 0 0 1-14.41-8.43 42.5 42.5 0 0 0-11.7 20.46 44.8 44.8 0 0 1 14.4 8.41 42 42 0 0 0 7.3-9.38M56 17.74a41.9 41.9 0 0 0 13.07-7.64A41.8 41.8 0 0 0 56 2.47a42.8 42.8 0 0 0 0 15.27M.69 50a42.1 42.1 0 0 0 13-7.62 42.1 42.1 0 0 0-13-7.62A42.4 42.4 0 0 0 .69 50M56 67.1a43 43 0 0 0 0 15.27 41.9 41.9 0 0 0 13-7.63 41.9 41.9 0 0 0-13-7.64M82.64 52.55a44.6 44.6 0 0 1-14.39-8.41 42.2 42.2 0 0 0-7.31 9.38 42.8 42.8 0 0 0-4.39 11.07A44.6 44.6 0 0 1 71 73a42.53 42.53 0 0 0 11.64-20.45M12.91 73a44.4 44.4 0 0 1 14.4-8.43 42.6 42.6 0 0 0-4.4-11.06 42.3 42.3 0 0 0-7.3-9.39 44.6 44.6 0 0 1-14.4 8.42A42.56 42.56 0 0 0 12.91 73M68.25 40.69a44.8 44.8 0 0 1 14.39-8.41 42.5 42.5 0 0 0-11.7-20.46 44.3 44.3 0 0 1-14.39 8.42 42.8 42.8 0 0 0 4.39 11.07 41.8 41.8 0 0 0 7.31 9.38M83.16 34.8a42.2 42.2 0 0 0-13 7.62 42.4 42.4 0 0 0 13 7.62 42.4 42.4 0 0 0 0-15.24M30.25 66.32a45.4 45.4 0 0 1 0 16.83 41.24 41.24 0 0 0 23.37 0 45.6 45.6 0 0 1 0-16.83 41.17 41.17 0 0 0-23.35 0M27.83 82.37a43 43 0 0 0 0-15.27 41.7 41.7 0 0 0-13 7.64 41.7 41.7 0 0 0 13 7.63M53.6 18.52a45.8 45.8 0 0 1 0-16.84 41.4 41.4 0 0 0-23.35 0 45 45 0 0 1 0 16.85 41.6 41.6 0 0 0 11.68 1.67 41.3 41.3 0 0 0 11.67-1.68",className:"cls-2"}),n.createElement("path",{d:"M58.76 32.58A45.4 45.4 0 0 1 54.14 21a44 44 0 0 1-12.21 1.74A43.6 43.6 0 0 1 29.73 21a45.4 45.4 0 0 1-4.64 11.57 45 45 0 0 1-7.63 9.84 44.3 44.3 0 0 1 7.63 9.83 45 45 0 0 1 4.62 11.58 43.75 43.75 0 0 1 24.43 0 45.8 45.8 0 0 1 4.62-11.58 44.6 44.6 0 0 1 7.63-9.83 45 45 0 0 1-7.63-9.84",className:"cls-1"}))))};function Kse(){return Kse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kse.apply(null,arguments)}const Zse=function(e){return n.createElement("svg",Kse({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 12 12",role:"img"},e),n.createElement("path",{fill:"currentColor",d:"M1.117 3.12a.47.47 0 0 1 .662.035L6.006 7.85l4.227-4.695a.469.469 0 1 1 .697.627L6.372 8.845A.47.47 0 0 1 6.006 9a.47.47 0 0 1-.366-.155L1.082 3.782a.47.47 0 0 1 .035-.662"}))};var Jse,Qse,ele,tle,nle;function rle(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ile=Fu(Rt)(Jse||(Jse=rle(["\n  &&,\n  && h1 {\n    color: var(--color-header-title);\n    font-size: 20px;\n    margin: 0;\n\n    &:hover {\n      color: var(--color-header-hover-title);\n    }\n  }\n"]))),ole=Fu.a(Qse||(Qse=rle(["\n  position: relative;\n  width: 140px;\n  height: 36px;\n\n  div > svg:last-child {\n    display: none;\n  }\n\n  // Toggle between the two logos based on the currently available screen real estate\n  // Width is determined here experimentally to prevent popping as the other buttons in the header wrap.\n  @media only screen and (max-width: ","px) {\n    & {\n      max-width: 36px;\n      max-height: 36px;\n    }\n\n    & > div > svg:first-child {\n      display: none;\n    }\n\n    & > div > svg:last-child {\n      display: block;\n      visibility: visible;\n    }\n  }\n"])),610),ale=Fu.div(ele||(ele=rle(["\n  height: 24px;\n  width: 1px;\n  background-color: var(--color-layout-dividers);\n  display: inline-block;\n  margin: 0 16px;\n\n  @media only screen and (max-width: ","px) {\n    margin: 0 10px;\n  }\n"])),610);function sle(e){var t=e.noNavigate;return n.createElement($se,null,n.createElement(ole,{href:"https://www.allencell.org/",rel:"noopener noreferrer",target:"_blank"},n.createElement("div",{title:"https://www.allencell.org"},n.createElement(Yse,null),n.createElement(qse,null))),n.createElement(ale,null),n.createElement(ile,{to:"/","aria-label":"Go to home page",rel:"noopener noreferrer",target:t?"_blank":void 0},n.createElement("h1",null,"Vol-E")))}var lle=Fu.div(tle||(tle=rle(["\n  position: sticky;\n  z-index: 2000;\n  top: 0;\n  left: 0;\n"]))),cle=Fu($se)(nle||(nle=rle(["\n  flex-wrap: wrap;\n  justify-content: space-between;\n  width: auto;\n  height: fit-content;\n  min-height: var(--header-content-height);\n  padding: 12px 20px;\n  border-bottom: 1px solid var(--color-header-border);\n  gap: 10px;\n  position: sticky;\n  background-color: var(--color-header-bg);\n"])));function ule(e){return n.createElement(lle,null,n.createElement(cle,null,n.createElement(sle,{noNavigate:e.noNavigate}),e.children),e.alertElement)}function hle(e){return!!(null==e?void 0:e.then)}const dle=e=>{const{type:t,children:r,prefixCls:i,buttonProps:o,close:a,autoFocus:s,emitEvent:l,isSilent:c,quitOnNullishReturnValue:u,actionFn:h}=e,d=n.useRef(!1),f=n.useRef(null),[p,m]=Ua(!1),g=function(){null==a||a.apply(void 0,arguments)};return n.useEffect((()=>{let e=null;return s&&(e=setTimeout((()=>{var e;null===(e=f.current)||void 0===e||e.focus({preventScroll:!0})}))),()=>{e&&clearTimeout(e)}}),[]),n.createElement(wF,Object.assign({},bU(t),{onClick:e=>{if(d.current)return;if(d.current=!0,!h)return void g();let t;if(l){if(t=h(e),u&&!hle(t))return d.current=!1,void g(e)}else if(h.length)t=h(a),d.current=!1;else if(t=h(),!hle(t))return void g();(e=>{hle(e)&&(m(!0),e.then((function(){m(!1,!0),g.apply(void 0,arguments),d.current=!1}),(e=>{if(m(!1,!0),d.current=!1,!(null==c?void 0:c()))return Promise.reject(e)})))})(t)},loading:p,prefixCls:i},o,{ref:f}),r)},fle=n.createContext({}),{Provider:ple}=fle,mle=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:r,isSilent:i,mergedOkCancel:o,rootPrefixCls:a,close:s,onCancel:l,onConfirm:c}=(0,n.useContext)(fle);return o?n.createElement(dle,{isSilent:i,actionFn:l,close:function(){null==s||s.apply(void 0,arguments),null==c||c(!1)},autoFocus:"cancel"===e,buttonProps:t,prefixCls:`${a}-btn`},r):null},gle=()=>{const{autoFocusButton:e,close:t,isSilent:r,okButtonProps:i,rootPrefixCls:o,okTextLocale:a,okType:s,onConfirm:l,onOk:c}=(0,n.useContext)(fle);return n.createElement(dle,{isSilent:r,type:s||"primary",actionFn:c,close:function(){null==t||t.apply(void 0,arguments),null==l||l(!0)},autoFocus:"ok"===e,buttonProps:i,prefixCls:`${o}-btn`},a)};var vle=n.createContext({});function yle(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function ble(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}const xle=n.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var _le={width:0,height:0,overflow:"hidden",outline:"none"},wle={outline:"none"};const Sle=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.className,o=e.style,a=e.title,s=e.ariaId,l=e.footer,c=e.closable,u=e.closeIcon,h=e.onClose,d=e.children,f=e.bodyStyle,p=e.bodyProps,m=e.modalRender,g=e.onMouseDown,v=e.onMouseUp,y=e.holderRef,b=e.visible,x=e.forceRender,_=e.width,w=e.height,S=e.classNames,E=e.styles,C=n.useContext(vle).panel,M=Sa(y,C),T=(0,n.useRef)(),A=(0,n.useRef)();n.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=T.current)||void 0===e||e.focus({preventScroll:!0})},changeActive:function(e){var t=document.activeElement;e&&t===A.current?T.current.focus({preventScroll:!0}):e||t!==T.current||A.current.focus({preventScroll:!0})}}}));var P={};void 0!==_&&(P.width=_),void 0!==w&&(P.height=w);var R=l?n.createElement("div",{className:va()("".concat(r,"-footer"),null==S?void 0:S.footer),style:Xt({},null==E?void 0:E.footer)},l):null,I=a?n.createElement("div",{className:va()("".concat(r,"-header"),null==S?void 0:S.header),style:Xt({},null==E?void 0:E.header)},n.createElement("div",{className:"".concat(r,"-title"),id:s},a)):null,O=(0,n.useMemo)((function(){return"object"===zt(c)&&null!==c?c:c?{closeIcon:null!=u?u:n.createElement("span",{className:"".concat(r,"-close-x")})}:{}}),[c,u,r]),k=nB(O,!0),L="object"===zt(c)&&c.disabled,N=c?n.createElement("button",nr({type:"button",onClick:h,"aria-label":"Close"},k,{className:"".concat(r,"-close"),disabled:L}),O.closeIcon):null,D=n.createElement("div",{className:va()("".concat(r,"-content"),null==S?void 0:S.content),style:null==E?void 0:E.content},N,I,n.createElement("div",nr({className:va()("".concat(r,"-body"),null==S?void 0:S.body),style:Xt(Xt({},f),null==E?void 0:E.body)},p),d),R);return n.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":a?s:null,"aria-modal":"true",ref:M,style:Xt(Xt({},o),P),className:va()(r,i),onMouseDown:g,onMouseUp:v},n.createElement("div",{ref:T,tabIndex:0,style:wle},n.createElement(xle,{shouldUpdate:b||x},m?m(D):D)),n.createElement("div",{tabIndex:0,ref:A,style:_le}))}));var Ele=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.title,o=e.style,a=e.className,s=e.visible,l=e.forceRender,c=e.destroyOnClose,u=e.motionName,h=e.ariaId,d=e.onVisibleChanged,f=e.mousePosition,p=(0,n.useRef)(),m=Ht(n.useState(),2),g=m[0],v=m[1],y={};function b(){var e,t,n,r,i,o=(n={left:(t=(e=p.current).getBoundingClientRect()).left,top:t.top},i=(r=e.ownerDocument).defaultView||r.parentWindow,n.left+=ble(i),n.top+=ble(i,!0),n);v(f&&(f.x||f.y)?"".concat(f.x-o.left,"px ").concat(f.y-o.top,"px"):"")}return g&&(y.transformOrigin=g),n.createElement(Ds,{visible:s,onVisibleChanged:d,onAppearPrepare:b,onEnterPrepare:b,forceRender:l,motionName:u,removeOnLeave:c,ref:p},(function(s,l){var c=s.className,u=s.style;return n.createElement(Sle,nr({},e,{ref:t,title:i,ariaId:h,prefixCls:r,holderRef:l,style:Xt(Xt(Xt({},u),o),y),className:va()(a,c)}))}))}));Ele.displayName="Content";const Cle=Ele,Mle=function(e){var t=e.prefixCls,r=e.style,i=e.visible,o=e.maskProps,a=e.motionName,s=e.className;return n.createElement(Ds,{key:"mask",visible:i,motionName:a,leavedClassName:"".concat(t,"-mask-hidden")},(function(e,i){var a=e.className,l=e.style;return n.createElement("div",nr({ref:i,style:Xt(Xt({},l),r),className:va()("".concat(t,"-mask"),a,s)},o))}))},Tle=function(e){var t=e.prefixCls,r=void 0===t?"rc-dialog":t,i=e.zIndex,o=e.visible,a=void 0!==o&&o,s=e.keyboard,l=void 0===s||s,c=e.focusTriggerAfterClose,u=void 0===c||c,h=e.wrapStyle,d=e.wrapClassName,f=e.wrapProps,p=e.onClose,m=e.afterOpenChange,g=e.afterClose,v=e.transitionName,y=e.animation,b=e.closable,x=void 0===b||b,_=e.mask,w=void 0===_||_,S=e.maskTransitionName,E=e.maskAnimation,C=e.maskClosable,M=void 0===C||C,T=e.maskStyle,A=e.maskProps,P=e.rootClassName,R=e.classNames,I=e.styles,O=(0,n.useRef)(),k=(0,n.useRef)(),L=(0,n.useRef)(),N=Ht(n.useState(a),2),D=N[0],z=N[1],U=tN();function F(e){null==p||p(e)}var B=(0,n.useRef)(!1),j=(0,n.useRef)(),V=null;M&&(V=function(e){B.current?B.current=!1:k.current===e.target&&F(e)}),(0,n.useEffect)((function(){a&&(z(!0),Zt(k.current,document.activeElement)||(O.current=document.activeElement))}),[a]),(0,n.useEffect)((function(){return function(){clearTimeout(j.current)}}),[]);var $=Xt(Xt(Xt({zIndex:i},h),null==I?void 0:I.wrapper),{},{display:D?null:"none"});return n.createElement("div",nr({className:va()("".concat(r,"-root"),P)},nB(e,{data:!0})),n.createElement(Mle,{prefixCls:r,visible:w&&a,motionName:yle(r,S,E),style:Xt(Xt({zIndex:i},T),null==I?void 0:I.mask),maskProps:A,className:null==R?void 0:R.mask}),n.createElement("div",nr({tabIndex:-1,onKeyDown:function(e){if(l&&e.keyCode===QF.ESC)return e.stopPropagation(),void F(e);a&&e.keyCode===QF.TAB&&L.current.changeActive(!e.shiftKey)},className:va()("".concat(r,"-wrap"),d,null==R?void 0:R.wrapper),ref:k,onClick:V,style:$},f),n.createElement(Cle,nr({},e,{onMouseDown:function(){clearTimeout(j.current),B.current=!0},onMouseUp:function(){j.current=setTimeout((function(){B.current=!1}))},ref:L,closable:x,ariaId:U,prefixCls:r,visible:a&&D,onClose:F,onVisibleChanged:function(e){if(e)Zt(k.current,document.activeElement)||null===(t=L.current)||void 0===t||t.focus();else{if(z(!1),w&&O.current&&u){try{O.current.focus({preventScroll:!0})}catch(e){}O.current=null}D&&(null==g||g())}var t;null==m||m(e)},motionName:yle(r,v,y)}))))};var Ale=function(e){var t=e.visible,r=e.getContainer,i=e.forceRender,o=e.destroyOnClose,a=void 0!==o&&o,s=e.afterClose,l=e.panelRef,c=Ht(n.useState(t),2),u=c[0],h=c[1],d=n.useMemo((function(){return{panel:l}}),[l]);return n.useEffect((function(){t&&h(!0)}),[t]),i||!a||u?n.createElement(vle.Provider,{value:d},n.createElement(wL,{open:t||i||u,autoDestroy:!1,getContainer:r,autoLock:t||u},n.createElement(Tle,nr({},e,{destroyOnClose:a,afterClose:function(){null==s||s(),h(!1)}})))):null};Ale.displayName="Dialog";const Ple=Ale,Rle=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:r}=(0,n.useContext)(fle);return n.createElement(wF,Object.assign({onClick:r},e),t)},Ile=()=>{const{confirmLoading:e,okButtonProps:t,okType:r,okTextLocale:i,onOk:o}=(0,n.useContext)(fle);return n.createElement(wF,Object.assign({},bU(r),{loading:e,onClick:o},t),i)};function Ole(e,t){return n.createElement("span",{className:`${e}-close-x`},t||n.createElement(mB,{className:`${e}-close-icon`}))}const kle=e=>{const{okText:t,okType:r="primary",cancelText:i,confirmLoading:o,onOk:a,onCancel:s,okButtonProps:l,cancelButtonProps:c,footer:u}=e,[h]=NG("Modal",Jo()),d={confirmLoading:o,okButtonProps:l,cancelButtonProps:c,okTextLocale:t||(null==h?void 0:h.okText),cancelTextLocale:i||(null==h?void 0:h.cancelText),okType:r,onOk:a,onCancel:s},f=n.useMemo((()=>d),Wt(Object.values(d)));let p;return"function"==typeof u||void 0===u?(p=n.createElement(n.Fragment,null,n.createElement(Rle,null),n.createElement(Ile,null)),"function"==typeof u&&(p=u(p,{OkBtn:Ile,CancelBtn:Rle})),p=n.createElement(ple,{value:f},p)):p=u,n.createElement(la,{disabled:!1},p)},Lle=new ei("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Nle=new ei("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Dle=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{antCls:n}=e,r=`${n}-fade`,i=t?"&":"";return[Rz(r,Lle,Nle,e.motionDurationMid,t),{[`\n        ${i}${r}-enter,\n        ${i}${r}-appear\n      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]};function zle(e){return{position:e,inset:0}}const Ule=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},zle("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},zle("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:Dle(e)}]},Fle=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${Un(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},Bs(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Un(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:Un(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},$s(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${Un(e.borderRadiusLG)} ${Un(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${Un(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,\n          ${t}-body,\n          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},Ble=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},jle=e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5;return $C(e,{modalHeaderHeight:e.calc(e.calc(r).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},Vle=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${Un(e.paddingMD)} ${Un(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${Un(e.padding)} ${Un(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${Un(e.paddingXS)} ${Un(e.padding)}`:0,footerBorderTop:e.wireframe?`${Un(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${Un(e.borderRadiusLG)} ${Un(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${Un(2*e.padding)} ${Un(2*e.padding)} ${Un(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),$le=YC("Modal",(e=>{const t=jle(e);return[Fle(t),Ble(t),Ule(t),Uz(t,"zoom")]}),Vle,{unitless:{titleLineHeight:!0}});let Hle;Kt()&&window.document.documentElement&&document.documentElement.addEventListener("click",(e=>{Hle={x:e.pageX,y:e.pageY},setTimeout((()=>{Hle=null}),100)}),!0);const Gle=e=>{var t;const{getPopupContainer:r,getPrefixCls:i,direction:o,modal:a}=n.useContext(ia),s=t=>{const{onCancel:n}=e;null==n||n(t)},{prefixCls:l,className:c,rootClassName:u,open:h,wrapClassName:d,centered:f,getContainer:p,focusTriggerAfterClose:m=!0,style:g,visible:v,width:y=520,footer:b,classNames:x,styles:_,children:w,loading:S}=e,E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),C=i("modal",l),M=i(),T=pV(C),[A,P,R]=$le(C,T),I=va()(d,{[`${C}-centered`]:!!f,[`${C}-wrap-rtl`]:"rtl"===o}),O=null===b||S?null:n.createElement(kle,Object.assign({},e,{onOk:t=>{const{onOk:n}=e;null==n||n(t)},onCancel:s})),[k,L,N]=xB(gB(e),gB(a),{closable:!0,closeIcon:n.createElement(mB,{className:`${C}-close-icon`}),closeIconRender:e=>Ole(C,e)}),D=dB(`.${C}-content`),[z,U]=cz("Modal",E.zIndex);return A(n.createElement(iz,{form:!0,space:!0},n.createElement(oz.Provider,{value:U},n.createElement(Ple,Object.assign({width:y},E,{zIndex:z,getContainer:void 0===p?r:p,prefixCls:C,rootClassName:va()(P,u,R,T),footer:O,visible:null!=h?h:v,mousePosition:null!==(t=E.mousePosition)&&void 0!==t?t:Hle,onClose:s,closable:k?{disabled:N,closeIcon:L}:k,closeIcon:L,focusTriggerAfterClose:m,transitionName:pz(M,"zoom",e.transitionName),maskTransitionName:pz(M,"fade",e.maskTransitionName),className:va()(P,c,null==a?void 0:a.className),style:Object.assign(Object.assign({},null==a?void 0:a.style),g),classNames:Object.assign(Object.assign(Object.assign({},null==a?void 0:a.classNames),x),{wrapper:va()(I,null==x?void 0:x.wrapper)}),styles:Object.assign(Object.assign({},null==a?void 0:a.styles),_),panelRef:D}),S?n.createElement(jB,{active:!0,title:!1,paragraph:{rows:4},className:`${C}-body-skeleton`}):w))))},Wle=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:i,fontSize:o,lineHeight:a,modalTitleHeight:s,fontHeight:l,confirmBodyPadding:c}=e,u=`${t}-confirm`;return{[u]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${u}-body-wrapper`]:Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),[`&${t} ${t}-body`]:{padding:c},[`${u}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:i,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(l).sub(i).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(s).sub(i).equal()).div(2).equal()}},[`${u}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${u}-paragraph`]:{maxWidth:`calc(100% - ${Un(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${u}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},[`${u}-content`]:{color:e.colorText,fontSize:o,lineHeight:a},[`${u}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${u}-error ${u}-body > ${e.iconCls}`]:{color:e.colorError},[`${u}-warning ${u}-body > ${e.iconCls},\n        ${u}-confirm ${u}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${u}-info ${u}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${u}-success ${u}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},qle=ZC(["Modal","confirm"],(e=>{const t=jle(e);return[Wle(t)]}),Vle,{order:-1e3});function Xle(e){const{prefixCls:t,icon:r,okText:i,cancelText:o,confirmPrefixCls:a,type:s,okCancel:l,footer:c,locale:u}=e,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let d=r;if(!r&&null!==r)switch(s){case"info":d=n.createElement(B9,null);break;case"success":d=n.createElement(L9,null);break;case"error":d=n.createElement(rX,null);break;default:d=n.createElement(z9,null)}const f=null!=l?l:"confirm"===s,p=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),[m]=NG("Modal"),g=u||m,v=i||(f?null==g?void 0:g.okText:null==g?void 0:g.justOkText),y=o||(null==g?void 0:g.cancelText),b=Object.assign({autoFocusButton:p,cancelTextLocale:y,okTextLocale:v,mergedOkCancel:f},h),x=n.useMemo((()=>b),Wt(Object.values(b))),_=n.createElement(n.Fragment,null,n.createElement(mle,null),n.createElement(gle,null)),w=void 0!==e.title&&null!==e.title,S=`${a}-body`;return n.createElement("div",{className:`${a}-body-wrapper`},n.createElement("div",{className:va()(S,{[`${S}-has-title`]:w})},d,n.createElement("div",{className:`${a}-paragraph`},w&&n.createElement("span",{className:`${a}-title`},e.title),n.createElement("div",{className:`${a}-content`},e.content))),void 0===c||"function"==typeof c?n.createElement(ple,{value:x},n.createElement("div",{className:`${a}-btns`},"function"==typeof c?c(_,{OkBtn:gle,CancelBtn:mle}):_)):c,n.createElement(qle,{prefixCls:t}))}const Yle=e=>{const{close:t,zIndex:r,afterClose:i,open:o,keyboard:a,centered:s,getContainer:l,maskStyle:c,direction:u,prefixCls:h,wrapClassName:d,rootPrefixCls:f,bodyStyle:p,closable:m=!1,closeIcon:g,modalRender:v,focusTriggerAfterClose:y,onConfirm:b,styles:x}=e,_=`${h}-confirm`,w=e.width||416,S=e.style||{},E=void 0===e.mask||e.mask,C=void 0!==e.maskClosable&&e.maskClosable,M=va()(_,`${_}-${e.type}`,{[`${_}-rtl`]:"rtl"===u},e.className),[,T]=Co(),A=n.useMemo((()=>void 0!==r?r:T.zIndexPopupBase+1e3),[r,T]);return n.createElement(Gle,{prefixCls:h,className:M,wrapClassName:va()({[`${_}-centered`]:!!e.centered},d),onCancel:()=>{null==t||t({triggerCancel:!0}),null==b||b(!1)},open:o,title:"",footer:null,transitionName:pz(f||"","zoom",e.transitionName),maskTransitionName:pz(f||"","fade",e.maskTransitionName),mask:E,maskClosable:C,style:S,styles:Object.assign({body:p,mask:c},x),width:w,zIndex:A,afterClose:i,keyboard:a,centered:s,getContainer:l,closable:m,closeIcon:g,modalRender:v,focusTriggerAfterClose:y},n.createElement(Xle,Object.assign({},e,{confirmPrefixCls:_})))},Kle=e=>{const{rootPrefixCls:t,iconPrefixCls:r,direction:i,theme:o}=e;return n.createElement(tl,{prefixCls:t,iconPrefixCls:r,direction:i,theme:o},n.createElement(Yle,Object.assign({},e)))},Zle=[];let Jle="";function Qle(){return Jle}const ece=e=>{var t,r;const{prefixCls:i,getContainer:o,direction:a}=e,s=Jo(),l=(0,n.useContext)(ia),c=Qle()||l.getPrefixCls(),u=i||`${c}-modal`;let h=o;return!1===h&&(h=void 0),n.createElement(Kle,Object.assign({},e,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:null!=a?a:l.direction,locale:null!==(r=null===(t=l.locale)||void 0===t?void 0:t.Modal)&&void 0!==r?r:s,getContainer:h}))};function tce(e){const t=Js(),r=document.createDocumentFragment();let i,o=Object.assign(Object.assign({},e),{close:l,open:!0});function a(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a;i.some((e=>null==e?void 0:e.triggerCancel))&&(null===(t=e.onCancel)||void 0===t||(a=t).call.apply(a,[e,()=>{}].concat(Wt(i.slice(1)))));for(let e=0;e<Zle.length;e++)if(Zle[e]===l){Zle.splice(e,1);break}lU(r)}function s(e){clearTimeout(i),i=setTimeout((()=>{const i=t.getPrefixCls(void 0,Qle()),o=t.getIconPrefixCls(),a=t.getTheme(),s=n.createElement(ece,Object.assign({},e));iU(n.createElement(tl,{prefixCls:i,iconPrefixCls:o,theme:a},t.holderRender?t.holderRender(s):s),r)}))}function l(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o=Object.assign(Object.assign({},o),{open:!1,afterClose:()=>{"function"==typeof e.afterClose&&e.afterClose(),a.apply(this,n)}}),o.visible&&delete o.visible,s(o)}return s(o),Zle.push(l),{destroy:l,update:function(e){o="function"==typeof e?e(o):Object.assign(Object.assign({},o),e),s(o)}}}function nce(e){return Object.assign(Object.assign({},e),{type:"warning"})}function rce(e){return Object.assign(Object.assign({},e),{type:"info"})}function ice(e){return Object.assign(Object.assign({},e),{type:"success"})}function oce(e){return Object.assign(Object.assign({},e),{type:"error"})}function ace(e){return Object.assign(Object.assign({},e),{type:"confirm"})}const sce=dV((e=>{const{prefixCls:t,className:r,closeIcon:i,closable:o,type:a,title:s,children:l,footer:c}=e,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:h}=n.useContext(ia),d=h(),f=t||h("modal"),p=pV(d),[m,g,v]=$le(f,p),y=`${f}-confirm`;let b={};return b=a?{closable:null!=o&&o,title:"",footer:"",children:n.createElement(Xle,Object.assign({},e,{prefixCls:f,confirmPrefixCls:y,rootPrefixCls:d,content:l}))}:{closable:null==o||o,title:s,footer:null!==c&&n.createElement(kle,Object.assign({},e)),children:l},m(n.createElement(Sle,Object.assign({prefixCls:f,className:va()(g,`${f}-pure-panel`,a&&y,a&&`${y}-${a}`,r,v,p)},u,{closeIcon:Ole(f,i),closable:o},b)))}));const lce=(e,t)=>{var r,{afterClose:i,config:o}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["afterClose","config"]);const[s,l]=n.useState(!0),[c,u]=n.useState(o),{direction:h,getPrefixCls:d}=n.useContext(ia),f=d("modal"),p=d(),m=function(){var e,t;l(!1);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.some((e=>null==e?void 0:e.triggerCancel))&&(null===(e=c.onCancel)||void 0===e||(t=e).call.apply(t,[c,()=>{}].concat(Wt(r.slice(1)))))};n.useImperativeHandle(t,(()=>({destroy:m,update:e=>{u((t=>Object.assign(Object.assign({},t),e)))}})));const g=null!==(r=c.okCancel)&&void 0!==r?r:"confirm"===c.type,[v]=NG("Modal",Xo.Modal);return n.createElement(Kle,Object.assign({prefixCls:f,rootPrefixCls:p},c,{close:m,open:s,afterClose:()=>{var e;i(),null===(e=c.afterClose)||void 0===e||e.call(c)},okText:c.okText||(g?null==v?void 0:v.okText:null==v?void 0:v.justOkText),direction:c.direction||h,cancelText:c.cancelText||(null==v?void 0:v.cancelText)},a))},cce=n.forwardRef(lce);let uce=0;const hce=n.memo(n.forwardRef(((e,t)=>{const[r,i]=function(){const[e,t]=n.useState([]);return[e,n.useCallback((e=>(t((t=>[].concat(Wt(t),[e]))),()=>{t((t=>t.filter((t=>t!==e))))})),[])]}();return n.useImperativeHandle(t,(()=>({patchElement:i})),[]),n.createElement(n.Fragment,null,r)})));function dce(e){return tce(nce(e))}const fce=Gle;fce.useModal=function(){const e=n.useRef(null),[t,r]=n.useState([]);n.useEffect((()=>{t.length&&(Wt(t).forEach((e=>{e()})),r([]))}),[t]);const i=n.useCallback((t=>function(i){var o;uce+=1;const a=n.createRef();let s;const l=new Promise((e=>{s=e}));let c,u=!1;const h=n.createElement(cce,{key:`modal-${uce}`,config:t(i),ref:a,afterClose:()=>{null==c||c()},isSilent:()=>u,onConfirm:e=>{s(e)}});c=null===(o=e.current)||void 0===o?void 0:o.patchElement(h),c&&Zle.push(c);const d={destroy:()=>{function e(){var e;null===(e=a.current)||void 0===e||e.destroy()}a.current?e():r((t=>[].concat(Wt(t),[e])))},update:e=>{function t(){var t;null===(t=a.current)||void 0===t||t.update(e)}a.current?t():r((e=>[].concat(Wt(e),[t])))},then:e=>(u=!0,l.then(e))};return d}),[]);return[n.useMemo((()=>({info:i(rce),success:i(ice),error:i(oce),warning:i(nce),confirm:i(ace)})),[]),n.createElement(hce,{key:"modal-holder",ref:e})]},fce.info=function(e){return tce(rce(e))},fce.success=function(e){return tce(ice(e))},fce.error=function(e){return tce(oce(e))},fce.warning=dce,fce.warn=dce,fce.confirm=function(e){return tce(ace(e))},fce.destroyAll=function(){for(;Zle.length;){const e=Zle.pop();e&&e()}},fce.config=function(e){let{rootPrefixCls:t}=e;Jle=t},fce._InternalPanelDoNotUseOrYouWillBeFired=sce;const pce=fce;var mce;function gce(){return gce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gce.apply(null,arguments)}var vce=n.forwardRef((function(e,t){return n.createElement(wF,gce({},e,{ref:t,type:"primary"}),e.children)}));vce.displayName="PrimaryButton";var yce,bce,xce=Fu(vce)(mce||(yce=["\n  &&& {\n    background-color: var(--color-button-secondary-bg);\n    border: 1px solid var(--color-button-secondary-outline);\n    color: var(--color-button-secondary-text);\n  }\n"],bce||(bce=yce.slice(0)),mce=Object.freeze(Object.defineProperties(yce,{raw:{value:Object.freeze(bce)}}))));function _ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Sce(){var e=_ce((0,n.useState)(),2),t=e[0],r=e[1],i=n.useRef(null),o=_ce((0,n.useState)(!1),2),a=o[0],s=o[1],l=[{key:"github",label:n.createElement(Rt,{to:"https://github.com/allen-cell-animated/vole-app",target:"_blank",rel:"noreferrer noopener"},"Visit GitHub repository")},{key:"github-issue",label:n.createElement(Rt,{to:"https://github.com/allen-cell-animated/vole-app/issues/new/choose",target:"_blank",rel:"noreferrer noopener"},"Report issue via GitHub")},{key:"forum",label:n.createElement(Rt,{to:"https://forum.allencell.org/c/software-code/11",target:"_blank",rel:"noreferrer noopener"},"Allen Cell Discussion Forum")},{key:"version",label:"Version info",onClick:function(){s(!0)}}];(0,n.useEffect)((function(){r(i.current)}),[i.current]);var c=null!==t?function(){return t}:void 0;return n.createElement("div",{ref:i},n.createElement(oG,{menu:{items:l},getPopupContainer:c,trigger:["click"]},n.createElement(xce,null,n.createElement($se,{$gap:6},"Help ",n.createElement(Zse,null)))),n.createElement(pce,{open:a,title:"Version info",getContainer:c,onCancel:function(){return s(!1)},footer:n.createElement(wF,{onClick:function(){return s(!1)}},"Close")},n.createElement(jse,{$gap:0},n.createElement("p",{style:{margin:0}},"Vole-E App v","2.10.4"),n.createElement("p",{style:{margin:0}},"Vol-E Core plugin v","3.12.4"))))}const Ece={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var Cce=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Ece}))};const Mce=n.forwardRef(Cce),{Option:Tce}=pX;function Ace(e){return(null==e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}const Pce=(e,t)=>{var r;const{prefixCls:i,className:o,popupClassName:a,dropdownClassName:s,children:l,dataSource:c}=e,u=oC(l);let h;1===u.length&&n.isValidElement(u[0])&&!Ace(u[0])&&([h]=u);const d=h?()=>h:void 0;let f;f=u.length&&Ace(u[0])?l:c?c.map((e=>{if(n.isValidElement(e))return e;switch(typeof e){case"string":return n.createElement(Tce,{key:e,value:e},e);case"object":{const{value:t}=e;return n.createElement(Tce,{key:t,value:t},e.text)}default:return}})):[];const{getPrefixCls:p}=n.useContext(ia),m=p("select",i),[g]=cz("SelectLike",null===(r=e.dropdownStyle)||void 0===r?void 0:r.zIndex);return n.createElement(pX,Object.assign({ref:t,suffixIcon:null},rC(e,["dataSource","dropdownClassName"]),{prefixCls:m,popupClassName:a||s,dropdownStyle:Object.assign(Object.assign({},e.dropdownStyle),{zIndex:g}),className:va()(`${m}-auto-complete`,o),mode:pX.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:d}),f)},Rce=n.forwardRef(Pce),Ice=fV(Rce);Rce.Option=Tce,Rce._InternalPanelDoNotUseOrYouWillBeFired=Ice;const Oce=Rce;function kce(e){return Array.isArray?Array.isArray(e):"[object Array]"===Fce(e)}function Lce(e){return"string"==typeof e}function Nce(e){return"number"==typeof e}function Dce(e){return"object"==typeof e}function zce(e){return null!=e}function Uce(e){return!e.trim().length}function Fce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Bce=Object.prototype.hasOwnProperty;class jce{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Vce(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Vce(e){let t=null,n=null,r=null,i=1,o=null;if(Lce(e)||kce(e))r=e,t=$ce(e),n=Hce(e);else{if(!Bce.call(e,"name"))throw new Error("Missing name property in key");const a=e.name;if(r=a,Bce.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=$ce(a),n=Hce(a),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function $ce(e){return kce(e)?e:e.split(".")}function Hce(e){return kce(e)?e.join("."):e}var Gce={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const i=(e,t,o)=>{if(zce(e))if(t[o]){const a=e[t[o]];if(!zce(a))return;if(o===t.length-1&&(Lce(a)||Nce(a)||function(e){return!0===e||!1===e||function(e){return Dce(e)&&null!==e}(e)&&"[object Boolean]"==Fce(e)}(a)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(kce(a)){r=!0;for(let e=0,n=a.length;e<n;e+=1)i(a[e],t,o+1)}else t.length&&i(a,t,o+1)}else n.push(e)};return i(e,Lce(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const Wce=/[^ ]+/g;class qce{constructor({getFn:e=Gce.getFn,fieldNormWeight:t=Gce.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(Wce).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Lce(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Lce(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!zce(e)||Uce(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(zce(i))if(kce(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(zce(r))if(Lce(r)&&!Uce(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else kce(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(Lce(i)&&!Uce(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Xce(e,t,{getFn:n=Gce.getFn,fieldNormWeight:r=Gce.fieldNormWeight}={}){const i=new qce({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Vce)),i.setSources(t),i.create(),i}function Yce(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Gce.distance,ignoreLocation:o=Gce.ignoreLocation}={}){const a=t/e.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}const Kce=32;function Zce(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Jce{constructor(e,{location:t=Gce.location,threshold:n=Gce.threshold,distance:r=Gce.distance,includeMatches:i=Gce.includeMatches,findAllMatches:o=Gce.findAllMatches,minMatchCharLength:a=Gce.minMatchCharLength,isCaseSensitive:s=Gce.isCaseSensitive,ignoreLocation:l=Gce.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:s,ignoreLocation:l},this.pattern=s?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Zce(e),startIndex:t})},u=this.pattern.length;if(u>Kce){let e=0;const t=u%Kce,n=u-t;for(;e<n;)c(this.pattern.substr(e,Kce),e),e+=Kce;if(t){const e=u-Kce;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:s,ignoreLocation:l}=this.options;let c=[],u=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:f})=>{const{isMatch:p,score:m,indices:g}=function(e,t,n,{location:r=Gce.location,distance:i=Gce.distance,threshold:o=Gce.threshold,findAllMatches:a=Gce.findAllMatches,minMatchCharLength:s=Gce.minMatchCharLength,includeMatches:l=Gce.includeMatches,ignoreLocation:c=Gce.ignoreLocation}={}){if(t.length>Kce)throw new Error("Pattern length exceeds max of 32.");const u=t.length,h=e.length,d=Math.max(0,Math.min(r,h));let f=o,p=d;const m=s>1||l,g=m?Array(h):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=Yce(t,{currentLocation:v,expectedLocation:d,distance:i,ignoreLocation:c});if(f=Math.min(e,f),p=v+u,m){let e=0;for(;e<u;)g[v+e]=1,e+=1}}p=-1;let y=[],b=1,x=u+h;const _=1<<u-1;for(let r=0;r<u;r+=1){let o=0,s=x;for(;o<s;)Yce(t,{errors:r,currentLocation:d+s,expectedLocation:d,distance:i,ignoreLocation:c})<=f?o=s:x=s,s=Math.floor((x-o)/2+o);x=s;let l=Math.max(1,d-s+1),v=a?h:Math.min(d+s,h)+u,w=Array(v+2);w[v+1]=(1<<r)-1;for(let o=v;o>=l;o-=1){let a=o-1,s=n[e.charAt(a)];if(m&&(g[a]=+!!s),w[o]=(w[o+1]<<1|1)&s,r&&(w[o]|=(y[o+1]|y[o])<<1|1|y[o+1]),w[o]&_&&(b=Yce(t,{errors:r,currentLocation:a,expectedLocation:d,distance:i,ignoreLocation:c}),b<=f)){if(f=b,p=a,p<=d)break;l=Math.max(1,2*d-p)}}if(Yce(t,{errors:r+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>f)break;y=w}const w={isMatch:p>=0,score:Math.max(.001,b)};if(m){const e=function(e=[],t=Gce.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=e.length;o<a;o+=1){let a=e[o];a&&-1===r?r=o:a||-1===r||(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}(g,s);e.length?l&&(w.indices=e):w.isMatch=!1}return w}(e,t,d,{location:r+f,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:s,includeMatches:n,ignoreLocation:l});p&&(h=!0),u+=m,p&&g&&(c=[...c,...g])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=c),d}}class Qce{constructor(e){this.pattern=e}static isMultiMatch(e){return eue(e,this.multiRegex)}static isSingleMatch(e){return eue(e,this.singleRegex)}search(){}}function eue(e,t){const n=e.match(t);return n?n[1]:null}class tue extends Qce{constructor(e,{location:t=Gce.location,threshold:n=Gce.threshold,distance:r=Gce.distance,includeMatches:i=Gce.includeMatches,findAllMatches:o=Gce.findAllMatches,minMatchCharLength:a=Gce.minMatchCharLength,isCaseSensitive:s=Gce.isCaseSensitive,ignoreLocation:l=Gce.ignoreLocation}={}){super(e),this._bitapSearch=new Jce(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:s,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class nue extends Qce{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const rue=[class extends Qce{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},nue,class extends Qce{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Qce{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Qce{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Qce{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Qce{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},tue],iue=rue.length,oue=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,aue=new Set([tue.type,nue.type]);const sue=[];function lue(e,t){for(let n=0,r=sue.length;n<r;n+=1){let r=sue[n];if(r.condition(e,t))return new r(e,t)}return new Jce(e,t)}const cue="$and",uue="$path",hue=e=>!(!e[cue]&&!e.$or),due=e=>({[cue]:Object.keys(e).map((t=>({[t]:e[t]})))});function fue(e,t,{auto:n=!0}={}){const r=e=>{let i=Object.keys(e);const o=(e=>!!e[uue])(e);if(!o&&i.length>1&&!hue(e))return r(due(e));if((e=>!kce(e)&&Dce(e)&&!hue(e))(e)){const r=o?e[uue]:i[0],a=o?e.$val:e[r];if(!Lce(a))throw new Error((e=>`Invalid value for key ${e}`)(r));const s={keyId:Hce(r),pattern:a};return n&&(s.searcher=lue(a,t)),s}let a={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];kce(n)&&n.forEach((e=>{a.children.push(r(e))}))})),a};return hue(e)||(e=due(e)),r(e)}function pue(e,t){const n=e.matches;t.matches=[],zce(n)&&n.forEach((e=>{if(!zce(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function mue(e,t){t.score=e.score}class gue{constructor(e,t={},n){this.options={...Gce,...t},this.options.useExtendedSearch,this._keyStore=new jce(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof qce))throw new Error("Incorrect 'index' type");this._myIndex=t||Xce(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){zce(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let s=Lce(e)?Lce(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Gce.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:r,score:i})=>{const o=e?e.weight:null;n*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(t?1:r))})),e.score=n}))}(s,{ignoreFieldNorm:a}),i&&s.sort(o),Nce(t)&&t>-1&&(s=s.slice(0,t)),function(e,t,{includeMatches:n=Gce.includeMatches,includeScore:r=Gce.includeScore}={}){const i=[];return n&&i.push(pue),r&&i.push(mue),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,r)})),r}))}(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=lue(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:e,i:n,n:i})=>{if(!zce(e))return;const{isMatch:o,score:a,indices:s}=t.searchIn(e);o&&r.push({item:e,idx:n,matches:[{score:a,value:e,norm:i,indices:s}]})})),r}_searchLogical(e){const t=fue(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:i}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return o&&o.length?[{idx:r,item:t,matches:o}]:[]}const i=[];for(let o=0,a=e.children.length;o<a;o+=1){const a=e.children[o],s=n(a,t,r);if(s.length)i.push(...s);else if(e.operator===cue)return[]}return i},r=this._myIndex.records,i={},o=[];return r.forEach((({$:e,i:r})=>{if(zce(e)){let a=n(t,e,r);a.length&&(i[r]||(i[r]={idx:r,item:e,matches:[]},o.push(i[r])),a.forEach((({matches:e})=>{i[r].matches.push(...e)})))}})),o}_searchObjectList(e){const t=lue(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((({$:e,i:r})=>{if(!zce(e))return;let o=[];n.forEach(((n,r)=>{o.push(...this._findMatches({key:n,value:e[r],searcher:t}))})),o.length&&i.push({idx:r,item:e,matches:o})})),i}_findMatches({key:e,value:t,searcher:n}){if(!zce(t))return[];let r=[];if(kce(t))t.forEach((({v:t,i,n:o})=>{if(!zce(t))return;const{isMatch:a,score:s,indices:l}=n.searchIn(t);a&&r.push({score:s,key:e,value:t,idx:i,norm:o,indices:l})}));else{const{v:i,n:o}=t,{isMatch:a,score:s,indices:l}=n.searchIn(i);a&&r.push({score:s,key:e,value:i,norm:o,indices:l})}return r}}function vue(e){return vue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vue(e)}var yue,bue;function xue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xue(Object(n),!0).forEach((function(t){wue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wue(e,t,n){return(t=function(e){var t=function(e){if("object"!=vue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sue(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}gue.version="7.0.0",gue.createIndex=Xce,gue.parseIndex=function(e,{getFn:t=Gce.getFn,fieldNormWeight:n=Gce.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new qce({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o},gue.config=Gce,gue.parseQuery=fue,function(...e){sue.push(...e)}(class{constructor(e,{isCaseSensitive:t=Gce.isCaseSensitive,includeMatches:n=Gce.includeMatches,minMatchCharLength:r=Gce.minMatchCharLength,ignoreLocation:i=Gce.ignoreLocation,findAllMatches:o=Gce.findAllMatches,location:a=Gce.location,threshold:s=Gce.threshold,distance:l=Gce.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:o,ignoreLocation:i,location:a,threshold:s,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(oue).filter((e=>e&&!!e.trim())),r=[];for(let e=0,i=n.length;e<i;e+=1){const i=n[e];let o=!1,a=-1;for(;!o&&++a<iue;){const e=rue[a];let n=e.isMultiMatch(i);n&&(r.push(new e(n,t)),o=!0)}if(!o)for(a=-1;++a<iue;){const e=rue[a];let n=e.isSingleMatch(i);if(n){r.push(new e(n,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,o=[],a=0;for(let r=0,s=t.length;r<s;r+=1){const s=t[r];o.length=0,i=0;for(let t=0,r=s.length;t<r;t+=1){const r=s[t],{isMatch:l,indices:c,score:u}=r.search(e);if(!l){a=0,i=0,o.length=0;break}if(i+=1,a+=u,n){const e=r.constructor.type;aue.has(e)?o=[...o,...c]:o.push(c)}}if(i){let e={isMatch:!0,score:a/i};return n&&(e.indices=o),e}}return{isMatch:!1,score:1}}});var Eue={startCharacters:3,endCharacters:35},Cue=Fu.div(yue||(yue=Sue(["\n  display: flex;\n  flex-direction: row;\n  vertical-align: bottom;\n  white-space: nowrap;\n\n  ","\n"])),(function(e){return Lu(bue||(bue=Sue(["\n      --startWidth: calc(1em * "," * ",");\n      --endWidth: calc(1em * "," * ",");\n\n      & span {\n        display: inline-block;\n        vertical-align: bottom;\n        white-space: nowrap;\n        overflow: hidden;\n      }\n\n      & span:first-child {\n        max-width: calc(100% - var(--endWidth));\n        min-width: var(--startWidth);\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n\n      & span:last-child {\n        max-width: calc(100% - var(--startWidth));\n        direction: rtl;\n        z-index: 800;\n      }\n    "])),e.$startChars+3,.5,e.$endChars,.5)}));function Mue(e){var t=_ue(_ue({},Eue),e),r=Math.max(0,t.startCharacters),i=Math.max(0,t.endCharacters);t.text.length<=r+i&&(i=t.text.length-r);var o=Math.max(0,t.text.length-i),a=t.text.slice(0,o),s=t.text.slice(o);return n.createElement(Cue,{$startChars:r,$endChars:i,"aria-label":t.text,title:t.text},n.createElement("span",null,a),n.createElement("span",null,"",s))}a(2562);var Tue="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function Aue(e,t,r,i){const o=(0,n.useRef)(t);Tue((()=>{o.current=t}),[t]),(0,n.useEffect)((()=>{const t=(null==r?void 0:r.current)??window;if(!t||!t.addEventListener)return;const n=e=>{o.current(e)};return t.addEventListener(e,n,i),()=>{t.removeEventListener(e,n,i)}}),[e,r,i])}function Pue(e){const t=(0,n.useRef)((()=>{throw new Error("Cannot call an event handler while rendering.")}));return Tue((()=>{t.current=e}),[e]),(0,n.useCallback)(((...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)}),[t])}var Rue,Iue="undefined"==typeof window;function Oue(e){return function(e){if(Array.isArray(e))return Lue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kue(e,t){if(e){if("string"==typeof e)return Lue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lue(e,t):void 0}}function Lue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Due(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Due(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Due(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zue=Fu.div(Rue||(Rue=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  // Get the dropdown to size itself based on the webpage width, but resize itself to match the\n  // input area (~100vw - 100px of padding) when the webpage is very narrow\n  .ant-select-dropdown {\n    // TODO: Size to max-content so there isn't extra dead space past the end of the current items.\n    // Setting width to max-content directly causes the dropdown to collapse to a width of\n    // 0 pixels when more than 8 items are present and scrolling becomes enabled.\n    width: 100% !important;\n    max-width: calc(max(50vw, min(400px, 100vw - 100px)));\n  }\n"])));function Uue(e){var t,r,i,o,a=Nue((0,n.useState)(!1),2),s=a[0],l=a[1],c=Nue((0,n.useState)(""),2),u=c[0],h=c[1],d=Nue((0,n.useState)(""),2),f=d[0],p=d[1],m=Nue((t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||kue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,r={}){const{initializeWithValue:i=!0}=r,o=(0,n.useCallback)((e=>r.serializer?r.serializer(e):JSON.stringify(e)),[r]),a=(0,n.useCallback)((e=>{if(r.deserializer)return r.deserializer(e);if("undefined"===e)return;const n=t instanceof Function?t():t;let i;try{i=JSON.parse(e)}catch(e){return console.error("Error parsing JSON:",e),n}return i}),[r,t]),s=(0,n.useCallback)((()=>{const n=t instanceof Function?t():t;if(Iue)return n;try{const t=window.localStorage.getItem(e);return t?a(t):n}catch(t){return console.warn(`Error reading localStorage key ${e}:`,t),n}}),[t,e,a]),[l,c]=(0,n.useState)((()=>i?s():t instanceof Function?t():t)),u=Pue((t=>{Iue&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const n=t instanceof Function?t(s()):t;window.localStorage.setItem(e,o(n)),c(n),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(t){console.warn(`Error setting localStorage key ${e}:`,t)}})),h=Pue((()=>{Iue&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const n=t instanceof Function?t():t;window.localStorage.removeItem(e),c(n),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}));(0,n.useEffect)((()=>{c(s())}),[e]);const d=(0,n.useCallback)((t=>{t.key&&t.key!==e||c(s())}),[e,s]);return Aue("storage",d),Aue("local-storage",d),[l,u,h]}("WEBSITE_3D_CELL_VIEWER.recentDatasets",[]),2),r=t[0],i=t[1],(o=r.filter((function(e){var t=e.url,n=e.label;return"string"==typeof t&&"string"==typeof n}))).length!==r.length&&i(o),[o||[],function(e){if(null!==o){var t=o.findIndex((function(t){return t.url===e.url}));i(-1===t?[e].concat(Oue(o.slice(0,99))):[e].concat(Oue(o.slice(0,t)),Oue(o.slice(t+1))))}else i([e])}]),2),g=m[0],v=m[1],y=(0,n.useRef)(null),b=function(e){e&&(h(""),p("")),l(e)},x=(0,n.useMemo)((function(){return new gue(g,{keys:["label"],isCaseSensitive:!1,shouldSort:!0,ignoreLocation:!0,findAllMatches:!0})}),[g]),_=(0,n.useMemo)((function(){return(""===u?g.slice(0,20):x.search(u).slice(0,20).map((function(e){return e.item}))).map((function(e){return{label:n.createElement(Mue,{text:e.label}),value:e.url}}))}),[u,x]),w=y.current?function(){return y.current}:void 0;return n.createElement(zue,{ref:y},n.createElement(wF,{type:"link",onClick:function(){return b(!s)}},n.createElement(Mce,null),"Load"),n.createElement(pce,{open:s,title:"Load",onCancel:function(){return b(!1)},getContainer:y.current||void 0,okButtonProps:{},footer:n.createElement(wF,{type:"default",onClick:function(){return b(!1)}},"Cancel"),destroyOnClose:!0},n.createElement("p",{style:{fontSize:"16px"}},"Provide the URL to load your OME-Zarr or OME-TIFF* data."),n.createElement("p",{style:{fontSize:"12px"}},n.createElement("i",null,"*Note: this tool is intended for OME-Zarr use. Large ","(> 100 MB)"," OME-TIFF files are not supported.")),n.createElement(Vse,{$gap:6},n.createElement(Oce,{value:u,onChange:function(e){return h(e)},onSelect:h,style:{width:"100%"},allowClear:!0,options:_,getPopupContainer:w,placeholder:"Enter a URL...",autoFocus:!0}),n.createElement(wF,{type:"primary",onClick:function(){if(u.startsWith("http")){var t={imageUrl:u,imageDownloadHref:u,cellId:"1",parentImageUrl:"",parentImageDownloadHref:"",viewerChannelSettings:{groups:[{name:"Channels",channels:[{match:[0,1,2],enabled:!0},{match:"(.+)",enabled:!1}]}]}};e.onLoad(t),v({url:u,label:u}),b(!1)}else p("Please enter a valid URL.")}},"Load")),""!==f&&n.createElement("p",{style:{color:"var(--color-text-error)"}},f)))}const Fue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"};var Bue=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Fue}))};const jue=n.forwardRef(Bue),Vue=n.createContext({}),$ue=n.forwardRef((function(e,t){var r=e.prefixCls,i=e.style,o=e.className,a=e.duration,s=void 0===a?4.5:a,l=e.showProgress,c=e.pauseOnHover,u=void 0===c||c,h=e.eventKey,d=e.content,f=e.closable,p=e.closeIcon,m=void 0===p?"x":p,g=e.props,v=e.onClick,y=e.onNoticeClose,b=e.times,x=e.hovering,_=Ht(n.useState(!1),2),w=_[0],S=_[1],E=Ht(n.useState(0),2),C=E[0],M=E[1],T=Ht(n.useState(0),2),A=T[0],P=T[1],R=x||w,I=s>0&&l,O=function(){y(h)};n.useEffect((function(){if(!R&&s>0){var e=Date.now()-A,t=setTimeout((function(){O()}),1e3*s-A);return function(){u&&clearTimeout(t),P(Date.now()-e)}}}),[s,R,b]),n.useEffect((function(){if(!R&&I&&(u||0===A)){var e,t=performance.now();return function n(){cancelAnimationFrame(e),e=requestAnimationFrame((function(e){var r=e+A-t,i=Math.min(r/(1e3*s),1);M(100*i),i<1&&n()}))}(),function(){u&&cancelAnimationFrame(e)}}}),[s,A,R,I,b]);var k=n.useMemo((function(){return"object"===zt(f)&&null!==f?f:f?{closeIcon:m}:{}}),[f,m]),L=nB(k,!0),N=100-(!C||C<0?0:C>100?100:C),D="".concat(r,"-notice");return n.createElement("div",nr({},g,{ref:t,className:va()(D,o,Ft({},"".concat(D,"-closable"),f)),style:i,onMouseEnter:function(e){var t;S(!0),null==g||null===(t=g.onMouseEnter)||void 0===t||t.call(g,e)},onMouseLeave:function(e){var t;S(!1),null==g||null===(t=g.onMouseLeave)||void 0===t||t.call(g,e)},onClick:v}),n.createElement("div",{className:"".concat(D,"-content")},d),f&&n.createElement("a",nr({tabIndex:0,className:"".concat(D,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==QF.ENTER||O()},"aria-label":"Close"},L,{onClick:function(e){e.preventDefault(),e.stopPropagation(),O()}}),k.closeIcon),I&&n.createElement("progress",{className:"".concat(D,"-progress"),max:"100",value:N},N+"%"))}));var Hue=n.createContext({});const Gue=function(e){var t=e.children,r=e.classNames;return n.createElement(Hue.Provider,{value:{classNames:r}},t)};var Wue=["className","style","classNames","styles"];const que=function(e){var t=e.configList,r=e.placement,i=e.prefixCls,o=e.className,a=e.style,s=e.motion,l=e.onAllNoticeRemoved,c=e.onNoticeClose,u=e.stack,h=(0,n.useContext)(Hue).classNames,d=(0,n.useRef)({}),f=Ht((0,n.useState)(null),2),p=f[0],m=f[1],g=Ht((0,n.useState)([]),2),v=g[0],y=g[1],b=t.map((function(e){return{config:e,key:String(e.key)}})),x=Ht(function(e){var t,n,r,i={offset:8,threshold:3,gap:16};return e&&"object"===zt(e)&&(i.offset=null!==(t=e.offset)&&void 0!==t?t:8,i.threshold=null!==(n=e.threshold)&&void 0!==n?n:3,i.gap=null!==(r=e.gap)&&void 0!==r?r:16),[!!e,i]}(u),2),_=x[0],w=x[1],S=w.offset,E=w.threshold,C=w.gap,M=_&&(v.length>0||b.length<=E),T="function"==typeof s?s(r):s;return(0,n.useEffect)((function(){_&&v.length>1&&y((function(e){return e.filter((function(e){return b.some((function(t){var n=t.key;return e===n}))}))}))}),[v,b,_]),(0,n.useEffect)((function(){var e,t;_&&d.current[null===(e=b[b.length-1])||void 0===e?void 0:e.key]&&m(d.current[null===(t=b[b.length-1])||void 0===t?void 0:t.key])}),[b,_]),n.createElement(Ns,nr({key:r,className:va()(i,"".concat(i,"-").concat(r),null==h?void 0:h.list,o,Ft(Ft({},"".concat(i,"-stack"),!!_),"".concat(i,"-stack-expanded"),M)),style:a,keys:b,motionAppear:!0},T,{onAllRemoved:function(){l(r)}}),(function(e,t){var o=e.config,a=e.className,s=e.style,l=e.index,u=o,f=u.key,m=u.times,g=String(f),x=o,w=x.className,E=x.style,T=x.classNames,A=x.styles,P=Ca(x,Wue),R=b.findIndex((function(e){return e.key===g})),I={};if(_){var O=b.length-1-(R>-1?R:l-1),k="top"===r||"bottom"===r?"-50%":"0";if(O>0){var L,N,D;I.height=M?null===(L=d.current[g])||void 0===L?void 0:L.offsetHeight:null==p?void 0:p.offsetHeight;for(var z=0,U=0;U<O;U++){var F;z+=(null===(F=d.current[b[b.length-1-U].key])||void 0===F?void 0:F.offsetHeight)+C}var B=(M?z:O*S)*(r.startsWith("top")?1:-1),j=!M&&null!=p&&p.offsetWidth&&null!==(N=d.current[g])&&void 0!==N&&N.offsetWidth?((null==p?void 0:p.offsetWidth)-2*S*(O<3?O:3))/(null===(D=d.current[g])||void 0===D?void 0:D.offsetWidth):1;I.transform="translate3d(".concat(k,", ").concat(B,"px, 0) scaleX(").concat(j,")")}else I.transform="translate3d(".concat(k,", 0, 0)")}return n.createElement("div",{ref:t,className:va()("".concat(i,"-notice-wrapper"),a,null==T?void 0:T.wrapper),style:Xt(Xt(Xt({},s),I),null==A?void 0:A.wrapper),onMouseEnter:function(){return y((function(e){return e.includes(g)?e:[].concat(Wt(e),[g])}))},onMouseLeave:function(){return y((function(e){return e.filter((function(e){return e!==g}))}))}},n.createElement($ue,nr({},P,{ref:function(e){R>-1?d.current[g]=e:delete d.current[g]},prefixCls:i,classNames:T,styles:A,className:va()(w,null==h?void 0:h.notice),style:E,times:m,key:f,eventKey:f,onNoticeClose:c,hovering:_&&v.length>0})))}))},Xue=n.forwardRef((function(e,t){var r=e.prefixCls,i=void 0===r?"rc-notification":r,a=e.container,s=e.motion,l=e.maxCount,c=e.className,u=e.style,h=e.onAllRemoved,d=e.stack,f=e.renderNotifications,p=Ht(n.useState([]),2),m=p[0],g=p[1],v=function(e){var t,n=m.find((function(t){return t.key===e}));null==n||null===(t=n.onClose)||void 0===t||t.call(n),g((function(t){return t.filter((function(t){return t.key!==e}))}))};n.useImperativeHandle(t,(function(){return{open:function(e){g((function(t){var n,r=Wt(t),i=r.findIndex((function(t){return t.key===e.key})),o=Xt({},e);return i>=0?(o.times=((null===(n=t[i])||void 0===n?void 0:n.times)||0)+1,r[i]=o):(o.times=0,r.push(o)),l>0&&r.length>l&&(r=r.slice(-l)),r}))},close:function(e){v(e)},destroy:function(){g([])}}}));var y=Ht(n.useState({}),2),b=y[0],x=y[1];n.useEffect((function(){var e={};m.forEach((function(t){var n=t.placement,r=void 0===n?"topRight":n;r&&(e[r]=e[r]||[],e[r].push(t))})),Object.keys(b).forEach((function(t){e[t]=e[t]||[]})),x(e)}),[m]);var _=function(e){x((function(t){var n=Xt({},t);return(n[e]||[]).length||delete n[e],n}))},w=n.useRef(!1);if(n.useEffect((function(){Object.keys(b).length>0?w.current=!0:w.current&&(null==h||h(),w.current=!1)}),[b]),!a)return null;var S=Object.keys(b);return(0,o.createPortal)(n.createElement(n.Fragment,null,S.map((function(e){var t=b[e],r=n.createElement(que,{key:e,configList:t,placement:e,prefixCls:i,className:null==c?void 0:c(e),style:null==u?void 0:u(e),motion:s,onNoticeClose:v,onAllNoticeRemoved:_,stack:d});return f?f(r,{prefixCls:i,key:e}):r}))),a)}));var Yue=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Kue=function(){return document.body},Zue=0;const Jue=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:r}=e,i=`${t}-notice`,o=new ei("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),a=new ei("antNotificationTopFadeIn",{"0%":{top:-r,opacity:0},"100%":{top:0,opacity:1}}),s=new ei("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(r).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),l=new ei("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:s}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:o}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}}}}},Que=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],ehe={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},the=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},nhe=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},rhe=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},the(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},nhe(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Que.map((t=>((e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[ehe[t]]:{value:0,_skip_check_:!0}}}}})(e,t))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{}))},ihe=e=>{const{iconCls:t,componentCls:n,boxShadow:r,fontSizeLG:i,notificationMarginBottom:o,borderRadiusLG:a,colorSuccess:s,colorInfo:l,colorWarning:c,colorError:u,colorTextHeading:h,notificationBg:d,notificationPadding:f,notificationMarginEdge:p,notificationProgressBg:m,notificationProgressHeight:g,fontSize:v,lineHeight:y,width:b,notificationIconSize:x,colorText:_}=e,w=`${n}-notice`;return{position:"relative",marginBottom:o,marginInlineStart:"auto",background:d,borderRadius:a,boxShadow:r,[w]:{padding:f,width:b,maxWidth:`calc(100vw - ${Un(e.calc(p).mul(2).equal())})`,overflow:"hidden",lineHeight:y,wordWrap:"break-word"},[`${w}-message`]:{marginBottom:e.marginXS,color:h,fontSize:i,lineHeight:e.lineHeightLG},[`${w}-description`]:{fontSize:v,color:_},[`${w}-closable ${w}-message`]:{paddingInlineEnd:e.paddingLG},[`${w}-with-icon ${w}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(x).equal(),fontSize:i},[`${w}-with-icon ${w}-description`]:{marginInlineStart:e.calc(e.marginSM).add(x).equal(),fontSize:v},[`${w}-icon`]:{position:"absolute",fontSize:x,lineHeight:1,[`&-success${t}`]:{color:s},[`&-info${t}`]:{color:l},[`&-warning${t}`]:{color:c},[`&-error${t}`]:{color:u}},[`${w}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},$s(e)),[`${w}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${Un(a)} * 2)`,left:{_skip_check_:!0,value:a},right:{_skip_check_:!0,value:a},bottom:0,blockSize:g,border:0,"&, &::-webkit-progress-bar":{borderRadius:a,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:m},"&::-webkit-progress-value":{borderRadius:a,background:m}},[`${w}-btn`]:{float:"right",marginTop:e.marginSM}}},ohe=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:r,motionDurationMid:i,motionEaseInOut:o}=e,a=`${t}-notice`,s=new ei("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},Bs(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:r,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:o,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:o,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:s,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${a}-btn`]:{float:"left"}}})},{[t]:{[`${a}-wrapper`]:Object.assign({},ihe(e))}}]},ahe=e=>({zIndexPopup:e.zIndexPopupBase+1e3+50,width:384}),she=e=>{const t=e.paddingMD,n=e.paddingLG;return $C(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${Un(e.paddingMD)} ${Un(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},lhe=YC("Notification",(e=>{const t=she(e);return[ohe(t),Jue(t),rhe(t)]}),ahe),che=ZC(["Notification","PurePanel"],(e=>{const t=`${e.componentCls}-notice`,n=she(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},ihe(n)),{width:n.width,maxWidth:`calc(100vw - ${Un(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}}),ahe);function uhe(e,t){return null===t||!1===t?null:t||n.createElement(mB,{className:`${e}-close-icon`})}const hhe={success:L9,info:B9,error:rX,warning:z9},dhe=e=>{const{prefixCls:t,icon:r,type:i,message:o,description:a,btn:s,role:l="alert"}=e;let c=null;return r?c=n.createElement("span",{className:`${t}-icon`},r):i&&(c=n.createElement(hhe[i]||null,{className:va()(`${t}-icon`,`${t}-icon-${i}`)})),n.createElement("div",{className:va()({[`${t}-with-icon`]:c}),role:l},c,n.createElement("div",{className:`${t}-message`},o),n.createElement("div",{className:`${t}-description`},a),s&&n.createElement("div",{className:`${t}-btn`},s))};const fhe=e=>{let{children:t,prefixCls:r}=e;const i=pV(r),[o,a,s]=lhe(r,i);return o(n.createElement(Gue,{classNames:{list:va()(a,s,i)}},t))},phe=(e,t)=>{let{prefixCls:r,key:i}=t;return n.createElement(fhe,{prefixCls:r,key:i},e)},mhe=n.forwardRef(((e,t)=>{const{top:r,bottom:i,prefixCls:o,getContainer:a,maxCount:s,rtl:l,onAllRemoved:c,stack:u,duration:h,pauseOnHover:d=!0,showProgress:f}=e,{getPrefixCls:p,getPopupContainer:m,notification:g,direction:v}=(0,n.useContext)(ia),[,y]=Co(),b=o||p("notification"),[x,_]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getContainer,r=void 0===t?Kue:t,i=e.motion,o=e.prefixCls,a=e.maxCount,s=e.className,l=e.style,c=e.onAllRemoved,u=e.stack,h=e.renderNotifications,d=Ca(e,Yue),f=Ht(n.useState(),2),p=f[0],m=f[1],g=n.useRef(),v=n.createElement(Xue,{container:p,ref:g,prefixCls:o,motion:i,maxCount:a,className:s,style:l,onAllRemoved:c,stack:u,renderNotifications:h}),y=Ht(n.useState([]),2),b=y[0],x=y[1],_=n.useMemo((function(){return{open:function(e){var t=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))})),e}(d,e);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(Zue),Zue+=1),x((function(e){return[].concat(Wt(e),[{type:"open",config:t}])}))},close:function(e){x((function(t){return[].concat(Wt(t),[{type:"close",key:e}])}))},destroy:function(){x((function(e){return[].concat(Wt(e),[{type:"destroy"}])}))}}}),[]);return n.useEffect((function(){m(r())})),n.useEffect((function(){g.current&&b.length&&(b.forEach((function(e){switch(e.type){case"open":g.current.open(e.config);break;case"close":g.current.close(e.key);break;case"destroy":g.current.destroy()}})),x((function(e){return e.filter((function(e){return!b.includes(e)}))})))}),[b]),[_,v]}({prefixCls:b,style:e=>function(e,t,n){let r;switch(e){case"top":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":r={left:0,top:t,bottom:"auto"};break;case"topRight":r={right:0,top:t,bottom:"auto"};break;case"bottom":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":r={left:0,top:"auto",bottom:n};break;default:r={right:0,top:"auto",bottom:n}}return r}(e,null!=r?r:24,null!=i?i:24),className:()=>va()({[`${b}-rtl`]:null!=l?l:"rtl"===v}),motion:()=>function(e){return{motionName:`${e}-fade`}}(b),closable:!0,closeIcon:uhe(b),duration:null!=h?h:4.5,getContainer:()=>(null==a?void 0:a())||(null==m?void 0:m())||document.body,maxCount:s,pauseOnHover:d,showProgress:f,onAllRemoved:c,renderNotifications:phe,stack:!1!==u&&{threshold:"object"==typeof u?null==u?void 0:u.threshold:void 0,offset:8,gap:y.margin}});return n.useImperativeHandle(t,(()=>Object.assign(Object.assign({},x),{prefixCls:b,notification:g}))),_}));function ghe(e){const t=n.useRef(null);return jo(),[n.useMemo((()=>{const r=r=>{var i;if(!t.current)return;const{open:o,prefixCls:a,notification:s}=t.current,l=`${a}-notice`,{message:c,description:u,icon:h,type:d,btn:f,className:p,style:m,role:g="alert",closeIcon:v,closable:y}=r,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),x=uhe(l,void 0!==v?v:null==s?void 0:s.closeIcon);return o(Object.assign(Object.assign({placement:null!==(i=null==e?void 0:e.placement)&&void 0!==i?i:"topRight"},b),{content:n.createElement(dhe,{prefixCls:l,icon:h,type:d,message:c,description:u,btn:f,role:g}),className:va()(d&&`${l}-${d}`,p,null==s?void 0:s.className),style:Object.assign(Object.assign({},null==s?void 0:s.style),m),closeIcon:x,closable:null!=y?y:!!x}))},i={open:r,destroy:e=>{var n,r;void 0!==e?null===(n=t.current)||void 0===n||n.close(e):null===(r=t.current)||void 0===r||r.destroy()}};return["success","info","warning","error"].forEach((e=>{i[e]=t=>r(Object.assign(Object.assign({},t),{type:e}))})),i}),[]),n.createElement(mhe,Object.assign({key:"notification-holder"},e,{ref:t}))]}let vhe=null,yhe=e=>e(),bhe=[],xhe={};function _he(){const{getContainer:e,rtl:t,maxCount:n,top:r,bottom:i,showProgress:o,pauseOnHover:a}=xhe,s=(null==e?void 0:e())||document.body;return{getContainer:()=>s,rtl:t,maxCount:n,top:r,bottom:i,showProgress:o,pauseOnHover:a}}const whe=n.forwardRef(((e,t)=>{const{notificationConfig:r,sync:i}=e,{getPrefixCls:o}=(0,n.useContext)(ia),a=xhe.prefixCls||o("notification"),s=(0,n.useContext)(Vue),[l,c]=ghe(Object.assign(Object.assign(Object.assign({},r),{prefixCls:a}),s.notification));return n.useEffect(i,[]),n.useImperativeHandle(t,(()=>{const e=Object.assign({},l);return Object.keys(e).forEach((t=>{e[t]=function(){return i(),l[t].apply(l,arguments)}})),{instance:e,sync:i}})),c})),She=n.forwardRef(((e,t)=>{const[r,i]=n.useState(_he),o=()=>{i(_he)};n.useEffect(o,[]);const a=Js(),s=a.getRootPrefixCls(),l=a.getIconPrefixCls(),c=a.getTheme(),u=n.createElement(whe,{ref:t,sync:o,notificationConfig:r});return n.createElement(tl,{prefixCls:s,iconPrefixCls:l,theme:c},a.holderRender?a.holderRender(u):u)}));function Ehe(){if(!vhe){const e=document.createDocumentFragment(),t={fragment:e};return vhe=t,void yhe((()=>{iU(n.createElement(She,{ref:e=>{const{instance:n,sync:r}=e||{};Promise.resolve().then((()=>{!t.instance&&n&&(t.instance=n,t.sync=r,Ehe())}))}}),e)}))}vhe.instance&&(bhe.forEach((e=>{switch(e.type){case"open":yhe((()=>{vhe.instance.open(Object.assign(Object.assign({},xhe),e.config))}));break;case"destroy":yhe((()=>{null==vhe||vhe.instance.destroy(e.key)}))}})),bhe=[])}function Che(e){Js(),bhe.push({type:"open",config:e}),Ehe()}const Mhe={open:Che,destroy:e=>{bhe.push({type:"destroy",key:e}),Ehe()},config:function(e){xhe=Object.assign(Object.assign({},xhe),e),yhe((()=>{var e;null===(e=null==vhe?void 0:vhe.sync)||void 0===e||e.call(vhe)}))},useNotification:function(e){return ghe(e)},_InternalPanelDoNotUseOrYouWillBeFired:e=>{const{prefixCls:t,className:r,icon:i,type:o,message:a,description:s,btn:l,closable:c=!0,closeIcon:u,className:h}=e,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:f}=n.useContext(ia),p=t||f("notification"),m=`${p}-notice`,g=pV(p),[v,y,b]=lhe(p,g);return v(n.createElement("div",{className:va()(`${m}-pure-panel`,y,r,b,g)},n.createElement(che,{prefixCls:p}),n.createElement($ue,Object.assign({},d,{prefixCls:p,eventKey:"pure",duration:null,closable:c,className:va()({notificationClassName:h}),closeIcon:uhe(p,u),content:n.createElement(dhe,{prefixCls:m,icon:i,type:o,message:a,description:s,btn:l})}))))}};["success","info","warning","error"].forEach((e=>{Mhe[e]=t=>Che(Object.assign(Object.assign({},t),{type:e}))}));const The=Mhe,Ahe=e=>{let t;return"object"==typeof e&&(null==e?void 0:e.clearIcon)?t=e:e&&(t={clearIcon:n.createElement(rX,null)}),t};function Phe(e,t){const r=(0,n.useRef)([]),i=()=>{r.current.push(setTimeout((()=>{var t,n,r,i;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=e.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(i=e.current)||void 0===i||i.input.removeAttribute("value"))})))};return(0,n.useEffect)((()=>(t&&i(),()=>r.current.forEach((e=>{e&&clearTimeout(e)})))),[]),i}const Rhe=(0,n.forwardRef)(((e,t)=>{var r;const{prefixCls:i,bordered:o=!0,status:a,size:s,disabled:l,onBlur:c,onFocus:u,suffix:h,allowClear:d,addonAfter:f,addonBefore:p,className:m,style:g,styles:v,rootClassName:y,onChange:b,classNames:x,variant:_}=e,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:S,direction:E,input:C}=n.useContext(ia),M=S("input",i),T=(0,n.useRef)(null),A=pV(M),[P,R,I]=HX(M,A),{compactSize:O,compactItemClassnames:k}=tz(M,E),L=XD((e=>{var t;return null!==(t=null!=s?s:O)&&void 0!==t?t:e})),N=n.useContext(ca),D=null!=l?l:N,{status:z,hasFeedback:U,feedbackIcon:F}=(0,n.useContext)(GD),B=Aq(z,a),j=function(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}(e)||!!U;(0,n.useRef)(j);const V=Phe(T,!0),$=(U||h)&&n.createElement(n.Fragment,null,h,U&&F),H=Ahe(null!=d?d:null==C?void 0:C.allowClear),[G,W]=Pq("input",_,o);return P(n.createElement(H3,Object.assign({ref:wa(t,T),prefixCls:M,autoComplete:null==C?void 0:C.autoComplete},w,{disabled:D,onBlur:e=>{V(),null==c||c(e)},onFocus:e=>{V(),null==u||u(e)},style:Object.assign(Object.assign({},null==C?void 0:C.style),g),styles:Object.assign(Object.assign({},null==C?void 0:C.styles),v),suffix:$,allowClear:H,className:va()(m,y,I,A,k,null==C?void 0:C.className),onChange:e=>{V(),null==b||b(e)},addonBefore:p&&n.createElement(iz,{form:!0,space:!0},p),addonAfter:f&&n.createElement(iz,{form:!0,space:!0},f),classNames:Object.assign(Object.assign(Object.assign({},x),null==C?void 0:C.classNames),{input:va()({[`${M}-sm`]:"small"===L,[`${M}-lg`]:"large"===L,[`${M}-rtl`]:"rtl"===E},null==x?void 0:x.input,null===(r=null==C?void 0:C.classNames)||void 0===r?void 0:r.input,R),variant:va()({[`${M}-${G}`]:W},Tq(M,B)),affixWrapper:va()({[`${M}-affix-wrapper-sm`]:"small"===L,[`${M}-affix-wrapper-lg`]:"large"===L,[`${M}-affix-wrapper-rtl`]:"rtl"===E},R),wrapper:va()({[`${M}-group-rtl`]:"rtl"===E},R),groupWrapper:va()({[`${M}-group-wrapper-sm`]:"small"===L,[`${M}-group-wrapper-lg`]:"large"===L,[`${M}-group-wrapper-rtl`]:"rtl"===E,[`${M}-group-wrapper-${G}`]:W},Tq(`${M}-group-wrapper`,B,U),R)})})))})),Ihe=e=>{const{componentCls:t,paddingXS:n}=e;return{[t]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},Ohe=YC(["Input","OTP"],(e=>{const t=$C(e,vX(e));return[Ihe(t)]}),yX);const khe=n.forwardRef(((e,t)=>{const{value:r,onChange:i,onActiveChange:o,index:a,mask:s}=e,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["value","onChange","onActiveChange","index","mask"]),c=r&&"string"==typeof s?s:r,u=n.useRef(null);n.useImperativeHandle(t,(()=>u.current));const h=()=>{bs((()=>{var e;const t=null===(e=u.current)||void 0===e?void 0:e.input;document.activeElement===t&&t&&t.select()}))};return n.createElement(Rhe,Object.assign({type:!0===s?"password":"text"},l,{ref:u,value:c,onInput:e=>{i(a,e.target.value)},onFocus:h,onKeyDown:e=>{const{key:t,ctrlKey:n,metaKey:r}=e;"ArrowLeft"===t?o(a-1):"ArrowRight"===t?o(a+1):"z"===t&&(n||r)&&e.preventDefault(),h()},onKeyUp:e=>{"Backspace"!==e.key||r||o(a-1),h()},onMouseDown:h,onMouseUp:h}))}));function Lhe(e){return(e||"").split("")}const Nhe=n.forwardRef(((e,t)=>{const{prefixCls:r,length:i=6,size:o,defaultValue:a,value:s,onChange:l,formatter:c,variant:u,disabled:h,status:d,autoFocus:f,mask:p,type:m,onInput:g,inputMode:v}=e,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:b,direction:x}=n.useContext(ia),_=b("otp",r),w=nB(y,{aria:!0,data:!0,attr:!0}),S=pV(_),[E,C,M]=Ohe(_,S),T=XD((e=>null!=o?o:e)),A=n.useContext(GD),P=Aq(A.status,d),R=n.useMemo((()=>Object.assign(Object.assign({},A),{status:P,hasFeedback:!1,feedbackIcon:null})),[A,P]),I=n.useRef(null),O=n.useRef({});n.useImperativeHandle(t,(()=>({focus:()=>{var e;null===(e=O.current[0])||void 0===e||e.focus()},blur:()=>{var e;for(let t=0;t<i;t+=1)null===(e=O.current[t])||void 0===e||e.blur()},nativeElement:I.current})));const k=e=>c?c(e):e,[L,N]=n.useState(Lhe(k(a||"")));n.useEffect((()=>{void 0!==s&&N(Lhe(s))}),[s]);const D=za((e=>{N(e),g&&g(e),l&&e.length===i&&e.every((e=>e))&&e.some(((e,t)=>L[t]!==e))&&l(e.join(""))})),z=za(((e,t)=>{let n=Wt(L);for(let t=0;t<e;t+=1)n[t]||(n[t]="");t.length<=1?n[e]=t:n=n.slice(0,e).concat(Lhe(t)),n=n.slice(0,i);for(let e=n.length-1;e>=0&&!n[e];e-=1)n.pop();const r=k(n.map((e=>e||" ")).join(""));return n=Lhe(r).map(((e,t)=>" "!==e||n[t]?e:n[t])),n})),U=(e,t)=>{var n;const r=z(e,t),o=Math.min(e+t.length,i-1);o!==e&&void 0!==r[e]&&(null===(n=O.current[o])||void 0===n||n.focus()),D(r)},F=e=>{var t;null===(t=O.current[e])||void 0===t||t.focus()},B={variant:u,disabled:h,status:P,mask:p,type:m,inputMode:v};return E(n.createElement("div",Object.assign({},w,{ref:I,className:va()(_,{[`${_}-sm`]:"small"===T,[`${_}-lg`]:"large"===T,[`${_}-rtl`]:"rtl"===x},M,C)}),n.createElement(GD.Provider,{value:R},Array.from({length:i}).map(((e,t)=>{const r=`otp-${t}`,i=L[t]||"";return n.createElement(khe,Object.assign({ref:e=>{O.current[t]=e},key:r,index:t,size:T,htmlSize:1,className:`${_}-input`,onChange:U,value:i,onActiveChange:F,autoFocus:0===t&&f},B))})))))})),Dhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};var zhe=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Dhe}))};const Uhe=n.forwardRef(zhe),Fhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var Bhe=function(e,t){return n.createElement(EC,nr({},e,{ref:t,icon:Fhe}))};const jhe=n.forwardRef(Bhe);const Vhe=e=>e?n.createElement(jhe,null):n.createElement(Uhe,null),$he={click:"onClick",hover:"onMouseOver"},Hhe=n.forwardRef(((e,t)=>{const{disabled:r,action:i="click",visibilityToggle:o=!0,iconRender:a=Vhe}=e,s=n.useContext(ca),l=null!=r?r:s,c="object"==typeof o&&void 0!==o.visible,[u,h]=(0,n.useState)((()=>!!c&&o.visible)),d=(0,n.useRef)(null);n.useEffect((()=>{c&&h(o.visible)}),[c,o]);const f=Phe(d),p=()=>{l||(u&&f(),h((e=>{var t;const n=!e;return"object"==typeof o&&(null===(t=o.onVisibleChange)||void 0===t||t.call(o,n)),n})))},{className:m,prefixCls:g,inputPrefixCls:v,size:y}=e,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:x}=n.useContext(ia),_=x("input",v),w=x("input-password",g),S=o&&(e=>{const t=$he[i]||"",r=a(u),o={[t]:p,className:`${e}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return n.cloneElement(n.isValidElement(r)?r:n.createElement("span",null,r),o)})(w),E=va()(w,m,{[`${w}-${y}`]:!!y}),C=Object.assign(Object.assign({},rC(b,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:E,prefixCls:_,suffix:S});return y&&(C.size=y),n.createElement(Rhe,Object.assign({ref:wa(t,d)},C))}));const Ghe=n.forwardRef(((e,t)=>{const{prefixCls:r,inputPrefixCls:i,className:o,size:a,suffix:s,enterButton:l=!1,addonAfter:c,loading:u,disabled:h,onSearch:d,onChange:f,onCompositionStart:p,onCompositionEnd:m}=e,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:v,direction:y}=n.useContext(ia),b=n.useRef(!1),x=v("input-search",r),_=v("input",i),{compactSize:w}=tz(x,y),S=XD((e=>{var t;return null!==(t=null!=a?a:w)&&void 0!==t?t:e})),E=n.useRef(null),C=e=>{var t;document.activeElement===(null===(t=E.current)||void 0===t?void 0:t.input)&&e.preventDefault()},M=e=>{var t,n;d&&d(null===(n=null===(t=E.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e,{source:"input"})},T="boolean"==typeof l?n.createElement(cX,null):null,A=`${x}-button`;let P;const R=l||{},I=R.type&&!0===R.type.__ANT_BUTTON;P=I||"button"===R.type?Tz(R,Object.assign({onMouseDown:C,onClick:e=>{var t,n;null===(n=null===(t=null==R?void 0:R.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),M(e)},key:"enterButton"},I?{className:A,size:S}:{})):n.createElement(wF,{className:A,type:l?"primary":void 0,size:S,disabled:h,key:"enterButton",onMouseDown:C,onClick:M,loading:u,icon:T},l),c&&(P=[P,Tz(c,{key:"addonAfter"})]);const O=va()(x,{[`${x}-rtl`]:"rtl"===y,[`${x}-${S}`]:!!S,[`${x}-with-button`]:!!l},o);return n.createElement(Rhe,Object.assign({ref:wa(E,t),onPressEnter:e=>{b.current||u||M(e)}},g,{size:S,onCompositionStart:e=>{b.current=!0,null==p||p(e)},onCompositionEnd:e=>{b.current=!1,null==m||m(e)},prefixCls:_,addonAfter:P,suffix:s,onChange:e=>{(null==e?void 0:e.target)&&"click"===e.type&&d&&d(e.target.value,e,{source:"clear"}),null==f||f(e)},className:O,disabled:h}))}));var Whe,qhe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Xhe={};var Yhe=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"];const Khe=n.forwardRef((function(e,t){var r=e,i=r.prefixCls,o=r.defaultValue,a=r.value,s=r.autoSize,l=r.onResize,c=r.className,u=r.style,h=r.disabled,d=r.onChange,f=(r.onInternalAutoSize,Ca(r,Yhe)),p=Ht(Ba(o,{value:a,postState:function(e){return null!=e?e:""}}),2),m=p[0],g=p[1],v=n.useRef();n.useImperativeHandle(t,(function(){return{textArea:v.current}}));var y=Ht(n.useMemo((function(){return s&&"object"===zt(s)?[s.minRows,s.maxRows]:[]}),[s]),2),b=y[0],x=y[1],_=!!s,w=Ht(n.useState(2),2),S=w[0],E=w[1],C=Ht(n.useState(),2),M=C[0],T=C[1],A=function(){E(0)};Wn((function(){_&&A()}),[a,b,x,_]),Wn((function(){if(0===S)E(1);else if(1===S){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Whe||((Whe=document.createElement("textarea")).setAttribute("tab-index","-1"),Whe.setAttribute("aria-hidden","true"),Whe.setAttribute("name","hiddenTextarea"),document.body.appendChild(Whe)),e.getAttribute("wrap")?Whe.setAttribute("wrap",e.getAttribute("wrap")):Whe.removeAttribute("wrap");var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Xhe[n])return Xhe[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:qhe.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:o,borderSize:a,boxSizing:i};return t&&n&&(Xhe[n]=s),s}(e,t),o=i.paddingSize,a=i.borderSize,s=i.boxSizing,l=i.sizingStyle;Whe.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),Whe.value=e.value||e.placeholder||"";var c,u=void 0,h=void 0,d=Whe.scrollHeight;if("border-box"===s?d+=a:"content-box"===s&&(d-=o),null!==n||null!==r){Whe.value=" ";var f=Whe.scrollHeight-o;null!==n&&(u=f*n,"border-box"===s&&(u=u+o+a),d=Math.max(u,d)),null!==r&&(h=f*r,"border-box"===s&&(h=h+o+a),c=d>h?"":"hidden",d=Math.min(h,d))}var p={height:d,overflowY:c,resize:"none"};return u&&(p.minHeight=u),h&&(p.maxHeight=h),p}(v.current,!1,b,x);E(2),T(e)}else!function(){try{if(document.activeElement===v.current){var e=v.current,t=e.selectionStart,n=e.selectionEnd,r=e.scrollTop;v.current.setSelectionRange(t,n),v.current.scrollTop=r}}catch(e){}}()}),[S]);var P=n.useRef(),R=function(){bs.cancel(P.current)};n.useEffect((function(){return R}),[]);var I=_?M:null,O=Xt(Xt({},u),I);return 0!==S&&1!==S||(O.overflowY="hidden",O.overflowX="hidden"),n.createElement(JL,{onResize:function(e){2===S&&(null==l||l(e),s&&(R(),P.current=bs((function(){A()}))))},disabled:!(s||l)},n.createElement("textarea",nr({},f,{ref:v,style:O,className:va()(i,c,Ft({},"".concat(i,"-disabled"),h)),disabled:h,value:m,onChange:function(e){g(e.target.value),null==d||d(e)}})))}));var Zhe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"];const Jhe=n.forwardRef((function(e,t){var r,i=e.defaultValue,o=e.value,a=e.onFocus,s=e.onBlur,l=e.onChange,c=e.allowClear,u=e.maxLength,h=e.onCompositionStart,d=e.onCompositionEnd,f=e.suffix,p=e.prefixCls,m=void 0===p?"rc-textarea":p,g=e.showCount,v=e.count,y=e.className,b=e.style,x=e.disabled,_=e.hidden,w=e.classNames,S=e.styles,E=e.onResize,C=e.onClear,M=e.onPressEnter,T=e.readOnly,A=e.autoSize,P=e.onKeyDown,R=Ca(e,Zhe),I=Ht(Ba(i,{value:o,defaultValue:i}),2),O=I[0],k=I[1],L=null==O?"":String(O),N=Ht(n.useState(!1),2),D=N[0],z=N[1],U=n.useRef(!1),F=Ht(n.useState(null),2),B=F[0],j=F[1],V=(0,n.useRef)(null),$=(0,n.useRef)(null),H=function(){var e;return null===(e=$.current)||void 0===e?void 0:e.textArea},G=function(){H().focus()};(0,n.useImperativeHandle)(t,(function(){var e;return{resizableTextArea:$.current,focus:G,blur:function(){H().blur()},nativeElement:(null===(e=V.current)||void 0===e?void 0:e.nativeElement)||H()}})),(0,n.useEffect)((function(){z((function(e){return!x&&e}))}),[x]);var W=Ht(n.useState(null),2),q=W[0],X=W[1];n.useEffect((function(){var e;q&&(e=H()).setSelectionRange.apply(e,Wt(q))}),[q]);var Y,K=V3(v,g),Z=null!==(r=K.max)&&void 0!==r?r:u,J=Number(Z)>0,Q=K.strategy(L),ee=!!Z&&Q>Z,te=function(e,t){var n=t;!U.current&&K.exceedFormatter&&K.max&&K.strategy(t)>K.max&&t!==(n=K.exceedFormatter(t,{max:K.max}))&&X([H().selectionStart||0,H().selectionEnd||0]),k(n),U3(e.currentTarget,e,l,n)},ne=f;K.show&&(Y=K.showFormatter?K.showFormatter({value:L,count:Q,maxLength:Z}):"".concat(Q).concat(J?" / ".concat(Z):""),ne=n.createElement(n.Fragment,null,ne,n.createElement("span",{className:va()("".concat(m,"-data-count"),null==w?void 0:w.count),style:null==S?void 0:S.count},Y)));var re=!A&&!g&&!c;return n.createElement(B3,{ref:V,value:L,allowClear:c,handleReset:function(e){k(""),G(),U3(H(),e,l)},suffix:ne,prefixCls:m,classNames:Xt(Xt({},w),{},{affixWrapper:va()(null==w?void 0:w.affixWrapper,Ft(Ft({},"".concat(m,"-show-count"),g),"".concat(m,"-textarea-allow-clear"),c))}),disabled:x,focused:D,className:va()(y,ee&&"".concat(m,"-out-of-range")),style:Xt(Xt({},b),B&&!re?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof Y?Y:void 0}},hidden:_,readOnly:T,onClear:C},n.createElement(Khe,nr({},R,{autoSize:A,maxLength:u,onKeyDown:function(e){"Enter"===e.key&&M&&M(e),null==P||P(e)},onChange:function(e){te(e,e.target.value)},onFocus:function(e){z(!0),null==a||a(e)},onBlur:function(e){z(!1),null==s||s(e)},onCompositionStart:function(e){U.current=!0,null==h||h(e)},onCompositionEnd:function(e){U.current=!1,te(e,e.currentTarget.value),null==d||d(e)},className:va()(null==w?void 0:w.textarea),style:Xt(Xt({},null==S?void 0:S.textarea),{},{resize:null==b?void 0:b.resize}),disabled:x,prefixCls:m,onResize:function(e){var t;null==E||E(e),null!==(t=H())&&void 0!==t&&t.style.height&&j(!0)},ref:$,readOnly:T})))}));const Qhe=(0,n.forwardRef)(((e,t)=>{var r,i;const{prefixCls:o,bordered:a=!0,size:s,disabled:l,status:c,allowClear:u,classNames:h,rootClassName:d,className:f,style:p,styles:m,variant:g}=e,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:y,direction:b,textArea:x}=n.useContext(ia),_=XD(s),w=n.useContext(ca),S=null!=l?l:w,{status:E,hasFeedback:C,feedbackIcon:M}=n.useContext(GD),T=Aq(E,c),A=n.useRef(null);n.useImperativeHandle(t,(()=>{var e;return{resizableTextArea:null===(e=A.current)||void 0===e?void 0:e.resizableTextArea,focus:e=>{var t,n;F3(null===(n=null===(t=A.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.blur()}}}));const P=y("input",o),R=pV(P),[I,O,k]=HX(P,R),[L,N]=Pq("textArea",g,a),D=Ahe(null!=u?u:null==x?void 0:x.allowClear);return I(n.createElement(Jhe,Object.assign({autoComplete:null==x?void 0:x.autoComplete},v,{style:Object.assign(Object.assign({},null==x?void 0:x.style),p),styles:Object.assign(Object.assign({},null==x?void 0:x.styles),m),disabled:S,allowClear:D,className:va()(k,R,f,d,null==x?void 0:x.className),classNames:Object.assign(Object.assign(Object.assign({},h),null==x?void 0:x.classNames),{textarea:va()({[`${P}-sm`]:"small"===_,[`${P}-lg`]:"large"===_},O,null==h?void 0:h.textarea,null===(r=null==x?void 0:x.classNames)||void 0===r?void 0:r.textarea),variant:va()({[`${P}-${L}`]:N},Tq(P,T)),affixWrapper:va()(`${P}-textarea-affix-wrapper`,{[`${P}-affix-wrapper-rtl`]:"rtl"===b,[`${P}-affix-wrapper-sm`]:"small"===_,[`${P}-affix-wrapper-lg`]:"large"===_,[`${P}-textarea-show-count`]:e.showCount||(null===(i=e.count)||void 0===i?void 0:i.show)},O)}),prefixCls:P,suffix:C&&n.createElement("span",{className:`${P}-textarea-suffix`},M),ref:A})))})),ede=Rhe;ede.Group=e=>{const{getPrefixCls:t,direction:r}=(0,n.useContext)(ia),{prefixCls:i,className:o}=e,a=t("input-group",i),s=t("input"),[l,c]=HX(s),u=va()(a,{[`${a}-lg`]:"large"===e.size,[`${a}-sm`]:"small"===e.size,[`${a}-compact`]:e.compact,[`${a}-rtl`]:"rtl"===r},c,o),h=(0,n.useContext)(GD),d=(0,n.useMemo)((()=>Object.assign(Object.assign({},h),{isFormItemInput:!1})),[h]);return l(n.createElement("span",{className:u,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},n.createElement(GD.Provider,{value:d},e.children)))},ede.Search=Ghe,ede.TextArea=Qhe,ede.Password=Hhe,ede.OTP=Nhe;const tde=ede;function nde(e){return nde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nde(e)}var rde;function ide(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ode(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ide(Object(n),!0).forEach((function(t){ade(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ide(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ade(e,t,n){return(t=function(e){var t=function(e){if("object"!=nde(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nde(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nde(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lde(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lde(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var cde=Fu.div(rde||(rde=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""])));const ude=Yj((function(e){var t,r,i=sde((0,n.useState)(!1),2),o=i[0],a=i[1],s=(0,n.useRef)(null),l=sde(The.useNotification({getContainer:s.current?function(){return s.current}:void 0,placement:"bottomLeft",duration:2}),2),c=l[0],u=l[1],h=location.protocol+"//"+location.host+location.pathname,d=ode(ode({},e),{},{cameraState:null===(t=e.view3dRef)||void 0===t||null===(t=t.current)||void 0===t?void 0:t.getCameraState()}),f=[];e.appProps.imageUrl&&(r=e.appProps.imageUrl instanceof Array?e.appProps.imageUrl.map((function(e){return encodeURIComponent(e)})).join(","):encodeURIComponent(e.appProps.imageUrl),f.push("url=".concat(r)));var p=new URLSearchParams(function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=function(e,t){var n,r,i,o,a,s;t&&(e=zne(e,Ek()));var l=(gre(gre(gre(gre(gre(gre(gre(gre(gre(gre(s={},Ore.Mode,e.renderMode),Ore.Mask,null===(n=e.maskAlpha)||void 0===n?void 0:n.toString()),Ore.Image,e.imageType),Ore.Axes,rie(e.showAxes)),Ore.BoundingBox,rie(e.showBoundingBox)),Ore.BoundingBoxColor,e.boundingBoxColor&&Zre(e.boundingBoxColor)),Ore.BackgroundColor,e.backgroundColor&&Zre(e.backgroundColor)),Ore.Autorotate,rie(e.autorotate)),Ore.Brightness,null===(r=e.brightness)||void 0===r?void 0:r.toString()),Ore.Density,null===(i=e.density)||void 0===i?void 0:i.toString()),gre(gre(gre(gre(gre(gre(s,Ore.Interpolation,rie(e.interpolationEnabled)),Ore.Region,e.region&&nie(e.region).map((function(e){return e.map((function(e){return tie(e)})).join(":")})).join(",")),Ore.Slice,e.slice&&nie(e.slice).map((function(e){return tie(e)})).join(",")),Ore.Levels,null===(o=e.levels)||void 0===o?void 0:o.join(",")),Ore.Time,null===(a=e.time)||void 0===a?void 0:a.toString()),Ore.CameraState,e.cameraState&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ak.threeD;if(!t||(e=zne(e,Sk(n)),0!==Object.keys(e).length)){var r=Gre(gre(gre(gre(gre(gre({},kre.Position,e.position&&e.position.map((function(e){return tie(e)})).join(":")),kre.Target,e.target&&e.target.map((function(e){return tie(e)})).join(":")),kre.Up,e.up&&e.up.map((function(e){return tie(e)})).join(":")),kre.OrthoScale,void 0===e.orthoScale?void 0:tie(e.orthoScale)),kre.Fov,void 0===e.fov?void 0:tie(e.fov)));return""===r?void 0:r}}(e.cameraState,t,e.viewMode))),c=gre(gre(gre(gre({},ak.threeD,"3D"),ak.xy,"Z"),ak.xz,"Y"),ak.yz,"X");return l[Ore.View]=e.viewMode&&c[e.viewMode],Dne(l)}(e,n),i=null===(t=e.channelSettings)||void 0===t?void 0:t.reduce((function(e,t,r){return e["c".concat(r)]=Gre(function(e,t){var n,r,i,o;return t&&(e=zne(e,Tk())),Dne(gre(gre(gre(gre(gre(gre(gre(gre(gre(gre({},Lre.VolumeEnabled,rie(e.volumeEnabled)),Lre.SurfaceEnabled,rie(e.isosurfaceEnabled)),Lre.IsosurfaceValue,null===(n=e.isovalue)||void 0===n?void 0:n.toString()),Lre.IsosurfaceAlpha,null===(r=e.opacity)||void 0===r?void 0:r.toString()),Lre.Colorize,rie(e.colorizeEnabled)),Lre.ColorizeAlpha,null===(i=e.colorizeAlpha)||void 0===i?void 0:i.toString()),Lre.Color,e.color&&Zre(e.color)),Lre.ControlPoints,e.controlPoints&&e.controlPoints.map((function(e){var t=tie(e.x),n=tie(e.opacity),r=(0,yM.isEqual)(e.color,xre)?"1":Zre(e.color);return"".concat(t,":").concat(n,":").concat(r)})).join(":")),Lre.ControlPointsEnabled,rie(e.useControlPoints)),Lre.Ramp,null===(o=e.ramp)||void 0===o?void 0:o.map((function(e){return tie(e)})).join(":")))}(t,n)),e}),{});return ore(ore({},r),i)}(d));if(p.size>0){var m=p.toString().replace(bre,":").replace(yre,",");f.push(m)}var g=f.length>0?"".concat(h,"?").concat(f.join("&")):h;return n.createElement(cde,{ref:s},u,n.createElement(wF,{type:"link",onClick:function(){return a(!o)}},n.createElement(jue,null),"Share"),n.createElement(pce,{open:o,title:"Share URL",onCancel:function(){a(!1)},getContainer:s.current||void 0,footer:n.createElement(wF,{type:"default",onClick:function(){return a(!1)}},"Close"),destroyOnClose:!0},n.createElement(Vse,{$gap:8,style:{marginTop:"12px"}},n.createElement(tde,{value:g,readOnly:!0}),n.createElement(wF,{type:"primary",onClick:function(){navigator.clipboard.writeText(g),c.success({message:"URL copied"})}},"Copy URL"))))}),Wj);function hde(e){return hde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hde(e)}function dde(){return dde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dde.apply(null,arguments)}function fde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fde(Object(n),!0).forEach((function(t){mde(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fde(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mde(e,t,n){return(t=function(e){var t=function(e){if("object"!=hde(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hde(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hde(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vde(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vde(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yde,bde={imageUrl:"",cellId:"",imageDownloadHref:"",parentImageDownloadHref:"",viewerChannelSettings:{groups:[{name:"Channels",channels:[{match:[0,1,2],enabled:!0},{match:"(.+)",enabled:!1}]}]}};function xde(){var e=Je(),t=et(),r=n.useRef(null),i=gde((0,n.useState)({}),2),o=i[0],a=i[1],s=gde((0,n.useState)(null),2),l=s[0],c=s[1],u=gde(Nt(),1)[0];return(0,n.useEffect)((function(){var t=e.state;uie(u).then((function(e){var n=e.args,r=e.viewerSettings;a(pde(pde({},r),null==t?void 0:t.viewerSettings)),c(pde(pde(pde({},bde),n),t))}),(function(e){console.warn("Failed to parse URL parameters: ",e),a({}),c(pde(pde({},bde),t))}))}),[]),n.createElement("div",null,n.createElement(Kj,{viewerSettings:o},n.createElement(ule,{noNavigate:!0},n.createElement($se,{$gap:12},n.createElement($se,{$gap:2},n.createElement(Uue,{onLoad:function(e){var n=e.imageUrl;Array.isArray(n)?t("/viewer?url=".concat(encodeURIComponent(n.join(","))),{state:e}):t("/viewer?url=".concat(encodeURIComponent(n)),{state:e}),t(0)}}),l&&n.createElement(ude,{appProps:l,view3dRef:r})),n.createElement(Sce,null))),l&&n.createElement(tte,dde({},l,{appHeight:"calc(100vh - ".concat(61,"px)"),canvasMargin:"0 0 0 0",view3dRef:r}))))}var _de=Fu.div(yde||(yde=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background-color: var(--color-landingpage-bg);\n  h2,\n  h3,\n  p {\n    margin: 0;\n  }\n"])));function wde(e){var t,r=ut();return t=function(e){return"number"==typeof e.status&&"string"==typeof e.statusText}(r)?r.status+" "+r.statusText:r instanceof Error?r.message:"Unknown error",n.createElement(_de,{style:{background:"var(--color-landingpage-bg)",height:"100%"}},n.createElement(ule,null),n.createElement(jse,{style:{width:"100%",padding:"40px 0"}},n.createElement("h1",null,"Sorry, something went wrong."),n.createElement(jse,null,n.createElement("p",null,"We encountered the following error:"),n.createElement(jse,{style:{margin:"20px 0"},$gap:10},n.createElement("h3",null,t),n.createElement("p",null,n.createElement("i",null,"Check the browser console for more details."))),n.createElement("p",null,"If the issue persists after a refresh,"," ",n.createElement(Rt,{to:"https://github.com/allen-cell-animated/vole-app/issues/new?template=bug_report.md",rel:"noopener noreferrer",target:"_blank"},"please click here to report it.",n.createElement(Pse,{icon:die,size:"sm",style:{marginBottom:"-1px",marginLeft:"3px"}})))),n.createElement("br",null),n.createElement(Rt,{to:"/"},n.createElement(wF,{type:"primary"},"Return to homepage"))))}const Sde=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:o,orientationMargin:a,verticalMarginInline:s}=e;return{[t]:Object.assign(Object.assign({},Bs(e)),{borderBlockStart:`${Un(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${Un(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${Un(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${Un(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${Un(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${a} * 100%)`},"&::after":{width:`calc(100% - ${a} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${a} * 100%)`},"&::after":{width:`calc(${a} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${Un(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:`${Un(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}},Ede=YC("Divider",(e=>{const t=$C(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[Sde(t)]}),(e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS})),{unitless:{orientationMargin:!0}});const Cde=e=>{const{getPrefixCls:t,direction:r,divider:i}=n.useContext(ia),{prefixCls:o,type:a="horizontal",orientation:s="center",orientationMargin:l,className:c,rootClassName:u,children:h,dashed:d,variant:f="solid",plain:p,style:m}=e,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),v=t("divider",o),[y,b,x]=Ede(v),_=!!h,w="left"===s&&null!=l,S="right"===s&&null!=l,E=va()(v,null==i?void 0:i.className,b,x,`${v}-${a}`,{[`${v}-with-text`]:_,[`${v}-with-text-${s}`]:_,[`${v}-dashed`]:!!d,[`${v}-${f}`]:"solid"!==f,[`${v}-plain`]:!!p,[`${v}-rtl`]:"rtl"===r,[`${v}-no-default-orientation-margin-left`]:w,[`${v}-no-default-orientation-margin-right`]:S},c,u),C=n.useMemo((()=>"number"==typeof l?l:/^\d+$/.test(l)?Number(l):l),[l]),M=Object.assign(Object.assign({},w&&{marginLeft:C}),S&&{marginRight:C});return y(n.createElement("div",Object.assign({className:E,style:Object.assign(Object.assign({},null==i?void 0:i.style),m)},g,{role:"separator"}),h&&"vertical"!==a&&n.createElement("span",{className:`${v}-inner-text`,style:M},h)))},Mde=a.p+"f134cca51cc9161aa724.mp4";function Tde(e){return Tde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tde(e)}function Ade(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ade(Object(n),!0).forEach((function(t){Rde(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ade(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rde(e,t,n){return(t=function(e){var t=function(e){if("object"!=Tde(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Tde(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tde(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ide,Ode,kde,Lde,Nde,Dde,zde,Ude,Fde,Bde,jde,Vde,$de,Hde={viewerChannelSettings:{maskChannelName:"",groups:[{name:"Channels",channels:[{match:[0],enabled:!0,lut:["autoij","autoij"],color:"C3C3C3"},{match:[1],enabled:!1},{match:[2],enabled:!0,colorizeEnabled:!0}]}]},viewerSettings:{viewMode:ak.xy,density:2.5}},Gde=[{name:"hiPSC FOV-nuclei timelapse datasets",inReview:!0,description:n.createElement("p",null,"3D timelapses of nuclei in growing hiPS cell colonies of three different starting sizes. Timelapse datasets include 3D transmitted-light bright-field and lamin B1-mEGFP fluorescence 20x images and 3D nuclear segmentation images. These datasets are available for download on"," ",n.createElement(Gse,{href:"https://open.quiltdata.com/b/allencell/tree/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/"},"Quilt")," ","and analyzed in the study"," ",n.createElement(Gse,{href:"https://www.biorxiv.org/content/10.1101/2024.06.28.601071v1"},"Dixon et al. 2024 (bioRxiv)"),"."),datasets:[{name:"Small colony",loadParams:Pde({imageUrl:["https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_09_small/raw.ome.zarr","https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_09_small/seg.ome.zarr"],cellId:"",imageDownloadHref:"",parentImageDownloadHref:""},Hde)},{name:"Medium colony",loadParams:Pde({imageUrl:["https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_06_medium/raw.ome.zarr","https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_06_medium/seg.ome.zarr"],cellId:"",imageDownloadHref:"",parentImageDownloadHref:""},Hde)},{name:"Large colony",loadParams:Pde({imageUrl:["https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_05_large/raw.ome.zarr","https://allencell.s3.amazonaws.com/aics/nuc-morph-dataset/hipsc_fov_nuclei_timelapse_dataset/hipsc_fov_nuclei_timelapse_data_used_for_analysis/baseline_colonies_fov_timelapse_dataset/20200323_05_large/seg.ome.zarr"],cellId:"",imageDownloadHref:"",parentImageDownloadHref:""},Hde)}]}];function Wde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qde(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qde(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xde(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Yde=Fu(jse)(Ide||(Ide=Xde(["\n  position: relative;\n  --container-padding-x: 20px;\n  padding: 40px var(--container-padding-x);\n  overflow: hidden;\n  margin: 0;\n"]))),Kde=Fu(jse)(Ode||(Ode=Xde(["\n  --padding-x: 30px;\n  padding: 26px var(--padding-x);\n  max-width: calc(","px - 2 * var(--padding-x));\n\n  --total-padding-x: calc(2 * var(--padding-x) + 2 * var(--container-padding-x));\n  width: calc(90vw - var(--total-padding-x));\n  border-radius: 5px;\n  background-color: var(--color-landingpage-banner-highlight-bg);\n  gap: 10px;\n\n  & > h1 {\n    margin-top: 0;\n  }\n\n  && > p {\n    font-size: 16px;\n    margin: 0;\n  }\n"])),1060),Zde=Fu.div(kde||(kde=Xde(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  z-index: -1;\n\n  & > div {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-image: linear-gradient(90deg, rgba(35, 25, 50, 0.5) 50%, rgba(0, 0, 0, 0) 70%);\n    z-index: 3;\n  }\n\n  & > video {\n    position: absolute;\n    width: 100%;\n    max-width: 1400px;\n    height: 100%;\n    left: 35%;\n    object-fit: cover;\n  }\n"]))),Jde=Fu(Bse)(Lde||(Lde=Xde(["\n  max-width: ","px;\n  width: calc(90vw - 40px);\n  margin: auto;\n  padding: 0 20px;\n  gap: 20px;\n\n  h2 {\n    color: var(--color-text-header);\n  }\n"])),1060),Qde=Fu.li(Nde||(Nde=Xde(["\n  display: grid;\n  width: 100%;\n  grid-template-rows: repeat(2, auto);\n  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));\n  padding: 0;\n  justify-content: space-evenly;\n  column-gap: 20px;\n  margin: 30px 0 0 0;\n"]))),efe=Fu(Bse)(Dde||(Dde=Xde(["\n  display: grid;\n  grid-template-rows: subgrid;\n  grid-row: span 2;\n  margin-bottom: 20px;\n\n  & > h3 {\n    font-weight: 600;\n    margin: 0 0 4px 0;\n  }\n\n  & > p {\n    margin: 0;\n  }\n"]))),tfe=Fu(jse)(zde||(zde=Xde(["\n  background-color: var(--color-landingpage-bg-alt);\n  // The lower margin on the top is required because of the 20px margin after FeatureHighlightsItem\n  margin: 10px 0 30px 0;\n  padding: 30px;\n  & h2 {\n    color: var(--color-text-header);\n  }\n"]))),nfe=Fu.ul(Ude||(Ude=Xde(['\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 0;\n  margin-top: 0;\n\n  // Add a pseudo-element line between cards\n  & > li:not(:first-child)::before {\n    content: "";\n    display: block;\n    width: 100%;\n    height: 1px;\n    background-color: var(--color-layout-dividers);\n    margin-bottom: 15px;\n  }\n']))),rfe=Fu.li(Fde||(Fde=Xde(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n\n  & h3 {\n    font-weight: 600;\n  }\n\n  & h2 {\n    font-size: 20px;\n  }\n\n  & p,\n  & h2,\n  & span {\n    margin: 0;\n  }\n\n  & a {\n    // Add 2px margin to maintain the same visual gap that text has\n    margin-top: 2px;\n  }\n\n  & :first-child {\n    // Add some visual separation beneath title element\n    margin-bottom: 2px;\n  }\n"]))),ife=Fu.ul(Bde||(Bde=Xde(["\n  padding: 0;\n  width: 100%;\n  display: grid;\n  margin: 4px 0 0 0;\n\n  // Use grid + subgrid to align the title, description, and button for each horizontal\n  // row of cards. repeat is used to tile the layout if the cards wrap to a new line.\n  grid-template-rows: repeat(3, auto);\n  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));\n  justify-content: space-around;\n  gap: 0px 20px;\n"]))),ofe=Fu.li(jde||(jde=Xde(["\n  display: grid;\n  grid-template-rows: subgrid;\n  grid-row: span 3;\n  min-width: 180px;\n  margin-top: 20px;\n\n  & > h3 {\n    display: grid;\n    margin: 0;\n  }\n  & > p {\n    display: grid;\n  }\n  & > a,\n  & > button {\n    margin: 4px auto 0 0;\n    display: grid;\n  }\n"]))),afe=Fu($se)(Vde||(Vde=Xde(["\n  border-radius: 4px;\n  padding: 1px 6px;\n  border: 1px solid var(--color-statusflag-border);\n  height: 23px;\n  flex-wrap: wrap;\n\n  && > p {\n    margin-bottom: 0;\n    color: var(--color-statusflag-text);\n    font-size: 11px;\n    font-weight: 500;\n    white-space: nowrap;\n  }\n"]))),sfe=Fu(wF)($de||($de=Xde(["\n  color: var(--color-text-body);\n  &:focus-visible > span,\n  &:hover > span {\n    text-decoration: underline;\n  }\n"])));function lfe(){var e=et(),t=Wde(Nt(),1)[0];(0,n.useEffect)((function(){uie(t).then((function(n){var r=n.args;Object.keys(r).length>0&&(console.log("Detected URL parameters. Redirecting from landing page to viewer."),e("viewer?"+t.toString(),{state:r,replace:!0}))}))}),[]);var r=function(t){var n=t.imageUrl;Array.isArray(n)?e("/viewer?url=".concat(encodeURIComponent(n.join(","))),{state:t}):e("/viewer?url=".concat(encodeURIComponent(n)),{state:t})},i=function(e,t){return n.createElement(ofe,{key:t},n.createElement("h3",null,e.name),e.description&&n.createElement("p",null,e.description),n.createElement(wF,{type:"primary",onClick:function(){return r(e.loadParams)}},"Load",n.createElement(Hse,null," dataset ",e.name)))},o=Wde((0,n.useState)(window.matchMedia("(prefers-reduced-motion: no-preference)").matches),2),a=o[0],s=o[1];return(0,n.useEffect)((function(){var e=window.matchMedia("(prefers-reduced-motion: no-preference)");return e.addEventListener("change",(function(){s(e.matches)})),function(){e.removeEventListener("change",(function(){s(e.matches)}))}}),[]),n.createElement("div",{style:{backgroundColor:"var(--color-landingpage-bg)",minHeight:"100%"}},n.createElement(ule,null,n.createElement($se,{$gap:12},n.createElement($se,{$gap:2},n.createElement(Uue,{onLoad:r})),n.createElement(Sce,null))),n.createElement(Yde,null,n.createElement(Zde,{style:{zIndex:1}},n.createElement("video",{autoPlay:a,loop:!0,muted:!0},n.createElement("source",{src:Mde,type:"video/mp4"})),n.createElement("div",null)),n.createElement(Kde,{style:{zIndex:1}},n.createElement("h1",null,"Welcome to Vol-E"),n.createElement("p",null,"Vol-E (Volume Explorer) is an open-use web-based tool designed to visualize, analyze, and interpret multi-channel 3D microscopy data. Ideal for researchers, educators, and students, the viewer offers powerful interactive tools to extract key insights from imaging data."))),n.createElement(Jde,null,n.createElement(Qde,null,n.createElement(efe,null,n.createElement("h3",null,"Multiresolution OME-Zarr support"),n.createElement("p",null,"Load your cloud-hosted OME-Zarr v0.4 images via http(s).")),n.createElement(efe,null,n.createElement("h3",null,"Multiple viewing modes"),n.createElement("p",null,"Rotate and examine the volume in 3D, or focus on single Z slices in 2D at higher resolution.")),n.createElement(efe,null,n.createElement("h3",null,"Time-series playthrough"),n.createElement("p",null,"Interactively explore dynamics and manipulate timelapse videos realtime in 2D or 3D.")),n.createElement(efe,null,n.createElement("h3",null,"Customizable settings"),n.createElement("p",null,"Switch colors, toggle channels, and apply thresholds to reveal interesting features in data.")))),n.createElement(tfe,null,n.createElement("h2",{style:{margin:0}},"Load a dataset below or your own data to get started.")),n.createElement(Jde,{style:{paddingBottom:"400px"}},n.createElement(nfe,null,Gde.map((function(e,t){var o=e.inReview?n.createElement($se,{$gap:10},n.createElement("h2",null,e.name),n.createElement(qz,{title:"Final version of dataset will be released when associated paper is published"},n.createElement(afe,null,n.createElement("p",null,"IN REVIEW")))):n.createElement("h2",null,e.name),a=e.publicationLink?n.createElement("p",null,"Related publication:"," ",n.createElement("a",{href:e.publicationLink.toString(),target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-text-link)"}},e.publicationName,n.createElement(Pse,{icon:die,size:"sm",style:{marginBottom:"-1px",marginLeft:"3px"}}),n.createElement(Hse,null,"(opens in new tab)"))):null,s=e.loadParams,l=s?n.createElement("div",null,n.createElement(wF,{type:"primary",onClick:function(){return r(s)}},"Load",n.createElement(Hse,null," dataset ",e.name))):null,c=e.datasets?n.createElement(ife,null,e.datasets.map(i)):null;return n.createElement(rfe,{key:t},o,n.createElement("p",null,e.description),a,l,c)})))),n.createElement(Jde,{style:{padding:"0 30px 40px 30px"}},n.createElement(Cde,null),n.createElement(jse,{style:{paddingTop:"20px"}},n.createElement(sfe,{type:"text",className:"ot-sdk-show-settings"},"Cookie settings",n.createElement(Hse,null,"(opens popup menu)")))))}console.log("vole-app ".concat("production"," build")),console.log("vole-app Version ".concat("2.10.4")),console.log("vole-app Basename ".concat("/vole-app/pr-preview/pr-359/")),console.log("vole-core Version ".concat("3.12.4"));var cfe,ufe=new URL(window.location.toString());if(""!==ufe.hash||""!==(cfe=ufe).search&&cfe.search.startsWith("?/")){var hfe=function(e){if(e.hash.startsWith("#/")){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.hash.slice(2).split("?"),2),n=t[0],r=t[1];e.pathname+=n,e.search=r?"?".concat(r):"",e.hash=""}return e}(function(e){return function(e){if(!e.search||!e.search.startsWith("?/"))return e;var t=e.search.slice(2).split("&").map((function(e){return e.replace(new RegExp("~and~","g"),"&")})).join("?");return new URL("".concat(e.origin).concat(e.pathname).concat(t).concat(e.hash))}(e)}(ufe)),dfe=hfe.pathname+hfe.search+hfe.hash;console.log("Redirecting to "+dfe),window.history.replaceState(null,"",dfe)}var ffe,pfe,mfe,gfe=(ffe=[{path:"/",element:n.createElement(lfe,null),errorElement:n.createElement(wde,null)},{path:"viewer",element:n.createElement(xde,null),errorElement:n.createElement(wde,null)}],function(t){const n=t.window?t.window:"undefined"!=typeof window?window:void 0,r=void 0!==n&&void 0!==n.document&&void 0!==n.document.createElement,i=!r;let o;if(u(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)o=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;o=t=>({hasErrorBoundary:e(t)})}else o=ne;let a,s,c,d={},p=b(t.routes,o,void 0,d),m=t.basename||"/",v=t.dataStrategy||fe,w=t.patchRoutesOnNavigation,S=l({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),E=null,C=new Set,M=null,T=null,A=null,P=null!=t.hydrationData,R=x(p,t.history.location,m),I=null;if(null==R&&!w){let e=Ce(404,{pathname:t.history.location.pathname}),{matches:n,route:r}=Ee(p);R=n,I={[r.id]:e}}if(R&&!t.hydrationData&&lt(R,p,t.history.location.pathname).active&&(R=null),R)if(R.some((e=>e.route.lazy)))s=!1;else if(R.some((e=>e.route.loader)))if(S.v7_partialHydration){let e=t.hydrationData?t.hydrationData.loaderData:null,n=t.hydrationData?t.hydrationData.errors:null;if(n){let t=R.findIndex((e=>void 0!==n[e.route.id]));s=R.slice(0,t+1).every((t=>!le(t.route,e,n)))}else s=R.every((t=>!le(t.route,e,n)))}else s=null!=t.hydrationData;else s=!0;else if(s=!1,R=[],S.v7_partialHydration){let e=lt(null,p,t.history.location.pathname);e.active&&e.matches&&(R=e.matches)}let O,k,L={historyAction:t.history.action,location:t.history.location,matches:R,initialized:s,navigation:J,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},D=e.Pop,z=!1,U=!1,F=new Map,B=null,j=!1,V=!1,$=[],H=new Set,W=new Map,q=0,X=-1,Y=new Map,K=new Set,ae=new Map,ce=new Map,ue=new Set,de=new Map,ye=new Map;function be(e,t){void 0===t&&(t={}),L=l({},L,e);let n=[],r=[];S.v7_fetcherPersist&&L.fetchers.forEach(((e,t)=>{"idle"===e.state&&(ue.has(t)?r.push(t):n.push(t))})),[...C].forEach((e=>e(L,{deletedFetchers:r,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync}))),S.v7_fetcherPersist&&(n.forEach((e=>L.fetchers.delete(e))),r.forEach((e=>Ke(e))))}function Te(n,r,i){var o,s;let c,{flushSync:u}=void 0===i?{}:i,h=null!=L.actionData&&null!=L.navigation.formMethod&&Le(L.navigation.formMethod)&&"loading"===L.navigation.state&&!0!==(null==(o=n.state)?void 0:o._isRedirect);c=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:h?L.actionData:null;let d=r.loaderData?_e(L.loaderData,r.loaderData,r.matches||[],r.errors):L.loaderData,f=L.blockers;f.size>0&&(f=new Map(f),f.forEach(((e,t)=>f.set(t,ee))));let m,g=!0===z||null!=L.navigation.formMethod&&Le(L.navigation.formMethod)&&!0!==(null==(s=n.state)?void 0:s._isRedirect);if(a&&(p=a,a=void 0),j||D===e.Pop||(D===e.Push?t.history.push(n,n.state):D===e.Replace&&t.history.replace(n,n.state)),D===e.Pop){let e=F.get(L.location.pathname);e&&e.has(n.pathname)?m={currentLocation:L.location,nextLocation:n}:F.has(n.pathname)&&(m={currentLocation:n,nextLocation:L.location})}else if(U){let e=F.get(L.location.pathname);e?e.add(n.pathname):(e=new Set([n.pathname]),F.set(L.location.pathname,e)),m={currentLocation:L.location,nextLocation:n}}be(l({},r,{actionData:c,loaderData:d,historyAction:D,location:n,initialized:!0,navigation:J,revalidation:"idle",restoreScrollPosition:st(n,r.matches||L.matches),preventScrollReset:g,blockers:f}),{viewTransitionOpts:m,flushSync:!0===u}),D=e.Pop,z=!1,U=!1,j=!1,V=!1,$=[]}async function Oe(n,r,i){O&&O.abort(),O=null,D=n,j=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(M&&A){let n=at(e,t);M[n]=A()}}(L.location,L.matches),z=!0===(i&&i.preventScrollReset),U=!0===(i&&i.enableViewTransition);let o=a||p,s=i&&i.overrideNavigation,c=x(o,r,m),u=!0===(i&&i.flushSync),h=lt(c,o,r.pathname);if(h.active&&h.matches&&(c=h.matches),!c){let{error:e,notFoundMatches:t,route:n}=it(r.pathname);return void Te(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:u})}if(L.initialized&&!V&&(d=L.location,f=r,d.pathname===f.pathname&&d.search===f.search&&(""===d.hash?""!==f.hash:d.hash===f.hash||""!==f.hash))&&!(i&&i.submission&&Le(i.submission.formMethod)))return void Te(r,{matches:c},{flushSync:u});var d,f;O=new AbortController;let v,y=ve(t.history,r,O.signal,i&&i.submission);if(i&&i.pendingError)v=[Se(c).route.id,{type:g.error,error:i.pendingError}];else if(i&&i.submission&&Le(i.submission.formMethod)){let n=await async function(t,n,r,i,o,a){void 0===a&&(a={}),We();let s,l=function(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}(n,r);if(be({navigation:l},{flushSync:!0===a.flushSync}),o){let e=await ct(i,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=Se(e.partialMatches).route.id;return{matches:e.partialMatches,pendingActionResult:[t,{type:g.error,error:e.error}]}}if(!e.matches){let{notFoundMatches:e,error:t,route:r}=it(n.pathname);return{matches:e,pendingActionResult:[r.id,{type:g.error,error:t}]}}i=e.matches}let c=Fe(i,n);if(c.route.action||c.route.lazy){if(s=(await He("action",L,t,[c],i,null))[c.route.id],t.signal.aborted)return{shortCircuited:!0}}else s={type:g.error,error:Ce(405,{method:t.method,pathname:n.pathname,routeId:c.route.id})};if(Ie(s)){let e;return e=a&&null!=a.replace?a.replace:ge(s.response.headers.get("Location"),new URL(t.url),m)===L.location.pathname+L.location.search,await Ue(t,s,!0,{submission:r,replace:e}),{shortCircuited:!0}}if(Pe(s))throw Ce(400,{type:"defer-action"});if(Re(s)){let t=Se(i,c.route.id);return!0!==(a&&a.replace)&&(D=e.Push),{matches:i,pendingActionResult:[t.route.id,s]}}return{matches:i,pendingActionResult:[c.route.id,s]}}(y,r,i.submission,c,h.active,{replace:i.replace,flushSync:u});if(n.shortCircuited)return;if(n.pendingActionResult){let[e,t]=n.pendingActionResult;if(Re(t)&&G(t.error)&&404===t.error.status)return O=null,void Te(r,{matches:n.matches,loaderData:{},errors:{[e]:t.error}})}c=n.matches||c,v=n.pendingActionResult,s=je(r,i.submission),u=!1,h.active=!1,y=ve(t.history,y.url,y.signal)}let{shortCircuited:b,matches:_,loaderData:w,errors:E}=await async function(e,n,r,i,o,s,c,u,h,d,f){let g=o||je(n,s),v=s||c||Be(g),y=!(j||S.v7_partialHydration&&h);if(i){if(y){let e=ke(f);be(l({navigation:g},void 0!==e?{actionData:e}:{}),{flushSync:d})}let t=await ct(r,n.pathname,e.signal);if("aborted"===t.type)return{shortCircuited:!0};if("error"===t.type){let e=Se(t.partialMatches).route.id;return{matches:t.partialMatches,loaderData:{},errors:{[e]:t.error}}}if(!t.matches){let{error:e,notFoundMatches:t,route:r}=it(n.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}r=t.matches}let b=a||p,[x,_]=se(t.history,L,r,v,n,S.v7_partialHydration&&!0===h,S.v7_skipActionErrorRevalidation,V,$,H,ue,ae,K,b,m,f);if(ot((e=>!(r&&r.some((t=>t.route.id===e)))||x&&x.some((t=>t.route.id===e)))),X=++q,0===x.length&&0===_.length){let e=Qe();return Te(n,l({matches:r,loaderData:{},errors:f&&Re(f[1])?{[f[0]]:f[1].error}:null},we(f),e?{fetchers:new Map(L.fetchers)}:{}),{flushSync:d}),{shortCircuited:!0}}if(y){let e={};if(!i){e.navigation=g;let t=ke(f);void 0!==t&&(e.actionData=t)}_.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=L.fetchers.get(e.key),n=Ve(void 0,t?t.data:void 0);L.fetchers.set(e.key,n)})),new Map(L.fetchers)}(_)),be(e,{flushSync:d})}_.forEach((e=>{Ze(e.key),e.controller&&W.set(e.key,e.controller)}));let w=()=>_.forEach((e=>Ze(e.key)));O&&O.signal.addEventListener("abort",w);let{loaderResults:E,fetcherResults:C}=await Ge(L,r,x,_,e);if(e.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",w),_.forEach((e=>W.delete(e.key)));let M=Me(E);if(M)return await Ue(e,M.result,!0,{replace:u}),{shortCircuited:!0};if(M=Me(C),M)return K.add(M.key),await Ue(e,M.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:T,errors:A}=xe(L,r,E,f,_,C,de);de.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&de.delete(t)}))})),S.v7_partialHydration&&h&&L.errors&&(A=l({},L.errors,A));let P=Qe(),R=et(X),I=P||R||_.length>0;return l({matches:r,loaderData:T,errors:A},I?{fetchers:new Map(L.fetchers)}:{})}(y,r,c,h.active,s,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,u,v);b||(O=null,Te(r,l({matches:_||c},we(v),{loaderData:w,errors:E})))}function ke(e){return e&&!Re(e[1])?{[e[0]]:e[1].data}:L.actionData?0===Object.keys(L.actionData).length?null:L.actionData:void 0}async function Ue(i,o,a,s){let{submission:c,fetcherSubmission:h,preventScrollReset:d,replace:p}=void 0===s?{}:s;o.response.headers.has("X-Remix-Revalidate")&&(V=!0);let g=o.response.headers.get("Location");u(g,"Expected a Location header on the redirect Response"),g=ge(g,new URL(i.url),m);let v=f(L.location,g,{_isRedirect:!0});if(r){let e=!1;if(o.response.headers.has("X-Remix-Reload-Document"))e=!0;else if(te.test(g)){const r=t.history.createURL(g);e=r.origin!==n.location.origin||null==N(r.pathname,m)}if(e)return void(p?n.location.replace(g):n.location.assign(g))}O=null;let y=!0===p||o.response.headers.has("X-Remix-Replace")?e.Replace:e.Push,{formMethod:b,formAction:x,formEncType:_}=L.navigation;!c&&!h&&b&&x&&_&&(c=Be(L.navigation));let w=c||h;if(Z.has(o.response.status)&&w&&Le(w.formMethod))await Oe(y,v,{submission:l({},w,{formAction:g}),preventScrollReset:d||z,enableViewTransition:a?U:void 0});else{let e=je(v,c);await Oe(y,v,{overrideNavigation:e,fetcherSubmission:h,preventScrollReset:d||z,enableViewTransition:a?U:void 0})}}async function He(e,t,n,r,i,a){let s,c={};try{s=await async function(e,t,n,r,i,o,a,s,c,d){let f=o.map((e=>e.route.lazy?async function(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];u(i,"No route found in manifest");let o={};for(let e in r){let t=void 0!==i[e]&&"hasErrorBoundary"!==e;h(!t,'Route "'+i.id+'" has a static property "'+e+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+e+'" will be ignored.'),t||y.has(e)||(o[e]=r[e])}Object.assign(i,o),Object.assign(i,l({},t(i),{lazy:void 0}))}(e.route,c,s):void 0)),p=o.map(((e,n)=>{let o=f[n],a=i.some((t=>t.route.id===e.route.id));return l({},e,{shouldLoad:a,resolve:async n=>(n&&"GET"===r.method&&(e.route.lazy||e.route.loader)&&(a=!0),a?async function(e,t,n,r,i,o){let a,s,l=r=>{let a,l=new Promise(((e,t)=>a=t));s=()=>a(),t.signal.addEventListener("abort",s);let c=i=>"function"!=typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+n.route.id+"]")):r({request:t,params:n.params,context:o},...void 0!==i?[i]:[]),u=(async()=>{try{return{type:"data",result:await(i?i((e=>c(e))):c())}}catch(e){return{type:"error",result:e}}})();return Promise.race([u,l])};try{let i=n.route[e];if(r)if(i){let e,[t]=await Promise.all([l(i).catch((t=>{e=t})),r]);if(void 0!==e)throw e;a=t}else{if(await r,i=n.route[e],!i){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Ce(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:g.data,result:void 0}}a=await l(i)}else{if(!i){let e=new URL(t.url);throw Ce(404,{pathname:e.pathname+e.search})}a=await l(i)}u(void 0!==a.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(e){return{type:g.error,result:e}}finally{s&&t.signal.removeEventListener("abort",s)}return a}(t,r,e,o,n,d):Promise.resolve({type:g.data,result:void 0}))})})),m=await e({matches:p,request:r,params:o[0].params,fetcherKey:a,context:d});try{await Promise.all(f)}catch(e){}return m}(v,e,0,n,r,i,a,d,o)}catch(e){return r.forEach((t=>{c[t.route.id]={type:g.error,error:e}})),c}for(let[e,t]of Object.entries(s))if(Ae(t)){let r=t.result;c[e]={type:g.redirect,response:me(r,n,e,i,m,S.v7_relativeSplatPath)}}else c[e]=await pe(t);return c}async function Ge(e,n,r,i,o){let a=e.matches,s=He("loader",0,o,r,n,null),l=Promise.all(i.map((async e=>{if(e.matches&&e.match&&e.controller){let n=(await He("loader",0,ve(t.history,e.path,e.controller.signal),[e.match],e.matches,e.key))[e.match.route.id];return{[e.key]:n}}return Promise.resolve({[e.key]:{type:g.error,error:Ce(404,{pathname:e.path})}})}))),c=await s,u=(await l).reduce(((e,t)=>Object.assign(e,t)),{});return await Promise.all([Ne(n,c,o.signal,a,e.loaderData),De(n,u,i)]),{loaderResults:c,fetcherResults:u}}function We(){V=!0,$.push(...ot()),ae.forEach(((e,t)=>{W.has(t)&&H.add(t),Ze(t)}))}function qe(e,t,n){void 0===n&&(n={}),L.fetchers.set(e,t),be({fetchers:new Map(L.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Xe(e,t,n,r){void 0===r&&(r={});let i=Se(L.matches,t);Ke(e),be({errors:{[i.route.id]:n},fetchers:new Map(L.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ye(e){return S.v7_fetcherPersist&&(ce.set(e,(ce.get(e)||0)+1),ue.has(e)&&ue.delete(e)),L.fetchers.get(e)||Q}function Ke(e){let t=L.fetchers.get(e);!W.has(e)||t&&"loading"===t.state&&Y.has(e)||Ze(e),ae.delete(e),Y.delete(e),K.delete(e),ue.delete(e),H.delete(e),L.fetchers.delete(e)}function Ze(e){let t=W.get(e);t&&(t.abort(),W.delete(e))}function Je(e){for(let t of e){let e=$e(Ye(t).data);L.fetchers.set(t,e)}}function Qe(){let e=[],t=!1;for(let n of K){let r=L.fetchers.get(n);u(r,"Expected fetcher: "+n),"loading"===r.state&&(K.delete(n),e.push(n),t=!0)}return Je(e),t}function et(e){let t=[];for(let[n,r]of Y)if(r<e){let e=L.fetchers.get(n);u(e,"Expected fetcher: "+n),"loading"===e.state&&(Ze(n),Y.delete(n),t.push(n))}return Je(t),t.length>0}function tt(e){L.blockers.delete(e),ye.delete(e)}function nt(e,t){let n=L.blockers.get(e)||ee;u("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(L.blockers);r.set(e,t),be({blockers:r})}function rt(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===ye.size)return;ye.size>1&&h(!1,"A router only supports one blocker at a time");let i=Array.from(ye.entries()),[o,a]=i[i.length-1],s=L.blockers.get(o);return s&&"proceeding"===s.state?void 0:a({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}function it(e){let t=Ce(404,{pathname:e}),n=a||p,{matches:r,route:i}=Ee(n);return ot(),{notFoundMatches:r,route:i,error:t}}function ot(e){let t=[];return de.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),de.delete(r))})),t}function at(e,t){return T&&T(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,L.loaderData))))||e.key}function st(e,t){if(M){let n=at(e,t),r=M[n];if("number"==typeof r)return r}return null}function lt(e,t,n){if(w){if(!e)return{active:!0,matches:_(t,n,m,!0)||[]};if(Object.keys(e[0].params).length>0)return{active:!0,matches:_(t,n,m,!0)}}return{active:!1,matches:null}}async function ct(e,t,n){if(!w)return{type:"success",matches:e};let r=e;for(;;){let e=null==a,i=a||p,s=d;try{await w({path:t,matches:r,patch:(e,t)=>{n.aborted||he(e,t,i,s,o)}})}catch(e){return{type:"error",error:e,partialMatches:r}}finally{e&&!n.aborted&&(p=[...p])}if(n.aborted)return{type:"aborted"};let l=x(i,t,m);if(l)return{type:"success",matches:l};let c=_(i,t,m,!0);if(!c||r.length===c.length&&r.every(((e,t)=>e.route.id===c[t].route.id)))return{type:"success",matches:null};r=c}}return c={get basename(){return m},get future(){return S},get state(){return L},get routes(){return p},get window(){return n},initialize:function(){if(E=t.history.listen((e=>{let{action:n,location:r,delta:i}=e;if(k)return k(),void(k=void 0);h(0===ye.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=rt({currentLocation:L.location,nextLocation:r,historyAction:n});if(o&&null!=i){let e=new Promise((e=>{k=e}));return t.history.go(-1*i),void nt(o,{state:"blocked",location:r,proceed(){nt(o,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.then((()=>t.history.go(i)))},reset(){let e=new Map(L.blockers);e.set(o,ee),be({blockers:e})}})}return Oe(n,r)})),r){!function(e,t){try{let n=e.sessionStorage.getItem(re);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(e){}}(n,F);let e=()=>function(e,t){if(t.size>0){let n={};for(let[e,r]of t)n[e]=[...r];try{e.sessionStorage.setItem(re,JSON.stringify(n))}catch(e){h(!1,"Failed to save applied view transitions in sessionStorage ("+e+").")}}}(n,F);n.addEventListener("pagehide",e),B=()=>n.removeEventListener("pagehide",e)}return L.initialized||Oe(e.Pop,L.location,{initialHydration:!0}),c},subscribe:function(e){return C.add(e),()=>C.delete(e)},enableScrollRestoration:function(e,t,n){if(M=e,A=t,T=n||null,!P&&L.navigation===J){P=!0;let e=st(L.location,L.matches);null!=e&&be({restoreScrollPosition:e})}return()=>{M=null,A=null,T=null}},navigate:async function n(r,i){if("number"==typeof r)return void t.history.go(r);let o=ie(L.location,L.matches,m,S.v7_prependBasename,r,S.v7_relativeSplatPath,null==i?void 0:i.fromRouteId,null==i?void 0:i.relative),{path:a,submission:s,error:c}=oe(S.v7_normalizeFormMethod,!1,o,i),u=L.location,h=f(L.location,a,i&&i.state);h=l({},h,t.history.encodeLocation(h));let d=i&&null!=i.replace?i.replace:void 0,p=e.Push;!0===d?p=e.Replace:!1===d||null!=s&&Le(s.formMethod)&&s.formAction===L.location.pathname+L.location.search&&(p=e.Replace);let g=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,v=!0===(i&&i.flushSync),y=rt({currentLocation:u,nextLocation:h,historyAction:p});if(!y)return await Oe(p,h,{submission:s,pendingError:c,preventScrollReset:g,replace:i&&i.replace,enableViewTransition:i&&i.viewTransition,flushSync:v});nt(y,{state:"blocked",location:h,proceed(){nt(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),n(r,i)},reset(){let e=new Map(L.blockers);e.set(y,ee),be({blockers:e})}})},fetch:function(e,n,r,o){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ze(e);let s=!0===(o&&o.flushSync),l=a||p,c=ie(L.location,L.matches,m,S.v7_prependBasename,r,S.v7_relativeSplatPath,n,null==o?void 0:o.relative),h=x(l,c,m),d=lt(h,l,c);if(d.active&&d.matches&&(h=d.matches),!h)return void Xe(e,n,Ce(404,{pathname:c}),{flushSync:s});let{path:f,submission:g,error:v}=oe(S.v7_normalizeFormMethod,!0,c,o);if(v)return void Xe(e,n,v,{flushSync:s});let y=Fe(h,f),b=!0===(o&&o.preventScrollReset);g&&Le(g.formMethod)?async function(e,n,r,i,o,s,l,c,h){function d(t){if(!t.route.action&&!t.route.lazy){let t=Ce(405,{method:h.formMethod,pathname:r,routeId:n});return Xe(e,n,t,{flushSync:l}),!0}return!1}if(We(),ae.delete(e),!s&&d(i))return;let f=L.fetchers.get(e);qe(e,function(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}(h,f),{flushSync:l});let g=new AbortController,v=ve(t.history,r,g.signal,h);if(s){let t=await ct(o,r,v.signal);if("aborted"===t.type)return;if("error"===t.type)return void Xe(e,n,t.error,{flushSync:l});if(!t.matches)return void Xe(e,n,Ce(404,{pathname:r}),{flushSync:l});if(d(i=Fe(o=t.matches,r)))return}W.set(e,g);let y=q,b=(await He("action",0,v,[i],o,e))[i.route.id];if(v.signal.aborted)return void(W.get(e)===g&&W.delete(e));if(S.v7_fetcherPersist&&ue.has(e)){if(Ie(b)||Re(b))return void qe(e,$e(void 0))}else{if(Ie(b))return W.delete(e),X>y?void qe(e,$e(void 0)):(K.add(e),qe(e,Ve(h)),Ue(v,b,!1,{fetcherSubmission:h,preventScrollReset:c}));if(Re(b))return void Xe(e,n,b.error)}if(Pe(b))throw Ce(400,{type:"defer-action"});let _=L.navigation.location||L.location,w=ve(t.history,_,g.signal),E=a||p,C="idle"!==L.navigation.state?x(E,L.navigation.location,m):L.matches;u(C,"Didn't find any matches after fetcher action");let M=++q;Y.set(e,M);let T=Ve(h,b.data);L.fetchers.set(e,T);let[A,P]=se(t.history,L,C,h,_,!1,S.v7_skipActionErrorRevalidation,V,$,H,ue,ae,K,E,m,[i.route.id,b]);P.filter((t=>t.key!==e)).forEach((e=>{let t=e.key,n=L.fetchers.get(t),r=Ve(void 0,n?n.data:void 0);L.fetchers.set(t,r),Ze(t),e.controller&&W.set(t,e.controller)})),be({fetchers:new Map(L.fetchers)});let R=()=>P.forEach((e=>Ze(e.key)));g.signal.addEventListener("abort",R);let{loaderResults:I,fetcherResults:k}=await Ge(L,C,A,P,w);if(g.signal.aborted)return;g.signal.removeEventListener("abort",R),Y.delete(e),W.delete(e),P.forEach((e=>W.delete(e.key)));let N=Me(I);if(N)return Ue(w,N.result,!1,{preventScrollReset:c});if(N=Me(k),N)return K.add(N.key),Ue(w,N.result,!1,{preventScrollReset:c});let{loaderData:z,errors:U}=xe(L,C,I,void 0,P,k,de);if(L.fetchers.has(e)){let t=$e(b.data);L.fetchers.set(e,t)}et(M),"loading"===L.navigation.state&&M>X?(u(D,"Expected pending action"),O&&O.abort(),Te(L.navigation.location,{matches:C,loaderData:z,errors:U,fetchers:new Map(L.fetchers)})):(be({errors:U,loaderData:_e(L.loaderData,z,C,U),fetchers:new Map(L.fetchers)}),V=!1)}(e,n,f,y,h,d.active,s,b,g):(ae.set(e,{routeId:n,path:f}),async function(e,n,r,i,o,a,s,l,c){let h=L.fetchers.get(e);qe(e,Ve(c,h?h.data:void 0),{flushSync:s});let d=new AbortController,f=ve(t.history,r,d.signal);if(a){let t=await ct(o,r,f.signal);if("aborted"===t.type)return;if("error"===t.type)return void Xe(e,n,t.error,{flushSync:s});if(!t.matches)return void Xe(e,n,Ce(404,{pathname:r}),{flushSync:s});i=Fe(o=t.matches,r)}W.set(e,d);let p=q,m=(await He("loader",0,f,[i],o,e))[i.route.id];if(Pe(m)&&(m=await ze(m,f.signal,!0)||m),W.get(e)===d&&W.delete(e),!f.signal.aborted){if(!ue.has(e))return Ie(m)?X>p?void qe(e,$e(void 0)):(K.add(e),void await Ue(f,m,!1,{preventScrollReset:l})):void(Re(m)?Xe(e,n,m.error):(u(!Pe(m),"Unhandled fetcher deferred data"),qe(e,$e(m.data))));qe(e,$e(void 0))}}(e,n,f,y,h,d.active,s,b,g))},revalidate:function(){We(),be({revalidation:"loading"}),"submitting"!==L.navigation.state&&("idle"!==L.navigation.state?Oe(D||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:!0===U}):Oe(L.historyAction,L.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:Ye,deleteFetcher:function(e){if(S.v7_fetcherPersist){let t=(ce.get(e)||0)-1;t<=0?(ce.delete(e),ue.add(e)):ce.set(e,t)}else Ke(e);be({fetchers:new Map(L.fetchers)})},dispose:function(){E&&E(),B&&B(),C.clear(),O&&O.abort(),L.fetchers.forEach(((e,t)=>Ke(t))),L.blockers.forEach(((e,t)=>tt(t)))},getBlocker:function(e,t){let n=L.blockers.get(e)||ee;return ye.get(e)!==t&&ye.set(e,t),n},deleteBlocker:tt,patchRoutes:function(e,t){let n=null==a;he(e,t,a||p,d,o),n&&(p=[...p],be({}))},_internalFetchControllers:W,_internalActiveDeferreds:de,_internalSetRoutes:function(e){d={},a=b(e,o,void 0,d)}},c}({basename:null==(pfe={basename:"/vole-app/pr-preview/pr-359/"})?void 0:pfe.basename,future:mt({},null==pfe?void 0:pfe.future,{v7_prependBasename:!0}),history:(mfe={window:null==pfe?void 0:pfe.window},void 0===mfe&&(mfe={}),function(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,s=o.history,h=e.Pop,m=null,g=v();function v(){return(s.state||{idx:null}).idx}function y(){h=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:h,location:x.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"==typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,s.replaceState(l({},s.state,{idx:g}),""));let x={get action(){return h},get location(){return t(o,s)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,y),m=e,()=>{o.removeEventListener(c,y),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){h=e.Push;let i=f(x.location,t,n);r&&r(i,t),g=v()+1;let l=d(i,g),c=x.createHref(i);try{s.pushState(l,"",c)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;o.location.assign(c)}a&&m&&m({action:h,location:x.location,delta:1})},replace:function(t,n){h=e.Replace;let i=f(x.location,t,n);r&&r(i,t),g=v();let o=d(i,g),l=x.createHref(i);s.replaceState(o,"",l),a&&m&&m({action:h,location:x.location,delta:0})},go:e=>s.go(e)};return x}((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:p(t)}),null,mfe)),hydrationData:(null==pfe?void 0:pfe.hydrationData)||function(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=mt({},t,{errors:yt(t.errors)})),t}(),routes:ffe,mapRouteProperties:function(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:n.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:n.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:n.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t},dataStrategy:null==pfe?void 0:pfe.dataStrategy,patchRoutesOnNavigation:null==pfe?void 0:pfe.patchRoutesOnNavigation,window:null==pfe?void 0:pfe.window}).initialize());(0,i.H)(document.getElementById("cell-viewer")).render(n.createElement(Qu,null,n.createElement(Ct,{router:gfe})))})()})();
//# sourceMappingURL=index.bundle.js.map